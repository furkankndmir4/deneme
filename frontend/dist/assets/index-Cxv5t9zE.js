var aue=Object.defineProperty;var iue=(t,e,n)=>e in t?aue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var R0=(t,e,n)=>iue(t,typeof e!="symbol"?e+"":e,n);function LK(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var im=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Un(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function oue(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var hE={exports:{}},O0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b5;function lue(){if(b5)return O0;b5=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var i=null;if(a!==void 0&&(i=""+a),s.key!==void 0&&(i=""+s.key),"key"in s){a={};for(var o in s)o!=="key"&&(a[o]=s[o])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:i,ref:s!==void 0?s:null,props:a}}return O0.Fragment=e,O0.jsx=n,O0.jsxs=n,O0}var x5;function uue(){return x5||(x5=1,hE.exports=lue()),hE.exports}var v=uue(),pE={exports:{}},en={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v5;function cue(){if(v5)return en;v5=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),d=Symbol.iterator;function h(H){return H===null||typeof H!="object"?null:(H=d&&H[d]||H["@@iterator"],typeof H=="function"?H:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function b(H,ee,te){this.props=H,this.context=ee,this.refs=y,this.updater=te||m}b.prototype.isReactComponent={},b.prototype.setState=function(H,ee){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ee,"setState")},b.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function w(){}w.prototype=b.prototype;function C(H,ee,te){this.props=H,this.context=ee,this.refs=y,this.updater=te||m}var k=C.prototype=new w;k.constructor=C,g(k,b.prototype),k.isPureReactComponent=!0;var T=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function A(H,ee,te,ne,he,Se){return te=Se.ref,{$$typeof:t,type:H,key:ee,ref:te!==void 0?te:null,props:Se}}function D(H,ee){return A(H.type,ee,void 0,void 0,void 0,H.props)}function P(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function R(H){var ee={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(te){return ee[te]})}var O=/\/+/g;function F(H,ee){return typeof H=="object"&&H!==null&&H.key!=null?R(""+H.key):ee.toString(36)}function z(){}function V(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(z,z):(H.status="pending",H.then(function(ee){H.status==="pending"&&(H.status="fulfilled",H.value=ee)},function(ee){H.status==="pending"&&(H.status="rejected",H.reason=ee)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function W(H,ee,te,ne,he){var Se=typeof H;(Se==="undefined"||Se==="boolean")&&(H=null);var Ie=!1;if(H===null)Ie=!0;else switch(Se){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(H.$$typeof){case t:case e:Ie=!0;break;case c:return Ie=H._init,W(Ie(H._payload),ee,te,ne,he)}}if(Ie)return he=he(H),Ie=ne===""?"."+F(H,0):ne,T(he)?(te="",Ie!=null&&(te=Ie.replace(O,"$&/")+"/"),W(he,ee,te,"",function($e){return $e})):he!=null&&(P(he)&&(he=D(he,te+(he.key==null||H&&H.key===he.key?"":(""+he.key).replace(O,"$&/")+"/")+Ie)),ee.push(he)),1;Ie=0;var Qe=ne===""?".":ne+":";if(T(H))for(var Ve=0;Ve<H.length;Ve++)ne=H[Ve],Se=Qe+F(ne,Ve),Ie+=W(ne,ee,te,Se,he);else if(Ve=h(H),typeof Ve=="function")for(H=Ve.call(H),Ve=0;!(ne=H.next()).done;)ne=ne.value,Se=Qe+F(ne,Ve++),Ie+=W(ne,ee,te,Se,he);else if(Se==="object"){if(typeof H.then=="function")return W(V(H),ee,te,ne,he);throw ee=String(H),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function j(H,ee,te){if(H==null)return H;var ne=[],he=0;return W(H,ne,"","",function(Se){return ee.call(te,Se,he++)}),ne}function q(H){if(H._status===-1){var ee=H._result;ee=ee(),ee.then(function(te){(H._status===0||H._status===-1)&&(H._status=1,H._result=te)},function(te){(H._status===0||H._status===-1)&&(H._status=2,H._result=te)}),H._status===-1&&(H._status=0,H._result=ee)}if(H._status===1)return H._result.default;throw H._result}var Y=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)};function Q(){}return en.Children={map:j,forEach:function(H,ee,te){j(H,function(){ee.apply(this,arguments)},te)},count:function(H){var ee=0;return j(H,function(){ee++}),ee},toArray:function(H){return j(H,function(ee){return ee})||[]},only:function(H){if(!P(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},en.Component=b,en.Fragment=n,en.Profiler=s,en.PureComponent=C,en.StrictMode=r,en.Suspense=l,en.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,en.__COMPILER_RUNTIME={__proto__:null,c:function(H){return N.H.useMemoCache(H)}},en.cache=function(H){return function(){return H.apply(null,arguments)}},en.cloneElement=function(H,ee,te){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ne=g({},H.props),he=H.key,Se=void 0;if(ee!=null)for(Ie in ee.ref!==void 0&&(Se=void 0),ee.key!==void 0&&(he=""+ee.key),ee)!I.call(ee,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&ee.ref===void 0||(ne[Ie]=ee[Ie]);var Ie=arguments.length-2;if(Ie===1)ne.children=te;else if(1<Ie){for(var Qe=Array(Ie),Ve=0;Ve<Ie;Ve++)Qe[Ve]=arguments[Ve+2];ne.children=Qe}return A(H.type,he,void 0,void 0,Se,ne)},en.createContext=function(H){return H={$$typeof:i,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:a,_context:H},H},en.createElement=function(H,ee,te){var ne,he={},Se=null;if(ee!=null)for(ne in ee.key!==void 0&&(Se=""+ee.key),ee)I.call(ee,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(he[ne]=ee[ne]);var Ie=arguments.length-2;if(Ie===1)he.children=te;else if(1<Ie){for(var Qe=Array(Ie),Ve=0;Ve<Ie;Ve++)Qe[Ve]=arguments[Ve+2];he.children=Qe}if(H&&H.defaultProps)for(ne in Ie=H.defaultProps,Ie)he[ne]===void 0&&(he[ne]=Ie[ne]);return A(H,Se,void 0,void 0,null,he)},en.createRef=function(){return{current:null}},en.forwardRef=function(H){return{$$typeof:o,render:H}},en.isValidElement=P,en.lazy=function(H){return{$$typeof:c,_payload:{_status:-1,_result:H},_init:q}},en.memo=function(H,ee){return{$$typeof:u,type:H,compare:ee===void 0?null:ee}},en.startTransition=function(H){var ee=N.T,te={};N.T=te;try{var ne=H(),he=N.S;he!==null&&he(te,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(Q,Y)}catch(Se){Y(Se)}finally{N.T=ee}},en.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},en.use=function(H){return N.H.use(H)},en.useActionState=function(H,ee,te){return N.H.useActionState(H,ee,te)},en.useCallback=function(H,ee){return N.H.useCallback(H,ee)},en.useContext=function(H){return N.H.useContext(H)},en.useDebugValue=function(){},en.useDeferredValue=function(H,ee){return N.H.useDeferredValue(H,ee)},en.useEffect=function(H,ee,te){var ne=N.H;if(typeof te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect(H,ee)},en.useId=function(){return N.H.useId()},en.useImperativeHandle=function(H,ee,te){return N.H.useImperativeHandle(H,ee,te)},en.useInsertionEffect=function(H,ee){return N.H.useInsertionEffect(H,ee)},en.useLayoutEffect=function(H,ee){return N.H.useLayoutEffect(H,ee)},en.useMemo=function(H,ee){return N.H.useMemo(H,ee)},en.useOptimistic=function(H,ee){return N.H.useOptimistic(H,ee)},en.useReducer=function(H,ee,te){return N.H.useReducer(H,ee,te)},en.useRef=function(H){return N.H.useRef(H)},en.useState=function(H){return N.H.useState(H)},en.useSyncExternalStore=function(H,ee,te){return N.H.useSyncExternalStore(H,ee,te)},en.useTransition=function(){return N.H.useTransition()},en.version="19.1.0",en}var w5;function FC(){return w5||(w5=1,pE.exports=cue()),pE.exports}var L=FC();const pe=Un(L),C3=LK({__proto__:null,default:pe},[L]);var mE={exports:{}},_0={},gE={exports:{}},yE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S5;function due(){return S5||(S5=1,function(t){function e(j,q){var Y=j.length;j.push(q);e:for(;0<Y;){var Q=Y-1>>>1,H=j[Q];if(0<s(H,q))j[Q]=q,j[Y]=H,Y=Q;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var q=j[0],Y=j.pop();if(Y!==q){j[0]=Y;e:for(var Q=0,H=j.length,ee=H>>>1;Q<ee;){var te=2*(Q+1)-1,ne=j[te],he=te+1,Se=j[he];if(0>s(ne,Y))he<H&&0>s(Se,ne)?(j[Q]=Se,j[he]=Y,Q=he):(j[Q]=ne,j[te]=Y,Q=te);else if(he<H&&0>s(Se,Y))j[Q]=Se,j[he]=Y,Q=he;else break e}}return q}function s(j,q){var Y=j.sortIndex-q.sortIndex;return Y!==0?Y:j.id-q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var l=[],u=[],c=1,d=null,h=3,m=!1,g=!1,y=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function T(j){for(var q=n(u);q!==null;){if(q.callback===null)r(u);else if(q.startTime<=j)r(u),q.sortIndex=q.expirationTime,e(l,q);else break;q=n(u)}}function N(j){if(y=!1,T(j),!g)if(n(l)!==null)g=!0,I||(I=!0,F());else{var q=n(u);q!==null&&W(N,q.startTime-j)}}var I=!1,A=-1,D=5,P=-1;function R(){return b?!0:!(t.unstable_now()-P<D)}function O(){if(b=!1,I){var j=t.unstable_now();P=j;var q=!0;try{e:{g=!1,y&&(y=!1,C(A),A=-1),m=!0;var Y=h;try{t:{for(T(j),d=n(l);d!==null&&!(d.expirationTime>j&&R());){var Q=d.callback;if(typeof Q=="function"){d.callback=null,h=d.priorityLevel;var H=Q(d.expirationTime<=j);if(j=t.unstable_now(),typeof H=="function"){d.callback=H,T(j),q=!0;break t}d===n(l)&&r(l),T(j)}else r(l);d=n(l)}if(d!==null)q=!0;else{var ee=n(u);ee!==null&&W(N,ee.startTime-j),q=!1}}break e}finally{d=null,h=Y,m=!1}q=void 0}}finally{q?F():I=!1}}}var F;if(typeof k=="function")F=function(){k(O)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,V=z.port2;z.port1.onmessage=O,F=function(){V.postMessage(null)}}else F=function(){w(O,0)};function W(j,q){A=w(function(){j(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_next=function(j){switch(h){case 1:case 2:case 3:var q=3;break;default:q=h}var Y=h;h=q;try{return j()}finally{h=Y}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(j,q){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Y=h;h=j;try{return q()}finally{h=Y}},t.unstable_scheduleCallback=function(j,q,Y){var Q=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?Q+Y:Q):Y=Q,j){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=Y+H,j={id:c++,callback:q,priorityLevel:j,startTime:Y,expirationTime:H,sortIndex:-1},Y>Q?(j.sortIndex=Y,e(u,j),n(l)===null&&j===n(u)&&(y?(C(A),A=-1):y=!0,W(N,Y-Q))):(j.sortIndex=H,e(l,j),g||m||(g=!0,I||(I=!0,F()))),j},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(j){var q=h;return function(){var Y=h;h=q;try{return j.apply(this,arguments)}finally{h=Y}}}}(yE)),yE}var C5;function fue(){return C5||(C5=1,gE.exports=due()),gE.exports}var bE={exports:{}},Ta={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k5;function hue(){if(k5)return Ta;k5=1;var t=FC();function e(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)u+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(l,u,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:d==null?null:""+d,children:l,containerInfo:u,implementation:c}}var i=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Ta.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ta.createPortal=function(l,u){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(l,u,null,c)},Ta.flushSync=function(l){var u=i.T,c=r.p;try{if(i.T=null,r.p=2,l)return l()}finally{i.T=u,r.p=c,r.d.f()}},Ta.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(l,u))},Ta.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Ta.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var c=u.as,d=o(c,u.crossOrigin),h=typeof u.integrity=="string"?u.integrity:void 0,m=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;c==="style"?r.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:d,integrity:h,fetchPriority:m}):c==="script"&&r.d.X(l,{crossOrigin:d,integrity:h,fetchPriority:m,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Ta.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var c=o(u.as,u.crossOrigin);r.d.M(l,{crossOrigin:c,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(l)},Ta.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var c=u.as,d=o(c,u.crossOrigin);r.d.L(l,c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Ta.preloadModule=function(l,u){if(typeof l=="string")if(u){var c=o(u.as,u.crossOrigin);r.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:c,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(l)},Ta.requestFormReset=function(l){r.d.r(l)},Ta.unstable_batchedUpdates=function(l,u){return l(u)},Ta.useFormState=function(l,u,c){return i.H.useFormState(l,u,c)},Ta.useFormStatus=function(){return i.H.useHostTransitionStatus()},Ta.version="19.1.0",Ta}var N5;function FK(){if(N5)return bE.exports;N5=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),bE.exports=hue(),bE.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T5;function pue(){if(T5)return _0;T5=1;var t=fue(),e=FC(),n=FK();function r(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)p+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function a(f){var p=f,x=f;if(f.alternate)for(;p.return;)p=p.return;else{f=p;do p=f,(p.flags&4098)!==0&&(x=p.return),f=p.return;while(f)}return p.tag===3?x:null}function i(f){if(f.tag===13){var p=f.memoizedState;if(p===null&&(f=f.alternate,f!==null&&(p=f.memoizedState)),p!==null)return p.dehydrated}return null}function o(f){if(a(f)!==f)throw Error(r(188))}function l(f){var p=f.alternate;if(!p){if(p=a(f),p===null)throw Error(r(188));return p!==f?null:f}for(var x=f,S=p;;){var $=x.return;if($===null)break;var _=$.alternate;if(_===null){if(S=$.return,S!==null){x=S;continue}break}if($.child===_.child){for(_=$.child;_;){if(_===x)return o($),f;if(_===S)return o($),p;_=_.sibling}throw Error(r(188))}if(x.return!==S.return)x=$,S=_;else{for(var G=!1,Z=$.child;Z;){if(Z===x){G=!0,x=$,S=_;break}if(Z===S){G=!0,S=$,x=_;break}Z=Z.sibling}if(!G){for(Z=_.child;Z;){if(Z===x){G=!0,x=_,S=$;break}if(Z===S){G=!0,S=_,x=$;break}Z=Z.sibling}if(!G)throw Error(r(189))}}if(x.alternate!==S)throw Error(r(190))}if(x.tag!==3)throw Error(r(188));return x.stateNode.current===x?f:p}function u(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f;for(f=f.child;f!==null;){if(p=u(f),p!==null)return p;f=f.sibling}return null}var c=Object.assign,d=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),k=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function F(f){return f===null||typeof f!="object"?null:(f=O&&f[O]||f["@@iterator"],typeof f=="function"?f:null)}var z=Symbol.for("react.client.reference");function V(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===z?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case g:return"Fragment";case b:return"Profiler";case y:return"StrictMode";case N:return"Suspense";case I:return"SuspenseList";case P:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case m:return"Portal";case k:return(f.displayName||"Context")+".Provider";case C:return(f._context.displayName||"Context")+".Consumer";case T:var p=f.render;return f=f.displayName,f||(f=p.displayName||p.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case A:return p=f.displayName||null,p!==null?p:V(f.type)||"Memo";case D:p=f._payload,f=f._init;try{return V(f(p))}catch{}}return null}var W=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},Q=[],H=-1;function ee(f){return{current:f}}function te(f){0>H||(f.current=Q[H],Q[H]=null,H--)}function ne(f,p){H++,Q[H]=f.current,f.current=p}var he=ee(null),Se=ee(null),Ie=ee(null),Qe=ee(null);function Ve(f,p){switch(ne(Ie,p),ne(Se,f),ne(he,null),p.nodeType){case 9:case 11:f=(f=p.documentElement)&&(f=f.namespaceURI)?HB(f):0;break;default:if(f=p.tagName,p=p.namespaceURI)p=HB(p),f=qB(p,f);else switch(f){case"svg":f=1;break;case"math":f=2;break;default:f=0}}te(he),ne(he,f)}function $e(){te(he),te(Se),te(Ie)}function We(f){f.memoizedState!==null&&ne(Qe,f);var p=he.current,x=qB(p,f.type);p!==x&&(ne(Se,f),ne(he,x))}function ze(f){Se.current===f&&(te(he),te(Se)),Qe.current===f&&(te(Qe),T0._currentValue=Y)}var ke=Object.prototype.hasOwnProperty,et=t.unstable_scheduleCallback,Je=t.unstable_cancelCallback,Re=t.unstable_shouldYield,Ke=t.unstable_requestPaint,xe=t.unstable_now,De=t.unstable_getCurrentPriorityLevel,at=t.unstable_ImmediatePriority,Xe=t.unstable_UserBlockingPriority,Nt=t.unstable_NormalPriority,Be=t.unstable_LowPriority,Tt=t.unstable_IdlePriority,Ot=t.log,Wn=t.unstable_setDisableYieldValue,rn=null,cn=null;function Jt(f){if(typeof Ot=="function"&&Wn(f),cn&&typeof cn.setStrictMode=="function")try{cn.setStrictMode(rn,f)}catch{}}var Mn=Math.clz32?Math.clz32:cl,Ua=Math.log,Li=Math.LN2;function cl(f){return f>>>=0,f===0?32:31-(Ua(f)/Li|0)|0}var ms=256,Va=4194304;function aa(f){var p=f&42;if(p!==0)return p;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function dl(f,p,x){var S=f.pendingLanes;if(S===0)return 0;var $=0,_=f.suspendedLanes,G=f.pingedLanes;f=f.warmLanes;var Z=S&134217727;return Z!==0?(S=Z&~_,S!==0?$=aa(S):(G&=Z,G!==0?$=aa(G):x||(x=Z&~f,x!==0&&($=aa(x))))):(Z=S&~_,Z!==0?$=aa(Z):G!==0?$=aa(G):x||(x=S&~f,x!==0&&($=aa(x)))),$===0?0:p!==0&&p!==$&&(p&_)===0&&(_=$&-$,x=p&-p,_>=x||_===32&&(x&4194048)!==0)?p:$}function Fi(f,p){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&p)===0}function Yl(f,p){switch(f){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wa(){var f=ms;return ms<<=1,(ms&4194048)===0&&(ms=256),f}function zi(){var f=Va;return Va<<=1,(Va&62914560)===0&&(Va=4194304),f}function fl(f){for(var p=[],x=0;31>x;x++)p.push(f);return p}function Bi(f,p){f.pendingLanes|=p,p!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function Ql(f,p,x,S,$,_){var G=f.pendingLanes;f.pendingLanes=x,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=x,f.entangledLanes&=x,f.errorRecoveryDisabledLanes&=x,f.shellSuspendCounter=0;var Z=f.entanglements,oe=f.expirationTimes,Ne=f.hiddenUpdates;for(x=G&~x;0<x;){var Le=31-Mn(x),Ue=1<<Le;Z[Le]=0,oe[Le]=-1;var Te=Ne[Le];if(Te!==null)for(Ne[Le]=null,Le=0;Le<Te.length;Le++){var Ae=Te[Le];Ae!==null&&(Ae.lane&=-536870913)}x&=~Ue}S!==0&&Zl(f,S,0),_!==0&&$===0&&f.tag!==0&&(f.suspendedLanes|=_&~(G&~p))}function Zl(f,p,x){f.pendingLanes|=p,f.suspendedLanes&=~p;var S=31-Mn(p);f.entangledLanes|=p,f.entanglements[S]=f.entanglements[S]|1073741824|x&4194090}function Ga(f,p){var x=f.entangledLanes|=p;for(f=f.entanglements;x;){var S=31-Mn(x),$=1<<S;$&p|f[S]&p&&(f[S]|=p),x&=~$}}function xo(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function hl(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function vo(){var f=q.p;return f!==0?f:(f=window.event,f===void 0?32:f5(f.type))}function pl(f,p){var x=q.p;try{return q.p=f,p()}finally{q.p=x}}var xa=Math.random().toString(36).slice(2),Qn="__reactFiber$"+xa,Wr="__reactProps$"+xa,Gr="__reactContainer$"+xa,va="__reactEvents$"+xa,Uu="__reactListeners$"+xa,Zn="__reactHandles$"+xa,Rs="__reactResources$"+xa,Ha="__reactMarker$"+xa;function ml(f){delete f[Qn],delete f[Wr],delete f[va],delete f[Uu],delete f[Zn]}function ia(f){var p=f[Qn];if(p)return p;for(var x=f.parentNode;x;){if(p=x[Gr]||x[Qn]){if(x=p.alternate,p.child!==null||x!==null&&x.child!==null)for(f=QB(f);f!==null;){if(x=f[Qn])return x;f=QB(f)}return p}f=x,x=f.parentNode}return null}function wa(f){if(f=f[Qn]||f[Gr]){var p=f.tag;if(p===5||p===6||p===13||p===26||p===27||p===3)return f}return null}function Sa(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f.stateNode;throw Error(r(33))}function Vs(f){var p=f[Rs];return p||(p=f[Rs]={hoistableStyles:new Map,hoistableScripts:new Map}),p}function lr(f){f[Ha]=!0}var wo=new Set,So={};function Ca(f,p){Nr(f,p),Nr(f+"Capture",p)}function Nr(f,p){for(So[f]=p,f=0;f<p.length;f++)wo.add(p[f])}var Ws=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fi={},Co={};function gl(f){return ke.call(Co,f)?!0:ke.call(fi,f)?!1:Ws.test(f)?Co[f]=!0:(fi[f]=!0,!1)}function Ui(f,p,x){if(gl(p))if(x===null)f.removeAttribute(p);else{switch(typeof x){case"undefined":case"function":case"symbol":f.removeAttribute(p);return;case"boolean":var S=p.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){f.removeAttribute(p);return}}f.setAttribute(p,""+x)}}function hi(f,p,x){if(x===null)f.removeAttribute(p);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(p);return}f.setAttribute(p,""+x)}}function yr(f,p,x,S){if(S===null)f.removeAttribute(x);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(x);return}f.setAttributeNS(p,x,""+S)}}var ko,Vi;function Pr(f){if(ko===void 0)try{throw Error()}catch(x){var p=x.stack.trim().match(/\n( *(at )?)/);ko=p&&p[1]||"",Vi=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ko+f+Vi}var pi=!1;function yl(f,p){if(!f||pi)return"";pi=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(p){var Ue=function(){throw Error()};if(Object.defineProperty(Ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ue,[])}catch(Ae){var Te=Ae}Reflect.construct(f,[],Ue)}else{try{Ue.call()}catch(Ae){Te=Ae}f.call(Ue.prototype)}}else{try{throw Error()}catch(Ae){Te=Ae}(Ue=f())&&typeof Ue.catch=="function"&&Ue.catch(function(){})}}catch(Ae){if(Ae&&Te&&typeof Ae.stack=="string")return[Ae.stack,Te.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var $=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");$&&$.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=S.DetermineComponentFrameRoot(),G=_[0],Z=_[1];if(G&&Z){var oe=G.split(`
`),Ne=Z.split(`
`);for($=S=0;S<oe.length&&!oe[S].includes("DetermineComponentFrameRoot");)S++;for(;$<Ne.length&&!Ne[$].includes("DetermineComponentFrameRoot");)$++;if(S===oe.length||$===Ne.length)for(S=oe.length-1,$=Ne.length-1;1<=S&&0<=$&&oe[S]!==Ne[$];)$--;for(;1<=S&&0<=$;S--,$--)if(oe[S]!==Ne[$]){if(S!==1||$!==1)do if(S--,$--,0>$||oe[S]!==Ne[$]){var Le=`
`+oe[S].replace(" at new "," at ");return f.displayName&&Le.includes("<anonymous>")&&(Le=Le.replace("<anonymous>",f.displayName)),Le}while(1<=S&&0<=$);break}}}finally{pi=!1,Error.prepareStackTrace=x}return(x=f?f.displayName||f.name:"")?Pr(x):""}function Ye(f){switch(f.tag){case 26:case 27:case 5:return Pr(f.type);case 16:return Pr("Lazy");case 13:return Pr("Suspense");case 19:return Pr("SuspenseList");case 0:case 15:return yl(f.type,!1);case 11:return yl(f.type.render,!1);case 1:return yl(f.type,!0);case 31:return Pr("Activity");default:return""}}function ct(f){try{var p="";do p+=Ye(f),f=f.return;while(f);return p}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function qt(f){switch(typeof f){case"bigint":case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function dn(f){var p=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function jn(f){var p=dn(f)?"checked":"value",x=Object.getOwnPropertyDescriptor(f.constructor.prototype,p),S=""+f[p];if(!f.hasOwnProperty(p)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var $=x.get,_=x.set;return Object.defineProperty(f,p,{configurable:!0,get:function(){return $.call(this)},set:function(G){S=""+G,_.call(this,G)}}),Object.defineProperty(f,p,{enumerable:x.enumerable}),{getValue:function(){return S},setValue:function(G){S=""+G},stopTracking:function(){f._valueTracker=null,delete f[p]}}}}function kn(f){f._valueTracker||(f._valueTracker=jn(f))}function Hr(f){if(!f)return!1;var p=f._valueTracker;if(!p)return!0;var x=p.getValue(),S="";return f&&(S=dn(f)?f.checked?"true":"false":f.value),f=S,f!==x?(p.setValue(f),!0):!1}function qr(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}var Jn=/[\n"\\]/g;function wr(f){return f.replace(Jn,function(p){return"\\"+p.charCodeAt(0).toString(16)+" "})}function qa(f,p,x,S,$,_,G,Z){f.name="",G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?f.type=G:f.removeAttribute("type"),p!=null?G==="number"?(p===0&&f.value===""||f.value!=p)&&(f.value=""+qt(p)):f.value!==""+qt(p)&&(f.value=""+qt(p)):G!=="submit"&&G!=="reset"||f.removeAttribute("value"),p!=null?Ka(f,G,qt(p)):x!=null?Ka(f,G,qt(x)):S!=null&&f.removeAttribute("value"),$==null&&_!=null&&(f.defaultChecked=!!_),$!=null&&(f.checked=$&&typeof $!="function"&&typeof $!="symbol"),Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?f.name=""+qt(Z):f.removeAttribute("name")}function ka(f,p,x,S,$,_,G,Z){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(f.type=_),p!=null||x!=null){if(!(_!=="submit"&&_!=="reset"||p!=null))return;x=x!=null?""+qt(x):"",p=p!=null?""+qt(p):x,Z||p===f.value||(f.value=p),f.defaultValue=p}S=S??$,S=typeof S!="function"&&typeof S!="symbol"&&!!S,f.checked=Z?f.checked:!!S,f.defaultChecked=!!S,G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"&&(f.name=G)}function Ka(f,p,x){p==="number"&&qr(f.ownerDocument)===f||f.defaultValue===""+x||(f.defaultValue=""+x)}function Xa(f,p,x,S){if(f=f.options,p){p={};for(var $=0;$<x.length;$++)p["$"+x[$]]=!0;for(x=0;x<f.length;x++)$=p.hasOwnProperty("$"+f[x].value),f[x].selected!==$&&(f[x].selected=$),$&&S&&(f[x].defaultSelected=!0)}else{for(x=""+qt(x),p=null,$=0;$<f.length;$++){if(f[$].value===x){f[$].selected=!0,S&&(f[$].defaultSelected=!0);return}p!==null||f[$].disabled||(p=f[$])}p!==null&&(p.selected=!0)}}function Jl(f,p,x){if(p!=null&&(p=""+qt(p),p!==f.value&&(f.value=p),x==null)){f.defaultValue!==p&&(f.defaultValue=p);return}f.defaultValue=x!=null?""+qt(x):""}function No(f,p,x,S){if(p==null){if(S!=null){if(x!=null)throw Error(r(92));if(W(S)){if(1<S.length)throw Error(r(93));S=S[0]}x=S}x==null&&(x=""),p=x}x=qt(p),f.defaultValue=x,S=f.textContent,S===x&&S!==""&&S!==null&&(f.value=S)}function mi(f,p){if(p){var x=f.firstChild;if(x&&x===f.lastChild&&x.nodeType===3){x.nodeValue=p;return}}f.textContent=p}var de=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function He(f,p,x){var S=p.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?S?f.setProperty(p,""):p==="float"?f.cssFloat="":f[p]="":S?f.setProperty(p,x):typeof x!="number"||x===0||de.has(p)?p==="float"?f.cssFloat=x:f[p]=(""+x).trim():f[p]=x+"px"}function lt(f,p,x){if(p!=null&&typeof p!="object")throw Error(r(62));if(f=f.style,x!=null){for(var S in x)!x.hasOwnProperty(S)||p!=null&&p.hasOwnProperty(S)||(S.indexOf("--")===0?f.setProperty(S,""):S==="float"?f.cssFloat="":f[S]="");for(var $ in p)S=p[$],p.hasOwnProperty($)&&x[$]!==S&&He(f,$,S)}else for(var _ in p)p.hasOwnProperty(_)&&He(f,_,p[_])}function yt(f){if(f.indexOf("-")===-1)return!1;switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ht=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function An(f){return sn.test(""+f)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":f}var Os=null;function Ya(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var as=null,gi=null;function tp(f){var p=wa(f);if(p&&(f=p.stateNode)){var x=f[Wr]||null;e:switch(f=p.stateNode,p.type){case"input":if(qa(f,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),p=x.name,x.type==="radio"&&p!=null){for(x=f;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+wr(""+p)+'"][type="radio"]'),p=0;p<x.length;p++){var S=x[p];if(S!==f&&S.form===f.form){var $=S[Wr]||null;if(!$)throw Error(r(90));qa(S,$.value,$.defaultValue,$.defaultValue,$.checked,$.defaultChecked,$.type,$.name)}}for(p=0;p<x.length;p++)S=x[p],S.form===f.form&&Hr(S)}break e;case"textarea":Jl(f,x.value,x.defaultValue);break e;case"select":p=x.value,p!=null&&Xa(f,!!x.multiple,p,!1)}}}var Fy=!1;function $1(f,p,x){if(Fy)return f(p,x);Fy=!0;try{var S=f(p);return S}finally{if(Fy=!1,(as!==null||gi!==null)&&(mw(),as&&(p=as,f=gi,gi=as=null,tp(p),f)))for(p=0;p<f.length;p++)tp(f[p])}}function af(f,p){var x=f.stateNode;if(x===null)return null;var S=x[Wr]||null;if(S===null)return null;x=S[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(f=f.type,S=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!S;break e;default:f=!1}if(f)return null;if(x&&typeof x!="function")throw Error(r(231,p,typeof x));return x}var Wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),np=!1;if(Wi)try{var Vc={};Object.defineProperty(Vc,"passive",{get:function(){np=!0}}),window.addEventListener("test",Vc,Vc),window.removeEventListener("test",Vc,Vc)}catch{np=!1}var yi=null,Qa=null,rp=null;function I1(){if(rp)return rp;var f,p=Qa,x=p.length,S,$="value"in yi?yi.value:yi.textContent,_=$.length;for(f=0;f<x&&p[f]===$[f];f++);var G=x-f;for(S=1;S<=G&&p[x-S]===$[_-S];S++);return rp=$.slice(f,1<S?1-S:void 0)}function of(f){var p=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&p===13&&(f=13)):f=p,f===10&&(f=13),32<=f||f===13?f:0}function lf(){return!0}function sp(){return!1}function Gs(f){function p(x,S,$,_,G){this._reactName=x,this._targetInst=$,this.type=S,this.nativeEvent=_,this.target=G,this.currentTarget=null;for(var Z in f)f.hasOwnProperty(Z)&&(x=f[Z],this[Z]=x?x(_):_[Z]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?lf:sp,this.isPropagationStopped=sp,this}return c(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=lf)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=lf)},persist:function(){},isPersistent:lf}),p}var bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uf=Gs(bi),Vu=c({},bi,{view:0,detail:0}),o$=Gs(Vu),zy,Wu,Wc,cf=c({},Vu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ip,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==Wc&&(Wc&&f.type==="mousemove"?(zy=f.screenX-Wc.screenX,Wu=f.screenY-Wc.screenY):Wu=zy=0,Wc=f),zy)},movementY:function(f){return"movementY"in f?f.movementY:Wu}}),E1=Gs(cf),l$=c({},cf,{dataTransfer:0}),ap=Gs(l$),A1=c({},Vu,{relatedTarget:0}),By=Gs(A1),R1=c({},bi,{animationName:0,elapsedTime:0,pseudoElement:0}),u$=Gs(R1),c$=c({},bi,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),Uy=Gs(c$),Vy=c({},bi,{data:0}),Wy=Gs(Vy),d$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},f$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},h$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function p$(f){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(f):(f=h$[f])?!!p[f]:!1}function ip(){return p$}var m$=c({},Vu,{key:function(f){if(f.key){var p=d$[f.key]||f.key;if(p!=="Unidentified")return p}return f.type==="keypress"?(f=of(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?f$[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ip,charCode:function(f){return f.type==="keypress"?of(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?of(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),g$=Gs(m$),Gy=c({},cf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O1=Gs(Gy),y$=c({},Vu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ip}),b$=Gs(y$),op=c({},bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),x$=Gs(op),v$=c({},cf,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),w$=Gs(v$),_1=c({},bi,{newState:0,oldState:0}),D1=Gs(_1),E=[9,13,27,32],M=Wi&&"CompositionEvent"in window,U=null;Wi&&"documentMode"in document&&(U=document.documentMode);var K=Wi&&"TextEvent"in window&&!U,re=Wi&&(!M||U&&8<U&&11>=U),ae=" ",se=!1;function me(f,p){switch(f){case"keyup":return E.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ee(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var qe=!1;function it(f,p){switch(f){case"compositionend":return Ee(p);case"keypress":return p.which!==32?null:(se=!0,ae);case"textInput":return f=p.data,f===ae&&se?null:f;default:return null}}function Mt(f,p){if(qe)return f==="compositionend"||!M&&me(f,p)?(f=I1(),rp=Qa=yi=null,qe=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return re&&p.locale!=="ko"?null:p.data;default:return null}}var Et={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pt(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p==="input"?!!Et[f.type]:p==="textarea"}function Dt(f,p,x,S){as?gi?gi.push(S):gi=[S]:as=S,p=ww(p,"onChange"),0<p.length&&(x=new uf("onChange","change",null,x,S),f.push({event:x,listeners:p}))}var Kt=null,Rn=null;function er(f){BB(f,0)}function Kr(f){var p=Sa(f);if(Hr(p))return f}function Za(f,p){if(f==="change")return p}var oa=!1;if(Wi){var mn;if(Wi){var is="oninput"in document;if(!is){var bl=document.createElement("div");bl.setAttribute("oninput","return;"),is=typeof bl.oninput=="function"}mn=is}else mn=!1;oa=mn&&(!document.documentMode||9<document.documentMode)}function P1(){Kt&&(Kt.detachEvent("onpropertychange",M1),Rn=Kt=null)}function M1(f){if(f.propertyName==="value"&&Kr(Rn)){var p=[];Dt(p,Rn,f,Ya(f)),$1(er,p)}}function S$(f,p,x){f==="focusin"?(P1(),Kt=p,Rn=x,Kt.attachEvent("onpropertychange",M1)):f==="focusout"&&P1()}function C$(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return Kr(Rn)}function k$(f,p){if(f==="click")return Kr(p)}function lp(f,p){if(f==="input"||f==="change")return Kr(p)}function Foe(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var Gi=typeof Object.is=="function"?Object.is:Foe;function Hy(f,p){if(Gi(f,p))return!0;if(typeof f!="object"||f===null||typeof p!="object"||p===null)return!1;var x=Object.keys(f),S=Object.keys(p);if(x.length!==S.length)return!1;for(S=0;S<x.length;S++){var $=x[S];if(!ke.call(p,$)||!Gi(f[$],p[$]))return!1}return!0}function hF(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function pF(f,p){var x=hF(f);f=0;for(var S;x;){if(x.nodeType===3){if(S=f+x.textContent.length,f<=p&&S>=p)return{node:x,offset:p-f};f=S}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=hF(x)}}function mF(f,p){return f&&p?f===p?!0:f&&f.nodeType===3?!1:p&&p.nodeType===3?mF(f,p.parentNode):"contains"in f?f.contains(p):f.compareDocumentPosition?!!(f.compareDocumentPosition(p)&16):!1:!1}function gF(f){f=f!=null&&f.ownerDocument!=null&&f.ownerDocument.defaultView!=null?f.ownerDocument.defaultView:window;for(var p=qr(f.document);p instanceof f.HTMLIFrameElement;){try{var x=typeof p.contentWindow.location.href=="string"}catch{x=!1}if(x)f=p.contentWindow;else break;p=qr(f.document)}return p}function N$(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p&&(p==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||p==="textarea"||f.contentEditable==="true")}var zoe=Wi&&"documentMode"in document&&11>=document.documentMode,up=null,T$=null,qy=null,$$=!1;function yF(f,p,x){var S=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;$$||up==null||up!==qr(S)||(S=up,"selectionStart"in S&&N$(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),qy&&Hy(qy,S)||(qy=S,S=ww(T$,"onSelect"),0<S.length&&(p=new uf("onSelect","select",null,p,x),f.push({event:p,listeners:S}),p.target=up)))}function df(f,p){var x={};return x[f.toLowerCase()]=p.toLowerCase(),x["Webkit"+f]="webkit"+p,x["Moz"+f]="moz"+p,x}var cp={animationend:df("Animation","AnimationEnd"),animationiteration:df("Animation","AnimationIteration"),animationstart:df("Animation","AnimationStart"),transitionrun:df("Transition","TransitionRun"),transitionstart:df("Transition","TransitionStart"),transitioncancel:df("Transition","TransitionCancel"),transitionend:df("Transition","TransitionEnd")},I$={},bF={};Wi&&(bF=document.createElement("div").style,"AnimationEvent"in window||(delete cp.animationend.animation,delete cp.animationiteration.animation,delete cp.animationstart.animation),"TransitionEvent"in window||delete cp.transitionend.transition);function ff(f){if(I$[f])return I$[f];if(!cp[f])return f;var p=cp[f],x;for(x in p)if(p.hasOwnProperty(x)&&x in bF)return I$[f]=p[x];return f}var xF=ff("animationend"),vF=ff("animationiteration"),wF=ff("animationstart"),Boe=ff("transitionrun"),Uoe=ff("transitionstart"),Voe=ff("transitioncancel"),SF=ff("transitionend"),CF=new Map,E$="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");E$.push("scrollEnd");function xl(f,p){CF.set(f,p),Ca(p,[f])}var kF=new WeakMap;function To(f,p){if(typeof f=="object"&&f!==null){var x=kF.get(f);return x!==void 0?x:(p={value:f,source:p,stack:ct(p)},kF.set(f,p),p)}return{value:f,source:p,stack:ct(p)}}var $o=[],dp=0,A$=0;function j1(){for(var f=dp,p=A$=dp=0;p<f;){var x=$o[p];$o[p++]=null;var S=$o[p];$o[p++]=null;var $=$o[p];$o[p++]=null;var _=$o[p];if($o[p++]=null,S!==null&&$!==null){var G=S.pending;G===null?$.next=$:($.next=G.next,G.next=$),S.pending=$}_!==0&&NF(x,$,_)}}function L1(f,p,x,S){$o[dp++]=f,$o[dp++]=p,$o[dp++]=x,$o[dp++]=S,A$|=S,f.lanes|=S,f=f.alternate,f!==null&&(f.lanes|=S)}function R$(f,p,x,S){return L1(f,p,x,S),F1(f)}function fp(f,p){return L1(f,null,null,p),F1(f)}function NF(f,p,x){f.lanes|=x;var S=f.alternate;S!==null&&(S.lanes|=x);for(var $=!1,_=f.return;_!==null;)_.childLanes|=x,S=_.alternate,S!==null&&(S.childLanes|=x),_.tag===22&&(f=_.stateNode,f===null||f._visibility&1||($=!0)),f=_,_=_.return;return f.tag===3?(_=f.stateNode,$&&p!==null&&($=31-Mn(x),f=_.hiddenUpdates,S=f[$],S===null?f[$]=[p]:S.push(p),p.lane=x|536870912),_):null}function F1(f){if(50<b0)throw b0=0,jI=null,Error(r(185));for(var p=f.return;p!==null;)f=p,p=f.return;return f.tag===3?f.stateNode:null}var hp={};function Woe(f,p,x,S){this.tag=f,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(f,p,x,S){return new Woe(f,p,x,S)}function O$(f){return f=f.prototype,!(!f||!f.isReactComponent)}function Gu(f,p){var x=f.alternate;return x===null?(x=Hi(f.tag,p,f.key,f.mode),x.elementType=f.elementType,x.type=f.type,x.stateNode=f.stateNode,x.alternate=f,f.alternate=x):(x.pendingProps=p,x.type=f.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=f.flags&65011712,x.childLanes=f.childLanes,x.lanes=f.lanes,x.child=f.child,x.memoizedProps=f.memoizedProps,x.memoizedState=f.memoizedState,x.updateQueue=f.updateQueue,p=f.dependencies,x.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},x.sibling=f.sibling,x.index=f.index,x.ref=f.ref,x.refCleanup=f.refCleanup,x}function TF(f,p){f.flags&=65011714;var x=f.alternate;return x===null?(f.childLanes=0,f.lanes=p,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=x.childLanes,f.lanes=x.lanes,f.child=x.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=x.memoizedProps,f.memoizedState=x.memoizedState,f.updateQueue=x.updateQueue,f.type=x.type,p=x.dependencies,f.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),f}function z1(f,p,x,S,$,_){var G=0;if(S=f,typeof f=="function")O$(f)&&(G=1);else if(typeof f=="string")G=Hle(f,x,he.current)?26:f==="html"||f==="head"||f==="body"?27:5;else e:switch(f){case P:return f=Hi(31,x,p,$),f.elementType=P,f.lanes=_,f;case g:return hf(x.children,$,_,p);case y:G=8,$|=24;break;case b:return f=Hi(12,x,p,$|2),f.elementType=b,f.lanes=_,f;case N:return f=Hi(13,x,p,$),f.elementType=N,f.lanes=_,f;case I:return f=Hi(19,x,p,$),f.elementType=I,f.lanes=_,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case w:case k:G=10;break e;case C:G=9;break e;case T:G=11;break e;case A:G=14;break e;case D:G=16,S=null;break e}G=29,x=Error(r(130,f===null?"null":typeof f,"")),S=null}return p=Hi(G,x,p,$),p.elementType=f,p.type=S,p.lanes=_,p}function hf(f,p,x,S){return f=Hi(7,f,S,p),f.lanes=x,f}function _$(f,p,x){return f=Hi(6,f,null,p),f.lanes=x,f}function D$(f,p,x){return p=Hi(4,f.children!==null?f.children:[],f.key,p),p.lanes=x,p.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},p}var pp=[],mp=0,B1=null,U1=0,Io=[],Eo=0,pf=null,Hu=1,qu="";function mf(f,p){pp[mp++]=U1,pp[mp++]=B1,B1=f,U1=p}function $F(f,p,x){Io[Eo++]=Hu,Io[Eo++]=qu,Io[Eo++]=pf,pf=f;var S=Hu;f=qu;var $=32-Mn(S)-1;S&=~(1<<$),x+=1;var _=32-Mn(p)+$;if(30<_){var G=$-$%5;_=(S&(1<<G)-1).toString(32),S>>=G,$-=G,Hu=1<<32-Mn(p)+$|x<<$|S,qu=_+f}else Hu=1<<_|x<<$|S,qu=f}function P$(f){f.return!==null&&(mf(f,1),$F(f,1,0))}function M$(f){for(;f===B1;)B1=pp[--mp],pp[mp]=null,U1=pp[--mp],pp[mp]=null;for(;f===pf;)pf=Io[--Eo],Io[Eo]=null,qu=Io[--Eo],Io[Eo]=null,Hu=Io[--Eo],Io[Eo]=null}var Ja=null,Xr=null,On=!1,gf=null,eu=!1,j$=Error(r(519));function yf(f){var p=Error(r(418,""));throw Yy(To(p,f)),j$}function IF(f){var p=f.stateNode,x=f.type,S=f.memoizedProps;switch(p[Qn]=f,p[Wr]=S,x){case"dialog":hn("cancel",p),hn("close",p);break;case"iframe":case"object":case"embed":hn("load",p);break;case"video":case"audio":for(x=0;x<v0.length;x++)hn(v0[x],p);break;case"source":hn("error",p);break;case"img":case"image":case"link":hn("error",p),hn("load",p);break;case"details":hn("toggle",p);break;case"input":hn("invalid",p),ka(p,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0),kn(p);break;case"select":hn("invalid",p);break;case"textarea":hn("invalid",p),No(p,S.value,S.defaultValue,S.children),kn(p)}x=S.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||p.textContent===""+x||S.suppressHydrationWarning===!0||GB(p.textContent,x)?(S.popover!=null&&(hn("beforetoggle",p),hn("toggle",p)),S.onScroll!=null&&hn("scroll",p),S.onScrollEnd!=null&&hn("scrollend",p),S.onClick!=null&&(p.onclick=Sw),p=!0):p=!1,p||yf(f)}function EF(f){for(Ja=f.return;Ja;)switch(Ja.tag){case 5:case 13:eu=!1;return;case 27:case 3:eu=!0;return;default:Ja=Ja.return}}function Ky(f){if(f!==Ja)return!1;if(!On)return EF(f),On=!0,!1;var p=f.tag,x;if((x=p!==3&&p!==27)&&((x=p===5)&&(x=f.type,x=!(x!=="form"&&x!=="button")||JI(f.type,f.memoizedProps)),x=!x),x&&Xr&&yf(f),EF(f),p===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));e:{for(f=f.nextSibling,p=0;f;){if(f.nodeType===8)if(x=f.data,x==="/$"){if(p===0){Xr=wl(f.nextSibling);break e}p--}else x!=="$"&&x!=="$!"&&x!=="$?"||p++;f=f.nextSibling}Xr=null}}else p===27?(p=Xr,id(f.type)?(f=rE,rE=null,Xr=f):Xr=p):Xr=Ja?wl(f.stateNode.nextSibling):null;return!0}function Xy(){Xr=Ja=null,On=!1}function AF(){var f=gf;return f!==null&&(wi===null?wi=f:wi.push.apply(wi,f),gf=null),f}function Yy(f){gf===null?gf=[f]:gf.push(f)}var L$=ee(null),bf=null,Ku=null;function Gc(f,p,x){ne(L$,p._currentValue),p._currentValue=x}function Xu(f){f._currentValue=L$.current,te(L$)}function F$(f,p,x){for(;f!==null;){var S=f.alternate;if((f.childLanes&p)!==p?(f.childLanes|=p,S!==null&&(S.childLanes|=p)):S!==null&&(S.childLanes&p)!==p&&(S.childLanes|=p),f===x)break;f=f.return}}function z$(f,p,x,S){var $=f.child;for($!==null&&($.return=f);$!==null;){var _=$.dependencies;if(_!==null){var G=$.child;_=_.firstContext;e:for(;_!==null;){var Z=_;_=$;for(var oe=0;oe<p.length;oe++)if(Z.context===p[oe]){_.lanes|=x,Z=_.alternate,Z!==null&&(Z.lanes|=x),F$(_.return,x,f),S||(G=null);break e}_=Z.next}}else if($.tag===18){if(G=$.return,G===null)throw Error(r(341));G.lanes|=x,_=G.alternate,_!==null&&(_.lanes|=x),F$(G,x,f),G=null}else G=$.child;if(G!==null)G.return=$;else for(G=$;G!==null;){if(G===f){G=null;break}if($=G.sibling,$!==null){$.return=G.return,G=$;break}G=G.return}$=G}}function Qy(f,p,x,S){f=null;for(var $=p,_=!1;$!==null;){if(!_){if(($.flags&524288)!==0)_=!0;else if(($.flags&262144)!==0)break}if($.tag===10){var G=$.alternate;if(G===null)throw Error(r(387));if(G=G.memoizedProps,G!==null){var Z=$.type;Gi($.pendingProps.value,G.value)||(f!==null?f.push(Z):f=[Z])}}else if($===Qe.current){if(G=$.alternate,G===null)throw Error(r(387));G.memoizedState.memoizedState!==$.memoizedState.memoizedState&&(f!==null?f.push(T0):f=[T0])}$=$.return}f!==null&&z$(p,f,x,S),p.flags|=262144}function V1(f){for(f=f.firstContext;f!==null;){if(!Gi(f.context._currentValue,f.memoizedValue))return!0;f=f.next}return!1}function xf(f){bf=f,Ku=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function Na(f){return RF(bf,f)}function W1(f,p){return bf===null&&xf(f),RF(f,p)}function RF(f,p){var x=p._currentValue;if(p={context:p,memoizedValue:x,next:null},Ku===null){if(f===null)throw Error(r(308));Ku=p,f.dependencies={lanes:0,firstContext:p},f.flags|=524288}else Ku=Ku.next=p;return x}var Goe=typeof AbortController<"u"?AbortController:function(){var f=[],p=this.signal={aborted:!1,addEventListener:function(x,S){f.push(S)}};this.abort=function(){p.aborted=!0,f.forEach(function(x){return x()})}},Hoe=t.unstable_scheduleCallback,qoe=t.unstable_NormalPriority,_s={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function B$(){return{controller:new Goe,data:new Map,refCount:0}}function Zy(f){f.refCount--,f.refCount===0&&Hoe(qoe,function(){f.controller.abort()})}var Jy=null,U$=0,gp=0,yp=null;function Koe(f,p){if(Jy===null){var x=Jy=[];U$=0,gp=WI(),yp={status:"pending",value:void 0,then:function(S){x.push(S)}}}return U$++,p.then(OF,OF),p}function OF(){if(--U$===0&&Jy!==null){yp!==null&&(yp.status="fulfilled");var f=Jy;Jy=null,gp=0,yp=null;for(var p=0;p<f.length;p++)(0,f[p])()}}function Xoe(f,p){var x=[],S={status:"pending",value:null,reason:null,then:function($){x.push($)}};return f.then(function(){S.status="fulfilled",S.value=p;for(var $=0;$<x.length;$++)(0,x[$])(p)},function($){for(S.status="rejected",S.reason=$,$=0;$<x.length;$++)(0,x[$])(void 0)}),S}var _F=j.S;j.S=function(f,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&Koe(f,p),_F!==null&&_F(f,p)};var vf=ee(null);function V$(){var f=vf.current;return f!==null?f:br.pooledCache}function G1(f,p){p===null?ne(vf,vf.current):ne(vf,p.pool)}function DF(){var f=V$();return f===null?null:{parent:_s._currentValue,pool:f}}var e0=Error(r(460)),PF=Error(r(474)),H1=Error(r(542)),W$={then:function(){}};function MF(f){return f=f.status,f==="fulfilled"||f==="rejected"}function q1(){}function jF(f,p,x){switch(x=f[x],x===void 0?f.push(p):x!==p&&(p.then(q1,q1),p=x),p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,FF(f),f;default:if(typeof p.status=="string")p.then(q1,q1);else{if(f=br,f!==null&&100<f.shellSuspendCounter)throw Error(r(482));f=p,f.status="pending",f.then(function(S){if(p.status==="pending"){var $=p;$.status="fulfilled",$.value=S}},function(S){if(p.status==="pending"){var $=p;$.status="rejected",$.reason=S}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,FF(f),f}throw t0=p,e0}}var t0=null;function LF(){if(t0===null)throw Error(r(459));var f=t0;return t0=null,f}function FF(f){if(f===e0||f===H1)throw Error(r(483))}var Hc=!1;function G$(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function H$(f,p){f=f.updateQueue,p.updateQueue===f&&(p.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function qc(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function Kc(f,p,x){var S=f.updateQueue;if(S===null)return null;if(S=S.shared,(Gn&2)!==0){var $=S.pending;return $===null?p.next=p:(p.next=$.next,$.next=p),S.pending=p,p=F1(f),NF(f,null,x),p}return L1(f,S,p,x),F1(f)}function n0(f,p,x){if(p=p.updateQueue,p!==null&&(p=p.shared,(x&4194048)!==0)){var S=p.lanes;S&=f.pendingLanes,x|=S,p.lanes=x,Ga(f,x)}}function q$(f,p){var x=f.updateQueue,S=f.alternate;if(S!==null&&(S=S.updateQueue,x===S)){var $=null,_=null;if(x=x.firstBaseUpdate,x!==null){do{var G={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};_===null?$=_=G:_=_.next=G,x=x.next}while(x!==null);_===null?$=_=p:_=_.next=p}else $=_=p;x={baseState:S.baseState,firstBaseUpdate:$,lastBaseUpdate:_,shared:S.shared,callbacks:S.callbacks},f.updateQueue=x;return}f=x.lastBaseUpdate,f===null?x.firstBaseUpdate=p:f.next=p,x.lastBaseUpdate=p}var K$=!1;function r0(){if(K$){var f=yp;if(f!==null)throw f}}function s0(f,p,x,S){K$=!1;var $=f.updateQueue;Hc=!1;var _=$.firstBaseUpdate,G=$.lastBaseUpdate,Z=$.shared.pending;if(Z!==null){$.shared.pending=null;var oe=Z,Ne=oe.next;oe.next=null,G===null?_=Ne:G.next=Ne,G=oe;var Le=f.alternate;Le!==null&&(Le=Le.updateQueue,Z=Le.lastBaseUpdate,Z!==G&&(Z===null?Le.firstBaseUpdate=Ne:Z.next=Ne,Le.lastBaseUpdate=oe))}if(_!==null){var Ue=$.baseState;G=0,Le=Ne=oe=null,Z=_;do{var Te=Z.lane&-536870913,Ae=Te!==Z.lane;if(Ae?(Nn&Te)===Te:(S&Te)===Te){Te!==0&&Te===gp&&(K$=!0),Le!==null&&(Le=Le.next={lane:0,tag:Z.tag,payload:Z.payload,callback:null,next:null});e:{var Ut=f,Pt=Z;Te=p;var rr=x;switch(Pt.tag){case 1:if(Ut=Pt.payload,typeof Ut=="function"){Ue=Ut.call(rr,Ue,Te);break e}Ue=Ut;break e;case 3:Ut.flags=Ut.flags&-65537|128;case 0:if(Ut=Pt.payload,Te=typeof Ut=="function"?Ut.call(rr,Ue,Te):Ut,Te==null)break e;Ue=c({},Ue,Te);break e;case 2:Hc=!0}}Te=Z.callback,Te!==null&&(f.flags|=64,Ae&&(f.flags|=8192),Ae=$.callbacks,Ae===null?$.callbacks=[Te]:Ae.push(Te))}else Ae={lane:Te,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},Le===null?(Ne=Le=Ae,oe=Ue):Le=Le.next=Ae,G|=Te;if(Z=Z.next,Z===null){if(Z=$.shared.pending,Z===null)break;Ae=Z,Z=Ae.next,Ae.next=null,$.lastBaseUpdate=Ae,$.shared.pending=null}}while(!0);Le===null&&(oe=Ue),$.baseState=oe,$.firstBaseUpdate=Ne,$.lastBaseUpdate=Le,_===null&&($.shared.lanes=0),nd|=G,f.lanes=G,f.memoizedState=Ue}}function zF(f,p){if(typeof f!="function")throw Error(r(191,f));f.call(p)}function BF(f,p){var x=f.callbacks;if(x!==null)for(f.callbacks=null,f=0;f<x.length;f++)zF(x[f],p)}var bp=ee(null),K1=ee(0);function UF(f,p){f=nc,ne(K1,f),ne(bp,p),nc=f|p.baseLanes}function X$(){ne(K1,nc),ne(bp,bp.current)}function Y$(){nc=K1.current,te(bp),te(K1)}var Xc=0,an=null,tr=null,gs=null,X1=!1,xp=!1,wf=!1,Y1=0,a0=0,vp=null,Yoe=0;function os(){throw Error(r(321))}function Q$(f,p){if(p===null)return!1;for(var x=0;x<p.length&&x<f.length;x++)if(!Gi(f[x],p[x]))return!1;return!0}function Z$(f,p,x,S,$,_){return Xc=_,an=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,j.H=f===null||f.memoizedState===null?Nz:Tz,wf=!1,_=x(S,$),wf=!1,xp&&(_=WF(p,x,S,$)),VF(f),_}function VF(f){j.H=nw;var p=tr!==null&&tr.next!==null;if(Xc=0,gs=tr=an=null,X1=!1,a0=0,vp=null,p)throw Error(r(300));f===null||Hs||(f=f.dependencies,f!==null&&V1(f)&&(Hs=!0))}function WF(f,p,x,S){an=f;var $=0;do{if(xp&&(vp=null),a0=0,xp=!1,25<=$)throw Error(r(301));if($+=1,gs=tr=null,f.updateQueue!=null){var _=f.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}j.H=rle,_=p(x,S)}while(xp);return _}function Qoe(){var f=j.H,p=f.useState()[0];return p=typeof p.then=="function"?i0(p):p,f=f.useState()[0],(tr!==null?tr.memoizedState:null)!==f&&(an.flags|=1024),p}function J$(){var f=Y1!==0;return Y1=0,f}function eI(f,p,x){p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~x}function tI(f){if(X1){for(f=f.memoizedState;f!==null;){var p=f.queue;p!==null&&(p.pending=null),f=f.next}X1=!1}Xc=0,gs=tr=an=null,xp=!1,a0=Y1=0,vp=null}function xi(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gs===null?an.memoizedState=gs=f:gs=gs.next=f,gs}function ys(){if(tr===null){var f=an.alternate;f=f!==null?f.memoizedState:null}else f=tr.next;var p=gs===null?an.memoizedState:gs.next;if(p!==null)gs=p,tr=f;else{if(f===null)throw an.alternate===null?Error(r(467)):Error(r(310));tr=f,f={memoizedState:tr.memoizedState,baseState:tr.baseState,baseQueue:tr.baseQueue,queue:tr.queue,next:null},gs===null?an.memoizedState=gs=f:gs=gs.next=f}return gs}function nI(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function i0(f){var p=a0;return a0+=1,vp===null&&(vp=[]),f=jF(vp,f,p),p=an,(gs===null?p.memoizedState:gs.next)===null&&(p=p.alternate,j.H=p===null||p.memoizedState===null?Nz:Tz),f}function Q1(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return i0(f);if(f.$$typeof===k)return Na(f)}throw Error(r(438,String(f)))}function rI(f){var p=null,x=an.updateQueue;if(x!==null&&(p=x.memoCache),p==null){var S=an.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(p={data:S.data.map(function($){return $.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),x===null&&(x=nI(),an.updateQueue=x),x.memoCache=p,x=p.data[p.index],x===void 0)for(x=p.data[p.index]=Array(f),S=0;S<f;S++)x[S]=R;return p.index++,x}function Yu(f,p){return typeof p=="function"?p(f):p}function Z1(f){var p=ys();return sI(p,tr,f)}function sI(f,p,x){var S=f.queue;if(S===null)throw Error(r(311));S.lastRenderedReducer=x;var $=f.baseQueue,_=S.pending;if(_!==null){if($!==null){var G=$.next;$.next=_.next,_.next=G}p.baseQueue=$=_,S.pending=null}if(_=f.baseState,$===null)f.memoizedState=_;else{p=$.next;var Z=G=null,oe=null,Ne=p,Le=!1;do{var Ue=Ne.lane&-536870913;if(Ue!==Ne.lane?(Nn&Ue)===Ue:(Xc&Ue)===Ue){var Te=Ne.revertLane;if(Te===0)oe!==null&&(oe=oe.next={lane:0,revertLane:0,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null}),Ue===gp&&(Le=!0);else if((Xc&Te)===Te){Ne=Ne.next,Te===gp&&(Le=!0);continue}else Ue={lane:0,revertLane:Ne.revertLane,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null},oe===null?(Z=oe=Ue,G=_):oe=oe.next=Ue,an.lanes|=Te,nd|=Te;Ue=Ne.action,wf&&x(_,Ue),_=Ne.hasEagerState?Ne.eagerState:x(_,Ue)}else Te={lane:Ue,revertLane:Ne.revertLane,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null},oe===null?(Z=oe=Te,G=_):oe=oe.next=Te,an.lanes|=Ue,nd|=Ue;Ne=Ne.next}while(Ne!==null&&Ne!==p);if(oe===null?G=_:oe.next=Z,!Gi(_,f.memoizedState)&&(Hs=!0,Le&&(x=yp,x!==null)))throw x;f.memoizedState=_,f.baseState=G,f.baseQueue=oe,S.lastRenderedState=_}return $===null&&(S.lanes=0),[f.memoizedState,S.dispatch]}function aI(f){var p=ys(),x=p.queue;if(x===null)throw Error(r(311));x.lastRenderedReducer=f;var S=x.dispatch,$=x.pending,_=p.memoizedState;if($!==null){x.pending=null;var G=$=$.next;do _=f(_,G.action),G=G.next;while(G!==$);Gi(_,p.memoizedState)||(Hs=!0),p.memoizedState=_,p.baseQueue===null&&(p.baseState=_),x.lastRenderedState=_}return[_,S]}function GF(f,p,x){var S=an,$=ys(),_=On;if(_){if(x===void 0)throw Error(r(407));x=x()}else x=p();var G=!Gi((tr||$).memoizedState,x);G&&($.memoizedState=x,Hs=!0),$=$.queue;var Z=KF.bind(null,S,$,f);if(o0(2048,8,Z,[f]),$.getSnapshot!==p||G||gs!==null&&gs.memoizedState.tag&1){if(S.flags|=2048,wp(9,J1(),qF.bind(null,S,$,x,p),null),br===null)throw Error(r(349));_||(Xc&124)!==0||HF(S,p,x)}return x}function HF(f,p,x){f.flags|=16384,f={getSnapshot:p,value:x},p=an.updateQueue,p===null?(p=nI(),an.updateQueue=p,p.stores=[f]):(x=p.stores,x===null?p.stores=[f]:x.push(f))}function qF(f,p,x,S){p.value=x,p.getSnapshot=S,XF(p)&&YF(f)}function KF(f,p,x){return x(function(){XF(p)&&YF(f)})}function XF(f){var p=f.getSnapshot;f=f.value;try{var x=p();return!Gi(f,x)}catch{return!0}}function YF(f){var p=fp(f,2);p!==null&&Qi(p,f,2)}function iI(f){var p=xi();if(typeof f=="function"){var x=f;if(f=x(),wf){Jt(!0);try{x()}finally{Jt(!1)}}}return p.memoizedState=p.baseState=f,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yu,lastRenderedState:f},p}function QF(f,p,x,S){return f.baseState=x,sI(f,tr,typeof S=="function"?S:Yu)}function Zoe(f,p,x,S,$){if(tw(f))throw Error(r(485));if(f=p.action,f!==null){var _={payload:$,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(G){_.listeners.push(G)}};j.T!==null?x(!0):_.isTransition=!1,S(_),x=p.pending,x===null?(_.next=p.pending=_,ZF(p,_)):(_.next=x.next,p.pending=x.next=_)}}function ZF(f,p){var x=p.action,S=p.payload,$=f.state;if(p.isTransition){var _=j.T,G={};j.T=G;try{var Z=x($,S),oe=j.S;oe!==null&&oe(G,Z),JF(f,p,Z)}catch(Ne){oI(f,p,Ne)}finally{j.T=_}}else try{_=x($,S),JF(f,p,_)}catch(Ne){oI(f,p,Ne)}}function JF(f,p,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(S){ez(f,p,S)},function(S){return oI(f,p,S)}):ez(f,p,x)}function ez(f,p,x){p.status="fulfilled",p.value=x,tz(p),f.state=x,p=f.pending,p!==null&&(x=p.next,x===p?f.pending=null:(x=x.next,p.next=x,ZF(f,x)))}function oI(f,p,x){var S=f.pending;if(f.pending=null,S!==null){S=S.next;do p.status="rejected",p.reason=x,tz(p),p=p.next;while(p!==S)}f.action=null}function tz(f){f=f.listeners;for(var p=0;p<f.length;p++)(0,f[p])()}function nz(f,p){return p}function rz(f,p){if(On){var x=br.formState;if(x!==null){e:{var S=an;if(On){if(Xr){t:{for(var $=Xr,_=eu;$.nodeType!==8;){if(!_){$=null;break t}if($=wl($.nextSibling),$===null){$=null;break t}}_=$.data,$=_==="F!"||_==="F"?$:null}if($){Xr=wl($.nextSibling),S=$.data==="F!";break e}}yf(S)}S=!1}S&&(p=x[0])}}return x=xi(),x.memoizedState=x.baseState=p,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nz,lastRenderedState:p},x.queue=S,x=Sz.bind(null,an,S),S.dispatch=x,S=iI(!1),_=fI.bind(null,an,!1,S.queue),S=xi(),$={state:p,dispatch:null,action:f,pending:null},S.queue=$,x=Zoe.bind(null,an,$,_,x),$.dispatch=x,S.memoizedState=f,[p,x,!1]}function sz(f){var p=ys();return az(p,tr,f)}function az(f,p,x){if(p=sI(f,p,nz)[0],f=Z1(Yu)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var S=i0(p)}catch(G){throw G===e0?H1:G}else S=p;p=ys();var $=p.queue,_=$.dispatch;return x!==p.memoizedState&&(an.flags|=2048,wp(9,J1(),Joe.bind(null,$,x),null)),[S,_,f]}function Joe(f,p){f.action=p}function iz(f){var p=ys(),x=tr;if(x!==null)return az(p,x,f);ys(),p=p.memoizedState,x=ys();var S=x.queue.dispatch;return x.memoizedState=f,[p,S,!1]}function wp(f,p,x,S){return f={tag:f,create:x,deps:S,inst:p,next:null},p=an.updateQueue,p===null&&(p=nI(),an.updateQueue=p),x=p.lastEffect,x===null?p.lastEffect=f.next=f:(S=x.next,x.next=f,f.next=S,p.lastEffect=f),f}function J1(){return{destroy:void 0,resource:void 0}}function oz(){return ys().memoizedState}function ew(f,p,x,S){var $=xi();S=S===void 0?null:S,an.flags|=f,$.memoizedState=wp(1|p,J1(),x,S)}function o0(f,p,x,S){var $=ys();S=S===void 0?null:S;var _=$.memoizedState.inst;tr!==null&&S!==null&&Q$(S,tr.memoizedState.deps)?$.memoizedState=wp(p,_,x,S):(an.flags|=f,$.memoizedState=wp(1|p,_,x,S))}function lz(f,p){ew(8390656,8,f,p)}function uz(f,p){o0(2048,8,f,p)}function cz(f,p){return o0(4,2,f,p)}function dz(f,p){return o0(4,4,f,p)}function fz(f,p){if(typeof p=="function"){f=f();var x=p(f);return function(){typeof x=="function"?x():p(null)}}if(p!=null)return f=f(),p.current=f,function(){p.current=null}}function hz(f,p,x){x=x!=null?x.concat([f]):null,o0(4,4,fz.bind(null,p,f),x)}function lI(){}function pz(f,p){var x=ys();p=p===void 0?null:p;var S=x.memoizedState;return p!==null&&Q$(p,S[1])?S[0]:(x.memoizedState=[f,p],f)}function mz(f,p){var x=ys();p=p===void 0?null:p;var S=x.memoizedState;if(p!==null&&Q$(p,S[1]))return S[0];if(S=f(),wf){Jt(!0);try{f()}finally{Jt(!1)}}return x.memoizedState=[S,p],S}function uI(f,p,x){return x===void 0||(Xc&1073741824)!==0?f.memoizedState=p:(f.memoizedState=x,f=bB(),an.lanes|=f,nd|=f,x)}function gz(f,p,x,S){return Gi(x,p)?x:bp.current!==null?(f=uI(f,x,S),Gi(f,p)||(Hs=!0),f):(Xc&42)===0?(Hs=!0,f.memoizedState=x):(f=bB(),an.lanes|=f,nd|=f,p)}function yz(f,p,x,S,$){var _=q.p;q.p=_!==0&&8>_?_:8;var G=j.T,Z={};j.T=Z,fI(f,!1,p,x);try{var oe=$(),Ne=j.S;if(Ne!==null&&Ne(Z,oe),oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var Le=Xoe(oe,S);l0(f,p,Le,Yi(f))}else l0(f,p,S,Yi(f))}catch(Ue){l0(f,p,{then:function(){},status:"rejected",reason:Ue},Yi())}finally{q.p=_,j.T=G}}function ele(){}function cI(f,p,x,S){if(f.tag!==5)throw Error(r(476));var $=bz(f).queue;yz(f,$,p,Y,x===null?ele:function(){return xz(f),x(S)})}function bz(f){var p=f.memoizedState;if(p!==null)return p;p={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yu,lastRenderedState:Y},next:null};var x={};return p.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yu,lastRenderedState:x},next:null},f.memoizedState=p,f=f.alternate,f!==null&&(f.memoizedState=p),p}function xz(f){var p=bz(f).next.queue;l0(f,p,{},Yi())}function dI(){return Na(T0)}function vz(){return ys().memoizedState}function wz(){return ys().memoizedState}function tle(f){for(var p=f.return;p!==null;){switch(p.tag){case 24:case 3:var x=Yi();f=qc(x);var S=Kc(p,f,x);S!==null&&(Qi(S,p,x),n0(S,p,x)),p={cache:B$()},f.payload=p;return}p=p.return}}function nle(f,p,x){var S=Yi();x={lane:S,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null},tw(f)?Cz(p,x):(x=R$(f,p,x,S),x!==null&&(Qi(x,f,S),kz(x,p,S)))}function Sz(f,p,x){var S=Yi();l0(f,p,x,S)}function l0(f,p,x,S){var $={lane:S,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null};if(tw(f))Cz(p,$);else{var _=f.alternate;if(f.lanes===0&&(_===null||_.lanes===0)&&(_=p.lastRenderedReducer,_!==null))try{var G=p.lastRenderedState,Z=_(G,x);if($.hasEagerState=!0,$.eagerState=Z,Gi(Z,G))return L1(f,p,$,0),br===null&&j1(),!1}catch{}finally{}if(x=R$(f,p,$,S),x!==null)return Qi(x,f,S),kz(x,p,S),!0}return!1}function fI(f,p,x,S){if(S={lane:2,revertLane:WI(),action:S,hasEagerState:!1,eagerState:null,next:null},tw(f)){if(p)throw Error(r(479))}else p=R$(f,x,S,2),p!==null&&Qi(p,f,2)}function tw(f){var p=f.alternate;return f===an||p!==null&&p===an}function Cz(f,p){xp=X1=!0;var x=f.pending;x===null?p.next=p:(p.next=x.next,x.next=p),f.pending=p}function kz(f,p,x){if((x&4194048)!==0){var S=p.lanes;S&=f.pendingLanes,x|=S,p.lanes=x,Ga(f,x)}}var nw={readContext:Na,use:Q1,useCallback:os,useContext:os,useEffect:os,useImperativeHandle:os,useLayoutEffect:os,useInsertionEffect:os,useMemo:os,useReducer:os,useRef:os,useState:os,useDebugValue:os,useDeferredValue:os,useTransition:os,useSyncExternalStore:os,useId:os,useHostTransitionStatus:os,useFormState:os,useActionState:os,useOptimistic:os,useMemoCache:os,useCacheRefresh:os},Nz={readContext:Na,use:Q1,useCallback:function(f,p){return xi().memoizedState=[f,p===void 0?null:p],f},useContext:Na,useEffect:lz,useImperativeHandle:function(f,p,x){x=x!=null?x.concat([f]):null,ew(4194308,4,fz.bind(null,p,f),x)},useLayoutEffect:function(f,p){return ew(4194308,4,f,p)},useInsertionEffect:function(f,p){ew(4,2,f,p)},useMemo:function(f,p){var x=xi();p=p===void 0?null:p;var S=f();if(wf){Jt(!0);try{f()}finally{Jt(!1)}}return x.memoizedState=[S,p],S},useReducer:function(f,p,x){var S=xi();if(x!==void 0){var $=x(p);if(wf){Jt(!0);try{x(p)}finally{Jt(!1)}}}else $=p;return S.memoizedState=S.baseState=$,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:$},S.queue=f,f=f.dispatch=nle.bind(null,an,f),[S.memoizedState,f]},useRef:function(f){var p=xi();return f={current:f},p.memoizedState=f},useState:function(f){f=iI(f);var p=f.queue,x=Sz.bind(null,an,p);return p.dispatch=x,[f.memoizedState,x]},useDebugValue:lI,useDeferredValue:function(f,p){var x=xi();return uI(x,f,p)},useTransition:function(){var f=iI(!1);return f=yz.bind(null,an,f.queue,!0,!1),xi().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,p,x){var S=an,$=xi();if(On){if(x===void 0)throw Error(r(407));x=x()}else{if(x=p(),br===null)throw Error(r(349));(Nn&124)!==0||HF(S,p,x)}$.memoizedState=x;var _={value:x,getSnapshot:p};return $.queue=_,lz(KF.bind(null,S,_,f),[f]),S.flags|=2048,wp(9,J1(),qF.bind(null,S,_,x,p),null),x},useId:function(){var f=xi(),p=br.identifierPrefix;if(On){var x=qu,S=Hu;x=(S&~(1<<32-Mn(S)-1)).toString(32)+x,p="«"+p+"R"+x,x=Y1++,0<x&&(p+="H"+x.toString(32)),p+="»"}else x=Yoe++,p="«"+p+"r"+x.toString(32)+"»";return f.memoizedState=p},useHostTransitionStatus:dI,useFormState:rz,useActionState:rz,useOptimistic:function(f){var p=xi();p.memoizedState=p.baseState=f;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=x,p=fI.bind(null,an,!0,x),x.dispatch=p,[f,p]},useMemoCache:rI,useCacheRefresh:function(){return xi().memoizedState=tle.bind(null,an)}},Tz={readContext:Na,use:Q1,useCallback:pz,useContext:Na,useEffect:uz,useImperativeHandle:hz,useInsertionEffect:cz,useLayoutEffect:dz,useMemo:mz,useReducer:Z1,useRef:oz,useState:function(){return Z1(Yu)},useDebugValue:lI,useDeferredValue:function(f,p){var x=ys();return gz(x,tr.memoizedState,f,p)},useTransition:function(){var f=Z1(Yu)[0],p=ys().memoizedState;return[typeof f=="boolean"?f:i0(f),p]},useSyncExternalStore:GF,useId:vz,useHostTransitionStatus:dI,useFormState:sz,useActionState:sz,useOptimistic:function(f,p){var x=ys();return QF(x,tr,f,p)},useMemoCache:rI,useCacheRefresh:wz},rle={readContext:Na,use:Q1,useCallback:pz,useContext:Na,useEffect:uz,useImperativeHandle:hz,useInsertionEffect:cz,useLayoutEffect:dz,useMemo:mz,useReducer:aI,useRef:oz,useState:function(){return aI(Yu)},useDebugValue:lI,useDeferredValue:function(f,p){var x=ys();return tr===null?uI(x,f,p):gz(x,tr.memoizedState,f,p)},useTransition:function(){var f=aI(Yu)[0],p=ys().memoizedState;return[typeof f=="boolean"?f:i0(f),p]},useSyncExternalStore:GF,useId:vz,useHostTransitionStatus:dI,useFormState:iz,useActionState:iz,useOptimistic:function(f,p){var x=ys();return tr!==null?QF(x,tr,f,p):(x.baseState=f,[f,x.queue.dispatch])},useMemoCache:rI,useCacheRefresh:wz},Sp=null,u0=0;function rw(f){var p=u0;return u0+=1,Sp===null&&(Sp=[]),jF(Sp,f,p)}function c0(f,p){p=p.props.ref,f.ref=p!==void 0?p:null}function sw(f,p){throw p.$$typeof===d?Error(r(525)):(f=Object.prototype.toString.call(p),Error(r(31,f==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":f)))}function $z(f){var p=f._init;return p(f._payload)}function Iz(f){function p(we,ge){if(f){var Ce=we.deletions;Ce===null?(we.deletions=[ge],we.flags|=16):Ce.push(ge)}}function x(we,ge){if(!f)return null;for(;ge!==null;)p(we,ge),ge=ge.sibling;return null}function S(we){for(var ge=new Map;we!==null;)we.key!==null?ge.set(we.key,we):ge.set(we.index,we),we=we.sibling;return ge}function $(we,ge){return we=Gu(we,ge),we.index=0,we.sibling=null,we}function _(we,ge,Ce){return we.index=Ce,f?(Ce=we.alternate,Ce!==null?(Ce=Ce.index,Ce<ge?(we.flags|=67108866,ge):Ce):(we.flags|=67108866,ge)):(we.flags|=1048576,ge)}function G(we){return f&&we.alternate===null&&(we.flags|=67108866),we}function Z(we,ge,Ce,Fe){return ge===null||ge.tag!==6?(ge=_$(Ce,we.mode,Fe),ge.return=we,ge):(ge=$(ge,Ce),ge.return=we,ge)}function oe(we,ge,Ce,Fe){var Ct=Ce.type;return Ct===g?Le(we,ge,Ce.props.children,Fe,Ce.key):ge!==null&&(ge.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===D&&$z(Ct)===ge.type)?(ge=$(ge,Ce.props),c0(ge,Ce),ge.return=we,ge):(ge=z1(Ce.type,Ce.key,Ce.props,null,we.mode,Fe),c0(ge,Ce),ge.return=we,ge)}function Ne(we,ge,Ce,Fe){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==Ce.containerInfo||ge.stateNode.implementation!==Ce.implementation?(ge=D$(Ce,we.mode,Fe),ge.return=we,ge):(ge=$(ge,Ce.children||[]),ge.return=we,ge)}function Le(we,ge,Ce,Fe,Ct){return ge===null||ge.tag!==7?(ge=hf(Ce,we.mode,Fe,Ct),ge.return=we,ge):(ge=$(ge,Ce),ge.return=we,ge)}function Ue(we,ge,Ce){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ge=_$(""+ge,we.mode,Ce),ge.return=we,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case h:return Ce=z1(ge.type,ge.key,ge.props,null,we.mode,Ce),c0(Ce,ge),Ce.return=we,Ce;case m:return ge=D$(ge,we.mode,Ce),ge.return=we,ge;case D:var Fe=ge._init;return ge=Fe(ge._payload),Ue(we,ge,Ce)}if(W(ge)||F(ge))return ge=hf(ge,we.mode,Ce,null),ge.return=we,ge;if(typeof ge.then=="function")return Ue(we,rw(ge),Ce);if(ge.$$typeof===k)return Ue(we,W1(we,ge),Ce);sw(we,ge)}return null}function Te(we,ge,Ce,Fe){var Ct=ge!==null?ge.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return Ct!==null?null:Z(we,ge,""+Ce,Fe);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case h:return Ce.key===Ct?oe(we,ge,Ce,Fe):null;case m:return Ce.key===Ct?Ne(we,ge,Ce,Fe):null;case D:return Ct=Ce._init,Ce=Ct(Ce._payload),Te(we,ge,Ce,Fe)}if(W(Ce)||F(Ce))return Ct!==null?null:Le(we,ge,Ce,Fe,null);if(typeof Ce.then=="function")return Te(we,ge,rw(Ce),Fe);if(Ce.$$typeof===k)return Te(we,ge,W1(we,Ce),Fe);sw(we,Ce)}return null}function Ae(we,ge,Ce,Fe,Ct){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint")return we=we.get(Ce)||null,Z(ge,we,""+Fe,Ct);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case h:return we=we.get(Fe.key===null?Ce:Fe.key)||null,oe(ge,we,Fe,Ct);case m:return we=we.get(Fe.key===null?Ce:Fe.key)||null,Ne(ge,we,Fe,Ct);case D:var un=Fe._init;return Fe=un(Fe._payload),Ae(we,ge,Ce,Fe,Ct)}if(W(Fe)||F(Fe))return we=we.get(Ce)||null,Le(ge,we,Fe,Ct,null);if(typeof Fe.then=="function")return Ae(we,ge,Ce,rw(Fe),Ct);if(Fe.$$typeof===k)return Ae(we,ge,Ce,W1(ge,Fe),Ct);sw(ge,Fe)}return null}function Ut(we,ge,Ce,Fe){for(var Ct=null,un=null,At=ge,jt=ge=0,Ks=null;At!==null&&jt<Ce.length;jt++){At.index>jt?(Ks=At,At=null):Ks=At.sibling;var In=Te(we,At,Ce[jt],Fe);if(In===null){At===null&&(At=Ks);break}f&&At&&In.alternate===null&&p(we,At),ge=_(In,ge,jt),un===null?Ct=In:un.sibling=In,un=In,At=Ks}if(jt===Ce.length)return x(we,At),On&&mf(we,jt),Ct;if(At===null){for(;jt<Ce.length;jt++)At=Ue(we,Ce[jt],Fe),At!==null&&(ge=_(At,ge,jt),un===null?Ct=At:un.sibling=At,un=At);return On&&mf(we,jt),Ct}for(At=S(At);jt<Ce.length;jt++)Ks=Ae(At,we,jt,Ce[jt],Fe),Ks!==null&&(f&&Ks.alternate!==null&&At.delete(Ks.key===null?jt:Ks.key),ge=_(Ks,ge,jt),un===null?Ct=Ks:un.sibling=Ks,un=Ks);return f&&At.forEach(function(dd){return p(we,dd)}),On&&mf(we,jt),Ct}function Pt(we,ge,Ce,Fe){if(Ce==null)throw Error(r(151));for(var Ct=null,un=null,At=ge,jt=ge=0,Ks=null,In=Ce.next();At!==null&&!In.done;jt++,In=Ce.next()){At.index>jt?(Ks=At,At=null):Ks=At.sibling;var dd=Te(we,At,In.value,Fe);if(dd===null){At===null&&(At=Ks);break}f&&At&&dd.alternate===null&&p(we,At),ge=_(dd,ge,jt),un===null?Ct=dd:un.sibling=dd,un=dd,At=Ks}if(In.done)return x(we,At),On&&mf(we,jt),Ct;if(At===null){for(;!In.done;jt++,In=Ce.next())In=Ue(we,In.value,Fe),In!==null&&(ge=_(In,ge,jt),un===null?Ct=In:un.sibling=In,un=In);return On&&mf(we,jt),Ct}for(At=S(At);!In.done;jt++,In=Ce.next())In=Ae(At,we,jt,In.value,Fe),In!==null&&(f&&In.alternate!==null&&At.delete(In.key===null?jt:In.key),ge=_(In,ge,jt),un===null?Ct=In:un.sibling=In,un=In);return f&&At.forEach(function(sue){return p(we,sue)}),On&&mf(we,jt),Ct}function rr(we,ge,Ce,Fe){if(typeof Ce=="object"&&Ce!==null&&Ce.type===g&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case h:e:{for(var Ct=Ce.key;ge!==null;){if(ge.key===Ct){if(Ct=Ce.type,Ct===g){if(ge.tag===7){x(we,ge.sibling),Fe=$(ge,Ce.props.children),Fe.return=we,we=Fe;break e}}else if(ge.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===D&&$z(Ct)===ge.type){x(we,ge.sibling),Fe=$(ge,Ce.props),c0(Fe,Ce),Fe.return=we,we=Fe;break e}x(we,ge);break}else p(we,ge);ge=ge.sibling}Ce.type===g?(Fe=hf(Ce.props.children,we.mode,Fe,Ce.key),Fe.return=we,we=Fe):(Fe=z1(Ce.type,Ce.key,Ce.props,null,we.mode,Fe),c0(Fe,Ce),Fe.return=we,we=Fe)}return G(we);case m:e:{for(Ct=Ce.key;ge!==null;){if(ge.key===Ct)if(ge.tag===4&&ge.stateNode.containerInfo===Ce.containerInfo&&ge.stateNode.implementation===Ce.implementation){x(we,ge.sibling),Fe=$(ge,Ce.children||[]),Fe.return=we,we=Fe;break e}else{x(we,ge);break}else p(we,ge);ge=ge.sibling}Fe=D$(Ce,we.mode,Fe),Fe.return=we,we=Fe}return G(we);case D:return Ct=Ce._init,Ce=Ct(Ce._payload),rr(we,ge,Ce,Fe)}if(W(Ce))return Ut(we,ge,Ce,Fe);if(F(Ce)){if(Ct=F(Ce),typeof Ct!="function")throw Error(r(150));return Ce=Ct.call(Ce),Pt(we,ge,Ce,Fe)}if(typeof Ce.then=="function")return rr(we,ge,rw(Ce),Fe);if(Ce.$$typeof===k)return rr(we,ge,W1(we,Ce),Fe);sw(we,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint"?(Ce=""+Ce,ge!==null&&ge.tag===6?(x(we,ge.sibling),Fe=$(ge,Ce),Fe.return=we,we=Fe):(x(we,ge),Fe=_$(Ce,we.mode,Fe),Fe.return=we,we=Fe),G(we)):x(we,ge)}return function(we,ge,Ce,Fe){try{u0=0;var Ct=rr(we,ge,Ce,Fe);return Sp=null,Ct}catch(At){if(At===e0||At===H1)throw At;var un=Hi(29,At,null,we.mode);return un.lanes=Fe,un.return=we,un}finally{}}}var Cp=Iz(!0),Ez=Iz(!1),Ao=ee(null),tu=null;function Yc(f){var p=f.alternate;ne(Ds,Ds.current&1),ne(Ao,f),tu===null&&(p===null||bp.current!==null||p.memoizedState!==null)&&(tu=f)}function Az(f){if(f.tag===22){if(ne(Ds,Ds.current),ne(Ao,f),tu===null){var p=f.alternate;p!==null&&p.memoizedState!==null&&(tu=f)}}else Qc()}function Qc(){ne(Ds,Ds.current),ne(Ao,Ao.current)}function Qu(f){te(Ao),tu===f&&(tu=null),te(Ds)}var Ds=ee(0);function aw(f){for(var p=f;p!==null;){if(p.tag===13){var x=p.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||nE(x)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function hI(f,p,x,S){p=f.memoizedState,x=x(S,p),x=x==null?p:c({},p,x),f.memoizedState=x,f.lanes===0&&(f.updateQueue.baseState=x)}var pI={enqueueSetState:function(f,p,x){f=f._reactInternals;var S=Yi(),$=qc(S);$.payload=p,x!=null&&($.callback=x),p=Kc(f,$,S),p!==null&&(Qi(p,f,S),n0(p,f,S))},enqueueReplaceState:function(f,p,x){f=f._reactInternals;var S=Yi(),$=qc(S);$.tag=1,$.payload=p,x!=null&&($.callback=x),p=Kc(f,$,S),p!==null&&(Qi(p,f,S),n0(p,f,S))},enqueueForceUpdate:function(f,p){f=f._reactInternals;var x=Yi(),S=qc(x);S.tag=2,p!=null&&(S.callback=p),p=Kc(f,S,x),p!==null&&(Qi(p,f,x),n0(p,f,x))}};function Rz(f,p,x,S,$,_,G){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(S,_,G):p.prototype&&p.prototype.isPureReactComponent?!Hy(x,S)||!Hy($,_):!0}function Oz(f,p,x,S){f=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(x,S),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(x,S),p.state!==f&&pI.enqueueReplaceState(p,p.state,null)}function Sf(f,p){var x=p;if("ref"in p){x={};for(var S in p)S!=="ref"&&(x[S]=p[S])}if(f=f.defaultProps){x===p&&(x=c({},x));for(var $ in f)x[$]===void 0&&(x[$]=f[$])}return x}var iw=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)};function _z(f){iw(f)}function Dz(f){console.error(f)}function Pz(f){iw(f)}function ow(f,p){try{var x=f.onUncaughtError;x(p.value,{componentStack:p.stack})}catch(S){setTimeout(function(){throw S})}}function Mz(f,p,x){try{var S=f.onCaughtError;S(x.value,{componentStack:x.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch($){setTimeout(function(){throw $})}}function mI(f,p,x){return x=qc(x),x.tag=3,x.payload={element:null},x.callback=function(){ow(f,p)},x}function jz(f){return f=qc(f),f.tag=3,f}function Lz(f,p,x,S){var $=x.type.getDerivedStateFromError;if(typeof $=="function"){var _=S.value;f.payload=function(){return $(_)},f.callback=function(){Mz(p,x,S)}}var G=x.stateNode;G!==null&&typeof G.componentDidCatch=="function"&&(f.callback=function(){Mz(p,x,S),typeof $!="function"&&(rd===null?rd=new Set([this]):rd.add(this));var Z=S.stack;this.componentDidCatch(S.value,{componentStack:Z!==null?Z:""})})}function sle(f,p,x,S,$){if(x.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(p=x.alternate,p!==null&&Qy(p,x,$,!0),x=Ao.current,x!==null){switch(x.tag){case 13:return tu===null?FI():x.alternate===null&&Yr===0&&(Yr=3),x.flags&=-257,x.flags|=65536,x.lanes=$,S===W$?x.flags|=16384:(p=x.updateQueue,p===null?x.updateQueue=new Set([S]):p.add(S),BI(f,S,$)),!1;case 22:return x.flags|=65536,S===W$?x.flags|=16384:(p=x.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([S])},x.updateQueue=p):(x=p.retryQueue,x===null?p.retryQueue=new Set([S]):x.add(S)),BI(f,S,$)),!1}throw Error(r(435,x.tag))}return BI(f,S,$),FI(),!1}if(On)return p=Ao.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=$,S!==j$&&(f=Error(r(422),{cause:S}),Yy(To(f,x)))):(S!==j$&&(p=Error(r(423),{cause:S}),Yy(To(p,x))),f=f.current.alternate,f.flags|=65536,$&=-$,f.lanes|=$,S=To(S,x),$=mI(f.stateNode,S,$),q$(f,$),Yr!==4&&(Yr=2)),!1;var _=Error(r(520),{cause:S});if(_=To(_,x),y0===null?y0=[_]:y0.push(_),Yr!==4&&(Yr=2),p===null)return!0;S=To(S,x),x=p;do{switch(x.tag){case 3:return x.flags|=65536,f=$&-$,x.lanes|=f,f=mI(x.stateNode,S,f),q$(x,f),!1;case 1:if(p=x.type,_=x.stateNode,(x.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(rd===null||!rd.has(_))))return x.flags|=65536,$&=-$,x.lanes|=$,$=jz($),Lz($,f,x,S),q$(x,$),!1}x=x.return}while(x!==null);return!1}var Fz=Error(r(461)),Hs=!1;function la(f,p,x,S){p.child=f===null?Ez(p,null,x,S):Cp(p,f.child,x,S)}function zz(f,p,x,S,$){x=x.render;var _=p.ref;if("ref"in S){var G={};for(var Z in S)Z!=="ref"&&(G[Z]=S[Z])}else G=S;return xf(p),S=Z$(f,p,x,G,_,$),Z=J$(),f!==null&&!Hs?(eI(f,p,$),Zu(f,p,$)):(On&&Z&&P$(p),p.flags|=1,la(f,p,S,$),p.child)}function Bz(f,p,x,S,$){if(f===null){var _=x.type;return typeof _=="function"&&!O$(_)&&_.defaultProps===void 0&&x.compare===null?(p.tag=15,p.type=_,Uz(f,p,_,S,$)):(f=z1(x.type,null,S,p,p.mode,$),f.ref=p.ref,f.return=p,p.child=f)}if(_=f.child,!CI(f,$)){var G=_.memoizedProps;if(x=x.compare,x=x!==null?x:Hy,x(G,S)&&f.ref===p.ref)return Zu(f,p,$)}return p.flags|=1,f=Gu(_,S),f.ref=p.ref,f.return=p,p.child=f}function Uz(f,p,x,S,$){if(f!==null){var _=f.memoizedProps;if(Hy(_,S)&&f.ref===p.ref)if(Hs=!1,p.pendingProps=S=_,CI(f,$))(f.flags&131072)!==0&&(Hs=!0);else return p.lanes=f.lanes,Zu(f,p,$)}return gI(f,p,x,S,$)}function Vz(f,p,x){var S=p.pendingProps,$=S.children,_=f!==null?f.memoizedState:null;if(S.mode==="hidden"){if((p.flags&128)!==0){if(S=_!==null?_.baseLanes|x:x,f!==null){for($=p.child=f.child,_=0;$!==null;)_=_|$.lanes|$.childLanes,$=$.sibling;p.childLanes=_&~S}else p.childLanes=0,p.child=null;return Wz(f,p,S,x)}if((x&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},f!==null&&G1(p,_!==null?_.cachePool:null),_!==null?UF(p,_):X$(),Az(p);else return p.lanes=p.childLanes=536870912,Wz(f,p,_!==null?_.baseLanes|x:x,x)}else _!==null?(G1(p,_.cachePool),UF(p,_),Qc(),p.memoizedState=null):(f!==null&&G1(p,null),X$(),Qc());return la(f,p,$,x),p.child}function Wz(f,p,x,S){var $=V$();return $=$===null?null:{parent:_s._currentValue,pool:$},p.memoizedState={baseLanes:x,cachePool:$},f!==null&&G1(p,null),X$(),Az(p),f!==null&&Qy(f,p,S,!0),null}function lw(f,p){var x=p.ref;if(x===null)f!==null&&f.ref!==null&&(p.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(r(284));(f===null||f.ref!==x)&&(p.flags|=4194816)}}function gI(f,p,x,S,$){return xf(p),x=Z$(f,p,x,S,void 0,$),S=J$(),f!==null&&!Hs?(eI(f,p,$),Zu(f,p,$)):(On&&S&&P$(p),p.flags|=1,la(f,p,x,$),p.child)}function Gz(f,p,x,S,$,_){return xf(p),p.updateQueue=null,x=WF(p,S,x,$),VF(f),S=J$(),f!==null&&!Hs?(eI(f,p,_),Zu(f,p,_)):(On&&S&&P$(p),p.flags|=1,la(f,p,x,_),p.child)}function Hz(f,p,x,S,$){if(xf(p),p.stateNode===null){var _=hp,G=x.contextType;typeof G=="object"&&G!==null&&(_=Na(G)),_=new x(S,_),p.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=pI,p.stateNode=_,_._reactInternals=p,_=p.stateNode,_.props=S,_.state=p.memoizedState,_.refs={},G$(p),G=x.contextType,_.context=typeof G=="object"&&G!==null?Na(G):hp,_.state=p.memoizedState,G=x.getDerivedStateFromProps,typeof G=="function"&&(hI(p,x,G,S),_.state=p.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(G=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),G!==_.state&&pI.enqueueReplaceState(_,_.state,null),s0(p,S,_,$),r0(),_.state=p.memoizedState),typeof _.componentDidMount=="function"&&(p.flags|=4194308),S=!0}else if(f===null){_=p.stateNode;var Z=p.memoizedProps,oe=Sf(x,Z);_.props=oe;var Ne=_.context,Le=x.contextType;G=hp,typeof Le=="object"&&Le!==null&&(G=Na(Le));var Ue=x.getDerivedStateFromProps;Le=typeof Ue=="function"||typeof _.getSnapshotBeforeUpdate=="function",Z=p.pendingProps!==Z,Le||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(Z||Ne!==G)&&Oz(p,_,S,G),Hc=!1;var Te=p.memoizedState;_.state=Te,s0(p,S,_,$),r0(),Ne=p.memoizedState,Z||Te!==Ne||Hc?(typeof Ue=="function"&&(hI(p,x,Ue,S),Ne=p.memoizedState),(oe=Hc||Rz(p,x,oe,S,Te,Ne,G))?(Le||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(p.flags|=4194308)):(typeof _.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=S,p.memoizedState=Ne),_.props=S,_.state=Ne,_.context=G,S=oe):(typeof _.componentDidMount=="function"&&(p.flags|=4194308),S=!1)}else{_=p.stateNode,H$(f,p),G=p.memoizedProps,Le=Sf(x,G),_.props=Le,Ue=p.pendingProps,Te=_.context,Ne=x.contextType,oe=hp,typeof Ne=="object"&&Ne!==null&&(oe=Na(Ne)),Z=x.getDerivedStateFromProps,(Ne=typeof Z=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(G!==Ue||Te!==oe)&&Oz(p,_,S,oe),Hc=!1,Te=p.memoizedState,_.state=Te,s0(p,S,_,$),r0();var Ae=p.memoizedState;G!==Ue||Te!==Ae||Hc||f!==null&&f.dependencies!==null&&V1(f.dependencies)?(typeof Z=="function"&&(hI(p,x,Z,S),Ae=p.memoizedState),(Le=Hc||Rz(p,x,Le,S,Te,Ae,oe)||f!==null&&f.dependencies!==null&&V1(f.dependencies))?(Ne||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(S,Ae,oe),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(S,Ae,oe)),typeof _.componentDidUpdate=="function"&&(p.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof _.componentDidUpdate!="function"||G===f.memoizedProps&&Te===f.memoizedState||(p.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||G===f.memoizedProps&&Te===f.memoizedState||(p.flags|=1024),p.memoizedProps=S,p.memoizedState=Ae),_.props=S,_.state=Ae,_.context=oe,S=Le):(typeof _.componentDidUpdate!="function"||G===f.memoizedProps&&Te===f.memoizedState||(p.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||G===f.memoizedProps&&Te===f.memoizedState||(p.flags|=1024),S=!1)}return _=S,lw(f,p),S=(p.flags&128)!==0,_||S?(_=p.stateNode,x=S&&typeof x.getDerivedStateFromError!="function"?null:_.render(),p.flags|=1,f!==null&&S?(p.child=Cp(p,f.child,null,$),p.child=Cp(p,null,x,$)):la(f,p,x,$),p.memoizedState=_.state,f=p.child):f=Zu(f,p,$),f}function qz(f,p,x,S){return Xy(),p.flags|=256,la(f,p,x,S),p.child}var yI={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bI(f){return{baseLanes:f,cachePool:DF()}}function xI(f,p,x){return f=f!==null?f.childLanes&~x:0,p&&(f|=Ro),f}function Kz(f,p,x){var S=p.pendingProps,$=!1,_=(p.flags&128)!==0,G;if((G=_)||(G=f!==null&&f.memoizedState===null?!1:(Ds.current&2)!==0),G&&($=!0,p.flags&=-129),G=(p.flags&32)!==0,p.flags&=-33,f===null){if(On){if($?Yc(p):Qc(),On){var Z=Xr,oe;if(oe=Z){e:{for(oe=Z,Z=eu;oe.nodeType!==8;){if(!Z){Z=null;break e}if(oe=wl(oe.nextSibling),oe===null){Z=null;break e}}Z=oe}Z!==null?(p.memoizedState={dehydrated:Z,treeContext:pf!==null?{id:Hu,overflow:qu}:null,retryLane:536870912,hydrationErrors:null},oe=Hi(18,null,null,0),oe.stateNode=Z,oe.return=p,p.child=oe,Ja=p,Xr=null,oe=!0):oe=!1}oe||yf(p)}if(Z=p.memoizedState,Z!==null&&(Z=Z.dehydrated,Z!==null))return nE(Z)?p.lanes=32:p.lanes=536870912,null;Qu(p)}return Z=S.children,S=S.fallback,$?(Qc(),$=p.mode,Z=uw({mode:"hidden",children:Z},$),S=hf(S,$,x,null),Z.return=p,S.return=p,Z.sibling=S,p.child=Z,$=p.child,$.memoizedState=bI(x),$.childLanes=xI(f,G,x),p.memoizedState=yI,S):(Yc(p),vI(p,Z))}if(oe=f.memoizedState,oe!==null&&(Z=oe.dehydrated,Z!==null)){if(_)p.flags&256?(Yc(p),p.flags&=-257,p=wI(f,p,x)):p.memoizedState!==null?(Qc(),p.child=f.child,p.flags|=128,p=null):(Qc(),$=S.fallback,Z=p.mode,S=uw({mode:"visible",children:S.children},Z),$=hf($,Z,x,null),$.flags|=2,S.return=p,$.return=p,S.sibling=$,p.child=S,Cp(p,f.child,null,x),S=p.child,S.memoizedState=bI(x),S.childLanes=xI(f,G,x),p.memoizedState=yI,p=$);else if(Yc(p),nE(Z)){if(G=Z.nextSibling&&Z.nextSibling.dataset,G)var Ne=G.dgst;G=Ne,S=Error(r(419)),S.stack="",S.digest=G,Yy({value:S,source:null,stack:null}),p=wI(f,p,x)}else if(Hs||Qy(f,p,x,!1),G=(x&f.childLanes)!==0,Hs||G){if(G=br,G!==null&&(S=x&-x,S=(S&42)!==0?1:xo(S),S=(S&(G.suspendedLanes|x))!==0?0:S,S!==0&&S!==oe.retryLane))throw oe.retryLane=S,fp(f,S),Qi(G,f,S),Fz;Z.data==="$?"||FI(),p=wI(f,p,x)}else Z.data==="$?"?(p.flags|=192,p.child=f.child,p=null):(f=oe.treeContext,Xr=wl(Z.nextSibling),Ja=p,On=!0,gf=null,eu=!1,f!==null&&(Io[Eo++]=Hu,Io[Eo++]=qu,Io[Eo++]=pf,Hu=f.id,qu=f.overflow,pf=p),p=vI(p,S.children),p.flags|=4096);return p}return $?(Qc(),$=S.fallback,Z=p.mode,oe=f.child,Ne=oe.sibling,S=Gu(oe,{mode:"hidden",children:S.children}),S.subtreeFlags=oe.subtreeFlags&65011712,Ne!==null?$=Gu(Ne,$):($=hf($,Z,x,null),$.flags|=2),$.return=p,S.return=p,S.sibling=$,p.child=S,S=$,$=p.child,Z=f.child.memoizedState,Z===null?Z=bI(x):(oe=Z.cachePool,oe!==null?(Ne=_s._currentValue,oe=oe.parent!==Ne?{parent:Ne,pool:Ne}:oe):oe=DF(),Z={baseLanes:Z.baseLanes|x,cachePool:oe}),$.memoizedState=Z,$.childLanes=xI(f,G,x),p.memoizedState=yI,S):(Yc(p),x=f.child,f=x.sibling,x=Gu(x,{mode:"visible",children:S.children}),x.return=p,x.sibling=null,f!==null&&(G=p.deletions,G===null?(p.deletions=[f],p.flags|=16):G.push(f)),p.child=x,p.memoizedState=null,x)}function vI(f,p){return p=uw({mode:"visible",children:p},f.mode),p.return=f,f.child=p}function uw(f,p){return f=Hi(22,f,null,p),f.lanes=0,f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},f}function wI(f,p,x){return Cp(p,f.child,null,x),f=vI(p,p.pendingProps.children),f.flags|=2,p.memoizedState=null,f}function Xz(f,p,x){f.lanes|=p;var S=f.alternate;S!==null&&(S.lanes|=p),F$(f.return,p,x)}function SI(f,p,x,S,$){var _=f.memoizedState;_===null?f.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:S,tail:x,tailMode:$}:(_.isBackwards=p,_.rendering=null,_.renderingStartTime=0,_.last=S,_.tail=x,_.tailMode=$)}function Yz(f,p,x){var S=p.pendingProps,$=S.revealOrder,_=S.tail;if(la(f,p,S.children,x),S=Ds.current,(S&2)!==0)S=S&1|2,p.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=p.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&Xz(f,x,p);else if(f.tag===19)Xz(f,x,p);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===p)break e;for(;f.sibling===null;){if(f.return===null||f.return===p)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}S&=1}switch(ne(Ds,S),$){case"forwards":for(x=p.child,$=null;x!==null;)f=x.alternate,f!==null&&aw(f)===null&&($=x),x=x.sibling;x=$,x===null?($=p.child,p.child=null):($=x.sibling,x.sibling=null),SI(p,!1,$,x,_);break;case"backwards":for(x=null,$=p.child,p.child=null;$!==null;){if(f=$.alternate,f!==null&&aw(f)===null){p.child=$;break}f=$.sibling,$.sibling=x,x=$,$=f}SI(p,!0,x,null,_);break;case"together":SI(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Zu(f,p,x){if(f!==null&&(p.dependencies=f.dependencies),nd|=p.lanes,(x&p.childLanes)===0)if(f!==null){if(Qy(f,p,x,!1),(x&p.childLanes)===0)return null}else return null;if(f!==null&&p.child!==f.child)throw Error(r(153));if(p.child!==null){for(f=p.child,x=Gu(f,f.pendingProps),p.child=x,x.return=p;f.sibling!==null;)f=f.sibling,x=x.sibling=Gu(f,f.pendingProps),x.return=p;x.sibling=null}return p.child}function CI(f,p){return(f.lanes&p)!==0?!0:(f=f.dependencies,!!(f!==null&&V1(f)))}function ale(f,p,x){switch(p.tag){case 3:Ve(p,p.stateNode.containerInfo),Gc(p,_s,f.memoizedState.cache),Xy();break;case 27:case 5:We(p);break;case 4:Ve(p,p.stateNode.containerInfo);break;case 10:Gc(p,p.type,p.memoizedProps.value);break;case 13:var S=p.memoizedState;if(S!==null)return S.dehydrated!==null?(Yc(p),p.flags|=128,null):(x&p.child.childLanes)!==0?Kz(f,p,x):(Yc(p),f=Zu(f,p,x),f!==null?f.sibling:null);Yc(p);break;case 19:var $=(f.flags&128)!==0;if(S=(x&p.childLanes)!==0,S||(Qy(f,p,x,!1),S=(x&p.childLanes)!==0),$){if(S)return Yz(f,p,x);p.flags|=128}if($=p.memoizedState,$!==null&&($.rendering=null,$.tail=null,$.lastEffect=null),ne(Ds,Ds.current),S)break;return null;case 22:case 23:return p.lanes=0,Vz(f,p,x);case 24:Gc(p,_s,f.memoizedState.cache)}return Zu(f,p,x)}function Qz(f,p,x){if(f!==null)if(f.memoizedProps!==p.pendingProps)Hs=!0;else{if(!CI(f,x)&&(p.flags&128)===0)return Hs=!1,ale(f,p,x);Hs=(f.flags&131072)!==0}else Hs=!1,On&&(p.flags&1048576)!==0&&$F(p,U1,p.index);switch(p.lanes=0,p.tag){case 16:e:{f=p.pendingProps;var S=p.elementType,$=S._init;if(S=$(S._payload),p.type=S,typeof S=="function")O$(S)?(f=Sf(S,f),p.tag=1,p=Hz(null,p,S,f,x)):(p.tag=0,p=gI(null,p,S,f,x));else{if(S!=null){if($=S.$$typeof,$===T){p.tag=11,p=zz(null,p,S,f,x);break e}else if($===A){p.tag=14,p=Bz(null,p,S,f,x);break e}}throw p=V(S)||S,Error(r(306,p,""))}}return p;case 0:return gI(f,p,p.type,p.pendingProps,x);case 1:return S=p.type,$=Sf(S,p.pendingProps),Hz(f,p,S,$,x);case 3:e:{if(Ve(p,p.stateNode.containerInfo),f===null)throw Error(r(387));S=p.pendingProps;var _=p.memoizedState;$=_.element,H$(f,p),s0(p,S,null,x);var G=p.memoizedState;if(S=G.cache,Gc(p,_s,S),S!==_.cache&&z$(p,[_s],x,!0),r0(),S=G.element,_.isDehydrated)if(_={element:S,isDehydrated:!1,cache:G.cache},p.updateQueue.baseState=_,p.memoizedState=_,p.flags&256){p=qz(f,p,S,x);break e}else if(S!==$){$=To(Error(r(424)),p),Yy($),p=qz(f,p,S,x);break e}else{switch(f=p.stateNode.containerInfo,f.nodeType){case 9:f=f.body;break;default:f=f.nodeName==="HTML"?f.ownerDocument.body:f}for(Xr=wl(f.firstChild),Ja=p,On=!0,gf=null,eu=!0,x=Ez(p,null,S,x),p.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling}else{if(Xy(),S===$){p=Zu(f,p,x);break e}la(f,p,S,x)}p=p.child}return p;case 26:return lw(f,p),f===null?(x=t5(p.type,null,p.pendingProps,null))?p.memoizedState=x:On||(x=p.type,f=p.pendingProps,S=Cw(Ie.current).createElement(x),S[Qn]=p,S[Wr]=f,ca(S,x,f),lr(S),p.stateNode=S):p.memoizedState=t5(p.type,f.memoizedProps,p.pendingProps,f.memoizedState),null;case 27:return We(p),f===null&&On&&(S=p.stateNode=ZB(p.type,p.pendingProps,Ie.current),Ja=p,eu=!0,$=Xr,id(p.type)?(rE=$,Xr=wl(S.firstChild)):Xr=$),la(f,p,p.pendingProps.children,x),lw(f,p),f===null&&(p.flags|=4194304),p.child;case 5:return f===null&&On&&(($=S=Xr)&&(S=_le(S,p.type,p.pendingProps,eu),S!==null?(p.stateNode=S,Ja=p,Xr=wl(S.firstChild),eu=!1,$=!0):$=!1),$||yf(p)),We(p),$=p.type,_=p.pendingProps,G=f!==null?f.memoizedProps:null,S=_.children,JI($,_)?S=null:G!==null&&JI($,G)&&(p.flags|=32),p.memoizedState!==null&&($=Z$(f,p,Qoe,null,null,x),T0._currentValue=$),lw(f,p),la(f,p,S,x),p.child;case 6:return f===null&&On&&((f=x=Xr)&&(x=Dle(x,p.pendingProps,eu),x!==null?(p.stateNode=x,Ja=p,Xr=null,f=!0):f=!1),f||yf(p)),null;case 13:return Kz(f,p,x);case 4:return Ve(p,p.stateNode.containerInfo),S=p.pendingProps,f===null?p.child=Cp(p,null,S,x):la(f,p,S,x),p.child;case 11:return zz(f,p,p.type,p.pendingProps,x);case 7:return la(f,p,p.pendingProps,x),p.child;case 8:return la(f,p,p.pendingProps.children,x),p.child;case 12:return la(f,p,p.pendingProps.children,x),p.child;case 10:return S=p.pendingProps,Gc(p,p.type,S.value),la(f,p,S.children,x),p.child;case 9:return $=p.type._context,S=p.pendingProps.children,xf(p),$=Na($),S=S($),p.flags|=1,la(f,p,S,x),p.child;case 14:return Bz(f,p,p.type,p.pendingProps,x);case 15:return Uz(f,p,p.type,p.pendingProps,x);case 19:return Yz(f,p,x);case 31:return S=p.pendingProps,x=p.mode,S={mode:S.mode,children:S.children},f===null?(x=uw(S,x),x.ref=p.ref,p.child=x,x.return=p,p=x):(x=Gu(f.child,S),x.ref=p.ref,p.child=x,x.return=p,p=x),p;case 22:return Vz(f,p,x);case 24:return xf(p),S=Na(_s),f===null?($=V$(),$===null&&($=br,_=B$(),$.pooledCache=_,_.refCount++,_!==null&&($.pooledCacheLanes|=x),$=_),p.memoizedState={parent:S,cache:$},G$(p),Gc(p,_s,$)):((f.lanes&x)!==0&&(H$(f,p),s0(p,null,null,x),r0()),$=f.memoizedState,_=p.memoizedState,$.parent!==S?($={parent:S,cache:S},p.memoizedState=$,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=$),Gc(p,_s,S)):(S=_.cache,Gc(p,_s,S),S!==$.cache&&z$(p,[_s],x,!0))),la(f,p,p.pendingProps.children,x),p.child;case 29:throw p.pendingProps}throw Error(r(156,p.tag))}function Ju(f){f.flags|=4}function Zz(f,p){if(p.type!=="stylesheet"||(p.state.loading&4)!==0)f.flags&=-16777217;else if(f.flags|=16777216,!i5(p)){if(p=Ao.current,p!==null&&((Nn&4194048)===Nn?tu!==null:(Nn&62914560)!==Nn&&(Nn&536870912)===0||p!==tu))throw t0=W$,PF;f.flags|=8192}}function cw(f,p){p!==null&&(f.flags|=4),f.flags&16384&&(p=f.tag!==22?zi():536870912,f.lanes|=p,$p|=p)}function d0(f,p){if(!On)switch(f.tailMode){case"hidden":p=f.tail;for(var x=null;p!==null;)p.alternate!==null&&(x=p),p=p.sibling;x===null?f.tail=null:x.sibling=null;break;case"collapsed":x=f.tail;for(var S=null;x!==null;)x.alternate!==null&&(S=x),x=x.sibling;S===null?p||f.tail===null?f.tail=null:f.tail.sibling=null:S.sibling=null}}function Mr(f){var p=f.alternate!==null&&f.alternate.child===f.child,x=0,S=0;if(p)for(var $=f.child;$!==null;)x|=$.lanes|$.childLanes,S|=$.subtreeFlags&65011712,S|=$.flags&65011712,$.return=f,$=$.sibling;else for($=f.child;$!==null;)x|=$.lanes|$.childLanes,S|=$.subtreeFlags,S|=$.flags,$.return=f,$=$.sibling;return f.subtreeFlags|=S,f.childLanes=x,p}function ile(f,p,x){var S=p.pendingProps;switch(M$(p),p.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mr(p),null;case 1:return Mr(p),null;case 3:return x=p.stateNode,S=null,f!==null&&(S=f.memoizedState.cache),p.memoizedState.cache!==S&&(p.flags|=2048),Xu(_s),$e(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(f===null||f.child===null)&&(Ky(p)?Ju(p):f===null||f.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,AF())),Mr(p),null;case 26:return x=p.memoizedState,f===null?(Ju(p),x!==null?(Mr(p),Zz(p,x)):(Mr(p),p.flags&=-16777217)):x?x!==f.memoizedState?(Ju(p),Mr(p),Zz(p,x)):(Mr(p),p.flags&=-16777217):(f.memoizedProps!==S&&Ju(p),Mr(p),p.flags&=-16777217),null;case 27:ze(p),x=Ie.current;var $=p.type;if(f!==null&&p.stateNode!=null)f.memoizedProps!==S&&Ju(p);else{if(!S){if(p.stateNode===null)throw Error(r(166));return Mr(p),null}f=he.current,Ky(p)?IF(p):(f=ZB($,S,x),p.stateNode=f,Ju(p))}return Mr(p),null;case 5:if(ze(p),x=p.type,f!==null&&p.stateNode!=null)f.memoizedProps!==S&&Ju(p);else{if(!S){if(p.stateNode===null)throw Error(r(166));return Mr(p),null}if(f=he.current,Ky(p))IF(p);else{switch($=Cw(Ie.current),f){case 1:f=$.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:f=$.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":f=$.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":f=$.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":f=$.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof S.is=="string"?$.createElement("select",{is:S.is}):$.createElement("select"),S.multiple?f.multiple=!0:S.size&&(f.size=S.size);break;default:f=typeof S.is=="string"?$.createElement(x,{is:S.is}):$.createElement(x)}}f[Qn]=p,f[Wr]=S;e:for($=p.child;$!==null;){if($.tag===5||$.tag===6)f.appendChild($.stateNode);else if($.tag!==4&&$.tag!==27&&$.child!==null){$.child.return=$,$=$.child;continue}if($===p)break e;for(;$.sibling===null;){if($.return===null||$.return===p)break e;$=$.return}$.sibling.return=$.return,$=$.sibling}p.stateNode=f;e:switch(ca(f,x,S),x){case"button":case"input":case"select":case"textarea":f=!!S.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Ju(p)}}return Mr(p),p.flags&=-16777217,null;case 6:if(f&&p.stateNode!=null)f.memoizedProps!==S&&Ju(p);else{if(typeof S!="string"&&p.stateNode===null)throw Error(r(166));if(f=Ie.current,Ky(p)){if(f=p.stateNode,x=p.memoizedProps,S=null,$=Ja,$!==null)switch($.tag){case 27:case 5:S=$.memoizedProps}f[Qn]=p,f=!!(f.nodeValue===x||S!==null&&S.suppressHydrationWarning===!0||GB(f.nodeValue,x)),f||yf(p)}else f=Cw(f).createTextNode(S),f[Qn]=p,p.stateNode=f}return Mr(p),null;case 13:if(S=p.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if($=Ky(p),S!==null&&S.dehydrated!==null){if(f===null){if(!$)throw Error(r(318));if($=p.memoizedState,$=$!==null?$.dehydrated:null,!$)throw Error(r(317));$[Qn]=p}else Xy(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Mr(p),$=!1}else $=AF(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=$),$=!0;if(!$)return p.flags&256?(Qu(p),p):(Qu(p),null)}if(Qu(p),(p.flags&128)!==0)return p.lanes=x,p;if(x=S!==null,f=f!==null&&f.memoizedState!==null,x){S=p.child,$=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&($=S.alternate.memoizedState.cachePool.pool);var _=null;S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(_=S.memoizedState.cachePool.pool),_!==$&&(S.flags|=2048)}return x!==f&&x&&(p.child.flags|=8192),cw(p,p.updateQueue),Mr(p),null;case 4:return $e(),f===null&&KI(p.stateNode.containerInfo),Mr(p),null;case 10:return Xu(p.type),Mr(p),null;case 19:if(te(Ds),$=p.memoizedState,$===null)return Mr(p),null;if(S=(p.flags&128)!==0,_=$.rendering,_===null)if(S)d0($,!1);else{if(Yr!==0||f!==null&&(f.flags&128)!==0)for(f=p.child;f!==null;){if(_=aw(f),_!==null){for(p.flags|=128,d0($,!1),f=_.updateQueue,p.updateQueue=f,cw(p,f),p.subtreeFlags=0,f=x,x=p.child;x!==null;)TF(x,f),x=x.sibling;return ne(Ds,Ds.current&1|2),p.child}f=f.sibling}$.tail!==null&&xe()>hw&&(p.flags|=128,S=!0,d0($,!1),p.lanes=4194304)}else{if(!S)if(f=aw(_),f!==null){if(p.flags|=128,S=!0,f=f.updateQueue,p.updateQueue=f,cw(p,f),d0($,!0),$.tail===null&&$.tailMode==="hidden"&&!_.alternate&&!On)return Mr(p),null}else 2*xe()-$.renderingStartTime>hw&&x!==536870912&&(p.flags|=128,S=!0,d0($,!1),p.lanes=4194304);$.isBackwards?(_.sibling=p.child,p.child=_):(f=$.last,f!==null?f.sibling=_:p.child=_,$.last=_)}return $.tail!==null?(p=$.tail,$.rendering=p,$.tail=p.sibling,$.renderingStartTime=xe(),p.sibling=null,f=Ds.current,ne(Ds,S?f&1|2:f&1),p):(Mr(p),null);case 22:case 23:return Qu(p),Y$(),S=p.memoizedState!==null,f!==null?f.memoizedState!==null!==S&&(p.flags|=8192):S&&(p.flags|=8192),S?(x&536870912)!==0&&(p.flags&128)===0&&(Mr(p),p.subtreeFlags&6&&(p.flags|=8192)):Mr(p),x=p.updateQueue,x!==null&&cw(p,x.retryQueue),x=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(x=f.memoizedState.cachePool.pool),S=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(S=p.memoizedState.cachePool.pool),S!==x&&(p.flags|=2048),f!==null&&te(vf),null;case 24:return x=null,f!==null&&(x=f.memoizedState.cache),p.memoizedState.cache!==x&&(p.flags|=2048),Xu(_s),Mr(p),null;case 25:return null;case 30:return null}throw Error(r(156,p.tag))}function ole(f,p){switch(M$(p),p.tag){case 1:return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 3:return Xu(_s),$e(),f=p.flags,(f&65536)!==0&&(f&128)===0?(p.flags=f&-65537|128,p):null;case 26:case 27:case 5:return ze(p),null;case 13:if(Qu(p),f=p.memoizedState,f!==null&&f.dehydrated!==null){if(p.alternate===null)throw Error(r(340));Xy()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 19:return te(Ds),null;case 4:return $e(),null;case 10:return Xu(p.type),null;case 22:case 23:return Qu(p),Y$(),f!==null&&te(vf),f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 24:return Xu(_s),null;case 25:return null;default:return null}}function Jz(f,p){switch(M$(p),p.tag){case 3:Xu(_s),$e();break;case 26:case 27:case 5:ze(p);break;case 4:$e();break;case 13:Qu(p);break;case 19:te(Ds);break;case 10:Xu(p.type);break;case 22:case 23:Qu(p),Y$(),f!==null&&te(vf);break;case 24:Xu(_s)}}function f0(f,p){try{var x=p.updateQueue,S=x!==null?x.lastEffect:null;if(S!==null){var $=S.next;x=$;do{if((x.tag&f)===f){S=void 0;var _=x.create,G=x.inst;S=_(),G.destroy=S}x=x.next}while(x!==$)}}catch(Z){ur(p,p.return,Z)}}function Zc(f,p,x){try{var S=p.updateQueue,$=S!==null?S.lastEffect:null;if($!==null){var _=$.next;S=_;do{if((S.tag&f)===f){var G=S.inst,Z=G.destroy;if(Z!==void 0){G.destroy=void 0,$=p;var oe=x,Ne=Z;try{Ne()}catch(Le){ur($,oe,Le)}}}S=S.next}while(S!==_)}}catch(Le){ur(p,p.return,Le)}}function eB(f){var p=f.updateQueue;if(p!==null){var x=f.stateNode;try{BF(p,x)}catch(S){ur(f,f.return,S)}}}function tB(f,p,x){x.props=Sf(f.type,f.memoizedProps),x.state=f.memoizedState;try{x.componentWillUnmount()}catch(S){ur(f,p,S)}}function h0(f,p){try{var x=f.ref;if(x!==null){switch(f.tag){case 26:case 27:case 5:var S=f.stateNode;break;case 30:S=f.stateNode;break;default:S=f.stateNode}typeof x=="function"?f.refCleanup=x(S):x.current=S}}catch($){ur(f,p,$)}}function nu(f,p){var x=f.ref,S=f.refCleanup;if(x!==null)if(typeof S=="function")try{S()}catch($){ur(f,p,$)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch($){ur(f,p,$)}else x.current=null}function nB(f){var p=f.type,x=f.memoizedProps,S=f.stateNode;try{e:switch(p){case"button":case"input":case"select":case"textarea":x.autoFocus&&S.focus();break e;case"img":x.src?S.src=x.src:x.srcSet&&(S.srcset=x.srcSet)}}catch($){ur(f,f.return,$)}}function kI(f,p,x){try{var S=f.stateNode;Ile(S,f.type,x,p),S[Wr]=p}catch($){ur(f,f.return,$)}}function rB(f){return f.tag===5||f.tag===3||f.tag===26||f.tag===27&&id(f.type)||f.tag===4}function NI(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||rB(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.tag===27&&id(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function TI(f,p,x){var S=f.tag;if(S===5||S===6)f=f.stateNode,p?(x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x).insertBefore(f,p):(p=x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x,p.appendChild(f),x=x._reactRootContainer,x!=null||p.onclick!==null||(p.onclick=Sw));else if(S!==4&&(S===27&&id(f.type)&&(x=f.stateNode,p=null),f=f.child,f!==null))for(TI(f,p,x),f=f.sibling;f!==null;)TI(f,p,x),f=f.sibling}function dw(f,p,x){var S=f.tag;if(S===5||S===6)f=f.stateNode,p?x.insertBefore(f,p):x.appendChild(f);else if(S!==4&&(S===27&&id(f.type)&&(x=f.stateNode),f=f.child,f!==null))for(dw(f,p,x),f=f.sibling;f!==null;)dw(f,p,x),f=f.sibling}function sB(f){var p=f.stateNode,x=f.memoizedProps;try{for(var S=f.type,$=p.attributes;$.length;)p.removeAttributeNode($[0]);ca(p,S,x),p[Qn]=f,p[Wr]=x}catch(_){ur(f,f.return,_)}}var ec=!1,ls=!1,$I=!1,aB=typeof WeakSet=="function"?WeakSet:Set,qs=null;function lle(f,p){if(f=f.containerInfo,QI=Ew,f=gF(f),N$(f)){if("selectionStart"in f)var x={start:f.selectionStart,end:f.selectionEnd};else e:{x=(x=f.ownerDocument)&&x.defaultView||window;var S=x.getSelection&&x.getSelection();if(S&&S.rangeCount!==0){x=S.anchorNode;var $=S.anchorOffset,_=S.focusNode;S=S.focusOffset;try{x.nodeType,_.nodeType}catch{x=null;break e}var G=0,Z=-1,oe=-1,Ne=0,Le=0,Ue=f,Te=null;t:for(;;){for(var Ae;Ue!==x||$!==0&&Ue.nodeType!==3||(Z=G+$),Ue!==_||S!==0&&Ue.nodeType!==3||(oe=G+S),Ue.nodeType===3&&(G+=Ue.nodeValue.length),(Ae=Ue.firstChild)!==null;)Te=Ue,Ue=Ae;for(;;){if(Ue===f)break t;if(Te===x&&++Ne===$&&(Z=G),Te===_&&++Le===S&&(oe=G),(Ae=Ue.nextSibling)!==null)break;Ue=Te,Te=Ue.parentNode}Ue=Ae}x=Z===-1||oe===-1?null:{start:Z,end:oe}}else x=null}x=x||{start:0,end:0}}else x=null;for(ZI={focusedElem:f,selectionRange:x},Ew=!1,qs=p;qs!==null;)if(p=qs,f=p.child,(p.subtreeFlags&1024)!==0&&f!==null)f.return=p,qs=f;else for(;qs!==null;){switch(p=qs,_=p.alternate,f=p.flags,p.tag){case 0:break;case 11:case 15:break;case 1:if((f&1024)!==0&&_!==null){f=void 0,x=p,$=_.memoizedProps,_=_.memoizedState,S=x.stateNode;try{var Ut=Sf(x.type,$,x.elementType===x.type);f=S.getSnapshotBeforeUpdate(Ut,_),S.__reactInternalSnapshotBeforeUpdate=f}catch(Pt){ur(x,x.return,Pt)}}break;case 3:if((f&1024)!==0){if(f=p.stateNode.containerInfo,x=f.nodeType,x===9)tE(f);else if(x===1)switch(f.nodeName){case"HEAD":case"HTML":case"BODY":tE(f);break;default:f.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(r(163))}if(f=p.sibling,f!==null){f.return=p.return,qs=f;break}qs=p.return}}function iB(f,p,x){var S=x.flags;switch(x.tag){case 0:case 11:case 15:Jc(f,x),S&4&&f0(5,x);break;case 1:if(Jc(f,x),S&4)if(f=x.stateNode,p===null)try{f.componentDidMount()}catch(G){ur(x,x.return,G)}else{var $=Sf(x.type,p.memoizedProps);p=p.memoizedState;try{f.componentDidUpdate($,p,f.__reactInternalSnapshotBeforeUpdate)}catch(G){ur(x,x.return,G)}}S&64&&eB(x),S&512&&h0(x,x.return);break;case 3:if(Jc(f,x),S&64&&(f=x.updateQueue,f!==null)){if(p=null,x.child!==null)switch(x.child.tag){case 27:case 5:p=x.child.stateNode;break;case 1:p=x.child.stateNode}try{BF(f,p)}catch(G){ur(x,x.return,G)}}break;case 27:p===null&&S&4&&sB(x);case 26:case 5:Jc(f,x),p===null&&S&4&&nB(x),S&512&&h0(x,x.return);break;case 12:Jc(f,x);break;case 13:Jc(f,x),S&4&&uB(f,x),S&64&&(f=x.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&(x=yle.bind(null,x),Ple(f,x))));break;case 22:if(S=x.memoizedState!==null||ec,!S){p=p!==null&&p.memoizedState!==null||ls,$=ec;var _=ls;ec=S,(ls=p)&&!_?ed(f,x,(x.subtreeFlags&8772)!==0):Jc(f,x),ec=$,ls=_}break;case 30:break;default:Jc(f,x)}}function oB(f){var p=f.alternate;p!==null&&(f.alternate=null,oB(p)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(p=f.stateNode,p!==null&&ml(p)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}var Tr=null,vi=!1;function tc(f,p,x){for(x=x.child;x!==null;)lB(f,p,x),x=x.sibling}function lB(f,p,x){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(rn,x)}catch{}switch(x.tag){case 26:ls||nu(x,p),tc(f,p,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:ls||nu(x,p);var S=Tr,$=vi;id(x.type)&&(Tr=x.stateNode,vi=!1),tc(f,p,x),S0(x.stateNode),Tr=S,vi=$;break;case 5:ls||nu(x,p);case 6:if(S=Tr,$=vi,Tr=null,tc(f,p,x),Tr=S,vi=$,Tr!==null)if(vi)try{(Tr.nodeType===9?Tr.body:Tr.nodeName==="HTML"?Tr.ownerDocument.body:Tr).removeChild(x.stateNode)}catch(_){ur(x,p,_)}else try{Tr.removeChild(x.stateNode)}catch(_){ur(x,p,_)}break;case 18:Tr!==null&&(vi?(f=Tr,YB(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,x.stateNode),A0(f)):YB(Tr,x.stateNode));break;case 4:S=Tr,$=vi,Tr=x.stateNode.containerInfo,vi=!0,tc(f,p,x),Tr=S,vi=$;break;case 0:case 11:case 14:case 15:ls||Zc(2,x,p),ls||Zc(4,x,p),tc(f,p,x);break;case 1:ls||(nu(x,p),S=x.stateNode,typeof S.componentWillUnmount=="function"&&tB(x,p,S)),tc(f,p,x);break;case 21:tc(f,p,x);break;case 22:ls=(S=ls)||x.memoizedState!==null,tc(f,p,x),ls=S;break;default:tc(f,p,x)}}function uB(f,p){if(p.memoizedState===null&&(f=p.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{A0(f)}catch(x){ur(p,p.return,x)}}function ule(f){switch(f.tag){case 13:case 19:var p=f.stateNode;return p===null&&(p=f.stateNode=new aB),p;case 22:return f=f.stateNode,p=f._retryCache,p===null&&(p=f._retryCache=new aB),p;default:throw Error(r(435,f.tag))}}function II(f,p){var x=ule(f);p.forEach(function(S){var $=ble.bind(null,f,S);x.has(S)||(x.add(S),S.then($,$))})}function qi(f,p){var x=p.deletions;if(x!==null)for(var S=0;S<x.length;S++){var $=x[S],_=f,G=p,Z=G;e:for(;Z!==null;){switch(Z.tag){case 27:if(id(Z.type)){Tr=Z.stateNode,vi=!1;break e}break;case 5:Tr=Z.stateNode,vi=!1;break e;case 3:case 4:Tr=Z.stateNode.containerInfo,vi=!0;break e}Z=Z.return}if(Tr===null)throw Error(r(160));lB(_,G,$),Tr=null,vi=!1,_=$.alternate,_!==null&&(_.return=null),$.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)cB(p,f),p=p.sibling}var vl=null;function cB(f,p){var x=f.alternate,S=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:qi(p,f),Ki(f),S&4&&(Zc(3,f,f.return),f0(3,f),Zc(5,f,f.return));break;case 1:qi(p,f),Ki(f),S&512&&(ls||x===null||nu(x,x.return)),S&64&&ec&&(f=f.updateQueue,f!==null&&(S=f.callbacks,S!==null&&(x=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=x===null?S:x.concat(S))));break;case 26:var $=vl;if(qi(p,f),Ki(f),S&512&&(ls||x===null||nu(x,x.return)),S&4){var _=x!==null?x.memoizedState:null;if(S=f.memoizedState,x===null)if(S===null)if(f.stateNode===null){e:{S=f.type,x=f.memoizedProps,$=$.ownerDocument||$;t:switch(S){case"title":_=$.getElementsByTagName("title")[0],(!_||_[Ha]||_[Qn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=$.createElement(S),$.head.insertBefore(_,$.querySelector("head > title"))),ca(_,S,x),_[Qn]=f,lr(_),S=_;break e;case"link":var G=s5("link","href",$).get(S+(x.href||""));if(G){for(var Z=0;Z<G.length;Z++)if(_=G[Z],_.getAttribute("href")===(x.href==null||x.href===""?null:x.href)&&_.getAttribute("rel")===(x.rel==null?null:x.rel)&&_.getAttribute("title")===(x.title==null?null:x.title)&&_.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){G.splice(Z,1);break t}}_=$.createElement(S),ca(_,S,x),$.head.appendChild(_);break;case"meta":if(G=s5("meta","content",$).get(S+(x.content||""))){for(Z=0;Z<G.length;Z++)if(_=G[Z],_.getAttribute("content")===(x.content==null?null:""+x.content)&&_.getAttribute("name")===(x.name==null?null:x.name)&&_.getAttribute("property")===(x.property==null?null:x.property)&&_.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&_.getAttribute("charset")===(x.charSet==null?null:x.charSet)){G.splice(Z,1);break t}}_=$.createElement(S),ca(_,S,x),$.head.appendChild(_);break;default:throw Error(r(468,S))}_[Qn]=f,lr(_),S=_}f.stateNode=S}else a5($,f.type,f.stateNode);else f.stateNode=r5($,S,f.memoizedProps);else _!==S?(_===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):_.count--,S===null?a5($,f.type,f.stateNode):r5($,S,f.memoizedProps)):S===null&&f.stateNode!==null&&kI(f,f.memoizedProps,x.memoizedProps)}break;case 27:qi(p,f),Ki(f),S&512&&(ls||x===null||nu(x,x.return)),x!==null&&S&4&&kI(f,f.memoizedProps,x.memoizedProps);break;case 5:if(qi(p,f),Ki(f),S&512&&(ls||x===null||nu(x,x.return)),f.flags&32){$=f.stateNode;try{mi($,"")}catch(Ae){ur(f,f.return,Ae)}}S&4&&f.stateNode!=null&&($=f.memoizedProps,kI(f,$,x!==null?x.memoizedProps:$)),S&1024&&($I=!0);break;case 6:if(qi(p,f),Ki(f),S&4){if(f.stateNode===null)throw Error(r(162));S=f.memoizedProps,x=f.stateNode;try{x.nodeValue=S}catch(Ae){ur(f,f.return,Ae)}}break;case 3:if(Tw=null,$=vl,vl=kw(p.containerInfo),qi(p,f),vl=$,Ki(f),S&4&&x!==null&&x.memoizedState.isDehydrated)try{A0(p.containerInfo)}catch(Ae){ur(f,f.return,Ae)}$I&&($I=!1,dB(f));break;case 4:S=vl,vl=kw(f.stateNode.containerInfo),qi(p,f),Ki(f),vl=S;break;case 12:qi(p,f),Ki(f);break;case 13:qi(p,f),Ki(f),f.child.flags&8192&&f.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(DI=xe()),S&4&&(S=f.updateQueue,S!==null&&(f.updateQueue=null,II(f,S)));break;case 22:$=f.memoizedState!==null;var oe=x!==null&&x.memoizedState!==null,Ne=ec,Le=ls;if(ec=Ne||$,ls=Le||oe,qi(p,f),ls=Le,ec=Ne,Ki(f),S&8192)e:for(p=f.stateNode,p._visibility=$?p._visibility&-2:p._visibility|1,$&&(x===null||oe||ec||ls||Cf(f)),x=null,p=f;;){if(p.tag===5||p.tag===26){if(x===null){oe=x=p;try{if(_=oe.stateNode,$)G=_.style,typeof G.setProperty=="function"?G.setProperty("display","none","important"):G.display="none";else{Z=oe.stateNode;var Ue=oe.memoizedProps.style,Te=Ue!=null&&Ue.hasOwnProperty("display")?Ue.display:null;Z.style.display=Te==null||typeof Te=="boolean"?"":(""+Te).trim()}}catch(Ae){ur(oe,oe.return,Ae)}}}else if(p.tag===6){if(x===null){oe=p;try{oe.stateNode.nodeValue=$?"":oe.memoizedProps}catch(Ae){ur(oe,oe.return,Ae)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===f)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break e;for(;p.sibling===null;){if(p.return===null||p.return===f)break e;x===p&&(x=null),p=p.return}x===p&&(x=null),p.sibling.return=p.return,p=p.sibling}S&4&&(S=f.updateQueue,S!==null&&(x=S.retryQueue,x!==null&&(S.retryQueue=null,II(f,x))));break;case 19:qi(p,f),Ki(f),S&4&&(S=f.updateQueue,S!==null&&(f.updateQueue=null,II(f,S)));break;case 30:break;case 21:break;default:qi(p,f),Ki(f)}}function Ki(f){var p=f.flags;if(p&2){try{for(var x,S=f.return;S!==null;){if(rB(S)){x=S;break}S=S.return}if(x==null)throw Error(r(160));switch(x.tag){case 27:var $=x.stateNode,_=NI(f);dw(f,_,$);break;case 5:var G=x.stateNode;x.flags&32&&(mi(G,""),x.flags&=-33);var Z=NI(f);dw(f,Z,G);break;case 3:case 4:var oe=x.stateNode.containerInfo,Ne=NI(f);TI(f,Ne,oe);break;default:throw Error(r(161))}}catch(Le){ur(f,f.return,Le)}f.flags&=-3}p&4096&&(f.flags&=-4097)}function dB(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var p=f;dB(p),p.tag===5&&p.flags&1024&&p.stateNode.reset(),f=f.sibling}}function Jc(f,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)iB(f,p.alternate,p),p=p.sibling}function Cf(f){for(f=f.child;f!==null;){var p=f;switch(p.tag){case 0:case 11:case 14:case 15:Zc(4,p,p.return),Cf(p);break;case 1:nu(p,p.return);var x=p.stateNode;typeof x.componentWillUnmount=="function"&&tB(p,p.return,x),Cf(p);break;case 27:S0(p.stateNode);case 26:case 5:nu(p,p.return),Cf(p);break;case 22:p.memoizedState===null&&Cf(p);break;case 30:Cf(p);break;default:Cf(p)}f=f.sibling}}function ed(f,p,x){for(x=x&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var S=p.alternate,$=f,_=p,G=_.flags;switch(_.tag){case 0:case 11:case 15:ed($,_,x),f0(4,_);break;case 1:if(ed($,_,x),S=_,$=S.stateNode,typeof $.componentDidMount=="function")try{$.componentDidMount()}catch(Ne){ur(S,S.return,Ne)}if(S=_,$=S.updateQueue,$!==null){var Z=S.stateNode;try{var oe=$.shared.hiddenCallbacks;if(oe!==null)for($.shared.hiddenCallbacks=null,$=0;$<oe.length;$++)zF(oe[$],Z)}catch(Ne){ur(S,S.return,Ne)}}x&&G&64&&eB(_),h0(_,_.return);break;case 27:sB(_);case 26:case 5:ed($,_,x),x&&S===null&&G&4&&nB(_),h0(_,_.return);break;case 12:ed($,_,x);break;case 13:ed($,_,x),x&&G&4&&uB($,_);break;case 22:_.memoizedState===null&&ed($,_,x),h0(_,_.return);break;case 30:break;default:ed($,_,x)}p=p.sibling}}function EI(f,p){var x=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(x=f.memoizedState.cachePool.pool),f=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(f=p.memoizedState.cachePool.pool),f!==x&&(f!=null&&f.refCount++,x!=null&&Zy(x))}function AI(f,p){f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&Zy(f))}function ru(f,p,x,S){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)fB(f,p,x,S),p=p.sibling}function fB(f,p,x,S){var $=p.flags;switch(p.tag){case 0:case 11:case 15:ru(f,p,x,S),$&2048&&f0(9,p);break;case 1:ru(f,p,x,S);break;case 3:ru(f,p,x,S),$&2048&&(f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&Zy(f)));break;case 12:if($&2048){ru(f,p,x,S),f=p.stateNode;try{var _=p.memoizedProps,G=_.id,Z=_.onPostCommit;typeof Z=="function"&&Z(G,p.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(oe){ur(p,p.return,oe)}}else ru(f,p,x,S);break;case 13:ru(f,p,x,S);break;case 23:break;case 22:_=p.stateNode,G=p.alternate,p.memoizedState!==null?_._visibility&2?ru(f,p,x,S):p0(f,p):_._visibility&2?ru(f,p,x,S):(_._visibility|=2,kp(f,p,x,S,(p.subtreeFlags&10256)!==0)),$&2048&&EI(G,p);break;case 24:ru(f,p,x,S),$&2048&&AI(p.alternate,p);break;default:ru(f,p,x,S)}}function kp(f,p,x,S,$){for($=$&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var _=f,G=p,Z=x,oe=S,Ne=G.flags;switch(G.tag){case 0:case 11:case 15:kp(_,G,Z,oe,$),f0(8,G);break;case 23:break;case 22:var Le=G.stateNode;G.memoizedState!==null?Le._visibility&2?kp(_,G,Z,oe,$):p0(_,G):(Le._visibility|=2,kp(_,G,Z,oe,$)),$&&Ne&2048&&EI(G.alternate,G);break;case 24:kp(_,G,Z,oe,$),$&&Ne&2048&&AI(G.alternate,G);break;default:kp(_,G,Z,oe,$)}p=p.sibling}}function p0(f,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var x=f,S=p,$=S.flags;switch(S.tag){case 22:p0(x,S),$&2048&&EI(S.alternate,S);break;case 24:p0(x,S),$&2048&&AI(S.alternate,S);break;default:p0(x,S)}p=p.sibling}}var m0=8192;function Np(f){if(f.subtreeFlags&m0)for(f=f.child;f!==null;)hB(f),f=f.sibling}function hB(f){switch(f.tag){case 26:Np(f),f.flags&m0&&f.memoizedState!==null&&Kle(vl,f.memoizedState,f.memoizedProps);break;case 5:Np(f);break;case 3:case 4:var p=vl;vl=kw(f.stateNode.containerInfo),Np(f),vl=p;break;case 22:f.memoizedState===null&&(p=f.alternate,p!==null&&p.memoizedState!==null?(p=m0,m0=16777216,Np(f),m0=p):Np(f));break;default:Np(f)}}function pB(f){var p=f.alternate;if(p!==null&&(f=p.child,f!==null)){p.child=null;do p=f.sibling,f.sibling=null,f=p;while(f!==null)}}function g0(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var x=0;x<p.length;x++){var S=p[x];qs=S,gB(S,f)}pB(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)mB(f),f=f.sibling}function mB(f){switch(f.tag){case 0:case 11:case 15:g0(f),f.flags&2048&&Zc(9,f,f.return);break;case 3:g0(f);break;case 12:g0(f);break;case 22:var p=f.stateNode;f.memoizedState!==null&&p._visibility&2&&(f.return===null||f.return.tag!==13)?(p._visibility&=-3,fw(f)):g0(f);break;default:g0(f)}}function fw(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var x=0;x<p.length;x++){var S=p[x];qs=S,gB(S,f)}pB(f)}for(f=f.child;f!==null;){switch(p=f,p.tag){case 0:case 11:case 15:Zc(8,p,p.return),fw(p);break;case 22:x=p.stateNode,x._visibility&2&&(x._visibility&=-3,fw(p));break;default:fw(p)}f=f.sibling}}function gB(f,p){for(;qs!==null;){var x=qs;switch(x.tag){case 0:case 11:case 15:Zc(8,x,p);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var S=x.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:Zy(x.memoizedState.cache)}if(S=x.child,S!==null)S.return=x,qs=S;else e:for(x=f;qs!==null;){S=qs;var $=S.sibling,_=S.return;if(oB(S),S===x){qs=null;break e}if($!==null){$.return=_,qs=$;break e}qs=_}}}var cle={getCacheForType:function(f){var p=Na(_s),x=p.data.get(f);return x===void 0&&(x=f(),p.data.set(f,x)),x}},dle=typeof WeakMap=="function"?WeakMap:Map,Gn=0,br=null,fn=null,Nn=0,Hn=0,Xi=null,td=!1,Tp=!1,RI=!1,nc=0,Yr=0,nd=0,kf=0,OI=0,Ro=0,$p=0,y0=null,wi=null,_I=!1,DI=0,hw=1/0,pw=null,rd=null,ua=0,sd=null,Ip=null,Ep=0,PI=0,MI=null,yB=null,b0=0,jI=null;function Yi(){if((Gn&2)!==0&&Nn!==0)return Nn&-Nn;if(j.T!==null){var f=gp;return f!==0?f:WI()}return vo()}function bB(){Ro===0&&(Ro=(Nn&536870912)===0||On?Wa():536870912);var f=Ao.current;return f!==null&&(f.flags|=32),Ro}function Qi(f,p,x){(f===br&&(Hn===2||Hn===9)||f.cancelPendingCommit!==null)&&(Ap(f,0),ad(f,Nn,Ro,!1)),Bi(f,x),((Gn&2)===0||f!==br)&&(f===br&&((Gn&2)===0&&(kf|=x),Yr===4&&ad(f,Nn,Ro,!1)),su(f))}function xB(f,p,x){if((Gn&6)!==0)throw Error(r(327));var S=!x&&(p&124)===0&&(p&f.expiredLanes)===0||Fi(f,p),$=S?ple(f,p):zI(f,p,!0),_=S;do{if($===0){Tp&&!S&&ad(f,p,0,!1);break}else{if(x=f.current.alternate,_&&!fle(x)){$=zI(f,p,!1),_=!1;continue}if($===2){if(_=p,f.errorRecoveryDisabledLanes&_)var G=0;else G=f.pendingLanes&-536870913,G=G!==0?G:G&536870912?536870912:0;if(G!==0){p=G;e:{var Z=f;$=y0;var oe=Z.current.memoizedState.isDehydrated;if(oe&&(Ap(Z,G).flags|=256),G=zI(Z,G,!1),G!==2){if(RI&&!oe){Z.errorRecoveryDisabledLanes|=_,kf|=_,$=4;break e}_=wi,wi=$,_!==null&&(wi===null?wi=_:wi.push.apply(wi,_))}$=G}if(_=!1,$!==2)continue}}if($===1){Ap(f,0),ad(f,p,0,!0);break}e:{switch(S=f,_=$,_){case 0:case 1:throw Error(r(345));case 4:if((p&4194048)!==p)break;case 6:ad(S,p,Ro,!td);break e;case 2:wi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((p&62914560)===p&&($=DI+300-xe(),10<$)){if(ad(S,p,Ro,!td),dl(S,0,!0)!==0)break e;S.timeoutHandle=KB(vB.bind(null,S,x,wi,pw,_I,p,Ro,kf,$p,td,_,2,-0,0),$);break e}vB(S,x,wi,pw,_I,p,Ro,kf,$p,td,_,0,-0,0)}}break}while(!0);su(f)}function vB(f,p,x,S,$,_,G,Z,oe,Ne,Le,Ue,Te,Ae){if(f.timeoutHandle=-1,Ue=p.subtreeFlags,(Ue&8192||(Ue&16785408)===16785408)&&(N0={stylesheets:null,count:0,unsuspend:qle},hB(p),Ue=Xle(),Ue!==null)){f.cancelPendingCommit=Ue($B.bind(null,f,p,_,x,S,$,G,Z,oe,Le,1,Te,Ae)),ad(f,_,G,!Ne);return}$B(f,p,_,x,S,$,G,Z,oe)}function fle(f){for(var p=f;;){var x=p.tag;if((x===0||x===11||x===15)&&p.flags&16384&&(x=p.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var S=0;S<x.length;S++){var $=x[S],_=$.getSnapshot;$=$.value;try{if(!Gi(_(),$))return!1}catch{return!1}}if(x=p.child,p.subtreeFlags&16384&&x!==null)x.return=p,p=x;else{if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function ad(f,p,x,S){p&=~OI,p&=~kf,f.suspendedLanes|=p,f.pingedLanes&=~p,S&&(f.warmLanes|=p),S=f.expirationTimes;for(var $=p;0<$;){var _=31-Mn($),G=1<<_;S[_]=-1,$&=~G}x!==0&&Zl(f,x,p)}function mw(){return(Gn&6)===0?(x0(0),!1):!0}function LI(){if(fn!==null){if(Hn===0)var f=fn.return;else f=fn,Ku=bf=null,tI(f),Sp=null,u0=0,f=fn;for(;f!==null;)Jz(f.alternate,f),f=f.return;fn=null}}function Ap(f,p){var x=f.timeoutHandle;x!==-1&&(f.timeoutHandle=-1,Ale(x)),x=f.cancelPendingCommit,x!==null&&(f.cancelPendingCommit=null,x()),LI(),br=f,fn=x=Gu(f.current,null),Nn=p,Hn=0,Xi=null,td=!1,Tp=Fi(f,p),RI=!1,$p=Ro=OI=kf=nd=Yr=0,wi=y0=null,_I=!1,(p&8)!==0&&(p|=p&32);var S=f.entangledLanes;if(S!==0)for(f=f.entanglements,S&=p;0<S;){var $=31-Mn(S),_=1<<$;p|=f[$],S&=~_}return nc=p,j1(),x}function wB(f,p){an=null,j.H=nw,p===e0||p===H1?(p=LF(),Hn=3):p===PF?(p=LF(),Hn=4):Hn=p===Fz?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,Xi=p,fn===null&&(Yr=1,ow(f,To(p,f.current)))}function SB(){var f=j.H;return j.H=nw,f===null?nw:f}function CB(){var f=j.A;return j.A=cle,f}function FI(){Yr=4,td||(Nn&4194048)!==Nn&&Ao.current!==null||(Tp=!0),(nd&134217727)===0&&(kf&134217727)===0||br===null||ad(br,Nn,Ro,!1)}function zI(f,p,x){var S=Gn;Gn|=2;var $=SB(),_=CB();(br!==f||Nn!==p)&&(pw=null,Ap(f,p)),p=!1;var G=Yr;e:do try{if(Hn!==0&&fn!==null){var Z=fn,oe=Xi;switch(Hn){case 8:LI(),G=6;break e;case 3:case 2:case 9:case 6:Ao.current===null&&(p=!0);var Ne=Hn;if(Hn=0,Xi=null,Rp(f,Z,oe,Ne),x&&Tp){G=0;break e}break;default:Ne=Hn,Hn=0,Xi=null,Rp(f,Z,oe,Ne)}}hle(),G=Yr;break}catch(Le){wB(f,Le)}while(!0);return p&&f.shellSuspendCounter++,Ku=bf=null,Gn=S,j.H=$,j.A=_,fn===null&&(br=null,Nn=0,j1()),G}function hle(){for(;fn!==null;)kB(fn)}function ple(f,p){var x=Gn;Gn|=2;var S=SB(),$=CB();br!==f||Nn!==p?(pw=null,hw=xe()+500,Ap(f,p)):Tp=Fi(f,p);e:do try{if(Hn!==0&&fn!==null){p=fn;var _=Xi;t:switch(Hn){case 1:Hn=0,Xi=null,Rp(f,p,_,1);break;case 2:case 9:if(MF(_)){Hn=0,Xi=null,NB(p);break}p=function(){Hn!==2&&Hn!==9||br!==f||(Hn=7),su(f)},_.then(p,p);break e;case 3:Hn=7;break e;case 4:Hn=5;break e;case 7:MF(_)?(Hn=0,Xi=null,NB(p)):(Hn=0,Xi=null,Rp(f,p,_,7));break;case 5:var G=null;switch(fn.tag){case 26:G=fn.memoizedState;case 5:case 27:var Z=fn;if(!G||i5(G)){Hn=0,Xi=null;var oe=Z.sibling;if(oe!==null)fn=oe;else{var Ne=Z.return;Ne!==null?(fn=Ne,gw(Ne)):fn=null}break t}}Hn=0,Xi=null,Rp(f,p,_,5);break;case 6:Hn=0,Xi=null,Rp(f,p,_,6);break;case 8:LI(),Yr=6;break e;default:throw Error(r(462))}}mle();break}catch(Le){wB(f,Le)}while(!0);return Ku=bf=null,j.H=S,j.A=$,Gn=x,fn!==null?0:(br=null,Nn=0,j1(),Yr)}function mle(){for(;fn!==null&&!Re();)kB(fn)}function kB(f){var p=Qz(f.alternate,f,nc);f.memoizedProps=f.pendingProps,p===null?gw(f):fn=p}function NB(f){var p=f,x=p.alternate;switch(p.tag){case 15:case 0:p=Gz(x,p,p.pendingProps,p.type,void 0,Nn);break;case 11:p=Gz(x,p,p.pendingProps,p.type.render,p.ref,Nn);break;case 5:tI(p);default:Jz(x,p),p=fn=TF(p,nc),p=Qz(x,p,nc)}f.memoizedProps=f.pendingProps,p===null?gw(f):fn=p}function Rp(f,p,x,S){Ku=bf=null,tI(p),Sp=null,u0=0;var $=p.return;try{if(sle(f,$,p,x,Nn)){Yr=1,ow(f,To(x,f.current)),fn=null;return}}catch(_){if($!==null)throw fn=$,_;Yr=1,ow(f,To(x,f.current)),fn=null;return}p.flags&32768?(On||S===1?f=!0:Tp||(Nn&536870912)!==0?f=!1:(td=f=!0,(S===2||S===9||S===3||S===6)&&(S=Ao.current,S!==null&&S.tag===13&&(S.flags|=16384))),TB(p,f)):gw(p)}function gw(f){var p=f;do{if((p.flags&32768)!==0){TB(p,td);return}f=p.return;var x=ile(p.alternate,p,nc);if(x!==null){fn=x;return}if(p=p.sibling,p!==null){fn=p;return}fn=p=f}while(p!==null);Yr===0&&(Yr=5)}function TB(f,p){do{var x=ole(f.alternate,f);if(x!==null){x.flags&=32767,fn=x;return}if(x=f.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!p&&(f=f.sibling,f!==null)){fn=f;return}fn=f=x}while(f!==null);Yr=6,fn=null}function $B(f,p,x,S,$,_,G,Z,oe){f.cancelPendingCommit=null;do yw();while(ua!==0);if((Gn&6)!==0)throw Error(r(327));if(p!==null){if(p===f.current)throw Error(r(177));if(_=p.lanes|p.childLanes,_|=A$,Ql(f,x,_,G,Z,oe),f===br&&(fn=br=null,Nn=0),Ip=p,sd=f,Ep=x,PI=_,MI=$,yB=S,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,xle(Nt,function(){return OB(),null})):(f.callbackNode=null,f.callbackPriority=0),S=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||S){S=j.T,j.T=null,$=q.p,q.p=2,G=Gn,Gn|=4;try{lle(f,p,x)}finally{Gn=G,q.p=$,j.T=S}}ua=1,IB(),EB(),AB()}}function IB(){if(ua===1){ua=0;var f=sd,p=Ip,x=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||x){x=j.T,j.T=null;var S=q.p;q.p=2;var $=Gn;Gn|=4;try{cB(p,f);var _=ZI,G=gF(f.containerInfo),Z=_.focusedElem,oe=_.selectionRange;if(G!==Z&&Z&&Z.ownerDocument&&mF(Z.ownerDocument.documentElement,Z)){if(oe!==null&&N$(Z)){var Ne=oe.start,Le=oe.end;if(Le===void 0&&(Le=Ne),"selectionStart"in Z)Z.selectionStart=Ne,Z.selectionEnd=Math.min(Le,Z.value.length);else{var Ue=Z.ownerDocument||document,Te=Ue&&Ue.defaultView||window;if(Te.getSelection){var Ae=Te.getSelection(),Ut=Z.textContent.length,Pt=Math.min(oe.start,Ut),rr=oe.end===void 0?Pt:Math.min(oe.end,Ut);!Ae.extend&&Pt>rr&&(G=rr,rr=Pt,Pt=G);var we=pF(Z,Pt),ge=pF(Z,rr);if(we&&ge&&(Ae.rangeCount!==1||Ae.anchorNode!==we.node||Ae.anchorOffset!==we.offset||Ae.focusNode!==ge.node||Ae.focusOffset!==ge.offset)){var Ce=Ue.createRange();Ce.setStart(we.node,we.offset),Ae.removeAllRanges(),Pt>rr?(Ae.addRange(Ce),Ae.extend(ge.node,ge.offset)):(Ce.setEnd(ge.node,ge.offset),Ae.addRange(Ce))}}}}for(Ue=[],Ae=Z;Ae=Ae.parentNode;)Ae.nodeType===1&&Ue.push({element:Ae,left:Ae.scrollLeft,top:Ae.scrollTop});for(typeof Z.focus=="function"&&Z.focus(),Z=0;Z<Ue.length;Z++){var Fe=Ue[Z];Fe.element.scrollLeft=Fe.left,Fe.element.scrollTop=Fe.top}}Ew=!!QI,ZI=QI=null}finally{Gn=$,q.p=S,j.T=x}}f.current=p,ua=2}}function EB(){if(ua===2){ua=0;var f=sd,p=Ip,x=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||x){x=j.T,j.T=null;var S=q.p;q.p=2;var $=Gn;Gn|=4;try{iB(f,p.alternate,p)}finally{Gn=$,q.p=S,j.T=x}}ua=3}}function AB(){if(ua===4||ua===3){ua=0,Ke();var f=sd,p=Ip,x=Ep,S=yB;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?ua=5:(ua=0,Ip=sd=null,RB(f,f.pendingLanes));var $=f.pendingLanes;if($===0&&(rd=null),hl(x),p=p.stateNode,cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(rn,p,void 0,(p.current.flags&128)===128)}catch{}if(S!==null){p=j.T,$=q.p,q.p=2,j.T=null;try{for(var _=f.onRecoverableError,G=0;G<S.length;G++){var Z=S[G];_(Z.value,{componentStack:Z.stack})}}finally{j.T=p,q.p=$}}(Ep&3)!==0&&yw(),su(f),$=f.pendingLanes,(x&4194090)!==0&&($&42)!==0?f===jI?b0++:(b0=0,jI=f):b0=0,x0(0)}}function RB(f,p){(f.pooledCacheLanes&=p)===0&&(p=f.pooledCache,p!=null&&(f.pooledCache=null,Zy(p)))}function yw(f){return IB(),EB(),AB(),OB()}function OB(){if(ua!==5)return!1;var f=sd,p=PI;PI=0;var x=hl(Ep),S=j.T,$=q.p;try{q.p=32>x?32:x,j.T=null,x=MI,MI=null;var _=sd,G=Ep;if(ua=0,Ip=sd=null,Ep=0,(Gn&6)!==0)throw Error(r(331));var Z=Gn;if(Gn|=4,mB(_.current),fB(_,_.current,G,x),Gn=Z,x0(0,!1),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(rn,_)}catch{}return!0}finally{q.p=$,j.T=S,RB(f,p)}}function _B(f,p,x){p=To(x,p),p=mI(f.stateNode,p,2),f=Kc(f,p,2),f!==null&&(Bi(f,2),su(f))}function ur(f,p,x){if(f.tag===3)_B(f,f,x);else for(;p!==null;){if(p.tag===3){_B(p,f,x);break}else if(p.tag===1){var S=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(rd===null||!rd.has(S))){f=To(x,f),x=jz(2),S=Kc(p,x,2),S!==null&&(Lz(x,S,p,f),Bi(S,2),su(S));break}}p=p.return}}function BI(f,p,x){var S=f.pingCache;if(S===null){S=f.pingCache=new dle;var $=new Set;S.set(p,$)}else $=S.get(p),$===void 0&&($=new Set,S.set(p,$));$.has(x)||(RI=!0,$.add(x),f=gle.bind(null,f,p,x),p.then(f,f))}function gle(f,p,x){var S=f.pingCache;S!==null&&S.delete(p),f.pingedLanes|=f.suspendedLanes&x,f.warmLanes&=~x,br===f&&(Nn&x)===x&&(Yr===4||Yr===3&&(Nn&62914560)===Nn&&300>xe()-DI?(Gn&2)===0&&Ap(f,0):OI|=x,$p===Nn&&($p=0)),su(f)}function DB(f,p){p===0&&(p=zi()),f=fp(f,p),f!==null&&(Bi(f,p),su(f))}function yle(f){var p=f.memoizedState,x=0;p!==null&&(x=p.retryLane),DB(f,x)}function ble(f,p){var x=0;switch(f.tag){case 13:var S=f.stateNode,$=f.memoizedState;$!==null&&(x=$.retryLane);break;case 19:S=f.stateNode;break;case 22:S=f.stateNode._retryCache;break;default:throw Error(r(314))}S!==null&&S.delete(p),DB(f,x)}function xle(f,p){return et(f,p)}var bw=null,Op=null,UI=!1,xw=!1,VI=!1,Nf=0;function su(f){f!==Op&&f.next===null&&(Op===null?bw=Op=f:Op=Op.next=f),xw=!0,UI||(UI=!0,wle())}function x0(f,p){if(!VI&&xw){VI=!0;do for(var x=!1,S=bw;S!==null;){if(f!==0){var $=S.pendingLanes;if($===0)var _=0;else{var G=S.suspendedLanes,Z=S.pingedLanes;_=(1<<31-Mn(42|f)+1)-1,_&=$&~(G&~Z),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(x=!0,LB(S,_))}else _=Nn,_=dl(S,S===br?_:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(_&3)===0||Fi(S,_)||(x=!0,LB(S,_));S=S.next}while(x);VI=!1}}function vle(){PB()}function PB(){xw=UI=!1;var f=0;Nf!==0&&(Ele()&&(f=Nf),Nf=0);for(var p=xe(),x=null,S=bw;S!==null;){var $=S.next,_=MB(S,p);_===0?(S.next=null,x===null?bw=$:x.next=$,$===null&&(Op=x)):(x=S,(f!==0||(_&3)!==0)&&(xw=!0)),S=$}x0(f)}function MB(f,p){for(var x=f.suspendedLanes,S=f.pingedLanes,$=f.expirationTimes,_=f.pendingLanes&-62914561;0<_;){var G=31-Mn(_),Z=1<<G,oe=$[G];oe===-1?((Z&x)===0||(Z&S)!==0)&&($[G]=Yl(Z,p)):oe<=p&&(f.expiredLanes|=Z),_&=~Z}if(p=br,x=Nn,x=dl(f,f===p?x:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),S=f.callbackNode,x===0||f===p&&(Hn===2||Hn===9)||f.cancelPendingCommit!==null)return S!==null&&S!==null&&Je(S),f.callbackNode=null,f.callbackPriority=0;if((x&3)===0||Fi(f,x)){if(p=x&-x,p===f.callbackPriority)return p;switch(S!==null&&Je(S),hl(x)){case 2:case 8:x=Xe;break;case 32:x=Nt;break;case 268435456:x=Tt;break;default:x=Nt}return S=jB.bind(null,f),x=et(x,S),f.callbackPriority=p,f.callbackNode=x,p}return S!==null&&S!==null&&Je(S),f.callbackPriority=2,f.callbackNode=null,2}function jB(f,p){if(ua!==0&&ua!==5)return f.callbackNode=null,f.callbackPriority=0,null;var x=f.callbackNode;if(yw()&&f.callbackNode!==x)return null;var S=Nn;return S=dl(f,f===br?S:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),S===0?null:(xB(f,S,p),MB(f,xe()),f.callbackNode!=null&&f.callbackNode===x?jB.bind(null,f):null)}function LB(f,p){if(yw())return null;xB(f,p,!0)}function wle(){Rle(function(){(Gn&6)!==0?et(at,vle):PB()})}function WI(){return Nf===0&&(Nf=Wa()),Nf}function FB(f){return f==null||typeof f=="symbol"||typeof f=="boolean"?null:typeof f=="function"?f:An(""+f)}function zB(f,p){var x=p.ownerDocument.createElement("input");return x.name=p.name,x.value=p.value,f.id&&x.setAttribute("form",f.id),p.parentNode.insertBefore(x,p),f=new FormData(f),x.parentNode.removeChild(x),f}function Sle(f,p,x,S,$){if(p==="submit"&&x&&x.stateNode===$){var _=FB(($[Wr]||null).action),G=S.submitter;G&&(p=(p=G[Wr]||null)?FB(p.formAction):G.getAttribute("formAction"),p!==null&&(_=p,G=null));var Z=new uf("action","action",null,S,$);f.push({event:Z,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(Nf!==0){var oe=G?zB($,G):new FormData($);cI(x,{pending:!0,data:oe,method:$.method,action:_},null,oe)}}else typeof _=="function"&&(Z.preventDefault(),oe=G?zB($,G):new FormData($),cI(x,{pending:!0,data:oe,method:$.method,action:_},_,oe))},currentTarget:$}]})}}for(var GI=0;GI<E$.length;GI++){var HI=E$[GI],Cle=HI.toLowerCase(),kle=HI[0].toUpperCase()+HI.slice(1);xl(Cle,"on"+kle)}xl(xF,"onAnimationEnd"),xl(vF,"onAnimationIteration"),xl(wF,"onAnimationStart"),xl("dblclick","onDoubleClick"),xl("focusin","onFocus"),xl("focusout","onBlur"),xl(Boe,"onTransitionRun"),xl(Uoe,"onTransitionStart"),xl(Voe,"onTransitionCancel"),xl(SF,"onTransitionEnd"),Nr("onMouseEnter",["mouseout","mouseover"]),Nr("onMouseLeave",["mouseout","mouseover"]),Nr("onPointerEnter",["pointerout","pointerover"]),Nr("onPointerLeave",["pointerout","pointerover"]),Ca("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ca("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ca("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ca("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ca("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ca("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var v0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nle=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(v0));function BB(f,p){p=(p&4)!==0;for(var x=0;x<f.length;x++){var S=f[x],$=S.event;S=S.listeners;e:{var _=void 0;if(p)for(var G=S.length-1;0<=G;G--){var Z=S[G],oe=Z.instance,Ne=Z.currentTarget;if(Z=Z.listener,oe!==_&&$.isPropagationStopped())break e;_=Z,$.currentTarget=Ne;try{_($)}catch(Le){iw(Le)}$.currentTarget=null,_=oe}else for(G=0;G<S.length;G++){if(Z=S[G],oe=Z.instance,Ne=Z.currentTarget,Z=Z.listener,oe!==_&&$.isPropagationStopped())break e;_=Z,$.currentTarget=Ne;try{_($)}catch(Le){iw(Le)}$.currentTarget=null,_=oe}}}}function hn(f,p){var x=p[va];x===void 0&&(x=p[va]=new Set);var S=f+"__bubble";x.has(S)||(UB(p,f,2,!1),x.add(S))}function qI(f,p,x){var S=0;p&&(S|=4),UB(x,f,S,p)}var vw="_reactListening"+Math.random().toString(36).slice(2);function KI(f){if(!f[vw]){f[vw]=!0,wo.forEach(function(x){x!=="selectionchange"&&(Nle.has(x)||qI(x,!1,f),qI(x,!0,f))});var p=f.nodeType===9?f:f.ownerDocument;p===null||p[vw]||(p[vw]=!0,qI("selectionchange",!1,p))}}function UB(f,p,x,S){switch(f5(p)){case 2:var $=Zle;break;case 8:$=Jle;break;default:$=lE}x=$.bind(null,p,x,f),$=void 0,!np||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||($=!0),S?$!==void 0?f.addEventListener(p,x,{capture:!0,passive:$}):f.addEventListener(p,x,!0):$!==void 0?f.addEventListener(p,x,{passive:$}):f.addEventListener(p,x,!1)}function XI(f,p,x,S,$){var _=S;if((p&1)===0&&(p&2)===0&&S!==null)e:for(;;){if(S===null)return;var G=S.tag;if(G===3||G===4){var Z=S.stateNode.containerInfo;if(Z===$)break;if(G===4)for(G=S.return;G!==null;){var oe=G.tag;if((oe===3||oe===4)&&G.stateNode.containerInfo===$)return;G=G.return}for(;Z!==null;){if(G=ia(Z),G===null)return;if(oe=G.tag,oe===5||oe===6||oe===26||oe===27){S=_=G;continue e}Z=Z.parentNode}}S=S.return}$1(function(){var Ne=_,Le=Ya(x),Ue=[];e:{var Te=CF.get(f);if(Te!==void 0){var Ae=uf,Ut=f;switch(f){case"keypress":if(of(x)===0)break e;case"keydown":case"keyup":Ae=g$;break;case"focusin":Ut="focus",Ae=By;break;case"focusout":Ut="blur",Ae=By;break;case"beforeblur":case"afterblur":Ae=By;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ae=E1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ae=ap;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ae=b$;break;case xF:case vF:case wF:Ae=u$;break;case SF:Ae=x$;break;case"scroll":case"scrollend":Ae=o$;break;case"wheel":Ae=w$;break;case"copy":case"cut":case"paste":Ae=Uy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ae=O1;break;case"toggle":case"beforetoggle":Ae=D1}var Pt=(p&4)!==0,rr=!Pt&&(f==="scroll"||f==="scrollend"),we=Pt?Te!==null?Te+"Capture":null:Te;Pt=[];for(var ge=Ne,Ce;ge!==null;){var Fe=ge;if(Ce=Fe.stateNode,Fe=Fe.tag,Fe!==5&&Fe!==26&&Fe!==27||Ce===null||we===null||(Fe=af(ge,we),Fe!=null&&Pt.push(w0(ge,Fe,Ce))),rr)break;ge=ge.return}0<Pt.length&&(Te=new Ae(Te,Ut,null,x,Le),Ue.push({event:Te,listeners:Pt}))}}if((p&7)===0){e:{if(Te=f==="mouseover"||f==="pointerover",Ae=f==="mouseout"||f==="pointerout",Te&&x!==Os&&(Ut=x.relatedTarget||x.fromElement)&&(ia(Ut)||Ut[Gr]))break e;if((Ae||Te)&&(Te=Le.window===Le?Le:(Te=Le.ownerDocument)?Te.defaultView||Te.parentWindow:window,Ae?(Ut=x.relatedTarget||x.toElement,Ae=Ne,Ut=Ut?ia(Ut):null,Ut!==null&&(rr=a(Ut),Pt=Ut.tag,Ut!==rr||Pt!==5&&Pt!==27&&Pt!==6)&&(Ut=null)):(Ae=null,Ut=Ne),Ae!==Ut)){if(Pt=E1,Fe="onMouseLeave",we="onMouseEnter",ge="mouse",(f==="pointerout"||f==="pointerover")&&(Pt=O1,Fe="onPointerLeave",we="onPointerEnter",ge="pointer"),rr=Ae==null?Te:Sa(Ae),Ce=Ut==null?Te:Sa(Ut),Te=new Pt(Fe,ge+"leave",Ae,x,Le),Te.target=rr,Te.relatedTarget=Ce,Fe=null,ia(Le)===Ne&&(Pt=new Pt(we,ge+"enter",Ut,x,Le),Pt.target=Ce,Pt.relatedTarget=rr,Fe=Pt),rr=Fe,Ae&&Ut)t:{for(Pt=Ae,we=Ut,ge=0,Ce=Pt;Ce;Ce=_p(Ce))ge++;for(Ce=0,Fe=we;Fe;Fe=_p(Fe))Ce++;for(;0<ge-Ce;)Pt=_p(Pt),ge--;for(;0<Ce-ge;)we=_p(we),Ce--;for(;ge--;){if(Pt===we||we!==null&&Pt===we.alternate)break t;Pt=_p(Pt),we=_p(we)}Pt=null}else Pt=null;Ae!==null&&VB(Ue,Te,Ae,Pt,!1),Ut!==null&&rr!==null&&VB(Ue,rr,Ut,Pt,!0)}}e:{if(Te=Ne?Sa(Ne):window,Ae=Te.nodeName&&Te.nodeName.toLowerCase(),Ae==="select"||Ae==="input"&&Te.type==="file")var Ct=Za;else if(pt(Te))if(oa)Ct=lp;else{Ct=C$;var un=S$}else Ae=Te.nodeName,!Ae||Ae.toLowerCase()!=="input"||Te.type!=="checkbox"&&Te.type!=="radio"?Ne&&yt(Ne.elementType)&&(Ct=Za):Ct=k$;if(Ct&&(Ct=Ct(f,Ne))){Dt(Ue,Ct,x,Le);break e}un&&un(f,Te,Ne),f==="focusout"&&Ne&&Te.type==="number"&&Ne.memoizedProps.value!=null&&Ka(Te,"number",Te.value)}switch(un=Ne?Sa(Ne):window,f){case"focusin":(pt(un)||un.contentEditable==="true")&&(up=un,T$=Ne,qy=null);break;case"focusout":qy=T$=up=null;break;case"mousedown":$$=!0;break;case"contextmenu":case"mouseup":case"dragend":$$=!1,yF(Ue,x,Le);break;case"selectionchange":if(zoe)break;case"keydown":case"keyup":yF(Ue,x,Le)}var At;if(M)e:{switch(f){case"compositionstart":var jt="onCompositionStart";break e;case"compositionend":jt="onCompositionEnd";break e;case"compositionupdate":jt="onCompositionUpdate";break e}jt=void 0}else qe?me(f,x)&&(jt="onCompositionEnd"):f==="keydown"&&x.keyCode===229&&(jt="onCompositionStart");jt&&(re&&x.locale!=="ko"&&(qe||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&qe&&(At=I1()):(yi=Le,Qa="value"in yi?yi.value:yi.textContent,qe=!0)),un=ww(Ne,jt),0<un.length&&(jt=new Wy(jt,f,null,x,Le),Ue.push({event:jt,listeners:un}),At?jt.data=At:(At=Ee(x),At!==null&&(jt.data=At)))),(At=K?it(f,x):Mt(f,x))&&(jt=ww(Ne,"onBeforeInput"),0<jt.length&&(un=new Wy("onBeforeInput","beforeinput",null,x,Le),Ue.push({event:un,listeners:jt}),un.data=At)),Sle(Ue,f,Ne,x,Le)}BB(Ue,p)})}function w0(f,p,x){return{instance:f,listener:p,currentTarget:x}}function ww(f,p){for(var x=p+"Capture",S=[];f!==null;){var $=f,_=$.stateNode;if($=$.tag,$!==5&&$!==26&&$!==27||_===null||($=af(f,x),$!=null&&S.unshift(w0(f,$,_)),$=af(f,p),$!=null&&S.push(w0(f,$,_))),f.tag===3)return S;f=f.return}return[]}function _p(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5&&f.tag!==27);return f||null}function VB(f,p,x,S,$){for(var _=p._reactName,G=[];x!==null&&x!==S;){var Z=x,oe=Z.alternate,Ne=Z.stateNode;if(Z=Z.tag,oe!==null&&oe===S)break;Z!==5&&Z!==26&&Z!==27||Ne===null||(oe=Ne,$?(Ne=af(x,_),Ne!=null&&G.unshift(w0(x,Ne,oe))):$||(Ne=af(x,_),Ne!=null&&G.push(w0(x,Ne,oe)))),x=x.return}G.length!==0&&f.push({event:p,listeners:G})}var Tle=/\r\n?/g,$le=/\u0000|\uFFFD/g;function WB(f){return(typeof f=="string"?f:""+f).replace(Tle,`
`).replace($le,"")}function GB(f,p){return p=WB(p),WB(f)===p}function Sw(){}function nr(f,p,x,S,$,_){switch(x){case"children":typeof S=="string"?p==="body"||p==="textarea"&&S===""||mi(f,S):(typeof S=="number"||typeof S=="bigint")&&p!=="body"&&mi(f,""+S);break;case"className":hi(f,"class",S);break;case"tabIndex":hi(f,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":hi(f,x,S);break;case"style":lt(f,S,_);break;case"data":if(p!=="object"){hi(f,"data",S);break}case"src":case"href":if(S===""&&(p!=="a"||x!=="href")){f.removeAttribute(x);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){f.removeAttribute(x);break}S=An(""+S),f.setAttribute(x,S);break;case"action":case"formAction":if(typeof S=="function"){f.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(x==="formAction"?(p!=="input"&&nr(f,p,"name",$.name,$,null),nr(f,p,"formEncType",$.formEncType,$,null),nr(f,p,"formMethod",$.formMethod,$,null),nr(f,p,"formTarget",$.formTarget,$,null)):(nr(f,p,"encType",$.encType,$,null),nr(f,p,"method",$.method,$,null),nr(f,p,"target",$.target,$,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){f.removeAttribute(x);break}S=An(""+S),f.setAttribute(x,S);break;case"onClick":S!=null&&(f.onclick=Sw);break;case"onScroll":S!=null&&hn("scroll",f);break;case"onScrollEnd":S!=null&&hn("scrollend",f);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(r(61));if(x=S.__html,x!=null){if($.children!=null)throw Error(r(60));f.innerHTML=x}}break;case"multiple":f.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":f.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){f.removeAttribute("xlink:href");break}x=An(""+S),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?f.setAttribute(x,""+S):f.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?f.setAttribute(x,""):f.removeAttribute(x);break;case"capture":case"download":S===!0?f.setAttribute(x,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?f.setAttribute(x,S):f.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?f.setAttribute(x,S):f.removeAttribute(x);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?f.removeAttribute(x):f.setAttribute(x,S);break;case"popover":hn("beforetoggle",f),hn("toggle",f),Ui(f,"popover",S);break;case"xlinkActuate":yr(f,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":yr(f,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":yr(f,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":yr(f,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":yr(f,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":yr(f,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":yr(f,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":yr(f,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":yr(f,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":Ui(f,"is",S);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=Ht.get(x)||x,Ui(f,x,S))}}function YI(f,p,x,S,$,_){switch(x){case"style":lt(f,S,_);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(r(61));if(x=S.__html,x!=null){if($.children!=null)throw Error(r(60));f.innerHTML=x}}break;case"children":typeof S=="string"?mi(f,S):(typeof S=="number"||typeof S=="bigint")&&mi(f,""+S);break;case"onScroll":S!=null&&hn("scroll",f);break;case"onScrollEnd":S!=null&&hn("scrollend",f);break;case"onClick":S!=null&&(f.onclick=Sw);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!So.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&($=x.endsWith("Capture"),p=x.slice(2,$?x.length-7:void 0),_=f[Wr]||null,_=_!=null?_[x]:null,typeof _=="function"&&f.removeEventListener(p,_,$),typeof S=="function")){typeof _!="function"&&_!==null&&(x in f?f[x]=null:f.hasAttribute(x)&&f.removeAttribute(x)),f.addEventListener(p,S,$);break e}x in f?f[x]=S:S===!0?f.setAttribute(x,""):Ui(f,x,S)}}}function ca(f,p,x){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":hn("error",f),hn("load",f);var S=!1,$=!1,_;for(_ in x)if(x.hasOwnProperty(_)){var G=x[_];if(G!=null)switch(_){case"src":S=!0;break;case"srcSet":$=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:nr(f,p,_,G,x,null)}}$&&nr(f,p,"srcSet",x.srcSet,x,null),S&&nr(f,p,"src",x.src,x,null);return;case"input":hn("invalid",f);var Z=_=G=$=null,oe=null,Ne=null;for(S in x)if(x.hasOwnProperty(S)){var Le=x[S];if(Le!=null)switch(S){case"name":$=Le;break;case"type":G=Le;break;case"checked":oe=Le;break;case"defaultChecked":Ne=Le;break;case"value":_=Le;break;case"defaultValue":Z=Le;break;case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(r(137,p));break;default:nr(f,p,S,Le,x,null)}}ka(f,_,Z,oe,Ne,G,$,!1),kn(f);return;case"select":hn("invalid",f),S=G=_=null;for($ in x)if(x.hasOwnProperty($)&&(Z=x[$],Z!=null))switch($){case"value":_=Z;break;case"defaultValue":G=Z;break;case"multiple":S=Z;default:nr(f,p,$,Z,x,null)}p=_,x=G,f.multiple=!!S,p!=null?Xa(f,!!S,p,!1):x!=null&&Xa(f,!!S,x,!0);return;case"textarea":hn("invalid",f),_=$=S=null;for(G in x)if(x.hasOwnProperty(G)&&(Z=x[G],Z!=null))switch(G){case"value":S=Z;break;case"defaultValue":$=Z;break;case"children":_=Z;break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(91));break;default:nr(f,p,G,Z,x,null)}No(f,S,$,_),kn(f);return;case"option":for(oe in x)if(x.hasOwnProperty(oe)&&(S=x[oe],S!=null))switch(oe){case"selected":f.selected=S&&typeof S!="function"&&typeof S!="symbol";break;default:nr(f,p,oe,S,x,null)}return;case"dialog":hn("beforetoggle",f),hn("toggle",f),hn("cancel",f),hn("close",f);break;case"iframe":case"object":hn("load",f);break;case"video":case"audio":for(S=0;S<v0.length;S++)hn(v0[S],f);break;case"image":hn("error",f),hn("load",f);break;case"details":hn("toggle",f);break;case"embed":case"source":case"link":hn("error",f),hn("load",f);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ne in x)if(x.hasOwnProperty(Ne)&&(S=x[Ne],S!=null))switch(Ne){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,p));default:nr(f,p,Ne,S,x,null)}return;default:if(yt(p)){for(Le in x)x.hasOwnProperty(Le)&&(S=x[Le],S!==void 0&&YI(f,p,Le,S,x,void 0));return}}for(Z in x)x.hasOwnProperty(Z)&&(S=x[Z],S!=null&&nr(f,p,Z,S,x,null))}function Ile(f,p,x,S){switch(p){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var $=null,_=null,G=null,Z=null,oe=null,Ne=null,Le=null;for(Ae in x){var Ue=x[Ae];if(x.hasOwnProperty(Ae)&&Ue!=null)switch(Ae){case"checked":break;case"value":break;case"defaultValue":oe=Ue;default:S.hasOwnProperty(Ae)||nr(f,p,Ae,null,S,Ue)}}for(var Te in S){var Ae=S[Te];if(Ue=x[Te],S.hasOwnProperty(Te)&&(Ae!=null||Ue!=null))switch(Te){case"type":_=Ae;break;case"name":$=Ae;break;case"checked":Ne=Ae;break;case"defaultChecked":Le=Ae;break;case"value":G=Ae;break;case"defaultValue":Z=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(r(137,p));break;default:Ae!==Ue&&nr(f,p,Te,Ae,S,Ue)}}qa(f,G,Z,oe,Ne,Le,_,$);return;case"select":Ae=G=Z=Te=null;for(_ in x)if(oe=x[_],x.hasOwnProperty(_)&&oe!=null)switch(_){case"value":break;case"multiple":Ae=oe;default:S.hasOwnProperty(_)||nr(f,p,_,null,S,oe)}for($ in S)if(_=S[$],oe=x[$],S.hasOwnProperty($)&&(_!=null||oe!=null))switch($){case"value":Te=_;break;case"defaultValue":Z=_;break;case"multiple":G=_;default:_!==oe&&nr(f,p,$,_,S,oe)}p=Z,x=G,S=Ae,Te!=null?Xa(f,!!x,Te,!1):!!S!=!!x&&(p!=null?Xa(f,!!x,p,!0):Xa(f,!!x,x?[]:"",!1));return;case"textarea":Ae=Te=null;for(Z in x)if($=x[Z],x.hasOwnProperty(Z)&&$!=null&&!S.hasOwnProperty(Z))switch(Z){case"value":break;case"children":break;default:nr(f,p,Z,null,S,$)}for(G in S)if($=S[G],_=x[G],S.hasOwnProperty(G)&&($!=null||_!=null))switch(G){case"value":Te=$;break;case"defaultValue":Ae=$;break;case"children":break;case"dangerouslySetInnerHTML":if($!=null)throw Error(r(91));break;default:$!==_&&nr(f,p,G,$,S,_)}Jl(f,Te,Ae);return;case"option":for(var Ut in x)if(Te=x[Ut],x.hasOwnProperty(Ut)&&Te!=null&&!S.hasOwnProperty(Ut))switch(Ut){case"selected":f.selected=!1;break;default:nr(f,p,Ut,null,S,Te)}for(oe in S)if(Te=S[oe],Ae=x[oe],S.hasOwnProperty(oe)&&Te!==Ae&&(Te!=null||Ae!=null))switch(oe){case"selected":f.selected=Te&&typeof Te!="function"&&typeof Te!="symbol";break;default:nr(f,p,oe,Te,S,Ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pt in x)Te=x[Pt],x.hasOwnProperty(Pt)&&Te!=null&&!S.hasOwnProperty(Pt)&&nr(f,p,Pt,null,S,Te);for(Ne in S)if(Te=S[Ne],Ae=x[Ne],S.hasOwnProperty(Ne)&&Te!==Ae&&(Te!=null||Ae!=null))switch(Ne){case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(r(137,p));break;default:nr(f,p,Ne,Te,S,Ae)}return;default:if(yt(p)){for(var rr in x)Te=x[rr],x.hasOwnProperty(rr)&&Te!==void 0&&!S.hasOwnProperty(rr)&&YI(f,p,rr,void 0,S,Te);for(Le in S)Te=S[Le],Ae=x[Le],!S.hasOwnProperty(Le)||Te===Ae||Te===void 0&&Ae===void 0||YI(f,p,Le,Te,S,Ae);return}}for(var we in x)Te=x[we],x.hasOwnProperty(we)&&Te!=null&&!S.hasOwnProperty(we)&&nr(f,p,we,null,S,Te);for(Ue in S)Te=S[Ue],Ae=x[Ue],!S.hasOwnProperty(Ue)||Te===Ae||Te==null&&Ae==null||nr(f,p,Ue,Te,S,Ae)}var QI=null,ZI=null;function Cw(f){return f.nodeType===9?f:f.ownerDocument}function HB(f){switch(f){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qB(f,p){if(f===0)switch(p){case"svg":return 1;case"math":return 2;default:return 0}return f===1&&p==="foreignObject"?0:f}function JI(f,p){return f==="textarea"||f==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.children=="bigint"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var eE=null;function Ele(){var f=window.event;return f&&f.type==="popstate"?f===eE?!1:(eE=f,!0):(eE=null,!1)}var KB=typeof setTimeout=="function"?setTimeout:void 0,Ale=typeof clearTimeout=="function"?clearTimeout:void 0,XB=typeof Promise=="function"?Promise:void 0,Rle=typeof queueMicrotask=="function"?queueMicrotask:typeof XB<"u"?function(f){return XB.resolve(null).then(f).catch(Ole)}:KB;function Ole(f){setTimeout(function(){throw f})}function id(f){return f==="head"}function YB(f,p){var x=p,S=0,$=0;do{var _=x.nextSibling;if(f.removeChild(x),_&&_.nodeType===8)if(x=_.data,x==="/$"){if(0<S&&8>S){x=S;var G=f.ownerDocument;if(x&1&&S0(G.documentElement),x&2&&S0(G.body),x&4)for(x=G.head,S0(x),G=x.firstChild;G;){var Z=G.nextSibling,oe=G.nodeName;G[Ha]||oe==="SCRIPT"||oe==="STYLE"||oe==="LINK"&&G.rel.toLowerCase()==="stylesheet"||x.removeChild(G),G=Z}}if($===0){f.removeChild(_),A0(p);return}$--}else x==="$"||x==="$?"||x==="$!"?$++:S=x.charCodeAt(0)-48;else S=0;x=_}while(x);A0(p)}function tE(f){var p=f.firstChild;for(p&&p.nodeType===10&&(p=p.nextSibling);p;){var x=p;switch(p=p.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":tE(x),ml(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}f.removeChild(x)}}function _le(f,p,x,S){for(;f.nodeType===1;){var $=x;if(f.nodeName.toLowerCase()!==p.toLowerCase()){if(!S&&(f.nodeName!=="INPUT"||f.type!=="hidden"))break}else if(S){if(!f[Ha])switch(p){case"meta":if(!f.hasAttribute("itemprop"))break;return f;case"link":if(_=f.getAttribute("rel"),_==="stylesheet"&&f.hasAttribute("data-precedence"))break;if(_!==$.rel||f.getAttribute("href")!==($.href==null||$.href===""?null:$.href)||f.getAttribute("crossorigin")!==($.crossOrigin==null?null:$.crossOrigin)||f.getAttribute("title")!==($.title==null?null:$.title))break;return f;case"style":if(f.hasAttribute("data-precedence"))break;return f;case"script":if(_=f.getAttribute("src"),(_!==($.src==null?null:$.src)||f.getAttribute("type")!==($.type==null?null:$.type)||f.getAttribute("crossorigin")!==($.crossOrigin==null?null:$.crossOrigin))&&_&&f.hasAttribute("async")&&!f.hasAttribute("itemprop"))break;return f;default:return f}}else if(p==="input"&&f.type==="hidden"){var _=$.name==null?null:""+$.name;if($.type==="hidden"&&f.getAttribute("name")===_)return f}else return f;if(f=wl(f.nextSibling),f===null)break}return null}function Dle(f,p,x){if(p==="")return null;for(;f.nodeType!==3;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!x||(f=wl(f.nextSibling),f===null))return null;return f}function nE(f){return f.data==="$!"||f.data==="$?"&&f.ownerDocument.readyState==="complete"}function Ple(f,p){var x=f.ownerDocument;if(f.data!=="$?"||x.readyState==="complete")p();else{var S=function(){p(),x.removeEventListener("DOMContentLoaded",S)};x.addEventListener("DOMContentLoaded",S),f._reactRetry=S}}function wl(f){for(;f!=null;f=f.nextSibling){var p=f.nodeType;if(p===1||p===3)break;if(p===8){if(p=f.data,p==="$"||p==="$!"||p==="$?"||p==="F!"||p==="F")break;if(p==="/$")return null}}return f}var rE=null;function QB(f){f=f.previousSibling;for(var p=0;f;){if(f.nodeType===8){var x=f.data;if(x==="$"||x==="$!"||x==="$?"){if(p===0)return f;p--}else x==="/$"&&p++}f=f.previousSibling}return null}function ZB(f,p,x){switch(p=Cw(x),f){case"html":if(f=p.documentElement,!f)throw Error(r(452));return f;case"head":if(f=p.head,!f)throw Error(r(453));return f;case"body":if(f=p.body,!f)throw Error(r(454));return f;default:throw Error(r(451))}}function S0(f){for(var p=f.attributes;p.length;)f.removeAttributeNode(p[0]);ml(f)}var Oo=new Map,JB=new Set;function kw(f){return typeof f.getRootNode=="function"?f.getRootNode():f.nodeType===9?f:f.ownerDocument}var rc=q.d;q.d={f:Mle,r:jle,D:Lle,C:Fle,L:zle,m:Ble,X:Vle,S:Ule,M:Wle};function Mle(){var f=rc.f(),p=mw();return f||p}function jle(f){var p=wa(f);p!==null&&p.tag===5&&p.type==="form"?xz(p):rc.r(f)}var Dp=typeof document>"u"?null:document;function e5(f,p,x){var S=Dp;if(S&&typeof p=="string"&&p){var $=wr(p);$='link[rel="'+f+'"][href="'+$+'"]',typeof x=="string"&&($+='[crossorigin="'+x+'"]'),JB.has($)||(JB.add($),f={rel:f,crossOrigin:x,href:p},S.querySelector($)===null&&(p=S.createElement("link"),ca(p,"link",f),lr(p),S.head.appendChild(p)))}}function Lle(f){rc.D(f),e5("dns-prefetch",f,null)}function Fle(f,p){rc.C(f,p),e5("preconnect",f,p)}function zle(f,p,x){rc.L(f,p,x);var S=Dp;if(S&&f&&p){var $='link[rel="preload"][as="'+wr(p)+'"]';p==="image"&&x&&x.imageSrcSet?($+='[imagesrcset="'+wr(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&($+='[imagesizes="'+wr(x.imageSizes)+'"]')):$+='[href="'+wr(f)+'"]';var _=$;switch(p){case"style":_=Pp(f);break;case"script":_=Mp(f)}Oo.has(_)||(f=c({rel:"preload",href:p==="image"&&x&&x.imageSrcSet?void 0:f,as:p},x),Oo.set(_,f),S.querySelector($)!==null||p==="style"&&S.querySelector(C0(_))||p==="script"&&S.querySelector(k0(_))||(p=S.createElement("link"),ca(p,"link",f),lr(p),S.head.appendChild(p)))}}function Ble(f,p){rc.m(f,p);var x=Dp;if(x&&f){var S=p&&typeof p.as=="string"?p.as:"script",$='link[rel="modulepreload"][as="'+wr(S)+'"][href="'+wr(f)+'"]',_=$;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Mp(f)}if(!Oo.has(_)&&(f=c({rel:"modulepreload",href:f},p),Oo.set(_,f),x.querySelector($)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(k0(_)))return}S=x.createElement("link"),ca(S,"link",f),lr(S),x.head.appendChild(S)}}}function Ule(f,p,x){rc.S(f,p,x);var S=Dp;if(S&&f){var $=Vs(S).hoistableStyles,_=Pp(f);p=p||"default";var G=$.get(_);if(!G){var Z={loading:0,preload:null};if(G=S.querySelector(C0(_)))Z.loading=5;else{f=c({rel:"stylesheet",href:f,"data-precedence":p},x),(x=Oo.get(_))&&sE(f,x);var oe=G=S.createElement("link");lr(oe),ca(oe,"link",f),oe._p=new Promise(function(Ne,Le){oe.onload=Ne,oe.onerror=Le}),oe.addEventListener("load",function(){Z.loading|=1}),oe.addEventListener("error",function(){Z.loading|=2}),Z.loading|=4,Nw(G,p,S)}G={type:"stylesheet",instance:G,count:1,state:Z},$.set(_,G)}}}function Vle(f,p){rc.X(f,p);var x=Dp;if(x&&f){var S=Vs(x).hoistableScripts,$=Mp(f),_=S.get($);_||(_=x.querySelector(k0($)),_||(f=c({src:f,async:!0},p),(p=Oo.get($))&&aE(f,p),_=x.createElement("script"),lr(_),ca(_,"link",f),x.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},S.set($,_))}}function Wle(f,p){rc.M(f,p);var x=Dp;if(x&&f){var S=Vs(x).hoistableScripts,$=Mp(f),_=S.get($);_||(_=x.querySelector(k0($)),_||(f=c({src:f,async:!0,type:"module"},p),(p=Oo.get($))&&aE(f,p),_=x.createElement("script"),lr(_),ca(_,"link",f),x.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},S.set($,_))}}function t5(f,p,x,S){var $=($=Ie.current)?kw($):null;if(!$)throw Error(r(446));switch(f){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(p=Pp(x.href),x=Vs($).hoistableStyles,S=x.get(p),S||(S={type:"style",instance:null,count:0,state:null},x.set(p,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){f=Pp(x.href);var _=Vs($).hoistableStyles,G=_.get(f);if(G||($=$.ownerDocument||$,G={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(f,G),(_=$.querySelector(C0(f)))&&!_._p&&(G.instance=_,G.state.loading=5),Oo.has(f)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},Oo.set(f,x),_||Gle($,f,x,G.state))),p&&S===null)throw Error(r(528,""));return G}if(p&&S!==null)throw Error(r(529,""));return null;case"script":return p=x.async,x=x.src,typeof x=="string"&&p&&typeof p!="function"&&typeof p!="symbol"?(p=Mp(x),x=Vs($).hoistableScripts,S=x.get(p),S||(S={type:"script",instance:null,count:0,state:null},x.set(p,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,f))}}function Pp(f){return'href="'+wr(f)+'"'}function C0(f){return'link[rel="stylesheet"]['+f+"]"}function n5(f){return c({},f,{"data-precedence":f.precedence,precedence:null})}function Gle(f,p,x,S){f.querySelector('link[rel="preload"][as="style"]['+p+"]")?S.loading=1:(p=f.createElement("link"),S.preload=p,p.addEventListener("load",function(){return S.loading|=1}),p.addEventListener("error",function(){return S.loading|=2}),ca(p,"link",x),lr(p),f.head.appendChild(p))}function Mp(f){return'[src="'+wr(f)+'"]'}function k0(f){return"script[async]"+f}function r5(f,p,x){if(p.count++,p.instance===null)switch(p.type){case"style":var S=f.querySelector('style[data-href~="'+wr(x.href)+'"]');if(S)return p.instance=S,lr(S),S;var $=c({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return S=(f.ownerDocument||f).createElement("style"),lr(S),ca(S,"style",$),Nw(S,x.precedence,f),p.instance=S;case"stylesheet":$=Pp(x.href);var _=f.querySelector(C0($));if(_)return p.state.loading|=4,p.instance=_,lr(_),_;S=n5(x),($=Oo.get($))&&sE(S,$),_=(f.ownerDocument||f).createElement("link"),lr(_);var G=_;return G._p=new Promise(function(Z,oe){G.onload=Z,G.onerror=oe}),ca(_,"link",S),p.state.loading|=4,Nw(_,x.precedence,f),p.instance=_;case"script":return _=Mp(x.src),($=f.querySelector(k0(_)))?(p.instance=$,lr($),$):(S=x,($=Oo.get(_))&&(S=c({},x),aE(S,$)),f=f.ownerDocument||f,$=f.createElement("script"),lr($),ca($,"link",S),f.head.appendChild($),p.instance=$);case"void":return null;default:throw Error(r(443,p.type))}else p.type==="stylesheet"&&(p.state.loading&4)===0&&(S=p.instance,p.state.loading|=4,Nw(S,x.precedence,f));return p.instance}function Nw(f,p,x){for(var S=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),$=S.length?S[S.length-1]:null,_=$,G=0;G<S.length;G++){var Z=S[G];if(Z.dataset.precedence===p)_=Z;else if(_!==$)break}_?_.parentNode.insertBefore(f,_.nextSibling):(p=x.nodeType===9?x.head:x,p.insertBefore(f,p.firstChild))}function sE(f,p){f.crossOrigin==null&&(f.crossOrigin=p.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=p.referrerPolicy),f.title==null&&(f.title=p.title)}function aE(f,p){f.crossOrigin==null&&(f.crossOrigin=p.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=p.referrerPolicy),f.integrity==null&&(f.integrity=p.integrity)}var Tw=null;function s5(f,p,x){if(Tw===null){var S=new Map,$=Tw=new Map;$.set(x,S)}else $=Tw,S=$.get(x),S||(S=new Map,$.set(x,S));if(S.has(f))return S;for(S.set(f,null),x=x.getElementsByTagName(f),$=0;$<x.length;$++){var _=x[$];if(!(_[Ha]||_[Qn]||f==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var G=_.getAttribute(p)||"";G=f+G;var Z=S.get(G);Z?Z.push(_):S.set(G,[_])}}return S}function a5(f,p,x){f=f.ownerDocument||f,f.head.insertBefore(x,p==="title"?f.querySelector("head > title"):null)}function Hle(f,p,x){if(x===1||p.itemProp!=null)return!1;switch(f){case"meta":case"title":return!0;case"style":if(typeof p.precedence!="string"||typeof p.href!="string"||p.href==="")break;return!0;case"link":if(typeof p.rel!="string"||typeof p.href!="string"||p.href===""||p.onLoad||p.onError)break;switch(p.rel){case"stylesheet":return f=p.disabled,typeof p.precedence=="string"&&f==null;default:return!0}case"script":if(p.async&&typeof p.async!="function"&&typeof p.async!="symbol"&&!p.onLoad&&!p.onError&&p.src&&typeof p.src=="string")return!0}return!1}function i5(f){return!(f.type==="stylesheet"&&(f.state.loading&3)===0)}var N0=null;function qle(){}function Kle(f,p,x){if(N0===null)throw Error(r(475));var S=N0;if(p.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var $=Pp(x.href),_=f.querySelector(C0($));if(_){f=_._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(S.count++,S=$w.bind(S),f.then(S,S)),p.state.loading|=4,p.instance=_,lr(_);return}_=f.ownerDocument||f,x=n5(x),($=Oo.get($))&&sE(x,$),_=_.createElement("link"),lr(_);var G=_;G._p=new Promise(function(Z,oe){G.onload=Z,G.onerror=oe}),ca(_,"link",x),p.instance=_}S.stylesheets===null&&(S.stylesheets=new Map),S.stylesheets.set(p,f),(f=p.state.preload)&&(p.state.loading&3)===0&&(S.count++,p=$w.bind(S),f.addEventListener("load",p),f.addEventListener("error",p))}}function Xle(){if(N0===null)throw Error(r(475));var f=N0;return f.stylesheets&&f.count===0&&iE(f,f.stylesheets),0<f.count?function(p){var x=setTimeout(function(){if(f.stylesheets&&iE(f,f.stylesheets),f.unsuspend){var S=f.unsuspend;f.unsuspend=null,S()}},6e4);return f.unsuspend=p,function(){f.unsuspend=null,clearTimeout(x)}}:null}function $w(){if(this.count--,this.count===0){if(this.stylesheets)iE(this,this.stylesheets);else if(this.unsuspend){var f=this.unsuspend;this.unsuspend=null,f()}}}var Iw=null;function iE(f,p){f.stylesheets=null,f.unsuspend!==null&&(f.count++,Iw=new Map,p.forEach(Yle,f),Iw=null,$w.call(f))}function Yle(f,p){if(!(p.state.loading&4)){var x=Iw.get(f);if(x)var S=x.get(null);else{x=new Map,Iw.set(f,x);for(var $=f.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<$.length;_++){var G=$[_];(G.nodeName==="LINK"||G.getAttribute("media")!=="not all")&&(x.set(G.dataset.precedence,G),S=G)}S&&x.set(null,S)}$=p.instance,G=$.getAttribute("data-precedence"),_=x.get(G)||S,_===S&&x.set(null,$),x.set(G,$),this.count++,S=$w.bind(this),$.addEventListener("load",S),$.addEventListener("error",S),_?_.parentNode.insertBefore($,_.nextSibling):(f=f.nodeType===9?f.head:f,f.insertBefore($,f.firstChild)),p.state.loading|=4}}var T0={$$typeof:k,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function Qle(f,p,x,S,$,_,G,Z){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fl(0),this.hiddenUpdates=fl(null),this.identifierPrefix=S,this.onUncaughtError=$,this.onCaughtError=_,this.onRecoverableError=G,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Z,this.incompleteTransitions=new Map}function o5(f,p,x,S,$,_,G,Z,oe,Ne,Le,Ue){return f=new Qle(f,p,x,G,Z,oe,Ne,Ue),p=1,_===!0&&(p|=24),_=Hi(3,null,null,p),f.current=_,_.stateNode=f,p=B$(),p.refCount++,f.pooledCache=p,p.refCount++,_.memoizedState={element:S,isDehydrated:x,cache:p},G$(_),f}function l5(f){return f?(f=hp,f):hp}function u5(f,p,x,S,$,_){$=l5($),S.context===null?S.context=$:S.pendingContext=$,S=qc(p),S.payload={element:x},_=_===void 0?null:_,_!==null&&(S.callback=_),x=Kc(f,S,p),x!==null&&(Qi(x,f,p),n0(x,f,p))}function c5(f,p){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var x=f.retryLane;f.retryLane=x!==0&&x<p?x:p}}function oE(f,p){c5(f,p),(f=f.alternate)&&c5(f,p)}function d5(f){if(f.tag===13){var p=fp(f,67108864);p!==null&&Qi(p,f,67108864),oE(f,67108864)}}var Ew=!0;function Zle(f,p,x,S){var $=j.T;j.T=null;var _=q.p;try{q.p=2,lE(f,p,x,S)}finally{q.p=_,j.T=$}}function Jle(f,p,x,S){var $=j.T;j.T=null;var _=q.p;try{q.p=8,lE(f,p,x,S)}finally{q.p=_,j.T=$}}function lE(f,p,x,S){if(Ew){var $=uE(S);if($===null)XI(f,p,S,Aw,x),h5(f,S);else if(tue($,f,p,x,S))S.stopPropagation();else if(h5(f,S),p&4&&-1<eue.indexOf(f)){for(;$!==null;){var _=wa($);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var G=aa(_.pendingLanes);if(G!==0){var Z=_;for(Z.pendingLanes|=2,Z.entangledLanes|=2;G;){var oe=1<<31-Mn(G);Z.entanglements[1]|=oe,G&=~oe}su(_),(Gn&6)===0&&(hw=xe()+500,x0(0))}}break;case 13:Z=fp(_,2),Z!==null&&Qi(Z,_,2),mw(),oE(_,2)}if(_=uE(S),_===null&&XI(f,p,S,Aw,x),_===$)break;$=_}$!==null&&S.stopPropagation()}else XI(f,p,S,null,x)}}function uE(f){return f=Ya(f),cE(f)}var Aw=null;function cE(f){if(Aw=null,f=ia(f),f!==null){var p=a(f);if(p===null)f=null;else{var x=p.tag;if(x===13){if(f=i(p),f!==null)return f;f=null}else if(x===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;f=null}else p!==f&&(f=null)}}return Aw=f,null}function f5(f){switch(f){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(De()){case at:return 2;case Xe:return 8;case Nt:case Be:return 32;case Tt:return 268435456;default:return 32}default:return 32}}var dE=!1,od=null,ld=null,ud=null,$0=new Map,I0=new Map,cd=[],eue="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function h5(f,p){switch(f){case"focusin":case"focusout":od=null;break;case"dragenter":case"dragleave":ld=null;break;case"mouseover":case"mouseout":ud=null;break;case"pointerover":case"pointerout":$0.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":I0.delete(p.pointerId)}}function E0(f,p,x,S,$,_){return f===null||f.nativeEvent!==_?(f={blockedOn:p,domEventName:x,eventSystemFlags:S,nativeEvent:_,targetContainers:[$]},p!==null&&(p=wa(p),p!==null&&d5(p)),f):(f.eventSystemFlags|=S,p=f.targetContainers,$!==null&&p.indexOf($)===-1&&p.push($),f)}function tue(f,p,x,S,$){switch(p){case"focusin":return od=E0(od,f,p,x,S,$),!0;case"dragenter":return ld=E0(ld,f,p,x,S,$),!0;case"mouseover":return ud=E0(ud,f,p,x,S,$),!0;case"pointerover":var _=$.pointerId;return $0.set(_,E0($0.get(_)||null,f,p,x,S,$)),!0;case"gotpointercapture":return _=$.pointerId,I0.set(_,E0(I0.get(_)||null,f,p,x,S,$)),!0}return!1}function p5(f){var p=ia(f.target);if(p!==null){var x=a(p);if(x!==null){if(p=x.tag,p===13){if(p=i(x),p!==null){f.blockedOn=p,pl(f.priority,function(){if(x.tag===13){var S=Yi();S=xo(S);var $=fp(x,S);$!==null&&Qi($,x,S),oE(x,S)}});return}}else if(p===3&&x.stateNode.current.memoizedState.isDehydrated){f.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}f.blockedOn=null}function Rw(f){if(f.blockedOn!==null)return!1;for(var p=f.targetContainers;0<p.length;){var x=uE(f.nativeEvent);if(x===null){x=f.nativeEvent;var S=new x.constructor(x.type,x);Os=S,x.target.dispatchEvent(S),Os=null}else return p=wa(x),p!==null&&d5(p),f.blockedOn=x,!1;p.shift()}return!0}function m5(f,p,x){Rw(f)&&x.delete(p)}function nue(){dE=!1,od!==null&&Rw(od)&&(od=null),ld!==null&&Rw(ld)&&(ld=null),ud!==null&&Rw(ud)&&(ud=null),$0.forEach(m5),I0.forEach(m5)}function Ow(f,p){f.blockedOn===p&&(f.blockedOn=null,dE||(dE=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,nue)))}var _w=null;function g5(f){_w!==f&&(_w=f,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){_w===f&&(_w=null);for(var p=0;p<f.length;p+=3){var x=f[p],S=f[p+1],$=f[p+2];if(typeof S!="function"){if(cE(S||x)===null)continue;break}var _=wa(x);_!==null&&(f.splice(p,3),p-=3,cI(_,{pending:!0,data:$,method:x.method,action:S},S,$))}}))}function A0(f){function p(oe){return Ow(oe,f)}od!==null&&Ow(od,f),ld!==null&&Ow(ld,f),ud!==null&&Ow(ud,f),$0.forEach(p),I0.forEach(p);for(var x=0;x<cd.length;x++){var S=cd[x];S.blockedOn===f&&(S.blockedOn=null)}for(;0<cd.length&&(x=cd[0],x.blockedOn===null);)p5(x),x.blockedOn===null&&cd.shift();if(x=(f.ownerDocument||f).$$reactFormReplay,x!=null)for(S=0;S<x.length;S+=3){var $=x[S],_=x[S+1],G=$[Wr]||null;if(typeof _=="function")G||g5(x);else if(G){var Z=null;if(_&&_.hasAttribute("formAction")){if($=_,G=_[Wr]||null)Z=G.formAction;else if(cE($)!==null)continue}else Z=G.action;typeof Z=="function"?x[S+1]=Z:(x.splice(S,3),S-=3),g5(x)}}}function fE(f){this._internalRoot=f}Dw.prototype.render=fE.prototype.render=function(f){var p=this._internalRoot;if(p===null)throw Error(r(409));var x=p.current,S=Yi();u5(x,S,f,p,null,null)},Dw.prototype.unmount=fE.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var p=f.containerInfo;u5(f.current,2,null,f,null,null),mw(),p[Gr]=null}};function Dw(f){this._internalRoot=f}Dw.prototype.unstable_scheduleHydration=function(f){if(f){var p=vo();f={blockedOn:null,target:f,priority:p};for(var x=0;x<cd.length&&p!==0&&p<cd[x].priority;x++);cd.splice(x,0,f),x===0&&p5(f)}};var y5=e.version;if(y5!=="19.1.0")throw Error(r(527,y5,"19.1.0"));q.findDOMNode=function(f){var p=f._reactInternals;if(p===void 0)throw typeof f.render=="function"?Error(r(188)):(f=Object.keys(f).join(","),Error(r(268,f)));return f=l(p),f=f!==null?u(f):null,f=f===null?null:f.stateNode,f};var rue={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pw.isDisabled&&Pw.supportsFiber)try{rn=Pw.inject(rue),cn=Pw}catch{}}return _0.createRoot=function(f,p){if(!s(f))throw Error(r(299));var x=!1,S="",$=_z,_=Dz,G=Pz,Z=null;return p!=null&&(p.unstable_strictMode===!0&&(x=!0),p.identifierPrefix!==void 0&&(S=p.identifierPrefix),p.onUncaughtError!==void 0&&($=p.onUncaughtError),p.onCaughtError!==void 0&&(_=p.onCaughtError),p.onRecoverableError!==void 0&&(G=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(Z=p.unstable_transitionCallbacks)),p=o5(f,1,!1,null,null,x,S,$,_,G,Z,null),f[Gr]=p.current,KI(f),new fE(p)},_0.hydrateRoot=function(f,p,x){if(!s(f))throw Error(r(299));var S=!1,$="",_=_z,G=Dz,Z=Pz,oe=null,Ne=null;return x!=null&&(x.unstable_strictMode===!0&&(S=!0),x.identifierPrefix!==void 0&&($=x.identifierPrefix),x.onUncaughtError!==void 0&&(_=x.onUncaughtError),x.onCaughtError!==void 0&&(G=x.onCaughtError),x.onRecoverableError!==void 0&&(Z=x.onRecoverableError),x.unstable_transitionCallbacks!==void 0&&(oe=x.unstable_transitionCallbacks),x.formState!==void 0&&(Ne=x.formState)),p=o5(f,1,!0,p,x??null,S,$,_,G,Z,oe,Ne),p.context=l5(null),x=p.current,S=Yi(),S=xo(S),$=qc(S),$.callback=null,Kc(x,$,S),x=S,p.current.lanes=x,Bi(p,x),su(p),f[Gr]=p.current,KI(f),new Dw(p)},_0.version="19.1.0",_0}var $5;function mue(){if($5)return mE.exports;$5=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),mE.exports=pue(),mE.exports}var gue=mue();const yue=Un(gue);var xE={exports:{}},vE={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I5;function bue(){if(I5)return vE;I5=1;var t=FC();function e(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,s=t.useRef,a=t.useEffect,i=t.useMemo,o=t.useDebugValue;return vE.useSyncExternalStoreWithSelector=function(l,u,c,d,h){var m=s(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=i(function(){function b(N){if(!w){if(w=!0,C=N,N=d(N),h!==void 0&&g.hasValue){var I=g.value;if(h(I,N))return k=I}return k=N}if(I=k,n(C,N))return I;var A=d(N);return h!==void 0&&h(I,A)?(C=N,I):(C=N,k=A)}var w=!1,C,k,T=c===void 0?null:c;return[function(){return b(u())},T===null?void 0:function(){return b(T())}]},[u,c,d,h]);var y=r(l,m[0],m[1]);return a(function(){g.hasValue=!0,g.value=y},[y]),o(y),y},vE}var E5;function xue(){return E5||(E5=1,xE.exports=bue()),xE.exports}var vue=xue();function wue(t){t()}function Sue(){let t=null,e=null;return{clear(){t=null,e=null},notify(){wue(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const s=e={callback:n,next:null,prev:e};return s.prev?s.prev.next=s:t=s,function(){!r||t===null||(r=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}var A5={notify(){},get:()=>[]};function Cue(t,e){let n,r=A5,s=0,a=!1;function i(y){c();const b=r.subscribe(y);let w=!1;return()=>{w||(w=!0,b(),d())}}function o(){r.notify()}function l(){g.onStateChange&&g.onStateChange()}function u(){return a}function c(){s++,n||(n=t.subscribe(l),r=Sue())}function d(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=A5)}function h(){a||(a=!0,c())}function m(){a&&(a=!1,d())}const g={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:u,trySubscribe:h,tryUnsubscribe:m,getListeners:()=>r};return g}var kue=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Nue=kue(),Tue=()=>typeof navigator<"u"&&navigator.product==="ReactNative",$ue=Tue(),Iue=()=>Nue||$ue?L.useLayoutEffect:L.useEffect,Eue=Iue(),wE=Symbol.for("react-redux-context"),SE=typeof globalThis<"u"?globalThis:{};function Aue(){if(!L.createContext)return{};const t=SE[wE]??(SE[wE]=new Map);let e=t.get(L.createContext);return e||(e=L.createContext(null),t.set(L.createContext,e)),e}var Id=Aue();function Rue(t){const{children:e,context:n,serverState:r,store:s}=t,a=L.useMemo(()=>{const l=Cue(s);return{store:s,subscription:l,getServerState:r?()=>r:void 0}},[s,r]),i=L.useMemo(()=>s.getState(),[s]);Eue(()=>{const{subscription:l}=a;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),i!==s.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[a,i]);const o=n||Id;return L.createElement(o.Provider,{value:a},e)}var Oue=Rue;function CM(t=Id){return function(){return L.useContext(t)}}var zK=CM();function BK(t=Id){const e=t===Id?zK:CM(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var _ue=BK();function Due(t=Id){const e=t===Id?_ue:BK(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Pue=Due(),Mue=(t,e)=>t===e;function jue(t=Id){const e=t===Id?zK:CM(t),n=(r,s={})=>{const{equalityFn:a=Mue}=typeof s=="function"?{equalityFn:s}:s,i=e(),{store:o,subscription:l,getServerState:u}=i;L.useRef(!0);const c=L.useCallback({[r.name](h){return r(h)}}[r.name],[r]),d=vue.useSyncExternalStoreWithSelector(l.addNestedSub,o.getState,u||o.getState,c,a);return L.useDebugValue(d),d};return Object.assign(n,{withTypes:()=>n}),n}var R5=jue();function da(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Lue=typeof Symbol=="function"&&Symbol.observable||"@@observable",O5=Lue,CE=()=>Math.random().toString(36).substring(7).split("").join("."),Fue={INIT:`@@redux/INIT${CE()}`,REPLACE:`@@redux/REPLACE${CE()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${CE()}`},GS=Fue;function kM(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function UK(t,e,n){if(typeof t!="function")throw new Error(da(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(da(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(da(1));return n(UK)(t,e)}let r=t,s=e,a=new Map,i=a,o=0,l=!1;function u(){i===a&&(i=new Map,a.forEach((b,w)=>{i.set(w,b)}))}function c(){if(l)throw new Error(da(3));return s}function d(b){if(typeof b!="function")throw new Error(da(4));if(l)throw new Error(da(5));let w=!0;u();const C=o++;return i.set(C,b),function(){if(w){if(l)throw new Error(da(6));w=!1,u(),i.delete(C),a=null}}}function h(b){if(!kM(b))throw new Error(da(7));if(typeof b.type>"u")throw new Error(da(8));if(typeof b.type!="string")throw new Error(da(17));if(l)throw new Error(da(9));try{l=!0,s=r(s,b)}finally{l=!1}return(a=i).forEach(C=>{C()}),b}function m(b){if(typeof b!="function")throw new Error(da(10));r=b,h({type:GS.REPLACE})}function g(){const b=d;return{subscribe(w){if(typeof w!="object"||w===null)throw new Error(da(11));function C(){const T=w;T.next&&T.next(c())}return C(),{unsubscribe:b(C)}},[O5](){return this}}}return h({type:GS.INIT}),{dispatch:h,subscribe:d,getState:c,replaceReducer:m,[O5]:g}}function zue(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:GS.INIT})>"u")throw new Error(da(12));if(typeof n(void 0,{type:GS.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(da(13))})}function Bue(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const i=e[a];typeof t[i]=="function"&&(n[i]=t[i])}const r=Object.keys(n);let s;try{zue(n)}catch(a){s=a}return function(i={},o){if(s)throw s;let l=!1;const u={};for(let c=0;c<r.length;c++){const d=r[c],h=n[d],m=i[d],g=h(m,o);if(typeof g>"u")throw o&&o.type,new Error(da(14));u[d]=g,l=l||g!==m}return l=l||r.length!==Object.keys(i).length,l?u:i}}function HS(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Uue(...t){return e=>(n,r)=>{const s=e(n,r);let a=()=>{throw new Error(da(15))};const i={getState:s.getState,dispatch:(l,...u)=>a(l,...u)},o=t.map(l=>l(i));return a=HS(...o)(s.dispatch),{...s,dispatch:a}}}function Vue(t){return kM(t)&&"type"in t&&typeof t.type=="string"}var VK=Symbol.for("immer-nothing"),_5=Symbol.for("immer-draftable"),uo=Symbol.for("immer-state");function Rl(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Tm=Object.getPrototypeOf;function uh(t){return!!t&&!!t[uo]}function Nc(t){var e;return t?WK(t)||Array.isArray(t)||!!t[_5]||!!((e=t.constructor)!=null&&e[_5])||BC(t)||UC(t):!1}var Wue=Object.prototype.constructor.toString();function WK(t){if(!t||typeof t!="object")return!1;const e=Tm(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Wue}function qS(t,e){zC(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function zC(t){const e=t[uo];return e?e.type_:Array.isArray(t)?1:BC(t)?2:UC(t)?3:0}function k3(t,e){return zC(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function GK(t,e,n){const r=zC(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Gue(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function BC(t){return t instanceof Map}function UC(t){return t instanceof Set}function Of(t){return t.copy_||t.base_}function N3(t,e){if(BC(t))return new Map(t);if(UC(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=WK(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[uo];let s=Reflect.ownKeys(r);for(let a=0;a<s.length;a++){const i=s[a],o=r[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]})}return Object.create(Tm(t),r)}else{const r=Tm(t);if(r!==null&&n)return{...t};const s=Object.create(r);return Object.assign(s,t)}}function NM(t,e=!1){return VC(t)||uh(t)||!Nc(t)||(zC(t)>1&&(t.set=t.add=t.clear=t.delete=Hue),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>NM(r,!0))),t}function Hue(){Rl(2)}function VC(t){return Object.isFrozen(t)}var que={};function ch(t){const e=que[t];return e||Rl(0,t),e}var Sb;function HK(){return Sb}function Kue(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function D5(t,e){e&&(ch("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function T3(t){$3(t),t.drafts_.forEach(Xue),t.drafts_=null}function $3(t){t===Sb&&(Sb=t.parent_)}function P5(t){return Sb=Kue(Sb,t)}function Xue(t){const e=t[uo];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function M5(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[uo].modified_&&(T3(e),Rl(4)),Nc(t)&&(t=KS(e,t),e.parent_||XS(e,t)),e.patches_&&ch("Patches").generateReplacementPatches_(n[uo].base_,t,e.patches_,e.inversePatches_)):t=KS(e,n,[]),T3(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==VK?t:void 0}function KS(t,e,n){if(VC(e))return e;const r=e[uo];if(!r)return qS(e,(s,a)=>j5(t,r,e,s,a,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return XS(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let a=s,i=!1;r.type_===3&&(a=new Set(s),s.clear(),i=!0),qS(a,(o,l)=>j5(t,r,s,o,l,n,i)),XS(t,s,!1),n&&t.patches_&&ch("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function j5(t,e,n,r,s,a,i){if(uh(s)){const o=a&&e&&e.type_!==3&&!k3(e.assigned_,r)?a.concat(r):void 0,l=KS(t,s,o);if(GK(n,r,l),uh(l))t.canAutoFreeze_=!1;else return}else i&&n.add(s);if(Nc(s)&&!VC(s)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;KS(t,s),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&XS(t,s)}}function XS(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&NM(e,n)}function Yue(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:HK(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,a=TM;n&&(s=[r],a=Cb);const{revoke:i,proxy:o}=Proxy.revocable(s,a);return r.draft_=o,r.revoke_=i,o}var TM={get(t,e){if(e===uo)return t;const n=Of(t);if(!k3(n,e))return Que(t,n,e);const r=n[e];return t.finalized_||!Nc(r)?r:r===kE(t.base_,e)?(NE(t),t.copy_[e]=E3(r,t)):r},has(t,e){return e in Of(t)},ownKeys(t){return Reflect.ownKeys(Of(t))},set(t,e,n){const r=qK(Of(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const s=kE(Of(t),e),a=s==null?void 0:s[uo];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Gue(n,s)&&(n!==void 0||k3(t.base_,e)))return!0;NE(t),I3(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return kE(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,NE(t),I3(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Of(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Rl(11)},getPrototypeOf(t){return Tm(t.base_)},setPrototypeOf(){Rl(12)}},Cb={};qS(TM,(t,e)=>{Cb[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Cb.deleteProperty=function(t,e){return Cb.set.call(this,t,e,void 0)};Cb.set=function(t,e,n){return TM.set.call(this,t[0],e,n,t[0])};function kE(t,e){const n=t[uo];return(n?Of(n):t)[e]}function Que(t,e,n){var s;const r=qK(e,n);return r?"value"in r?r.value:(s=r.get)==null?void 0:s.call(t.draft_):void 0}function qK(t,e){if(!(e in t))return;let n=Tm(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Tm(n)}}function I3(t){t.modified_||(t.modified_=!0,t.parent_&&I3(t.parent_))}function NE(t){t.copy_||(t.copy_=N3(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Zue=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const i=this;return function(l=a,...u){return i.produce(l,c=>n.call(this,c,...u))}}typeof n!="function"&&Rl(6),r!==void 0&&typeof r!="function"&&Rl(7);let s;if(Nc(e)){const a=P5(this),i=E3(e,void 0);let o=!0;try{s=n(i),o=!1}finally{o?T3(a):$3(a)}return D5(a,r),M5(s,a)}else if(!e||typeof e!="object"){if(s=n(e),s===void 0&&(s=e),s===VK&&(s=void 0),this.autoFreeze_&&NM(s,!0),r){const a=[],i=[];ch("Patches").generateReplacementPatches_(e,s,a,i),r(a,i)}return s}else Rl(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(i,...o)=>this.produceWithPatches(i,l=>e(l,...o));let r,s;return[this.produce(e,n,(i,o)=>{r=i,s=o}),r,s]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Nc(t)||Rl(8),uh(t)&&(t=Jue(t));const e=P5(this),n=E3(t,void 0);return n[uo].isManual_=!0,$3(e),n}finishDraft(t,e){const n=t&&t[uo];(!n||!n.isManual_)&&Rl(9);const{scope_:r}=n;return D5(r,e),M5(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const s=e[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(e=e.slice(n+1));const r=ch("Patches").applyPatches_;return uh(t)?r(t,e):this.produce(t,s=>r(s,e))}};function E3(t,e){const n=BC(t)?ch("MapSet").proxyMap_(t,e):UC(t)?ch("MapSet").proxySet_(t,e):Yue(t,e);return(e?e.scope_:HK()).drafts_.push(n),n}function Jue(t){return uh(t)||Rl(10,t),KK(t)}function KK(t){if(!Nc(t)||VC(t))return t;const e=t[uo];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=N3(t,e.scope_.immer_.useStrictShallowCopy_)}else n=N3(t,!0);return qS(n,(r,s)=>{GK(n,r,KK(s))}),e&&(e.finalized_=!1),n}var co=new Zue,XK=co.produce;co.produceWithPatches.bind(co);co.setAutoFreeze.bind(co);co.setUseStrictShallowCopy.bind(co);co.applyPatches.bind(co);co.createDraft.bind(co);co.finishDraft.bind(co);function YK(t){return({dispatch:n,getState:r})=>s=>a=>typeof a=="function"?a(n,r,t):s(a)}var ece=YK(),tce=YK,nce=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?HS:HS.apply(null,arguments)};function L5(t,e){function n(...r){if(e){let s=e(...r);if(!s)throw new Error(mc(0));return{type:t,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>Vue(r)&&r.type===t,n}var QK=class J0 extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,J0.prototype)}static get[Symbol.species](){return J0}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new J0(...e[0].concat(this)):new J0(...e.concat(this))}};function F5(t){return Nc(t)?XK(t,()=>{}):t}function Mw(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function rce(t){return typeof t=="boolean"}var sce=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:s=!0,actionCreatorCheck:a=!0}=e??{};let i=new QK;return n&&(rce(n)?i.push(ece):i.push(tce(n.extraArgument))),i},ace="RTK_autoBatch",z5=t=>e=>{setTimeout(e,t)},ice=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let s=!0,a=!1,i=!1;const o=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:z5(10):t.type==="callback"?t.queueNotification:z5(t.timeout),u=()=>{i=!1,a&&(a=!1,o.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const d=()=>s&&c(),h=r.subscribe(d);return o.add(c),()=>{h(),o.delete(c)}},dispatch(c){var d;try{return s=!((d=c==null?void 0:c.meta)!=null&&d[ace]),a=!s,a&&(i||(i=!0,l(u))),r.dispatch(c)}finally{s=!0}}})},oce=t=>function(n){const{autoBatch:r=!0}=n??{};let s=new QK(t);return r&&s.push(ice(typeof r=="object"?r:void 0)),s};function lce(t){const e=sce(),{reducer:n=void 0,middleware:r,devTools:s=!0,preloadedState:a=void 0,enhancers:i=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(kM(n))o=Bue(n);else throw new Error(mc(1));let l;typeof r=="function"?l=r(e):l=e();let u=HS;s&&(u=nce({trace:!1,...typeof s=="object"&&s}));const c=Uue(...l),d=oce(c);let h=typeof i=="function"?i(d):d();const m=u(...h);return UK(o,a,m)}function ZK(t){const e={},n=[];let r;const s={addCase(a,i){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(mc(28));if(o in e)throw new Error(mc(29));return e[o]=i,s},addMatcher(a,i){return n.push({matcher:a,reducer:i}),s},addDefaultCase(a){return r=a,s}};return t(s),[e,n,r]}function uce(t){return typeof t=="function"}function cce(t,e){let[n,r,s]=ZK(e),a;if(uce(t))a=()=>F5(t());else{const o=F5(t);a=()=>o}function i(o=a(),l){let u=[n[l.type],...r.filter(({matcher:c})=>c(l)).map(({reducer:c})=>c)];return u.filter(c=>!!c).length===0&&(u=[s]),u.reduce((c,d)=>{if(d)if(uh(c)){const m=d(c,l);return m===void 0?c:m}else{if(Nc(c))return XK(c,h=>d(h,l));{const h=d(c,l);if(h===void 0){if(c===null)return c;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return c},o)}return i.getInitialState=a,i}var dce=Symbol.for("rtk-slice-createasyncthunk");function fce(t,e){return`${t}/${e}`}function hce({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[dce];return function(s){const{name:a,reducerPath:i=a}=s;if(!a)throw new Error(mc(11));const o=(typeof s.reducers=="function"?s.reducers(mce()):s.reducers)||{},l=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(T,N){const I=typeof T=="string"?T:T.type;if(!I)throw new Error(mc(12));if(I in u.sliceCaseReducersByType)throw new Error(mc(13));return u.sliceCaseReducersByType[I]=N,c},addMatcher(T,N){return u.sliceMatchers.push({matcher:T,reducer:N}),c},exposeAction(T,N){return u.actionCreators[T]=N,c},exposeCaseReducer(T,N){return u.sliceCaseReducersByName[T]=N,c}};l.forEach(T=>{const N=o[T],I={reducerName:T,type:fce(a,T),createNotation:typeof s.reducers=="function"};yce(N)?xce(I,N,c,e):gce(I,N,c)});function d(){const[T={},N=[],I=void 0]=typeof s.extraReducers=="function"?ZK(s.extraReducers):[s.extraReducers],A={...T,...u.sliceCaseReducersByType};return cce(s.initialState,D=>{for(let P in A)D.addCase(P,A[P]);for(let P of u.sliceMatchers)D.addMatcher(P.matcher,P.reducer);for(let P of N)D.addMatcher(P.matcher,P.reducer);I&&D.addDefaultCase(I)})}const h=T=>T,m=new Map,g=new WeakMap;let y;function b(T,N){return y||(y=d()),y(T,N)}function w(){return y||(y=d()),y.getInitialState()}function C(T,N=!1){function I(D){let P=D[T];return typeof P>"u"&&N&&(P=Mw(g,I,w)),P}function A(D=h){const P=Mw(m,N,()=>new WeakMap);return Mw(P,D,()=>{const R={};for(const[O,F]of Object.entries(s.selectors??{}))R[O]=pce(F,D,()=>Mw(g,D,w),N);return R})}return{reducerPath:T,getSelectors:A,get selectors(){return A(I)},selectSlice:I}}const k={name:a,reducer:b,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:w,...C(i),injectInto(T,{reducerPath:N,...I}={}){const A=N??i;return T.inject({reducerPath:A,reducer:b},I),{...k,...C(A,!0)}}};return k}}function pce(t,e,n,r){function s(a,...i){let o=e(a);return typeof o>"u"&&r&&(o=n()),t(o,...i)}return s.unwrapped=t,s}var JK=hce();function mce(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function gce({type:t,reducerName:e,createNotation:n},r,s){let a,i;if("reducer"in r){if(n&&!bce(r))throw new Error(mc(17));a=r.reducer,i=r.prepare}else a=r;s.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,i?L5(t,i):L5(t))}function yce(t){return t._reducerDefinitionType==="asyncThunk"}function bce(t){return t._reducerDefinitionType==="reducerWithPrepare"}function xce({type:t,reducerName:e},n,r,s){if(!s)throw new Error(mc(18));const{payloadCreator:a,fulfilled:i,pending:o,rejected:l,settled:u,options:c}=n,d=s(t,a,c);r.exposeAction(e,d),i&&r.addCase(d.fulfilled,i),o&&r.addCase(d.pending,o),l&&r.addCase(d.rejected,l),u&&r.addMatcher(d.settled,u),r.exposeCaseReducer(e,{fulfilled:i||jw,pending:o||jw,rejected:l||jw,settled:u||jw})}function jw(){}function mc(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const vce={user:null,token:localStorage.getItem("token"),isAuthenticated:!1,loading:!1,error:null},eX=JK({name:"auth",initialState:vce,reducers:{setCredentials:(t,e)=>{const{user:n,token:r}=e.payload;t.user=n,t.token=r,t.isAuthenticated=!0,localStorage.setItem("token",r),localStorage.setItem("userToken",r),sessionStorage.setItem("userToken",r)},logout:t=>{t.user=null,t.token=null,t.isAuthenticated=!1,localStorage.removeItem("token"),localStorage.removeItem("userToken"),sessionStorage.removeItem("userToken")},setLoading:(t,e)=>{t.loading=e.payload},setError:(t,e)=>{t.error=e.payload}}}),{setCredentials:E0t,logout:A0t,setLoading:R0t,setError:O0t}=eX.actions,wce=eX.reducer,Sce={messages:[],loading:!1,error:null},tX=JK({name:"message",initialState:Sce,reducers:{setMessages:(t,e)=>{t.messages=e.payload},addMessage:(t,e)=>{t.messages.push(e.payload)},setLoading:(t,e)=>{t.loading=e.payload},setError:(t,e)=>{t.error=e.payload}}}),{setMessages:Tf,addMessage:_0t,setLoading:B5,setError:TE}=tX.actions,Cce=tX.reducer,kce=lce({reducer:{auth:wce,message:Cce},middleware:t=>t({serializableCheck:{ignoredActions:["message/setMessages","auth/setCredentials"],ignoredPaths:["message.messages","auth.user"]}})});var D0={},U5;function Nce(){if(U5)return D0;U5=1,Object.defineProperty(D0,"__esModule",{value:!0}),D0.parse=i,D0.serialize=u;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const h=function(){};return h.prototype=Object.create(null),h})();function i(h,m){const g=new a,y=h.length;if(y<2)return g;const b=(m==null?void 0:m.decode)||c;let w=0;do{const C=h.indexOf("=",w);if(C===-1)break;const k=h.indexOf(";",w),T=k===-1?y:k;if(C>T){w=h.lastIndexOf(";",C-1)+1;continue}const N=o(h,w,C),I=l(h,C,N),A=h.slice(N,I);if(g[A]===void 0){let D=o(h,C+1,T),P=l(h,T,D);const R=b(h.slice(D,P));g[A]=R}w=T+1}while(w<y);return g}function o(h,m,g){do{const y=h.charCodeAt(m);if(y!==32&&y!==9)return m}while(++m<g);return g}function l(h,m,g){for(;m>g;){const y=h.charCodeAt(--m);if(y!==32&&y!==9)return m+1}return g}function u(h,m,g){const y=(g==null?void 0:g.encode)||encodeURIComponent;if(!t.test(h))throw new TypeError(`argument name is invalid: ${h}`);const b=y(m);if(!e.test(b))throw new TypeError(`argument val is invalid: ${m}`);let w=h+"="+b;if(!g)return w;if(g.maxAge!==void 0){if(!Number.isInteger(g.maxAge))throw new TypeError(`option maxAge is invalid: ${g.maxAge}`);w+="; Max-Age="+g.maxAge}if(g.domain){if(!n.test(g.domain))throw new TypeError(`option domain is invalid: ${g.domain}`);w+="; Domain="+g.domain}if(g.path){if(!r.test(g.path))throw new TypeError(`option path is invalid: ${g.path}`);w+="; Path="+g.path}if(g.expires){if(!d(g.expires)||!Number.isFinite(g.expires.valueOf()))throw new TypeError(`option expires is invalid: ${g.expires}`);w+="; Expires="+g.expires.toUTCString()}if(g.httpOnly&&(w+="; HttpOnly"),g.secure&&(w+="; Secure"),g.partitioned&&(w+="; Partitioned"),g.priority)switch(typeof g.priority=="string"?g.priority.toLowerCase():void 0){case"low":w+="; Priority=Low";break;case"medium":w+="; Priority=Medium";break;case"high":w+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${g.priority}`)}if(g.sameSite)switch(typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite){case!0:case"strict":w+="; SameSite=Strict";break;case"lax":w+="; SameSite=Lax";break;case"none":w+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${g.sameSite}`)}return w}function c(h){if(h.indexOf("%")===-1)return h;try{return decodeURIComponent(h)}catch{return h}}function d(h){return s.call(h)==="[object Date]"}return D0}Nce();/**
 * react-router v7.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var V5="popstate";function Tce(t={}){function e(r,s){let{pathname:a,search:i,hash:o}=r.location;return A3("",{pathname:a,search:i,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:kb(s)}return Ice(e,n,null,t)}function zr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Nu(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $ce(){return Math.random().toString(36).substring(2,10)}function W5(t,e){return{usr:t.state,key:t.key,idx:e}}function A3(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ug(e):e,state:n,key:e&&e.key||r||$ce()}}function kb({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ug(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Ice(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,i=s.history,o="POP",l=null,u=c();u==null&&(u=0,i.replaceState({...i.state,idx:u},""));function c(){return(i.state||{idx:null}).idx}function d(){o="POP";let b=c(),w=b==null?null:b-u;u=b,l&&l({action:o,location:y.location,delta:w})}function h(b,w){o="PUSH";let C=A3(y.location,b,w);u=c()+1;let k=W5(C,u),T=y.createHref(C);try{i.pushState(k,"",T)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(T)}a&&l&&l({action:o,location:y.location,delta:1})}function m(b,w){o="REPLACE";let C=A3(y.location,b,w);u=c();let k=W5(C,u),T=y.createHref(C);i.replaceState(k,"",T),a&&l&&l({action:o,location:y.location,delta:0})}function g(b){let w=s.location.origin!=="null"?s.location.origin:s.location.href,C=typeof b=="string"?b:kb(b);return C=C.replace(/ $/,"%20"),zr(w,`No window.location.(origin|href) available to create URL for href: ${C}`),new URL(C,w)}let y={get action(){return o},get location(){return t(s,i)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(V5,d),l=b,()=>{s.removeEventListener(V5,d),l=null}},createHref(b){return e(s,b)},createURL:g,encodeLocation(b){let w=g(b);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:h,replace:m,go(b){return i.go(b)}};return y}function nX(t,e,n="/"){return Ece(t,e,n,!1)}function Ece(t,e,n,r){let s=typeof e=="string"?ug(e):e,a=Tc(s.pathname||"/",n);if(a==null)return null;let i=rX(t);Ace(i);let o=null;for(let l=0;o==null&&l<i.length;++l){let u=Bce(a);o=Fce(i[l],u,r)}return o}function rX(t,e=[],n=[],r=""){let s=(a,i,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};l.relativePath.startsWith("/")&&(zr(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let u=gc([r,l.relativePath]),c=n.concat(l);a.children&&a.children.length>0&&(zr(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),rX(a.children,e,c,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:jce(u,a.index),routesMeta:c})};return t.forEach((a,i)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))s(a,i);else for(let l of sX(a.path))s(a,i,l)}),e}function sX(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let i=sX(r.join("/")),o=[];return o.push(...i.map(l=>l===""?a:[a,l].join("/"))),s&&o.push(...i),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function Ace(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Lce(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Rce=/^:[\w-]+$/,Oce=3,_ce=2,Dce=1,Pce=10,Mce=-2,G5=t=>t==="*";function jce(t,e){let n=t.split("/"),r=n.length;return n.some(G5)&&(r+=Mce),e&&(r+=_ce),n.filter(s=>!G5(s)).reduce((s,a)=>s+(Rce.test(a)?Oce:a===""?Dce:Pce),r)}function Lce(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Fce(t,e,n=!1){let{routesMeta:r}=t,s={},a="/",i=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,c=a==="/"?e:e.slice(a.length)||"/",d=YS({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),h=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=YS({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),i.push({params:s,pathname:gc([a,d.pathname]),pathnameBase:Gce(gc([a,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(a=gc([a,d.pathnameBase]))}return i}function YS(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=zce(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:d},h)=>{if(c==="*"){let g=o[h]||"";i=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const m=o[h];return d&&!m?u[c]=void 0:u[c]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:i,pattern:t}}function zce(t,e=!1,n=!0){Nu(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Bce(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Nu(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Tc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Uce(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ug(t):t;return{pathname:n?n.startsWith("/")?n:Vce(n,e):e,search:Hce(r),hash:qce(s)}}function Vce(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function $E(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Wce(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function aX(t){let e=Wce(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function iX(t,e,n,r=!1){let s;typeof t=="string"?s=ug(t):(s={...t},zr(!s.pathname||!s.pathname.includes("?"),$E("?","pathname","search",s)),zr(!s.pathname||!s.pathname.includes("#"),$E("#","pathname","hash",s)),zr(!s.search||!s.search.includes("#"),$E("#","search","hash",s)));let a=t===""||s.pathname==="",i=a?"/":s.pathname,o;if(i==null)o=n;else{let d=e.length-1;if(!r&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}o=d>=0?e[d]:"/"}let l=Uce(s,o),u=i&&i!=="/"&&i.endsWith("/"),c=(a||i===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var gc=t=>t.join("/").replace(/\/\/+/g,"/"),Gce=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Hce=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qce=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Kce(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var oX=["POST","PUT","PATCH","DELETE"];new Set(oX);var Xce=["GET",...oX];new Set(Xce);var cg=L.createContext(null);cg.displayName="DataRouter";var WC=L.createContext(null);WC.displayName="DataRouterState";var lX=L.createContext({isTransitioning:!1});lX.displayName="ViewTransition";var Yce=L.createContext(new Map);Yce.displayName="Fetchers";var Qce=L.createContext(null);Qce.displayName="Await";var Du=L.createContext(null);Du.displayName="Navigation";var Px=L.createContext(null);Px.displayName="Location";var Pu=L.createContext({outlet:null,matches:[],isDataRoute:!1});Pu.displayName="Route";var $M=L.createContext(null);$M.displayName="RouteError";function Zce(t,{relative:e}={}){zr(Mx(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=L.useContext(Du),{hash:s,pathname:a,search:i}=jx(t,{relative:e}),o=a;return n!=="/"&&(o=a==="/"?n:gc([n,a])),r.createHref({pathname:o,search:i,hash:s})}function Mx(){return L.useContext(Px)!=null}function Bd(){return zr(Mx(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(Px).location}var uX="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function cX(t){L.useContext(Du).static||L.useLayoutEffect(t)}function Wl(){let{isDataRoute:t}=L.useContext(Pu);return t?dde():Jce()}function Jce(){zr(Mx(),"useNavigate() may be used only in the context of a <Router> component.");let t=L.useContext(cg),{basename:e,navigator:n}=L.useContext(Du),{matches:r}=L.useContext(Pu),{pathname:s}=Bd(),a=JSON.stringify(aX(r)),i=L.useRef(!1);return cX(()=>{i.current=!0}),L.useCallback((l,u={})=>{if(Nu(i.current,uX),!i.current)return;if(typeof l=="number"){n.go(l);return}let c=iX(l,JSON.parse(a),s,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:gc([e,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[e,n,a,s,t])}L.createContext(null);function IM(){let{matches:t}=L.useContext(Pu),e=t[t.length-1];return e?e.params:{}}function jx(t,{relative:e}={}){let{matches:n}=L.useContext(Pu),{pathname:r}=Bd(),s=JSON.stringify(aX(n));return L.useMemo(()=>iX(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function ede(t,e){return dX(t,e)}function dX(t,e,n,r){var C;zr(Mx(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:a}=L.useContext(Du),{matches:i}=L.useContext(Pu),o=i[i.length-1],l=o?o.params:{},u=o?o.pathname:"/",c=o?o.pathnameBase:"/",d=o&&o.route;{let k=d&&d.path||"";fX(u,!d||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let h=Bd(),m;if(e){let k=typeof e=="string"?ug(e):e;zr(c==="/"||((C=k.pathname)==null?void 0:C.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${k.pathname}" was given in the \`location\` prop.`),m=k}else m=h;let g=m.pathname||"/",y=g;if(c!=="/"){let k=c.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(k.length).join("/")}let b=!a&&n&&n.matches&&n.matches.length>0?n.matches:nX(t,{pathname:y});Nu(d||b!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Nu(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=ade(b&&b.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:gc([c,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?c:gc([c,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),i,n,r);return e&&w?L.createElement(Px.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},w):w}function tde(){let t=cde(),e=Kce(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=L.createElement(L.Fragment,null,L.createElement("p",null,"💿 Hey developer 👋"),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:a},"ErrorBoundary")," or"," ",L.createElement("code",{style:a},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:s},n):null,i)}var nde=L.createElement(tde,null),rde=class extends L.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?L.createElement(Pu.Provider,{value:this.props.routeContext},L.createElement($M.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function sde({routeContext:t,match:e,children:n}){let r=L.useContext(cg);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),L.createElement(Pu.Provider,{value:t},n)}function ade(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=n==null?void 0:n.errors;if(a!=null){let l=s.findIndex(u=>u.route.id&&(a==null?void 0:a[u.route.id])!==void 0);zr(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let i=!1,o=-1;if(n)for(let l=0;l<s.length;l++){let u=s[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(o=l),u.route.id){let{loaderData:c,errors:d}=n,h=u.route.loader&&!c.hasOwnProperty(u.route.id)&&(!d||d[u.route.id]===void 0);if(u.route.lazy||h){i=!0,o>=0?s=s.slice(0,o+1):s=[s[0]];break}}}return s.reduceRight((l,u,c)=>{let d,h=!1,m=null,g=null;n&&(d=a&&u.route.id?a[u.route.id]:void 0,m=u.route.errorElement||nde,i&&(o<0&&c===0?(fX("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,g=null):o===c&&(h=!0,g=u.route.hydrateFallbackElement||null)));let y=e.concat(s.slice(0,c+1)),b=()=>{let w;return d?w=m:h?w=g:u.route.Component?w=L.createElement(u.route.Component,null):u.route.element?w=u.route.element:w=l,L.createElement(sde,{match:u,routeContext:{outlet:l,matches:y,isDataRoute:n!=null},children:w})};return n&&(u.route.ErrorBoundary||u.route.errorElement||c===0)?L.createElement(rde,{location:n.location,revalidation:n.revalidation,component:m,error:d,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}function EM(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ide(t){let e=L.useContext(cg);return zr(e,EM(t)),e}function ode(t){let e=L.useContext(WC);return zr(e,EM(t)),e}function lde(t){let e=L.useContext(Pu);return zr(e,EM(t)),e}function AM(t){let e=lde(t),n=e.matches[e.matches.length-1];return zr(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function ude(){return AM("useRouteId")}function cde(){var r;let t=L.useContext($M),e=ode("useRouteError"),n=AM("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function dde(){let{router:t}=ide("useNavigate"),e=AM("useNavigate"),n=L.useRef(!1);return cX(()=>{n.current=!0}),L.useCallback(async(s,a={})=>{Nu(n.current,uX),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...a}))},[t,e])}var H5={};function fX(t,e,n){!e&&!H5[t]&&(H5[t]=!0,Nu(!1,n))}L.memo(fde);function fde({routes:t,future:e,state:n}){return dX(t,void 0,n,e)}function Xs(t){zr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function hde({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:a=!1}){zr(!Mx(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=t.replace(/^\/*/,"/"),o=L.useMemo(()=>({basename:i,navigator:s,static:a,future:{}}),[i,s,a]);typeof n=="string"&&(n=ug(n));let{pathname:l="/",search:u="",hash:c="",state:d=null,key:h="default"}=n,m=L.useMemo(()=>{let g=Tc(l,i);return g==null?null:{location:{pathname:g,search:u,hash:c,state:d,key:h},navigationType:r}},[i,l,u,c,d,h,r]);return Nu(m!=null,`<Router basename="${i}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:L.createElement(Du.Provider,{value:o},L.createElement(Px.Provider,{children:e,value:m}))}function pde({children:t,location:e}){return ede(R3(t),e)}function R3(t,e=[]){let n=[];return L.Children.forEach(t,(r,s)=>{if(!L.isValidElement(r))return;let a=[...e,s];if(r.type===L.Fragment){n.push.apply(n,R3(r.props.children,a));return}zr(r.type===Xs,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zr(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=R3(r.props.children,a)),n.push(i)}),n}var wS="get",SS="application/x-www-form-urlencoded";function GC(t){return t!=null&&typeof t.tagName=="string"}function mde(t){return GC(t)&&t.tagName.toLowerCase()==="button"}function gde(t){return GC(t)&&t.tagName.toLowerCase()==="form"}function yde(t){return GC(t)&&t.tagName.toLowerCase()==="input"}function bde(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function xde(t,e){return t.button===0&&(!e||e==="_self")&&!bde(t)}var Lw=null;function vde(){if(Lw===null)try{new FormData(document.createElement("form"),0),Lw=!1}catch{Lw=!0}return Lw}var wde=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function IE(t){return t!=null&&!wde.has(t)?(Nu(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${SS}"`),null):t}function Sde(t,e){let n,r,s,a,i;if(gde(t)){let o=t.getAttribute("action");r=o?Tc(o,e):null,n=t.getAttribute("method")||wS,s=IE(t.getAttribute("enctype"))||SS,a=new FormData(t)}else if(mde(t)||yde(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(r=l?Tc(l,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||wS,s=IE(t.getAttribute("formenctype"))||IE(o.getAttribute("enctype"))||SS,a=new FormData(o,t),!vde()){let{name:u,type:c,value:d}=t;if(c==="image"){let h=u?`${u}.`:"";a.append(`${h}x`,"0"),a.append(`${h}y`,"0")}else u&&a.append(u,d)}}else{if(GC(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=wS,r=null,s=SS,i=t}return a&&s==="text/plain"&&(i=a,a=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:a,body:i}}function RM(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function Cde(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function kde(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Nde(t,e,n){let r=await Promise.all(t.map(async s=>{let a=e.routes[s.route.id];if(a){let i=await Cde(a,n);return i.links?i.links():[]}return[]}));return Ede(r.flat(1).filter(kde).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function q5(t,e,n,r,s,a){let i=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,o=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return a==="assets"?e.filter((l,u)=>i(l,u)||o(l,u)):a==="data"?e.filter((l,u)=>{var d;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(i(l,u)||o(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Tde(t,e,{includeHydrateFallback:n}={}){return $de(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function $de(t){return[...new Set(t)]}function Ide(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Ede(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let a=JSON.stringify(Ide(s));return n.has(a)||(n.add(a),r.push({key:a,link:s})),r},[])}function Ade(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&Tc(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function hX(){let t=L.useContext(cg);return RM(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Rde(){let t=L.useContext(WC);return RM(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var OM=L.createContext(void 0);OM.displayName="FrameworkContext";function pX(){let t=L.useContext(OM);return RM(t,"You must render this element inside a <HydratedRouter> element"),t}function Ode(t,e){let n=L.useContext(OM),[r,s]=L.useState(!1),[a,i]=L.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:d}=e,h=L.useRef(null);L.useEffect(()=>{if(t==="render"&&i(!0),t==="viewport"){let y=w=>{w.forEach(C=>{i(C.isIntersecting)})},b=new IntersectionObserver(y,{threshold:.5});return h.current&&b.observe(h.current),()=>{b.disconnect()}}},[t]),L.useEffect(()=>{if(r){let y=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(y)}}},[r]);let m=()=>{s(!0)},g=()=>{s(!1),i(!1)};return n?t!=="intent"?[a,h,{}]:[a,h,{onFocus:P0(o,m),onBlur:P0(l,g),onMouseEnter:P0(u,m),onMouseLeave:P0(c,g),onTouchStart:P0(d,m)}]:[!1,h,{}]}function P0(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function _de({page:t,...e}){let{router:n}=hX(),r=L.useMemo(()=>nX(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?L.createElement(Pde,{page:t,matches:r,...e}):null}function Dde(t){let{manifest:e,routeModules:n}=pX(),[r,s]=L.useState([]);return L.useEffect(()=>{let a=!1;return Nde(t,e,n).then(i=>{a||s(i)}),()=>{a=!0}},[t,e,n]),r}function Pde({page:t,matches:e,...n}){let r=Bd(),{manifest:s,routeModules:a}=pX(),{basename:i}=hX(),{loaderData:o,matches:l}=Rde(),u=L.useMemo(()=>q5(t,e,l,s,r,"data"),[t,e,l,s,r]),c=L.useMemo(()=>q5(t,e,l,s,r,"assets"),[t,e,l,s,r]),d=L.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let g=new Set,y=!1;if(e.forEach(w=>{var k;let C=s.routes[w.route.id];!C||!C.hasLoader||(!u.some(T=>T.route.id===w.route.id)&&w.route.id in o&&((k=a[w.route.id])!=null&&k.shouldRevalidate)||C.hasClientLoader?y=!0:g.add(w.route.id))}),g.size===0)return[];let b=Ade(t,i);return y&&g.size>0&&b.searchParams.set("_routes",e.filter(w=>g.has(w.route.id)).map(w=>w.route.id).join(",")),[b.pathname+b.search]},[i,o,r,s,u,e,t,a]),h=L.useMemo(()=>Tde(c,s),[c,s]),m=Dde(c);return L.createElement(L.Fragment,null,d.map(g=>L.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...n})),h.map(g=>L.createElement("link",{key:g,rel:"modulepreload",href:g,...n})),m.map(({key:g,link:y})=>L.createElement("link",{key:g,...y})))}function Mde(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var mX=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mX&&(window.__reactRouterVersion="7.5.0")}catch{}function jde({basename:t,children:e,window:n}){let r=L.useRef();r.current==null&&(r.current=Tce({window:n,v5Compat:!0}));let s=r.current,[a,i]=L.useState({action:s.action,location:s.location}),o=L.useCallback(l=>{L.startTransition(()=>i(l))},[i]);return L.useLayoutEffect(()=>s.listen(o),[s,o]),L.createElement(hde,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:s})}var gX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vt=L.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:a,replace:i,state:o,target:l,to:u,preventScrollReset:c,viewTransition:d,...h},m){let{basename:g}=L.useContext(Du),y=typeof u=="string"&&gX.test(u),b,w=!1;if(typeof u=="string"&&y&&(b=u,mX))try{let P=new URL(window.location.href),R=u.startsWith("//")?new URL(P.protocol+u):new URL(u),O=Tc(R.pathname,g);R.origin===P.origin&&O!=null?u=O+R.search+R.hash:w=!0}catch{Nu(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=Zce(u,{relative:s}),[k,T,N]=Ode(r,h),I=Bde(u,{replace:i,state:o,target:l,preventScrollReset:c,relative:s,viewTransition:d});function A(P){e&&e(P),P.defaultPrevented||I(P)}let D=L.createElement("a",{...h,...N,href:b||C,onClick:w||a?e:A,ref:Mde(m,T),target:l,"data-discover":!y&&n==="render"?"true":void 0});return k&&!y?L.createElement(L.Fragment,null,D,L.createElement(_de,{page:C})):D});Vt.displayName="Link";var Lde=L.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:a,to:i,viewTransition:o,children:l,...u},c){let d=jx(i,{relative:u.relative}),h=Bd(),m=L.useContext(WC),{navigator:g,basename:y}=L.useContext(Du),b=m!=null&&Hde(d)&&o===!0,w=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,C=h.pathname,k=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(C=C.toLowerCase(),k=k?k.toLowerCase():null,w=w.toLowerCase()),k&&y&&(k=Tc(k,y)||k);const T=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let N=C===w||!s&&C.startsWith(w)&&C.charAt(T)==="/",I=k!=null&&(k===w||!s&&k.startsWith(w)&&k.charAt(w.length)==="/"),A={isActive:N,isPending:I,isTransitioning:b},D=N?e:void 0,P;typeof r=="function"?P=r(A):P=[r,N?"active":null,I?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(A):a;return L.createElement(Vt,{...u,"aria-current":D,className:P,ref:c,style:R,to:i,viewTransition:o},typeof l=="function"?l(A):l)});Lde.displayName="NavLink";var Fde=L.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:a,method:i=wS,action:o,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:d,...h},m)=>{let g=Wde(),y=Gde(o,{relative:u}),b=i.toLowerCase()==="get"?"get":"post",w=typeof o=="string"&&gX.test(o),C=k=>{if(l&&l(k),k.defaultPrevented)return;k.preventDefault();let T=k.nativeEvent.submitter,N=(T==null?void 0:T.getAttribute("formmethod"))||i;g(T||k.currentTarget,{fetcherKey:e,method:N,navigate:n,replace:s,state:a,relative:u,preventScrollReset:c,viewTransition:d})};return L.createElement("form",{ref:m,method:b,action:y,onSubmit:r?l:C,...h,"data-discover":!w&&t==="render"?"true":void 0})});Fde.displayName="Form";function zde(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yX(t){let e=L.useContext(cg);return zr(e,zde(t)),e}function Bde(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:a,viewTransition:i}={}){let o=Wl(),l=Bd(),u=jx(t,{relative:a});return L.useCallback(c=>{if(xde(c,e)){c.preventDefault();let d=n!==void 0?n:kb(l)===kb(u);o(t,{replace:d,state:r,preventScrollReset:s,relative:a,viewTransition:i})}},[l,o,u,n,r,e,t,s,a,i])}var Ude=0,Vde=()=>`__${String(++Ude)}__`;function Wde(){let{router:t}=yX("useSubmit"),{basename:e}=L.useContext(Du),n=ude();return L.useCallback(async(r,s={})=>{let{action:a,method:i,encType:o,formData:l,body:u}=Sde(r,e);if(s.navigate===!1){let c=s.fetcherKey||Vde();await t.fetch(c,n,s.action||a,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||i,formEncType:s.encType||o,flushSync:s.flushSync})}else await t.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||i,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function Gde(t,{relative:e}={}){let{basename:n}=L.useContext(Du),r=L.useContext(Pu);zr(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...jx(t||".",{relative:e})},i=Bd();if(t==null){a.search=i.search;let o=new URLSearchParams(a.search),l=o.getAll("index");if(l.some(c=>c==="")){o.delete("index"),l.filter(d=>d).forEach(d=>o.append("index",d));let c=o.toString();a.search=c?`?${c}`:""}}return(!t||t===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:gc([n,a.pathname])),kb(a)}function Hde(t,e={}){let n=L.useContext(lX);zr(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=yX("useViewTransitionState"),s=jx(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=Tc(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=Tc(n.nextLocation.pathname,r)||n.nextLocation.pathname;return YS(s.pathname,i)!=null||YS(s.pathname,a)!=null}new TextEncoder;var bX=FK();const Fw=Un(bX);function xX(t,e){return function(){return t.apply(e,arguments)}}const{toString:qde}=Object.prototype,{getPrototypeOf:_M}=Object,HC=(t=>e=>{const n=qde.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Gl=t=>(t=t.toLowerCase(),e=>HC(e)===t),qC=t=>e=>typeof e===t,{isArray:dg}=Array,Nb=qC("undefined");function Kde(t){return t!==null&&!Nb(t)&&t.constructor!==null&&!Nb(t.constructor)&&ao(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const vX=Gl("ArrayBuffer");function Xde(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&vX(t.buffer),e}const Yde=qC("string"),ao=qC("function"),wX=qC("number"),KC=t=>t!==null&&typeof t=="object",Qde=t=>t===!0||t===!1,CS=t=>{if(HC(t)!=="object")return!1;const e=_M(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Zde=Gl("Date"),Jde=Gl("File"),efe=Gl("Blob"),tfe=Gl("FileList"),nfe=t=>KC(t)&&ao(t.pipe),rfe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ao(t.append)&&((e=HC(t))==="formdata"||e==="object"&&ao(t.toString)&&t.toString()==="[object FormData]"))},sfe=Gl("URLSearchParams"),[afe,ife,ofe,lfe]=["ReadableStream","Request","Response","Headers"].map(Gl),ufe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Lx(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),dg(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const a=n?Object.getOwnPropertyNames(t):Object.keys(t),i=a.length;let o;for(r=0;r<i;r++)o=a[r],e.call(null,t[o],o,t)}}function SX(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const Gf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,CX=t=>!Nb(t)&&t!==Gf;function O3(){const{caseless:t}=CX(this)&&this||{},e={},n=(r,s)=>{const a=t&&SX(e,s)||s;CS(e[a])&&CS(r)?e[a]=O3(e[a],r):CS(r)?e[a]=O3({},r):dg(r)?e[a]=r.slice():e[a]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Lx(arguments[r],n);return e}const cfe=(t,e,n,{allOwnKeys:r}={})=>(Lx(e,(s,a)=>{n&&ao(s)?t[a]=xX(s,n):t[a]=s},{allOwnKeys:r}),t),dfe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),ffe=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},hfe=(t,e,n,r)=>{let s,a,i;const o={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),a=s.length;a-- >0;)i=s[a],(!r||r(i,t,e))&&!o[i]&&(e[i]=t[i],o[i]=!0);t=n!==!1&&_M(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},pfe=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},mfe=t=>{if(!t)return null;if(dg(t))return t;let e=t.length;if(!wX(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},gfe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&_M(Uint8Array)),yfe=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const a=s.value;e.call(t,a[0],a[1])}},bfe=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},xfe=Gl("HTMLFormElement"),vfe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),K5=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),wfe=Gl("RegExp"),kX=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Lx(n,(s,a)=>{let i;(i=e(s,a,t))!==!1&&(r[a]=i||s)}),Object.defineProperties(t,r)},Sfe=t=>{kX(t,(e,n)=>{if(ao(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(ao(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Cfe=(t,e)=>{const n={},r=s=>{s.forEach(a=>{n[a]=!0})};return dg(t)?r(t):r(String(t).split(e)),n},kfe=()=>{},Nfe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Tfe(t){return!!(t&&ao(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const $fe=t=>{const e=new Array(10),n=(r,s)=>{if(KC(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const a=dg(r)?[]:{};return Lx(r,(i,o)=>{const l=n(i,s+1);!Nb(l)&&(a[o]=l)}),e[s]=void 0,a}}return r};return n(t,0)},Ife=Gl("AsyncFunction"),Efe=t=>t&&(KC(t)||ao(t))&&ao(t.then)&&ao(t.catch),NX=((t,e)=>t?setImmediate:e?((n,r)=>(Gf.addEventListener("message",({source:s,data:a})=>{s===Gf&&a===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Gf.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ao(Gf.postMessage)),Afe=typeof queueMicrotask<"u"?queueMicrotask.bind(Gf):typeof process<"u"&&process.nextTick||NX,_e={isArray:dg,isArrayBuffer:vX,isBuffer:Kde,isFormData:rfe,isArrayBufferView:Xde,isString:Yde,isNumber:wX,isBoolean:Qde,isObject:KC,isPlainObject:CS,isReadableStream:afe,isRequest:ife,isResponse:ofe,isHeaders:lfe,isUndefined:Nb,isDate:Zde,isFile:Jde,isBlob:efe,isRegExp:wfe,isFunction:ao,isStream:nfe,isURLSearchParams:sfe,isTypedArray:gfe,isFileList:tfe,forEach:Lx,merge:O3,extend:cfe,trim:ufe,stripBOM:dfe,inherits:ffe,toFlatObject:hfe,kindOf:HC,kindOfTest:Gl,endsWith:pfe,toArray:mfe,forEachEntry:yfe,matchAll:bfe,isHTMLForm:xfe,hasOwnProperty:K5,hasOwnProp:K5,reduceDescriptors:kX,freezeMethods:Sfe,toObjectSet:Cfe,toCamelCase:vfe,noop:kfe,toFiniteNumber:Nfe,findKey:SX,global:Gf,isContextDefined:CX,isSpecCompliantForm:Tfe,toJSONObject:$fe,isAsyncFn:Ife,isThenable:Efe,setImmediate:NX,asap:Afe};function Qt(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}_e.inherits(Qt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_e.toJSONObject(this.config),code:this.code,status:this.status}}});const TX=Qt.prototype,$X={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{$X[t]={value:t}});Object.defineProperties(Qt,$X);Object.defineProperty(TX,"isAxiosError",{value:!0});Qt.from=(t,e,n,r,s,a)=>{const i=Object.create(TX);return _e.toFlatObject(t,i,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),Qt.call(i,t.message,e,n,r,s),i.cause=t,i.name=t.name,a&&Object.assign(i,a),i};const Rfe=null;function _3(t){return _e.isPlainObject(t)||_e.isArray(t)}function IX(t){return _e.endsWith(t,"[]")?t.slice(0,-2):t}function X5(t,e,n){return t?t.concat(e).map(function(s,a){return s=IX(s),!n&&a?"["+s+"]":s}).join(n?".":""):e}function Ofe(t){return _e.isArray(t)&&!t.some(_3)}const _fe=_e.toFlatObject(_e,{},null,function(e){return/^is[A-Z]/.test(e)});function XC(t,e,n){if(!_e.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=_e.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,b){return!_e.isUndefined(b[y])});const r=n.metaTokens,s=n.visitor||c,a=n.dots,i=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&_e.isSpecCompliantForm(e);if(!_e.isFunction(s))throw new TypeError("visitor must be a function");function u(g){if(g===null)return"";if(_e.isDate(g))return g.toISOString();if(!l&&_e.isBlob(g))throw new Qt("Blob is not supported. Use a Buffer instead.");return _e.isArrayBuffer(g)||_e.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function c(g,y,b){let w=g;if(g&&!b&&typeof g=="object"){if(_e.endsWith(y,"{}"))y=r?y:y.slice(0,-2),g=JSON.stringify(g);else if(_e.isArray(g)&&Ofe(g)||(_e.isFileList(g)||_e.endsWith(y,"[]"))&&(w=_e.toArray(g)))return y=IX(y),w.forEach(function(k,T){!(_e.isUndefined(k)||k===null)&&e.append(i===!0?X5([y],T,a):i===null?y:y+"[]",u(k))}),!1}return _3(g)?!0:(e.append(X5(b,y,a),u(g)),!1)}const d=[],h=Object.assign(_fe,{defaultVisitor:c,convertValue:u,isVisitable:_3});function m(g,y){if(!_e.isUndefined(g)){if(d.indexOf(g)!==-1)throw Error("Circular reference detected in "+y.join("."));d.push(g),_e.forEach(g,function(w,C){(!(_e.isUndefined(w)||w===null)&&s.call(e,w,_e.isString(C)?C.trim():C,y,h))===!0&&m(w,y?y.concat(C):[C])}),d.pop()}}if(!_e.isObject(t))throw new TypeError("data must be an object");return m(t),e}function Y5(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function DM(t,e){this._pairs=[],t&&XC(t,this,e)}const EX=DM.prototype;EX.append=function(e,n){this._pairs.push([e,n])};EX.toString=function(e){const n=e?function(r){return e.call(this,r,Y5)}:Y5;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Dfe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function AX(t,e,n){if(!e)return t;const r=n&&n.encode||Dfe;_e.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let a;if(s?a=s(e,n):a=_e.isURLSearchParams(e)?e.toString():new DM(e,n).toString(r),a){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class Q5{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){_e.forEach(this.handlers,function(r){r!==null&&e(r)})}}const RX={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Pfe=typeof URLSearchParams<"u"?URLSearchParams:DM,Mfe=typeof FormData<"u"?FormData:null,jfe=typeof Blob<"u"?Blob:null,Lfe={isBrowser:!0,classes:{URLSearchParams:Pfe,FormData:Mfe,Blob:jfe},protocols:["http","https","file","blob","url","data"]},PM=typeof window<"u"&&typeof document<"u",D3=typeof navigator=="object"&&navigator||void 0,Ffe=PM&&(!D3||["ReactNative","NativeScript","NS"].indexOf(D3.product)<0),zfe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Bfe=PM&&window.location.href||"http://localhost",Ufe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:PM,hasStandardBrowserEnv:Ffe,hasStandardBrowserWebWorkerEnv:zfe,navigator:D3,origin:Bfe},Symbol.toStringTag,{value:"Module"})),Pa={...Ufe,...Lfe};function Vfe(t,e){return XC(t,new Pa.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,a){return Pa.isNode&&_e.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function Wfe(t){return _e.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Gfe(t){const e={},n=Object.keys(t);let r;const s=n.length;let a;for(r=0;r<s;r++)a=n[r],e[a]=t[a];return e}function OX(t){function e(n,r,s,a){let i=n[a++];if(i==="__proto__")return!0;const o=Number.isFinite(+i),l=a>=n.length;return i=!i&&_e.isArray(s)?s.length:i,l?(_e.hasOwnProp(s,i)?s[i]=[s[i],r]:s[i]=r,!o):((!s[i]||!_e.isObject(s[i]))&&(s[i]=[]),e(n,r,s[i],a)&&_e.isArray(s[i])&&(s[i]=Gfe(s[i])),!o)}if(_e.isFormData(t)&&_e.isFunction(t.entries)){const n={};return _e.forEachEntry(t,(r,s)=>{e(Wfe(r),s,n,0)}),n}return null}function Hfe(t,e,n){if(_e.isString(t))try{return(e||JSON.parse)(t),_e.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Fx={transitional:RX,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,a=_e.isObject(e);if(a&&_e.isHTMLForm(e)&&(e=new FormData(e)),_e.isFormData(e))return s?JSON.stringify(OX(e)):e;if(_e.isArrayBuffer(e)||_e.isBuffer(e)||_e.isStream(e)||_e.isFile(e)||_e.isBlob(e)||_e.isReadableStream(e))return e;if(_e.isArrayBufferView(e))return e.buffer;if(_e.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Vfe(e,this.formSerializer).toString();if((o=_e.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return XC(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return a||s?(n.setContentType("application/json",!1),Hfe(e)):e}],transformResponse:[function(e){const n=this.transitional||Fx.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(_e.isResponse(e)||_e.isReadableStream(e))return e;if(e&&_e.isString(e)&&(r&&!this.responseType||s)){const i=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(o){if(i)throw o.name==="SyntaxError"?Qt.from(o,Qt.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pa.classes.FormData,Blob:Pa.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_e.forEach(["delete","get","head","post","put","patch"],t=>{Fx.headers[t]={}});const qfe=_e.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Kfe=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(i){s=i.indexOf(":"),n=i.substring(0,s).trim().toLowerCase(),r=i.substring(s+1).trim(),!(!n||e[n]&&qfe[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Z5=Symbol("internals");function M0(t){return t&&String(t).trim().toLowerCase()}function kS(t){return t===!1||t==null?t:_e.isArray(t)?t.map(kS):String(t)}function Xfe(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const Yfe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function EE(t,e,n,r,s){if(_e.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!_e.isString(e)){if(_e.isString(r))return e.indexOf(r)!==-1;if(_e.isRegExp(r))return r.test(e)}}function Qfe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function Zfe(t,e){const n=_e.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,a,i){return this[r].call(this,e,s,a,i)},configurable:!0})})}let Ii=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function a(o,l,u){const c=M0(l);if(!c)throw new Error("header name must be a non-empty string");const d=_e.findKey(s,c);(!d||s[d]===void 0||u===!0||u===void 0&&s[d]!==!1)&&(s[d||l]=kS(o))}const i=(o,l)=>_e.forEach(o,(u,c)=>a(u,c,l));if(_e.isPlainObject(e)||e instanceof this.constructor)i(e,n);else if(_e.isString(e)&&(e=e.trim())&&!Yfe(e))i(Kfe(e),n);else if(_e.isHeaders(e))for(const[o,l]of e.entries())a(l,o,r);else e!=null&&a(n,e,r);return this}get(e,n){if(e=M0(e),e){const r=_e.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return Xfe(s);if(_e.isFunction(n))return n.call(this,s,r);if(_e.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=M0(e),e){const r=_e.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||EE(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function a(i){if(i=M0(i),i){const o=_e.findKey(r,i);o&&(!n||EE(r,r[o],o,n))&&(delete r[o],s=!0)}}return _e.isArray(e)?e.forEach(a):a(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const a=n[r];(!e||EE(this,this[a],a,e,!0))&&(delete this[a],s=!0)}return s}normalize(e){const n=this,r={};return _e.forEach(this,(s,a)=>{const i=_e.findKey(r,a);if(i){n[i]=kS(s),delete n[a];return}const o=e?Qfe(a):String(a).trim();o!==a&&delete n[a],n[o]=kS(s),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return _e.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&_e.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[Z5]=this[Z5]={accessors:{}}).accessors,s=this.prototype;function a(i){const o=M0(i);r[o]||(Zfe(s,i),r[o]=!0)}return _e.isArray(e)?e.forEach(a):a(e),this}};Ii.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);_e.reduceDescriptors(Ii.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});_e.freezeMethods(Ii);function AE(t,e){const n=this||Fx,r=e||n,s=Ii.from(r.headers);let a=r.data;return _e.forEach(t,function(o){a=o.call(n,a,s.normalize(),e?e.status:void 0)}),s.normalize(),a}function _X(t){return!!(t&&t.__CANCEL__)}function fg(t,e,n){Qt.call(this,t??"canceled",Qt.ERR_CANCELED,e,n),this.name="CanceledError"}_e.inherits(fg,Qt,{__CANCEL__:!0});function DX(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Qt("Request failed with status code "+n.status,[Qt.ERR_BAD_REQUEST,Qt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Jfe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function ehe(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,a=0,i;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),c=r[a];i||(i=u),n[s]=l,r[s]=u;let d=a,h=0;for(;d!==s;)h+=n[d++],d=d%t;if(s=(s+1)%t,s===a&&(a=(a+1)%t),u-i<e)return;const m=c&&u-c;return m?Math.round(h*1e3/m):void 0}}function the(t,e){let n=0,r=1e3/e,s,a;const i=(u,c=Date.now())=>{n=c,s=null,a&&(clearTimeout(a),a=null),t.apply(null,u)};return[(...u)=>{const c=Date.now(),d=c-n;d>=r?i(u,c):(s=u,a||(a=setTimeout(()=>{a=null,i(s)},r-d)))},()=>s&&i(s)]}const QS=(t,e,n=3)=>{let r=0;const s=ehe(50,250);return the(a=>{const i=a.loaded,o=a.lengthComputable?a.total:void 0,l=i-r,u=s(l),c=i<=o;r=i;const d={loaded:i,total:o,progress:o?i/o:void 0,bytes:l,rate:u||void 0,estimated:u&&o&&c?(o-i)/u:void 0,event:a,lengthComputable:o!=null,[e?"download":"upload"]:!0};t(d)},n)},J5=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},eU=t=>(...e)=>_e.asap(()=>t(...e)),nhe=Pa.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Pa.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Pa.origin),Pa.navigator&&/(msie|trident)/i.test(Pa.navigator.userAgent)):()=>!0,rhe=Pa.hasStandardBrowserEnv?{write(t,e,n,r,s,a){const i=[t+"="+encodeURIComponent(e)];_e.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),_e.isString(r)&&i.push("path="+r),_e.isString(s)&&i.push("domain="+s),a===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function she(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function ahe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function PX(t,e,n){let r=!she(e);return t&&(r||n==!1)?ahe(t,e):e}const tU=t=>t instanceof Ii?{...t}:t;function dh(t,e){e=e||{};const n={};function r(u,c,d,h){return _e.isPlainObject(u)&&_e.isPlainObject(c)?_e.merge.call({caseless:h},u,c):_e.isPlainObject(c)?_e.merge({},c):_e.isArray(c)?c.slice():c}function s(u,c,d,h){if(_e.isUndefined(c)){if(!_e.isUndefined(u))return r(void 0,u,d,h)}else return r(u,c,d,h)}function a(u,c){if(!_e.isUndefined(c))return r(void 0,c)}function i(u,c){if(_e.isUndefined(c)){if(!_e.isUndefined(u))return r(void 0,u)}else return r(void 0,c)}function o(u,c,d){if(d in e)return r(u,c);if(d in t)return r(void 0,u)}const l={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(u,c,d)=>s(tU(u),tU(c),d,!0)};return _e.forEach(Object.keys(Object.assign({},t,e)),function(c){const d=l[c]||s,h=d(t[c],e[c],c);_e.isUndefined(h)&&d!==o||(n[c]=h)}),n}const MX=t=>{const e=dh({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:a,headers:i,auth:o}=e;e.headers=i=Ii.from(i),e.url=AX(PX(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let l;if(_e.isFormData(n)){if(Pa.hasStandardBrowserEnv||Pa.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((l=i.getContentType())!==!1){const[u,...c]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];i.setContentType([u||"multipart/form-data",...c].join("; "))}}if(Pa.hasStandardBrowserEnv&&(r&&_e.isFunction(r)&&(r=r(e)),r||r!==!1&&nhe(e.url))){const u=s&&a&&rhe.read(a);u&&i.set(s,u)}return e},ihe=typeof XMLHttpRequest<"u",ohe=ihe&&function(t){return new Promise(function(n,r){const s=MX(t);let a=s.data;const i=Ii.from(s.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:u}=s,c,d,h,m,g;function y(){m&&m(),g&&g(),s.cancelToken&&s.cancelToken.unsubscribe(c),s.signal&&s.signal.removeEventListener("abort",c)}let b=new XMLHttpRequest;b.open(s.method.toUpperCase(),s.url,!0),b.timeout=s.timeout;function w(){if(!b)return;const k=Ii.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),N={data:!o||o==="text"||o==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:k,config:t,request:b};DX(function(A){n(A),y()},function(A){r(A),y()},N),b=null}"onloadend"in b?b.onloadend=w:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(w)},b.onabort=function(){b&&(r(new Qt("Request aborted",Qt.ECONNABORTED,t,b)),b=null)},b.onerror=function(){r(new Qt("Network Error",Qt.ERR_NETWORK,t,b)),b=null},b.ontimeout=function(){let T=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const N=s.transitional||RX;s.timeoutErrorMessage&&(T=s.timeoutErrorMessage),r(new Qt(T,N.clarifyTimeoutError?Qt.ETIMEDOUT:Qt.ECONNABORTED,t,b)),b=null},a===void 0&&i.setContentType(null),"setRequestHeader"in b&&_e.forEach(i.toJSON(),function(T,N){b.setRequestHeader(N,T)}),_e.isUndefined(s.withCredentials)||(b.withCredentials=!!s.withCredentials),o&&o!=="json"&&(b.responseType=s.responseType),u&&([h,g]=QS(u,!0),b.addEventListener("progress",h)),l&&b.upload&&([d,m]=QS(l),b.upload.addEventListener("progress",d),b.upload.addEventListener("loadend",m)),(s.cancelToken||s.signal)&&(c=k=>{b&&(r(!k||k.type?new fg(null,t,b):k),b.abort(),b=null)},s.cancelToken&&s.cancelToken.subscribe(c),s.signal&&(s.signal.aborted?c():s.signal.addEventListener("abort",c)));const C=Jfe(s.url);if(C&&Pa.protocols.indexOf(C)===-1){r(new Qt("Unsupported protocol "+C+":",Qt.ERR_BAD_REQUEST,t));return}b.send(a||null)})},lhe=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const a=function(u){if(!s){s=!0,o();const c=u instanceof Error?u:this.reason;r.abort(c instanceof Qt?c:new fg(c instanceof Error?c.message:c))}};let i=e&&setTimeout(()=>{i=null,a(new Qt(`timeout ${e} of ms exceeded`,Qt.ETIMEDOUT))},e);const o=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(a):u.removeEventListener("abort",a)}),t=null)};t.forEach(u=>u.addEventListener("abort",a));const{signal:l}=r;return l.unsubscribe=()=>_e.asap(o),l}},uhe=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},che=async function*(t,e){for await(const n of dhe(t))yield*uhe(n,e)},dhe=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},nU=(t,e,n,r)=>{const s=che(t,e);let a=0,i,o=l=>{i||(i=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:u,value:c}=await s.next();if(u){o(),l.close();return}let d=c.byteLength;if(n){let h=a+=d;n(h)}l.enqueue(new Uint8Array(c))}catch(u){throw o(u),u}},cancel(l){return o(l),s.return()}},{highWaterMark:2})},YC=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",jX=YC&&typeof ReadableStream=="function",fhe=YC&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),LX=(t,...e)=>{try{return!!t(...e)}catch{return!1}},hhe=jX&&LX(()=>{let t=!1;const e=new Request(Pa.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),rU=64*1024,P3=jX&&LX(()=>_e.isReadableStream(new Response("").body)),ZS={stream:P3&&(t=>t.body)};YC&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ZS[e]&&(ZS[e]=_e.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Qt(`Response type '${e}' is not supported`,Qt.ERR_NOT_SUPPORT,r)})})})(new Response);const phe=async t=>{if(t==null)return 0;if(_e.isBlob(t))return t.size;if(_e.isSpecCompliantForm(t))return(await new Request(Pa.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(_e.isArrayBufferView(t)||_e.isArrayBuffer(t))return t.byteLength;if(_e.isURLSearchParams(t)&&(t=t+""),_e.isString(t))return(await fhe(t)).byteLength},mhe=async(t,e)=>{const n=_e.toFiniteNumber(t.getContentLength());return n??phe(e)},ghe=YC&&(async t=>{let{url:e,method:n,data:r,signal:s,cancelToken:a,timeout:i,onDownloadProgress:o,onUploadProgress:l,responseType:u,headers:c,withCredentials:d="same-origin",fetchOptions:h}=MX(t);u=u?(u+"").toLowerCase():"text";let m=lhe([s,a&&a.toAbortSignal()],i),g;const y=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let b;try{if(l&&hhe&&n!=="get"&&n!=="head"&&(b=await mhe(c,r))!==0){let N=new Request(e,{method:"POST",body:r,duplex:"half"}),I;if(_e.isFormData(r)&&(I=N.headers.get("content-type"))&&c.setContentType(I),N.body){const[A,D]=J5(b,QS(eU(l)));r=nU(N.body,rU,A,D)}}_e.isString(d)||(d=d?"include":"omit");const w="credentials"in Request.prototype;g=new Request(e,{...h,signal:m,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:r,duplex:"half",credentials:w?d:void 0});let C=await fetch(g);const k=P3&&(u==="stream"||u==="response");if(P3&&(o||k&&y)){const N={};["status","statusText","headers"].forEach(P=>{N[P]=C[P]});const I=_e.toFiniteNumber(C.headers.get("content-length")),[A,D]=o&&J5(I,QS(eU(o),!0))||[];C=new Response(nU(C.body,rU,A,()=>{D&&D(),y&&y()}),N)}u=u||"text";let T=await ZS[_e.findKey(ZS,u)||"text"](C,t);return!k&&y&&y(),await new Promise((N,I)=>{DX(N,I,{data:T,headers:Ii.from(C.headers),status:C.status,statusText:C.statusText,config:t,request:g})})}catch(w){throw y&&y(),w&&w.name==="TypeError"&&/fetch/i.test(w.message)?Object.assign(new Qt("Network Error",Qt.ERR_NETWORK,t,g),{cause:w.cause||w}):Qt.from(w,w&&w.code,t,g)}}),M3={http:Rfe,xhr:ohe,fetch:ghe};_e.forEach(M3,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const sU=t=>`- ${t}`,yhe=t=>_e.isFunction(t)||t===null||t===!1,FX={getAdapter:t=>{t=_e.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let a=0;a<e;a++){n=t[a];let i;if(r=n,!yhe(n)&&(r=M3[(i=String(n)).toLowerCase()],r===void 0))throw new Qt(`Unknown adapter '${i}'`);if(r)break;s[i||"#"+a]=r}if(!r){const a=Object.entries(s).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let i=e?a.length>1?`since :
`+a.map(sU).join(`
`):" "+sU(a[0]):"as no adapter specified";throw new Qt("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:M3};function RE(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new fg(null,t)}function aU(t){return RE(t),t.headers=Ii.from(t.headers),t.data=AE.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),FX.getAdapter(t.adapter||Fx.adapter)(t).then(function(r){return RE(t),r.data=AE.call(t,t.transformResponse,r),r.headers=Ii.from(r.headers),r},function(r){return _X(r)||(RE(t),r&&r.response&&(r.response.data=AE.call(t,t.transformResponse,r.response),r.response.headers=Ii.from(r.response.headers))),Promise.reject(r)})}const zX="1.8.4",QC={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{QC[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const iU={};QC.transitional=function(e,n,r){function s(a,i){return"[Axios v"+zX+"] Transitional option '"+a+"'"+i+(r?". "+r:"")}return(a,i,o)=>{if(e===!1)throw new Qt(s(i," has been removed"+(n?" in "+n:"")),Qt.ERR_DEPRECATED);return n&&!iU[i]&&(iU[i]=!0,console.warn(s(i," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(a,i,o):!0}};QC.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function bhe(t,e,n){if(typeof t!="object")throw new Qt("options must be an object",Qt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const a=r[s],i=e[a];if(i){const o=t[a],l=o===void 0||i(o,a,t);if(l!==!0)throw new Qt("option "+a+" must be "+l,Qt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Qt("Unknown option "+a,Qt.ERR_BAD_OPTION)}}const NS={assertOptions:bhe,validators:QC},au=NS.validators;let eh=class{constructor(e){this.defaults=e,this.interceptors={request:new Q5,response:new Q5}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=dh(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:a}=n;r!==void 0&&NS.assertOptions(r,{silentJSONParsing:au.transitional(au.boolean),forcedJSONParsing:au.transitional(au.boolean),clarifyTimeoutError:au.transitional(au.boolean)},!1),s!=null&&(_e.isFunction(s)?n.paramsSerializer={serialize:s}:NS.assertOptions(s,{encode:au.function,serialize:au.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),NS.assertOptions(n,{baseUrl:au.spelling("baseURL"),withXsrfToken:au.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=a&&_e.merge(a.common,a[n.method]);a&&_e.forEach(["delete","get","head","post","put","patch","common"],g=>{delete a[g]}),n.headers=Ii.concat(i,a);const o=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(l=l&&y.synchronous,o.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let c,d=0,h;if(!l){const g=[aU.bind(this),void 0];for(g.unshift.apply(g,o),g.push.apply(g,u),h=g.length,c=Promise.resolve(n);d<h;)c=c.then(g[d++],g[d++]);return c}h=o.length;let m=n;for(d=0;d<h;){const g=o[d++],y=o[d++];try{m=g(m)}catch(b){y.call(this,b);break}}try{c=aU.call(this,m)}catch(g){return Promise.reject(g)}for(d=0,h=u.length;d<h;)c=c.then(u[d++],u[d++]);return c}getUri(e){e=dh(this.defaults,e);const n=PX(e.baseURL,e.url,e.allowAbsoluteUrls);return AX(n,e.params,e.paramsSerializer)}};_e.forEach(["delete","get","head","options"],function(e){eh.prototype[e]=function(n,r){return this.request(dh(r||{},{method:e,url:n,data:(r||{}).data}))}});_e.forEach(["post","put","patch"],function(e){function n(r){return function(a,i,o){return this.request(dh(o||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:i}))}}eh.prototype[e]=n(),eh.prototype[e+"Form"]=n(!0)});let xhe=class BX{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(s=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](s);r._listeners=null}),this.promise.then=s=>{let a;const i=new Promise(o=>{r.subscribe(o),a=o}).then(s);return i.cancel=function(){r.unsubscribe(a)},i},e(function(a,i,o){r.reason||(r.reason=new fg(a,i,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new BX(function(s){e=s}),cancel:e}}};function vhe(t){return function(n){return t.apply(null,n)}}function whe(t){return _e.isObject(t)&&t.isAxiosError===!0}const j3={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(j3).forEach(([t,e])=>{j3[e]=t});function UX(t){const e=new eh(t),n=xX(eh.prototype.request,e);return _e.extend(n,eh.prototype,e,{allOwnKeys:!0}),_e.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return UX(dh(t,s))},n}const Ze=UX(Fx);Ze.Axios=eh;Ze.CanceledError=fg;Ze.CancelToken=xhe;Ze.isCancel=_X;Ze.VERSION=zX;Ze.toFormData=XC;Ze.AxiosError=Qt;Ze.Cancel=Ze.CanceledError;Ze.all=function(e){return Promise.all(e)};Ze.spread=vhe;Ze.isAxiosError=whe;Ze.mergeConfig=dh;Ze.AxiosHeaders=Ii;Ze.formToJSON=t=>OX(_e.isHTMLForm(t)?new FormData(t):t);Ze.getAdapter=FX.getAdapter;Ze.HttpStatusCode=j3;Ze.default=Ze;const{Axios:M0t,AxiosError:j0t,CanceledError:L0t,isCancel:F0t,CancelToken:z0t,VERSION:B0t,all:U0t,Cancel:V0t,isAxiosError:W0t,spread:G0t,toFormData:H0t,AxiosHeaders:q0t,HttpStatusCode:K0t,formToJSON:X0t,getAdapter:Y0t,mergeConfig:Q0t}=Ze,She="http://localhost:5000/api",ni=Ze.create({baseURL:She,headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});ni.interceptors.request.use(t=>{const e=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));ni.interceptors.response.use(t=>t,t=>{var e;return((e=t.response)==null?void 0:e.status)===401&&(localStorage.removeItem("userToken"),localStorage.removeItem("userInfo"),sessionStorage.removeItem("userToken"),sessionStorage.removeItem("userInfo"),window.location.href="/"),Promise.reject(t)});const MM=t=>{if(t)ni.defaults.headers.common.Authorization=`Bearer ${t}`;else{const e=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");e?ni.defaults.headers.common.Authorization=`Bearer ${e}`:delete ni.defaults.headers.common.Authorization}},Che=async()=>{var t;try{return MM(localStorage.getItem("userToken")||sessionStorage.getItem("userToken")),await ni.get("/messages")}catch(e){throw((t=e.response)==null?void 0:t.data)||{message:"Mesajlar alınamadı"}}},khe=async(t,e)=>{var n;try{return MM(localStorage.getItem("userToken")||sessionStorage.getItem("userToken")),await ni.post("/messages",{receiver:t,content:e})}catch(r){throw((n=r.response)==null?void 0:n.data)||{message:"Mesaj gönderilemedi"}}},Nhe=async t=>{var e;try{return MM(localStorage.getItem("userToken")||sessionStorage.getItem("userToken")),await ni.put(`/messages/${t}/read`)}catch(n){throw((e=n.response)==null?void 0:e.data)||{message:"Mesaj okundu olarak işaretlenemedi"}}},The=({onClose:t,onSave:e,initialData:n={}})=>{const[r,s]=L.useState({bodyFat:n.bodyFat||"",neckCircumference:n.neckCircumference||"",waistCircumference:n.waistCircumference||"",hipCircumference:n.hipCircumference||"",chestCircumference:n.chestCircumference||"",bicepCircumference:n.bicepCircumference||"",thighCircumference:n.thighCircumference||"",calfCircumference:n.calfCircumference||"",shoulderWidth:n.shoulderWidth||""}),[a,i]=L.useState(!1),[o,l]=L.useState(null),u=d=>{const{name:h,value:m}=d.target;s(g=>({...g,[h]:m}))},c=async d=>{var h,m,g;d.preventDefault(),i(!0),l(null);try{const y=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");if(!y){l("Oturum süreniz dolmuş. Lütfen tekrar giriş yapın.");return}const b={bodyFat:r.bodyFat?parseFloat(r.bodyFat):null,neckCircumference:r.neckCircumference?parseFloat(r.neckCircumference):null,waistCircumference:r.waistCircumference?parseFloat(r.waistCircumference):null,hipCircumference:r.hipCircumference?parseFloat(r.hipCircumference):null,chestCircumference:r.chestCircumference?parseFloat(r.chestCircumference):null,bicepCircumference:r.bicepCircumference?parseFloat(r.bicepCircumference):null,thighCircumference:r.thighCircumference?parseFloat(r.thighCircumference):null,calfCircumference:r.calfCircumference?parseFloat(r.calfCircumference):null,shoulderWidth:r.shoulderWidth?parseFloat(r.shoulderWidth):null};console.log("Saving physical data:",b);const w=await Ze.put("http://localhost:5000/api/users/physical-data",b,{headers:{Authorization:`Bearer ${y}`,"Content-Type":"application/json"}});if(console.log("Physical data save response:",w.data),w.data){const C=JSON.parse(localStorage.getItem("user")||"{}"),k={...C,physicalData:{...C.physicalData,...w.data.physicalData}};localStorage.setItem("user",JSON.stringify(k)),sessionStorage.setItem("user",JSON.stringify(k)),e(w.data),t()}}catch(y){console.error("Physical data save error:",y),((h=y.response)==null?void 0:h.status)===401?l("Oturum süreniz dolmuş. Lütfen tekrar giriş yapın."):l(((g=(m=y.response)==null?void 0:m.data)==null?void 0:g.message)||"Fiziksel veriler kaydedilirken bir hata oluştu")}finally{i(!1)}};return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center z-50",children:v.jsxs("div",{className:"glass-panel p-6 max-w-md w-full",children:[v.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v.jsx("h3",{className:"text-xl font-bold text-yellow-500",children:"Vücut Ölçüleri"}),v.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-200 transition duration-200",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o&&v.jsx("div",{className:"bg-red-900 bg-opacity-60 text-red-200 p-3 rounded-lg mb-4",children:o}),v.jsx("p",{className:"mb-6 text-gray-300",children:"İlerlemenizi düzgün şekilde takip etmek için vücut ölçülerinizi almamız gerekiyor."}),v.jsxs("form",{className:"space-y-4",onSubmit:c,children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"bodyFat",children:"Vücut Yağ Oranı (%)"}),v.jsx("input",{id:"bodyFat",name:"bodyFat",type:"number",step:"0.1",className:"glass-input w-full p-3",placeholder:"18",value:r.bodyFat,onChange:u,required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"neckCircumference",children:"Boyun Çevresi (cm)"}),v.jsx("input",{id:"neckCircumference",name:"neckCircumference",type:"number",className:"glass-input w-full p-3",placeholder:"35",value:r.neckCircumference,onChange:u,required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"waistCircumference",children:"Bel Çevresi (cm)"}),v.jsx("input",{id:"waistCircumference",name:"waistCircumference",type:"number",className:"glass-input w-full p-3",placeholder:"85",value:r.waistCircumference,onChange:u,required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"hipCircumference",children:"Kalça Çevresi (cm)"}),v.jsx("input",{id:"hipCircumference",name:"hipCircumference",type:"number",className:"glass-input w-full p-3",placeholder:"90",value:r.hipCircumference,onChange:u,required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"chestCircumference",children:"Göğüs Çevresi (cm)"}),v.jsx("input",{id:"chestCircumference",name:"chestCircumference",type:"number",className:"glass-input w-full p-3",placeholder:"95",value:r.chestCircumference,onChange:u,required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"bicepCircumference",children:"Kol Çevresi (cm)"}),v.jsx("input",{id:"bicepCircumference",name:"bicepCircumference",type:"number",className:"glass-input w-full p-3",placeholder:"35",value:r.bicepCircumference,onChange:u,required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"thighCircumference",children:"Bacak Çevresi (cm)"}),v.jsx("input",{id:"thighCircumference",name:"thighCircumference",type:"number",className:"glass-input w-full p-3",placeholder:"55",value:r.thighCircumference,onChange:u,required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"calfCircumference",children:"Baldır Çevresi (cm)"}),v.jsx("input",{id:"calfCircumference",name:"calfCircumference",type:"number",className:"glass-input w-full p-3",placeholder:"35",value:r.calfCircumference,onChange:u,required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"shoulderWidth",children:"Omuz Genişliği (cm)"}),v.jsx("input",{id:"shoulderWidth",name:"shoulderWidth",type:"number",className:"glass-input w-full p-3",placeholder:"45",value:r.shoulderWidth,onChange:u,required:!0})]}),v.jsx("div",{className:"flex justify-end",children:v.jsx("button",{type:"submit",className:"btn-primary py-2 px-4",disabled:a,children:a?"Kaydediliyor...":"Kaydet ve Tamamla"})})]})]})})},$he=({onClose:t,onSave:e})=>{const[n,r]=L.useState(1),[s,a]=L.useState({fullName:"",age:"",gender:"male",height:"",weight:"",goalType:"fat_loss",activityLevel:"moderate"}),[i,o]=L.useState(!1),[l,u]=L.useState(null),c=g=>{const{name:y,value:b}=g.target;a(w=>({...w,[y]:b}))},d=async g=>{var y,b,w;g.preventDefault(),o(!0),u(null);try{const C=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");if(!C){u("Oturum süreniz dolmuş. Lütfen tekrar giriş yapın.");return}if(!s.fullName||!s.age||!s.gender||!s.height||!s.weight){u("Lütfen tüm alanları doldurun");return}const k={fullName:s.fullName.trim(),age:parseInt(s.age),gender:s.gender,height:parseFloat(s.height),weight:parseFloat(s.weight),goalType:s.goalType||"maintenance",activityLevel:s.activityLevel||"moderate"};console.log("Saving profile data:",k);const T=await Ze.put("http://localhost:5000/api/users/profile",k,{headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"}});if(console.log("Profile save response:",T.data),T.data){localStorage.setItem("profileSetupDone","true");const N={...JSON.parse(localStorage.getItem("user")||"{}"),profile:k};localStorage.setItem("user",JSON.stringify(N)),sessionStorage.setItem("user",JSON.stringify(N)),e(k),t()}}catch(C){console.error("Profile save error:",C),((y=C.response)==null?void 0:y.status)===401?u("Oturum süreniz dolmuş. Lütfen tekrar giriş yapın."):u(((w=(b=C.response)==null?void 0:b.data)==null?void 0:w.message)||"Profil kaydedilirken bir hata oluştu")}finally{o(!1)}},h=()=>r(n+1),m=()=>r(n-1);return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg rounded-xl shadow-2xl p-6 max-w-md w-full border border-gray-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v.jsx("h3",{className:"text-xl font-bold text-yellow-500",children:"Profilinizi Oluşturun"}),v.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-200 transition duration-200",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l&&v.jsx("div",{className:"bg-red-900 bg-opacity-60 text-red-200 p-3 rounded-lg mb-4",children:l}),v.jsxs("form",{onSubmit:d,className:"space-y-4",children:[n===1&&v.jsxs(v.Fragment,{children:[v.jsx("p",{className:"text-gray-300 mb-4",children:"FitWeb'e hoş geldiniz! Daha iyi bir deneyim için temel bilgilerinizi paylaşır mısınız?"}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"fullName",children:"Ad Soyad"}),v.jsx("input",{id:"fullName",name:"fullName",type:"text",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",placeholder:"Ad Soyad",value:s.fullName,onChange:c,required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"age",children:"Yaş"}),v.jsx("input",{id:"age",name:"age",type:"number",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",placeholder:"Yaşınız",value:s.age,onChange:c,required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"gender",children:"Cinsiyet"}),v.jsxs("select",{id:"gender",name:"gender",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",value:s.gender,onChange:c,children:[v.jsx("option",{value:"male",children:"Erkek"}),v.jsx("option",{value:"female",children:"Kadın"}),v.jsx("option",{value:"other",children:"Diğer"})]})]}),v.jsx("div",{className:"pt-2 flex justify-end",children:v.jsx("button",{type:"button",onClick:h,className:"bg-yellow-500 text-black font-medium py-2 px-4 rounded-lg hover:bg-yellow-400 transition duration-300",children:"İleri"})})]}),n===2&&v.jsxs(v.Fragment,{children:[v.jsx("p",{className:"text-gray-300 mb-4",children:"Şimdi birkaç temel fiziksel bilginizi ve fitness hedeflerinizi öğrenelim."}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"height",children:"Boy (cm)"}),v.jsx("input",{id:"height",name:"height",type:"number",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",placeholder:"175",value:s.height,onChange:c,required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"weight",children:"Kilo (kg)"}),v.jsx("input",{id:"weight",name:"weight",type:"number",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",placeholder:"70",value:s.weight,onChange:c,required:!0})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"goalType",children:"Fitness Amacınız"}),v.jsxs("select",{id:"goalType",name:"goalType",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",value:s.goalType,onChange:c,children:[v.jsx("option",{value:"fat_loss",children:"Yağ Yakma"}),v.jsx("option",{value:"muscle_gain",children:"Kas Kütlesi Kazanma"}),v.jsx("option",{value:"maintenance",children:"Formumu Koruma"}),v.jsx("option",{value:"endurance",children:"Dayanıklılık Artırma"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"activityLevel",children:"Aktivite Seviyeniz"}),v.jsxs("select",{id:"activityLevel",name:"activityLevel",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",value:s.activityLevel,onChange:c,children:[v.jsx("option",{value:"sedentary",children:"Hareketsiz (Masa başı iş, egzersiz yok)"}),v.jsx("option",{value:"light",children:"Hafif (Haftada 1-3 gün egzersiz)"}),v.jsx("option",{value:"moderate",children:"Orta (Haftada 3-5 gün egzersiz)"}),v.jsx("option",{value:"active",children:"Aktif (Haftada 6-7 gün egzersiz)"}),v.jsx("option",{value:"very_active",children:"Çok Aktif (Günde 2 kez antrenman)"})]})]}),v.jsxs("div",{className:"pt-2 flex justify-between",children:[v.jsx("button",{type:"button",onClick:m,className:"bg-gray-700 text-gray-200 py-2 px-4 rounded-lg hover:bg-gray-600 transition duration-300",children:"Geri"}),v.jsx("button",{type:"submit",className:"bg-yellow-500 text-black font-medium py-2 px-4 rounded-lg hover:bg-yellow-400 transition duration-300",disabled:i,children:i?"Kaydediliyor...":"Profili Oluştur"})]})]}),v.jsx("div",{className:"flex justify-center mt-4",children:v.jsxs("div",{className:"flex space-x-2",children:[v.jsx("div",{className:`h-2 w-8 rounded-full ${n===1?"bg-yellow-500":"bg-gray-600"}`}),v.jsx("div",{className:`h-2 w-8 rounded-full ${n===2?"bg-yellow-500":"bg-gray-600"}`})]})})]})]})})},Ihe=({isOpen:t,onClose:e,onSave:n,onDelete:r,event:s=null})=>{const[a,i]=L.useState({title:"",date:"",type:"workout",description:"",completed:!1}),[o,l]=L.useState(!1),[u,c]=L.useState(null),[d,h]=L.useState(0);L.useEffect(()=>{if(s&&s.multiple&&Array.isArray(s.multiple)){const w=s.multiple[0];h(0),i({title:w.title||"",date:w.date?new Date(w.date).toISOString().split("T")[0]:"",type:w.type||"workout",description:w.description||"",completed:w.completed||!1})}else if(s){const w=s.date?new Date(s.date):new Date;i({title:s.title||"",date:w.toISOString().split("T")[0],type:s.type||"workout",description:s.description||"",completed:s.completed||!1})}else{const w=new Date;i({title:"",date:s!=null&&s.date?new Date(s.date).toISOString().split("T")[0]:w.toISOString().split("T")[0],type:"workout",description:"",completed:!1})}},[s,t]);const m=w=>{if(s&&s.multiple&&s.multiple[w]){const C=s.multiple[w];h(w),i({title:C.title||"",date:C.date?new Date(C.date).toISOString().split("T")[0]:"",type:C.type||"workout",description:C.description||"",completed:C.completed||!1})}},g=w=>{const{name:C,value:k,type:T,checked:N}=w.target;i(I=>({...I,[C]:T==="checkbox"?N:k}))},y=async w=>{w.preventDefault(),l(!0),c(null);try{if(!a.title.trim())throw new Error("Etkinlik başlığı gereklidir");if(!a.date)throw new Error("Tarih gereklidir");const C={...a,date:new Date(a.date).toISOString().split("T")[0]};console.log("Submitting form data:",C),await n(C),e()}catch(C){console.error("Form submission error:",C),c(C.message||"Bir hata oluştu")}finally{l(!1)}};if(!t)return null;const b=s&&s.multiple&&Array.isArray(s.multiple)?s.multiple[d]:s;return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:v.jsxs("div",{className:"bg-gray-900 rounded-xl max-w-md w-full p-6 border border-gray-800 shadow-xl",children:[v.jsx("h2",{className:"text-xl text-yellow-500 font-bold mb-4",children:b&&b._id?"Etkinliği Düzenle":"Yeni Etkinlik Ekle"}),s&&s.multiple&&s.multiple.length>1&&v.jsx("div",{className:"mb-4 flex gap-2",children:s.multiple.map((w,C)=>v.jsx("button",{className:`px-2 py-1 rounded text-xs font-semibold ${d===C?"bg-yellow-500 text-black":"bg-gray-700 text-gray-200"}`,onClick:()=>m(C),children:w.title||`Etkinlik ${C+1}`},w._id||C))}),u&&v.jsx("div",{className:"mb-4 p-3 bg-red-900 bg-opacity-40 text-red-200 rounded-lg",children:u}),v.jsxs("form",{onSubmit:y,children:[v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"title",children:"Etkinlik Başlığı*"}),v.jsx("input",{id:"title",name:"title",type:"text",required:!0,className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",value:a.title,onChange:g,placeholder:"Örn: Bacak Günü"})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"date",children:"Tarih*"}),v.jsx("input",{id:"date",name:"date",type:"date",required:!0,className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",value:a.date,onChange:g})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"type",children:"Etkinlik Türü"}),v.jsxs("select",{id:"type",name:"type",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",value:a.type,onChange:g,children:[v.jsx("option",{value:"workout",children:"Antrenman"}),v.jsx("option",{value:"cardio",children:"Kardiyo"}),v.jsx("option",{value:"meeting",children:"Görüşme"}),v.jsx("option",{value:"other",children:"Diğer"})]})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"description",children:"Açıklama"}),v.jsx("textarea",{id:"description",name:"description",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200 h-24",value:a.description,onChange:g,placeholder:"Etkinlik detayları..."})]}),b&&v.jsxs("div",{className:"mb-4 flex items-center",children:[v.jsx("input",{id:"completed",name:"completed",type:"checkbox",className:"mr-2",checked:a.completed,onChange:g}),v.jsx("label",{className:"text-gray-300 text-sm",htmlFor:"completed",children:"Tamamlandı"})]}),v.jsxs("div",{className:"flex justify-between items-center mt-6 gap-2",children:[b&&b._id&&v.jsx("button",{type:"button",onClick:()=>r(b._id),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-500 transition duration-200",disabled:o,children:"Sil"}),v.jsxs("div",{className:"flex gap-2 ml-auto",children:[v.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-700 rounded-lg hover:bg-gray-800 transition duration-200 text-gray-300",disabled:o,children:"İptal"}),v.jsx("button",{type:"submit",className:"px-4 py-2 bg-yellow-500 text-black font-medium rounded-lg hover:bg-yellow-400 transition duration-300",disabled:o,children:o?"Kaydediliyor...":b&&b._id?"Güncelle":"Kaydet"})]})]})]})]})})},L3=({isOpen:t,onClose:e,children:n})=>t?v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60",onClick:e,children:v.jsxs("div",{className:"relative bg-gray-900 rounded-xl shadow-lg max-w-full",onClick:r=>r.stopPropagation(),children:[v.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-yellow-400 text-2xl font-bold focus:outline-none",onClick:e,"aria-label":"Kapat",children:"×"}),v.jsx("div",{className:"p-4",children:n})]})}):null,VX=L.createContext(),WX=()=>L.useContext(VX),Ehe=({children:t})=>{const[e,n]=L.useState(!1),[r,s]=L.useState(null);return v.jsx(VX.Provider,{value:{isOpen:e,setIsOpen:n,activeChat:r,setActiveChat:s},children:t})},Ahe=[{id:1,name:"Protein Pancake",calories:420,protein:32,carbs:40,fat:10,ingredients:["Yulaf","Protein Tozu","Yumurta","Muz","Tarçın"],time:"Sabah",type:"protein",prepTime:"15 dk"},{id:2,name:"Avokadolu Tam Buğday Tost",calories:380,protein:18,carbs:45,fat:16,ingredients:["Tam Buğday Ekmeği","Avokado","Haşlanmış Yumurta","Pul Biber"],time:"Sabah",type:"balanced",prepTime:"10 dk"},{id:3,name:"Izgara Tavuklu Bowl",calories:520,protein:45,carbs:50,fat:15,ingredients:["Tavuk Göğüs","Esmer Pirinç","Kinoa","Ispanak","Domates","Salata Sosu"],time:"Öğle",type:"protein",prepTime:"25 dk"},{id:4,name:"Ton Balıklı Salata",calories:450,protein:35,carbs:20,fat:25,ingredients:["Ton Balığı","Marul","Salatalık","Zeytin","Yumurta","Zeytinyağı"],time:"Öğle",type:"lowcarb",prepTime:"15 dk"},{id:5,name:"Protein Bar",calories:280,protein:20,carbs:25,fat:8,ingredients:["Yulaf","Protein Tozu","Fıstık Ezmesi","Bal","Kakao"],time:"Ara Öğün",type:"snack",prepTime:"5 dk"},{id:6,name:"Yoğurtlu Smoothie",calories:320,protein:25,carbs:35,fat:6,ingredients:["Süzme Yoğurt","Muz","Çilek","Keten Tohumu"],time:"Ara Öğün",type:"protein",prepTime:"5 dk"},{id:7,name:"Fırında Somon",calories:480,protein:42,carbs:30,fat:22,ingredients:["Somon Fileto","Tatlı Patates","Kuşkonmaz","Limon","Dereotu"],time:"Akşam",type:"recovery",prepTime:"30 dk"},{id:8,name:"Kırmızı Et ve Sebze",calories:550,protein:50,carbs:25,fat:30,ingredients:["Dana Bonfile","Brokoli","Havuç","Mantar","Zeytinyağı"],time:"Akşam",type:"protein",prepTime:"35 dk"},{id:9,name:"Mercimek Köftesi",calories:380,protein:22,carbs:45,fat:12,ingredients:["Kırmızı Mercimek","Bulgur","Soğan","Maydanoz","Salata"],time:"Öğle",type:"vegan",prepTime:"40 dk"},{id:10,name:"Tofu Stir Fry",calories:400,protein:28,carbs:35,fat:18,ingredients:["Tofu","Brokoli","Biber","Mantar","Soya Sosu"],time:"Akşam",type:"vegan",prepTime:"20 dk"},{id:11,name:"Makarna ve Tavuk",calories:580,protein:45,carbs:65,fat:15,ingredients:["Tam Buğday Makarna","Tavuk","Mantar","Krema","Sarımsak"],time:"Akşam",type:"recovery",prepTime:"25 dk"},{id:12,name:"Patatesli Omlet",calories:450,protein:30,carbs:40,fat:18,ingredients:["Yumurta","Haşlanmış Patates","Peynir","Yeşillik"],time:"Sabah",type:"recovery",prepTime:"20 dk"},{id:13,name:"Wraplı Tavuk",calories:480,protein:38,carbs:45,fat:16,ingredients:["Tam Buğday Tortilla","Tavuk","Marul","Domates","Yoğurt Sos"],time:"Öğle",type:"quick",prepTime:"15 dk"},{id:14,name:"Kinoa Salatası",calories:420,protein:22,carbs:50,fat:15,ingredients:["Kinoa","Nar","Ispanak","Badem","Zeytinyağı"],time:"Öğle",type:"quick",prepTime:"20 dk"},{id:15,name:"Kuruyemişli Karışım",calories:600,protein:25,carbs:30,fat:45,ingredients:["Badem","Ceviz","Fındık","Kuru Üzüm","Kuru Kayısı"],time:"Ara Öğün",type:"highcal",prepTime:"5 dk"},{id:16,name:"Fıstık Ezmeli Sandviç",calories:550,protein:20,carbs:45,fat:35,ingredients:["Tam Buğday Ekmeği","Fıstık Ezmesi","Muz","Bal"],time:"Ara Öğün",type:"highcal",prepTime:"5 dk"},{id:17,name:"Sebze Çorbası",calories:280,protein:15,carbs:40,fat:6,ingredients:["Kabak","Havuç","Soğan","Sarımsak","Tavuk Suyu"],time:"Akşam",type:"lowcal",prepTime:"30 dk"},{id:18,name:"Izgara Balık",calories:350,protein:40,carbs:15,fat:12,ingredients:["Levrek","Limon","Roka","Kırmızı Soğan"],time:"Akşam",type:"lowcal",prepTime:"20 dk"},{id:19,name:"Antrenman Sonrası Shake",calories:400,protein:35,carbs:45,fat:8,ingredients:["Whey Protein","Muz","Yulaf","Badem Sütü"],time:"Antrenman Sonrası",type:"postworkout",prepTime:"5 dk"},{id:20,name:"Gece Proteini",calories:320,protein:40,carbs:15,fat:12,ingredients:["Süzme Peynir","Keten Tohumu","Ceviz","Tarçın"],time:"Gece",type:"casien",prepTime:"5 dk"}];Ze.defaults.withCredentials=!0;Ze.defaults.headers.common["Content-Type"]="application/json";Ze.defaults.headers.common.Accept="application/json";Ze.defaults.baseURL="http://localhost:5000";const Rhe=()=>{try{const t=localStorage.getItem("userToken"),e=sessionStorage.getItem("userToken");console.log("Token Debug:",{localToken:t,sessionToken:e,tokenValue:t||e});const n=t||e;return n?`Bearer ${n}`:(console.error("No token found in storage"),null)}catch(t){return console.error("Error getting auth token:",t),null}},OE=()=>{try{localStorage.removeItem("userToken"),sessionStorage.removeItem("userToken")}catch(t){console.error("Error clearing auth data:",t)}},Ohe=()=>{var Rs,Ha,ml,ia,wa,Sa,Vs,lr,wo,So,Ca,Nr,Ws,fi,Co,gl,Ui,hi,yr,ko,Vi,Pr,pi,yl,Ye,ct,qt,dn,jn,kn,Hr,qr,Jn,wr,qa,ka,Ka,Xa,Jl,No,mi;const[t,e]=L.useState(null),[n,r]=L.useState(!0),[s,a]=L.useState(null),[i,o]=L.useState([]),[l,u]=L.useState(new Date),[c,d]=L.useState(new Date),[h,m]=L.useState(!1),[g,y]=L.useState(null),[b,w]=L.useState(!1),[C,k]=L.useState(!1),[T,N]=L.useState(null),[I,A]=L.useState(!0),[D,P]=L.useState(!0),[R,O]=L.useState(!0),[F,z]=L.useState(!1),[V,W]=L.useState([]),[j,q]=L.useState([]),[Y,Q]=L.useState([]),[H,ee]=L.useState(0),[te,ne]=L.useState(!1),[he,Se]=L.useState(null),[Ie,Qe]=L.useState(6),[Ve,$e]=L.useState("all"),[We,ze]=L.useState([]),[ke,et]=L.useState(null),[Je,Re]=L.useState(null),Ke=Wl(),{setIsOpen:xe,setActiveChat:De}=WX(),[at,Xe]=L.useState(Date.now()),[Nt,Be]=L.useState(0),[Tt,Ot]=L.useState([]),Wn=async()=>{localStorage.removeItem("user"),sessionStorage.removeItem("user"),Ke("/")},rn=async()=>{var de,He;try{r(!0),a(null);const lt=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");if(!lt){console.log("No token found, redirecting to login"),Ke("/");return}console.log("Fetching user data with token:",lt);const yt=await Ze.get("http://localhost:5000/api/users/profile",{headers:{Authorization:`Bearer ${lt}`}});if(console.log("API response:",yt.data),yt.data){e(yt.data);const Ht=yt.data.profile&&yt.data.profile.height&&yt.data.profile.weight&&yt.data.profile.age&&yt.data.profile.gender,sn=yt.data.physicalData&&yt.data.physicalData.bodyFat!==void 0&&yt.data.physicalData.waistCircumference!==void 0&&yt.data.physicalData.neckCircumference!==void 0&&yt.data.physicalData.hipCircumference!==void 0;console.log("Profile data check:",{hasProfileData:Ht,hasPhysicalData:sn});const Os={...JSON.parse(localStorage.getItem("user")||sessionStorage.getItem("user")||"{}"),...yt.data};if(localStorage.setItem("user",JSON.stringify(Os)),sessionStorage.setItem("user",JSON.stringify(Os)),Ht&&sn?(localStorage.setItem("profileSetupDone","true"),P(!1),z(!1),O(!1),A(!1)):Ht?sn||(console.log("Showing physical data popup"),z(!0),A(!0)):(console.log("Showing profile setup popup"),P(!0),O(!0)),(de=yt.data.profile)!=null&&de.weight){const Ya=document.querySelector(".progress-card");if(Ya){const as=Ya.querySelector("[data-weight-value]");as&&(as.textContent=`${yt.data.profile.weight} kg`)}}}}catch(lt){console.error("Error fetching user data:",lt),((He=lt.response)==null?void 0:He.status)===401?(a("Oturum süreniz dolmuş. Lütfen tekrar giriş yapın."),OE(),setTimeout(()=>{Ke("/")},2e3)):a("Veriler yüklenirken bir hata oluştu. Lütfen sayfayı yenileyin.")}finally{r(!1)}};L.useEffect(()=>{(async()=>{try{await rn()}catch(He){console.error("Error initializing data:",He),a("Veriler yüklenirken bir hata oluştu. Lütfen sayfayı yenileyin.")}})()},[]),L.useEffect(()=>{(()=>{Rhe()||(console.error("No token found on page load"),a("Oturum süreniz dolmuş. Lütfen tekrar giriş yapın."),OE(),setTimeout(()=>{Ke("/")},2e3))})()},[Ke]);const cn=async de=>{var He,lt,yt;try{const Ht=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");if(!Ht){a("Oturum süreniz dolmuş. Lütfen tekrar giriş yapın.");return}const sn={fullName:de.fullName.trim(),age:parseInt(de.age),gender:de.gender,height:parseFloat(de.height),weight:parseFloat(de.weight),goalType:de.goalType||"maintenance",activityLevel:de.activityLevel||"moderate"},An=await Ze.put("http://localhost:5000/api/users/profile",sn,{headers:{Authorization:`Bearer ${Ht}`,"Content-Type":"application/json"}});An.data&&(e(An.data),localStorage.setItem("user",JSON.stringify(An.data)),sessionStorage.setItem("user",JSON.stringify(An.data)),localStorage.setItem("profileSetupDone","true"),O(!1),P(!1))}catch(Ht){if(console.error("Profile save error:",Ht),((He=Ht.response)==null?void 0:He.status)===401)a("Oturum süreniz dolmuş. Lütfen tekrar giriş yapın."),OE(),setTimeout(()=>{Ke("/")},2e3);else{const sn=((yt=(lt=Ht.response)==null?void 0:lt.data)==null?void 0:yt.message)||"Profil kaydedilirken bir hata oluştu";a(sn)}}};L.useEffect(()=>{(async()=>{var He;if(((He=t==null?void 0:t.userType)==null?void 0:He.toLowerCase())==="coach")try{const lt=await ni.get("/coaches/athletes");q(lt.data)}catch(lt){console.error("Sporcular alınamadı:",lt)}})()},[t]);const Jt=async()=>{try{ne(!0),Se(null);const de=await ni.get(`/events?month=${c.getMonth()+1}&year=${c.getFullYear()}`);console.log("Fetched events:",de.data);const He=new Date().toISOString().split("T")[0],lt=[];for(const yt of de.data){const Ht=new Date(yt.date).toISOString().split("T")[0];if(Ht<He)try{await ni.delete(`/events/${yt._id}`)}catch(sn){console.error("Otomatik silinemeyen etkinlik:",yt,sn)}else lt.push({...yt,date:Ht})}o(lt),ne(!1)}catch(de){console.error("Events fetch error:",de),Se("Etkinlikler yüklenemedi"),ne(!1)}},Mn=(de,He)=>new Date(de,He+1,0).getDate(),Ua=(de,He)=>new Date(de,He,1).getDay(),Li=()=>{d(new Date(c.getFullYear(),c.getMonth()-1,1))},cl=()=>{d(new Date(c.getFullYear(),c.getMonth()+1,1))},ms=de=>{const He=c.getFullYear(),lt=c.getMonth(),yt=new Date(He,lt,de,12,0,0);u(yt);const Ht=yt.toISOString().split("T")[0],sn=i.filter(An=>An.date===Ht);sn.length===1?y(sn[0]):sn.length>1?y({date:yt,multiple:sn}):y({date:yt}),m(!0)},Va=de=>{y(de),m(!0)},aa=async de=>{var He,lt,yt,Ht,sn;try{const An={...de,date:new Date(de.date).toISOString().split("T")[0]};if(console.log("Sending event data:",An),g&&g._id)await ni.put(`/events/${g._id}`,An);else{const{_id:Os,...Ya}=An;await ni.post("/events",Ya)}await Jt(),y(null),m(!1)}catch(An){console.error("Event save error details:",{message:An.message,response:(He=An.response)==null?void 0:He.data,status:(lt=An.response)==null?void 0:lt.status,data:(yt=An.response)==null?void 0:yt.data}),a(((sn=(Ht=An.response)==null?void 0:Ht.data)==null?void 0:sn.message)||"Etkinlik kaydedilemedi")}},dl=de=>{switch(de){case"cardio":return"bg-blue-500";case"workout":return"bg-green-500";case"nutrition":return"bg-yellow-500";case"meeting":return"bg-purple-500";case"other":return"bg-pink-500";default:return"bg-gray-500"}},Fi=Ahe.filter(de=>Ve==="all"?!0:Ve==="protein"?de.type.includes("protein"):Ve==="vegan"?de.type==="vegan":Ve==="quick"?de.type==="quick":!0);L.useEffect(()=>{(async()=>{try{const lt={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}},yt=await Ze.get("http://localhost:5000/api/friends/requests",lt);W(yt.data),console.log("Dashboard - Gelen istekler:",yt.data)}catch(He){console.error("Dashboard - Arkadaşlık istekleri alınamadı:",He),W([])}})()},[]);const Yl=async de=>{try{const He=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");await Ze.post(`http://localhost:5000/api/friends/accept/${de}`,{},{headers:{Authorization:`Bearer ${He}`}}),W(lt=>lt.filter(yt=>yt._id!==de))}catch(He){alert("İstek kabul edilirken hata oluştu."),console.error(He)}},Wa=async de=>{try{const He=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");await Ze.delete(`http://localhost:5000/api/friends/reject/${de}`,{headers:{Authorization:`Bearer ${He}`}}),W(lt=>lt.filter(yt=>yt._id!==de))}catch(He){console.error(He),a("İstek reddedilirken hata oluştu.")}};L.useEffect(()=>{(async()=>{var He;if(((He=t==null?void 0:t.userType)==null?void 0:He.toLowerCase())==="coach")try{const yt={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}},Ht=await Ze.get("http://localhost:5000/api/coaches/athlete-requests",yt);ze(Ht.data)}catch{ze([])}})()},[t]);const zi=async(de,He)=>{try{const lt=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");await Ze.post(`http://localhost:5000/api/coaches/athlete-requests/${de}/accept`,{},{headers:{Authorization:`Bearer ${lt}`}}),Ot(yt=>yt.map(Ht=>Ht._id===He?{...Ht,status:"accepted"}:Ht))}catch{a("İstek kabul edilirken hata oluştu.")}},fl=async(de,He)=>{try{const lt=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");Ot(yt=>yt.filter(Ht=>Ht._id!==He));try{await Ze.post(`http://localhost:5000/api/coaches/athlete-relationships/${de}/reject`,{},{headers:{Authorization:`Bearer ${lt}`}})}catch(yt){console.error("Backend'de reddetme hatası:",yt)}a(null)}catch(lt){console.error("İstek reddedilirken hata oluştu:",lt),a("İstek reddedilirken hata oluştu.")}};L.useEffect(()=>{(async()=>{try{const He=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");if(!He)return;const lt=await Ze.get("http://localhost:5000/api/athletes/streak",{headers:{Authorization:`Bearer ${He}`}});Be(lt.data.streak)}catch{Be(0)}})()},[]),L.useEffect(()=>{var de;((de=t==null?void 0:t.userType)==null?void 0:de.toLowerCase())==="coach"&&(async()=>{try{const lt=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");if(!lt)return;const yt={headers:{Authorization:`Bearer ${lt}`}},Ht=await Ze.get("http://localhost:5000/api/coaches/athletes",yt);Ot(Ht.data)}catch(lt){Ot([]),console.error("Sporcular alınamadı:",lt)}})()},[t]);const Bi=de=>{switch(de){case"muscle_gain":return["protein","recovery","highcal","postworkout"];case"fat_loss":return["lowcal","lowcarb","vegan","quick"];case"maintenance":return["balanced","quick","vegan","protein"];case"endurance":return["recovery","highcal","quick","protein"];default:return[]}},Ql=((Rs=t==null?void 0:t.profile)==null?void 0:Rs.goalType)||"maintenance",Zl=Bi(Ql),[Ga,xo]=L.useState(()=>{const de=localStorage.getItem("favoriteMeals");return de?JSON.parse(de):[]}),hl=de=>{xo(He=>{let lt;return He.includes(de)?lt=He.filter(yt=>yt!==de):lt=[...He,de],localStorage.setItem("favoriteMeals",JSON.stringify(lt)),lt})},[vo,pl]=L.useState({}),xa=(de,He)=>{pl(lt=>({...lt,[de]:He}))},Qn=async de=>{try{await ni.delete(`/events/${de}`),await Jt(),m(!1),y(null)}catch{a("Etkinlik silinemedi")}};if(L.useEffect(()=>{Jt()},[]),n)return v.jsx("div",{className:"flex items-center justify-center min-h-screen",children:v.jsx("div",{className:"text-primary text-xl",children:"Yükleniyor..."})});if(s)return v.jsx("div",{className:"flex items-center justify-center min-h-screen",children:v.jsx("div",{className:"text-red-500 text-xl",children:s})});const Wr=c.getFullYear(),Gr=c.getMonth();Mn(Wr,Gr),Ua(Wr,Gr),i.filter(de=>new Date(de.date).toDateString()===l.toDateString());const va=de=>{const He=new Date(de),lt=new Date;return He.getDate()===lt.getDate()&&He.getMonth()===lt.getMonth()&&He.getFullYear()===lt.getFullYear()?`Bugün, ${He.getHours().toString().padStart(2,"0")}:${He.getMinutes().toString().padStart(2,"0")}`:`${He.getDate()}.${He.getMonth()+1}.${He.getFullYear()}, ${He.getHours().toString().padStart(2,"0")}:${He.getMinutes().toString().padStart(2,"0")}`},Uu=de=>({fat_loss:"Yağ Yakma",muscle_gain:"Kas Kütlesi Kazanma",maintenance:"Mevcut Formu Koruma",endurance:"Dayanıklılık Artırma"})[de]||"Belirlenmemiş";function Zn(de){if(!de||typeof de!="object")return"";const{value:He,type:lt}=de;return lt==="day"?`${He} günlük program`:lt==="week"?`${He} haftalık program`:lt==="month"?`${He} aylık program`:""}return v.jsxs("div",{className:"pt-4 pb-20 md:pb-6 px-4",children:[v.jsx("header",{className:"bg-gray-900 bg-opacity-70 backdrop-blur-md text-white p-4 shadow-lg border-b border-gray-800 mb-6",children:v.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[v.jsx("h1",{className:"text-2xl font-bold text-yellow-500",children:"FitWeb"}),v.jsxs("nav",{className:"space-x-4 hidden md:block",children:[v.jsx(Vt,{to:"/profile",className:"px-3 py-1 rounded hover:bg-gray-800 transition duration-300",children:"Profil"}),v.jsx("button",{className:"px-3 py-1 bg-yellow-500 text-black font-medium rounded hover:bg-yellow-400 transition duration-300",onClick:Wn,children:"Çıkış"})]})]})}),I&&!F&&v.jsx("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg p-4 mb-6 border-l-4 border-yellow-500 rounded-r-lg shadow-lg",children:v.jsxs("div",{className:"flex items-start",children:[v.jsx("div",{className:"flex-shrink-0 mt-1",children:v.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),v.jsxs("div",{className:"ml-3",children:[v.jsx("h3",{className:"text-sm font-medium text-yellow-500",children:"Vücut ölçülerinizi tamamlayın"}),v.jsx("div",{className:"mt-1 text-sm text-gray-300",children:v.jsx("p",{children:"İlerlemenizi doğru şekilde takip etmek için fiziksel ölçülerinizi girmemiz gerekiyor."})}),v.jsx("div",{className:"mt-2",children:v.jsx("button",{type:"button",className:"bg-yellow-500 text-black font-medium py-1 px-3 text-sm rounded hover:bg-yellow-400 transition duration-300",onClick:()=>z(!0),children:"Şimdi Tamamla"})})]})]})}),D&&v.jsx($he,{onClose:()=>P(!1),onSave:cn,userType:(t==null?void 0:t.userType)||"athlete"}),F&&v.jsx(The,{onClose:()=>z(!1),onSave:handlePhysicalDataSave,initialData:{...t==null?void 0:t.physicalData,height:((Ha=t==null?void 0:t.physicalData)==null?void 0:Ha.height)||((ml=t==null?void 0:t.profile)==null?void 0:ml.height),weight:((ia=t==null?void 0:t.physicalData)==null?void 0:ia.weight)||((wa=t==null?void 0:t.profile)==null?void 0:wa.weight)}}),v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg rounded-xl shadow-lg p-6 mb-6 border border-gray-800",children:[v.jsxs("h2",{className:"text-2xl font-bold mb-2 text-yellow-500",children:["Hoş Geldiniz, ",((Sa=t==null?void 0:t.profile)==null?void 0:Sa.fullName)||"Sporcu"]}),v.jsxs("p",{className:"text-gray-400",children:["Bugünkü önerin:"," ",v.jsx("span",{className:"text-yellow-400",children:"Alt vücut güçlendirme"})]}),Nt>0&&v.jsxs("div",{className:"mt-2 flex items-center text-yellow-500 font-semibold text-lg",children:[v.jsx("span",{className:"mr-2",children:"🔥"}),Nt," gün üst üste antrenman!"]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg p-6 rounded-xl border border-gray-800 shadow-lg transition-all duration-300 hover:shadow-yellow-900/20",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("h3",{className:"text-xl font-semibold text-gray-100",children:"İlerleme Durumu"}),v.jsx("div",{className:"p-2 bg-yellow-500 rounded-full",children:v.jsx("svg",{className:"w-5 h-5 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"flex justify-between mb-1",children:[v.jsx("span",{className:"text-gray-400 text-sm",children:"Kilo"}),v.jsxs("span",{className:"text-gray-300 text-sm",children:[((Vs=t==null?void 0:t.physicalData)==null?void 0:Vs.weight)||"--"," kg",((lr=t==null?void 0:t.physicalData)==null?void 0:lr.weightChange)!==void 0&&((wo=t==null?void 0:t.physicalData)==null?void 0:wo.weightChange)!==null&&v.jsxs("span",{className:`ml-1 ${t.physicalData.weightChange>0?"text-red-400":"text-green-400"}`,children:["(",t.physicalData.weightChange>0?"+":"",t.physicalData.weightChange,"kg)"]})]})]}),v.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:v.jsx("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:"70%"}})})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"flex justify-between mb-1",children:[v.jsx("span",{className:"text-gray-400 text-sm",children:"Yağ Oranı"}),v.jsxs("span",{className:"text-gray-300 text-sm",children:[((So=t==null?void 0:t.physicalData)==null?void 0:So.bodyFat)||"--","%",((Ca=t==null?void 0:t.physicalData)==null?void 0:Ca.bodyFatChange)!==void 0&&((Nr=t==null?void 0:t.physicalData)==null?void 0:Nr.bodyFatChange)!==null&&v.jsxs("span",{className:`ml-1 ${t.physicalData.bodyFatChange>0?"text-red-400":"text-green-400"}`,children:["(",t.physicalData.bodyFatChange>0?"+":"",t.physicalData.bodyFatChange,"%)"]})]})]}),v.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:v.jsx("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:"60%"}})})]}),v.jsx("div",{children:v.jsxs("div",{className:"flex justify-between mb-1",children:[v.jsx("span",{className:"text-gray-400 text-sm",children:"Boy"}),v.jsxs("span",{className:"text-gray-300 text-sm",children:[((Ws=t==null?void 0:t.physicalData)==null?void 0:Ws.height)||"--"," cm",((fi=t==null?void 0:t.physicalData)==null?void 0:fi.heightChange)!==void 0&&((Co=t==null?void 0:t.physicalData)==null?void 0:Co.heightChange)!==null&&v.jsxs("span",{className:`ml-1 ${t.physicalData.heightChange>0?"text-green-400":t.physicalData.heightChange<0?"text-red-400":"text-green-400"}`,children:["(",t.physicalData.heightChange>0?"+":"",t.physicalData.heightChange,"cm)"]})]})]})}),((gl=t==null?void 0:t.physicalData)==null?void 0:gl.bmi)&&v.jsx("div",{children:v.jsxs("div",{className:"flex justify-between mb-1",children:[v.jsx("span",{className:"text-gray-400 text-sm",children:"BMI"}),v.jsxs("span",{className:"text-gray-300 text-sm",children:[t.physicalData.bmi.toFixed(1),((Ui=t==null?void 0:t.physicalData)==null?void 0:Ui.bmiChange)!==void 0&&((hi=t==null?void 0:t.physicalData)==null?void 0:hi.bmiChange)!==null&&v.jsxs("span",{className:`ml-1 ${t.physicalData.bmiChange>0?"text-red-400":"text-green-400"}`,children:["(",t.physicalData.bmiChange>0?"+":"",t.physicalData.bmiChange.toFixed(1),")"]})]})]})})]}),v.jsx("div",{className:"mt-4",children:v.jsx(Vt,{to:"/progress-history",className:"text-yellow-500 text-sm font-semibold hover:text-yellow-400 transition duration-200",children:"Tüm İstatistikleri Gör →"})})]}),(t==null?void 0:t.userType)==="athlete"&&v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg p-6 rounded-xl border border-gray-800 shadow-lg transition-all duration-300 hover:shadow-yellow-900/20",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("h3",{className:"text-xl font-semibold text-gray-100",children:"Antrenman Programı"}),v.jsx("div",{className:"p-2 bg-yellow-500 rounded-full",children:v.jsx("svg",{className:"w-5 h-5 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]}),v.jsxs("div",{className:"bg-gray-800 bg-opacity-40 rounded-lg p-4 mb-4",children:[v.jsx("p",{className:"text-gray-300 text-sm mb-1",children:"Aktif Program:"}),v.jsx("p",{className:"text-yellow-400 font-medium mb-3",children:((yr=t==null?void 0:t.trainingProgram)==null?void 0:yr.name)||"Tanımlı program yok"}),((ko=t==null?void 0:t.trainingProgram)==null?void 0:ko.programDays)&&t.trainingProgram.programDays.length>0&&v.jsxs("div",{className:"mb-1 text-sm text-gray-300",children:[v.jsxs("span",{className:"font-semibold text-yellow-400",children:["Günler:"," "]}),v.jsx("span",{children:t.trainingProgram.programDays.sort((de,He)=>de-He).map(de=>["Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi","Pazar"][de-1]).join(", ")})]}),((Vi=t==null?void 0:t.trainingProgram)==null?void 0:Vi.workouts)&&(()=>{const de=new Date().getDay(),He=de===0?7:de;console.log("Bugün:",de,"Bugünün indeksi:",He,"Program günleri:",t.trainingProgram.workouts.map(yt=>yt.day));const lt=t.trainingProgram.workouts.find(yt=>Number(yt.day)===He);return lt?v.jsxs("div",{className:"mt-2",children:[v.jsx("span",{className:"text-gray-400 text-sm",children:"Bugünkü antrenman:"}),v.jsxs("div",{className:"flex items-center mt-1",children:[v.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full mr-2"}),v.jsxs("span",{className:"text-gray-200 font-semibold",children:[["Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi","Pazar"][lt.day-1]," ","Antrenmanı"]})]}),v.jsx("div",{className:"text-sm text-gray-400 mt-1",children:lt.exercises&&lt.exercises.length>0?lt.exercises.map(yt=>yt.name).join(", "):"Egzersiz eklenmemiş"})]}):v.jsx("div",{className:"mt-2",children:v.jsx("span",{className:"text-gray-400 text-sm",children:"Bugün programda antrenman yok"})})})()]}),v.jsx("div",{className:"bg-gray-800 bg-opacity-40 rounded-lg p-3",children:v.jsxs("div",{className:"flex items-center",children:[v.jsx("svg",{className:"w-4 h-4 text-yellow-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),v.jsx("p",{className:"text-gray-300",children:(Pr=t==null?void 0:t.trainingProgram)!=null&&Pr.duration?Zn(t.trainingProgram.duration):`${((yl=(pi=t==null?void 0:t.trainingProgram)==null?void 0:pi.workouts)==null?void 0:yl.length)||0} günlük program`})]})}),v.jsx("div",{className:"mt-4",children:v.jsx(Vt,{to:"/training-programs",className:"text-yellow-500 text-sm font-semibold hover:text-yellow-400 transition duration-200",children:"Programı Görüntüle →"})})]}),v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg p-6 rounded-xl border border-gray-800 shadow-lg transition-all duration-300 hover:shadow-yellow-900/20",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("h3",{className:"text-xl font-semibold text-gray-100",children:"Arkadaşlık İstekleri"}),v.jsx("div",{className:"p-2 bg-yellow-500 rounded-full",children:v.jsx("svg",{className:"w-5 h-5 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})})]}),V.length>0?v.jsxs("div",{className:"bg-gray-800 bg-opacity-40 rounded-lg p-4 mb-4",children:[v.jsx("p",{className:"text-gray-300 text-sm mb-1",children:"Bekleyen istekler:"}),v.jsxs("p",{className:"text-yellow-400 font-medium mb-3",children:[V.length," yeni istek"]}),v.jsx("div",{children:V.map(de=>{var He;return v.jsxs("div",{className:"flex items-center justify-between bg-gray-900 bg-opacity-60 border border-gray-700 rounded-lg px-3 py-2 mb-2 shadow-sm",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center text-yellow-400 font-bold mr-3 overflow-hidden",children:de.from.photoUrl?v.jsx("img",{src:de.from.photoUrl.startsWith("http")?de.from.photoUrl:`http://localhost:5000${de.from.photoUrl}`,alt:de.from.fullName,className:"w-full h-full object-cover rounded-full"}):v.jsx("span",{children:((He=de.from.fullName)==null?void 0:He.charAt(0))||"?"})}),v.jsx("span",{className:"text-gray-200 font-medium",children:de.from.fullName})]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{className:"bg-yellow-500 text-black hover:bg-yellow-400 rounded-full px-3 py-1 text-xs font-semibold transition",onClick:()=>Yl(de._id),children:"Kabul Et"}),v.jsx("button",{className:"bg-gray-700 text-gray-300 hover:bg-gray-600 border border-gray-600 rounded-full px-3 py-1 text-xs font-semibold transition",onClick:()=>Wa(de._id),children:"Reddet"})]})]},de._id)})})]}):v.jsx("div",{className:"bg-gray-800 bg-opacity-40 rounded-lg p-4 mb-4 text-center",children:v.jsx("p",{className:"text-gray-400 text-sm",children:"Bekleyen arkadaşlık isteği yok"})}),v.jsx("div",{className:"mt-4",children:v.jsx(Vt,{to:"/find-friends",className:"text-yellow-500 text-sm font-semibold hover:text-yellow-400 transition duration-200",children:"Arkadaş Bul →"})})]}),((Ye=t==null?void 0:t.userType)==null?void 0:Ye.toLowerCase())==="coach"&&v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg p-6 rounded-xl border border-gray-800 shadow-lg transition-all duration-300 hover:shadow-yellow-900/20",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("h3",{className:"text-xl font-semibold text-gray-100",children:"Sporcularım"}),v.jsx("div",{className:"p-2 bg-yellow-500 rounded-full",children:v.jsx("svg",{className:"w-5 h-5 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})]}),v.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:Tt.length>0?Tt.map(de=>{var He,lt,yt,Ht,sn,An;return v.jsxs("div",{className:`bg-gray-800 bg-opacity-70 rounded-xl p-3 border ${de.status==="pending"?"border-yellow-700":"border-yellow-600"} shadow hover:shadow-yellow-700 hover:bg-gray-700/80 transition-colors duration-150 flex items-center gap-3 mb-3`,style:{minHeight:64,maxWidth:440},children:[v.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center text-lg text-yellow-400 font-bold border border-yellow-500 overflow-hidden",children:(He=de.profile)!=null&&He.photoUrl?v.jsx("img",{src:de.profile.photoUrl.startsWith("http")?de.profile.photoUrl:`http://localhost:5000${de.profile.photoUrl}`,alt:de.profile.fullName,className:"w-full h-full object-cover rounded-full"}):((yt=(lt=de.profile)==null?void 0:lt.fullName)==null?void 0:yt.charAt(0))||"A"}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("p",{className:"font-semibold text-base text-gray-100 truncate",children:((Ht=de.profile)==null?void 0:Ht.fullName)||"İsimsiz Sporcu"}),de.status==="pending"?v.jsx("span",{className:"text-xs px-2 py-0.5 bg-yellow-500 bg-opacity-20 text-yellow-400 rounded-full",children:"Bekliyor"}):v.jsx("span",{className:"text-xs px-2 py-0.5 bg-yellow-500 bg-opacity-20 text-yellow-400 rounded-full",children:"Aktif"})]}),v.jsxs("p",{className:"text-xs text-gray-400 truncate",children:[(sn=de.profile)!=null&&sn.age?`${de.profile.age} yaş • `:"",(An=de.profile)!=null&&An.goalType?Uu(de.profile.goalType):"Hedef belirlenmedi"]})]}),v.jsx("div",{className:"flex gap-2 ml-2",children:de.status==="pending"?v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"bg-yellow-500 text-black hover:bg-yellow-400 rounded-full px-3 py-1 text-xs font-semibold transition",onClick:()=>zi(de.requestId,de._id),children:"Kabul Et"}),v.jsx("button",{className:"bg-gray-700 text-gray-300 hover:bg-gray-600 border border-gray-600 rounded-full px-3 py-1 text-xs font-semibold transition",onClick:()=>fl(de.requestId,de._id),children:"Reddet"})]}):v.jsxs(v.Fragment,{children:[v.jsx("button",{title:de.trainingProgram?"Programı Güncelle":"Program Ata",onClick:()=>{var Ya;const Os={_id:de._id,profile:de.profile,email:de.email};Ke("/program-creator",{state:{selectedAthlete:Os,programId:((Ya=de.trainingProgram)==null?void 0:Ya._id)||null}})},className:"w-10 h-10 bg-yellow-500 hover:bg-yellow-400 text-black rounded-full flex items-center justify-center transition",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 640 512",children:v.jsx("path",{d:"M96 64c0-17.7 14.3-32 32-32l32 0c17.7 0 32 14.3 32 32l0 160 0 64 0 160c0 17.7-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32l0-64-32 0c-17.7 0-32-14.3-32-32l0-64c-17.7 0-32-14.3-32-32s14.3-32 32-32l0-64c0-17.7 14.3-32 32-32l32 0 0-64zm448 0l0 64 32 0c17.7 0 32 14.3 32 32l0 64c17.7 0 32 14.3 32 32s-14.3 32-32 32l0 64c0 17.7-14.3 32-32 32l-32 0 0 64c0 17.7-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32l0-160 0-64 0-160c0-17.7 14.3-32 32-32l32 0c17.7 0 32 14.3 32 32zM416 224l0 64-192 0 0-64 192 0z"})})}),v.jsx("button",{title:"Mesaj Gönder",onClick:()=>{De(de),xe(!0)},className:"w-10 h-10 bg-gray-700 hover:bg-gray-600 text-gray-200 rounded-full flex items-center justify-center transition",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),v.jsx("button",{title:"Profili Görüntüle",onClick:()=>Ke(`/profile/${de._id}`),className:"w-10 h-10 border border-yellow-500 text-yellow-400 hover:bg-yellow-500 hover:text-black rounded-full flex items-center justify-center transition",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})})]})})]},de._id)}):v.jsxs("div",{className:"text-center py-4 text-gray-400",children:[v.jsx("p",{children:"Henüz sporcu kaydınız bulunmamaktadır."}),v.jsx(Vt,{to:"/athletes",className:"text-yellow-500 hover:text-yellow-400 text-sm mt-2 inline-block",children:"Sporcu Ekle →"})]})})]}),(t==null?void 0:t.userType)==="athlete"&&v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg p-6 rounded-xl border border-gray-800 shadow-lg transition-all duration-300 hover:shadow-yellow-900/20",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("h3",{className:"text-xl font-semibold text-gray-100",children:"Antrenörüm"}),v.jsx("div",{className:"p-2 bg-yellow-500 rounded-full",children:v.jsx("svg",{className:"w-5 h-5 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]}),t!=null&&t.coach?v.jsx("div",{className:"bg-gray-800 bg-opacity-40 rounded-lg p-4",children:v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-700 border-2 border-yellow-500 flex items-center justify-center",children:(ct=t.coach.profile)!=null&&ct.photoUrl?v.jsx("img",{src:t.coach.profile.photoUrl.startsWith("http")?t.coach.profile.photoUrl:`http://localhost:5000${t.coach.profile.photoUrl}`,alt:t.coach.profile.fullName,className:"w-full h-full rounded-full object-cover"}):v.jsx("span",{className:"text-2xl text-gray-400",children:((dn=(qt=t.coach.profile)==null?void 0:qt.fullName)==null?void 0:dn.charAt(0))||"C"})}),v.jsxs("div",{className:"ml-4",children:[v.jsx("h4",{className:"text-lg font-medium text-gray-200",children:((jn=t.coach.profile)==null?void 0:jn.fullName)||"İsimsiz Antrenör"}),v.jsx("p",{className:"text-sm text-gray-400",children:((kn=t.coach.profile)==null?void 0:kn.specialization)||"Uzmanlaşma alanı belirtilmedi"}),v.jsxs("div",{className:"mt-2 flex space-x-2",children:[v.jsx("button",{onClick:()=>{De(t.coach),xe(!0)},className:"px-3 py-1 text-sm bg-yellow-500 text-black rounded-full hover:bg-yellow-400 transition duration-200",children:"Mesaj Gönder"}),v.jsx(Vt,{to:`/profile/${t.coach._id}`,className:"px-3 py-1 text-sm bg-gray-700 text-gray-300 rounded-full hover:bg-gray-600 transition duration-200",children:"Profili Görüntüle"})]})]})]})}):v.jsxs("div",{className:"bg-gray-800 bg-opacity-40 rounded-lg p-4 text-center",children:[v.jsx("p",{className:"text-gray-400 mb-3",children:"Henüz bir antrenörünüz bulunmamaktadır."}),v.jsx(Vt,{to:"/coaches",className:"inline-block px-4 py-2 bg-yellow-500 text-black rounded-lg hover:bg-yellow-400 transition duration-200",children:"Antrenör Bul"})]})]}),v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg p-6 rounded-xl border border-gray-800 shadow-lg transition-all duration-300 hover:shadow-yellow-900/20",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("h3",{className:"text-xl font-semibold text-gray-100",children:"Beslenme Önerileri"}),v.jsx("div",{className:"p-2 bg-yellow-500 rounded-full",children:v.jsx("svg",{className:"w-5 h-5 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})})]}),v.jsx("div",{className:"mb-6 overflow-x-auto",children:v.jsx("div",{className:"flex space-x-2 pb-2",children:[].map(de=>v.jsx("button",{children:de.label},de.id))})}),v.jsxs("div",{className:"overflow-y-auto max-h-[500px] pr-2",children:[" ",v.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[" ",Fi.map(de=>{const He=Zl.includes(de.type),lt=Ga.includes(de.id),yt=!!vo[de.id],Ht=4,sn=yt?de.ingredients:de.ingredients.slice(0,Ht);return v.jsxs("div",{className:"bg-gray-800 bg-opacity-40 p-4 rounded-lg border border-gray-700 hover:border-yellow-500 transition",children:[v.jsxs("div",{className:"flex justify-between items-start mb-2",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("h4",{className:"text-lg font-medium text-yellow-500 mr-2",children:de.name}),v.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${de.type==="protein"?"bg-blue-900 text-blue-300":de.type==="vegan"?"bg-green-900 text-green-300":de.type==="quick"?"bg-purple-900 text-purple-300":de.type==="lowcarb"?"bg-pink-900 text-pink-300":"bg-gray-700 text-gray-300"}`,children:de.type==="protein"?"Protein":de.type==="vegan"?"Vegan":de.type==="quick"?"Hızlı":de.type==="lowcarb"?"Düşük Karbonhidrat":"Diğer"}),He&&v.jsx("span",{className:"ml-2 text-xs bg-green-700 text-white px-2 py-1 rounded",children:"Senin hedefin için uygun"})]}),v.jsx("button",{onClick:()=>hl(de.id),className:`ml-2 px-2 py-1 rounded text-xs ${lt?"bg-yellow-400 text-black":"bg-gray-700 text-white"}`,title:lt?"Favoriden çıkar":"Favorilere ekle",children:lt?"★":"☆"})]}),v.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3 text-center",children:[v.jsxs("div",{className:"bg-gray-900 bg-opacity-50 p-1 rounded",children:[v.jsx("p",{className:"text-xs text-gray-400",children:"Protein"}),v.jsxs("p",{className:"text-blue-400 font-medium",children:[de.protein,"g"]})]}),v.jsxs("div",{className:"bg-gray-900 bg-opacity-50 p-1 rounded",children:[v.jsx("p",{className:"text-xs text-gray-400",children:"Karbonhidrat"}),v.jsxs("p",{className:"text-yellow-400 font-medium",children:[de.carbs,"g"]})]}),v.jsxs("div",{className:"bg-gray-900 bg-opacity-50 p-1 rounded",children:[v.jsx("p",{className:"text-xs text-gray-400",children:"Yağ"}),v.jsxs("p",{className:"text-red-400 font-medium",children:[de.fat,"g"]})]})]}),v.jsxs("div",{className:"mb-3",children:[v.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Malzemeler:"}),v.jsxs("div",{className:"flex flex-wrap gap-1",children:[sn.map((An,Os)=>v.jsx("span",{className:"px-2 py-0.5 bg-gray-700 rounded-full text-xs text-gray-300",children:An},Os)),de.ingredients.length>Ht&&!yt&&v.jsx("span",{className:"cursor-pointer text-yellow-400 ml-2",onClick:()=>xa(de.id,!0),children:"..."}),yt&&v.jsx("span",{className:"cursor-pointer text-yellow-400 ml-2",onClick:()=>xa(de.id,!1),children:"gizle"})]})]})]},de.id)})]})]})]}),v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg p-6 rounded-xl border border-gray-800 shadow-lg transition-all duration-300 hover:shadow-yellow-900/20",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("h3",{className:"text-xl font-semibold text-gray-100",children:"Takvim"}),v.jsx("div",{className:"p-2 bg-yellow-500 rounded-full",children:v.jsx("svg",{className:"w-5 h-5 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),he&&v.jsxs("div",{className:"mb-4 p-3 bg-red-900 bg-opacity-50 text-red-200 rounded-lg text-sm",children:[he,v.jsx("button",{onClick:Jt,className:"ml-2 underline hover:text-red-100",children:"Yeniden Dene"})]}),v.jsxs("div",{className:"bg-gray-800 bg-opacity-40 rounded-lg p-4 mb-4 relative",children:[te&&v.jsx("div",{className:"absolute inset-0 bg-gray-900 bg-opacity-50 rounded-lg flex items-center justify-center z-10",children:v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full animate-bounce"}),v.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),v.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full animate-bounce",style:{animationDelay:"0.4s"}})]})}),v.jsxs("div",{className:"flex justify-between items-center mb-3",children:[v.jsx("button",{className:"text-gray-400 hover:text-yellow-500 transition duration-200",onClick:Li,children:v.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),v.jsx("div",{className:"text-yellow-400 font-medium",children:new Intl.DateTimeFormat("tr-TR",{month:"long",year:"numeric"}).format(c)}),v.jsx("button",{className:"text-gray-400 hover:text-yellow-500 transition duration-200",onClick:cl,children:v.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),v.jsx("div",{className:"grid grid-cols-7 gap-1 mb-1",children:["Pz","Pt","Sa","Ça","Pe","Cu","Ct"].map((de,He)=>v.jsx("div",{className:"text-xs text-gray-500 text-center font-medium",children:de},`weekday-${He}`))}),v.jsx("div",{className:"grid grid-cols-7 gap-1",children:(()=>{const de=c.getFullYear(),He=c.getMonth(),lt=Mn(de,He),yt=Ua(de,He),Ht=[];for(let sn=0;sn<yt;sn++)Ht.push(v.jsx("div",{className:"h-8"},`empty-${sn}`));for(let sn=1;sn<=lt;sn++){const An=`${de}-${(He+1).toString().padStart(2,"0")}-${sn.toString().padStart(2,"0")}`,Os=i.filter(as=>as.date===An),Ya=sn===new Date().getDate()&&He===new Date().getMonth()&&de===new Date().getFullYear();Ht.push(v.jsxs("div",{className:`h-8 flex items-center justify-center relative 
                      ${Ya?"bg-yellow-500 text-black rounded-full font-bold":Os.length>0?"text-white cursor-pointer hover:bg-gray-700 rounded-full":"text-gray-400 hover:bg-gray-800 hover:text-gray-300 rounded-full cursor-pointer"}`,onClick:()=>ms(sn),title:Os.length>0?Os.map(as=>as.title).join(", "):"Yeni etkinlik ekle",children:[sn,Os.length>0&&v.jsx("div",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 flex space-x-0.5",children:Os.map((as,gi)=>v.jsx("div",{onClick:tp=>{tp.stopPropagation(),Va(as)},className:`w-1.5 h-1.5 rounded-full ${dl(as.type)}`,title:as.title},`indicator-${sn}-${gi}`))})]},`day-${sn}`))}return Ht})()})]})]}),v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg p-6 rounded-xl border border-gray-800 shadow-lg transition-all duration-300 hover:shadow-yellow-900/20",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("h3",{className:"text-xl font-semibold text-gray-100",children:"Liderlik Tablosu"}),v.jsx("div",{className:"p-2 bg-yellow-500 rounded-full",children:v.jsxs("svg",{className:"w-6 h-6 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("path",{d:"M8 10 L12 14 L16 10 L20 14 L24 10",stroke:"currentColor",strokeWidth:"2",fill:"none"}),v.jsx("circle",{cx:"8",cy:"9",r:"1",fill:"currentColor"}),v.jsx("circle",{cx:"16",cy:"9",r:"1",fill:"currentColor"}),v.jsx("circle",{cx:"24",cy:"9",r:"1",fill:"currentColor"}),v.jsx("rect",{x:"5",y:"20",width:"6",height:"6",rx:"1",stroke:"currentColor",strokeWidth:"2",fill:"none"}),v.jsx("rect",{x:"13",y:"16",width:"6",height:"10",rx:"1",stroke:"currentColor",strokeWidth:"2",fill:"none"}),v.jsx("rect",{x:"21",y:"22",width:"6",height:"4",rx:"1",stroke:"currentColor",strokeWidth:"2",fill:"none"}),v.jsx("text",{x:"16",y:"23",textAnchor:"middle",fontSize:"7",fill:"currentColor",fontWeight:"bold",children:"1"})]})})]}),v.jsxs("div",{className:"bg-gray-800 bg-opacity-40 rounded-lg p-2 mb-4",children:[v.jsxs("div",{className:"grid grid-cols-12 py-2 border-b border-gray-700 mb-2",children:[v.jsx("div",{className:"col-span-1 text-xs text-gray-400 text-center",children:"#"}),v.jsx("div",{className:"col-span-7 text-xs text-gray-400",children:"Kullanıcı"}),v.jsx("div",{className:"col-span-4 text-xs text-gray-400 text-right",children:"Puan"})]}),v.jsxs("div",{className:"space-y-2 mb-2",children:[Y.slice(0,3).map((de,He)=>v.jsxs("div",{className:`grid grid-cols-12 items-center py-2 px-1 rounded-lg ${He===0?"bg-yellow-900 bg-opacity-20 border border-yellow-800":He===1?"bg-gray-600 bg-opacity-20 border border-gray-700":"bg-yellow-800 bg-opacity-10 border border-yellow-900"}`,children:[v.jsxs("div",{className:"col-span-1 font-bold text-center",children:[He===0&&v.jsx("span",{className:"text-yellow-400",children:"🏆"}),He===1&&v.jsx("span",{className:"text-gray-400",children:"🥈"}),He===2&&v.jsx("span",{className:"text-yellow-700",children:"🥉"})]}),v.jsxs("div",{className:"col-span-7 flex items-center",children:[v.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full mr-2 flex items-center justify-center text-xs border-2 border-gray-600",children:de.avatar||de.name.charAt(0)}),v.jsx("span",{className:`${de.rank===1?"text-yellow-300 font-medium":"text-gray-200"}`,children:de.name})]}),v.jsxs("div",{className:`col-span-4 text-right font-semibold ${de.rank===1?"text-yellow-400":de.rank===2?"text-gray-300":"text-yellow-600"}`,children:[de.points.toLocaleString()," puan"]})]},`top-${de.id}`)),v.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto pr-1",children:Y.slice(3).map(de=>v.jsxs("div",{className:`grid grid-cols-12 items-center py-1.5 px-1 ${de.isCurrentUser?"bg-yellow-900 bg-opacity-20 border border-yellow-700 rounded-lg":"hover:bg-gray-700 hover:bg-opacity-30 rounded transition duration-150"}`,children:[v.jsx("div",{className:"col-span-1 text-center text-gray-500",children:de.rank}),v.jsxs("div",{className:"col-span-7 flex items-center",children:[v.jsx("div",{className:`w-6 h-6 ${de.isCurrentUser?"bg-yellow-600":"bg-gray-700"} rounded-full mr-2 flex items-center justify-center text-xs`,children:de.avatar||de.name.charAt(0)}),v.jsxs("span",{className:`${de.isCurrentUser?"text-yellow-400 font-medium":"text-gray-300"} text-sm`,children:[de.name," ",de.isCurrentUser&&"(Siz)"]})]}),v.jsx("div",{className:`col-span-4 text-right ${de.isCurrentUser?"text-yellow-400 font-medium":"text-gray-400"}`,children:de.points.toLocaleString()})]},`list-${de.id}`))})]})]}),v.jsx("div",{className:"bg-gray-800 bg-opacity-40 rounded-lg p-3 border border-yellow-900 border-opacity-40",children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:"bg-yellow-500 text-black rounded-full w-7 h-7 flex items-center justify-center font-bold mr-2",children:H}),v.jsxs("div",{children:[v.jsx("p",{className:"text-gray-200",children:"Sıralamanız"}),v.jsx("p",{className:"text-xs text-gray-400",children:"İlk 100 içerisindesiniz!"})]})]}),v.jsxs("div",{className:"text-yellow-400 font-bold",children:[((Hr=Y.find(de=>de.rank===H))==null?void 0:Hr.points.toLocaleString())||980," ","puan"]})]})}),v.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[v.jsx("button",{className:"text-yellow-500 text-sm font-semibold hover:text-yellow-400 transition duration-200",onClick:()=>Ke("/leaderboard"),children:"Tüm Sıralamayı Gör →"}),v.jsxs("div",{className:"text-xs text-gray-400",children:["Son güncelleme: ",va(at)]})]})]}),h&&v.jsx(Ihe,{isOpen:h,onClose:()=>{m(!1),y(null)},onSave:aa,onDelete:Qn,event:g})]}),v.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[v.jsxs(Vt,{to:"/progress-history",className:"bg-gray-800 hover:bg-gray-700 text-gray-200 p-4 rounded-lg flex items-center transition duration-300",children:[v.jsx("div",{className:"bg-yellow-500 rounded-full p-2 mr-3 text-black",children:v.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-medium",children:"İlerleme Takibi"}),v.jsx("p",{className:"text-sm text-gray-400",children:"Fiziksel verilerinizi grafiklerle izleyin ve hedeflerinizin ilerlemesini takip edin"})]})]}),(t==null?void 0:t.userType)==="athlete"&&v.jsxs(Vt,{to:"/training-programs",className:"bg-gray-800 hover:bg-gray-700 text-gray-200 p-4 rounded-lg flex items-center transition duration-300",children:[v.jsx("div",{className:"bg-yellow-500 rounded-full p-2 mr-3 text-black",children:v.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-medium",children:"Antrenman Programları"}),v.jsx("p",{className:"text-sm text-gray-400",children:"Hazır programlardan birini seçin"})]})]}),(t==null?void 0:t.userType)==="athlete"&&v.jsxs(Vt,{to:"/coaches",className:"bg-gray-800 hover:bg-gray-700 text-gray-200 p-4 rounded-lg flex items-center transition duration-300",children:[v.jsx("div",{className:"bg-yellow-500 rounded-full p-2 mr-3 text-black",children:v.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-medium",children:"Antrenörler"}),v.jsx("p",{className:"text-sm text-gray-400",children:"Size uygun bir antrenör seçin"})]})]}),v.jsxs(Vt,{to:"/friends",className:"bg-gray-800 hover:bg-gray-700 text-gray-200 p-4 rounded-lg flex items-center transition duration-300",children:[v.jsx("div",{className:"bg-yellow-500 rounded-full p-2 mr-3 text-black",children:v.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-medium",children:"Arkadaşlar"}),v.jsx("p",{className:"text-sm text-gray-400",children:"Antrenman arkadaşlarınızı yönetin"})]})]}),v.jsxs(Vt,{to:"/movement-detection",className:"bg-gray-800 hover:bg-gray-700 text-gray-200 p-4 rounded-lg flex items-center transition duration-300",children:[v.jsx("div",{className:"bg-yellow-500 rounded-full p-2 mr-3 text-black",children:v.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-medium",children:"Hareket Algılama"}),v.jsx("p",{className:"text-sm text-gray-400",children:"Egzersiz hareketlerinizi analiz edin"})]})]}),(t==null?void 0:t.userType)==="coach"&&v.jsxs(Vt,{to:"/program-creator",className:"bg-gray-800 hover:bg-gray-700 text-gray-200 p-4 rounded-lg flex items-center transition duration-300",children:[v.jsx("div",{className:"bg-yellow-500 rounded-full p-2 mr-3 text-black",children:v.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-medium",children:"Program Oluştur"}),v.jsx("p",{className:"text-sm text-gray-400",children:"Sporcularınız için yeni antrenman programları oluşturun"})]})]})]}),ke&&v.jsx(L3,{isOpen:!!ke,onClose:()=>et(null),children:v.jsxs("div",{className:"p-7 bg-gray-900 rounded-xl max-w-sm mx-auto",style:{maxWidth:420},children:[v.jsxs("div",{className:"flex items-center gap-4 mb-5",children:[v.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-700 flex items-center justify-center text-2xl text-yellow-400 font-bold border border-yellow-500 overflow-hidden",children:(qr=ke.profile)!=null&&qr.photoUrl?v.jsx("img",{src:ke.profile.photoUrl.startsWith("http")?ke.profile.photoUrl:`http://localhost:5000${ke.profile.photoUrl}`,alt:ke.profile.fullName,className:"w-full h-full object-cover rounded-full"}):((wr=(Jn=ke.profile)==null?void 0:Jn.fullName)==null?void 0:wr.charAt(0))||"A"}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-lg font-bold text-gray-100",children:((qa=ke.profile)==null?void 0:qa.fullName)||"İsimsiz Sporcu"}),v.jsx("p",{className:"text-sm text-gray-400",children:(ka=ke.profile)!=null&&ka.age?`${ke.profile.age} yaş`:"-"}),v.jsx("p",{className:"text-sm text-yellow-400",children:((Ka=ke.profile)==null?void 0:Ka.goalType)||"-"})]})]}),v.jsxs("div",{className:"mb-5 space-y-2 text-sm",children:[v.jsxs("p",{className:"text-gray-300",children:["Boy:"," ",v.jsxs("span",{className:"text-yellow-400",children:[((Xa=ke.profile)==null?void 0:Xa.height)||"-"," cm"]})]}),v.jsxs("p",{className:"text-gray-300",children:["Kilo:"," ",v.jsxs("span",{className:"text-yellow-400",children:[((Jl=ke.profile)==null?void 0:Jl.weight)||"-"," kg"]})]}),v.jsxs("p",{className:"text-gray-300",children:["Yağ Oranı:"," ",v.jsxs("span",{className:"text-yellow-400",children:[((No=ke.profile)==null?void 0:No.bodyFat)||"-","%"]})]})]}),v.jsxs("div",{className:"flex gap-3 mt-4",children:[v.jsx("button",{onClick:()=>{const de={_id:ke._id,profile:ke.profile,email:ke.email};Ke("/program-creator",{state:{selectedAthlete:de}})},className:"flex-1 bg-yellow-500 hover:bg-yellow-400 text-black px-3 py-2 rounded font-semibold text-sm transition flex items-center justify-center",children:"Program Ata"}),v.jsx("button",{onClick:()=>{De(ke),xe(!0)},className:"bg-gray-700 hover:bg-gray-600 text-gray-200 px-2 py-1 rounded font-semibold text-xs transition",children:"Mesaj Gönder"}),v.jsx("button",{onClick:()=>Ke(`/profile/${athlete._id}`),className:"bg-gray-800 hover:bg-gray-700 text-yellow-400 px-3 py-2 rounded font-semibold text-sm transition ml-2",children:"Profili Görüntüle"})]})]})}),Je&&v.jsx(L3,{isOpen:!!Je,onClose:()=>Re(null),children:v.jsxs("div",{className:"p-4 bg-gray-900 rounded-xl max-w-xs mx-auto",children:[v.jsx("h2",{className:"text-lg font-bold text-yellow-400 mb-2",children:((mi=Je.profile)==null?void 0:mi.fullName)||Je.email}),v.jsx("textarea",{className:"w-full h-24 bg-gray-800 text-gray-200 rounded p-2 mb-2",placeholder:"Mesajınızı yazın..."}),v.jsxs("div",{className:"flex gap-2 justify-end",children:[v.jsx("button",{className:"bg-gray-700 text-gray-200 px-3 py-1 rounded text-xs",onClick:()=>Re(null),children:"İptal"}),v.jsx("button",{className:"bg-yellow-500 text-black px-3 py-1 rounded text-xs",children:"Gönder"})]})]})})]})},_he=()=>{const[t,e]=L.useState(""),[n,r]=L.useState(""),[s,a]=L.useState(!1),[i,o]=L.useState(null),[l,u]=L.useState(!1),c=Wl(),d=async h=>{var m,g;h.preventDefault(),o(""),u(!0);try{const y=await Ze.post("http://localhost:5000/api/users/login",{email:t,password:n});if(console.log("Login response:",y.data),y.data.token){localStorage.setItem("userToken",y.data.token),sessionStorage.setItem("userToken",y.data.token);const b={_id:y.data._id,email:y.data.email,userType:y.data.userType,profile:y.data.profile||{},physicalData:y.data.physicalData||{}};localStorage.setItem("user",JSON.stringify(b)),sessionStorage.setItem("user",JSON.stringify(b));const w=y.data.profile&&y.data.profile.fullName;localStorage.setItem("profileSetupDone",w?"true":"false"),y.data.userType,c("/dashboard")}else o("Giriş başarısız. Lütfen bilgilerinizi kontrol edin.")}catch(y){console.error("Login error:",y),o(((g=(m=y.response)==null?void 0:m.data)==null?void 0:g.message)||"Giriş yapılırken bir hata oluştu. Lütfen tekrar deneyin.")}finally{u(!1)}};return v.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen py-12 px-4",children:[v.jsxs("div",{className:"w-full max-w-md",children:[v.jsxs("div",{className:"text-center mb-10",children:[v.jsx("h1",{className:"text-4xl font-bold text-primary mb-2",children:"FitWeb"}),v.jsx("p",{className:"text-gray-400",children:"Fitness yolculuğunuzu birlikte takip edelim"})]}),v.jsxs("div",{className:"glass-panel p-8",children:[v.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-gray-200",children:"Giriş Yapın"}),i&&v.jsx("div",{className:"bg-red-900 bg-opacity-60 text-red-200 p-3 rounded-lg mb-4",children:i}),v.jsxs("form",{className:"space-y-5",onSubmit:d,children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"email",children:"E-posta"}),v.jsx("input",{id:"email",type:"email",className:"glass-input w-full p-3",placeholder:"ornek@email.com",value:t,onChange:h=>e(h.target.value),required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"password",children:"Şifre"}),v.jsx("input",{id:"password",type:"password",className:"glass-input w-full p-3",placeholder:"********",value:n,onChange:h=>r(h.target.value),required:!0})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{id:"remember",type:"checkbox",className:"h-4 w-4 bg-dark-light border-gray-700 rounded",checked:s,onChange:h=>a(h.target.checked)}),v.jsx("label",{htmlFor:"remember",className:"ml-2 text-sm text-gray-300",children:"Beni Hatırla"})]}),v.jsx("button",{type:"submit",className:"btn-primary w-full py-3",disabled:l,children:l?"Giriş Yapılıyor...":"Giriş Yap"}),v.jsx("div",{className:"mt-2 text-center",children:v.jsx(Vt,{to:"/forgot-password",className:"text-yellow-400 text-sm hover:underline",children:"Şifrenizi mi unuttunuz?"})})]}),v.jsx("div",{className:"mt-6 text-center",children:v.jsx(Vt,{to:"/register",className:"text-primary text-sm hover:underline",children:"Hesabınız yok mu? Kaydolun"})})]})]}),v.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-primary rounded-full mix-blend-overlay filter blur-xl opacity-10 animate-pulse"}),v.jsx("div",{className:"absolute bottom-10 right-10 w-32 h-32 bg-primary rounded-full mix-blend-overlay filter blur-xl opacity-10 animate-pulse animation-delay-2000"})]})},Dhe=()=>{const[t,e]=L.useState(""),[n,r]=L.useState(""),[s,a]=L.useState(""),[i,o]=L.useState("athlete"),[l,u]=L.useState(null),[c,d]=L.useState(!1),h=Wl(),m=async g=>{var y,b;if(g.preventDefault(),n!==s){u("Şifreler eşleşmiyor");return}u(null),d(!0);try{(await Ze.post("http://localhost:5000/api/users/register",{email:t,password:n,userType:i})).data&&h("/")}catch(w){u(((b=(y=w.response)==null?void 0:y.data)==null?void 0:b.message)||"Kayıt oluşturulamadı")}finally{d(!1)}};return v.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen py-12 px-4",children:[v.jsxs("div",{className:"w-full max-w-md",children:[v.jsxs("div",{className:"text-center mb-10",children:[v.jsx("h1",{className:"text-4xl font-bold text-primary mb-2",children:"FitWeb"}),v.jsx("p",{className:"text-gray-400",children:"Fitness yolculuğuna başlayın"})]}),v.jsxs("div",{className:"glass-panel p-8",children:[v.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-gray-200",children:"Hesap Oluşturun"}),l&&v.jsx("div",{className:"bg-red-900 bg-opacity-60 text-red-200 p-3 rounded-lg mb-4",children:l}),v.jsxs("form",{className:"space-y-4",onSubmit:m,children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"email",children:"E-posta"}),v.jsx("input",{id:"email",type:"email",className:"glass-input w-full p-3",placeholder:"ornek@email.com",value:t,onChange:g=>e(g.target.value),required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"password",children:"Şifre"}),v.jsx("input",{id:"password",type:"password",className:"glass-input w-full p-3",placeholder:"********",value:n,onChange:g=>r(g.target.value),required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"confirmPassword",children:"Şifre Tekrarı"}),v.jsx("input",{id:"confirmPassword",type:"password",className:"glass-input w-full p-3",placeholder:"********",value:s,onChange:g=>a(g.target.value),required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",children:"Kullanıcı Tipi"}),v.jsxs("div",{className:"flex space-x-4",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{id:"athlete",name:"userType",type:"radio",className:"h-4 w-4 bg-dark-light border-gray-700",value:"athlete",checked:i==="athlete",onChange:g=>o(g.target.value)}),v.jsx("label",{htmlFor:"athlete",className:"ml-2 text-sm text-gray-300",children:"Sporcu"})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{id:"coach",name:"userType",type:"radio",className:"h-4 w-4 bg-dark-light border-gray-700",value:"coach",checked:i==="coach",onChange:g=>o(g.target.value)}),v.jsx("label",{htmlFor:"coach",className:"ml-2 text-sm text-gray-300",children:"Antrenör"})]})]})]}),v.jsx("button",{type:"submit",className:"btn-primary w-full py-3 mt-4",disabled:c,children:c?"Kaydediliyor...":"Kaydol"})]}),v.jsx("div",{className:"mt-6 text-center",children:v.jsx(Vt,{to:"/",className:"text-primary text-sm hover:underline",children:"Zaten bir hesabınız var mı? Giriş yapın"})})]})]}),v.jsx("div",{className:"absolute top-10 right-10 w-32 h-32 bg-primary rounded-full mix-blend-overlay filter blur-xl opacity-10 animate-pulse"}),v.jsx("div",{className:"absolute bottom-10 left-10 w-32 h-32 bg-primary rounded-full mix-blend-overlay filter blur-xl opacity-10 animate-pulse animation-delay-2000"})]})},Phe=({isOpen:t,onClose:e})=>{const[n,r]=L.useState(""),[s,a]=L.useState(!1),[i,o]=L.useState(null),l=Wl();if(!t)return null;const u=async()=>{var c,d;if(n!=="SİL"){o('Onaylamak için "SİL" yazmanız gerekiyor');return}try{a(!0),o(null);const h=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");if(!h){l("/");return}const m={headers:{Authorization:`Bearer ${h}`}};await Ze.delete("http://localhost:5000/api/users/account",m),localStorage.removeItem("userToken"),localStorage.removeItem("user"),sessionStorage.removeItem("userToken"),sessionStorage.removeItem("user"),l("/")}catch(h){console.error("Account deletion error:",h),o(((d=(c=h.response)==null?void 0:c.data)==null?void 0:d.message)||"Hesap silinemedi")}finally{a(!1)}};return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 backdrop-blur-sm flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg rounded-xl shadow-lg p-6 max-w-md w-full border border-gray-800",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h3",{className:"text-xl font-bold text-red-500",children:"Hesabı Sil"}),v.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-200 transition duration-200",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),v.jsxs("div",{className:"mb-6",children:[v.jsxs("div",{className:"bg-red-900 bg-opacity-20 border border-red-800 rounded-lg p-4 mb-4",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("svg",{className:"w-6 h-6 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),v.jsx("h4",{className:"text-lg font-medium text-red-500",children:"Uyarı"})]}),v.jsx("p",{className:"text-gray-300 mt-2",children:"Hesabınızı silmek istediğinizden emin misiniz? Bu işlem geri alınamaz ve tüm verileriniz kalıcı olarak silinir."})]}),i&&v.jsx("div",{className:"bg-red-900 bg-opacity-60 text-red-200 p-3 rounded-lg mb-4",children:i}),v.jsx("div",{className:"space-y-4",children:v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"confirmDelete",children:'Onaylamak için "SİL" yazın'}),v.jsx("input",{id:"confirmDelete",type:"text",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 text-gray-200",placeholder:"SİL",value:n,onChange:c=>r(c.target.value)})]})})]}),v.jsxs("div",{className:"flex justify-end space-x-3",children:[v.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-800 text-gray-200 rounded-lg hover:bg-gray-700 transition duration-200",children:"İptal"}),v.jsx("button",{type:"button",onClick:u,disabled:s||n!=="SİL",className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition duration-200 disabled:opacity-50",children:s?"İşleniyor...":"Hesabımı Kalıcı Olarak Sil"})]})]})})};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mhe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jhe=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),oU=t=>{const e=jhe(t);return e.charAt(0).toUpperCase()+e.slice(1)},GX=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lhe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fhe=L.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:i,...o},l)=>L.createElement("svg",{ref:l,...Lhe,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:GX("lucide",s),...o},[...i.map(([u,c])=>L.createElement(u,c)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=(t,e)=>{const n=L.forwardRef(({className:r,...s},a)=>L.createElement(Fhe,{ref:a,iconNode:e,className:GX(`lucide-${Mhe(oU(t))}`,`lucide-${t}`,r),...s}));return n.displayName=oU(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zhe=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Bhe=Mu("award",zhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uhe=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Vhe=Mu("crown",Uhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Whe=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],Ghe=Mu("droplets",Whe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hhe=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],qhe=Mu("flame",Hhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Khe=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],lU=Mu("medal",Khe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xhe=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Yhe=Mu("search",Xhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qhe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Zhe=Mu("star",Qhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jhe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],epe=Mu("target",Jhe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tpe=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],npe=Mu("trending-up",tpe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rpe=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],jM=Mu("trophy",rpe),HX=({type:t,color:e,size:n})=>{const r=n||24,s=`text-${e}-500`;switch(t){case"Trophy":return v.jsx(jM,{className:s,size:r});case"Medal":return v.jsx(lU,{className:s,size:r});case"Award":return v.jsx(Bhe,{className:s,size:r});case"Crown":return v.jsx(Vhe,{className:s,size:r});case"Star":return v.jsx(Zhe,{className:s,size:r});case"Flame":return v.jsx(qhe,{className:s,size:r});case"Target":return v.jsx(epe,{className:s,size:r});case"Droplets":return v.jsx(Ghe,{className:s,size:r});case"TrendingUp":return v.jsx(npe,{className:s,size:r});default:return v.jsx(lU,{className:s,size:r})}},spe=({achievement:t,size:e="md",onClick:n})=>{const r={sm:{container:"w-16 h-16",icon:24,textSize:"text-xs"},md:{container:"w-20 h-20",icon:32,textSize:"text-sm"},lg:{container:"w-24 h-24",icon:40,textSize:"text-base"}},s=r[e]||r.md,a=t.earned?"opacity-100":"opacity-50",i=t.earned?"shadow-lg":"shadow",o=t.earned?"border-2":"border",l=t.earned?`border-${t.iconColor}-400`:"border-gray-300";return v.jsxs("div",{className:`relative rounded-full ${s.container} ${a} ${i} ${o} ${l} flex items-center justify-center bg-white cursor-pointer transition-all hover:scale-105`,onClick:()=>n&&n(t),title:t.title,children:[v.jsx("div",{className:"absolute inset-0 rounded-full flex items-center justify-center",children:v.jsx(HX,{type:t.iconType,color:t.iconColor,size:s.icon})}),!t.earned&&t.progress>0&&v.jsx("div",{className:"absolute bottom-0 w-full px-1",children:v.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:v.jsx("div",{className:`bg-${t.iconColor}-500 h-1.5 rounded-full`,style:{width:`${t.progress}%`}})})}),t.earned&&t.isNew&&v.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:v.jsx("span",{children:"!"})})]})},qX=({achievements:t,size:e="md",onBadgeClick:n})=>!t||t.length===0?v.jsx("div",{className:"flex justify-center items-center p-4 text-gray-500",children:"Henüz rozet kazanılmadı"}):v.jsx("div",{className:"flex flex-wrap gap-4 justify-center",children:t.map(r=>v.jsx(spe,{achievement:r,size:e,onClick:()=>n&&n(r)},r.id))}),LM=({achievement:t,onClose:e})=>{if(!t)return null;const n=t.earned?"border-green-500":"border-yellow-500",r=t.earned?`${new Date(t.earnedDate).toLocaleDateString()} tarihinde kazanıldı`:`İlerleme: %${Math.round(t.progress)}`;return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:v.jsxs("div",{className:`bg-white rounded-lg p-6 max-w-md w-full border-l-4 ${n} shadow-xl`,children:[v.jsxs("div",{className:"flex justify-between items-start mb-4",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:"mr-4",children:v.jsx(HX,{type:t.iconType,color:t.iconColor,size:48})}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-xl font-bold",children:t.title}),v.jsx("p",{className:"text-sm text-gray-600",children:t.description})]})]}),v.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),v.jsxs("div",{className:"mt-2",children:[v.jsx("p",{className:"text-sm text-gray-700",children:r}),!t.earned&&v.jsx("div",{className:"mt-4",children:v.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:v.jsx("div",{className:`bg-${t.iconColor}-500 h-2.5 rounded-full`,style:{width:`${t.progress}%`}})})})]}),v.jsx("div",{className:"mt-6 flex justify-end",children:v.jsx("button",{onClick:e,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Kapat"})})]})})},TS=[{id:"first_goal",name:"İlk Hedefini Tamamla",description:"İlk fitness hedefini başarıyla tamamladın.",points:50,icon:"🏅",type:"goal",condition:{goalsCompleted:1}},{id:"5_goals",name:"5 Hedef Tamamla",description:"5 farklı hedefi başarıyla tamamladın.",points:100,icon:"🥇",type:"goal",condition:{goalsCompleted:5}},{id:"10_goals",name:"10 Hedef Tamamla",description:"10 farklı hedefi başarıyla tamamladın.",points:200,icon:"🥈",type:"goal",condition:{goalsCompleted:10}},{id:"20_goals",name:"20 Hedef Tamamla",description:"20 farklı hedefi başarıyla tamamladın.",points:400,icon:"🥉",type:"goal",condition:{goalsCompleted:20}},{id:"100_points",name:"100 Puan Rozeti",description:"100 puana ulaştın.",points:100,icon:"💯",type:"points",condition:{points:100}},{id:"500_points",name:"500 Puan Rozeti",description:"500 puana ulaştın.",points:500,icon:"🔥",type:"points",condition:{points:500}},{id:"1000_points",name:"1000 Puan Rozeti",description:"1000 puana ulaştın.",points:1e3,icon:"🏆",type:"points",condition:{points:1e3}},{id:"first_friend",name:"İlk Arkadaş",description:"İlk arkadaşını ekledin.",points:10,icon:"🤝",type:"social",condition:{friends:1}},{id:"5_friends",name:"5 Arkadaş",description:"5 arkadaş ekledin.",points:30,icon:"👥",type:"social",condition:{friends:5}},{id:"10_friends",name:"10 Arkadaş",description:"10 arkadaş ekledin.",points:60,icon:"👨‍👩‍👧‍👦",type:"social",condition:{friends:10}},{id:"first_measurement",name:"İlk Ölçüm",description:"İlk vücut ölçümünü kaydettin.",points:10,icon:"📏",type:"progress",condition:{measurements:1}},{id:"10_measurements",name:"10 Ölçüm",description:"10 farklı ölçüm kaydettin.",points:50,icon:"📐",type:"progress",condition:{measurements:10}},{id:"first_login",name:"İlk Giriş",description:"Siteye ilk kez giriş yaptın.",points:5,icon:"🚀",type:"activity",condition:{logins:1}},{id:"7_day_streak",name:"7 Günlük Seri",description:"7 gün üst üste giriş yaptın.",points:30,icon:"📅",type:"activity",condition:{streak:7}},{id:"30_day_streak",name:"30 Günlük Seri",description:"30 gün üst üste giriş yaptın.",points:100,icon:"🏆",type:"activity",condition:{streak:30}},{id:"100_day_streak",name:"100 Günlük Seri",description:"100 gün üst üste giriş yaptın.",points:500,icon:"🌟",type:"activity",condition:{streak:100}},{id:"first_share",name:"İlk Paylaşım",description:"Bir başarını ilk kez paylaştın.",points:10,icon:"📣",type:"social",condition:{shares:1}},{id:"first_weight_loss",name:"İlk Kilo Kaybı",description:"İlk kez kilo kaybı kaydettin.",points:10,icon:"⚖️",type:"progress",condition:{weightLoss:1}},{id:"first_muscle_gain",name:"İlk Kas Kazancı",description:"İlk kez kas kazanımı kaydettin.",points:10,icon:"💪",type:"progress",condition:{muscleGain:1}},{id:"first_workout",name:"İlk Antrenman",description:"İlk antrenman programını tamamladın.",points:10,icon:"🏋️",type:"activity",condition:{workouts:1}},{id:"record_streak",name:"Rekor Seri",description:"Kendi en uzun streak rekorunu kırdın.",points:100,icon:"🥇",type:"record",condition:{recordStreak:!0}},{id:"secret_combo",name:"???",description:"Gizli bir başarı!",points:50,icon:"🕵️",type:"secret",condition:{secret:!0}},{id:"night_owl",name:"???",description:"Gizli bir başarı!",points:20,icon:"🌙",type:"secret",condition:{nightLogin:!0}},{id:"new_year",name:"Yılbaşı Rozeti",description:"Yılbaşı günü giriş yaptın.",points:20,icon:"🎉",type:"special",condition:{date:"01-01"}},{id:"health_day",name:"Sağlık Günü Rozeti",description:"Dünya Sağlık Günü'nde giriş yaptın.",points:20,icon:"🌍",type:"special",condition:{date:"04-07"}},{id:"first_athlete",name:"İlk Sporcu",description:"İlk kez bir sporcuyu sisteme ekledin.",points:10,icon:"👤",type:"coach",condition:{athletes:1}},{id:"5_athletes",name:"5 Sporcu",description:"5 farklı sporcun oldu.",points:30,icon:"👥",type:"coach",condition:{athletes:5}},{id:"first_program",name:"İlk Program",description:"İlk kez bir sporcuya antrenman programı hazırladın.",points:10,icon:"📋",type:"coach",condition:{programs:1}}],ape=()=>{var Wn,rn,cn,Jt,Mn,Ua,Li,cl,ms,Va,aa,dl,Fi,Yl,Wa,zi,fl,Bi,Ql,Zl,Ga,xo,hl,vo,pl,xa,Qn,Wr,Gr,va,Uu,Zn,Rs,Ha,ml,ia,wa,Sa,Vs,lr,wo,So,Ca,Nr,Ws,fi,Co,gl,Ui,hi,yr,ko,Vi,Pr,pi,yl;const t=L.useRef(),{userId:e}=IM(),[n,r]=L.useState(!0),[s,a]=L.useState(!1),[i,o]=L.useState(!1),[l,u]=L.useState(!1),[c,d]=L.useState("general"),[h,m]=L.useState({email:"",profile:{fullName:"",age:"",gender:"male",height:"",weight:"",goalType:"maintenance",activityLevel:"moderate",privacy:{profileVisibility:"public",showAge:!0,showWeight:!0,showHeight:!0,showBodyMeasurements:!0,showAchievements:!0,showGoals:!0}},physicalData:{goalCalories:0,proteinGrams:0,carbGrams:0,fatGrams:0,bodyFat:0,bmi:0}}),[g,y]=L.useState(!0),[b,w]=L.useState(!1),[C,k]=L.useState(null),[T,N]=L.useState(!1),[I,A]=L.useState(!1),[D,P]=L.useState(null),[R,O]=L.useState([]),[F,z]=L.useState(!0),[V,W]=L.useState(null),j=Wl();L.useEffect(()=>{$e(),Ot()},[e,j]);const q=Ye=>{const{name:ct,value:qt}=Ye.target;m(dn=>({...dn,profile:{...dn.profile,[ct]:qt}}))},Y=(Ye,ct)=>{console.log(`Privacy change: ${Ye} = ${ct}`),m(qt=>({...qt,profile:{...qt.profile,privacy:{...qt.profile.privacy||{},[Ye]:ct}}}))},Q=async Ye=>{var ct,qt;Ye.preventDefault(),w(!0),k(null);try{const dn={fullName:h.profile.fullName,age:parseInt(h.profile.age),gender:h.profile.gender,height:parseFloat(h.profile.height),weight:parseFloat(h.profile.weight),goalType:h.profile.goalType,activityLevel:h.profile.activityLevel,privacy:h.profile.privacy,goals:h.profile.goals,specialization:h.profile.specialization,coachNote:h.profile.coachNote};console.log("Sending data to API:",dn);const jn=await Ze.put("http://localhost:5000/api/users/profile",dn,{headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}});console.log("API response:",jn.data);const kn=qr=>{const Jn=parseFloat(qr);return isNaN(Jn)?void 0:Jn},Hr={height:kn(h.profile.height),weight:kn(h.profile.weight),bodyFat:kn(h.physicalData.bodyFat),waistCircumference:kn(h.physicalData.waistCircumference),neckCircumference:kn(h.physicalData.neckCircumference),hipCircumference:kn(h.physicalData.hipCircumference),chestCircumference:kn(h.physicalData.chestCircumference),bicepCircumference:kn(h.physicalData.bicepCircumference),thighCircumference:kn(h.physicalData.thighCircumference),calfCircumference:kn(h.physicalData.calfCircumference),shoulderWidth:kn(h.physicalData.shoulderWidth)};if(await Ze.put("http://localhost:5000/api/users/physical-data",Hr,{headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}}),jn.data.profile){m(wr=>{var qa,ka,Ka;return{...wr,profile:{...wr.profile,...jn.data.profile,age:((qa=jn.data.profile.age)==null?void 0:qa.toString())||"",height:((ka=jn.data.profile.height)==null?void 0:ka.toString())||"",weight:((Ka=jn.data.profile.weight)==null?void 0:Ka.toString())||"",goals:jn.data.profile.goals||"",coachNote:jn.data.profile.coachNote||"",specialization:jn.data.profile.specialization||""},physicalData:jn.data.physicalData||wr.physicalData}});const qr=JSON.parse(localStorage.getItem("user")||sessionStorage.getItem("user")||"{}"),Jn={...qr,profile:jn.data.profile,physicalData:jn.data.physicalData||qr.physicalData};localStorage.setItem("user",JSON.stringify(Jn)),sessionStorage.setItem("user",JSON.stringify(Jn)),N(!0),setTimeout(()=>N(!1),3e3),await $e()}}catch(dn){console.error("Profile update error:",dn),k(((qt=(ct=dn.response)==null?void 0:ct.data)==null?void 0:qt.message)||"Profil güncellenirken bir hata oluştu")}finally{w(!1)}},H=async Ye=>{var ct,qt;Ye.preventDefault(),w(!0),k(null),N(!1);try{const dn=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");if(!dn){j("/");return}const jn={headers:{Authorization:`Bearer ${dn}`}},kn={privacy:h.profile.privacy};console.log("Sending privacy settings:",kn);const Hr=await Ze.put("http://localhost:5000/api/users/privacy-settings",kn,jn);console.log("Privacy update response:",Hr.data),N(!0),setTimeout(()=>N(!1),3e3)}catch(dn){console.error("Privacy update error:",dn),k(((qt=(ct=dn.response)==null?void 0:ct.data)==null?void 0:qt.message)||"Gizlilik ayarları güncellenemedi")}finally{w(!1)}},ee=async()=>{try{const ct={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}};await Ze.post(`http://localhost:5000/api/friends/request/${e}`,{},ct),o(!0)}catch(Ye){console.error("Arkadaşlık isteği gönderme hatası:",Ye),k("Arkadaşlık isteği gönderilemedi")}},te=async()=>{try{const ct={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}};await Ze.post(`http://localhost:5000/api/friends/accept/${e}`,{},ct),window.refetchAchievementsProgress&&window.refetchAchievementsProgress(),a(!0),u(!1)}catch(Ye){console.error("Arkadaşlık isteği kabul hatası:",Ye),k("Arkadaşlık isteği kabul edilemedi")}},ne=async()=>{try{const ct={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}};await Ze.delete(`http://localhost:5000/api/friends/reject/${e}`,ct),u(!1)}catch(Ye){console.error("Arkadaşlık isteği reddetme hatası:",Ye),k("Arkadaşlık isteği reddedilemedi")}},he=async()=>{try{const ct={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}};await Ze.delete(`http://localhost:5000/api/friends/${e}`,ct),a(!1)}catch(Ye){console.error("Arkadaşlıktan çıkarma hatası:",Ye),k("Arkadaşlıktan çıkarılamadı")}},Se=Ye=>({fat_loss:"Yağ Yakma",muscle_gain:"Kas Kütlesi Kazanma",maintenance:"Mevcut Formu Koruma",endurance:"Dayanıklılık Artırma"})[Ye]||"Belirlenmemiş",Ie=Ye=>({sedentary:"Hareketsiz (Masa başı iş, egzersiz yok)",light:"Hafif (Haftada 1-3 gün egzersiz)",moderate:"Orta (Haftada 3-5 gün egzersiz)",active:"Aktif (Haftada 6-7 gün egzersiz)",very_active:"Çok Aktif (Günde 2 kez antrenman)"})[Ye]||"Belirlenmemiş",Qe=R.filter(Ye=>Ye.earned),Ve=async Ye=>{const ct=Ye.target.files[0];if(!ct)return;const qt=new FormData;qt.append("photo",ct);try{const dn=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");(await(await fetch("http://localhost:5000/api/users/profile/photo",{method:"POST",headers:{Authorization:`Bearer ${dn}`},body:qt})).json()).photoUrl&&$e()}catch{alert("Fotoğraf yüklenirken hata oluştu.")}},$e=async()=>{var Ye,ct,qt,dn,jn,kn,Hr,qr,Jn,wr,qa,ka,Ka,Xa,Jl;try{y(!0);const No=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");if(!No){j("/");return}const mi={headers:{Authorization:`Bearer ${No}`}},de=await Ze.get(`http://localhost:5000/api/users/profile${e?`/${e}`:""}`,mi);if(console.log("Profile.jsx API response:",de.data),de.data){const He={email:de.data.email||"",userType:de.data.userType||"",profile:{fullName:((Ye=de.data.profile)==null?void 0:Ye.fullName)||"",age:((qt=(ct=de.data.profile)==null?void 0:ct.age)==null?void 0:qt.toString())||"",gender:((dn=de.data.profile)==null?void 0:dn.gender)||"male",height:((kn=(jn=de.data.profile)==null?void 0:jn.height)==null?void 0:kn.toString())||"",weight:((qr=(Hr=de.data.profile)==null?void 0:Hr.weight)==null?void 0:qr.toString())||"",goalType:((Jn=de.data.profile)==null?void 0:Jn.goalType)||"maintenance",activityLevel:((wr=de.data.profile)==null?void 0:wr.activityLevel)||"moderate",privacy:((qa=de.data.profile)==null?void 0:qa.privacy)||{profileVisibility:"public",showAge:!0,showWeight:!0,showHeight:!0,showBodyMeasurements:!0,showAchievements:!0,showGoals:!0},goals:((ka=de.data.profile)==null?void 0:ka.goals)||"",coachNote:((Ka=de.data.profile)==null?void 0:Ka.coachNote)||"",specialization:((Xa=de.data.profile)==null?void 0:Xa.specialization)||"",photoUrl:((Jl=de.data.profile)==null?void 0:Jl.photoUrl)||""},physicalData:de.data.physicalData||{goalCalories:0,proteinGrams:0,carbGrams:0,fatGrams:0,bodyFat:0,bmi:0},isPrivate:de.data.isPrivate||!1,friendsOnly:de.data.friendsOnly||!1};m(He),console.log("Profile.jsx setUserData:",He),localStorage.setItem("user",JSON.stringify(de.data)),sessionStorage.setItem("user",JSON.stringify(de.data))}}catch(No){console.error("Error fetching user data:",No),k("Kullanıcı bilgileri alınamadı")}finally{y(!1)}},We=(Ye,ct,qt,dn)=>!Ye||!ct||!qt||!dn?null:dn==="male"?88.362+13.397*Ye+4.799*ct-5.677*qt:dn==="female"?447.593+9.247*Ye+3.098*ct-4.33*qt:(88.362+13.397*Ye+4.799*ct-5.677*qt+447.593+9.247*Ye+3.098*ct-4.33*qt)/2,ze=Ye=>{switch(Ye){case"sedentary":return 1.2;case"light":return 1.375;case"moderate":return 1.55;case"active":return 1.725;case"very_active":return 1.9;default:return 1.2}},ke=(Ye,ct)=>{switch(ct){case"fat_loss":return Ye-400;case"muscle_gain":return Ye+300;case"maintenance":return Ye;case"endurance":return Ye+100;default:return Ye}},et=(Ye,ct)=>{if(!Ye||!ct)return{protein:null,carb:null,fat:null};const qt=Ye*2,dn=Ye*1,jn=qt*4,kn=dn*9,Hr=ct-(jn+kn),qr=Hr>0?Hr/4:0;return{protein:Math.round(qt),fat:Math.round(dn),carb:Math.round(qr)}},Je=parseFloat((Wn=h==null?void 0:h.profile)==null?void 0:Wn.height),Re=parseFloat((rn=h==null?void 0:h.profile)==null?void 0:rn.weight),Ke=parseInt((cn=h==null?void 0:h.profile)==null?void 0:cn.age),xe=(Jt=h==null?void 0:h.profile)==null?void 0:Jt.gender,De=(Mn=h==null?void 0:h.profile)==null?void 0:Mn.activityLevel,at=(Ua=h==null?void 0:h.profile)==null?void 0:Ua.goalType,Xe=We(Re,Je,Ke,xe),Nt=Xe?Xe*ze(De):null,Be=Nt?Math.round(ke(Nt,at)):null,Tt=et(Re,Be),Ot=async()=>{z(!0),W(null);try{const Ye=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");if(!Ye)return;const ct={headers:{Authorization:`Bearer ${Ye}`}},dn=(await Ze.get("http://localhost:5000/api/achievements/progress",ct)).data.progress||[],jn=TS.map(kn=>{const Hr=dn.find(qr=>(qr.id||"").toLowerCase().trim()===(kn.id||"").toLowerCase().trim())||{};return{...kn,progress:typeof Hr.progress=="number"?Hr.progress:0,earned:!!Hr.earned}});O(jn)}catch{W("Rozetler yüklenemedi")}finally{z(!1)}};return g?v.jsx("div",{className:"flex items-center justify-center min-h-screen",children:v.jsx("div",{className:"text-primary text-xl",children:"Yükleniyor..."})}):v.jsxs("div",{className:"pt-4 pb-20 md:pb-6 px-4",children:[v.jsxs(Vt,{to:"/dashboard",className:"mb-6 flex items-center text-yellow-500 hover:text-yellow-400 transition duration-200",children:[v.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Panele Dön"]}),v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg rounded-xl shadow-lg p-6 border border-gray-800 mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold mb-4 text-yellow-500",children:"Profil Bilgileri"}),n&&v.jsxs("div",{className:"flex mb-6 border-b border-gray-800",children:[v.jsx("button",{className:`pb-2 px-4 ${c==="general"?"text-yellow-500 border-b-2 border-yellow-500":"text-gray-400 hover:text-gray-300"}`,onClick:()=>d("general"),children:"Genel Bilgiler"}),v.jsx("button",{className:`pb-2 px-4 ${c==="privacy"?"text-yellow-500 border-b-2 border-yellow-500":"text-gray-400 hover:text-gray-300"}`,onClick:()=>d("privacy"),children:"Gizlilik Ayarları"})]}),C&&v.jsx("div",{className:"bg-red-900 bg-opacity-60 text-red-200 p-3 rounded-lg mb-4",children:C}),T&&v.jsx("div",{className:"bg-green-900 bg-opacity-60 text-green-200 p-3 rounded-lg mb-4",children:"Profil başarıyla güncellendi!"}),v.jsxs("div",{className:"flex flex-col md:flex-row",children:[v.jsxs("div",{className:"md:w-1/3 mb-6 md:mb-0 flex flex-col items-center",children:[v.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-800 border-2 border-yellow-500 mb-4 flex items-center justify-center overflow-hidden",children:(Li=h==null?void 0:h.profile)!=null&&Li.photoUrl?v.jsx("img",{src:h.profile.photoUrl.startsWith("http")?h.profile.photoUrl:`http://localhost:5000${h.profile.photoUrl}`,alt:"Profil Fotoğrafı",className:"w-full h-full object-cover"}):v.jsx("svg",{className:"w-16 h-16 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),n&&v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"px-4 py-2 bg-yellow-500 text-black font-medium rounded-lg hover:bg-yellow-400 transition duration-300",onClick:()=>t.current.click(),children:"Fotoğraf Değiştir"}),v.jsx("input",{type:"file",accept:"image/*",ref:t,style:{display:"none"},onChange:Ve})]}),!n&&v.jsx("div",{className:"mt-4",children:s?v.jsx("button",{className:"px-4 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition duration-300",onClick:he,children:"Arkadaşlıktan Çıkar"}):i?v.jsx("button",{className:"px-4 py-2 bg-gray-600 text-white font-medium rounded-lg cursor-not-allowed",disabled:!0,children:"İstek Gönderildi"}):l?v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{className:"px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition duration-300",onClick:te,children:"İsteği Kabul Et"}),v.jsx("button",{className:"px-4 py-2 bg-gray-600 text-white font-medium rounded-lg hover:bg-gray-700 transition duration-300",onClick:ne,children:"İsteği Reddet"})]}):v.jsx("button",{className:"px-4 py-2 bg-yellow-500 text-black font-medium rounded-lg hover:bg-yellow-400 transition duration-300",onClick:ee,children:"Arkadaş Ekle"})}),v.jsxs("div",{className:"mt-6 w-full bg-gray-800 bg-opacity-40 p-4 rounded-lg",children:[v.jsx("h4",{className:"text-yellow-500 font-medium mb-2",children:"Fitness Amacınız"}),v.jsx("p",{className:"text-gray-300",children:Se((cl=h==null?void 0:h.profile)==null?void 0:cl.goalType)}),v.jsx("h4",{className:"text-yellow-500 font-medium mt-4 mb-2",children:"Aktivite Seviyesi"}),v.jsx("p",{className:"text-gray-300",children:Ie((ms=h==null?void 0:h.profile)==null?void 0:ms.activityLevel)})]}),v.jsxs("div",{className:"mt-6 w-full bg-gray-800 bg-opacity-40 p-4 rounded-lg",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("h4",{className:"text-yellow-500 font-medium",children:"Rozetlerim"}),v.jsx(Vt,{to:"/achievements",className:"text-xs text-yellow-400 hover:text-yellow-300",children:"Tümünü Gör"})]}),v.jsx("div",{className:"flex justify-center mb-2",children:v.jsxs("span",{className:"flex items-center bg-gray-900 px-3 py-1 rounded-full text-sm",children:[v.jsx(jM,{className:"text-yellow-500 mr-1 w-4 h-4"}),v.jsxs("span",{className:"text-gray-300",children:[F?"...":Qe.length," rozet kazandın"]})]})}),F?v.jsx("div",{className:"text-center text-gray-500 text-sm py-2",children:"Yükleniyor..."}):V?v.jsx("div",{className:"text-center text-red-500 text-sm py-2",children:V}):Qe.length>0?v.jsx(qX,{achievements:Qe.slice(0,3),size:"sm",onBadgeClick:P}):v.jsx("div",{className:"text-center text-gray-500 text-sm py-2",children:"Henüz rozet kazanılmadı"})]})]}),v.jsx("div",{className:"md:w-2/3 md:pl-6",children:n?v.jsxs(v.Fragment,{children:[c==="general"&&v.jsxs("form",{className:"space-y-4",onSubmit:Q,children:[v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"fullName",children:"Ad Soyad"}),v.jsx("input",{id:"fullName",name:"fullName",type:"text",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",value:((Va=h==null?void 0:h.profile)==null?void 0:Va.fullName)||"",onChange:q})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"email",children:"E-posta"}),v.jsx("input",{id:"email",type:"email",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg text-gray-400",value:(h==null?void 0:h.email)||"",disabled:!0})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"age",children:"Yaş"}),v.jsx("input",{id:"age",name:"age",type:"number",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",value:((aa=h==null?void 0:h.profile)==null?void 0:aa.age)||"",onChange:q})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"gender",children:"Cinsiyet"}),v.jsxs("select",{id:"gender",name:"gender",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",value:((dl=h==null?void 0:h.profile)==null?void 0:dl.gender)||"male",onChange:q,children:[v.jsx("option",{value:"male",children:"Erkek"}),v.jsx("option",{value:"female",children:"Kadın"}),v.jsx("option",{value:"other",children:"Diğer"})]})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"height",children:"Boy (cm)"}),v.jsx("input",{id:"height",name:"height",type:"number",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",value:((Fi=h==null?void 0:h.profile)==null?void 0:Fi.height)||"",onChange:q})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"weight",children:"Kilo (kg)"}),v.jsx("input",{id:"weight",name:"weight",type:"number",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",value:((Yl=h==null?void 0:h.profile)==null?void 0:Yl.weight)||"",onChange:q})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"goalType",children:"Fitness Amacı"}),v.jsxs("select",{id:"goalType",name:"goalType",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",value:((Wa=h==null?void 0:h.profile)==null?void 0:Wa.goalType)||"maintenance",onChange:q,children:[v.jsx("option",{value:"fat_loss",children:"Yağ Yakma"}),v.jsx("option",{value:"muscle_gain",children:"Kas Kütlesi Kazanma"}),v.jsx("option",{value:"maintenance",children:"Formumu Koruma"}),v.jsx("option",{value:"endurance",children:"Dayanıklılık Artırma"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"activityLevel",children:"Aktivite Seviyesi"}),v.jsxs("select",{id:"activityLevel",name:"activityLevel",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",value:((zi=h==null?void 0:h.profile)==null?void 0:zi.activityLevel)||"moderate",onChange:q,children:[v.jsx("option",{value:"sedentary",children:"Hareketsiz (Masa başı)"}),v.jsx("option",{value:"light",children:"Hafif (Haftada 1-3 gün)"}),v.jsx("option",{value:"moderate",children:"Orta (Haftada 3-5 gün)"}),v.jsx("option",{value:"active",children:"Aktif (Haftada 6-7 gün)"}),v.jsx("option",{value:"very_active",children:"Çok Aktif (Günde 2 kez)"})]})]})]}),v.jsxs("div",{className:"mt-6",children:[v.jsx("h3",{className:"text-lg font-medium text-gray-200 mb-4",children:"Vücut Ölçüleri"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"bodyFat",children:"Vücut Yağ Oranı (%)"}),v.jsx("input",{id:"bodyFat",name:"bodyFat",type:"number",step:"0.1",min:"0",max:"100",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",value:((fl=h==null?void 0:h.physicalData)==null?void 0:fl.bodyFat)||"",onChange:Ye=>m(ct=>({...ct,physicalData:{...ct.physicalData,bodyFat:Ye.target.value}}))})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"waistCircumference",children:"Bel Çevresi (cm)"}),v.jsx("input",{id:"waistCircumference",name:"waistCircumference",type:"number",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",value:((Bi=h==null?void 0:h.physicalData)==null?void 0:Bi.waistCircumference)||"",onChange:Ye=>m(ct=>({...ct,physicalData:{...ct.physicalData,waistCircumference:Ye.target.value}}))})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"neckCircumference",children:"Boyun Çevresi (cm)"}),v.jsx("input",{id:"neckCircumference",name:"neckCircumference",type:"number",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",value:((Ql=h==null?void 0:h.physicalData)==null?void 0:Ql.neckCircumference)||"",onChange:Ye=>m(ct=>({...ct,physicalData:{...ct.physicalData,neckCircumference:Ye.target.value}}))})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"hipCircumference",children:"Kalça Çevresi (cm)"}),v.jsx("input",{id:"hipCircumference",name:"hipCircumference",type:"number",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",value:((Zl=h==null?void 0:h.physicalData)==null?void 0:Zl.hipCircumference)||"",onChange:Ye=>m(ct=>({...ct,physicalData:{...ct.physicalData,hipCircumference:Ye.target.value}}))})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"chestCircumference",children:"Göğüs Çevresi (cm)"}),v.jsx("input",{id:"chestCircumference",name:"chestCircumference",type:"number",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",value:((Ga=h==null?void 0:h.physicalData)==null?void 0:Ga.chestCircumference)||"",onChange:Ye=>m(ct=>({...ct,physicalData:{...ct.physicalData,chestCircumference:Ye.target.value}}))})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"bicepCircumference",children:"Kol Çevresi (cm)"}),v.jsx("input",{id:"bicepCircumference",name:"bicepCircumference",type:"number",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",value:((xo=h==null?void 0:h.physicalData)==null?void 0:xo.bicepCircumference)||"",onChange:Ye=>m(ct=>({...ct,physicalData:{...ct.physicalData,bicepCircumference:Ye.target.value}}))})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"thighCircumference",children:"Bacak Çevresi (cm)"}),v.jsx("input",{id:"thighCircumference",name:"thighCircumference",type:"number",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",value:((hl=h==null?void 0:h.physicalData)==null?void 0:hl.thighCircumference)||"",onChange:Ye=>m(ct=>({...ct,physicalData:{...ct.physicalData,thighCircumference:Ye.target.value}}))})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"calfCircumference",children:"Baldır Çevresi (cm)"}),v.jsx("input",{id:"calfCircumference",name:"calfCircumference",type:"number",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",value:((vo=h==null?void 0:h.physicalData)==null?void 0:vo.calfCircumference)||"",onChange:Ye=>m(ct=>({...ct,physicalData:{...ct.physicalData,calfCircumference:Ye.target.value}}))})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"shoulderWidth",children:"Omuz Genişliği (cm)"}),v.jsx("input",{id:"shoulderWidth",name:"shoulderWidth",type:"number",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",value:((pl=h==null?void 0:h.physicalData)==null?void 0:pl.shoulderWidth)||"",onChange:Ye=>m(ct=>({...ct,physicalData:{...ct.physicalData,shoulderWidth:Ye.target.value}}))})]})]})]}),((xa=h==null?void 0:h.userType)==null?void 0:xa.toLowerCase())==="coach"&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"mt-4",children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"coachNote",children:"Sporcularıma Mesajım (Antrenör Açıklaması)"}),v.jsx("textarea",{id:"coachNote",name:"coachNote",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",placeholder:"Sporcularınıza özel bir açıklama veya motivasyon mesajı yazabilirsiniz.",value:((Qn=h==null?void 0:h.profile)==null?void 0:Qn.coachNote)||"",onChange:q,rows:3})]}),v.jsxs("div",{className:"mt-4",children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"specialization",children:"Uzmanlık Alanı"}),v.jsx("input",{id:"specialization",name:"specialization",type:"text",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",placeholder:"Ör: Fonksiyonel Antrenman, Kuvvet, Pilates...",value:((Wr=h==null?void 0:h.profile)==null?void 0:Wr.specialization)||"",onChange:q})]})]}),v.jsxs("div",{className:"flex justify-end space-x-4",children:[v.jsx(Vt,{to:"/dashboard",className:"px-4 py-2 border border-gray-700 rounded-lg hover:bg-gray-800 transition duration-200 text-gray-300",children:"İptal"}),v.jsx("button",{type:"submit",className:"px-4 py-2 bg-yellow-500 text-black font-medium rounded-lg hover:bg-yellow-400 transition duration-300",disabled:b,children:b?"Kaydediliyor...":"Kaydet"})]})]}),c==="privacy"&&v.jsxs("form",{className:"space-y-4",onSubmit:H,children:[v.jsxs("div",{className:"bg-gray-800 bg-opacity-40 p-4 rounded-lg mb-4",children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-2",children:"Profil Görünürlüğü"}),v.jsx("p",{className:"text-gray-400 mb-3 text-sm",children:"Profilinizin kimler tarafından görüntülenebileceğini seçin."}),v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{type:"radio",id:"visibility-public",name:"profileVisibility",value:"public",checked:((Gr=h.profile.privacy)==null?void 0:Gr.profileVisibility)==="public",onChange:Ye=>Y("profileVisibility",Ye.target.value),className:"mr-2"}),v.jsxs("label",{htmlFor:"visibility-public",className:"text-gray-300",children:[v.jsx("span",{className:"font-medium",children:"Herkese Açık"}),v.jsx("p",{className:"text-xs text-gray-400",children:"Herkes profilinizi görebilir"})]})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{type:"radio",id:"visibility-friends",name:"profileVisibility",value:"friends_only",checked:((va=h.profile.privacy)==null?void 0:va.profileVisibility)==="friends_only",onChange:Ye=>Y("profileVisibility",Ye.target.value),className:"mr-2"}),v.jsxs("label",{htmlFor:"visibility-friends",className:"text-gray-300",children:[v.jsx("span",{className:"font-medium",children:"Sadece Arkadaşlar"}),v.jsx("p",{className:"text-xs text-gray-400",children:"Sadece arkadaşlarınız profilinizi görebilir"})]})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{type:"radio",id:"visibility-private",name:"profileVisibility",value:"private",checked:((Uu=h.profile.privacy)==null?void 0:Uu.profileVisibility)==="private",onChange:Ye=>{Y("profileVisibility",Ye.target.value),Y("showAge",!1),Y("showWeight",!1),Y("showHeight",!1),Y("showBodyMeasurements",!1),Y("showAchievements",!1),Y("showGoals",!1)},className:"mr-2"}),v.jsxs("label",{htmlFor:"visibility-private",className:"text-gray-300",children:[v.jsx("span",{className:"font-medium",children:"Gizli"}),v.jsx("p",{className:"text-xs text-gray-400",children:"Profiliniz diğer kullanıcılara gösterilmez"})]})]})]})]}),v.jsxs("div",{className:"bg-gray-800 bg-opacity-40 p-4 rounded-lg",children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-200 mb-2",children:"Bilgi Görünürlüğü"}),v.jsx("p",{className:"text-gray-400 mb-3 text-sm",children:"Profilinizde hangi bilgilerin görüntüleneceğini seçin."}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{type:"checkbox",id:"show-age",checked:(Zn=h.profile.privacy)==null?void 0:Zn.showAge,onChange:Ye=>Y("showAge",Ye.target.checked),className:"mr-2",disabled:((Rs=h.profile.privacy)==null?void 0:Rs.profileVisibility)==="private"}),v.jsx("label",{htmlFor:"show-age",className:((Ha=h.profile.privacy)==null?void 0:Ha.profileVisibility)==="private"?"text-gray-500":"text-gray-300",children:"Yaşımı Göster"})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{type:"checkbox",id:"show-weight",checked:(ml=h.profile.privacy)==null?void 0:ml.showWeight,onChange:Ye=>Y("showWeight",Ye.target.checked),className:"mr-2",disabled:((ia=h.profile.privacy)==null?void 0:ia.profileVisibility)==="private"}),v.jsx("label",{htmlFor:"show-weight",className:((wa=h.profile.privacy)==null?void 0:wa.profileVisibility)==="private"?"text-gray-500":"text-gray-300",children:"Kilomu Göster"})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{type:"checkbox",id:"show-height",checked:(Sa=h.profile.privacy)==null?void 0:Sa.showHeight,onChange:Ye=>Y("showHeight",Ye.target.checked),className:"mr-2",disabled:((Vs=h.profile.privacy)==null?void 0:Vs.profileVisibility)==="private"}),v.jsx("label",{htmlFor:"show-height",className:((lr=h.profile.privacy)==null?void 0:lr.profileVisibility)==="private"?"text-gray-500":"text-gray-300",children:"Boyumu Göster"})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{type:"checkbox",id:"show-body-measurements",checked:(wo=h.profile.privacy)==null?void 0:wo.showBodyMeasurements,onChange:Ye=>Y("showBodyMeasurements",Ye.target.checked),className:"mr-2",disabled:((So=h.profile.privacy)==null?void 0:So.profileVisibility)==="private"}),v.jsx("label",{htmlFor:"show-body-measurements",className:((Ca=h.profile.privacy)==null?void 0:Ca.profileVisibility)==="private"?"text-gray-500":"text-gray-300",children:"Vücut Ölçülerimi Göster"})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{type:"checkbox",id:"show-achievements",checked:(Nr=h.profile.privacy)==null?void 0:Nr.showAchievements,onChange:Ye=>Y("showAchievements",Ye.target.checked),className:"mr-2",disabled:((Ws=h.profile.privacy)==null?void 0:Ws.profileVisibility)==="private"}),v.jsx("label",{htmlFor:"show-achievements",className:((fi=h.profile.privacy)==null?void 0:fi.profileVisibility)==="private"?"text-gray-500":"text-gray-300",children:"Rozetlerimi Göster"})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{type:"checkbox",id:"show-goals",checked:(Co=h.profile.privacy)==null?void 0:Co.showGoals,onChange:Ye=>Y("showGoals",Ye.target.checked),className:"mr-2",disabled:((gl=h.profile.privacy)==null?void 0:gl.profileVisibility)==="private"}),v.jsx("label",{htmlFor:"show-goals",className:((Ui=h.profile.privacy)==null?void 0:Ui.profileVisibility)==="private"?"text-gray-500":"text-gray-300",children:"Hedeflerimi Göster"})]})]})]}),v.jsxs("div",{className:"flex justify-end space-x-4",children:[v.jsx("button",{type:"button",onClick:()=>d("general"),className:"px-4 py-2 border border-gray-700 rounded-lg hover:bg-gray-800 transition duration-200 text-gray-300",children:"Geri"}),v.jsx("button",{type:"submit",className:"px-4 py-2 bg-yellow-500 text-black font-medium rounded-lg hover:bg-yellow-400 transition duration-300",disabled:b,children:b?"Kaydediliyor...":"Kaydet"})]})]})]}):v.jsxs("div",{className:"space-y-4",children:[(h==null?void 0:h.isPrivate)&&v.jsx("div",{className:"bg-gray-800 bg-opacity-50 p-4 rounded-lg text-center",children:v.jsxs("div",{className:"flex flex-col items-center mb-3",children:[v.jsx("svg",{className:"w-12 h-12 text-gray-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 15v2m0 0v2m0-2h2m-2 0H9m3-3a3 3 0 100-6 3 3 0 000 6zm0-9a9 9 0 00-9 9v7h6v-7a3 3 0 016 0v7h6v-7a9 9 0 00-9-9z"})}),v.jsx("h3",{className:"text-lg font-medium text-gray-300",children:"Gizli Profil"}),v.jsx("p",{className:"text-gray-400 mt-2",children:"Bu kullanıcı profilini gizli tutmayı tercih etmiştir."})]})}),(h==null?void 0:h.friendsOnly)&&v.jsx("div",{className:"bg-gray-800 bg-opacity-50 p-4 rounded-lg text-center",children:v.jsxs("div",{className:"flex flex-col items-center mb-3",children:[v.jsx("svg",{className:"w-12 h-12 text-gray-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),v.jsx("h3",{className:"text-lg font-medium text-gray-300",children:"Sadece Arkadaşlara Açık Profil"}),v.jsx("p",{className:"text-gray-400 mt-2",children:"Bu kullanıcının profil bilgileri sadece arkadaşlarına açıktır. Profil bilgilerini görüntülemek için arkadaşlık isteği gönderebilirsiniz."})]})}),!(h!=null&&h.isPrivate)&&!(h!=null&&h.friendsOnly)&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-gray-300 font-medium mb-1",children:"Ad Soyad"}),v.jsx("p",{className:"text-gray-400",children:((hi=h==null?void 0:h.profile)==null?void 0:hi.fullName)||"--"})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-gray-300 font-medium mb-1",children:"Yaş"}),v.jsx("p",{className:"text-gray-400",children:((yr=h==null?void 0:h.profile)==null?void 0:yr.age)||"--"})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-gray-300 font-medium mb-1",children:"Boy"}),v.jsxs("p",{className:"text-gray-400",children:[((ko=h==null?void 0:h.profile)==null?void 0:ko.height)||"--"," cm"]})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-gray-300 font-medium mb-1",children:"Kilo"}),v.jsxs("p",{className:"text-gray-400",children:[((Vi=h==null?void 0:h.profile)==null?void 0:Vi.weight)||"--"," kg"]})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-gray-300 font-medium mb-1",children:"Fitness Amacı"}),v.jsx("p",{className:"text-gray-400",children:Se((Pr=h==null?void 0:h.profile)==null?void 0:Pr.goalType)})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-gray-300 font-medium mb-1",children:"Aktivite Seviyesi"}),v.jsx("p",{className:"text-gray-400",children:Ie((pi=h==null?void 0:h.profile)==null?void 0:pi.activityLevel)})]})]})]})]})})]}),v.jsxs("div",{className:"mt-8 border-t border-gray-800 pt-6",children:[v.jsx("h3",{className:"text-lg font-medium text-red-500 mb-4",children:"Tehlikeli Bölge"}),v.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Hesabınızı silmek tüm verilerinizi kalıcı olarak kaldırır ve bu işlem geri alınamaz."}),v.jsx("button",{onClick:()=>A(!0),className:"bg-red-900 bg-opacity-50 hover:bg-opacity-70 text-red-200 px-4 py-2 rounded-lg border border-red-800 transition duration-200",children:"Hesabımı Sil"})]})]}),v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg rounded-xl shadow-lg p-6 border border-gray-800 mb-6",children:[v.jsx("h3",{className:"text-xl font-bold mb-6 text-yellow-500",children:"Beslenme Önerileri"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"mb-4",children:[v.jsx("h4",{className:"text-lg font-medium mb-1 text-gray-200",children:"Kalori İhtiyacı"}),v.jsx("p",{className:"text-sm text-gray-400 mb-3",children:h.profile.goalType==="fat_loss"?"Yağ yakmak için kalori açığı oluşturulmuştur.":h.profile.goalType==="muscle_gain"?"Kas geliştirmek için kalori fazlası önerilmektedir.":"Mevcut formunuzu korumak için ihtiyacınız olan kalori miktarı."}),v.jsxs("div",{className:"bg-gray-800 bg-opacity-50 p-3 rounded-lg flex justify-between items-center",children:[v.jsx("span",{className:"text-gray-300",children:"Günlük Kalori Hedefi:"}),v.jsxs("span",{className:"text-2xl font-bold text-yellow-500",children:[Be||"--"," ",v.jsx("span",{className:"text-sm text-gray-400",children:"kcal"})]})]})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-lg font-medium mb-3 text-gray-200",children:"Makro Besin Dağılımı"}),v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"bg-gray-800 bg-opacity-30 p-3 rounded-lg flex justify-between items-center",children:[v.jsxs("div",{children:[v.jsx("span",{className:"text-yellow-500 font-medium",children:"Protein"}),v.jsx("p",{className:"text-xs text-gray-400",children:"Kas onarımı ve yapımı için"})]}),v.jsxs("span",{className:"text-lg font-bold text-gray-200",children:[Tt.protein||"--"," ",v.jsx("span",{className:"text-sm text-gray-400",children:"g"})]})]}),v.jsxs("div",{className:"bg-gray-800 bg-opacity-30 p-3 rounded-lg flex justify-between items-center",children:[v.jsxs("div",{children:[v.jsx("span",{className:"text-yellow-500 font-medium",children:"Karbonhidrat"}),v.jsx("p",{className:"text-xs text-gray-400",children:"Enerji kaynağı olarak"})]}),v.jsxs("span",{className:"text-lg font-bold text-gray-200",children:[Tt.carb||"--"," ",v.jsx("span",{className:"text-sm text-gray",children:"g"})]})]}),v.jsxs("div",{className:"bg-gray-800 bg-opacity-30 p-3 rounded-lg flex justify-between items-center",children:[v.jsxs("div",{children:[v.jsx("span",{className:"text-yellow-500 font-medium",children:"Yağ"}),v.jsx("p",{className:"text-xs text-gray-400",children:"Hormon üretimi ve hücre sağlığı için"})]}),v.jsxs("span",{className:"text-lg font-bold text-gray-200",children:[Tt.fat||"--"," ",v.jsx("span",{className:"text-sm text-gray-400",children:"g"})]})]})]})]})]}),v.jsx("div",{children:v.jsxs("div",{className:"bg-gray-800 bg-opacity-30 rounded-lg p-4 h-full",children:[v.jsx("h4",{className:"text-lg font-medium mb-3 text-gray-200",children:"Besin Oranları"}),Tt.protein&&Tt.carb&&Tt.fat&&Be?v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"mb-3",children:[v.jsxs("div",{className:"flex justify-between mb-1",children:[v.jsx("span",{className:"text-sm text-gray-400",children:"Protein"}),v.jsxs("span",{className:"text-sm text-gray-400",children:[Math.round(Tt.protein*4/Be*100),"%"]})]}),v.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2.5",children:v.jsx("div",{className:"bg-yellow-500 h-2.5 rounded-full",style:{width:`${Math.round(Tt.protein*4/Be*100)}%`}})})]}),v.jsxs("div",{className:"mb-3",children:[v.jsxs("div",{className:"flex justify-between mb-1",children:[v.jsx("span",{className:"text-sm text-gray-400",children:"Karbonhidrat"}),v.jsxs("span",{className:"text-sm text-gray-400",children:[Math.round(Tt.carb*4/Be*100),"%"]})]}),v.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2.5",children:v.jsx("div",{className:"bg-yellow-500 h-2.5 rounded-full",style:{width:`${Math.round(Tt.carb*4/Be*100)}%`}})})]}),v.jsxs("div",{className:"mb-3",children:[v.jsxs("div",{className:"flex justify-between mb-1",children:[v.jsx("span",{className:"text-sm text-gray-400",children:"Yağ"}),v.jsxs("span",{className:"text-sm text-gray-400",children:[Math.round(Tt.fat*9/Be*100),"%"]})]}),v.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2.5",children:v.jsx("div",{className:"bg-yellow-500 h-2.5 rounded-full",style:{width:`${Math.round(Tt.fat*9/Be*100)}%`}})})]}),v.jsxs("div",{className:"mt-6 p-3 bg-gray-800 rounded-lg",children:[v.jsx("h5",{className:"text-sm font-medium text-yellow-500 mb-2",children:"Öneri"}),v.jsx("p",{className:"text-sm text-gray-300",children:h.profile.goalType==="fat_loss"?"Yağ yakmak için yüksek protein alımı ve düşük karbonhidrat oranı önerilmektedir. Öğünlerinizde protein kaynaklarına öncelik verin.":h.profile.goalType==="muscle_gain"?"Kas kütlesi kazanmak için yüksek karbonhidrat ve protein alımı önemlidir. Antrenman sonrası karbonhidrat ve protein açısından zengin bir öğün tüketin.":h.profile.goalType==="endurance"?"Dayanıklılık için karbonhidrat ağırlıklı beslenme önerilir. Uzun antrenmanlar öncesi kompleks karbonhidratlar tüketin.":"Mevcut formunuzu korumak için dengeli bir makro besin dağılımı izlemeniz önerilir."})]})]}):v.jsx("div",{className:"flex items-center justify-center h-64 text-gray-400",children:"Makro besin dağılımı hesaplanırken boy, kilo ve hedef bilgileriniz kullanılır."})]})})]})]}),v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg rounded-xl shadow-lg p-6 border border-gray-800",children:[v.jsx("h3",{className:"text-xl font-bold mb-6 text-yellow-500",children:"Fiziksel Ölçümler"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[v.jsxs("div",{className:"bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700",children:[v.jsx("h4",{className:"text-lg font-medium mb-1 text-gray-300",children:"Boy"}),v.jsxs("p",{className:"text-2xl font-bold text-yellow-500",children:[h.profile.height||"--"," ",v.jsx("span",{className:"text-sm text-gray-500",children:"cm"})]})]}),v.jsxs("div",{className:"bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700",children:[v.jsx("h4",{className:"text-lg font-medium mb-1 text-gray-300",children:"Kilo"}),v.jsxs("p",{className:"text-2xl font-bold text-yellow-500",children:[h.profile.weight||"--"," ",v.jsx("span",{className:"text-sm text-gray-500",children:"kg"})]})]}),v.jsxs("div",{className:"bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700",children:[v.jsxs("h4",{className:"text-lg font-medium mb-1 text-gray-300",children:["Vücut Yağ Oranı"," ",v.jsx("span",{className:"text-xs text-gray-500",children:"(Tahmini)"})]}),v.jsxs("p",{className:"text-2xl font-bold text-yellow-500",children:[h.physicalData.bodyFat||"--","%"," ",v.jsx("span",{className:"text-sm text-gray-500"})]})]}),v.jsxs("div",{className:"bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700",children:[v.jsx("h4",{className:"text-lg font-medium mb-1 text-gray-300",children:"Bel Çevresi"}),v.jsxs("p",{className:"text-2xl font-bold text-yellow-500",children:[h.physicalData.waistCircumference||"--"," ",v.jsx("span",{className:"text-sm text-gray-500",children:"cm"})]})]}),v.jsxs("div",{className:"bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700",children:[v.jsx("h4",{className:"text-lg font-medium mb-1 text-gray-300",children:"Boyun Çevresi"}),v.jsxs("p",{className:"text-2xl font-bold text-yellow-500",children:[h.physicalData.neckCircumference||"--"," ",v.jsx("span",{className:"text-sm text-gray-500",children:"cm"})]})]}),v.jsxs("div",{className:"bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700",children:[v.jsx("h4",{className:"text-lg font-medium mb-1 text-gray-300",children:"Kalça Çevresi"}),v.jsxs("p",{className:"text-2xl font-bold text-yellow-500",children:[h.physicalData.hipCircumference||"--"," ",v.jsx("span",{className:"text-sm text-gray-500",children:"cm"})]})]}),v.jsxs("div",{className:"bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700",children:[v.jsx("h4",{className:"text-lg font-medium mb-1 text-gray-300",children:"Göğüs Çevresi"}),v.jsxs("p",{className:"text-2xl font-bold text-yellow-500",children:[h.physicalData.chestCircumference||"--"," ",v.jsx("span",{className:"text-sm text-gray-500",children:"cm"})]})]}),v.jsxs("div",{className:"bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700",children:[v.jsx("h4",{className:"text-lg font-medium mb-1 text-gray-300",children:"Kol Çevresi"}),v.jsxs("p",{className:"text-2xl font-bold text-yellow-500",children:[h.physicalData.bicepCircumference||"--"," ",v.jsx("span",{className:"text-sm text-gray-500",children:"cm"})]})]}),v.jsxs("div",{className:"bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700",children:[v.jsx("h4",{className:"text-lg font-medium mb-1 text-gray-300",children:"Bacak Çevresi"}),v.jsxs("p",{className:"text-2xl font-bold text-yellow-500",children:[h.physicalData.thighCircumference||"--"," ",v.jsx("span",{className:"text-sm text-gray-500",children:"cm"})]})]}),v.jsxs("div",{className:"bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700",children:[v.jsx("h4",{className:"text-lg font-medium mb-1 text-gray-300",children:"Baldır Çevresi"}),v.jsxs("p",{className:"text-2xl font-bold text-yellow-500",children:[h.physicalData.calfCircumference||"--"," ",v.jsx("span",{className:"text-sm text-gray-500",children:"cm"})]})]}),v.jsxs("div",{className:"bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700",children:[v.jsx("h4",{className:"text-lg font-medium mb-1 text-gray-300",children:"Omuz Genişliği"}),v.jsxs("p",{className:"text-2xl font-bold text-yellow-500",children:[h.physicalData.shoulderWidth||"--"," ",v.jsx("span",{className:"text-sm text-gray-500",children:"cm"})]})]})]}),((yl=h.physicalData)==null?void 0:yl.bmi)&&v.jsxs("div",{className:"bg-gray-800 bg-opacity-30 p-4 rounded-lg mb-6",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsxs("div",{children:[v.jsx("h4",{className:"text-lg font-medium text-gray-300",children:"Vücut Kitle İndeksi (BMI)"}),v.jsx("p",{className:"text-sm text-gray-400",children:"Boy ve kilonuz baz alınarak hesaplanan değer"})]}),v.jsx("p",{className:"text-2xl font-bold text-yellow-500",children:h.physicalData.bmi})]}),v.jsxs("div",{className:"mt-4",children:[v.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2.5 mb-2",children:v.jsx("div",{className:`h-2.5 rounded-full ${h.physicalData.bmi<18.5?"bg-blue-500":h.physicalData.bmi<25?"bg-green-500":h.physicalData.bmi<30?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(100,Math.max(0,h.physicalData.bmi/40*100))}%`}})}),v.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[v.jsx("span",{children:"Zayıf"}),v.jsx("span",{children:"Normal"}),v.jsx("span",{children:"Fazla Kilolu"}),v.jsx("span",{children:"Obez"})]})]})]}),v.jsx("div",{className:"flex justify-end",children:v.jsxs("button",{onClick:()=>m(Ye=>({...Ye,needsMeasurementUpdate:!0})),className:"text-yellow-500 font-semibold hover:text-yellow-400 transition duration-200 flex items-center",children:["Ölçümleri Güncelle",v.jsx("svg",{className:"w-5 h-5 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})]})})]}),D&&v.jsx(LM,{achievement:D,onClose:()=>P(null)}),I&&v.jsx(Phe,{isOpen:I,onClose:()=>A(!1)}),v.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-900 bg-opacity-80 backdrop-blur-md border-t border-gray-800 shadow-lg md:hidden",children:v.jsxs("div",{className:"flex justify-around py-3",children:[v.jsxs(Vt,{to:"/dashboard",className:"flex flex-col items-center text-xs",children:[v.jsx("div",{className:"p-1 rounded-full text-gray-400",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),v.jsx("span",{className:"text-gray-400",children:"Panel"})]}),v.jsxs("div",{className:"flex flex-col items-center text-xs",children:[v.jsx("div",{className:"p-1 rounded-full bg-yellow-500 text-black",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),v.jsx("span",{className:"text-yellow-500",children:"Profil"})]}),v.jsxs(Vt,{to:"/friends",className:"flex flex-col items-center text-xs",children:[v.jsx("div",{className:"p-1 rounded-full text-gray-400",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),v.jsx("span",{className:"text-gray-400",children:"Arkadaşlar"})]}),v.jsxs(Vt,{to:"/achievements",className:"flex flex-col items-center text-xs",children:[v.jsx("div",{className:"p-1 rounded-full text-gray-400",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}),v.jsx("span",{className:"text-gray-400",children:"Rozetler"})]}),v.jsxs("button",{className:"flex flex-col items-center text-xs",onClick:()=>{localStorage.removeItem("userToken"),localStorage.removeItem("userInfo"),j("/")},children:[v.jsx("div",{className:"p-1 rounded-full text-gray-400",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),v.jsx("span",{className:"text-gray-400",children:"Çıkış"})]})]})})]})},_o=({children:t})=>localStorage.getItem("userToken")||sessionStorage.getItem("userToken")?t:v.jsx("div",{style:{color:"red",textAlign:"center",marginTop:"40px",fontSize:"1.2rem"},children:"Oturum bulunamadı. Lütfen giriş yapın."}),ipe=()=>{const[t,e]=L.useState(""),[n,r]=L.useState(!1),[s,a]=L.useState(null),[i,o]=L.useState(!1),l=async u=>{var c,d;u.preventDefault(),r(!0),a(null),o(!1);try{const h=await Ze.post("http://localhost:5000/api/users/forgot-password",{email:t});console.log("Şifre sıfırlama yanıtı:",h.data),o(!0)}catch(h){console.error("Şifre sıfırlama hatası:",h),a(((d=(c=h.response)==null?void 0:c.data)==null?void 0:d.message)||"Şifre sıfırlama işlemi başarısız. Lütfen tekrar deneyin.")}finally{r(!1)}};return v.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen py-12 px-4 bg-black",children:[v.jsxs("div",{className:"w-full max-w-md",children:[v.jsxs("div",{className:"text-center mb-10",children:[v.jsx("h1",{className:"text-4xl font-bold text-yellow-500 mb-2",children:"FitWeb"}),v.jsx("p",{className:"text-gray-400",children:"Şifrenizi Sıfırlayın"})]}),v.jsx("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg rounded-xl shadow-2xl p-8 border border-gray-800",children:i?v.jsxs("div",{className:"text-center",children:[v.jsxs("div",{className:"bg-green-900 bg-opacity-40 p-4 rounded-lg mb-6",children:[v.jsx("svg",{className:"w-12 h-12 text-green-500 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),v.jsx("h3",{className:"text-lg font-medium text-green-500 mb-2",children:"E-posta Gönderildi"}),v.jsxs("p",{className:"text-gray-300",children:["Şifre sıfırlama talimatları ",t," adresine gönderildi. Lütfen gelen kutunuzu ve spam klasörünüzü kontrol edin."]})]}),v.jsx(Vt,{to:"/",className:"text-yellow-500 hover:text-yellow-400 transition duration-200",children:"Giriş Sayfasına Dön"})]}):v.jsxs(v.Fragment,{children:[v.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-gray-200",children:"Şifremi Unuttum"}),s&&v.jsx("div",{className:"bg-red-900 bg-opacity-60 text-red-200 p-3 rounded-lg mb-4",children:s}),v.jsx("p",{className:"text-gray-300 mb-6",children:"Hesabınıza bağlı e-posta adresinizi girin. Size şifrenizi sıfırlamanız için bir bağlantı göndereceğiz."}),v.jsxs("form",{onSubmit:l,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"email",children:"E-posta Adresi"}),v.jsx("input",{id:"email",type:"email",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",placeholder:"ornek@email.com",value:t,onChange:u=>e(u.target.value),required:!0})]}),v.jsx("button",{type:"submit",className:"w-full bg-yellow-500 text-black font-medium py-3 rounded-lg hover:bg-yellow-400 transition duration-300",disabled:n,children:n?"Gönderiliyor...":"Sıfırlama Bağlantısı Gönder"})]}),v.jsx("div",{className:"mt-6 text-center",children:v.jsx(Vt,{to:"/",className:"text-yellow-500 text-sm hover:underline",children:"Giriş Sayfasına Dön"})})]})})]}),v.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-yellow-500 rounded-full mix-blend-overlay filter blur-xl opacity-10 animate-pulse"}),v.jsx("div",{className:"absolute bottom-10 right-10 w-32 h-32 bg-yellow-500 rounded-full mix-blend-overlay filter blur-xl opacity-10 animate-pulse animation-delay-2000"})]})},ope=()=>{const[t,e]=L.useState(""),[n,r]=L.useState(""),[s,a]=L.useState(!1),[i,o]=L.useState(null),[l,u]=L.useState(!1),{resetToken:c}=IM(),d=Wl(),h=async m=>{var g,y;if(m.preventDefault(),t!==n){o("Şifreler eşleşmiyor");return}a(!0),o(null);try{await Ze.post(`http://localhost:5000/api/users/reset-password/${c}`,{password:t}),u(!0),setTimeout(()=>{d("/")},3e3)}catch(b){o(((y=(g=b.response)==null?void 0:g.data)==null?void 0:y.message)||"Şifre sıfırlama işlemi başarısız")}finally{a(!1)}};return v.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen py-12 px-4 bg-black",children:[v.jsxs("div",{className:"w-full max-w-md",children:[v.jsxs("div",{className:"text-center mb-10",children:[v.jsx("h1",{className:"text-4xl font-bold text-yellow-500 mb-2",children:"FitWeb"}),v.jsx("p",{className:"text-gray-400",children:"Yeni Şifre Oluşturun"})]}),v.jsx("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg rounded-xl shadow-2xl p-8 border border-gray-800",children:l?v.jsxs("div",{className:"text-center",children:[v.jsxs("div",{className:"bg-green-900 bg-opacity-40 p-4 rounded-lg mb-6",children:[v.jsx("svg",{className:"w-12 h-12 text-green-500 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),v.jsx("h3",{className:"text-lg font-medium text-green-500 mb-2",children:"Şifre Başarıyla Sıfırlandı"}),v.jsx("p",{className:"text-gray-300",children:"Yeni şifreniz oluşturuldu. Birkaç saniye içinde giriş sayfasına yönlendirileceksiniz."})]}),v.jsx(Vt,{to:"/",className:"text-yellow-500 hover:text-yellow-400 transition duration-200",children:"Giriş Sayfasına Dön"})]}):v.jsxs(v.Fragment,{children:[v.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-gray-200",children:"Şifre Sıfırlama"}),i&&v.jsx("div",{className:"bg-red-900 bg-opacity-60 text-red-200 p-3 rounded-lg mb-4",children:i}),v.jsxs("form",{onSubmit:h,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"password",children:"Yeni Şifre"}),v.jsx("input",{id:"password",type:"password",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",placeholder:"********",value:t,onChange:m=>e(m.target.value),required:!0,minLength:6})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",htmlFor:"confirmPassword",children:"Yeni Şifre (Tekrar)"}),v.jsx("input",{id:"confirmPassword",type:"password",className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",placeholder:"********",value:n,onChange:m=>r(m.target.value),required:!0,minLength:6})]}),v.jsx("button",{type:"submit",className:"w-full bg-yellow-500 text-black font-medium py-3 rounded-lg hover:bg-yellow-400 transition duration-300",disabled:s,children:s?"İşleniyor...":"Şifreyi Sıfırla"})]}),v.jsx("div",{className:"mt-6 text-center",children:v.jsx(Vt,{to:"/",className:"text-yellow-500 text-sm hover:underline",children:"Giriş Sayfasına Dön"})})]})})]}),v.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-yellow-500 rounded-full mix-blend-overlay filter blur-xl opacity-10 animate-pulse"}),v.jsx("div",{className:"absolute bottom-10 right-10 w-32 h-32 bg-yellow-500 rounded-full mix-blend-overlay filter blur-xl opacity-10 animate-pulse animation-delay-2000"})]})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lpe=1e-7,upe=1e-4;class FM{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class ZC{refCount(e){return Si("refCount")}incRef(e){return Si("incRef")}timerAvailable(){return!0}time(e){return Si("time")}read(e){return Si("read")}readSync(e){return Si("readSync")}readToGPU(e,n){return Si("readToGPU")}numDataIds(){return Si("numDataIds")}disposeData(e,n){return Si("disposeData")}write(e,n,r){return Si("write")}move(e,n,r,s,a){return Si("move")}createTensorFromGPUData(e,n,r){return Si("createTensorFromGPUData")}memory(){return Si("memory")}floatPrecision(){return Si("floatPrecision")}epsilon(){return this.floatPrecision()===32?lpe:upe}dispose(){return Si("dispose")}}function Si(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cpe(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,em(t,e,n)}function fh(t,e,n){return Math.max(t,Math.min(e,n))}function zM(t){return t%2===0?t:t+1}function em(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function KX(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function X(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function di(t,e,n=""){X(Xt(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function hg(t){X(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function ye(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function uU(t){return t.length===0}function dpe(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function Xt(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function $m(t){return t%1===0}function F3(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function cm(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function cU(t,e=s=>0,n,r){return new Promise((s,a)=>{let i=0;const o=()=>{if(t()){s();return}i++;const l=e(i);if(n!=null&&i>=n){a();return}r!=null?r(o,l):setTimeout(o,l)};o()})}function BM(t,e){let n=1,r=-1;for(let a=0;a<t.length;++a)if(t[a]>=0)n*=t[a];else if(t[a]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${a}`);r=a}else if(t[a]<0)throw Error(`Shapes can not be < 0. Found ${t[a]} at dim ${a}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const s=t.slice();return s[r]=e/n,s}function Gt(t,e){const n=e.length;return t=t==null?e.map((r,s)=>s):[].concat(t),X(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),X(t.every(r=>$m(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function Ud(t,e){const n=[],r=[],s=e!=null&&Array.isArray(e)&&e.length===0,a=e==null||s?null:Gt(e,t).sort();let i=0;for(let o=0;o<t.length;++o){if(a!=null){if(a[i]===o&&t[o]!==1)throw new Error(`Can't squeeze axis ${o} since its dim '${t[o]}' is not 1`);(a[i]==null||a[i]>o)&&t[o]===1&&(n.push(t[o]),r.push(o)),a[i]<=o&&i++}t[o]!==1&&(n.push(t[o]),r.push(o))}return{newShape:n,keptDims:r}}function $s(t,e){return Fr(t,e)}function Fr(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function fpe(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function hpe(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function UM(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function JS(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function ppe(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function pg(t){return typeof t=="string"||t instanceof String}function mpe(t){return typeof t=="boolean"}function z3(t){return typeof t=="number"}function Dh(t){return Array.isArray(t)?Dh(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":z3(t)?"float32":pg(t)?"string":mpe(t)?"bool":"float32"}function B3(t){return!!(t&&t.constructor&&t.call&&t.apply)}function U3(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function $t(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function XX(t,e,n,r=!1){const s=new Array;if(e.length===1){const a=e[0]*(r?2:1);for(let i=0;i<a;i++)s[i]=n[t+i]}else{const a=e[0],i=e.slice(1),o=i.reduce((l,u)=>l*u)*(r?2:1);for(let l=0;l<a;l++)s[l]=XX(t+l*o,i,n,r)}return s}function Yo(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((s,a)=>s*a)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return XX(0,t,e,n)}function $S(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function VM(t,e){const n=Js(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Js(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function YX(t,e){const n=t.reduce((r,s)=>r*s,1);if(e==null||e==="float32")return Yo(t,new Float32Array(n));if(e==="int32")return Yo(t,new Int32Array(n));if(e==="bool")return Yo(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function mo(t){t.forEach(e=>{X(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function bu(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=n[s]*t[s];return r}function mg(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(t/n[s]),t-=r[s]*n[s];return r[r.length-1]=t,r}function hh(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dU="tfjsflags";class gpe{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=ype,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(ve().getBool("IS_TEST")||ve().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const s=this.urlFlags[e];ve().getBool("IS_TEST")||ve().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(hh(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);dU in e&&e[dU].split(",").forEach(r=>{const[s,a]=r.split(":");this.urlFlags[s]=xpe(s,a)})}}function ype(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(bpe(e,r[0],r[1]),r.join("="))),e}function bpe(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function xpe(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function ve(){return QX}let QX=null;function vpe(t){QX=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let _E;function ZX(){if(_E==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");_E=t}return _E}function wpe(){const t=ZX();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function WM(t,e){const n=wpe();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const zx="Abs",gg="Acos",yg="Acosh",Ph="Add",Bx="AddN",JC="All",ek="Any",Ux="ArgMax",Vx="ArgMin",bg="Asin",xg="Asinh",vg="Atan",wg="Atanh",Sg="Atan2",Wx="AvgPool",tk="AvgPoolGrad",Gx="AvgPool3D",nk="AvgPool3DGrad",Hx="BatchMatMul",qx="BatchToSpaceND",rk="Bincount",sk="BitwiseAnd",Spe="BroadcastTo",ak="BroadcastArgs",Cg="Cast",kg="Ceil",Ng="ClipByValue",ik="Complex",Kx="ComplexAbs",Xx="Concat",Yx="Conv2D",ok="Conv2DBackpropFilter",Qx="Conv2DBackpropInput",Zx="Conv3D",lk="Conv3DBackpropFilterV2",uk="Conv3DBackpropInputV2",Tg="Cos",$g="Cosh",ck="Cumprod",Jx="Cumsum",dk="CropAndResize",fk="DenseBincount",hk="DepthToSpace",ev="DepthwiseConv2dNative",pk="DepthwiseConv2dNativeBackpropFilter",mk="DepthwiseConv2dNativeBackpropInput",gk="Diag",tv="Dilation2D",e2="Dilation2DBackpropInput",t2="Dilation2DBackpropFilter",GM="Draw",Ig="RealDiv",yk="Einsum",Eg="Elu",bk="EluGrad",Ag="Erf",nv="Equal",Rg="Exp",rv="ExpandDims",Og="Expm1",xk="FFT",vk="Fill",wk="FlipLeftRight",_g="Floor",Dg="FloorDiv",sv="FusedBatchNorm",av="GatherV2",Sk="GatherNd",iv="Greater",Pg="GreaterEqual",Mg="Identity",Ck="IFFT",kk="Imag",jg="IsFinite",Lg="IsInf",Fg="IsNan",ov="LeakyRelu",lv="Less",uv="LessEqual",Nk="LinSpace",zg="Log",Bg="Log1p",cv="LogicalAnd",dv="LogicalNot",fv="LogicalOr",Cpe="LogSoftmax",hv="LRN",Tk="LRNGrad",pv="Max",Ug="Maximum",mv="MaxPool",$k="MaxPoolGrad",gv="MaxPool3D",Ik="MaxPool3DGrad",Ek="MaxPoolWithArgmax",yv="Mean",bv="Min",Vg="Minimum",xv="MirrorPad",Wg="Mod",Ak="Multinomial",Gg="Multiply",vv="Neg",wv="NotEqual",Rk="NonMaxSuppressionV3",HM="NonMaxSuppressionV4",Ok="NonMaxSuppressionV5",Sv="OnesLike",Cv="OneHot",kv="Pack",Nv="PadV2",Hg="Pow",Tv="Prelu",$v="Prod",qM="RaggedGather",KM="RaggedRange",XM="RaggedTensorToTensor",_k="Range",Dk="Real",qg="Reciprocal",Kg="Relu",Iv="Reshape",Ev="ResizeNearestNeighbor",Pk="ResizeNearestNeighborGrad",Av="ResizeBilinear",Mk="ResizeBilinearGrad",Xg="Relu6",Rv="Reverse",Yg="Round",Qg="Rsqrt",jk="ScatterNd",Lk="TensorScatterUpdate",Fk="SearchSorted",Ov="Select",Zg="Selu",_v="Slice",Jg="Sin",ey="Sinh",ty="Sign",ny="Sigmoid",ry="Softplus",sy="Sqrt",Dv="Sum",Pv="SpaceToBatchND",Mv="SplitV",jv="Softmax",YM="SparseFillEmptyRows",QM="SparseReshape",zk="SparseSegmentMean",Bk="SparseSegmentSum",Uk="SparseToDense",ay="SquaredDifference",Vk="Square",Wk="StaticRegexReplace",Gk="StridedSlice",Hk="StringNGrams",ZM="StringSplit",JM="StringToHashBucketFast",iy="Sub",oy="Tan",ly="Tanh",uy="Tile",qk="TopK",Kk="Transform",th="Transpose",ej="Unique",Lv="Unpack",Fv="UnsortedSegmentSum",zv="ZerosLike",cy="Step",n2="FromPixels",Xk="RotateWithOffset",Tb="_FusedMatMul",$b="FusedConv2D",Ib="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function to(...t){ve().getBool("IS_TEST")||ve().getBool("PROD")||console.warn(...t)}function kpe(...t){ve().getBool("IS_TEST")||ve().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r2=WM("kernelRegistry",()=>new Map),V3=WM("gradRegistry",()=>new Map);function s2(t,e){const n=JX(t,e);return r2.get(n)}function fU(t){return V3.get(t)}function hU(t){const e=r2.entries(),n=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[a,i]=s,[o]=a.split("_");o===t&&n.push(i)}return n}function tj(t){const{kernelName:e,backendName:n}=t,r=JX(e,n);r2.has(r)&&to(`The kernel '${e}' for backend '${n}' is already registered`),r2.set(r,t)}function Npe(t){const{kernelName:e}=t;V3.has(e)&&ve().getBool("DEBUG")&&to(`Overriding the gradient for '${e}'`),V3.set(e,t)}function JX(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eY(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var DE,pU;function Tpe(){if(pU)return DE;pU=1,DE=e;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function e(R,O,F){this.low=R|0,this.high=O|0,this.unsigned=!!F}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0});function n(R){return(R&&R.__isLong__)===!0}e.isLong=n;var r={},s={};function a(R,O){var F,z,V;return O?(R>>>=0,(V=0<=R&&R<256)&&(z=s[R],z)?z:(F=o(R,(R|0)<0?-1:0,!0),V&&(s[R]=F),F)):(R|=0,(V=-128<=R&&R<128)&&(z=r[R],z)?z:(F=o(R,R<0?-1:0,!1),V&&(r[R]=F),F))}e.fromInt=a;function i(R,O){if(isNaN(R))return O?C:w;if(O){if(R<0)return C;if(R>=g)return A}else{if(R<=-9223372036854776e3)return D;if(R+1>=y)return I}return R<0?i(-R,O).neg():o(R%m|0,R/m|0,O)}e.fromNumber=i;function o(R,O,F){return new e(R,O,F)}e.fromBits=o;var l=Math.pow;function u(R,O,F){if(R.length===0)throw Error("empty string");if(R==="NaN"||R==="Infinity"||R==="+Infinity"||R==="-Infinity")return w;if(typeof O=="number"?(F=O,O=!1):O=!!O,F=F||10,F<2||36<F)throw RangeError("radix");var z;if((z=R.indexOf("-"))>0)throw Error("interior hyphen");if(z===0)return u(R.substring(1),O,F).neg();for(var V=i(l(F,8)),W=w,j=0;j<R.length;j+=8){var q=Math.min(8,R.length-j),Y=parseInt(R.substring(j,j+q),F);if(q<8){var Q=i(l(F,q));W=W.mul(Q).add(i(Y))}else W=W.mul(V),W=W.add(i(Y))}return W.unsigned=O,W}e.fromString=u;function c(R,O){return typeof R=="number"?i(R,O):typeof R=="string"?u(R,O):o(R.low,R.high,typeof O=="boolean"?O:R.unsigned)}e.fromValue=c;var d=65536,h=1<<24,m=d*d,g=m*m,y=g/2,b=a(h),w=a(0);e.ZERO=w;var C=a(0,!0);e.UZERO=C;var k=a(1);e.ONE=k;var T=a(1,!0);e.UONE=T;var N=a(-1);e.NEG_ONE=N;var I=o(-1,2147483647,!1);e.MAX_VALUE=I;var A=o(-1,-1,!0);e.MAX_UNSIGNED_VALUE=A;var D=o(0,-2147483648,!1);e.MIN_VALUE=D;var P=e.prototype;return P.toInt=function(){return this.unsigned?this.low>>>0:this.low},P.toNumber=function(){return this.unsigned?(this.high>>>0)*m+(this.low>>>0):this.high*m+(this.low>>>0)},P.toString=function(O){if(O=O||10,O<2||36<O)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(D)){var F=i(O),z=this.div(F),V=z.mul(F).sub(this);return z.toString(O)+V.toInt().toString(O)}else return"-"+this.neg().toString(O);for(var W=i(l(O,6),this.unsigned),j=this,q="";;){var Y=j.div(W),Q=j.sub(Y.mul(W)).toInt()>>>0,H=Q.toString(O);if(j=Y,j.isZero())return H+q;for(;H.length<6;)H="0"+H;q=""+H+q}},P.getHighBits=function(){return this.high},P.getHighBitsUnsigned=function(){return this.high>>>0},P.getLowBits=function(){return this.low},P.getLowBitsUnsigned=function(){return this.low>>>0},P.getNumBitsAbs=function(){if(this.isNegative())return this.eq(D)?64:this.neg().getNumBitsAbs();for(var O=this.high!=0?this.high:this.low,F=31;F>0&&(O&1<<F)==0;F--);return this.high!=0?F+33:F+1},P.isZero=function(){return this.high===0&&this.low===0},P.eqz=P.isZero,P.isNegative=function(){return!this.unsigned&&this.high<0},P.isPositive=function(){return this.unsigned||this.high>=0},P.isOdd=function(){return(this.low&1)===1},P.isEven=function(){return(this.low&1)===0},P.equals=function(O){return n(O)||(O=c(O)),this.unsigned!==O.unsigned&&this.high>>>31===1&&O.high>>>31===1?!1:this.high===O.high&&this.low===O.low},P.eq=P.equals,P.notEquals=function(O){return!this.eq(O)},P.neq=P.notEquals,P.ne=P.notEquals,P.lessThan=function(O){return this.comp(O)<0},P.lt=P.lessThan,P.lessThanOrEqual=function(O){return this.comp(O)<=0},P.lte=P.lessThanOrEqual,P.le=P.lessThanOrEqual,P.greaterThan=function(O){return this.comp(O)>0},P.gt=P.greaterThan,P.greaterThanOrEqual=function(O){return this.comp(O)>=0},P.gte=P.greaterThanOrEqual,P.ge=P.greaterThanOrEqual,P.compare=function(O){if(n(O)||(O=c(O)),this.eq(O))return 0;var F=this.isNegative(),z=O.isNegative();return F&&!z?-1:!F&&z?1:this.unsigned?O.high>>>0>this.high>>>0||O.high===this.high&&O.low>>>0>this.low>>>0?-1:1:this.sub(O).isNegative()?-1:1},P.comp=P.compare,P.negate=function(){return!this.unsigned&&this.eq(D)?D:this.not().add(k)},P.neg=P.negate,P.add=function(O){n(O)||(O=c(O));var F=this.high>>>16,z=this.high&65535,V=this.low>>>16,W=this.low&65535,j=O.high>>>16,q=O.high&65535,Y=O.low>>>16,Q=O.low&65535,H=0,ee=0,te=0,ne=0;return ne+=W+Q,te+=ne>>>16,ne&=65535,te+=V+Y,ee+=te>>>16,te&=65535,ee+=z+q,H+=ee>>>16,ee&=65535,H+=F+j,H&=65535,o(te<<16|ne,H<<16|ee,this.unsigned)},P.subtract=function(O){return n(O)||(O=c(O)),this.add(O.neg())},P.sub=P.subtract,P.multiply=function(O){if(this.isZero())return w;if(n(O)||(O=c(O)),t){var F=t.mul(this.low,this.high,O.low,O.high);return o(F,t.get_high(),this.unsigned)}if(O.isZero())return w;if(this.eq(D))return O.isOdd()?D:w;if(O.eq(D))return this.isOdd()?D:w;if(this.isNegative())return O.isNegative()?this.neg().mul(O.neg()):this.neg().mul(O).neg();if(O.isNegative())return this.mul(O.neg()).neg();if(this.lt(b)&&O.lt(b))return i(this.toNumber()*O.toNumber(),this.unsigned);var z=this.high>>>16,V=this.high&65535,W=this.low>>>16,j=this.low&65535,q=O.high>>>16,Y=O.high&65535,Q=O.low>>>16,H=O.low&65535,ee=0,te=0,ne=0,he=0;return he+=j*H,ne+=he>>>16,he&=65535,ne+=W*H,te+=ne>>>16,ne&=65535,ne+=j*Q,te+=ne>>>16,ne&=65535,te+=V*H,ee+=te>>>16,te&=65535,te+=W*Q,ee+=te>>>16,te&=65535,te+=j*Y,ee+=te>>>16,te&=65535,ee+=z*H+V*Q+W*Y+j*q,ee&=65535,o(ne<<16|he,ee<<16|te,this.unsigned)},P.mul=P.multiply,P.divide=function(O){if(n(O)||(O=c(O)),O.isZero())throw Error("division by zero");if(t){if(!this.unsigned&&this.high===-2147483648&&O.low===-1&&O.high===-1)return this;var F=(this.unsigned?t.div_u:t.div_s)(this.low,this.high,O.low,O.high);return o(F,t.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?C:w;var z,V,W;if(this.unsigned){if(O.unsigned||(O=O.toUnsigned()),O.gt(this))return C;if(O.gt(this.shru(1)))return T;W=C}else{if(this.eq(D)){if(O.eq(k)||O.eq(N))return D;if(O.eq(D))return k;var j=this.shr(1);return z=j.div(O).shl(1),z.eq(w)?O.isNegative()?k:N:(V=this.sub(O.mul(z)),W=z.add(V.div(O)),W)}else if(O.eq(D))return this.unsigned?C:w;if(this.isNegative())return O.isNegative()?this.neg().div(O.neg()):this.neg().div(O).neg();if(O.isNegative())return this.div(O.neg()).neg();W=w}for(V=this;V.gte(O);){z=Math.max(1,Math.floor(V.toNumber()/O.toNumber()));for(var q=Math.ceil(Math.log(z)/Math.LN2),Y=q<=48?1:l(2,q-48),Q=i(z),H=Q.mul(O);H.isNegative()||H.gt(V);)z-=Y,Q=i(z,this.unsigned),H=Q.mul(O);Q.isZero()&&(Q=k),W=W.add(Q),V=V.sub(H)}return W},P.div=P.divide,P.modulo=function(O){if(n(O)||(O=c(O)),t){var F=(this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,O.low,O.high);return o(F,t.get_high(),this.unsigned)}return this.sub(this.div(O).mul(O))},P.mod=P.modulo,P.rem=P.modulo,P.not=function(){return o(~this.low,~this.high,this.unsigned)},P.and=function(O){return n(O)||(O=c(O)),o(this.low&O.low,this.high&O.high,this.unsigned)},P.or=function(O){return n(O)||(O=c(O)),o(this.low|O.low,this.high|O.high,this.unsigned)},P.xor=function(O){return n(O)||(O=c(O)),o(this.low^O.low,this.high^O.high,this.unsigned)},P.shiftLeft=function(O){return n(O)&&(O=O.toInt()),(O&=63)===0?this:O<32?o(this.low<<O,this.high<<O|this.low>>>32-O,this.unsigned):o(0,this.low<<O-32,this.unsigned)},P.shl=P.shiftLeft,P.shiftRight=function(O){return n(O)&&(O=O.toInt()),(O&=63)===0?this:O<32?o(this.low>>>O|this.high<<32-O,this.high>>O,this.unsigned):o(this.high>>O-32,this.high>=0?0:-1,this.unsigned)},P.shr=P.shiftRight,P.shiftRightUnsigned=function(O){if(n(O)&&(O=O.toInt()),O&=63,O===0)return this;var F=this.high;if(O<32){var z=this.low;return o(z>>>O|F<<32-O,F>>>O,this.unsigned)}else return O===32?o(F,0,this.unsigned):o(F>>>O-32,0,this.unsigned)},P.shru=P.shiftRightUnsigned,P.shr_u=P.shiftRightUnsigned,P.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},P.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},P.toBytes=function(O){return O?this.toBytesLE():this.toBytesBE()},P.toBytesLE=function(){var O=this.high,F=this.low;return[F&255,F>>>8&255,F>>>16&255,F>>>24,O&255,O>>>8&255,O>>>16&255,O>>>24]},P.toBytesBE=function(){var O=this.high,F=this.low;return[O>>>24,O>>>16&255,O>>>8&255,O&255,F>>>24,F>>>16&255,F>>>8&255,F&255]},e.fromBytes=function(O,F,z){return z?e.fromBytesLE(O,F):e.fromBytesBE(O,F)},e.fromBytesLE=function(O,F){return new e(O[0]|O[1]<<8|O[2]<<16|O[3]<<24,O[4]|O[5]<<8|O[6]<<16|O[7]<<24,F)},e.fromBytesBE=function(O,F){return new e(O[4]<<24|O[5]<<16|O[6]<<8|O[7],O[0]<<24|O[1]<<16|O[2]<<8|O[3],F)},DE}var tY=Tpe();const nY=Un(tY),$pe=LK({__proto__:null,default:nY},[tY]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zf=nY||$pe;function Yk(t){return zf.fromString(t,!0,16)}const rY=Yk("c3a5c85c97cb3127"),_f=Yk("b492b66fbe98f273"),Oa=Yk("9ae16a3b2f90404f");function W3(t){return t.xor(t.shru(47))}function sY(t,e,n){const r=t.slice(e,e+n);return zf.fromBytes(Array.from(r),!0,!0)}function fr(t,e){return sY(t,e,8)}function mU(t,e){return sY(t,e,4)}function Ms(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Sd(t,e,n=Yk("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let s=e.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function Ipe(t,e,n,r,s,a){s=s.add(t),a=Ms(a.add(s).add(r),21);const i=s;return s=s.add(e),s=s.add(n),a=a.add(Ms(s,44)),[s.add(r),a.add(i)]}function zw(t,e,n,r){return Ipe(fr(t,e),fr(t,e+8),fr(t,e+16),fr(t,e+24),n,r)}function Epe(t,e=t.length){if(e>=8){const n=Oa.add(e*2),r=fr(t,0).add(Oa),s=fr(t,e-8),a=Ms(s,37).mul(n).add(r),i=Ms(r,25).add(s).mul(n);return Sd(a,i,n)}if(e>=4){const n=Oa.add(e*2),r=mU(t,0);return Sd(r.shl(3).add(e),mU(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],s=t[e-1],a=n+(r<<8),i=e+(s<<2);return W3(Oa.mul(a).xor(rY.mul(i))).mul(Oa)}return Oa}function Ape(t,e=t.length){const n=Oa.add(e*2),r=fr(t,0).mul(_f),s=fr(t,8),a=fr(t,e-8).mul(n),i=fr(t,e-16).mul(Oa);return Sd(Ms(r.add(s),43).add(Ms(a,30)).add(i),r.add(Ms(s.add(Oa),18)).add(a),n)}function Rpe(t,e=t.length){const n=Oa.add(e*2),r=fr(t,0).mul(Oa),s=fr(t,8),a=fr(t,e-8).mul(n),i=fr(t,e-16).mul(Oa),o=Ms(r.add(s),43).add(Ms(a,30)).add(i),l=Sd(o,r.add(Ms(s.add(Oa),18)).add(a),n),u=fr(t,16).mul(n),c=fr(t,24),d=o.add(fr(t,e-32)).mul(n),h=l.add(fr(t,e-24)).mul(n);return Sd(Ms(u.add(c),43).add(Ms(d,30)).add(h),u.add(Ms(c.add(r),18)).add(d),n)}function Ope(t,e=t.length){const n=zf.fromNumber(81,!0);if(e<=32)return e<=16?Epe(t,e):Ape(t,e);if(e<=64)return Rpe(t,e);let r=n,s=n.mul(_f).add(113),a=W3(s.mul(Oa).add(113)).mul(Oa),i=[zf.UZERO,zf.UZERO],o=[zf.UZERO,zf.UZERO];r=r.mul(Oa).add(fr(t,0));let l=0;const u=(e-1>>6)*64,c=u+(e-1&63)-63;do r=Ms(r.add(s).add(i[0]).add(fr(t,l+8)),37).mul(_f),s=Ms(s.add(i[1]).add(fr(t,l+48)),42).mul(_f),r=r.xor(o[1]),s=s.add(i[0]).add(fr(t,l+40)),a=Ms(a.add(o[0]),33).mul(_f),i=zw(t,l,i[1].mul(_f),r.add(o[0])),o=zw(t,l+32,a.add(o[1]),s.add(fr(t,l+16))),[a,r]=[r,a],l+=64;while(l!==u);const d=_f.add(a.and(255).shl(1));return l=c,o[0]=o[0].add(e-1&63),i[0]=i[0].add(o[0]),o[0]=o[0].add(i[0]),r=Ms(r.add(s).add(i[0]).add(fr(t,l+8)),37).mul(d),s=Ms(s.add(i[1]).add(fr(t,l+48)),42).mul(d),r=r.xor(o[1].mul(9)),s=s.add(i[0].mul(9).add(fr(t,l+40))),a=Ms(a.add(o[0]),33).mul(d),i=zw(t,l,i[1].mul(d),r.add(o[0])),o=zw(t,l+32,a.add(o[1]),s.add(fr(t,l+16))),[a,r]=[r,a],Sd(Sd(i[0],o[0],d).add(W3(s).mul(rY)).add(a),Sd(i[1],o[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vd(t,e){return e==="string"?yc(t):Mh([t],e)}function _pe(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Mh(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=$c(t)),ve().getBool("DEBUG")&&fpe(t,e),_pe(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function ti(){return ve().platform.now()}function yc(t,e="utf-8"){return e=e||"utf-8",ve().platform.encode(t,e)}function Ml(t,e="utf-8"){return e=e||"utf-8",ve().platform.decode(t,e)}function tl(t){return ve().platform.isTypedArray!=null?ve().platform.isTypedArray(t):eY(t)}function $c(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||hh(t)||t==null||tl(t)&&n)e.push(t);else if(Array.isArray(t)||tl(t))for(let r=0;r<t.length;++r)$c(t[r],e,n);else{let r=-1;for(const s of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)$c(t[s],e,n)}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dpe{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new Mpe)}profileKernel(e,n,r){let s;const a=()=>{s=r()};let i;const o=ti();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(a);else{a();for(const u of s)u.dataSync();i=Promise.resolve({kernelMs:ti()-o})}if(ve().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<s.length;u++){const c=s[u];c.data().then(d=>{Ppe(d,c.dtype,e)})}return{kernelName:e,outputs:s,inputs:n,timeMs:i.then(u=>u.kernelMs),extraInfo:i.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:s,inputs:a,extraInfo:i}=e;r.forEach(o=>{Promise.all([o.data(),s,i]).then(l=>{this.logger.logKernelProfile(n,o,l[0],l[1],a,l[2])})})}}function Ppe(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const s=t[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${n}'`),!0}return!1}class Mpe{logKernelProfile(e,n,r,s,a,i){const o=typeof s=="number"?cm(`${s}ms`,9):s.error,l=cm(e,25),u=n.rank,c=n.size,d=cm(n.shape.toString(),14);let h="";for(const m in a){const g=a[m];if(g!=null){const y=g.shape||n.shape,b=y.length;h+=`${m}: ${b}D ${b>0?y:""} `}}console.log(`%c${l}	%c${o}	%c${u}D ${d}	%c${c}	%c${h}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jpe(t,e,n){const r={},s={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const u=t[l],c=u.inputs;for(const d in c){const h=c[d];let m=!1;for(let g=0;g<e.length;g++)if(r[h.id]){u.outputs.forEach(y=>r[y.id]=!0),m=!0,s[u.id]=!0;break}if(m)break}}const a={};a[n.id]=!0;const i={};for(let l=t.length-1;l>=0;l--){const u=t[l],c=u.inputs;for(let d=0;d<u.outputs.length;d++)if(a[u.outputs[d].id]){for(const h in c)a[c[h].id]=!0,i[u.id]=!0;break}}const o=[];for(let l=0;l<t.length;l++){const u=t[l];if(s[u.id]&&i[u.id]){const c={};for(const h in u.inputs){const m=u.inputs[h];r[m.id]&&(c[h]=m)}const d=Object.assign({},u);d.inputs=c,d.outputs=u.outputs,o.push(d)}}return o}function Lpe(t,e,n,r){for(let s=e.length-1;s>=0;s--){const a=e[s],i=[];if(a.outputs.forEach(l=>{const u=t[l.id];u!=null?i.push(u):i.push(null)}),a.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${a.kernelName}.`);const o=a.gradient(i);for(const l in a.inputs){if(!(l in o))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(o)}.`);const u=n(()=>o[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=a.inputs[l];if(!Xt(u.shape,c.shape))throw new Error(`Error in gradient for op ${a.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=u;else{const d=t[c.id];t[c.id]=r(d,u),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gU=20,j0=3,PE=7;function Fpe(t,e,n,r){const s=$t(e),a=zpe(t,e,n,s),i=e.length,o=IS(t,e,n,s,a),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${i}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(o.map(u=>"    "+u).join(`
`)),l.join(`
`)}function zpe(t,e,n,r){const s=ye(e),a=r[r.length-1],i=new Array(a).fill(0),o=e.length,l=n==="complex64"?tb(t):t;if(o>1)for(let u=0;u<s/a;u++){const c=u*a;for(let d=0;d<a;d++)i[d]=Math.max(i[d],eb(l[c+d],0,n).length)}return i}function eb(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(PE))} + ${parseFloat(t[1].toFixed(PE))}j`:pg(t)?r=`'${t}'`:n==="bool"?r=aY(t):r=parseFloat(t.toFixed(PE)).toString(),cm(r,e)}function aY(t){return t===0?"false":"true"}function IS(t,e,n,r,s,a=!0){const i=n==="complex64"?2:1,o=e[0],l=e.length;if(l===0){if(n==="complex64"){const y=tb(t);return[eb(y[0],0,n)]}return n==="bool"?[aY(t[0])]:[t[0].toString()]}if(l===1){if(o>gU){const b=j0*i;let w=Array.from(t.slice(0,b)),C=Array.from(t.slice((o-j0)*i,o*i));return n==="complex64"&&(w=tb(w),C=tb(C)),["["+w.map((k,T)=>eb(k,s[T],n)).join(", ")+", ..., "+C.map((k,T)=>eb(k,s[o-j0+T],n)).join(", ")+"]"]}return["["+(n==="complex64"?tb(t):Array.from(t)).map((b,w)=>eb(b,s[w],n)).join(", ")+"]"]}const u=e.slice(1),c=r.slice(1),d=r[0]*i,h=[];if(o>gU){for(let y=0;y<j0;y++){const b=y*d,w=b+d;h.push(...IS(t.slice(b,w),u,n,c,s,!1))}h.push("...");for(let y=o-j0;y<o;y++){const b=y*d,w=b+d;h.push(...IS(t.slice(b,w),u,n,c,s,y===o-1))}}else for(let y=0;y<o;y++){const b=y*d,w=b+d;h.push(...IS(t.slice(b,w),u,n,c,s,y===o-1))}const m=l===2?",":"";h[0]="["+(o>0?h[0]+m:"");for(let y=1;y<h.length-1;y++)h[y]=" "+h[y]+m;let g=`,
`;for(let y=2;y<l;y++)g+=`
`;return h[h.length-1]=" "+h[h.length-1]+"]"+(a?"":g),h}function tb(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cs{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=ye(e),r!=null){const s=r.length;X(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Fr(n,this.size),this.strides=$t(e)}set(e,...n){n.length===0&&(n=[0]),X(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const s of e){if(s<0||s>=this.shape[n]){const a=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(a)}n++}let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=this.strides[s]*e[s];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return Il().makeTensor(this.values,this.shape,this.dtype)}}let Il=null,tm=null;function Bpe(t){Il=t}function Upe(t){tm=t}class Pn{constructor(e,n,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=ye(e),this.strides=$t(e),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return tm.buffer(this.shape,this.dtype,e)}bufferSync(){return tm.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Yo(this.shape,e,this.dtype==="complex64")}arraySync(){return Yo(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=Il().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>Ml(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Il().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=Il().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Ml(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await Il().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Il().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return tm.print(this,e)}clone(){return this.throwIfDisposed(),tm.clone(this)}toString(e=!1){const n=this.dataSync();return Fpe(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),tm.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),Il().makeVariable(this,e,n,r)}}Object.defineProperty(Pn,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function Oe(){return WM("Tensor",()=>Pn)}Oe();class a2 extends Pn{constructor(e,n,r,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Xt(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);Il().disposeTensor(this),this.dataId=e.dataId,Il().incRef(this,null)}dispose(){Il().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(a2,Symbol.hasInstance,{value:t=>t instanceof Pn&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var yU;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(yU||(yU={}));var G3;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(G3||(G3={}));var H3;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(H3||(H3={}));var q3;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(q3||(q3={}));var K3;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(K3||(K3={}));const Vpe={float32:q3,int32:G3,bool:H3,complex64:K3};function zs(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return Vpe[t][e]}function Qk(t){return zs(t,"int32")}function iY(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function oY(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Br(t,e){if(t.dtype===e.dtype)return[t,e];const n=zs(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function Wpe(t,e){X(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function lY(t){const e=[];return uY(t,e,new Set),e}function uY(t,e,n){if(t==null)return;if(t instanceof Pn){e.push(t);return}if(!Gpe(t))return;const r=t;for(const s in r){const a=r[s];n.has(a)||(n.add(a),uY(a,e,n))}}function Gpe(t){return Array.isArray(t)||typeof t=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ME(t){return t.kernelName!=null}class bU{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Im{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new bU}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(to(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Dpe(this.backendInstance),!0}setupRegisteredKernels(){hU(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){hU(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof ZC)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,a=r.then(i=>s<this.pendingBackendInitId?!1:(this.registry[e]=i,this.pendingBackendInit=null,!0)).catch(i=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,to(`Initialization of backend ${e} failed`),to(i.stack||i.message)),!1));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return to(`Initialization of backend ${e} failed`),to(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:s,asyncInit:a}=this.initializeBackend(r);if(a||s)return{name:r,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),s=r.backend,a=this.readSync(n),i=s.refCount(n);s.disposeData(n,!0),r.backend=e,e.move(n,a,r.shape,r.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,n,r){e();try{const s=r();return n(),s}catch(s){throw n(),s}}nextTensorId(){return Im.nextTensorId++}nextVariableId(){return Im.nextVariableId++}clone(e){const n=ue.runKernel(Mg,{x:e}),r={x:e},s=i=>({x:()=>{const o="float32",l={x:i},u={dtype:o};return ue.runKernel(Cg,l,u)}}),a=[];return this.addTapeNode(this.state.activeScope.name,r,[n],s,a,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(s2(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const s=this.backend.numDataIds();let a=0;r.forEach(l=>{a+=l.dtype==="complex64"?3:1});const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=s-n-a-i;if(o>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const s=this.isTapeOn(),a=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let o;this.backendName==null&&this.backend;let l;const u=ME(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(ME(e)){const{kernelName:g,inputs:y,attrs:b}=e;this.backendName==null&&this.backend;const w=s2(g,this.backendName);X(w!=null,()=>`Cannot find registered kernel '${g}' for backend '${this.backendName}'`),o=()=>{const C=this.backend.numDataIds();l=w.kernelFunc({inputs:y,attrs:b,backend:this.backend});const k=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(g,C,k);const T=k.map(N=>N.rank!=null?N:this.makeTensorFromTensorInfo(N));if(s){const N=this.getTensorsForGradient(g,y,T);r=this.saveTensorsForBackwardMode(N)}return T}}else{const{forwardFunc:g}=e,y=b=>{s&&(r=b.map(w=>this.keep(this.clone(w))))};o=()=>{const b=this.backend.numDataIds();l=this.tidy(()=>g(this.backend,y));const w=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,b,w),w}}const{inputs:c,attrs:d}=e,h=ME(e)?null:e.backwardsFunc;let m;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=o():(m=this.profiler.profileKernel(u,c,()=>o()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(m),n=m.outputs)}),s&&this.addTapeNode(u,c,n,h,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-a,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(g=>c[g]!=null?c[g].shape:null),outputShapes:n.map(g=>g.shape),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const s=fU(e);if(s!=null){const a=s.inputsToSave||[],i=s.outputsToSave||[];let o;s.saveAllInputs?(X(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),o=Object.keys(n).map(u=>n[u])):o=a.map(u=>n[u]);const l=r.filter((u,c)=>i[c]);return o.concat(l)}return[]}makeTensor(e,n,r,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let a=e;r==="string"&&pg(e[0])&&(a=e.map(l=>yc(l)));const i=s.write(a,n,r),o=new Pn(n,r,i,this.nextTensorId());if(this.trackTensor(o,s),r==="string"){const l=this.state.tensorInfo.get(i),u=ppe(a);this.state.numBytes+=u-l.bytes,l.bytes=u}return o}makeTensorFromDataId(e,n,r,s){r=r||"float32";const a={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(a,s)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:s,dtype:a}=e,i=new Pn(s,a,r,this.nextTensorId());return this.trackTensor(i,n),i}makeVariable(e,n=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const a=new a2(e,n,r,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*JS(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof a2||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*JS(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,s,a,i){const o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:a},l=fU(e);l!=null&&(s=l.gradFunc),s!=null&&(o.gradient=u=>(u=u.map((c,d)=>{if(c==null){const h=r[d],m=Js(h.size,h.dtype);return this.makeTensor(m,h.shape,h.dtype)}return c}),s(u.length>1?u:u[0],a,i))),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=lY(e),r=new Set(n.map(a=>a.id));for(let a=0;a<this.state.activeScope.track.length;a++){const i=this.state.activeScope.track[a];!i.kept&&!r.has(i.id)&&i.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(a=>{!a.kept&&a.scopeId===s.id&&this.track(a)})}gradients(e,n,r,s=!1){if(X(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));X(a instanceof Pn,()=>"The result y returned by f() must be a tensor.");const i=jpe(this.state.activeTape,n,a);if(!s&&i.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const o={};o[a.id]=r??Hpe(a.shape),Lpe(o,i,u=>this.tidy(u),qpe);const l=n.map(u=>o[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:a,grads:l}})}customGrad(e){return X(B3(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{X(n.every(o=>o instanceof Pn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};n.forEach((o,l)=>{s[l]=o});const a=(o,l)=>(r=e(...n,l),X(r.value instanceof Pn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),X(B3(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),i=(o,l)=>{const u=r.gradFunc(o,l),c=Array.isArray(u)?u:[u];X(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),X(c.every(h=>h instanceof Pn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return c.forEach((h,m)=>{d[m]=()=>h}),d};return this.runKernelFunc({forwardFunc:a,backwardsFunc:i,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=ti(),r=await this.backend.time(e);return r.wallMs=ti()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new bU;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Im.nextTensorId=0;Im.nextVariableId=0;function Hpe(t){const e=VM(ye(t),"float32");return ue.makeTensor(e,t,"float32")}function cY(){const t=ZX();if(t._tfengine==null){const e=new gpe(t);t._tfengine=new Im(e)}return vpe(t._tfengine.ENV),Bpe(()=>t._tfengine),t._tfengine}const ue=cY();function qpe(t,e){const n={a:t,b:e};return ue.runKernel(Ph,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kpe(){return typeof navigator<"u"&&navigator!=null}function dY(t){if(t||Kpe()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function fY(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const li=ve();li.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});li.registerFlag("IS_BROWSER",()=>fY());li.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");li.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));li.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));li.registerFlag("PROD",()=>!1);li.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>li.getBool("DEBUG"));li.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);li.registerFlag("IS_TEST",()=>!1);li.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>li.getBool("DEBUG"));li.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);li.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);li.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wd(t,e){let n=t;if(tl(t))return e==="string"?[]:[t.length];if(iY(t)){const s=t.channels||"RGBA";return[t.height,t.width*s.length]}else if(oY(t))return[t.buffer.size/(e==null?4:JS(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||tl(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&ve().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&hY(t,r,[]),r}function hY(t,e,n){if(n=n||[],!Array.isArray(t)&&!tl(t)){X(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}X(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),X(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let s=0;s<t.length;++s)hY(t[s],r,n.concat(s))}function xU(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function J(t,e,n,r="numeric"){if(t instanceof Oe())return xU(r,t.dtype,e,n),t;let s=Dh(t);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),xU(r,s,e,n),t==null||!tl(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const a=Wd(t,s);!tl(t)&&!Array.isArray(t)&&(t=[t]);const o=s!=="string"?Mh(t,s):$c(t,[],!0);return ue.makeTensor(o,a,s)}function i2(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((a,i)=>J(a,`${e}[${i}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pY="__op";function le(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+pY;const s=(...a)=>{ue.startScope(n);try{const i=r(...a);return hh(i)&&console.error("Cannot return a Promise inside of tidy."),ue.endScope(i),i}catch(i){throw ue.endScope(null),i}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xpe(t,e){const n=J(t,"real","complex"),r=J(e,"imag","complex");di(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:n,imag:r};return ue.runKernel(ik,s)}const Ed=le({complex_:Xpe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gd(t,e,n,r){if(r==null)r=Dh(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(oY(t)||iY(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return ue.backend.createTensorFromGPUData(t,e||n,r)}if(!tl(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){mo(e);const s=ye(e),a=ye(n);X(s===a,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${a}`);for(let i=0;i<n.length;++i){const o=n[i],l=i===n.length-1?o!==ye(e.slice(i)):!0;X(n[i]===e[i]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!tl(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Mh(t,r):$c(t,[],!0),ue.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dl(t,e,n){const r=Wd(t,n);return Gd(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ph={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class Hl{static join(e){return new Hl(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>tl(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const s=e[r];r!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const a=n+s.byteLength;this.shards.push({buffer:s,start:n,end:a}),n=a}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const s=n-e,a=new ArrayBuffer(s),i=new Uint8Array(a);let o=0;for(let l=r;l<this.shards.length;l++){const u=this.shards[l],d=e+o-u.start,h=o,g=Math.min(n,u.end)-u.start,y=new Uint8Array(u.buffer,d,g-d);if(i.set(y,h),o+=y.length,n<u.end)break}return a}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(s){return e<s.start?-1:e>=s.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=Ype(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function Ype(t,e){let n=0,r=t.length;for(;n<=r;){const s=Math.floor((r-n)/2)+n,a=e(t[s]);if(a===0)return s;a<0?r=s:n=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aa(){return ue}function vU(){return ue.memory()}function be(t,e){return ue.tidy(t,e)}function Rt(t){lY(t).forEach(n=>n.dispose())}function js(t){return ue.keep(t)}function Eb(){return ue.backendName}function nj(t,e,n=1){return ue.registerBackend(t,e,n)}function mh(){return ue.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ad=4;async function X3(t,e){const n=[],r=[],s=Array.isArray(t)?t.map(i=>i.name):Object.keys(t);for(let i=0;i<s.length;++i){const o=s[i],l=Array.isArray(t)?t[i].tensor:t[o];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${o}': ${l.dtype}`);const u={name:o,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async d=>{const h=await l.bytes(),m=h.reduce((b,w)=>b+w.length,0)+Ad*h.length,g=new Uint8Array(m);let y=0;for(let b=0;b<h.length;b++){const w=h[b],C=new Uint8Array(new Uint32Array([w.length]).buffer);g.set(C,y),y+=Ad,g.set(w,y),y+=w.length}d(g)});r.push(c)}else r.push(l.data());e!=null&&(u.group=e),n.push(u)}const a=await Promise.all(r);return{data:Jpe(a),specs:n}}function mY(t,e){const n=new Hl(t),r={};let s=0;for(const a of e){const i=Qpe(a,(o,l)=>n.slice(s+o,s+l));r[a.name]=gY(a,n.slice(s,s+i)),s+=i}return r}function Qpe(t,e){const n=ye(t.shape);let r;if("quantization"in t){const s=t.quantization;r=ph[s.dtype]}else if(t.dtype==="string"){let s=0;for(let a=0;a<n;a++)s+=Ad+new Uint32Array(e(s,s+Ad))[0];return s}else r=ph[t.dtype];return n*r}async function Zpe(t,e){const n=ye(t.shape);let r;if("quantization"in t){const s=t.quantization;r=ph[s.dtype]}else if(t.dtype==="string"){let s=0;for(let a=0;a<n;a++)s+=Ad+new Uint32Array(await e(s,s+Ad))[0];return s}else r=ph[t.dtype];return n*r}function gY(t,e){const n=t.name,r=t.dtype,s=t.shape,a=ye(s);let i,o=0;if("quantization"in t){const l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const u=ph[l.dtype],c=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){i=new Float32Array(c.length);for(let d=0;d<c.length;d++){const h=c[d];i[d]=h*l.scale+l.min}}else if(l.dtype==="float16")i=ame()(c);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);i=new Int32Array(c.length);for(let d=0;d<c.length;d++){const h=c[d];i[d]=Math.round(h*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);o+=a*u}else if(r==="string"){const l=ye(t.shape);i=[];for(let u=0;u<l;u++){const c=new Uint32Array(e.slice(o,o+Ad))[0];o+=Ad;const d=new Uint8Array(e.slice(o,o+c));i.push(d),o+=c}}else{const l=ph[r];if(r==="float32")i=new Float32Array(e);else if(r==="int32")i=new Int32Array(e);else if(r==="bool")i=new Uint8Array(e);else if(r==="complex64"){i=new Float32Array(e);const u=new Float32Array(i.length/2),c=new Float32Array(i.length/2);for(let g=0;g<u.length;g++)u[g]=i[g*2],c[g]=i[g*2+1];const d=Dl(u,s,"float32"),h=Dl(c,s,"float32"),m=Ed(d,h);return d.dispose(),h.dispose(),m}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);o+=a*l}return Dl(i,s,r)}async function wU(t,e,n){let r=new Uint8Array(e);for(;r.byteLength<n;){const{done:s,value:a}=await t.read();if(s&&a==null){const o=n-r.byteLength;throw new Error(`Reader is done but ${o} bytes are still expected`)}const i=new Uint8Array(r.length+a.byteLength);i.set(r,0),i.set(new Uint8Array(a),r.length),r=i}return r.buffer}async function yY(t,e){const n={},r=t.getReader();let s=new ArrayBuffer(0);for(const a of e){const i=await Zpe(a,async(u,c)=>(s=await wU(r,s,c),s.slice(u,c)));s=await wU(r,s,i);const o=s.slice(0,i);s=s.slice(i);const l=gY(a,o);if(n[a.name]=l,Eb()==="webgpu"){const u=mh();"uploadToGPU"in u&&ye(l.shape)>=ve().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&u.uploadToGPU(l.dataId)}}return n}function Jpe(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(a=>{if(e+=a.byteLength,n.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${a.constructor.name}`)});const r=new Uint8Array(e);let s=0;return n.forEach(a=>{r.set(new Uint8Array(a.buffer),s),s+=a.byteLength}),r.buffer}const rj=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function SU(t){return rj?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function eme(t){if(rj)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,s=e.length;r<s;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function tme(t){if(rj){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function bY(t){return Hl.join(t)}function CU(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function xY(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function vY(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function sj(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),vY(t,n,r)}function Bv(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:SU(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:SU(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new Hl(t.weightData).byteLength}}function Y3(t){const e=[];for(const n of t)e.push(...n.weights);return e}function nme(){const t=n=>{let r=n<<13,s=0;for(;(r&8388608)===0;)s-=8388608,r<<=1;return r&=-8388609,s+=947912704,r|s},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function rme(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function sme(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function ame(){const t=nme(),e=rme(),n=sme();return r=>{const s=new ArrayBuffer(4*r.length),a=new Uint32Array(s);for(let i=0;i<r.length;i++){const o=r[i],l=t[n[o>>10]+(o&1023)]+e[o>>10];a[i]=l}return new Float32Array(s)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ir{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Ir.instance==null&&(Ir.instance=new Ir),Ir.instance}static registerSaveRouter(e){Ir.getInstance().saveRouters.push(e)}static registerLoadRouter(e){Ir.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return Ir.getHandlers(e,"save")}static getLoadHandlers(e,n){return Ir.getHandlers(e,"load",n)}static getHandlers(e,n,r){const s=[];return(n==="load"?Ir.getInstance().loadRouters:Ir.getInstance().saveRouters).forEach(i=>{const o=i(e,r);o!==null&&s.push(o)}),s}}const ime=t=>Ir.registerSaveRouter(t),ome=t=>Ir.registerLoadRouter(t),wY=t=>Ir.getSaveHandlers(t),lme=(t,e)=>Ir.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q3="tensorflowjs",Z3=1,Hf="models_store",yd="model_info_store";function SY(){if(!ve().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function J3(t){const e=t.result;e.createObjectStore(Hf,{keyPath:"modelPath"}),e.createObjectStore(yd,{keyPath:"modelPath"})}class gh{constructor(e){if(this.indexedDB=SY(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,s)=>{const a=this.indexedDB.open(Q3,Z3);a.onupgradeneeded=()=>J3(a),a.onsuccess=()=>{const i=a.result;if(n==null){const o=i.transaction(Hf,"readonly"),u=o.objectStore(Hf).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return i.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(u.result.modelArtifacts)},u.onerror=c=>(i.close(),s(u.error)),o.oncomplete=()=>i.close()}else{n.weightData=Hl.join(n.weightData);const o=Bv(n),l=i.transaction(yd,"readwrite");let u=l.objectStore(yd),c;try{c=u.put({modelPath:this.modelPath,modelArtifactsInfo:o})}catch(h){return s(h)}let d;c.onsuccess=()=>{d=i.transaction(Hf,"readwrite");const h=d.objectStore(Hf);let m;try{m=h.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:o})}catch(g){return s(g)}m.onsuccess=()=>r({modelArtifactsInfo:o}),m.onerror=g=>{u=l.objectStore(yd);const y=u.delete(this.modelPath);y.onsuccess=()=>(i.close(),s(m.error)),y.onerror=b=>(i.close(),s(m.error))}},c.onerror=h=>(i.close(),s(c.error)),l.oncomplete=()=>{d==null?i.close():d.oncomplete=()=>i.close()}}},a.onerror=i=>s(a.error)})}}gh.URL_SCHEME="indexeddb://";const CY=t=>ve().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(gh.URL_SCHEME)?ume(t.slice(gh.URL_SCHEME.length)):null;Ir.registerSaveRouter(CY);Ir.registerLoadRouter(CY);function ume(t){return new gh(t)}function cme(t){return t.startsWith(gh.URL_SCHEME)?t.slice(gh.URL_SCHEME.length):t}class dme{constructor(){this.indexedDB=SY()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(Q3,Z3);r.onupgradeneeded=()=>J3(r),r.onsuccess=()=>{const s=r.result,a=s.transaction(yd,"readonly"),o=a.objectStore(yd).getAll();o.onsuccess=()=>{const l={};for(const u of o.result)l[u.modelPath]=u.modelArtifactsInfo;e(l)},o.onerror=l=>(s.close(),n(o.error)),a.oncomplete=()=>s.close()},r.onerror=s=>n(r.error)})}async removeModel(e){return e=cme(e),new Promise((n,r)=>{const s=this.indexedDB.open(Q3,Z3);s.onupgradeneeded=()=>J3(s),s.onsuccess=()=>{const a=s.result,i=a.transaction(yd,"readwrite"),o=i.objectStore(yd),l=o.get(e);let u;l.onsuccess=()=>{if(l.result==null)return a.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=o.delete(e),d=()=>{u=a.transaction(Hf,"readwrite");const m=u.objectStore(Hf).delete(e);m.onsuccess=()=>n(l.result.modelArtifactsInfo),m.onerror=g=>r(l.error)};c.onsuccess=d,c.onerror=h=>(d(),a.close(),r(l.error))}},l.onerror=c=>(a.close(),r(l.error)),i.oncomplete=()=>{u==null?a.close():u.oncomplete=()=>a.close()}},s.onerror=a=>r(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cc="/",nm="tensorflowjs_models",kY="info",fme="model_topology",hme="weight_specs",pme="weight_data",mme="model_metadata";function NY(t){return{info:[nm,t,kY].join(cc),topology:[nm,t,fme].join(cc),weightSpecs:[nm,t,hme].join(cc),weightData:[nm,t,pme].join(cc),modelMetadata:[nm,t,mme].join(cc)}}function TY(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function gme(t){const e=t.split(cc);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(cc)}function yme(t){return t.startsWith(yh.URL_SCHEME)?t.slice(yh.URL_SCHEME.length):t}class yh{constructor(e){if(!ve().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=NY(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=Bv(e),a=Hl.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,eme(a));const i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:s}}catch{throw TY(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=s;const a=this.LS.getItem(this.keys.modelMetadata);if(a!=null){const o=JSON.parse(a);n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,o.signature!=null&&(n.signature=o.signature),o.userDefinedMetadata!=null&&(n.userDefinedMetadata=o.userDefinedMetadata),o.modelInitializer!=null&&(n.modelInitializer=o.modelInitializer),o.initializerSignature!=null&&(n.initializerSignature=o.initializerSignature),o.trainingConfig!=null&&(n.trainingConfig=o.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=tme(i),n}}yh.URL_SCHEME="localstorage://";const $Y=t=>ve().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(yh.URL_SCHEME)?bme(t.slice(yh.URL_SCHEME.length)):null;Ir.registerSaveRouter($Y);Ir.registerLoadRouter($Y);function bme(t){return new yh(t)}class xme{constructor(){X(ve().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),X(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=nm+cc,r=cc+kY;for(let s=0;s<this.LS.length;++s){const a=this.LS.key(s);if(a.startsWith(n)&&a.endsWith(r)){const i=gme(a);e[i]=JSON.parse(this.LS.getItem(a))}}return e}async removeModel(e){e=yme(e);const n=NY(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return TY(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dm="://";class Ra{constructor(){this.managers={}}static getInstance(){return Ra.instance==null&&(Ra.instance=new Ra),Ra.instance}static registerManager(e,n){X(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(dm)&&(e=e.slice(0,e.indexOf(dm))),X(e.length>0,()=>"scheme must not be an empty string.");const r=Ra.getInstance();X(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=Ra.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(Ra.getInstance().managers)}}function ES(t){if(t.indexOf(dm)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Ra.getSchemes().join(",")}`);return{scheme:t.split(dm)[0],path:t.split(dm)[1]}}async function IY(t,e,n=!1){X(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=Ir.getLoadHandlers(t);X(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),X(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const s=r[0],a=Ir.getSaveHandlers(e);X(a.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),X(a.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const i=a[0],o=ES(t).scheme,l=ES(t).path,u=o===ES(t).scheme,c=await s.load();n&&u&&await Ra.getManager(o).removeModel(l);const d=await i.save(c);return n&&!u&&await Ra.getManager(o).removeModel(l),d.modelArtifactsInfo}async function vme(){const t=Ra.getSchemes(),e={};for(const n of t){const r=await Ra.getManager(n).listModels();for(const s in r){const a=n+dm+s;e[a]=r[s]}}return e}async function wme(t){const e=ES(t);return Ra.getManager(e.scheme).removeModel(e.path)}async function Sme(t,e){return IY(t,e,!1)}async function Cme(t,e){return IY(t,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kme{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!ve().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return eY(e)}}if(ve().get("IS_BROWSER")){ve().setPlatform("browser",new kme);try{Ra.registerManager(yh.URL_SCHEME,new xme)}catch{}try{Ra.registerManager(gh.URL_SCHEME,new dme)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nme={importFetch:()=>require("node-fetch")};let jE;class Tme{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return ve().global.fetch!=null?ve().global.fetch(e,n):(jE==null&&(jE=Nme.importFetch()),jE(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}ve().get("IS_NODE")&&!ve().get("IS_BROWSER")&&ve().setPlatform("node",new Tme);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wt(t,e="float32",n){return e=e||"float32",mo(t),new Cs(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $me(t,e){const n=J(t,"x","cast");if(!hpe(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},s={dtype:e};return ue.runKernel(Cg,r,s)}const nt=le({cast_:$me});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ime(t){const n={x:J(t,"x","clone","string_or_numeric")};return ue.runKernel(Mg,n)}const bc=le({clone_:Ime});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EY(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */cY();const Eme={buffer:Wt,cast:nt,clone:bc,print:EY};Upe(Eme);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ame(t,e){let n=J(t,"a","add"),r=J(e,"b","add");[n,r]=Br(n,r);const s={a:n,b:r};return ue.runKernel(Ph,s)}const je=le({add_:Ame});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rme(t,e){let n=J(t,"a","floorDiv"),r=J(e,"b","floorDiv");[n,r]=Br(n,r);const s={a:n,b:r};return ue.runKernel(Dg,s)}const aj=le({floorDiv_:Rme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ome(t,e){let n=J(t,"a","div"),r=J(e,"b","div");if([n,r]=Br(n,r),n.dtype==="int32"&&r.dtype==="int32")return aj(n,r);const s={a:n,b:r},a={};return ue.runKernel(Ig,s,a)}const dt=le({div_:Ome});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _me(t,e){let n=J(t,"a","mul"),r=J(e,"b","mul");[n,r]=Br(n,r);const s={a:n,b:r};return ue.runKernel(Gg,s)}const ie=le({mul_:_me});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dme(t){const e=J(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return ue.runKernel(Kx,n)}else{const n={x:e};return ue.runKernel(zx,n)}}const xs=le({abs_:Dme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pme(t){const n={x:J(t,"x","acos")};return ue.runKernel(gg,n)}const AY=le({acos_:Pme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mme(t){const n={x:J(t,"x","acosh")};return ue.runKernel(yg,n)}const RY=le({acosh_:Mme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jme(t){X(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),X(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((s,a)=>J(s,`tensors${a}`,"addN")),n=e[0];e.forEach(s=>{if(s.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(s=>{if(!Xt(s.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return ue.runKernel(Bx,r)}const Lme=le({addN_:jme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fme(t,e=null,n=!1){const s={x:J(t,"x","all","bool")},a={axis:e,keepDims:n};return ue.runKernel(JC,s,a)}const ij=le({all_:Fme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zme(t,e=null,n=!1){const s={x:J(t,"x","any","bool")},a={axis:e,keepDims:n};return ue.runKernel(ek,s,a)}const o2=le({any_:zme});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bme(t,e=0){const r={x:J(t,"x","argMax")},s={axis:e};return ue.runKernel(Ux,r,s)}const bh=le({argMax_:Bme});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ume(t,e=0){const r={x:J(t,"x","argMin")},s={axis:e};return ue.runKernel(Vx,r,s)}const OY=le({argMin_:Ume});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vme(t){const n={x:J(t,"x","asin")};return ue.runKernel(bg,n)}const _Y=le({asin_:Vme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wme(t){const n={x:J(t,"x","asinh")};return ue.runKernel(xg,n)}const DY=le({asinh_:Wme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gme(t){const n={x:J(t,"x","atan")};return ue.runKernel(vg,n)}const PY=le({atan_:Gme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hme(t,e){let n=J(t,"a","atan2"),r=J(e,"b","atan2");[n,r]=Br(n,r);const s={a:n,b:r};return ue.runKernel(Sg,s)}const MY=le({atan2_:Hme});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qme(t){const n={x:J(t,"x","atanh")};return ue.runKernel(wg,n)}const jY=le({atanh_:qme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hd(t,e,n,r,s="NHWC",a){const i=t[3],o=[...e,i],l=Pi(s);return mr(t,o,n,a,r,null,null,l)}function ga(t,e,n,r,s,a,i="channelsLast"){const[o,l]=Ab(e);let u;if(i==="channelsLast")u=[o,l,t[3],t[3]];else if(i==="channelsFirst")u=[o,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return mr(t,u,n,r,s,a,!1,i)}function go(t,e,n,r,s,a,i="NDHWC"){const[o,l,u]=eD(e);let c,d;if(i==="NDHWC")d="channelsLast",c=[o,l,u,t[4],t[4]];else if(i==="NCDHW")d="channelsFirst",c=[o,l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${i}`);return ql(t,c,n,r,s,!1,d,a)}function mr(t,e,n,r,s,a,i=!1,o="channelsLast"){let[l,u,c,d]=[-1,-1,-1,-1];if(o==="channelsLast")[l,u,c,d]=t;else if(o==="channelsFirst")[l,d,u,c]=t;else throw new Error(`Unknown dataFormat ${o}`);const[h,m,,g]=e,[y,b]=Ab(n),[w,C]=Ab(r),k=fm(h,w),T=fm(m,C),{padInfo:N,outHeight:I,outWidth:A}=Yme(s,u,c,y,b,k,T,a,o),D=i?g*d:g;let P;return o==="channelsFirst"?P=[l,D,I,A]:o==="channelsLast"&&(P=[l,I,A,D]),{batchSize:l,dataFormat:o,inHeight:u,inWidth:c,inChannels:d,outHeight:I,outWidth:A,outChannels:D,padInfo:N,strideHeight:y,strideWidth:b,filterHeight:h,filterWidth:m,effectiveFilterHeight:k,effectiveFilterWidth:T,dilationHeight:w,dilationWidth:C,inShape:t,outShape:P,filterShape:e}}function ql(t,e,n,r,s,a=!1,i="channelsLast",o){let[l,u,c,d,h]=[-1,-1,-1,-1,-1];if(i==="channelsLast")[l,u,c,d,h]=t;else if(i==="channelsFirst")[l,h,u,c,d]=t;else throw new Error(`Unknown dataFormat ${i}`);const[m,g,y,,b]=e,[w,C,k]=eD(n),[T,N,I]=eD(r),A=fm(m,T),D=fm(g,N),P=fm(y,I),{padInfo:R,outDepth:O,outHeight:F,outWidth:z}=Qme(s,u,c,d,w,C,k,A,D,P,o),V=a?b*h:b;let W;return i==="channelsFirst"?W=[l,V,O,F,z]:i==="channelsLast"&&(W=[l,O,F,z,V]),{batchSize:l,dataFormat:i,inDepth:u,inHeight:c,inWidth:d,inChannels:h,outDepth:O,outHeight:F,outWidth:z,outChannels:V,padInfo:R,strideDepth:w,strideHeight:C,strideWidth:k,filterDepth:m,filterHeight:g,filterWidth:y,effectiveFilterDepth:A,effectiveFilterHeight:D,effectiveFilterWidth:P,dilationDepth:T,dilationHeight:N,dilationWidth:I,inShape:t,outShape:W,filterShape:e}}function Kme(t,e,n,r,s){r==null&&(r=oj(t,e,n));const a=t[0],i=t[1],o=Rb((a-e+2*r)/n+1,s),l=Rb((i-e+2*r)/n+1,s);return[o,l]}function Xme(t,e,n,r,s,a){s==null&&(s=oj(t,e[0],r[0]));const i=[0,0,0,n];for(let o=0;o<3;o++)t[o]+2*s>=e[o]&&(i[o]=Rb((t[o]-e[o]+2*s)/r[o]+1,a));return i}function oj(t,e,n,r=1){const s=fm(e,r);return Math.floor((t[0]*(n-1)-n+s)/2)}function Ab(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function eD(t){return typeof t=="number"?[t,t,t]:t}function fm(t,e){return e<=1?t:t+(t-1)*(e-1)}function Yme(t,e,n,r,s,a,i,o,l){let u,c,d;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const m=Kme([e,n],a,r,t,o);c=m[0],d=m[1]}else if(t==="same"){c=Math.ceil(e/r),d=Math.ceil(n/s);const h=Math.max(0,(c-1)*r+a-e),m=Math.max(0,(d-1)*s+i-n),g=Math.floor(h/2),y=h-g,b=Math.floor(m/2),w=m-b;u={top:g,bottom:y,left:b,right:w,type:"SAME"}}else if(t==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-a+1)/r),d=Math.ceil((n-i+1)/s);else if(typeof t=="object"){const h=l==="channelsLast"?t[1][0]:t[2][0],m=l==="channelsLast"?t[1][1]:t[2][1],g=l==="channelsLast"?t[2][0]:t[3][0],y=l==="channelsLast"?t[2][1]:t[3][1];u={top:h,bottom:m,left:g,right:y,type:h===0&&m===0&&g===0&&y===0?"VALID":"EXPLICIT"},c=Rb((e-a+h+m)/r+1,o),d=Rb((n-i+g+y)/s+1,o)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:u,outHeight:c,outWidth:d}}function Qme(t,e,n,r,s,a,i,o,l,u,c){let d,h,m,g;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const b=Xme([e,n,r,1],[o,l,u],1,[s,a,i],t,c);h=b[0],m=b[1],g=b[2]}else if(t==="same"){h=Math.ceil(e/s),m=Math.ceil(n/a),g=Math.ceil(r/i);const y=(h-1)*s+o-e,b=(m-1)*a+l-n,w=(g-1)*i+u-r,C=Math.floor(y/2),k=y-C,T=Math.floor(b/2),N=b-T,I=Math.floor(w/2),A=w-I;d={top:T,bottom:N,left:I,right:A,front:C,back:k,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:h,outHeight:m,outWidth:g}}function Rb(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Rd(t){const[e,n,r]=Ab(t);return e===1&&n===1&&r===1}function Es(t,e){return Rd(t)||Rd(e)}function xh(t){return Ab(t).every(e=>e>0)}function Pi(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function za(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")X($m(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(s=>{X($m(s),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${s}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zme(t,e){const r={x:J(t,"x","reshape","string_or_numeric")},s={shape:e};return ue.runKernel(Iv,r,s)}const ce=le({reshape_:Zme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jme(t,e,n,r,s){const a=J(t,"x","avgPool","float32"),i=1;X(Es(n,i),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let o=a,l=!1;a.rank===3&&(l=!0,o=ce(a,[1,a.shape[0],a.shape[1],a.shape[2]])),X(o.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),za("avgPool",r,s);const u={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s};let d=ue.runKernel(Wx,u,c);return d=nt(d,a.dtype),l?ce(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Zk=le({avgPool_:Jme});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ege(t,e,n,r,s,a="NDHWC"){const i=J(t,"x","avgPool3d","float32");let o=i,l=!1;i.rank===4&&(l=!0,o=ce(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),X(o.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${o.rank}.`),X(a==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),X(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),za("avgPool3d",r,s);const u={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:a};let d=ue.runKernel(Gx,u,c);return d=nt(d,o.dtype),l?ce(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const LY=le({avgPool3d_:ege});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tge(t,e=0){X(t.length>=1,()=>"Pass at least one tensor to concat");const n=i2(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(a=>{if(a.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${a.dtype}. `)}),n.length===1)return bc(n[0]);const r=n,s={axis:e};return ue.runKernel(Xx,r,s)}const Rr=le({concat_:tge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nge(t,e,n=!1,r=!1){let s=J(t,"a","matMul"),a=J(e,"b","matMul");[s,a]=Br(s,a);const i={a:s,b:a},o={transposeA:n,transposeB:r};return ue.runKernel(Hx,i,o)}const ln=le({matMul_:nge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rge(t){const n={x:J(t,"x","sigmoid","float32")};return ue.runKernel(ny,n)}const io=le({sigmoid_:rge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sge(t,e,n){const r=J(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},a={begin:e,size:n};return ue.runKernel(_v,s,a)}const zt=le({slice_:sge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function age(t){const n={x:J(t,"x","tanh","float32")};return ue.runKernel(ly,n)}const vh=le({tanh_:age});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ige(t,e,n,r,s,a){const i=J(t,"forgetBias","basicLSTMCell"),o=J(e,"lstmKernel","basicLSTMCell"),l=J(n,"lstmBias","basicLSTMCell"),u=J(r,"data","basicLSTMCell"),c=J(s,"c","basicLSTMCell"),d=J(a,"h","basicLSTMCell"),h=Rr([u,d],1),m=ln(h,o),g=je(m,l),y=g.shape[0],b=g.shape[1]/4,w=[y,b],C=zt(g,[0,0],w),k=zt(g,[0,b],w),T=zt(g,[0,b*2],w),N=zt(g,[0,b*3],w),I=je(ie(io(C),vh(k)),ie(c,io(je(i,T)))),A=ie(vh(I),io(N));return[I,A]}const oge=le({basicLSTMCell_:ige});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lge(t,e,n){const r=J(t,"x","batchToSpaceND"),s=e.reduce((o,l)=>o*l);X(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),X(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),X(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`);const a={x:r},i={blockShape:e,crops:n};return ue.runKernel(qx,a,i)}const Jk=le({batchToSpaceND_:lge});function uge(t){let e;return t.rank===0||t.rank===1?e=ce(t,[1,1,1,t.size]):t.rank===2?e=ce(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=ce(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cge(t,e,n,r,s,a){a==null&&(a=.001);const i=J(t,"x","batchNorm"),o=J(e,"mean","batchNorm"),l=J(n,"variance","batchNorm");let u;s!=null&&(u=J(s,"scale","batchNorm"));let c;r!=null&&(c=J(r,"offset","batchNorm")),X(o.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),X(c==null||o.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),X(u==null||o.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h={x:uge(i),scale:u,offset:c,mean:o,variance:l},m={varianceEpsilon:a},g=ue.runKernel(sv,h,m);return ce(g,i.shape)}const Uv=le({batchNorm_:cge});function dge(t,e,n,r,s,a){const i=J(t,"x","batchNorm"),o=J(e,"mean","batchNorm"),l=J(n,"variance","batchNorm");let u;s!=null&&(u=J(s,"scale","batchNorm"));let c;return r!=null&&(c=J(r,"offset","batchNorm")),X(i.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`),X(o.rank===2||o.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${o.rank}.`),X(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&X(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&X(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),Uv(i,o,l,c,u,a)}const FY=le({batchNorm2d_:dge});function fge(t,e,n,r,s,a){const i=J(t,"x","batchNorm"),o=J(e,"mean","batchNorm"),l=J(n,"variance","batchNorm");let u;s!=null&&(u=J(s,"scale","batchNorm"));let c;return r!=null&&(c=J(r,"offset","batchNorm")),X(i.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`),X(o.rank===3||o.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${o.rank}.`),X(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&X(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&X(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),Uv(i,o,l,c,u,a)}const zY=le({batchNorm3d_:fge});function hge(t,e,n,r,s,a){const i=J(t,"x","batchNorm"),o=J(e,"mean","batchNorm"),l=J(n,"variance","batchNorm");let u;s!=null&&(u=J(s,"scale","batchNorm"));let c;return r!=null&&(c=J(r,"offset","batchNorm")),X(i.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`),X(o.rank===4||o.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${o.rank}.`),X(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&X(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&X(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),Uv(i,o,l,c,u,a)}const BY=le({batchNorm4d_:hge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pge(t,e,n){const r=J(t,"x","bincount"),s=J(e,"weights","bincount");X(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),X(n>=0,()=>`size must be non-negative, but got ${n}.`),X(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const a={x:r,weights:s},i={size:n};return ue.runKernel(rk,a,i)}const UY=le({bincount_:pge});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mge(t,e){const n=J(t,"x","bitwiseAnd"),r=J(e,"y","bitwiseAnd");if(!Xt(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const s={a:n,b:r};return ue.runKernel(sk,s)}const gge=le({bitwiseAnd_:mge});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yge(t,e){const n=J(t,"s0","broadcastArgs","int32"),r=J(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const s={s0:n,s1:r};return ue.runKernel(ak,s)}const bge=le({broadcastArgs_:yge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xge(t,e){let n=J(t,"broadcastTo","x");const r=n.shape;if(mo(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const u=n.shape.slice();for(;u.length<e.length;)u.unshift(1);n=ce(n,u)}const s=n.shape,a=Array.from(e);for(let u=e.length-1;u>=0;u--)if(s[u]===e[u])a[u]=1;else if(n.shape[u]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(a.map((u,c)=>u>1?c:-1).filter(u=>u>=0).length===0)return bc(n);const o={x:n},l={reps:a};return ue.runKernel(uy,o,l)}const hm=le({broadcastTo_:xge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vge(t){const n={x:J(t,"x","ceil","float32")};return ue.runKernel(kg,n)}const VY=le({ceil_:vge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dy(t,e,n){mo(t),n=n||Dh(e);const r={shape:t,value:e,dtype:n};return ue.runKernel(vk,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wge(t,e,n){const r=J(t,"x","clipByValue");if(X(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return dy(r.shape,e,r.dtype);const s={x:r},a={clipValueMin:e,clipValueMax:n};return ue.runKernel(Ng,s,a)}const ui=le({clipByValue_:wge});function Sge(t){return Rr(t,0)}const WY=le({concat1d_:Sge});function Cge(t,e){return Rr(t,e)}const GY=le({concat2d_:Cge});function kge(t,e){return Rr(t,e)}const HY=le({concat3d_:kge});function Nge(t,e){return Rr(t,e)}const qY=le({concat4d_:Nge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tge(t,e,n,r,s="NHWC",a=[1,1],i){const o=J(t,"x","conv2d","float32"),l=J(e,"filter","conv2d","float32");let u=o,c=!1;o.rank===3&&(c=!0,u=ce(o,[1,o.shape[0],o.shape[1],o.shape[2]])),X(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),X(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),za("conv2d",r,i);const d=s==="NHWC"?u.shape[3]:u.shape[1];X(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),X(Es(n,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),X(xh(a),()=>"Error in conv2D: Dilated rates should be larger than 0."),X(xh(n),()=>"Error in conv2D: Strides should be larger than 0.");const h={x:u,filter:l},m={strides:n,pad:r,dataFormat:s,dilations:a,dimRoundingMode:i},g=ue.runKernel(Yx,h,m);return c?ce(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const Od=le({conv2d_:Tge});function $ge(t,e,n,r,s="NWC",a=1,i){const o=J(t,"x","conv1d"),l=J(e,"filter","conv1d");let u=o,c=!1;o.rank===2&&(c=!0,u=ce(o,[1,o.shape[0],o.shape[1]])),X(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),X(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),za("conv1d",r,i),X(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),X(Es(n,a),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${a}'`),X(xh(a),()=>"Error in conv1D: Dilated rates should be larger than 0."),X(xh(n),()=>"Error in conv1D: Stride should be larger than 0."),X(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const d=ce(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=ce(u,[u.shape[0],1,u.shape[1],u.shape[2]]),b=Od(h,d,[1,n],r,"NHWC",[1,a],i);return c?ce(b,[b.shape[2],b.shape[3]]):ce(b,[b.shape[0],b.shape[2],b.shape[3]])}const lj=le({conv1d_:$ge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ige(t,e,n,r,s,a="NHWC",i){X(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let o=t,l=e,u=!1;e.rank===3&&(u=!0,l=ce(e,[1,e.shape[0],e.shape[1],e.shape[2]]),o=[1,t[0],t[1],t[2]]),X(o.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${o.length}.`),X(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),X(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=a==="NHWC"?o[3]:o[1],d=a==="NHWC"?l.shape[3]:l.shape[1];X(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),X(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),za("conv2dDerInput",s,i);const h={dy:l,filter:n},m={strides:r,pad:s,dataFormat:a,dimRoundingMode:i,inputShape:o},g=ue.runKernel(Qx,h,m);return u?ce(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const uj=le({conv2DBackpropInput_:Ige});function Ege(t,e,n,r,s,a){const i=J(t,"x","conv2dTranspose"),o=J(e,"filter","conv2dTranspose");return uj(n,i,o,r,s,"NHWC",a)}const cj=le({conv2dTranspose_:Ege});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Age(t,e,n,r,s="NDHWC",a=[1,1,1]){const i=J(t,"x","conv3d"),o=J(e,"filter","conv3d");let l=i,u=!1;i.rank===4&&(u=!0,l=ce(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),X(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),X(o.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${o.rank}.`),X(l.shape[4]===o.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${o.shape[3]}.`),X(Es(n,a),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),X(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),X(xh(a),()=>"Error in conv3D: Dilated rates should be larger than 0."),X(xh(n),()=>"Error in conv3D: Strides should be larger than 0.");const c={x:l,filter:o},d={strides:n,pad:r,dataFormat:s,dilations:a},h=ue.runKernel(Zx,c,d);return u?ce(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const KY=le({conv3d_:Age});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rge(t,e,n,r,s){X(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,i=e,o=!1;e.rank===4&&(o=!0,i=ce(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),a=[1,t[0],t[1],t[2],t[3]]);const l=a[4],u=i.shape[4];X(a.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${a.length}.`),X(i.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`),X(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),X(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),X(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:i,filter:n},d={pad:s,strides:r,inputShape:a},h=ue.runKernel(uk,c,d);return o?ce(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const XY=le({conv3DBackpropInput_:Rge});function Oge(t,e,n,r,s){const a=J(t,"x","conv3dTranspose"),i=J(e,"filter","conv3dTranspose");return XY(n,a,i,r,s)}const YY=le({conv3dTranspose_:Oge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ge(t){const n={x:J(t,"x","cos","float32")};return ue.runKernel(Tg,n)}const eN=le({cos_:_ge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dge(t){const n={x:J(t,"x","cosh","float32")};return ue.runKernel($g,n)}const dj=le({cosh_:Dge});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pge(t,e=0,n=!1,r=!1){const a={x:J(t,"x","cumprod")},i={axis:e,exclusive:n,reverse:r};return ue.runKernel(ck,a,i)}const l2=le({cumprod_:Pge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mge(t,e=0,n=!1,r=!1){const a={x:J(t,"x","cumsum")},i={axis:e,exclusive:n,reverse:r};return ue.runKernel(Jx,a,i)}const fj=le({cumsum_:Mge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jge(t,e,n,r=!1){const s=J(t,"x","denseBincount"),a=J(e,"weights","denseBincount");X(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),X(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),X(n>=0,()=>`size must be non-negative, but got ${n}.`),X(a.size===s.size||a.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${a.shape}.`);const i={x:s,weights:a},o={size:n,binaryOutput:r};return ue.runKernel(fk,i,o)}const tD=le({denseBincount_:jge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lge(t,e,n="NHWC"){const r=J(t,"x","depthToSpace","float32"),s=n==="NHWC"?r.shape[1]:r.shape[2],a=n==="NHWC"?r.shape[2]:r.shape[3],i=n==="NHWC"?r.shape[3]:r.shape[1];X(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),X(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e}  for depthToSpace with input shape
    ${r.shape}`),X(a*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${a} and ${e} for depthToSpace with input shape
        ${r.shape}`),X(i%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${i} for depthToSpace with input shape ${r.shape}`);const o={x:r},l={blockSize:e,dataFormat:n};return ue.runKernel(hk,o,l)}const QY=le({depthToSpace_:Lge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fge(t,e,n,r,s="NHWC",a=[1,1],i){const o=J(t,"x","depthwiseConv2d","float32"),l=J(e,"filter","depthwiseConv2d","float32");let u=o,c=!1;o.rank===3&&(c=!0,u=ce(o,[1,o.shape[0],o.shape[1],o.shape[2]])),X(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),X(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=s==="NHWC"?u.shape[3]:u.shape[1];X(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),za("depthwiseConv2d",r,i);const h={x:u,filter:l},m={strides:n,pad:r,dataFormat:s,dilations:a,dimRoundingMode:i},g=ue.runKernel(ev,h,m);return c?ce(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const Vv=le({depthwiseConv2d_:Fge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zge(t){const n={x:J(t,"x","diag")};return ue.runKernel(gk,n)}const Bge=le({diag_:zge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uge(t,e,n,r,s=[1,1],a="NHWC"){const i=J(t,"x","dilation2d"),o=J(e,"filter","dilation2d");X(i.rank===3||i.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),X(o.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${o.rank}.`),X(a==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${a}`);let l=i,u=!1;i.rank===3&&(l=ce(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=!0),X(l.shape[3]===o.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${o.shape[2]}`);const c={x:l,filter:o},d={strides:n,pad:r,dilations:s},h=ue.runKernel(tv,c,d);return u?ce(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const ZY=le({dilation2d_:Uge});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _d(t,e){const n=t.length,r=[];for(let s=0;s<n;s++){const a=n-1-s,i=t[a]||1;(e[e.length-1-s]||1)>1&&i===1&&r.unshift(a)}return r}function Is(t,e){const n=[];for(let r=0;r<e.length;r++){const s=t[t.length-r-1],a=e.length-r-1,i=e[a];(s==null||s===1&&i>1)&&n.unshift(a)}return n}function _t(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let s=0;s<n;s++){let a=t[t.length-s-1];a==null&&(a=1);let i=e[e.length-s-1];if(i==null&&(i=1),a===1)r[n-s-1]=i;else if(i===1)r[n-s-1]=a;else if(a!==i){const o=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(o)}else r[n-s-1]=a}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vge(t,e){let n=J(t,"a","equal","string_or_numeric"),r=J(e,"b","equal","string_or_numeric");[n,r]=Br(n,r),_t(n.shape,r.shape);const s={a:n,b:r};return ue.runKernel(nv,s)}const jl=le({equal_:Vge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wge(t,e,n){const r=J(e,"a","where"),s=J(n,"b","where"),a=J(t,"condition","where","bool"),i=_t(_t(a.shape,r.shape),s.shape),o=hm(a,i),l=hm(r,i),u=hm(s,i),c={condition:o,t:l,e:u};return ue.runKernel(Ov,c)}const ma=le({where_:Wge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gge(t){const n={x:J(t,"x","zerosLike")};return ue.runKernel(zv,n)}const vn=le({zerosLike_:Gge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hge(t,e){let n=J(t,"a","div"),r=J(e,"b","div");[n,r]=Br(n,r);const s=dt(n,r),a=vn(s),i=jl(r,a);return ma(i,a,s)}const JY=le({divNoNan_:Hge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qge(t,e){const n=J(t,"t1","dot"),r=J(e,"t2","dot");X((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const s=n.rank===1?n.size:n.shape[1],a=r.rank===1?r.size:r.shape[0];if(X(s===a,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${a}.`),n.rank===1&&r.rank===1){const i=ce(n,[1,-1]),o=ce(r,[-1,1]),l=ln(i,o);return ce(l,[])}else if(n.rank===1&&r.rank===2){const i=ce(n,[1,-1]),o=ce(r,[r.shape[0],r.shape[1]]),l=ln(i,o);return ce(l,[l.size])}else if(n.rank===2&&r.rank===1){const i=ce(r,[-1,1]),o=ln(n,i);return ce(o,[o.size])}else{const i=ce(r,[r.shape[0],r.shape[1]]);return ln(n,i)}}const eQ=le({dot_:qge});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kge(t,...e){const n=e.map((s,a)=>J(s,`tensors${a}`,"einsum")),r={equation:t};return ue.runKernel(yk,n,r)}const rm=le({einsum_:Kge});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xge(t){const n={x:J(t,"x","elu","float32")};return ue.runKernel(Eg,n)}const Wv=le({elu_:Xge});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yge(t,e){const n=J(t,"x","ensureShape","string_or_numeric");if(!dpe(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}const Qge=le({ensureShape_:Yge});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zge(t){let e=J(t,"x","erf");X(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=nt(e,"float32"));const n={x:e};return ue.runKernel(Ag,n)}const hj=le({erf_:Zge});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pj(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function tQ(t,e,n){const r=t.length+e.length,s=[];let a=0,i=0;for(let o=0;o<r;o++)n.indexOf(o)===-1?s.push(t[a++]):s.push(e[i++]);return s}function ns(t,e){const n=[],r=t.length;for(let a=0;a<r;a++)e.indexOf(a)===-1&&n.push(t[a]);const s=e.map(a=>t[a]);return[n,s]}function Ur(t,e){const n=e.map(r=>1);return tQ(t,n,e)}function hs(t,e,n){X(pj(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Yn(t,e){if(pj(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function ju(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function gr(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jge(t,e=null,n=!1){const s={x:J(t,"x","max")},a={reductionIndices:e,keepDims:n};return ue.runKernel(pv,s,a)}const Qo=le({max_:Jge});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eye(t,e=null,n=!1){const s={x:J(t,"x","min")},a={axis:e,keepDims:n};return ue.runKernel(bv,s,a)}const Ob=le({min_:eye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tye(t,e){let n=J(t,"base","pow"),r=J(e,"exp","pow");[n,r]=Br(n,r);const s={a:n,b:r};return ue.runKernel(Hg,s)}const Ic=le({pow_:tye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function It(t,e){if((tl(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&tl(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Gd(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nye(t){const n={x:J(t,"x","sqrt","float32")};return ue.runKernel(sy,n)}const ea=le({sqrt_:nye});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rye(t){const e=J(t,"x","square"),n={};return ue.runKernel("Square",{x:e},n)}const Kn=le({square_:rye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sye(t,e=null,n=!1){let r=J(t,"x","sum");r.dtype==="bool"&&(r=nt(r,"int32"));const s={x:r},a={axis:e,keepDims:n};return ue.runKernel(Dv,s,a)}const wt=le({sum_:sye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aye(t,e="euclidean",n=null,r=!1){t=J(t,"x","norm");const s=nQ(t,e,n);let a=s.shape;if(r){const i=Gt(n,t.shape);a=Ur(s.shape,i)}return ce(s,a)}function nQ(t,e,n=null){if(t.rank===0)return xs(t);if(t.rank!==1&&n===null)return nQ(ce(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return wt(xs(t),n);if(e===1/0)return Qo(xs(t),n);if(e===-1/0)return Ob(xs(t),n);if(e==="euclidean"||e===2)return ea(wt(Ic(xs(t),It(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Qo(wt(xs(t),n[0]),n[1]-1);if(e===1/0)return Qo(wt(xs(t),n[1]),n[0]);if(e===-1/0)return Ob(wt(xs(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return ea(wt(Kn(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const Gv=le({norm_:aye});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iye(t,e=null,n=!1){return Gv(t,"euclidean",e,n)}const rQ=le({euclideanNorm_:iye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oye(t){const n={x:J(t,"x","exp")};return ue.runKernel(Rg,n)}const La=le({exp_:oye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lye(t,e=0){const n=J(t,"x","expandDims","string_or_numeric");X(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},s={dim:e};return ue.runKernel(rv,r,s)}const cs=le({expandDims_:lye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uye(t){const n={x:J(t,"x","expm1")};return ue.runKernel(Og,n)}const sQ=le({expm1_:uye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cye(t,e){const n=J(t,"x","tile","string_or_numeric");X(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},s={reps:e};return ue.runKernel(uy,r,s)}const Go=le({tile_:cye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dye(t,e,n,r="float32"){e==null&&(e=t);const s=Wt([t,e],r),a=t<=e?t:e;for(let o=0;o<a;++o)s.set(1,o,o);const i=ce(s.toTensor(),[t,e]);if(n==null)return i;if(n.length===1)return Go(cs(i,0),[n[0],1,1]);if(n.length===2)return Go(cs(cs(i,0),0),[n[0],n[1],1,1]);if(n.length===3)return Go(cs(cs(cs(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const mj=le({eye_:dye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fye(t){const n={x:J(t,"x","floor","float32")};return ue.runKernel(_g,n)}const Hv=le({floor_:fye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hye(t,e,n=0,r=0){const s=J(t,"x","gather"),a=J(e,"indices","gather","int32"),i={x:s,indices:a},o={axis:n,batchDims:r};return ue.runKernel(av,i,o)}const qv=le({gather_:hye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pye(t,e){let n=J(t,"a","greater","string_or_numeric"),r=J(e,"b","greater","string_or_numeric");[n,r]=Br(n,r),_t(n.shape,r.shape);const s={a:n,b:r};return ue.runKernel(iv,s)}const Mi=le({greater_:pye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mye(t,e){let n=J(t,"a","greaterEqual","string_or_numeric"),r=J(e,"b","greaterEqual","string_or_numeric");[n,r]=Br(n,r),_t(n.shape,r.shape);const s={a:n,b:r};return ue.runKernel(Pg,s)}const qd=le({greaterEqual_:mye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gye(t){const n={input:J(t,"input","imag")};return ue.runKernel(kk,n)}const tN=le({imag_:gye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yye(t){const n={x:J(t,"x","isFinite")};return ue.runKernel(jg,n)}const aQ=le({isFinite_:yye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bye(t){const n={x:J(t,"x","isInf")};return ue.runKernel(Lg,n)}const iQ=le({isInf_:bye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xye(t){const n={x:J(t,"x","isNaN")};return ue.runKernel(Fg,n)}const oQ=le({isNaN_:xye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vye(t,e=.2){const r={x:J(t,"x","leakyRelu")},s={alpha:e};return ue.runKernel(ov,r,s)}const nN=le({leakyRelu_:vye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wye(t,e){let n=J(t,"a","less","string_or_numeric"),r=J(e,"b","less","string_or_numeric");[n,r]=Br(n,r),_t(n.shape,r.shape);const s={a:n,b:r};return ue.runKernel(lv,s)}const _b=le({less_:wye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sye(t,e){let n=J(t,"a","lessEqual","string_or_numeric"),r=J(e,"b","lessEqual","string_or_numeric");[n,r]=Br(n,r),_t(n.shape,r.shape);const s={a:n,b:r};return ue.runKernel(uv,s)}const jh=le({lessEqual_:Sye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cye(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return ue.runKernel(Nk,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kye(t,e=5,n=1,r=1,s=.5){const a=J(t,"x","localResponseNormalization");X(a.rank===4||a.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${a.rank}.`),X($m(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let i=a,o=!1;a.rank===3&&(o=!0,i=ce(a,[1,a.shape[0],a.shape[1],a.shape[2]]));const l={x:i},u={depthRadius:e,bias:n,alpha:r,beta:s},c=ue.runKernel(hv,l,u);return o?ce(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const lQ=le({localResponseNormalization_:kye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nye(t){const n={x:J(t,"x","log","float32")};return ue.runKernel(zg,n)}const fo=le({log_:Nye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tye(t){const n={x:J(t,"x","log1p")};return ue.runKernel(Bg,n)}const rN=le({log1p_:Tye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ye(t,e){X(B3(t),()=>"The f passed in variableGrads(f) must be a function"),X(e==null||Array.isArray(e)&&e.every(u=>u instanceof a2),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const u in ue.registeredVariables)e.push(ue.registeredVariables[u])}const r=n?e.filter(u=>!u.trainable):null,s=e.length;e=e.filter(u=>u.trainable),X(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const a=!0,{value:i,grads:o}=ue.gradients(t,e,null,a);X(o.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),X(i.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${i.rank} tensor`);const l={};return e.forEach((u,c)=>{o[c]!=null&&(l[u.name]=o[c])}),r!=null&&r.forEach(u=>l[u.name]=null),{value:i,grads:l}}function Ec(t){return ue.customGrad(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iye(t){const n={x:J(t,"x","neg")};return ue.runKernel(vv,n)}const vr=le({neg_:Iye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eye(t){const n={x:J(t,"x","softplus")};return ue.runKernel(ry,n)}const fy=le({softplus_:Eye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aye(t){const e=J(t,"x","logSigmoid");return Ec(r=>({value:vr(fy(vr(r))),gradFunc:i=>ie(i,io(vr(r)))}))(e)}const uQ=le({logSigmoid_:Aye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rye(t,e){let n=J(t,"a","sub"),r=J(e,"b","sub");[n,r]=Br(n,r);const s={a:n,b:r};return ue.runKernel(iy,s)}const ft=le({sub_:Rye});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oye(t,e=-1){const n=J(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return Ec((s,a)=>{const o=Qo(s,e,!0),l=ft(s,o),u=ft(nt(l,"float32"),fo(wt(La(l),e,!0)));return a([u]),{value:u,gradFunc:(d,h)=>{const[m]=h,g=!0,y=La(m);return ft(d,ie(wt(d,e,g),y))}}})(n)}const gj=le({logSoftmax_:Oye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ye(t,e=null,n=!1){const r=J(t,"x","logSumExp"),s=Gt(e,r.shape),a=Qo(r,s,!0),i=ft(r,a),o=La(i),l=wt(o,s),u=fo(l),c=je(ce(a,u.shape),u);if(n){const d=Ur(c.shape,s);return ce(c,d)}return c}const sN=le({logSumExp_:_ye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dye(t,e){const n=J(t,"a","logicalAnd","bool"),r=J(e,"b","logicalAnd","bool");_t(n.shape,r.shape);const s={a:n,b:r};return ue.runKernel(cv,s)}const Tu=le({logicalAnd_:Dye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pye(t){const n={x:J(t,"x","logicalNot","bool")};return ue.runKernel(dv,n)}const aN=le({logicalNot_:Pye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mye(t,e){const n=J(t,"a","logicalOr","bool"),r=J(e,"b","logicalOr","bool");_t(n.shape,r.shape);const s={a:n,b:r};return ue.runKernel(fv,s)}const yj=le({logicalOr_:Mye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jye(t,e){const n=J(t,"a","logicalXor","bool"),r=J(e,"b","logicalXor","bool");return _t(n.shape,r.shape),Tu(yj(t,e),aN(Tu(t,e)))}const cQ=le({logicalXor_:jye});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bw=2147483648;function Lye(t,e,n="left"){const r=J(t,"sortedSequence","searchSorted"),s=J(e,"values","searchSorted"),a=r.shape[r.shape.length-1],i=s.shape[s.shape.length-1],o=ce(r,[-1,a]),l=ce(s,[-1,i]);if(o.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(o.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(ye(l.shape)>=Bw)throw new Error(`values tensor size must less than ${Bw}`);if(o.shape[1]>=Bw)throw new Error(`trailing dim_size must less than ${Bw} for int32 output type, was ${o.shape[1]}`);const u={sortedSequence:o,values:l},c={side:n};return ue.runKernel(Fk,u,c)}const bj=le({searchSorted_:Lye});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fye(t,e){return bj(t,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zye(t,e,n,r,s){const a=J(t,"x","maxPool"),i=1;let o=a,l=!1;a.rank===3&&(l=!0,o=ce(a,[1,a.shape[0],a.shape[1],a.shape[2]])),X(o.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),X(Es(n,i),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),za("maxPool",r,s);const u={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s},d=ue.runKernel(mv,u,c);return l?ce(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const iN=le({maxPool_:zye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bye(t,e=[1,1,1],n,r,s,a="NDHWC"){const i=J(t,"x","maxPool3d");let o=i,l=!1;i.rank===4&&(l=!0,o=ce(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),X(o.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${o.rank}.`),X(a==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${a}`),za("maxPool3d",r,s);const u={x:o},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:a},d=ue.runKernel(gv,u,c);return l?ce(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const dQ=le({maxPool3d_:Bye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uye(t,e,n,r,s=!1){const i={x:J(t,"x","maxPoolWithArgmax")},o={filterSize:e,strides:n,pad:r,includeBatchInIndex:s},l=ue.runKernel(Ek,i,o);return{result:l[0],indexes:l[1]}}const Vye=le({maxPoolWithArgmax_:Uye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wye(t,e){let n=J(t,"a","maximum"),r=J(e,"b","maximum");[n,r]=Br(n,r),n.dtype==="bool"&&(n=nt(n,"int32"),r=nt(r,"int32")),_t(n.shape,r.shape);const s={a:n,b:r};return ue.runKernel(Ug,s)}const Pc=le({maximum_:Wye});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gye(t,e=null,n=!1){const s={x:J(t,"x","mean")},a={axis:e,keepDims:n};return ue.runKernel(yv,s,a)}const Lr=le({mean_:Gye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function es(t,e="float32"){if(mo(t),e==="complex64"){const r=es(t,"float32"),s=es(t,"float32");return Ed(r,s)}const n=Js(ye(t),e);return ue.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ti(t,e="float32"){if(mo(t),e==="complex64"){const r=Ti(t,"float32"),s=es(t,"float32");return Ed(r,s)}const n=VM(ye(t),e);return ue.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hye(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=J(t,"x","meshgrid",t instanceof Pn?t.dtype:"float32");if(e===void 0)return[r];let s=J(e,"y","meshgrid",e instanceof Pn?e.dtype:"float32");const a=ye(r.shape),i=ye(s.shape);return n==="xy"?(r=ce(r,[1,-1]),s=ce(s,[-1,1]),[ln(Ti([i,1],r.dtype),r),ln(s,Ti([1,a],s.dtype))]):(r=ce(r,[-1,1]),s=ce(s,[1,-1]),[ln(r,Ti([1,i],r.dtype)),ln(Ti([a,1],s.dtype),s)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qye(t,e){let n=J(t,"a","minimum"),r=J(e,"b","minimum");[n,r]=Br(n,r),n.dtype==="bool"&&(n=nt(n,"int32"),r=nt(r,"int32")),_t(n.shape,r.shape);const s={a:n,b:r};return ue.runKernel(Vg,s)}const Dd=le({minimum_:qye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kye(t,e,n){X(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=J(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");X(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const s=n==="reflect"?1:0;for(let o=0;o<r.rank;o++)X(e[o].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),X(e[o][0]>=0&&e[o][0]<=r.shape[o]-s&&e[o][1]>=0&&e[o][1]<=r.shape[o]-s,()=>`Padding in dimension ${o} cannot be greater than or equal to ${r.shape[o]-s} or less than 0 for input of shape ${r.shape}`);const a={paddings:e,mode:n},i={x:r};return ue.runKernel(xv,i,a)}const xj=le({mirrorPad_:Kye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xye(t,e){let n=J(t,"a","mod"),r=J(e,"b","mod");[n,r]=Br(n,r);const s={a:n,b:r};return ue.runKernel(Wg,s)}const fQ=le({mod_:Xye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yye(t,e=null,n=!1){t=J(t,"x","moments");const r=Gt(e,t.shape),s=Lr(t,r,n);let a=s.shape;n||(a=Ur(s.shape,r));const i=Kn(ft(nt(t,"float32"),ce(s,a))),o=Lr(i,r,n);return{mean:s,variance:o}}const oN=le({moments_:Yye});function Qye(t,e,n,r){const s=J(e,"data","multiRNNCell"),a=i2(n,"c","multiRNNCell"),i=i2(r,"h","multiRNNCell");let o=s;const l=[];for(let d=0;d<t.length;d++){const h=t[d](o,a[d],i[d]);l.push(h[0]),l.push(h[1]),o=h[1]}const u=[],c=[];for(let d=0;d<l.length;d+=2)u.push(l[d]),c.push(l[d+1]);return[u,c]}const Zye=le({multiRNNCell_:Qye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jye(t,e,n,r=!1){const s=J(t,"logits","multinomial"),a=s.size,i=s.rank;if(a<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${a}.`);if(i>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${i}`);n=n||Math.random();const l={logits:i===1?ce(s,[1,-1]):s},u={numSamples:e,seed:n,normalized:r},c=ue.runKernel(Ak,l,u);return i===1?ce(c,[c.size]):c}const e0e=le({multinomial_:Jye});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t0e(t,e){let n=J(t,"a","notEqual","string_or_numeric"),r=J(e,"b","notEqual","string_or_numeric");[n,r]=Br(n,r),_t(n.shape,r.shape);const s={a:n,b:r};return ue.runKernel(wv,s)}const Em=le({notEqual_:t0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n0e(t,e,n=1,r=0,s="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const i={indices:J(t,"indices","oneHot","int32")},o={dtype:s,depth:e,onValue:n,offValue:r};return ue.runKernel(Cv,i,o)}const vj=le({oneHot_:n0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r0e(t){const n={x:J(t,"x","onesLike")};return ue.runKernel(Sv,n)}const ho=le({onesLike_:r0e});function s0e(t,e){const n=J(t,"v1","outerProduct"),r=J(e,"v2","outerProduct");X(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const s=ce(n,[-1,1]),a=ce(r,[1,-1]);return ln(s,a)}const a0e=le({outerProduct_:s0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i0e(t,e,n=0){const r=J(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:n},a={x:r};return ue.runKernel(Nv,a,s)}const Ll=le({pad_:i0e});function o0e(t,e,n=0){return X(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),Ll(t,[e],n)}const l0e=le({pad1d_:o0e});function u0e(t,e,n=0){return X(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Ll(t,e,n)}const c0e=le({pad2d_:u0e});function d0e(t,e,n=0){return X(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Ll(t,e,n)}const f0e=le({pad3d_:d0e});function h0e(t,e,n=0){return X(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Ll(t,e,n)}const p0e=le({pad4d_:h0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m0e(t,e,n){const r=J(t,"x","spaceToBatchND");X(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),X(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),X(r.shape.reduce((i,o,l)=>l>0&&l<=e.length?i&&(o+n[l-1][0]+n[l-1][1])%e[l-1]===0:i,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const s={x:r},a={blockShape:e,paddings:n};return ue.runKernel(Pv,s,a)}const lN=le({spaceToBatchND_:m0e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g0e(t,e,n,r,s,a,i){s==null&&(s=[1,1]),a==null&&(a=1),r===0&&(r="valid");const o=J(t,"x","maxPool");let l=o,u=!1;o.rank===3&&(u=!0,l=ce(o,[1,o.shape[0],o.shape[1],o.shape[2]])),X(Es(a,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${a} and dilations '${s}'`);const c=ga(l.shape,e,a,s,r),d=[c.dilationHeight,c.dilationWidth];let h;r==="same"?h=b0e([c.filterHeight,c.filterWidth],d):h=[[0,0],[0,0]];const m=d[0]===1&&d[1]===1,[g,y]=y0e([c.inHeight,c.inWidth],d,h),b=m?r:"valid",w=m?l:lN(l,d,g),k=(n==="avg"?()=>Zk(w,e,a,b,i):()=>iN(w,e,a,b,i))(),T=m?k:Jk(k,d,y);return u?ce(T,[T.shape[1],T.shape[2],T.shape[3]]):T}function y0e(t,e,n){const r=n.map(c=>c[0]),s=n.map(c=>c[1]),a=t.concat(r,s),i=e.map((c,d)=>(c-a[d]%c)%c),o=s.map((c,d)=>c+i[d]),l=e.map((c,d)=>[r[d],o[d]]),u=e.map((c,d)=>[0,i[d]]);return[l,u]}function b0e(t,e){const r=t.map((i,o)=>i+(i-1)*(e[o]-1)).map(i=>i-1),s=r.map(i=>Math.floor(i/2)),a=r.map((i,o)=>i-s[o]);return r.map((i,o)=>[s[o],a[o]])}const hQ=le({pool_:g0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x0e(t,e){const n=J(t,"x","prelu"),r=J(e,"alpha","prelu"),s={x:n,alpha:r};return ue.runKernel(Tv,s)}const uN=le({prelu_:x0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v0e(t,e=null,n=!1){let r=J(t,"x","prod");r.dtype==="bool"&&(r=nt(r,"int32"));const s={x:r},a={axis:e,keepDims:n};return ue.runKernel($v,s,a)}const pQ=le({prod_:v0e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w0e(t,e,n,r){const s=t.map((c,d)=>J(c,`tensors${d}`,"raggedGather","int32")),a=J(e,"paramsDenseValues","raggedGather"),i=J(n,"indices","raggedGather","int32"),o={paramsNestedSplits:s,paramsDenseValues:a,indices:i},l={outputRaggedRank:r},u=ue.runKernel(qM,o,l);return{outputNestedSplits:u.slice(0,u.length-1),outputDenseValues:u[u.length-1]}}const S0e=le({raggedGather_:w0e});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C0e(t,e,n){const r=J(t,"starts","raggedRange"),s=J(e,"limits","raggedRange",r.dtype),a=J(n,"deltas","raggedRange",r.dtype),i={starts:r,limits:s,deltas:a},o=ue.runKernel(KM,i);return{rtNestedSplits:o[0],rtDenseValues:o[1]}}const k0e=le({raggedRange_:C0e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N0e(t,e,n,r,s){const a=J(t,"shape","raggedTensorToTensor","int32"),i=J(e,"values","raggedTensorToTensor"),o=J(n,"defaultValue","raggedTensorToTensor",i.dtype),l=r.map((d,h)=>J(d,`tensors${h}`,"raggedTensorToTensor","int32")),u={shape:a,values:i,defaultValue:o,rowPartitionTensors:l},c={rowPartitionTypes:s};return ue.runKernel(XM,u,c)}const T0e=le({raggedTensorToTensor_:N0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $0e(t,e,n){mo(t);const r=ye(t);let s=null;if(n==null||n==="float32")s=new Float32Array(r);else if(n==="int32")s=new Int32Array(r);else if(n==="bool")s=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let a=0;a<r;a++)s[a]=e();return ue.makeTensor(s,t,n)}const I0e=le({rand_:$0e});var AS={exports:{}},E0e=AS.exports,kU;function A0e(){return kU||(kU=1,function(t){(function(e,n,r){function s(l){var u=this,c=o();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function a(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function i(l,u){var c=new s(l),d=u&&u.state,h=c.next;return h.int32=function(){return c.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,d&&(typeof d=="object"&&a(d,c),h.state=function(){return a(c,{})}),h}function o(){var l=4022871197,u=function(c){c=String(c);for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var h=.02519603282416938*l;l=h>>>0,h-=l,h*=l,l=h>>>0,h-=l,l+=h*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=i:this.alea=i})(E0e,t)}(AS)),AS.exports}var RS={exports:{}},R0e=RS.exports,NU;function O0e(){return NU||(NU=1,function(t){(function(e,n,r){function s(o){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},o===(o|0)?l.x=o:u+=o;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function a(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function i(o,l){var u=new s(o),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var h=u.next()>>>11,m=(u.next()>>>0)/4294967296,g=(h+m)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&a(c,u),d.state=function(){return a(u,{})}),d}n&&n.exports?n.exports=i:this.xor128=i})(R0e,t)}(RS)),RS.exports}var OS={exports:{}},_0e=OS.exports,TU;function D0e(){return TU||(TU=1,function(t){(function(e,n,r){function s(o){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:u+=o;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function a(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function i(o,l){var u=new s(o),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var h=u.next()>>>11,m=(u.next()>>>0)/4294967296,g=(h+m)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&a(c,u),d.state=function(){return a(u,{})}),d}n&&n.exports?n.exports=i:this.xorwow=i})(_0e,t)}(OS)),OS.exports}var _S={exports:{}},P0e=_S.exports,$U;function M0e(){return $U||($U=1,function(t){(function(e,n,r){function s(o){var l=this;l.next=function(){var c=l.x,d=l.i,h,m;return h=c[d],h^=h>>>7,m=h^h<<24,h=c[d+1&7],m^=h^h>>>10,h=c[d+3&7],m^=h^h>>>3,h=c[d+4&7],m^=h^h<<7,h=c[d+7&7],h=h^h<<13,m^=h^h<<9,c[d]=m,l.i=d+1&7,m};function u(c,d){var h,m=[];if(d===(d|0))m[0]=d;else for(d=""+d,h=0;h<d.length;++h)m[h&7]=m[h&7]<<15^d.charCodeAt(h)+m[h+1&7]<<13;for(;m.length<8;)m.push(0);for(h=0;h<8&&m[h]===0;++h);for(h==8?m[7]=-1:m[h],c.x=m,c.i=0,h=256;h>0;--h)c.next()}u(l,o)}function a(o,l){return l.x=o.x.slice(),l.i=o.i,l}function i(o,l){o==null&&(o=+new Date);var u=new s(o),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var h=u.next()>>>11,m=(u.next()>>>0)/4294967296,g=(h+m)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(c.x&&a(c,u),d.state=function(){return a(u,{})}),d}n&&n.exports?n.exports=i:this.xorshift7=i})(P0e,t)}(_S)),_S.exports}var DS={exports:{}},j0e=DS.exports,IU;function L0e(){return IU||(IU=1,function(t){(function(e,n,r){function s(o){var l=this;l.next=function(){var c=l.w,d=l.X,h=l.i,m,g;return l.w=c=c+1640531527|0,g=d[h+34&127],m=d[h=h+1&127],g^=g<<13,m^=m<<17,g^=g>>>15,m^=m>>>12,g=d[h]=g^m,l.i=h,g+(c^c>>>16)|0};function u(c,d){var h,m,g,y,b,w=[],C=128;for(d===(d|0)?(m=d,d=null):(d=d+"\0",m=0,C=Math.max(C,d.length)),g=0,y=-32;y<C;++y)d&&(m^=d.charCodeAt((y+32)%d.length)),y===0&&(b=m),m^=m<<10,m^=m>>>15,m^=m<<4,m^=m>>>13,y>=0&&(b=b+1640531527|0,h=w[y&127]^=m+b,g=h==0?g+1:0);for(g>=128&&(w[(d&&d.length||0)&127]=-1),g=127,y=4*128;y>0;--y)m=w[g+34&127],h=w[g=g+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,w[g]=m^h;c.w=b,c.X=w,c.i=g}u(l,o)}function a(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function i(o,l){o==null&&(o=+new Date);var u=new s(o),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var h=u.next()>>>11,m=(u.next()>>>0)/4294967296,g=(h+m)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(c.X&&a(c,u),d.state=function(){return a(u,{})}),d}n&&n.exports?n.exports=i:this.xor4096=i})(j0e,t)}(DS)),DS.exports}var PS={exports:{}},F0e=PS.exports,EU;function z0e(){return EU||(EU=1,function(t){(function(e,n,r){function s(o){var l=this,u="";l.next=function(){var d=l.b,h=l.c,m=l.d,g=l.a;return d=d<<25^d>>>7^h,h=h-m|0,m=m<<24^m>>>8^g,g=g-d|0,l.b=d=d<<20^d>>>12^h,l.c=h=h-m|0,l.d=m<<16^h>>>16^g,l.a=g-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):u+=o;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function a(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function i(o,l){var u=new s(o),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var h=u.next()>>>11,m=(u.next()>>>0)/4294967296,g=(h+m)/(1<<21);while(g===0);return g},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&a(c,u),d.state=function(){return a(u,{})}),d}n&&n.exports?n.exports=i:this.tychei=i})(F0e,t)}(PS)),PS.exports}var MS={exports:{}};const B0e={},U0e=Object.freeze(Object.defineProperty({__proto__:null,default:B0e},Symbol.toStringTag,{value:"Module"})),V0e=oue(U0e);var W0e=MS.exports,AU;function G0e(){return AU||(AU=1,function(t){(function(e,n,r){var s=256,a=6,i=52,o="random",l=r.pow(s,a),u=r.pow(2,i),c=u*2,d=s-1,h;function m(T,N,I){var A=[];N=N==!0?{entropy:!0}:N||{};var D=w(b(N.entropy?[T,k(n)]:T??C(),3),A),P=new g(A),R=function(){for(var O=P.g(a),F=l,z=0;O<u;)O=(O+z)*s,F*=s,z=P.g(1);for(;O>=c;)O/=2,F/=2,z>>>=1;return(O+z)/F};return R.int32=function(){return P.g(4)|0},R.quick=function(){return P.g(4)/4294967296},R.double=R,w(k(P.S),n),(N.pass||I||function(O,F,z,V){return V&&(V.S&&y(V,P),O.state=function(){return y(P,{})}),z?(r[o]=O,F):O})(R,D,"global"in N?N.global:this==r,N.state)}function g(T){var N,I=T.length,A=this,D=0,P=A.i=A.j=0,R=A.S=[];for(I||(T=[I++]);D<s;)R[D]=D++;for(D=0;D<s;D++)R[D]=R[P=d&P+T[D%I]+(N=R[D])],R[P]=N;(A.g=function(O){for(var F,z=0,V=A.i,W=A.j,j=A.S;O--;)F=j[V=d&V+1],z=z*s+j[d&(j[V]=j[W=d&W+F])+(j[W]=F)];return A.i=V,A.j=W,z})(s)}function y(T,N){return N.i=T.i,N.j=T.j,N.S=T.S.slice(),N}function b(T,N){var I=[],A=typeof T,D;if(N&&A=="object")for(D in T)try{I.push(b(T[D],N-1))}catch{}return I.length?I:A=="string"?T:T+"\0"}function w(T,N){for(var I=T+"",A,D=0;D<I.length;)N[d&D]=d&(A^=N[d&D]*19)+I.charCodeAt(D++);return k(N)}function C(){try{var T;return h&&(T=h.randomBytes)?T=T(s):(T=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(T)),k(T)}catch{var N=e.navigator,I=N&&N.plugins;return[+new Date,e,I,e.screen,k(n)]}}function k(T){return String.fromCharCode.apply(0,T)}if(w(r.random(),n),t.exports){t.exports=m;try{h=V0e}catch{}}else r["seed"+o]=m})(typeof self<"u"?self:W0e,[],Math)}(MS)),MS.exports}var LE,RU;function H0e(){if(RU)return LE;RU=1;var t=A0e(),e=O0e(),n=D0e(),r=M0e(),s=L0e(),a=z0e(),i=G0e();return i.alea=t,i.xor128=e,i.xorwow=n,i.xorshift7=r,i.xor4096=s,i.tychei=a,LE=i,LE}var cN=H0e();/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wj{constructor(e,n,r,s,a){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const i=a||Math.random();this.random=cN.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,n,r=!1;for(;!r;){let s,a,i;do s=2*this.random()-1,a=2*this.random()-1,i=s*s+a*a;while(i>=1||i===0);const o=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*s*o,n=this.mean+this.stdDev*a*o,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class q0e{constructor(e,n,r,s){this.alpha=e,this.beta=1/n,this.dtype=r;const a=s||Math.random();this.randu=cN.alea(a.toString()),this.randn=new wj(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,s,a,i;for(;;){do s=this.randn.nextValue(),i=1+this.c*s;while(i<=0);if(i*=i*i,e=s*s,n=1-.331*e*e,r=.5*e+this.d*(1-i+Math.log(i)),a=this.randu(),a<n||Math.log(a)<r)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class K0e{constructor(e=0,n=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=cN.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X0e(t,e,n=1,r="float32",s){if(mo(t),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const a=new q0e(e,n,r,s),i=Wt(t,r);for(let o=0;o<i.values.length;o++)i.values[o]=a.nextValue();return i.toTensor()}const Y0e=le({randomGamma_:X0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q0e(t,e=0,n=1,r,s){if(mo(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const a=new wj(e,n,r,!1,s),i=Wt(t,r);for(let o=0;o<i.values.length;o++)i.values[o]=a.nextValue();return i.toTensor()}const Sj=le({randomNormal_:Q0e});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z0e(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return Sj(t,0,1,e,n)}const J0e=le({randomStandardNormal_:Z0e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ebe(t,e=0,n=1,r="float32",s){mo(t);const a=Wt(t,r),i=new K0e(e,n,null,s);for(let o=0;o<a.values.length;o++)a.values[o]=i.nextValue();return a.toTensor()}const Lh=le({randomUniform_:ebe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tbe(t,e,n,r){return Lh(t,e,n,"int32",r)}const nbe=le({randomUniformInt_:tbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Am(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const s={start:t,stop:e,step:n,dtype:r};return ue.runKernel(_k,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rbe(t){const n={input:J(t,"input","real")};return ue.runKernel(Dk,n)}const Db=le({real_:rbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sbe(t){const n={x:J(t,"x","reciprocal")};return ue.runKernel(qg,n)}const mQ=le({reciprocal_:sbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function abe(t){const n={x:J(t,"x","relu")};return ue.runKernel(Kg,n)}const Lu=le({relu_:abe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ibe(t){const n={x:J(t,"x","relu6")};return ue.runKernel(Xg,n)}const Cj=le({relu6_:ibe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function obe(t,e){const r={x:J(t,"x","reverse")},s={dims:e};return ue.runKernel(Rv,r,s)}const nl=le({reverse_:obe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lbe(t){const e=J(t,"x","reverse");return X(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),nl(e,0)}const ube=le({reverse1d_:lbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cbe(t,e){const n=J(t,"x","reverse");return X(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),nl(n,e)}const dbe=le({reverse2d_:cbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fbe(t,e){const n=J(t,"x","reverse");return X(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),nl(n,e)}const hbe=le({reverse3d_:fbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pbe(t,e){const n=J(t,"x","reverse");return X(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),nl(n,e)}const mbe=le({reverse4d_:pbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gbe(t){const n={x:J(t,"x","round")};return ue.runKernel(Yg,n)}const kj=le({round_:gbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ybe(t){const n={x:J(t,"x","rsqrt","float32")};return ue.runKernel(Qg,n)}const Nj=le({rsqrt_:ybe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bbe(t){const n={x:J(t,"x","selu")};return ue.runKernel(Zg,n)}const Tj=le({selu_:bbe});function xbe(t,e,n,r,s,a=[1,1],i="NHWC"){const o=J(t,"x","separableConv2d"),l=J(e,"depthwiseFilter","separableConv2d"),u=J(n,"pointwiseFilter","separableConv2d");let c=o,d=!1;if(o.rank===3&&(d=!0,c=ce(o,[1,o.shape[0],o.shape[1],o.shape[2]])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");X(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),X(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),X(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),X(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),X(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const h=l.shape[2],m=l.shape[3];X(u.shape[2]===h*m,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*m}, but got ${u.shape[2]}.`);const g=Vv(c,l,r,s,i,a),b=Od(g,u,1,"valid",i);return d?ce(b,[b.shape[1],b.shape[2],b.shape[3]]):b}const $j=le({separableConv2d_:xbe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function vbe(t,e){const n=J(t,"x","setdiff1d"),r=J(e,"y","setdiff1d");X(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),X(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),X(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const s=await n.data(),a=await r.data(),i=new Set(a);let o=0;for(let c=0;c<s.length;c++)i.has(s[c])||o++;const l=new Cs([o],n.dtype),u=new Cs([o],"int32");for(let c=0,d=0;c<s.length;c++)i.has(s[c])||(l.values[d]=s[c],u.values[d]=c,d++);return[l.toTensor(),u.toTensor()]}const wbe=vbe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sbe(t){const n={x:J(t,"x","sign")};return ue.runKernel(ty,n)}const gQ=le({sign_:Sbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cbe(t){const n={x:J(t,"x","sin","float32")};return ue.runKernel(Jg,n)}const Ij=le({sin_:Cbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kbe(t){const n={x:J(t,"x","sinh")};return ue.runKernel(ey,n)}const Ej=le({sinh_:kbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nbe(t,e,n){const r=J(t,"x","slice1d");return X(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),zt(r,[e],[n])}const dN=le({slice1d_:Nbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tbe(t,e,n){const r=J(t,"x","slice2d");return X(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),zt(r,e,n)}const Aj=le({slice2d_:Tbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $be(t,e,n){const r=J(t,"x","slice3d");return X(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),zt(r,e,n)}const fN=le({slice3d_:$be});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ibe(t,e,n){const r=J(t,"x","slice4d");return X(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),zt(r,e,n)}const Pb=le({slice4d_:Ibe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ebe(t,e=-1){const n=J(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},s={dim:e};return ue.runKernel(jv,r,s)}const hN=le({softmax_:Ebe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Abe(t){X(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ue.runKernel(xk,e)}const pN=le({fft_:Abe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rbe(t){X(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return ue.runKernel(Ck,e)}const Mb=le({ifft_:Rbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Obe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const s=ce(t,[n,e]);r=Mb(s)}else{const s=[n,2*(e-1)],a=ce(Db(t),[n,e]),i=ce(tN(t),[n,e]),o=nl(zt(a,[0,1],[n,e-2]),1),l=ie(nl(zt(i,[0,1],[n,e-2]),1),It(-1)),u=Rr([a,o],1),c=Rr([i,l],1),d=ce(Ed(u,c),[s[0],s[1]]);r=Mb(d)}if(r=Db(r),t.rank===3&&t.shape[0]!==0){const s=r,a=t.shape[0];r=ce(r,[a,r.shape[0]/a,r.shape[1]]),s.dispose()}return r}const Rj=le({irfft_:Obe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _be(t,e,n=0){const s={x:J(t,"x","split")},a={numOrSizeSplits:e,axis:n};return ue.runKernel(Mv,s,a)}const Ei=le({split_:_be});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dbe(t,e){X(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let s;if(e!=null&&e<n){const g=t.shape.map(b=>0),y=t.shape.map(b=>b);y[t.shape.length-1]=e,s=zt(t,g,y),n=e}else if(e!=null&&e>n){const g=t.shape.map(y=>y);g[t.shape.length-1]=e-n,s=Rr([t,es(g)],t.shape.length-1),n=e}else s=t;const a=vn(s),i=ce(Ed(s,a),[r,n]),o=pN(i),l=Math.floor(n/2)+1,u=Db(o),c=tN(o),d=Ei(u,[l,n-l],u.shape.length-1),h=Ei(c,[l,n-l],c.shape.length-1),m=s.shape.slice();return m[s.shape.length-1]=l,ce(Ed(d[0],h[0]),m)}const mN=le({rfft_:Dbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pbe(t,e){let n=J(t,"a","squaredDifference"),r=J(e,"b","squaredDifference");[n,r]=Br(n,r),_t(n.shape,r.shape);const s={a:n,b:r},a={};return ue.runKernel(ay,s,a)}const Oj=le({squaredDifference_:Pbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mbe(t,e){const n=J(t,"x","squeeze","string_or_numeric");return ce(n,Ud(n.shape,e).newShape)}const $n=le({squeeze_:Mbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jbe(t,e=0){const n=i2(t,"tensors","stack","string_or_numeric");X(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&X(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,s={axis:e};return ue.runKernel(kv,r,s)}const Ai=le({stack_:jbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lbe(t,e=0){const r={x:J(t,"x","step")},s={alpha:e};return ue.runKernel(cy,r,s)}const hy=le({step_:Lbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fbe(t,e,n,r,s=0,a=0,i=0,o=0,l=0){const c={x:J(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:s,endMask:a,ellipsisMask:i,newAxisMask:o,shrinkAxisMask:l};return ue.runKernel(Gk,c,d)}const yQ=le({stridedSlice_:Fbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zbe(t){const n={x:J(t,"x","tan","float32")};return ue.runKernel(oy,n)}const bQ=le({tan_:zbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fs(t,e){hg(t);const n=Wd(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Gd(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zo(t,e,n){if(hg(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Wd(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Gd(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xQ(t,e,n){if(hg(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=Wd(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Gd(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bbe(t,e,n){if(hg(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=Wd(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Gd(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ube(t,e,n){if(hg(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=Wd(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Gd(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vbe(t,e,n){if(hg(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=Wd(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Gd(t,e,r,n)}function vQ(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,a=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(a+` update.rank < ${s}. `);if(t.length<r+(n.rank-s))throw new Error(a+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+t.length-r)throw new Error(a+` update.rank != ${s+t.length-r}`);for(let i=0;i<s;++i)if(n.shape[i]!==e.shape[i])throw new Error(a+` updates.shape[${i}] (${n.shape[i]}) != indices.shape[${i}] (${e.shape[i]}).`);for(let i=0;i<n.rank-s;++i)if(n.shape[i+s]!==t[i+r])throw new Error(a+` updates.shape[${i+s}] (${n.shape[i+s]}) != shape[${i+s}] (${t[i+s]})`)}function _j(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}vQ(n,e,t)}function Fu(t,e,n){const r=e.shape.length,s=r>1?e.shape[r-1]:1,a=n.length;let i=1;for(let d=s;d<a;++d)i*=n[d];const o=s<1?1:s,l=ye(e.shape)/o,u=[...$t(n.slice(0,s)),1],c=ye(n);return{sliceRank:s,numUpdates:l,sliceSize:i,strides:u,outputSize:c}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wbe(t,e,n){const r=J(t,"tensor","tensorScatterupdate"),s=J(e,"indices","tensorScatterupdate","int32"),a=J(n,"updates","tensorScatterupdate");if(_j(a,s,r.shape),r.dtype!==a.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${a.dtype}.`);const i={tensor:r,indices:s,updates:a},o={};return ue.runKernel(Lk,i,o)}const Gbe=le({tensorScatterUpdate_:Wbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hbe(t,e=1,n=!0){const r=J(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const a={x:r},i={k:e,sorted:n},[o,l]=ue.runKernel(qk,a,i);return{values:o,indices:l}}const wQ=le({topk_:Hbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qbe(t,e=0,n=1,r,s){if(mo(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const a=new wj(e,n,r,!0,s),i=Wt(t,r);for(let o=0;o<i.values.length;o++)i.values[o]=a.nextValue();return i.toTensor()}const Dj=le({truncatedNormal_:qbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kbe(t,e=0){const n=J(t,"x","unique","string_or_numeric");X(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},s={axis:e},[a,i]=ue.runKernel(ej,r,s);return{values:a,indices:i}}const SQ=le({unique_:Kbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xbe(t,e,n){const r=J(t,"x","unsortedSegmentSum"),s=J(e,"segmentIds","unsortedSegmentSum","int32");X($m(n),()=>"numSegments must be of dtype int");const a={x:r,segmentIds:s},i={numSegments:n};return ue.runKernel(Fv,a,i)}const Pj=le({unsortedSegmentSum_:Xbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ybe(t,e=0){const n=J(t,"x","unstack","string_or_numeric");X(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},s={axis:e};return ue.runKernel(Lv,r,s)}const rl=le({unstack_:Ybe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qbe(t,e){return bj(t,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CQ(t,e=!0,n,r){return ue.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mj(t,e){const n=[];for(let a=0;a<e.length;a++)e[a]&&n.push(a);const r=Wt(t,"int32"),s=Wt([n.length,t.length],"int32");for(let a=0;a<n.length;a++){const i=r.indexToLoc(n[a]),o=a*t.length;s.values.set(i,o)}return s.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Zbe(t){const e=J(t,"condition","whereAsync","bool"),n=await e.data(),r=Mj(e.shape,n);return t!==e&&e.dispose(),r}const kQ=Zbe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Jbe(t,e,n){const r=J(t,"tensor","boolMask"),s=J(e,"mask","boolMask","bool"),a=n??0,i=s.rank,o=r.shape;X(i>0,()=>"mask cannot be scalar"),di(o.slice(a,a+i),s.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let y=a;y<a+i;y++)l*=o[y];const u=o.slice(0,a).concat([l],o.slice(a+i)),c=ce(r,u),d=ce(s,[-1]),h=await kQ(d),m=$n(h,[1]),g=qv(c,m,a);return t!==r&&r.dispose(),e!==s&&s.dispose(),m.dispose(),c.dispose(),d.dispose(),h.dispose(),g}const exe=Jbe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function txe(t,e,n){const r=J(t,"x","transpose");if(e==null&&(e=r.shape.map((i,o)=>o).reverse()),X(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(i=>{X(i>=0&&i<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const s={x:r},a={perm:e};return r.dtype==="complex64"?be(()=>{let i=Db(r),o=tN(r);return i=ue.runKernel(th,{x:i},a),o=ue.runKernel(th,{x:o},a),n&&(o=vr(o)),Ed(i,o)}):ue.runKernel(th,s,a)}const bn=le({transpose_:txe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nxe(t,e,n,r,s=!0){const a=J(t,"v","movingAverage"),i=J(e,"x","movingAverage"),o=J(n,"decay","movingAverage");Wpe(a,i),X(Xt(a.shape,i.shape),()=>"Shape mismatch in v and x");const l=It(1),u=ft(l,o);let c=ie(ft(i,a),u);if(s){X(r!=null,()=>"When using zeroDebias: true, step is required.");const d=J(r,"step","movingAverage");c=dt(c,ft(l,Ic(o,d)))}return je(a,c)}const rxe=le({movingAverage_:nxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sxe(t,e,n){mo(n);const r=J(t,"indices","scatterND","int32"),s=J(e,"updates","scatterND");_j(s,r,n);const a={indices:r,updates:s},i={shape:n};return ue.runKernel(jk,a,i)}const axe=le({scatterND_:sxe});function ixe(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const s=t.rank>0?t.shape[0]:1,a=t.rank>1?t.shape[1]:1;if(n.length!==a)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${a}.`);const i=e.size;if(!(e.rank===0||e.rank===1&&i===s))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${s}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oxe(t,e,n,r=0){mo(n);const s=J(t,"sparseIndices","sparseToDense","int32"),a=J(e,"sparseValues","sparseToDense","string_or_numeric"),i=J(r,"defaultValue","sparseToDense",a.dtype);ixe(s,a,n,i);const o={sparseIndices:s,sparseValues:a,defaultValue:i},l={outputShape:n};return ue.runKernel(Uk,o,l)}const lxe=le({sparseToDense_:oxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uxe(t,e){const n=J(e,"indices","gatherND","int32"),s={params:J(t,"x","gatherND","string_or_numeric"),indices:n};return ue.runKernel(Sk,s)}const cxe=le({gatherND_:uxe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dxe(t,e){if(e==null)return t.shape.slice();if(Xt(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fxe(t,e,n,r){const s=J(t,"x","dropout");if(X(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),X(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Pn?s.clone():s;const a=dxe(s,n),i=1-e,o=dt(Hv(je(Lh(a,0,1,"float32",r),i)),i);return ie(s,o)}const NQ=le({dropout_:fxe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TQ(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function jj(t,e,n){const r=1-t%2,s=new Float32Array(t);for(let a=0;a<t;++a){const i=2*Math.PI*a/(t+r-1);s[a]=e-n*Math.cos(i)}return fs(s,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function hxe(t,e,n=1){const r=J(t,"predictions","inTopK"),s=J(e,"targets","inTopK");X(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),X(r.rank-1===s.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${s.rank}`),di(r.shape.slice(0,r.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const a=r.shape[r.shape.length-1];X(n>0&&n<=a,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${a}), but got ${n}`);const i=await r.data(),o=await s.data(),[l,u]=[i.length/a,a],c=$s("bool",l);for(let d=0;d<l;d++){const h=d*u,m=i.subarray(h,h+u),g=[];for(let y=0;y<m.length;y++)g.push({value:m[y],index:y});g.sort((y,b)=>b.value-y.value),c[d]=0;for(let y=0;y<n;y++)if(g[y].index===o[d]){c[d]=1;break}}return t!==r&&r.dispose(),e!==s&&s.dispose(),Dl(c,s.shape,"bool")}const pxe=hxe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mxe(t,e,n,r,s,a="NHWC",i){let o=t;t.rank===3&&(o=ce(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=ce(e,[1,e.shape[0],e.shape[1],e.shape[2]])),X(o.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${o.shape}.`),X(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),X(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=a==="NHWC"?o.shape[3]:o.shape[1],c=a==="NHWC"?l.shape[3]:l.shape[1];X(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),X(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),za("conv2dDerFilter",s,i);const d={x:o,dy:l},h={strides:r,pad:s,dataFormat:a,dimRoundingMode:i,filterShape:n};return ue.runKernel(ok,d,h)}const Lj=le({conv2DBackpropFilter_:mxe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gN(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return ie(t,hy(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function yN(t,e){let n=e;const r=Is(t.shape,e.shape);return r.length>0&&(n=wt(n,r)),ce(n,t.shape)}function bN(t,e,n,r){if(e==="linear")return t;if(e==="relu")return Lu(t);if(e==="elu")return Wv(t);if(e==="relu6")return Cj(t);if(e==="prelu")return uN(t,n);if(e==="leakyrelu")return nN(t,r);if(e==="sigmoid")return io(t);throw new Error(`Unknown fused activation ${e}.`)}const xN=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gxe({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:a=[1,1],dimRoundingMode:i,bias:o,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",xN(ue.state.gradientDepth,l)===!1){X(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let I=Od(t,e,n,r,s,a,i);return o!=null&&(I=je(I,o)),bN(I,l,u,c)}const d=J(t,"x","conv2d","float32"),h=J(e,"filter","conv2d","float32");let m=d,g=!1;d.rank===3&&(g=!0,m=ce(d,[1,d.shape[0],d.shape[1],d.shape[2]])),X(m.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${m.rank}.`),X(h.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`),za("fused conv2d",r,i);const y=s==="NHWC"?m.shape[3]:m.shape[1];X(h.shape[2]===y,()=>`Error in conv2d: depth of input (${y}) must match input depth for filter ${h.shape[2]}.`),X(Es(n,a),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);const b=mr(m.shape,h.shape,n,a,r,i);let w;o!=null&&(w=J(o,"bias","fused conv2d"),[w]=Br(w,d),s==="NHWC"?_t(b.outShape,w.shape):(X(w.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${w.shape.length}.`),X(w.shape.length===0||w.shape[0]===b.outChannels||w.shape[0]===1,()=>`Error in fused conv2d: bias shape (${w.shape}) is not compatible with the number of output channels (${b.outChannels})`)));let C;if(u!=null){const I=u.shape;if(X(I.length<=1||I.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${I.length}.`),I.length===1)X(I[0]===1||I[0]===b.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${I}) is not compatible with the number of output channels (${b.outChannels}).`);else if(I.length===3)try{_t(I,b.outShape)}catch{const D=`Error in fused conv2d: PReLU activation weights (${I}) is not compatible with the output shape of the conv2d (${b.outShape}).`;throw Error(D)}C=J(u,"prelu weights","fused conv2d")}const k=(I,A)=>{X(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[D,P,R,O]=A,F=gN(I,R,l);X(Rd(a),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`);const z=uj(P.shape,F,D,n,r),V=Lj(P,F,D.shape,n,r),W=[z,V];if(O!=null){const j=yN(O,F);W.push(j)}return W},T={x:m,filter:h,bias:w,preluActivationWeights:C},N={strides:n,pad:r,dataFormat:s,dilations:a,dimRoundingMode:i,activation:l,leakyreluAlpha:c};return o==null?Ec((A,D,P)=>{let R=ue.runKernel($b,T,N);return P([D,A,R]),g&&(R=ce(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:k}})(m,h):Ec((A,D,P,R)=>{let O=ue.runKernel($b,T,N);return R([D,A,O,P]),g&&(O=ce(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:k}})(m,h,w)}const $Q=le({fusedConv2d_:gxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yxe(t,e,n,r,s,a=[1,1],i){let o=t;t.rank===3&&(o=ce(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=ce(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={x:o,dy:l},c={strides:r,pad:s,dimRoundingMode:i,dilations:a,filterShape:n};return ue.runKernel(pk,u,c)}const IQ=le({depthwiseConv2dNativeBackpropFilter_:yxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bxe(t,e,n,r,s,a=[1,1],i){let o=e,l=!1;e.rank===3&&(l=!0,o=ce(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={dy:o,filter:n},c={strides:r,pad:s,dimRoundingMode:i,dilations:a,inputShape:t},d=ue.runKernel(mk,u,c);return l?ce(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const EQ=le({depthwiseConv2dNativeBackpropInput_:bxe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xxe({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:a=[1,1],dimRoundingMode:i,bias:o,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(xN(ue.state.gradientDepth,l)===!1){let N=Vv(t,e,n,r,s,a,i);return o!=null&&(N=je(N,o)),bN(N,l,u,c)}const d=J(t,"x","depthwiseConv2d","float32"),h=J(e,"filter","depthwiseConv2d","float32");let m=d,g=!1;d.rank===3&&(g=!0,m=ce(d,[1,d.shape[0],d.shape[1],d.shape[2]])),X(m.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${m.rank}.`),X(h.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${h.rank}.`),X(m.shape[3]===h.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${m.shape[3]}) must match the inChannels dimension in filter ${h.shape[2]}.`),a==null&&(a=[1,1]),X(Es(n,a),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),za("fused depthwiseConv2d",r,i);const y=mr(m.shape,h.shape,n,a,r,i,!0);let b;o!=null&&(b=J(o,"bias","fused conv2d"),[b]=Br(b,d),_t(y.outShape,b.shape));let w;u!=null&&(w=J(u,"prelu weights","fused depthwiseConv2d"));const C=(N,I)=>{X(Rd(a),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[A,D,P,R]=I,O=gN(N,P,l),F=EQ(D.shape,O,A,n,r,a,i),z=IQ(D,O,A.shape,n,r,a,i);if(R!=null){const V=yN(b,O);return[F,z,V]}return[F,z]},k={x:m,filter:h,bias:b,preluActivationWeights:w},T={strides:n,pad:r,dataFormat:s,dilations:a,dimRoundingMode:i,activation:l,leakyreluAlpha:c};return o==null?Ec((I,A,D)=>{let P=ue.runKernel(Ib,k,T);return D([A,I,P]),g&&(P=ce(P,[P.shape[1],P.shape[2],P.shape[3]])),{value:P,gradFunc:C}})(m,h):Ec((I,A,D,P)=>{let R=ue.runKernel(Ib,k,T);return P([A,I,R,D]),g&&(R=ce(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:C}})(m,h,b)}const vxe=le({fusedDepthwiseConv2d_:xxe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wxe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:s,activation:a="linear",preluActivationWeights:i,leakyreluAlpha:o=.2}){if(xN(ue.state.gradientDepth,a)===!1){let O=ln(t,e,n,r);return s!=null&&(O=je(O,s)),bN(O,a,i,o)}let l=J(t,"a","fused matMul"),u=J(e,"b","fused matMul");[l,u]=Br(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?u.shape[u.rank-1]:u.shape[u.rank-2],h=n?l.shape[l.rank-1]:l.shape[l.rank-2],m=r?u.shape[u.rank-2]:u.shape[u.rank-1],g=l.shape.slice(0,-2),y=u.shape.slice(0,-2),b=ye(g),w=ye(y);X(c===d,()=>`Error in fused matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const k=_t(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([h,m]),T=n?ce(l,[b,c,h]):ce(l,[b,h,c]),N=r?ce(u,[w,m,d]):ce(u,[w,d,m]);let I;s!=null&&(I=J(s,"bias","fused matMul"),[I]=Br(I,l),_t(k,I.shape));let A;i!=null&&(A=J(i,"prelu weights","fused matMul"));const D=(O,F)=>{const[z,V,W,j]=F,q=gN(ce(O,W.shape),W,a);let Y,Q;if(!n&&!r?(Y=ln(q,V,!1,!0),Q=ln(z,q,!0,!1)):!n&&r?(Y=ln(q,V,!1,!1),Q=ln(q,z,!0,!1)):n&&!r?(Y=ln(V,q,!1,!0),Q=ln(z,q,!1,!1)):(Y=ln(V,q,!0,!0),Q=ln(q,z,!0,!0)),s!=null){const H=yN(j,q);return[Y,Q,H]}else return[Y,Q]},P={a:T,b:N,bias:I,preluActivationWeights:A},R={transposeA:n,transposeB:r,activation:a,leakyreluAlpha:o};return s==null?Ec((F,z,V)=>{const W=ue.runKernel(Tb,P,R);return V([F,z,W]),{value:ce(W,k),gradFunc:D}})(T,N):Ec((F,z,V,W)=>{const j=ue.runKernel(Tb,P,R);return W([F,z,j,V]),{value:ce(j,k),gradFunc:D}})(T,N,I)}const nD=le({fusedMatMul_:wxe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sxe=Object.freeze(Object.defineProperty({__proto__:null,conv2d:$Q,depthwiseConv2d:vxe,matMul:nD},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cxe(t){return jj(t,.54,.46)}const kxe=le({hammingWindow_:Cxe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nxe(t){return jj(t,.5,.5)}const AQ=le({hannWindow_:Nxe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Txe(t,e,n,r=!1,s=0){let a=0;const i=[];for(;a+e<=t.size;)i.push(zt(t,a,e)),a+=n;if(r)for(;a<t.size;){const o=a+e-t.size,l=Rr([zt(t,a,e-o),dy([o],s)]);i.push(l),a+=n}return i.length===0?Zo([],[0,e]):ce(Rr(i),[i.length,e])}const RQ=le({frame_:Txe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $xe(t,e,n,r,s=AQ){r==null&&(r=TQ(e));const a=RQ(t,e,n),i=ie(a,s(e));return mN(i,r)}const Ixe=le({stft_:$xe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Exe(t,e,n,r,s="bilinear",a=0){const i=J(t,"image","cropAndResize"),o=J(e,"boxes","cropAndResize","float32"),l=J(n,"boxInd","cropAndResize","int32"),u=o.shape[0];X(i.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),X(o.rank===2&&o.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${o.shape}.`),X(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${o.shape}.`),X(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),X(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),X(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const c={image:i,boxes:o,boxInd:l},d={method:s,extrapolationValue:a,cropSize:r};return ue.runKernel(dk,c,d)}const Axe=le({cropAndResize_:Exe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rxe(t){const e=J(t,"image","flipLeftRight","float32");X(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return ue.runKernel(wk,n,{})}const Oxe=le({flipLeftRight_:Rxe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _xe(t){const e=J(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];X(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),X(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(e.rank);return s.fill(1,0,n),s[n]=3,Go(e,s)}const Dxe=le({grayscaleToRGB_:_xe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pxe(t){const e=J(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];X(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),X(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const s=e.dtype,a=nt(e,"float32"),i=fs([.2989,.587,.114]);let o;switch(e.rank){case 2:o=rm("ij,j->i",a,i);break;case 3:o=rm("ijk,k->ij",a,i);break;case 4:o=rm("ijkl,l->ijk",a,i);break;case 5:o=rm("ijklm,m->ijkl",a,i);break;case 6:o=rm("ijklmn,n->ijklm",a,i);break;default:throw new Error("Not a valid tensor rank.")}return o=cs(o,-1),nt(o,s)}const Mxe=le({rgbToGrayscale_:Pxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jxe(t,e,n=0,r=.5){const s=J(t,"image","rotateWithOffset","float32");X(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const a={image:s},i={radians:e,fillValue:n,center:r};return ue.runKernel(Xk,a,i)}const Lxe=le({rotateWithOffset_:jxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function py(t,e,n,r,s,a){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),a==null&&(a=0);const i=t.shape[0];return n=Math.min(n,i),X(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),X(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),X(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),X(e.rank===1,()=>"scores must be a 1D tensor"),X(e.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${e.shape[0]}`),X(0<=a&&a<=1,()=>`softNmsSigma must be in [0, 1], but was '${a}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fxe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const a=J(t,"boxes","nonMaxSuppression","float32"),i=J(e,"scores","nonMaxSuppression","float32"),o=py(a,i,n,r,s);n=o.maxOutputSize,r=o.iouThreshold,s=o.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:s};return ue.runKernel(Rk,{boxes:a,scores:i},l)}const zxe=le({nonMaxSuppression_:Fxe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bxe(t,e,n){const r=Uxe(t,e,n),s=r<0?-(r+1):r;t.splice(s,0,e)}function Uxe(t,e,n){return Wxe(t,e,n||Vxe)}function Vxe(t,e){return t>e?1:t<e?-1:0}function Wxe(t,e,n){let r=0,s=t.length,a=0,i=!1;for(;r<s;){a=r+(s-r>>>1);const o=n(e,t[a]);o>0?r=a+1:(s=a,i=!o)}return i?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vN(t,e,n,r,s){return zj(t,e,n,r,s,0)}function Fj(t,e,n,r,s,a){return zj(t,e,n,r,s,0,!1,a,!0)}function wN(t,e,n,r,s,a){return zj(t,e,n,r,s,a,!0)}function zj(t,e,n,r,s,a,i=!1,o=!1,l=!1){const u=[];for(let b=0;b<e.length;b++)e[b]>s&&u.push({score:e[b],boxIndex:b,suppressBeginIndex:0});u.sort(OU);const c=a>0?-.5/a:0,d=[],h=[];for(;d.length<n&&u.length>0;){const b=u.pop(),{score:w,boxIndex:C,suppressBeginIndex:k}=b;if(w<s)break;let T=!1;for(let N=d.length-1;N>=k;--N){const I=Gxe(t,C,d[N]);if(I>=r){T=!0;break}if(b.score=b.score*Hxe(r,c,I),b.score<=s)break}b.suppressBeginIndex=d.length,T||(b.score===w?(d.push(C),h.push(b.score)):b.score>s&&Bxe(u,b,OU))}const m=d.length,g=n-m;o&&g>0&&(d.push(...new Array(g).fill(0)),h.push(...new Array(g).fill(0)));const y={selectedIndices:d};return i&&(y.selectedScores=h),l&&(y.validOutputs=m),y}function Gxe(t,e,n){const r=t.subarray(e*4,e*4+4),s=t.subarray(n*4,n*4+4),a=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(s[0],s[2]),c=Math.min(s[1],s[3]),d=Math.max(s[0],s[2]),h=Math.max(s[1],s[3]),m=(o-a)*(l-i),g=(d-u)*(h-c);if(m<=0||g<=0)return 0;const y=Math.max(a,u),b=Math.max(i,c),w=Math.min(o,d),C=Math.min(l,h),k=Math.max(w-y,0)*Math.max(C-b,0);return k/(m+g-k)}function Hxe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function OU(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function qxe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const a=J(t,"boxes","nonMaxSuppressionAsync"),i=J(e,"scores","nonMaxSuppressionAsync"),o=py(a,i,n,r,s);n=o.maxOutputSize,r=o.iouThreshold,s=o.scoreThreshold;const l=await Promise.all([a.data(),i.data()]),u=l[0],c=l[1],{selectedIndices:d}=vN(u,c,n,r,s);return a!==t&&a.dispose(),i!==e&&i.dispose(),fs(d,"int32")}const Kxe=qxe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xxe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,a=0){const i=J(t,"boxes","nonMaxSuppression"),o=J(e,"scores","nonMaxSuppression"),l=py(i,o,n,r,s,a);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,a=l.softNmsSigma;const u={boxes:i,scores:o},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:a},d=ue.runKernel(Ok,u,c);return{selectedIndices:d[0],selectedScores:d[1]}}const Yxe=le({nonMaxSuppressionWithScore_:Xxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Qxe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,a=0){const i=J(t,"boxes","nonMaxSuppressionAsync"),o=J(e,"scores","nonMaxSuppressionAsync"),l=py(i,o,n,r,s,a);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,a=l.softNmsSigma;const u=await Promise.all([i.data(),o.data()]),c=u[0],d=u[1],{selectedIndices:h,selectedScores:m}=wN(c,d,n,r,s,a);return i!==t&&i.dispose(),o!==e&&o.dispose(),{selectedIndices:fs(h,"int32"),selectedScores:fs(m)}}const Zxe=Qxe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jxe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,a=!1){const i=J(t,"boxes","nonMaxSuppression"),o=J(e,"scores","nonMaxSuppression"),l=py(i,o,n,r,s,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,h={boxes:i,scores:o},m={maxOutputSize:u,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:a},g=ue.runKernel(HM,h,m);return{selectedIndices:g[0],validOutputs:g[1]}}const eve=le({nonMaxSuppressionPadded_:Jxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function tve(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,a=!1){const i=J(t,"boxes","nonMaxSuppressionAsync"),o=J(e,"scores","nonMaxSuppressionAsync"),l=py(i,o,n,r,s,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,[h,m]=await Promise.all([i.data(),o.data()]),{selectedIndices:g,validOutputs:y}=Fj(h,m,u,c,d,a);return i!==t&&i.dispose(),o!==e&&o.dispose(),{selectedIndices:fs(g,"int32"),validOutputs:It(y,"int32")}}const nve=tve;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rve(t,e,n=!1,r=!1){const s=J(t,"images","resizeBilinear");X(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),X(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),X(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let a=s,i=!1;s.rank===3&&(i=!0,a=ce(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const o={images:a},l={alignCorners:n,halfPixelCenters:r,size:e},u=ue.runKernel(Av,o,l);return i?ce(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const OQ=le({resizeBilinear_:rve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sve(t,e,n=!1,r=!1){const s=J(t,"images","resizeNearestNeighbor");X(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),X(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),X(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),X(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let a=s,i=!1;s.rank===3&&(i=!0,a=ce(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const o={images:a},l={alignCorners:n,halfPixelCenters:r,size:e},u=ue.runKernel(Ev,o,l);return i?ce(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const _Q=le({resizeNearestNeighbor_:sve});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ave(t,e="binary",n=!1,r=.5){const s=J(t,"image","threshold"),a=.2989,i=.587,o=.114,l=s.shape[0]*s.shape[1];let u=ie(fs([r]),255),c,d,h,m;if(X(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),X(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),X(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),X(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),s.shape[2]===3){[c,d,h]=Ei(s,[1,1,1],-1);const b=ie(c,a),w=ie(d,i),C=ie(h,o);m=je(je(b,w),C)}else m=t;if(e==="otsu"){const b=UY(nt(kj(m),"int32"),Dl([]),256);u=ive(b,l)}const g=n?jh(m,u):Mi(m,u);return nt(ie(g,255),"int32")}function ive(t,e){let n=fs([-1]),r=fs([0]),s=fs([0]),a,i,o,l,u,c;for(let d=0;d<t.size-1;d++){a=zt(t,0,d+1),i=zt(t,d+1),u=dt(wt(a),e),c=dt(wt(i),e);const h=wt(ie(a,Am(0,a.size)));o=dt(h,wt(a));const m=dy(i.shape,a.size),g=je(Am(0,i.size),m),y=ie(i,g);l=dt(wt(y),wt(i));const b=ft(o,l),w=ft(o,l),C=ie(u,c);s=ie(ie(C,b),w);const k=Mi(s,r);r=ma(k,s,r),n=ma(k,fs([d]),n)}return n}const ove=le({threshold_:ave});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lve(t,e,n="nearest",r="constant",s=0,a){const i=J(t,"image","transform","float32"),o=J(e,"transforms","transform","float32");X(i.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),X(o.rank===2&&(o.shape[0]===i.shape[0]||o.shape[0]===1)&&o.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),X(a==null||a.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${a}.`);const l={image:i,transforms:o},u={interpolation:n,fillMode:r,fillValue:s,outputShape:a};return ue.runKernel(Kk,l,u)}const uve=le({transform_:lve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cve(t,e,n){const r=J(t,"a","bandPart");X(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[a,i]=r.shape.slice(-2);let o,l;typeof e=="number"?(X(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),X(e<=a,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${a}).`),o=J(e<0?a:e,"numLower","bandPart")):(X(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),o=ma(_b(e,0),a,Dd(e,a))),typeof n=="number"?(X(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),X(n<=i,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`),l=J(n<0?i:n,"numUpper","bandPart")):(X(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=ma(_b(n,0),i,Dd(n,i)));const u=ce(Am(0,a,1,"int32"),[-1,1]),c=Am(0,i,1,"int32"),d=ft(u,c),h=Tu(jh(d,o),qd(d,vr(l))),m=es([a,i],r.dtype);return ce(Ai(rl(ce(r,[-1,a,i])).map(g=>ma(h,g,m))),s)}const dve=le({bandPart_:cve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fve(t){let e;if(Array.isArray(t)){e=!1,X(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=t[0].shape[0];for(let a=1;a<t.length;++a)X(t[a].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[a].shape[0]} vs. ${s})`)}else e=!0,t=Ei(t,t.shape[0],0).map(s=>$n(s,[0]));X(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let s=0;s<t.length;++s)n.push(ue.tidy(()=>{let a=r[s];if(s>0)for(let i=0;i<s;++i){const o=ie(wt(ie(n[i],a)),n[i]);a=ft(a,o)}return dt(a,Gv(a,"euclidean"))}));return e?Ai(n,0):n}const hve=le({gramSchmidt_:fve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pve(t,e=!1){if(X(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return _U(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,u)=>l*u),r=rl(ce(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],a=[];r.forEach(l=>{const[u,c]=_U(l,e);s.push(u),a.push(c)});const i=ce(Ai(s,0),t.shape),o=ce(Ai(a,0),t.shape);return[i,o]}}function _U(t,e=!1){return ue.tidy(()=>{X(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let s=mj(n),a=bc(t);const i=Zo([[1]],[1,1]);let o=bc(i);const l=n>=r?r:n;for(let u=0;u<l;++u){const c=a,d=o,h=s;[o,a,s]=ue.tidy(()=>{const m=zt(a,[u,u],[n-u,1]),g=Gv(m),y=zt(a,[u,u],[1,1]),b=ma(Mi(y,0),Zo([[-1]]),Zo([[1]])),w=ft(y,ie(b,g)),C=dt(m,w);C.shape[0]===1?o=bc(i):o=Rr([i,zt(C,[1,0],[C.shape[0]-1,C.shape[1]])],0);const k=vr(dt(ln(b,w),g)),T=zt(a,[u,0],[n-u,r]),N=ie(k,o),I=bn(o);if(u===0)a=ft(T,ln(N,ln(I,T)));else{const P=ft(T,ln(N,ln(I,T)));a=Rr([zt(a,[0,0],[u,r]),P],0)}const A=bn(N),D=zt(s,[0,u],[n,s.shape[1]-u]);if(u===0)s=ft(D,ln(ln(D,o),A));else{const P=ft(D,ln(ln(D,o),A));s=Rr([zt(s,[0,0],[n,u]),P],1)}return[o,a,s]}),Rt([c,d,h])}return!e&&n>r&&(s=zt(s,[0,0],[n,r]),a=zt(a,[0,0],[r,r])),[s,a]})}const mve=le({qr_:pve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var si;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(si||(si={}));function gve(t,e,n=si.SUM_BY_NONZERO_WEIGHTS){const r=J(t,"losses","computeWeightedLoss");let s=null;e!=null&&(s=J(e,"weights","computeWeightedLoss"));const a=s==null?r:ie(r,s);if(n===si.NONE)return a;if(n===si.SUM)return wt(a);if(n===si.MEAN){if(s==null)return Lr(a);{const i=r.size/s.size,o=dt(wt(a),wt(s));return i>1?dt(o,It(i)):o}}if(n===si.SUM_BY_NONZERO_WEIGHTS){if(s==null)return dt(wt(a),It(r.size));{const i=ie(s,Ti(r.shape)),o=nt(wt(Em(i,It(0))),"float32");return dt(wt(a),o)}}throw Error(`Unknown reduction: ${n}`)}const Mc=le({computeWeightedLoss_:gve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yve(t,e,n,r=si.SUM_BY_NONZERO_WEIGHTS){const s=J(t,"labels","absoluteDifference"),a=J(e,"predictions","absoluteDifference");let i=null;n!=null&&(i=J(n,"weights","absoluteDifference")),di(s.shape,a.shape,"Error in absoluteDifference: ");const o=xs(ft(s,a));return Mc(o,i,r)}const bve=le({absoluteDifference_:yve});function xve(t,e,n,r,s=si.SUM_BY_NONZERO_WEIGHTS){const a=J(t,"labels","cosineDistance"),i=J(e,"predictions","cosineDistance");let o=null;r!=null&&(o=J(r,"weights","cosineDistance")),di(a.shape,i.shape,"Error in cosineDistance: ");const l=It(1),u=ft(l,wt(ie(a,i),n,!0));return Mc(u,o,s)}const vve=le({cosineDistance_:xve});function wve(t,e,n,r=si.SUM_BY_NONZERO_WEIGHTS){let s=J(t,"labels","hingeLoss");const a=J(e,"predictions","hingeLoss");let i=null;n!=null&&(i=J(n,"weights","hingeLoss")),di(s.shape,a.shape,"Error in hingeLoss: ");const o=It(1);s=ft(ie(It(2),s),o);const l=Lu(ft(o,ie(s,a)));return Mc(l,i,r)}const Sve=le({hingeLoss_:wve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cve(t,e,n,r=1,s=si.SUM_BY_NONZERO_WEIGHTS){const a=J(t,"labels","huberLoss"),i=J(e,"predictions","huberLoss");let o=null;n!=null&&(o=J(n,"weights","huberLoss")),di(a.shape,i.shape,"Error in huberLoss: ");const l=It(r),u=xs(ft(i,a)),c=Dd(u,l),d=ft(u,c),h=je(ie(It(.5),Kn(c)),ie(l,d));return Mc(h,o,s)}const kve=le({huberLoss_:Cve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nve(t,e,n,r=1e-7,s=si.SUM_BY_NONZERO_WEIGHTS){const a=J(t,"labels","logLoss"),i=J(e,"predictions","logLoss");let o=null;n!=null&&(o=J(n,"weights","logLoss")),di(a.shape,i.shape,"Error in logLoss: ");const l=It(1),u=It(r),c=vr(ie(a,fo(je(i,u)))),d=ie(ft(l,a),fo(je(ft(l,i),u))),h=ft(c,d);return Mc(h,o,s)}const Tve=le({logLoss_:Nve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ve(t,e,n,r=si.SUM_BY_NONZERO_WEIGHTS){const s=J(t,"labels","meanSquaredError"),a=J(e,"predictions","meanSquaredError");let i=null;n!=null&&(i=J(n,"weights","meanSquaredError")),di(s.shape,a.shape,"Error in meanSquaredError: ");const o=Oj(s,a);return Mc(o,i,r)}const Ive=le({meanSquaredError_:$ve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eve(t,e){const n=J(t,"labels","sigmoidCrossEntropyWithLogits"),r=J(e,"logits","sigmoidCrossEntropyWithLogits");di(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=Lu(r),a=ie(r,n),i=rN(La(vr(xs(r))));return je(ft(s,a),i)}function Ave(t,e,n,r=0,s=si.SUM_BY_NONZERO_WEIGHTS){let a=J(t,"multiClassLabels","sigmoidCrossEntropy");const i=J(e,"logits","sigmoidCrossEntropy");let o=null;if(n!=null&&(o=J(n,"weights","sigmoidCrossEntropy")),di(a.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){const u=It(r),c=It(1),d=It(.5);a=je(ie(a,ft(c,u)),ie(d,u))}const l=Eve(a,i);return Mc(l,o,s)}const Rve=le({sigmoidCrossEntropy_:Ave});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ove(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return Ec((s,a,i)=>{const l=sN(a,[n],!0),u=ft(nt(a,"float32"),l);i([s,u]);const c=vr(ie(u,s));return{value:wt(c,[n]),gradFunc:(m,g)=>{const[y,b]=g,w=Ur(m.shape,[n]);return[ie(ce(m,w),ft(nt(y,"float32"),La(b))),ie(ce(m,w),ft(La(b),nt(y,"float32")))]}}})(t,e)}function _ve(t,e,n,r=0,s=si.SUM_BY_NONZERO_WEIGHTS){let a=J(t,"onehotLabels","softmaxCrossEntropy");const i=J(e,"logits","softmaxCrossEntropy");let o=null;if(n!=null&&(o=J(n,"weights","softmaxCrossEntropy")),di(a.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){const u=It(r),c=It(1),d=It(a.shape[1]);a=je(ie(a,ft(c,u)),dt(u,d))}const l=Ove(a,i);return Mc(l,o,s)}const Dve=le({softmaxCrossEntropy_:_ve});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pve(t,e,n,r){const s=J(t,"indices","sparseFillEmptyRows","int32"),a=J(e,"values","sparseFillEmptyRows"),i=J(n,"denseShape","sparseFillEmptyRows","int32"),o=J(r,"defaultValue","sparseFillEmptyRows",a.dtype);if(s.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${s.shape}`);if(a.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${a.shape}`);if(i.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${i.shape}`);if(o.rank!==0)throw new Error(`Default value should be a scalar but received shape ${o.shape}`);const l={indices:s,values:a,denseShape:i,defaultValue:o},u=ue.runKernel(YM,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}const Mve=le({sparseFillEmptyRows_:Pve});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jve(t,e,n){const r=J(t,"inputIndices","sparseReshape","int32"),s=J(e,"inputShape","sparseReshape","int32"),a=J(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(s.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${s.shape}`);if(a.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${a.shape}`);const i={inputIndices:r,inputShape:s,newShape:a},o=ue.runKernel(QM,i);return{outputIndices:o[0],outputShape:o[1]}}const Lve=le({sparseReshape_:jve});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fve(t,e,n){const r=J(t,"data","sparseSegmentMean"),s=J(e,"indices","sparseSegmentMean","int32"),a=J(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${s.shape}`);if(a.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${a.shape}`);const i={data:r,indices:s,segmentIds:a};return ue.runKernel(zk,i)}const zve=le({sparseSegmentMean_:Fve});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bve(t,e,n){const r=J(t,"data","sparseSegmentSum"),s=J(e,"indices","sparseSegmentSum","int32"),a=J(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${s.shape}`);if(a.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${a.shape}`);const i={data:r,indices:s,segmentIds:a};return ue.runKernel(Bk,i)}const Uve=le({sparseSegmentSum_:Bve});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vve(t,e,n,r,s,a,i,o){const l=J(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=J(e,"dataSplits","stringNGrams");if(u.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:r,leftPad:s,rightPad:a,padWidth:i,preserveShortSequences:o},d={data:l,dataSplits:u},h=ue.runKernel(Hk,d,c);return{nGrams:h[0],nGramsSplits:h[1]}}const Wve=le({stringNGrams_:Vve});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gve(t,e,n=!0){const r=J(t,"input","stringSplit","string"),s=J(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(s.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${s.shape}`);const a={skipEmpty:n},i={input:r,delimiter:s},o=ue.runKernel(ZM,i,a);return{indices:o[0],values:o[1],shape:o[2]}}const Hve=le({stringSplit_:Gve});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qve(t,e){const n=J(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const s={input:n};return ue.runKernel(JM,s,r)}const Kve=le({stringToHashBucketFast_:qve});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xve(t,e,n,r=!0){const s=J(t,"input","staticRegexReplace","string"),a={pattern:e,rewrite:n,replaceGlobal:r};return ue.runKernel(Wk,{x:s},a)}const Yve=le({staticRegexReplace_:Xve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qve={fft:pN,ifft:Mb,rfft:mN,irfft:Rj},Zve={hammingWindow:kxe,hannWindow:AQ,frame:RQ,stft:Ixe},ja={flipLeftRight:Oxe,grayscaleToRGB:Dxe,resizeNearestNeighbor:_Q,resizeBilinear:OQ,rgbToGrayscale:Mxe,rotateWithOffset:Lxe,cropAndResize:Axe,nonMaxSuppression:zxe,nonMaxSuppressionAsync:Kxe,nonMaxSuppressionWithScore:Yxe,nonMaxSuppressionWithScoreAsync:Zxe,nonMaxSuppressionPadded:eve,nonMaxSuppressionPaddedAsync:nve,threshold:ove,transform:uve},DQ={bandPart:dve,gramSchmidt:hve,qr:mve},Jve={absoluteDifference:bve,computeWeightedLoss:Mc,cosineDistance:vve,hingeLoss:Sve,huberLoss:kve,logLoss:Tve,meanSquaredError:Ive,sigmoidCrossEntropy:Rve,softmaxCrossEntropy:Dve},e1e={sparseFillEmptyRows:Mve,sparseReshape:Lve,sparseSegmentMean:zve,sparseSegmentSum:Uve},t1e={stringNGrams:Wve,stringSplit:Hve,stringToHashBucketFast:Kve,staticRegexReplace:Yve};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n1e=new Map,r1e=new Map;class my{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Vo{constructor(){this.classNameMap={}}static getMap(){return Vo.instance==null&&(Vo.instance=new Vo),Vo.instance}static register(e){Vo.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Ge(t,e,n){X(t.className!=null,()=>"Class being registered does not have the static className property defined."),X(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),X(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,s=e+">"+r;return Vo.register(t),n1e.set(s,t),r1e.set(t,s),t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kd extends my{minimize(e,n=!1,r){const{value:s,grads:a}=this.computeGradients(e,r);if(r!=null){const i=r.map(o=>({name:o.name,tensor:a[o.name]}));this.applyGradients(i)}else this.applyGradients(a);return Rt(a),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return $ye(e,n)}dispose(){this.iterations_!=null&&Rt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:It(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(Kd,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PQ extends Kd{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=ue.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const a=ue.registeredVariables[r],i=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:be(()=>vn(a).variable(i))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:be(()=>vn(a).variable(i))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const l=this.accumulatedGrads[s].variable,u=this.accumulatedUpdates[s].variable;be(()=>{const c=je(ie(l,this.rho),ie(Kn(o),1-this.rho)),d=ie(dt(ea(je(u,this.epsilon)),ea(je(l,this.epsilon))),o),h=je(ie(u,this.rho),ie(Kn(d),1-this.rho));l.assign(c),u.assign(h);const m=je(ie(d,-this.learningRate),a);a.assign(m)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Rt(this.accumulatedGrads.map(e=>e.variable)),Rt(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MQ extends Kd{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const a=ue.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:be(()=>dy(a.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(e)?e[s].tensor:e[r];if(i==null)return;const o=this.accumulatedGrads[s].variable;be(()=>{const l=je(o,Kn(i));o.assign(l);const u=je(ie(dt(i,ea(je(l,ue.backend.epsilon()))),-this.learningRate),a);a.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Rt(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jQ extends Kd{static get className(){return"Adam"}constructor(e,n,r,s=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],be(()=>{this.accBeta1=It(n).variable(),this.accBeta2=It(r).variable()}),s==null&&(this.epsilon=ue.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);be(()=>{const r=ft(1,this.accBeta1),s=ft(1,this.accBeta2);n.forEach((a,i)=>{const o=ue.registeredVariables[a],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${a}/m`,variable:be(()=>vn(o).variable(l))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:`${a}/v`,variable:be(()=>vn(o).variable(l))});const u=Array.isArray(e)?e[i].tensor:e[a];if(u==null)return;const c=this.accumulatedFirstMoment[i].variable,d=this.accumulatedSecondMoment[i].variable,h=je(ie(c,this.beta1),ie(u,1-this.beta1)),m=je(ie(d,this.beta2),ie(Kn(u),1-this.beta2)),g=dt(h,r),y=dt(m,s);c.assign(h),d.assign(m);const b=je(ie(dt(g,je(ea(y),this.epsilon)),-this.learningRate),o);o.assign(b)}),this.accBeta1.assign(ie(this.accBeta1,this.beta1)),this.accBeta2.assign(ie(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Rt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&Rt(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),be(()=>{this.accBeta1.assign(Ic(this.beta1,this.iterations_+1)),this.accBeta2.assign(Ic(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LQ extends Kd{static get className(){return"Adamax"}constructor(e,n,r,s=null,a=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],be(()=>{this.iteration=It(0).variable(),this.accBeta1=It(n).variable()}),s==null&&(this.epsilon=ue.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);be(()=>{const r=ft(1,this.accBeta1),s=dt(-this.learningRate,je(ie(this.iteration,this.decay),1));n.forEach((a,i)=>{const o=ue.registeredVariables[a],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${a}/m`,variable:vn(o).variable(l)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:`${a}/v`,variable:vn(o).variable(l)});const u=Array.isArray(e)?e[i].tensor:e[a];if(u==null)return;const c=this.accumulatedFirstMoment[i].variable,d=this.accumulatedWeightedInfNorm[i].variable,h=je(ie(c,this.beta1),ie(u,1-this.beta1)),m=ie(d,this.beta2),g=xs(u),y=Pc(m,g);c.assign(h),d.assign(y);const b=je(ie(dt(s,r),dt(h,je(y,this.epsilon))),o);o.assign(b)}),this.iteration.assign(je(this.iteration,1)),this.accBeta1.assign(ie(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Rt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&Rt(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bj extends Kd{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const i=ue.registeredVariables[r];be(()=>{const o=je(ie(this.c,a),i);i.assign(o)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=js(It(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FQ extends Bj{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=It(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const a=ue.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:be(()=>vn(a).variable(!1))});const i=this.accumulations[s].variable,o=Array.isArray(e)?e[s].tensor:e[r];o!=null&&be(()=>{let l;const u=je(ie(this.m,i),o);this.useNesterov?l=je(ie(this.c,je(o,ie(u,this.m))),a):l=je(ie(this.c,u),a),i.assign(u),a.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Rt(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zQ extends Kd{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,s=null,a=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,s==null&&(this.epsilon=ue.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const a=ue.registeredVariables[r],i=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:be(()=>vn(a).variable(i))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:be(()=>vn(a).variable(i))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:be(()=>vn(a).variable(i))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const l=this.accumulatedMeanSquares[s].variable,u=this.accumulatedMoments[s].variable;be(()=>{const c=je(ie(l,this.decay),ie(Kn(o),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[s].variable,h=je(ie(d,this.decay),ie(o,1-this.decay)),m=dt(ie(o,this.learningRate),ea(ft(c,je(Kn(h),this.epsilon)))),g=je(ie(u,this.momentum),m);l.assign(c),d.assign(h),u.assign(g);const y=ft(a,g);a.assign(y)}else{const d=je(ie(l,this.decay),ie(Kn(o),1-this.decay)),h=je(ie(u,this.momentum),dt(ie(o,this.learningRate),ea(je(d,this.epsilon))));l.assign(d),u.assign(h);const m=ft(a,h);a.assign(m)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Rt(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Rt(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&Rt(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s1e=[PQ,MQ,jQ,LQ,FQ,zQ,Bj];function a1e(){for(const t of s1e)Ge(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i1e="model",o1e=".json",l1e=".weights.bin";function DU(t){return new Promise(e=>setTimeout(e)).then(t)}class wh{constructor(e){if(!ve().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(wh.URL_SCHEME)&&(e=e.slice(wh.URL_SCHEME.length)),(e==null||e.length===0)&&(e=i1e),this.modelJsonFileName=e+o1e,this.weightDataFileName=e+l1e}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=Hl.join(e.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a=xY(e,s),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),o=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(o.download=this.modelJsonFileName,o.href=i,await DU(()=>o.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=r,await DU(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Bv(e)}}}}wh.URL_SCHEME="downloads://";class u1e{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{const a=JSON.parse(s.target.result),i=a.modelTopology;if(i==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(a.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:i});return}const l=sj(a,u=>this.loadWeights(u));e(l)},r.onerror=s=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const i of e)n.push(...i.weights),r.push(...i.paths);const s=this.checkManifestAndWeightFiles(e),a=r.map(i=>this.loadWeightsFile(i,s[i]));return Promise.all(a).then(i=>[n,i])}loadWeightsFile(e,n){return new Promise((r,s)=>{const a=new FileReader;a.onload=i=>{const o=i.target.result;r(o)},a.onerror=i=>s(`Failed to weights data from file of path '${e}'.`),a.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(a=>CU(a.name)),s={};for(const a of e)a.paths.forEach(i=>{const o=CU(i);if(n.indexOf(o)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${o}'`);if(n.push(o),r.indexOf(o)===-1)throw new Error(`Weight file with basename '${o}' is not provided.`);s[i]=this.weightsFiles[r.indexOf(o)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return s}}const c1e=t=>ve().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(wh.URL_SCHEME)?d1e(t.slice(wh.URL_SCHEME.length)):null;Ir.registerSaveRouter(c1e);function d1e(t="model"){return new wh(t)}function f1e(t){return new u1e(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PU(t,e,n,r){i(t),n=n??0,r=r??1,o(n,r);let s=0;const a=l=>(l.then(u=>{const c=n+ ++s/t.length*(r-n);return e(c),u}),l);function i(l){X(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function o(l,u){X(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),X(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),X(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(t.map(a))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function BQ(t,e){e==null&&(e={});const n=e.fetchFunc==null?ve().platform.fetch:e.fetchFunc,r=t.map(d=>n(d,e.requestInit,{isBinary:!0})),o=(e.onProgress==null?await Promise.all(r):await PU(r,e.onProgress,0,.5)).map(d=>d.arrayBuffer());return e.onProgress==null?await Promise.all(o):await PU(o,e.onProgress,.5,1)}function h1e(t,e){var n;const r=e.fetchFunc==null?ve().platform.fetch:e.fetchFunc;let s=0,a;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async i=>{for(var o;s<t.length;){a||(a=(await r(t[s],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:u}=await a.read();if(l){s++,a=void 0,(o=e.onProgress)===null||o===void 0||o.call(e,s/t.length);continue}i.enqueue(u);return}i.close()}})}async function p1e(t,e="",n,r){return UQ(i=>BQ(i,{requestInit:r}))(t,e,n)}function UQ(t){return async(e,n="",r)=>{const s=e.map(()=>!1),a={},i=r!=null?r.map(()=>!1):[],o=[];if(e.forEach((m,g)=>{let y=0;m.weights.forEach(b=>{const w="quantization"in b?b.quantization.dtype:b.dtype,C=ph[w]*ye(b.shape),k=()=>{s[g]=!0,a[g]==null&&(a[g]=[]),a[g].push({manifestEntry:b,groupOffset:y,sizeBytes:C})};r!=null?r.forEach((T,N)=>{T===b.name&&(k(),i[N]=!0)}):k(),o.push(b.name),y+=C})}),!i.every(m=>m)){const m=r.filter((g,y)=>!i[y]);throw new Error(`Could not find weights in manifest with names: ${m.join(", ")}. 
Manifest JSON has weights with names: ${o.join(", ")}.`)}const l=s.reduce((m,g,y)=>(g&&m.push(y),m),[]),u=[];l.forEach(m=>{e[m].paths.forEach(g=>{const y=n+(n.endsWith("/")?"":"/")+g;u.push(y)})});const c=await t(u),d={};let h=0;return l.forEach(m=>{const g=e[m].paths.length,y=new Hl(c.slice(h,h+g));a[m].forEach(w=>{const C=y.slice(w.groupOffset,w.groupOffset+w.sizeBytes),k=mY(C,[w.manifestEntry]);for(const T in k)d[T]=k[T]}),h+=g}),d}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m1e="application/octet-stream",g1e="application/json";class Uj{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(X(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=ve().platform.fetch,X(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&X(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s=xY(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(s)],{type:g1e}),"model.json"),e.weightData!=null){const i=Hl.join(e.weightData);n.body.append("model.weights.bin",new Blob([i],{type:m1e}),"model.weights.bin")}const a=await this.fetch(this.path,n);if(a.ok)return{modelArtifactsInfo:Bv(e),responses:[a]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let i=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}const r=n.modelTopology,s=n.weightsManifest;if(r==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return sj(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),r=Y3(e.weightsManifest),s=()=>h1e(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:s})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,s]=y1e(n),a=this.weightPathPrefix||r,i=[],o=[];for(const l of e)for(const u of l.paths)this.weightUrlConverter!=null?o.push(this.weightUrlConverter(u)):i.push(a+u+s);return this.weightUrlConverter&&i.push(...await Promise.all(o)),i}async loadWeights(e){const n=await this.getWeightUrls(e),r=Y3(e),s=await BQ(n,this.loadOptions);return[r,s]}}Uj.URL_SCHEME_REGEX=/^https?:\/\//;function y1e(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),s=n>e?t.substring(n):"";return[r+"/",s]}function rD(t){return t.match(Uj.URL_SCHEME_REGEX)!=null}const VQ=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>rD(r)):n=rD(t),n)return Vj(t,e)}return null};Ir.registerSaveRouter(VQ);Ir.registerLoadRouter(VQ);function Vj(t,e){return new Uj(t,e)}function b1e(t,e){return Vj(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FE{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class WQ{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class x1e{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function v1e(t,e,n,r){const s=arguments;return new x1e(GQ(...s))}function GQ(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new FE(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new FE({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new FE({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function w1e(t){return new WQ(t)}function S1e(t){return new WQ(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HQ=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:Hl,browserFiles:f1e,browserHTTPRequest:b1e,concatenateArrayBuffers:bY,copyModel:Sme,decodeWeights:mY,decodeWeightsStream:yY,encodeWeights:X3,fromMemory:v1e,fromMemorySync:GQ,getLoadHandlers:lme,getModelArtifactsForJSON:sj,getModelArtifactsForJSONSync:vY,getModelArtifactsInfoForJSON:Bv,getSaveHandlers:wY,getWeightSpecs:Y3,http:Vj,isHTTPScheme:rD,listModels:vme,loadWeights:p1e,moveModel:Cme,registerLoadRouter:ome,registerSaveRouter:ime,removeModel:wme,weightsLoaderFactory:UQ,withSaveHandler:w1e,withSaveHandlerSync:S1e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let $f,MU=!1;function C1e(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,s=!1,a=!1,i=!1,o=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)a=!0;else if(t.getContext!=null)i=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)o=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(s2(n2,ue.backendName)!=null){const g={pixels:t},y={numChannels:e};return ue.runKernel(n2,g,y)}const[u,c]=s?[t.videoWidth,t.videoHeight]:[t.width,t.height];let d;if(i)d=t.getContext("2d").getImageData(0,0,u,c).data;else if(r||n)d=t.data;else if(a||s||o){if($f==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")$f=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else $f=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});$f.canvas.width=u,$f.canvas.height=c,$f.drawImage(t,0,0,u,c),d=$f.getImageData(0,0,u,c).data}let h;if(e===4)h=new Int32Array(d);else{const g=u*c;h=new Int32Array(g*e);for(let y=0;y<g;y++)for(let b=0;b<e;++b)h[y*e+b]=d[y*4+b]}return xQ(h,[c,u,e],"int32")}function k1e(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);const e=t.rank===2?1:t.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}async function Wj(t,e){let n=J(t,"img","toPixels");if(!(t instanceof Pn)){const u=n;n=nt(u,"int32"),u.dispose()}k1e(n);const[r,s]=n.shape.slice(0,2),a=n.rank===2?1:n.shape[2],i=await n.data(),o=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(s*r*4);for(let u=0;u<r*s;++u){const c=[0,0,0,255];for(let h=0;h<a;h++){const m=i[u*a+h];if(n.dtype==="float32"){if(m<0||m>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${m}.`)}else if(n.dtype==="int32"&&(m<0||m>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${m}.`);a===1?(c[0]=m*o,c[1]=m*o,c[2]=m*o):c[h]=m*o}const d=u*4;l[d+0]=Math.round(c[0]),l[d+1]=Math.round(c[1]),l[d+2]=Math.round(c[2]),l[d+3]=Math.round(c[3])}if(e!=null){MU||s2(GM,ue.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),MU=!0),e.width=s,e.height=r;const u=e.getContext("2d"),c=new ImageData(l,s,r);u.putImageData(c,0,0)}return n!==t&&n.dispose(),l}const qQ=le({fromPixels_:C1e});function SN(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(ye(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=e.shape,a=s[s.length-1];let i=1;for(let d=0;d<s.length-1;++d)i*=s[d];const o=t.shape,l=s.slice();l.pop();let u=1;for(let d=a;d<n;++d)u*=o[d],l.push(o[d]);const c=[...$t(t.shape).map(d=>d/u),1].slice(0,a);return[l,i,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sD=-2,N1e=-1;function CN(t,e,n){const r=t.shape.length;X(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),X(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)X(e[s]+n[s]<=t.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function T1e(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function kN(t,e,n){const r=[];for(let s=0;s<t.length;s++)r[s]=Math.ceil((e[s]-t[s])/n[s]);return r}function KQ(t,e,n,r){const s=[...t];for(let a=s.length;a<r.length;a++)s.push(1);for(let a=0;a<n;a++)a===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function XQ(t,e,n){return n<=t?n:n-(e-1)}function YQ(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function $1e(t,e,n,r,s,a,i,o,l){const u=t.length;let c=new Array(u),d=new Array(u),h=new Array(u);if(e.length&&n>0){const m=e[0],g=n+1;c=QQ(i,m,g,r,t),d=ZQ(o,m,g,s,t),h=KQ(a,m,g,t)}else for(let m=0;m<u;m++)c[m]=eZ(i,r,a,t,m,l),d[m]=tZ(o,s,a,t,m,l),h[m]=JQ(a,m,l);return{begin:c,end:d,strides:h}}function QQ(t,e,n,r,s){const a=[...s],i=YQ(n,e);for(let o=0;o<a.length;o++)if(i.indexOf(o)>-1)a[o]=0;else{const l=XQ(e,n,o);let u=r[l];t&1<<l&&(u=0),a[o]=u}return a}function ZQ(t,e,n,r,s){const a=[...s],i=YQ(n,e);for(let o=0;o<a.length;o++)if(i.indexOf(o)>-1)a[o]=Number.MAX_SAFE_INTEGER;else{const l=XQ(e,n,o);let u=r[l];t&1<<l&&(u=Number.MAX_SAFE_INTEGER),a[o]=u}for(let o=0;o<a.length;o++){const l=s[o];a[o]<0&&(a[o]+=l),a[o]=fh(0,a[o],s[o])}return a}function JQ(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function eZ(t,e,n,r,s,a){let i=e[s];const o=n[s]||1;(t&1<<s||a&1<<s||i==null)&&(o>0?i=Number.MIN_SAFE_INTEGER:i=Number.MAX_SAFE_INTEGER);const l=r[s];return i<0&&(i+=l),i=fh(0,i,l-1),i}function tZ(t,e,n,r,s,a){let i=e[s];const o=n[s]||1;(t&1<<s||a&1<<s||i==null)&&(o>0?i=Number.MAX_SAFE_INTEGER:i=Number.MIN_SAFE_INTEGER);const l=r[s];return i<0&&(i+=l),o>0?i=fh(0,i,l):i=fh(-1,i,l-1),i}function Gj(t,e,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(e[s]>0||n[s]!==t[s])return!1;return!0}function Hj(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function Kv(t,e,n){let r;const s=t.shape.length;typeof e=="number"?r=[e,...new Array(s-1).fill(0)]:e.length<s?r=e.concat(new Array(s-e.length).fill(0)):r=e.slice(),r.forEach(i=>{X(i!==-1,()=>"slice() does not support negative begin indexing.")});let a;return n==null?a=new Array(s).fill(-1):typeof n=="number"?a=[n,...new Array(s-1).fill(-1)]:n.length<s?a=n.concat(new Array(s-n.length).fill(-1)):a=n,a=a.map((i,o)=>i>=0?i:(X(i===-1,()=>`Negative size values should be exactly -1 but got ${i} for the slice() size at index ${o}.`),t.shape[o]-r[o])),[r,a]}function NN(t,e,n,r,s,a,i,o,l){let u;if(r==null?(u=new Array(e.length),u.fill(1)):u=r,i!=null&&(i&i-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const d={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:u.slice(),beginMask:s,endMask:a,ellipsisMask:i,newAxisMask:o,shrinkAxisMask:l};for(let k=0;k<d.dims;k++)c&&(1<<k&o)!==0&&d.numAddAxisAfterEllipsis++,1<<k&i&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);const h={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};I1e(d,h);let m=!0,g=!0,y=!0;const b=[],w=[];for(let k=0;k<t.length;++k){if(h.strides[k]===0)throw Error(`strides[${k}] must be non-zero`);const T=!!(h.shrinkAxisMask&1<<k),N=t[k];if(N===-1){b.push(T?1:-1);continue}const I=[h.beginMask&1<<k,h.endMask&1<<k],A=[h.strides[k]>0?0:-1,h.strides[k]>0?N:N-1];if(T&&h.strides[k]<=0)throw Error("only stride 1 allowed on non-range indexing.");y=y&&h.strides[k]===1;const D=!!(h.beginMask&1<<k&&h.endMask&1<<k);if(h.beginValid&&h.endValid){if(T){const F=h.begin[k]<0?N+h.begin[k]:h.begin[k];if(h.begin[k]=F,h.end[k]=h.begin[k]+1,F<0||F>=N)throw Error(`slice index ${h.begin[k]} of dimension ${k} out of bounds.`)}else h.begin[k]=jU(h.begin[k],0,h.strides[k],N,I,A),h.end[k]=jU(h.end[k],1,h.strides[k],N,I,A);const O=h.strides[k]===1&&h.begin[k]===0&&h.end[k]===N;m=m&&O,g=g&&(k===0&&h.strides[k]===1||O)}else m=m&&h.strides[k]===1&&D,g=g&&(k===0&&h.strides[k]===1||D);let P,R=!1;if(h.beginValid&&h.endValid?(P=h.end[k]-h.begin[k],R=!0):T?(P=1,R=!0):D&&N>=0&&(h.strides[k]<0?P=-N:P=N,R=!0),R){let O;P===0||P<0!=h.strides[k]<0?O=0:O=Math.trunc(P/h.strides[k])+(P%h.strides[k]!==0?1:0),b.push(O)}else b.push(-1)}for(let k=0;k<h.finalShapeGatherIndices.length;++k){const T=h.finalShapeGatherIndices[k];T>=0?w.push(b[T]):T===sD&&w.push(1)}return{finalShapeSparse:w.filter((k,T)=>h.finalShapeGatherIndices[T]!==sD),finalShape:w,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:h.begin,end:h.end,strides:h.strides}}function I1e(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const s=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<s;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(sD),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(N1e),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function jU(t,e,n,r,s,a){if(s[e])return n>0?a[e]:a[e+1&1];{const i=t<0?r+t:t;return i<a[0]?a[0]:i>a[1]?a[1]:i}}const E1e=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:CN,computeFlatOffset:Hj,computeOutShape:kN,getNormalizedAxes:$1e,isSliceContinous:Gj,maskToAxes:T1e,parseSliceParams:Kv,sliceInfo:NN,startForAxis:eZ,startIndicesWithElidedDims:QQ,stopForAxis:tZ,stopIndicesWithElidedDims:ZQ,stridesForAxis:JQ,stridesWithElidedDims:KQ},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class A1e{static sgd(e){return new Bj(e)}static momentum(e,n,r=!1){return new FQ(e,n,r)}static rmsprop(e,n=.9,r=0,s=null,a=!1){return new zQ(e,n,r,s,a)}static adam(e=.001,n=.9,r=.999,s=null){return new jQ(e,n,r,s)}static adadelta(e=.001,n=.95,r=null){return new PQ(e,n,r)}static adamax(e=.002,n=.9,r=.999,s=null,a=0){return new LQ(e,n,r,s,a)}static adagrad(e,n=.1){return new MQ(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jp=A1e;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R1e=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function nZ(){return new Promise(t=>R1e(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TN(t,e){const n=t[0].length;t.forEach((s,a)=>{X(s.length===n,()=>`Error in concat${n}D: rank of tensors[${a}] must be the same as the rank of the rest (${n})`)}),X(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((s,a)=>{for(let i=0;i<n;i++)X(i===e||s[i]===r[i],()=>`Error in concat${n}D: Shape of tensors[${a}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${a}.`)})}function ii(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var El;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(El||(El={}));function rZ(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let s=1;s<n.length;++s){const a=n[s],i=r[r.length-n.length+s],o=r[i];if(a>=0)if(o>=0){if(o!==a)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${s+t}] = ${a} but shape[${s+t}] = ${o}`)}else r[i]=a}return r}function sZ(t){const e={FIRST_DIM_SIZE:El.FIRST_DIM_SIZE,VALUE_ROWIDS:El.VALUE_ROWIDS,ROW_LENGTHS:El.ROW_LENGTHS,ROW_SPLITS:El.ROW_SPLITS,ROW_LIMITS:El.ROW_LIMITS,ROW_STARTS:El.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function aZ(t){return t.length===0?0:t[0]===El.FIRST_DIM_SIZE?t.length-1:t.length}function iZ(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(n,r-1);++s){const a=t[s],i=e[s+1];if(a>=0&&i>=0&&a!==1&&a!==i)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${s-t.length}] = ${a} but ragged tensor input.flatValues.shape[${s-t.length}] = ${i}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qj=30;function $N(t){return t<=qj?t:U3(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IN(t,e,n){const r=n*(typeof t=="number"?t:t[0]),s=e*(typeof t=="number"?t:t[1]);return[r,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fh(t,e,n,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(t[0]/n),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const a=e.length;for(let i=0;i<a;++i)s=s.concat([t[i+1]/e[i],e[i]]);s=s.concat(t.slice(a+1))}return s}function zh(t,e,n=!0){const r=[];if(n){r.push(e);for(let s=e+1;s<t;++s)s<=2*e?(r.push(s),r.push(s-(e+1))):r.push(s)}else{const s=[],a=[];for(let i=1;i<t;++i)i>=e*2+1||i%2===1?a.push(i):s.push(i);r.push(...s),r.push(0),r.push(...a)}return r}function Bh(t,e,n,r=!0){const s=[];r?s.push(t[0]/n):s.push(t[0]*n);for(let a=1;a<t.length;++a)a<=e.length?r?s.push(e[a-1]*t[a]):s.push(t[a]/e[a-1]):s.push(t[a]);return s}function EN(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function AN(t,e,n){const r=t.slice(0,1);for(let s=0;s<n;++s)r.push(t[s+1]-e[s][0]-e[s][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xv=1.7580993408473768,Yv=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RN=.3275911,ON=.254829592,_N=-.284496736,DN=1.421413741,PN=-1.453152027,MN=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fl(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function oZ(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function lZ(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function uZ(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function Kj(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function cZ(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function dZ(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const a=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(a),r[s]=Math.sin(a)}return{real:n,imag:r}}function fZ(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),s=Math.cos(r),a=Math.sin(r);return{real:s,imag:a}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zE="->",O1e=/->/g,LU=",",FU="...";function jN(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(O1e,"").length)/zE.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${zE}").`);const[r,s]=t.split(zE);X(r.indexOf(FU)===-1,()=>`The ellipsis notation ("${FU}") is not supported yet.`);const a=r.split(LU),i=a.length;if(e!==i)throw new Error(`Expected ${i} input tensors, received ${e}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const o=[];for(let h=0;h<s.length;++h){const m=s[h];if(!a.some(g=>g.indexOf(m)!==-1))throw new Error(`Output subscripts contain the label ${m} not present in the input subscripts.`);o.indexOf(m)===-1&&o.push(m)}for(let h=0;h<r.length;++h){const m=r[h];o.indexOf(m)===-1&&m!==LU&&o.push(m)}const l=new Array(a.length);for(let h=0;h<i;++h){if(new Set(a[h].split("")).size!==a[h].length)throw new Error(`Found duplicate axes in input component ${a[h]}. Support for duplicate axes in input is not implemented yet.`);l[h]=[];for(let m=0;m<a[h].length;++m)l[h].push(o.indexOf(a[h][m]))}const u=o.length,c=s.length,d=[];for(let h=c;h<u;++h)d.push(h);return{allDims:o,summedDims:d,idDims:l}}function LN(t,e){let n=new Array(t);n.fill(-1);for(let s=0;s<e.length;++s)n[e[s]]=s;const r=[];for(let s=0;s<t;++s)n[s]===-1&&r.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:r}}function FN(t,e,n){const r=new Array(t);for(let s=0;s<n.length;++s){const a=n[s].shape;for(let i=0;i<e[s].length;++i)r[e[s][i]]===void 0?r[e[s][i]]=a[i]:X(r[e[s][i]]===a[i],()=>`Expected dimension ${r[e[s][i]]} at axis ${i} of input shaped ${JSON.stringify(a)}, but got dimension ${a[i]}`)}}function zN(t,e){const n=t,r=[];let s=0;t.length===0&&n.push(-1),s=t.length+1;for(let i=0;i<s;++i)r.push([]);const a=[];for(let i=0;i<n.length;++i){const o=n[i],l=_1e(e,o);for(const u of l)a.indexOf(u)===-1&&(r[i].push(u),a.push(u))}return{path:n,steps:r}}function BN(t){return t.every((e,n)=>e===n)}function _1e(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function UN(t,e,n=0){let r=[];if(typeof e=="number")X(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const s=e.reduce((i,o)=>(o===-1&&(i+=1),i),0);X(s<=1,()=>"There should be only one negative value in split array.");const a=e.indexOf(-1);if(a!==-1){const i=e.reduce((o,l)=>l>0?o+l:o);e[a]=t.shape[n]-i}X(t.shape[n]===e.reduce((i,o)=>i+o),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hZ(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function pZ(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function mZ(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gZ(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function yZ(t,e){return`size ${t} must be non-negative, not ${e}`}function bZ(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function xZ(t,e){const n=ye(t),r=ye(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function vZ(t,e){const n=ye(t),r=ye(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aD(){return"segment ids must be >= 0"}function wZ(){return"segment ids are not increasing"}function SZ(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function CZ(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kZ(t,e){let n=!1,r;for(t<=qj?(r=t,n=!0):r=U3(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=U3(t,r+1);return r}function Xj(t,e,n){const r=[],s=t.length;for(let a=0;a<s;a++)a!==e?r.push(t[a]):r.push(n);return r}function VN(t,e,n,r){const s=e.shape.length,a=t.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>a)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${a}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const i=t.shape[n],o=[];let l=1,u=1,c=1;for(let d=0;d<r;++d)o.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)o.push(t.shape[d]),u*=t.shape[d];for(let d=r;d<s;d++)o.push(e.shape[d]);for(let d=n+1;d<a;d++)o.push(t.shape[d]),c*=t.shape[d];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:i,outputShape:o}}const D1e=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:VN,computeOutShape:Xj,segOpComputeOptimalWindowSize:kZ},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zl(t){try{return t.map(e=>Ml(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function NZ(t){return t.map(e=>yc(e))}const P1e=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:ON,ERF_A2:_N,ERF_A3:DN,ERF_A4:PN,ERF_A5:MN,ERF_P:RN,PARALLELIZE_THRESHOLD:qj,get RowPartitionType(){return El},SELU_SCALE:Yv,SELU_SCALEALPHA:Xv,applyActivation:bN,assertAndGetBroadcastShape:_t,assertAxesAreInnerMostDims:hs,assertParamsConsistent:TN,assignToTypedArray:cZ,axesAreInnerMostDims:pj,calculateShapes:Fu,checkEinsumDimSizes:FN,checkPadOnDimRoundingMode:za,combineLocations:tQ,combineRaggedTensorToTensorShapes:rZ,complexWithEvenIndex:lZ,complexWithOddIndex:uZ,computeConv2DInfo:mr,computeConv3DInfo:ql,computeDefaultPad:oj,computeDilation2DInfo:Hd,computeOptimalWindowSize:$N,computeOutAndReduceShapes:ns,computeOutShape:ii,computePool2DInfo:ga,computePool3DInfo:go,convertConv2DDataFormat:Pi,decodeEinsumEquation:jN,eitherStridesOrDilationsAreOne:Es,expandShapeToKeepDim:Ur,exponent:fZ,exponents:dZ,fromStringArrayToUint8:NZ,fromUint8ToStringArray:zl,getAxesPermutation:Yn,getBroadcastDims:_d,getComplexWithIndex:Kj,getEinsumComputePath:zN,getEinsumPermutation:LN,getFusedBiasGradient:yN,getFusedDyActivation:gN,getImageCenter:IN,getInnerMostAxes:gr,getPermuted:zh,getRaggedRank:aZ,getReductionAxes:Is,getReshaped:Fh,getReshapedPermuted:Bh,getRowPartitionTypesHelper:sZ,getSliceBeginCoords:EN,getSliceSize:AN,getSparseFillEmptyRowsIndicesDenseShapeMismatch:hZ,getSparseFillEmptyRowsNegativeIndexErrorMessage:pZ,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:mZ,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:bZ,getSparseReshapeInputOutputMismatchErrorMessage:vZ,getSparseReshapeInputOutputMultipleErrorMessage:xZ,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:gZ,getSparseReshapeNegativeOutputDimErrorMessage:yZ,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:CZ,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:aD,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:wZ,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:SZ,getUndoAxesPermutation:ju,isIdentityPermutation:BN,log:kpe,mergeRealAndImagArrays:Fl,prepareAndValidate:SN,prepareSplitSize:UN,segment_util:D1e,shouldFuse:xN,slice_util:E1e,splitRealAndImagArrays:oZ,stridesOrDilationsArePositive:xh,tupleValuesAreOne:Rd,upcastType:zs,validateDefaultValueShape:iZ,validateInput:_j,validateUpdateShape:vQ,warn:to},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */a1e();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TZ={kernelName:zx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(t,hy(nt(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M1e={kernelName:gg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Kn(nt(n,"float32")),s=ea(ft(It(1),r));return vr(dt(t,s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j1e={kernelName:yg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=ea(ft(Kn(nt(n,"float32")),1));return dt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L1e={kernelName:Ph,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=_t(n.shape,r.shape);return{a:()=>{let o=t;const l=Is(n.shape,s);return l.length>0&&(o=wt(o,l)),ce(o,n.shape)},b:()=>{let o=t;const l=Is(r.shape,s);return l.length>0&&(o=wt(o,l)),ce(o,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F1e={kernelName:Bx,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,s)=>{n[s]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z1e={kernelName:Ux,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>vn(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B1e={kernelName:Vx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>vn(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U1e={kernelName:bg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>dt(t,ea(ft(It(1),Kn(nt(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V1e={kernelName:xg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=ea(je(It(1),Kn(nt(n,"float32"))));return dt(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W1e={kernelName:Sg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=_t(n.shape,r.shape);return{a:()=>{const o=je(Kn(n),Kn(r));let l=ie(t,dt(r,o));const u=Is(n.shape,s);return u.length>0&&(l=wt(l,u)),ce(l,n.shape)},b:()=>{const o=je(Kn(n),Kn(r));let l=vr(ie(t,dt(n,o)));const u=Is(r.shape,s);return u.length>0&&(l=wt(l,u)),ce(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G1e={kernelName:vg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>dt(t,je(Kn(nt(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H1e={kernelName:wg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>dt(t,ft(It(1),Kn(nt(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q1e(t,e,n,r,s,a){const i=J(t,"dy","avgPool3dGrad"),o=J(e,"input","avgPool3dGrad");let l=i,u=o,c=!1;o.rank===4&&(c=!0,l=ce(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),u=ce(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),X(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),X(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),za("avgPool3dGrad",s,a);const d={dy:l,input:u},h={filterSize:n,strides:r,pad:s,dimRoundingMode:a},m=ue.runKernel(nk,d,h);return c?ce(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}const K1e=le({avgPool3dGrad_:q1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X1e={kernelName:Gx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:a,pad:i,dimRoundingMode:o}=n;return{x:()=>K1e(t,r,s,a,i,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y1e(t,e,n,r,s){const a=J(t,"dy","avgPoolGrad"),i=J(e,"input","avgPoolGrad");X(i.rank===a.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${a.rank})`);let o=i,l=a,u=!1;i.rank===3&&(u=!0,o=ce(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=ce(a,[1,a.shape[0],a.shape[1],a.shape[2]])),X(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),X(o.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${o.rank}.`);const c={dy:l,input:o},d={filterSize:n,strides:r,pad:s},h=ue.runKernel(tk,c,d);return u?ce(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const Q1e=le({avgPoolGrad_:Y1e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z1e={kernelName:Wx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:a,pad:i}=n;return{x:()=>Q1e(t,r,s,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J1e={kernelName:Hx,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,s]=e,{transposeA:a,transposeB:i}=n;return!a&&!i?{a:()=>ln(t,s,!1,!0),b:()=>ln(r,t,!0,!1)}:!a&&i?{a:()=>ln(t,s,!1,!1),b:()=>ln(t,r,!0,!1)}:a&&!i?{a:()=>ln(s,t,!1,!0),b:()=>ln(r,t,!1,!1)}:{a:()=>ln(s,t,!0,!0),b:()=>ln(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ewe={kernelName:qx,gradFunc:(t,e,n)=>{const{blockShape:r,crops:s}=n;return{x:()=>lN(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const twe={kernelName:Spe,gradFunc:(t,e,n)=>{const r=n,s=r.inputShape,a=r.shape,i=Array.from(a);for(let l=s.length-1;l>=0;l--)if(s[l]===a[l])i[l]=1;else if(s[l]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${a}].`);const o=[];for(let l=0;l<i.length;l++)i[l]>1&&o.push(l);return{x:()=>wt(t,o,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nwe={kernelName:Cg,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rwe={kernelName:kg,gradFunc:t=>({x:()=>vn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const swe={kernelName:Ng,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:s,clipValueMax:a}=n;return{x:()=>ma(Tu(qd(r,s),jh(r,a)),t,vn(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const awe={kernelName:Kx,inputsToSave:["x"],gradFunc:TZ.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iwe={kernelName:Xx,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:s}=n,a=Gt(s,e[0].shape)[0],i=r.map(l=>l[a]);return Ei(t,i,a).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const owe={kernelName:Yx,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{dilations:a,strides:i,pad:o,dataFormat:l}=n;return X(Rd(a),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`),{x:()=>uj(r.shape,t,s,i,o,l),filter:()=>Lj(r,t,s.shape,i,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lwe={kernelName:Qx,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{strides:a,pad:i,dataFormat:o,dimRoundingMode:l}=n;return{dy:()=>Od(t,s,a,i,o,1,l),filter:()=>Lj(t,r,s.shape,a,i,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uwe(t,e,n,r,s){let a=t;t.rank===4&&(a=ce(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let i=e;i.rank===4&&(i=ce(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),X(a.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${a.shape}.`),X(i.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),X(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),X(a.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${a.shape[4]}) must match input depth in filter (${n[3]}.`),X(i.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${n[4]}).`);const o={x:a,dy:i},l={strides:r,pad:s,filterShape:n};return ue.runKernel(lk,o,l)}const cwe=le({conv3DBackpropFilter_:uwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dwe={kernelName:Zx,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:a}=n;X(Rd(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[i,o]=e;return{x:()=>XY(i.shape,t,o,s,a),filter:()=>cwe(i,t,o.shape,s,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fwe={kernelName:Tg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(vr(Ij(nt(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hwe={kernelName:$g,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(Ej(nt(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pwe={kernelName:Jx,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s,exclusive:a,reverse:i}=n;return{x:()=>{const o=Yn([s],r.rank);let l=fj(t,s,a,!i);return o!=null&&(l=bn(l,o)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mwe={kernelName:ev,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:a,dimRoundingMode:i}=n,o=r??[1,1];X(Rd(o),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[l,u]=e;return X(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),X(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),X(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),X(Es(s,o),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${o}'.`),za("depthwiseConv2d",a,i),{x:()=>EQ(l.shape,t,u,s,a,o,i),filter:()=>IQ(l,t,u.shape,s,a,o,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gwe={kernelName:tv,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,a={x:r,filter:s,dy:t},i={x:r,filter:s,dy:t};return{x:()=>ue.runKernel(e2,a,n),filter:()=>ue.runKernel(t2,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ywe={kernelName:Eg,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>ue.runKernel(bk,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bwe={kernelName:Ag,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ie(La(vr(Kn(n))),2/Math.sqrt(Math.PI));return{x:()=>ie(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xwe={kernelName:Rg,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vwe={kernelName:rv,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>ce(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wwe={kernelName:Og,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(t,La(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Swe={kernelName:_g,gradFunc:t=>({x:()=>vn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cwe={kernelName:Dg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=_t(n.shape,r.shape);return{a:()=>{const o=dt(t,nt(r,"float32")),l=Is(n.shape,s);return l.length>0?ce(wt(o,l),n.shape):o},b:()=>{let o=ie(t,nt(n,"float32"));const l=Is(r.shape,s);l.length>0&&(o=ce(wt(o,l),r.shape));const u=Kn(r);return vr(dt(o,nt(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kwe={kernelName:sv,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[s,a,i,o]=e,l=o??It(1),u=Is(a.shape,s.shape),c=[];if(a.rank===1){for(let T=0;T<s.shape.length-1;++T)c.push(s.shape[T]);c.push(1)}const d=ft(s,a),h=ie(t,l),m=Nj(je(i,It(r))),g=ie(ie(ie(m,m),m),It(-.5));return{x:()=>a.rank===1?ce(ie(ie(t,Go(ce(m,[1,1,1,a.shape[0]]),c)),l),s.shape):ce(ie(ie(t,m),l),s.shape),mean:()=>{let T=ie(ie(m,It(-1)),h);return a.rank===1&&(T=wt(T,u)),ce(T,a.shape)},variance:()=>{let T=ie(ie(g,d),h);return a.rank===1&&(T=wt(T,u)),ce(T,a.shape)},scale:()=>{const T=ie(d,m);let N=ie(t,T);return a.rank===1&&(N=wt(N,u)),ce(N,a.shape)},offset:()=>{let T=t;return a.rank===1&&(T=wt(T,u)),ce(T,a.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nwe={kernelName:av,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,s]=e,{axis:a,batchDims:i}=n,o=Gt(a,r.shape)[0],l=(u,c,d)=>()=>{const h=u.shape,m=c.size,g=h.slice(0,o),y=g.length,b=h.slice(a,h.length).slice(1),w=b.length,C=zU(0,y),k=zU(y+1,y+1+w),T=BU([g,[m],b]),N=ce(d,T),I=ce(c,[m]),A=BU([[y],C,k]),D=bn(N,A);let P=Pj(D,I,u.shape[o]);const R=ju(A);return P=bn(P,R),P};if(i===1){const u=r.shape[0],c=r.split(u,0);return{x:()=>Ai(c.map((m,g)=>l(m,s.slice(g,1),t.slice(g,1))())).reshape(r.shape),indices:()=>s}}else return{x:l(r,s,t),indices:()=>s}}};function zU(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function BU(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Twe={kernelName:Pg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>vn(n),b:()=>vn(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $we={kernelName:Mg,gradFunc:t=>({x:()=>nt(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iwe={kernelName:jg,gradFunc:t=>({x:()=>vn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ewe={kernelName:Lg,gradFunc:t=>({x:()=>vn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Awe={kernelName:Fg,gradFunc:t=>({x:()=>vn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rwe={kernelName:ov,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:s}=n,a=Mi(r,0);return{x:()=>ma(a,t,ie(t,s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Owe={kernelName:Bg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>dt(t,je(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _we={kernelName:zg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>dt(t,nt(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dwe={kernelName:Cpe,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;return{logits:()=>{const i=La(r);return ft(t,ie(wt(t,s,!0),i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pwe(t,e,n,r=5,s=1,a=1,i=.5){const o={x:t,y:e,dy:n},l={depthRadius:r,bias:s,alpha:a,beta:i};return ue.runKernel(Tk,o,l)}const Mwe=le({localResponseNormalizationBackprop_:Pwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jwe={kernelName:hv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{depthRadius:a,bias:i,alpha:o,beta:l}=n;return{x:()=>Mwe(r,s,t,a,i,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Z(t,e,n,r){return e.rank<n.rank&&(e=ce(e,Ur(e.shape,r))),t.rank<n.rank&&(t=ce(t,Ur(t.shape,r))),{x:()=>ie(t,nt(jl(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UU={kernelName:pv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:s}=r,a=e[0],i=e[1],o=Gt(s,a.shape),l=$Z(t,i,a,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lwe={kernelName:Ug,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ie(t,nt(qd(n,r),"float32")),b:()=>ie(t,nt(_b(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fwe(t,e,n,r,s,a,i){const o=J(t,"dy","maxPool3dGrad"),l=J(e,"input","maxPool3dGrad"),u=J(n,"output","maxPool3dGrad");let c=o,d=l,h=u,m=!1;l.rank===4&&(m=!0,c=ce(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),d=ce(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=ce(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),X(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),X(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),X(h.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${h.rank}.`),za("maxPool3dGrad",a,i);const g={dy:c,input:d,output:h},y={filterSize:r,strides:s,pad:a,dimRoundingMode:i},b=ue.runKernel(Ik,g,y);return m?ce(b,[b.shape[1],b.shape[2],b.shape[3],b.shape[4]]):b}const zwe=le({maxPool3dGrad_:Fwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bwe={kernelName:gv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=n;return{x:()=>zwe(t,r,s,a,i,o,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uwe(t,e,n,r,s,a,i){const o=J(t,"dy","maxPoolGrad"),l=J(e,"input","maxPoolGrad"),u=J(n,"output","maxPoolGrad");X(l.rank===o.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${o.rank})`),X(o.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${o.rank}.`),X(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),za("maxPoolGrad",a,i);const c={dy:o,input:l,output:u},d={filterSize:r,strides:s,pad:a,dimRoundingMode:i};return ue.runKernel($k,c,d)}const Vwe=le({maxPoolGrad_:Uwe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wwe={kernelName:mv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:a,strides:i,pad:o}=n;return{x:()=>Vwe(t,r,s,a,i,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gwe={kernelName:yv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n,a=Gt(s,r.shape),o=ns(r.shape,a)[1],l=ye(o);return{x:()=>{const c=r.shape.slice();a.forEach(m=>{c[m]=1});const d=ce(t,c);return dt(ie(d,Ti(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hwe={kernelName:bv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:s}=r,[a,i]=e,o=Gt(s,a.shape),l=$Z(t,i,a,o);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qwe={kernelName:Vg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>ie(t,nt(jh(n,r),"float32")),b:()=>ie(t,nt(Mi(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kwe={kernelName:xv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,a=s.map(i=>i[0]);return{x:()=>zt(t,a,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xwe={kernelName:Wg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=_t(n.shape,r.shape);return{a:()=>{const o=Is(n.shape,s);return o.length>0?ce(wt(t,o),n.shape):t},b:()=>{const o=ie(t,vr(Hv(dt(n,r)))),l=Is(r.shape,s);return l.length>0?ce(wt(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ywe={kernelName:Gg,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=_t(n.shape,r.shape);return{a:()=>{const o=ie(t,nt(r,"float32")),l=Is(n.shape,s);return l.length>0?ce(wt(o,l),n.shape):o},b:()=>{const o=ie(t,nt(n,"float32")),l=Is(r.shape,s);return l.length>0?ce(wt(o,l),r.shape):o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qwe={kernelName:vv,gradFunc:t=>({x:()=>vr(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zwe={kernelName:Cv,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>es(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jwe={kernelName:Sv,gradFunc:t=>({x:()=>vn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eSe={kernelName:kv,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return rl(t,r).map(a=>()=>a)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VU={kernelName:Nv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,a=s.map(i=>i[0]);return{x:()=>zt(t,a,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tSe={kernelName:Hg,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,s]=e,a=n,i=r,o=_t(a.shape,i.shape);return{a:()=>{const c=nt(i,"float32");let d=ie(t,ie(c,Ic(a,ft(c,It(1)))));const h=Is(a.shape,o);return h.length>0&&(d=wt(d,h)),ce(d,a.shape)},b:()=>{const c=Mi(a,0),d=ma(c,fo(a),vn(a));let h=ie(t,ie(s,d));const m=Is(i.shape,o);return m.length>0&&(h=wt(h,m)),ce(h,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nSe={kernelName:Tv,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,s=Mi(n,0);return{x:()=>ma(s,t,ie(t,r)),alpha:()=>{let a=ma(s,vn(t),ie(t,n));const i=Is(r.shape,t.shape);return i.length>0&&(a=wt(a,i)),ce(a,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rSe(t,e,n){const r=t.shape.slice();r[n]=1;const s=ce(e,r),a=l2(t,n,!0,!1),i=l2(t,n,!0,!0),o=ie(a,i);return ie(s,o)}function sSe(t,e,n){const r=t.shape.length,s=r-n.length,a=Yn(n,r);let i=t;a!=null&&(i=bn(t,a));const o=i.shape.slice(),u=o.splice(r-n.length,n.length).reduce((h,m)=>h*m,1);o.push(u);const c=i.reshape(o);let d=rSe(c,e,s);if(d=d.reshape(i.shape),a!=null){const h=ju(a);d=bn(d,h)}return d}const aSe={kernelName:$v,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;let a=[];return s==null?a=r.shape.map((i,o)=>o):typeof s=="number"?a=[s]:a=s,{x:()=>sSe(r,t,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iSe={kernelName:Ig,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=_t(n.shape,r.shape);return{a:()=>{const o=dt(t,nt(r,"float32")),l=Is(n.shape,s);return l.length>0?ce(wt(o,l),n.shape):o},b:()=>{let o=ie(t,nt(n,"float32"));const l=Is(r.shape,s);l.length>0&&(o=ce(wt(o,l),r.shape));const u=Kn(r);return vr(dt(o,nt(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oSe={kernelName:qg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>dt(t,vr(Kn(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lSe={kernelName:Xg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=ie(jh(n,6),hy(n));return{x:()=>ie(t,nt(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uSe={kernelName:Kg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(t,nt(hy(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cSe={kernelName:Iv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ce(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dSe={kernelName:Av,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>ue.runKernel(Mk,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fSe={kernelName:Ev,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>ue.runKernel(Pk,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hSe={kernelName:Rv,gradFunc:(t,e,n)=>{const{dims:r}=n,s=Gt(r,t.shape);return{x:()=>nl(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pSe={kernelName:Yg,gradFunc:t=>({x:()=>vn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mSe={kernelName:Qg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>vr(dt(t,ie(Ic(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gSe={kernelName:Ov,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>nt(vn(n),"float32"),t:()=>ie(t,nt(n,t.dtype)),e:()=>ie(t,nt(aN(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ySe={kernelName:Zg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Mi(n,It(0)),s=It(Xv),a=It(Yv),i=ie(t,a),o=ie(ie(t,s),La(nt(n,"float32")));return ma(r,i,o)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bSe={kernelName:ny,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(t,ie(n,ft(It(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xSe={kernelName:ty,gradFunc:t=>({x:()=>vn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vSe={kernelName:Jg,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(eN(nt(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wSe={kernelName:ey,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(dj(nt(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SSe={kernelName:_v,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:s,size:a}=n,i=r.shape,[o,l]=Kv(r,s,a),u=[];for(let c=0;c<t.rank;c++)u.push([o[c],i[c]-o[c]-l[c]]);return{x:()=>Ll(t,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CSe={kernelName:jv,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:s}=n,a=!0,i=ie(t,r);return{logits:()=>ft(i,ie(wt(i,[s],a),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kSe={kernelName:ry,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(t,io(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WU={kernelName:Pv,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:s}=n;return{x:()=>Jk(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GU={kernelName:Mv,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Rr(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NSe={kernelName:sy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>dt(t,ie(ea(nt(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TSe={kernelName:Vk,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(t,ie(nt(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Se={kernelName:ay,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=It(2);return{a:()=>ie(t,ie(s,ft(n,r))),b:()=>ie(t,ie(s,ft(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ISe={kernelName:cy,gradFunc:t=>({x:()=>vn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ESe={kernelName:iy,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=_t(n.shape,r.shape);return{a:()=>{let o=t;const l=Is(n.shape,s);return l.length>0&&(o=wt(o,l)),ce(o,n.shape)},b:()=>{let o=t;const l=Is(r.shape,s);return l.length>0&&(o=wt(o,l)),ce(vr(o),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ASe={kernelName:Dv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,s=r.shape.slice(),{axis:a}=n;Gt(a,r.shape).forEach(u=>{s[u]=1});const o=ce(t,s),l=ie(o,Ti(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RSe={kernelName:oy,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>dt(t,Kn(eN(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OSe={kernelName:ly,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ie(ft(It(1),Kn(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Se={kernelName:uy,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:s}=n;return{x:()=>{let i=vn(r);if(r.rank===1)for(let o=0;o<s[0];++o)i=je(i,zt(t,[o*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let o=0;o<s[0];++o)for(let l=0;l<s[1];++l)i=je(i,zt(t,[o*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let o=0;o<s[0];++o)for(let l=0;l<s[1];++l)for(let u=0;u<s[2];++u)i=je(i,zt(t,[o*r.shape[0],l*r.shape[1],u*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let o=0;o<s[0];++o)for(let l=0;l<s[1];++l)for(let u=0;u<s[2];++u)for(let c=0;c<s[3];++c)i=je(i,zt(t,[o*r.shape[0],l*r.shape[1],u*r.shape[2],c*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return i}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DSe={kernelName:th,gradFunc:(t,e,n)=>{const r=n,{perm:s}=r,a=ju(s);return{x:()=>bn(t,a)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PSe={kernelName:Lv,gradFunc:(t,e,n)=>{const r=n,{axis:s}=r;return{value:()=>Ai(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MSe={kernelName:Fv,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>jSe(t,n)}}};function jSe(t,e){const n=Pc(e,vn(e)),r=qv(t,n);let s=qd(e,It(0,"int32"));const a=r.rank-s.rank;for(let o=0;o<a;++o)s=cs(s,o+1);s=Tu(s,Ti(r.shape,"bool"));const i=vn(r);return ma(s,r,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LSe={kernelName:zv,gradFunc:t=>({x:()=>vn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FSe=[TZ,M1e,j1e,L1e,F1e,z1e,B1e,U1e,V1e,W1e,G1e,H1e,X1e,Z1e,J1e,ewe,twe,nwe,rwe,swe,awe,iwe,lwe,owe,dwe,fwe,hwe,pwe,mwe,gwe,iSe,ywe,bwe,xwe,vwe,wwe,Cwe,Swe,kwe,Nwe,Twe,$we,Iwe,Ewe,Awe,Rwe,Owe,_we,Dwe,jwe,UU,UU,Lwe,Bwe,Wwe,Gwe,Hwe,qwe,Kwe,Xwe,Ywe,Qwe,Zwe,Jwe,eSe,VU,VU,tSe,nSe,aSe,oSe,lSe,uSe,cSe,dSe,fSe,hSe,pSe,mSe,gSe,ySe,bSe,xSe,vSe,wSe,SSe,CSe,kSe,WU,WU,GU,GU,NSe,$Se,TSe,ISe,ESe,ASe,RSe,OSe,_Se,DSe,PSe,MSe,LSe];for(const t of FSe)Npe(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.abs=function(){return this.throwIfDisposed(),xs(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.acos=function(){return this.throwIfDisposed(),AY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.acosh=function(){return this.throwIfDisposed(),RY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.add=function(t){return this.throwIfDisposed(),je(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.all=function(t,e){return this.throwIfDisposed(),ij(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.any=function(t,e){return this.throwIfDisposed(),o2(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.argMax=function(t){return this.throwIfDisposed(),bh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.argMin=function(t){return this.throwIfDisposed(),OY(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.asScalar=function(){return this.throwIfDisposed(),X(this.size===1,()=>"The array must have only 1 element."),ce(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.asType=function(t){return this.throwIfDisposed(),nt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.as1D=function(){return this.throwIfDisposed(),ce(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.as2D=function(t,e){return this.throwIfDisposed(),ce(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),ce(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),ce(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.as5D=function(t,e,n,r,s){return this.throwIfDisposed(),ce(this,[t,e,n,r,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.asin=function(){return this.throwIfDisposed(),_Y(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.asinh=function(){return this.throwIfDisposed(),DY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.atan=function(){return this.throwIfDisposed(),PY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.atan2=function(t){return this.throwIfDisposed(),MY(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.atanh=function(){return this.throwIfDisposed(),jY(this)};Oe().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),Zk(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),Jk(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.batchNorm=function(t,e,n,r,s){return this.throwIfDisposed(),Uv(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.broadcastTo=function(t){return this.throwIfDisposed(),hm(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.cast=function(t){return this.throwIfDisposed(),nt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.ceil=function(){return this.throwIfDisposed(),VY(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),ui(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Pn&&(t=[t]),Rr([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.conv1d=function(t,e,n,r,s,a){return this.throwIfDisposed(),lj(this,t,e,n,r,s,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.conv2dTranspose=function(t,e,n,r,s){return this.throwIfDisposed(),cj(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.conv2d=function(t,e,n,r,s,a){return this.throwIfDisposed(),Od(this,t,e,n,r,s,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.cos=function(){return this.throwIfDisposed(),eN(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.cosh=function(){return this.throwIfDisposed(),dj(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),l2(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),fj(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),QY(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.depthwiseConv2d=function(t,e,n,r,s,a){return this.throwIfDisposed(),Vv(this,t,e,n,r,s,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.dilation2d=function(t,e,n,r,s){return this.throwIfDisposed(),ZY(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.divNoNan=function(t){return this.throwIfDisposed(),JY(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.div=function(t){return this.throwIfDisposed(),dt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.dot=function(t){return this.throwIfDisposed(),eQ(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.elu=function(){return this.throwIfDisposed(),Wv(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.equal=function(t){return this.throwIfDisposed(),jl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.erf=function(){return this.throwIfDisposed(),hj(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),rQ(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.exp=function(){return this.throwIfDisposed(),La(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.expandDims=function(t){return this.throwIfDisposed(),cs(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.expm1=function(){return this.throwIfDisposed(),sQ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.fft=function(){return this.throwIfDisposed(),pN(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.flatten=function(){return this.throwIfDisposed(),ce(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.floor=function(){return this.throwIfDisposed(),Hv(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.floorDiv=function(t){return this.throwIfDisposed(),aj(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.gather=function(t,e,n){return this.throwIfDisposed(),qv(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.greaterEqual=function(t){return this.throwIfDisposed(),qd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.greater=function(t){return this.throwIfDisposed(),Mi(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.ifft=function(){return this.throwIfDisposed(),Mb(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.irfft=function(){return this.throwIfDisposed(),Rj(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.isFinite=function(){return this.throwIfDisposed(),aQ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.isInf=function(){return this.throwIfDisposed(),iQ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.isNaN=function(){return this.throwIfDisposed(),oQ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.leakyRelu=function(t){return this.throwIfDisposed(),nN(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.lessEqual=function(t){return this.throwIfDisposed(),jh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.less=function(t){return this.throwIfDisposed(),_b(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),lQ(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.logSigmoid=function(){return this.throwIfDisposed(),uQ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.logSoftmax=function(t){return this.throwIfDisposed(),gj(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),sN(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.log=function(){return this.throwIfDisposed(),fo(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.log1p=function(){return this.throwIfDisposed(),rN(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.logicalAnd=function(t){return this.throwIfDisposed(),Tu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.logicalNot=function(){return this.throwIfDisposed(),aN(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.logicalOr=function(t){return this.throwIfDisposed(),yj(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.logicalXor=function(t){return this.throwIfDisposed(),cQ(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),ln(this,t,e,n)};Oe().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),iN(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.max=function(t,e){return this.throwIfDisposed(),Qo(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.maximum=function(t){return this.throwIfDisposed(),Pc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.mean=function(t,e){return this.throwIfDisposed(),Lr(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.min=function(t,e){return this.throwIfDisposed(),Ob(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.minimum=function(t){return this.throwIfDisposed(),Dd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),xj(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.mod=function(t){return this.throwIfDisposed(),fQ(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.mul=function(t){return this.throwIfDisposed(),ie(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.neg=function(){return this.throwIfDisposed(),vr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.norm=function(t,e,n){return this.throwIfDisposed(),Gv(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.notEqual=function(t){return this.throwIfDisposed(),Em(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),vj(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.onesLike=function(){return this.throwIfDisposed(),ho(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.pad=function(t,e){return this.throwIfDisposed(),Ll(this,t,e)};Oe().prototype.pool=function(t,e,n,r,s,a){return this.throwIfDisposed(),hQ(this,t,e,n,r,s,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.pow=function(t){return this.throwIfDisposed(),Ic(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.prelu=function(t){return this.throwIfDisposed(),uN(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.prod=function(t,e){return this.throwIfDisposed(),pQ(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.reciprocal=function(){return this.throwIfDisposed(),mQ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.relu=function(){return this.throwIfDisposed(),Lu(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.relu6=function(){return this.throwIfDisposed(),Cj(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.reshapeAs=function(t){return this.throwIfDisposed(),ce(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.reshape=function(t){return this.throwIfDisposed(),ce(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),OQ(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),_Q(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.reverse=function(t){return this.throwIfDisposed(),nl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.rfft=function(){return this.throwIfDisposed(),mN(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.round=function(){return this.throwIfDisposed(),kj(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.rsqrt=function(){return this.throwIfDisposed(),Nj(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.selu=function(){return this.throwIfDisposed(),Tj(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.separableConv2d=function(t,e,n,r,s,a){return this.throwIfDisposed(),$j(this,t,e,n,r,s,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.sigmoid=function(){return this.throwIfDisposed(),io(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.sign=function(){return this.throwIfDisposed(),gQ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.sin=function(){return this.throwIfDisposed(),Ij(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.sinh=function(){return this.throwIfDisposed(),Ej(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.slice=function(t,e){return this.throwIfDisposed(),zt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.softmax=function(t){return this.throwIfDisposed(),hN(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.softplus=function(){return this.throwIfDisposed(),fy(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),lN(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.split=function(t,e){return this.throwIfDisposed(),Ei(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.sqrt=function(){return this.throwIfDisposed(),ea(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.square=function(){return this.throwIfDisposed(),Kn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.squaredDifference=function(t){return this.throwIfDisposed(),Oj(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.squeeze=function(t){return this.throwIfDisposed(),$n(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Pn?[this,t]:[this,...t];return Ai(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.step=function(t){return this.throwIfDisposed(),hy(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.stridedSlice=function(t,e,n,r,s,a,i,o){return this.throwIfDisposed(),yQ(this,t,e,n,r,s,a,i,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.sub=function(t){return this.throwIfDisposed(),ft(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.sum=function(t,e){return this.throwIfDisposed(),wt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.tan=function(){return this.throwIfDisposed(),bQ(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.tanh=function(){return this.throwIfDisposed(),vh(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.tile=function(t){return this.throwIfDisposed(),Go(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.toBool=function(){return this.throwIfDisposed(),nt(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.toFloat=function(){return this.throwIfDisposed(),nt(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.toInt=function(){return this.throwIfDisposed(),nt(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.topk=function(t,e){return this.throwIfDisposed(),wQ(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.transpose=function(t){return this.throwIfDisposed(),bn(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.unique=function(t){return this.throwIfDisposed(),SQ(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),Pj(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.unstack=function(t){return this.throwIfDisposed(),rl(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.where=function(t,e){return this.throwIfDisposed(),ma(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Oe().prototype.zerosLike=function(){return this.throwIfDisposed(),vn(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class lu extends Error{constructor(e){super(e),Object.setPrototypeOf(this,lu.prototype)}}class Ho extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ho.prototype)}}class fe extends Error{constructor(e){super(e),Object.setPrototypeOf(this,fe.prototype)}}class Zt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Zt.prototype)}}class Yj extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Yj.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class IZ{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Sh(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function uu(t,e){if(!t)throw new Yj(e)}function HU(t,e){let n=0;for(const r of t)r===e&&n++;return n}function ri(t){return t.length===1?t[0]:t}function Bn(t){return Array.isArray(t)?t:[t]}function oc(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Bf(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let Do={};function Qj(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function iD(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>iD(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:iD(r))}}}function Qv(t,e={},n={},r="object",s=!1){if(typeof t=="string"){const a=t;let i;if(a in n)i=n[a];else if(a in Do)i=Do[a];else if(i=e[a],i==null)throw new fe(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return i}else{const a=t;if(a.className==null||a.config==null)throw new fe(`${r}: Improper config format: ${JSON.stringify(a)}.
'className' and 'config' must set.`);const i=a.className;let o,l;if(i in n?[o,l]=n[i]:i in Do?[o,l]=Do.className:i in e&&([o,l]=e[i]),o==null)throw new fe(`Unknown ${r}: ${i}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const u={};for(const m of Object.keys(Do))u[m]=Do[m];for(const m of Object.keys(n))u[m]=n[m];const c=a.config;c.customObjects=u;const d=Object.assign({},Do);for(const m of Object.keys(n))Do[m]=n[m];iD(a.config);const h=l(o,a.config,n,s);return Do=Object.assign({},d),h}else{const u=Object.assign({},Do);for(const d of Object.keys(n))Do[d]=n[d];const c=new o(a.config);return Do=Object.assign({},u),c}}}function zSe(t,e){return t<e?-1:t>e?1:0}function Uw(t,e){return-1*zSe(t,e)}function Cd(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function BSe(t){if(t==null)throw new fe(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Uh(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new fe(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function Zj(t,e,n=0,r=1/0){return uu(n>=0),uu(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(s=>typeof s===e)}function Ls(t,e){Array.isArray(t)?(X(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>Ls(n,`element ${r+1} of ${e}`))):X(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${EZ(t)}.`)}function EZ(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>EZ(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function USe(t,e,n){let r=n!=null?n():ti(),s;return(...i)=>{const o=n!=null?n():ti();return o-r<e||(r=o,s=t(...i)),s}}function AZ(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let VSe=0;function RZ(){return VSe++}const Vw={};function WN(t=""){return t in Vw||(Vw[t]=0),Vw[t]+=1,t+Vw[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const WSe=["channelsFirst","channelsLast"],GSe=["nearest","bilinear"],HSe=["valid","same","causal"],qSe=["max","avg"],KSe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Lp=new Map;function rs(t){Uh(WSe,"DataFormat",t)}function XSe(t){Uh(GSe,"InterpolationFormat",t)}function yo(t){Uh(HSe,"PaddingMode",t)}function OZ(t){Uh(qSe,"PoolMode",t)}const hb=[],qU="/";function nh(t,e){hb.push(t);try{const n=e();return hb.pop(),n}catch(n){throw hb.pop(),n}}function YSe(){return hb.length===0?"":hb.join(qU)+qU}function _Z(t){if(!PZ(t))throw new Error("Not a valid tensor name: '"+t+"'");return YSe()+t}function DZ(t){if(!PZ(t))throw new Error("Not a valid tensor name: '"+t+"'");Lp.has(t)||Lp.set(t,0);const e=Lp.get(t);if(Lp.set(t,Lp.get(t)+1),e>0){const n=`${t}_${e}`;return Lp.set(n,1),n}else return t}const QSe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function PZ(t){return!!t.match(QSe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ZSe(t){return t===parseInt(t.toString(),10)}function kd(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let s=e;s<n;++s)r*=t[s];return r}function Rm(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function Pd(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function Bl(t,e){if(e<t)throw new fe(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let BE;function ws(){return BE==null&&(BE=mh().epsilon()),BE}function Ul(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xu(t,e){return nt(t,e)}function Zv(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),ce(t,n)}function JSe(t,e){return be(()=>{if(t.shape.length!==2)throw new fe(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=Zv(t,1);return oD(n,[1,e,1])})}function e2e(t){const e=[kd(t.shape)];return ce(t,e)}function t2e(t){if(t.rank<=1)throw new fe(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],kd(t.shape,1)];return ce(t,e)}function rh(t,e,n){return be(()=>{switch(t.rank){case 1:return dN(t,e,n);case 2:return Aj(t,[e,0],[n,t.shape[1]]);case 3:return fN(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return Pb(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return zt(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return zt(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new fe(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function UE(t,e,n){return be(()=>{switch(t.rank){case 1:return dN(t,e,n);case 2:return Aj(t,[0,e],[t.shape[0],n]);case 3:return fN(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return Pb(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new fe(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Ww(t,e,n,r){return be(()=>{switch(t.rank){case 1:return dN(t,e,n);case 2:switch(r){case 1:return rh(t,e,n);case 2:return UE(t,e,n);default:throw new fe(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return rh(t,e,n);case 2:return fN(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return UE(t,e,n);default:throw new fe(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return rh(t,e,n);case 2:return Pb(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return Pb(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return UE(t,e,n);default:throw new fe(`The axis is not within the rank of the tensor ${r}`)}default:throw new fe(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Jj(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Rr(t,e)}function KU(t,e){switch(t.rank){case 1:return WY([t,e]);case 2:return GY([t,e],0);case 3:return HY([t,e],0);case 4:return qY([t,e],0);default:throw new fe(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function oD(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new fe(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return Go(t,e)}function GN(t,e=0,n=1,r,s){return Sj(t,e,n,r,s)}function vu(t,e,n,r){if(t.rank<2||e.rank<2)throw new Zt(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const s=t.shape.slice(-1)[0],a=e.shape.slice(-2)[0];if(s!==a)throw new Zt(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return nD({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?lD(t.rank,r,Ul()):null,activation:n});{const s=t.shape.slice(),a=s.pop();t=ce(t,[-1,a]);const i=e.shape.slice(),o=i.pop(),l=i.pop(),u=[...i,o],c=Array.from({length:e.rank},(g,y)=>y===0?e.rank-2:y<=e.rank-2?y-1:y);e=ce(bn(e,c),[l,-1]);const d=[...s,...u];return ce(nD({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?lD(t.rank,r,Ul()):null,activation:n}),d)}}function MZ(t,e,n){return be(()=>(Array.isArray(e)?e=fs(e,"int32"):e=nt(e,"int32"),qv(t,e,n)))}function Jv(t){return ie(t,t)}function lD(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new fe(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?ce(e,[1,r[0],1,1,1]):ce(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?ce(e,[1,1,1,1,r[0]]):ce(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?ce(e,[1,r[0],1,1]):ce(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?ce(e,[1,1,1,r[0]]):ce(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?ce(e,[1,r[0],1]):ce(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?ce(e,[1,1,r[0]]):ce(e,[1].concat(r))}else if(t<3)return e;throw new fe(`Unsupported input rank by biasAdd: ${e.rank}`)}function Kl(t,e,n){return be(()=>(n==null&&(n=Ul()),rs(n),je(t,lD(t.rank,e,n))))}function n2e(t,e=1){if(e!==1)throw new Zt(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return Wv(t)}function r2e(t){return be(()=>dt(t,je(xs(t),1)))}function jZ(t,e,n,r){return be(()=>NQ(t,e,n,r))}function s2e(t){return be(()=>{const e=je(.5,ie(.2,t));return ui(e,0,1)})}function e1(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const a2e=["fanIn","fanOut","fanAvg"],i2e=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function o2e(t){Uh(a2e,"FanMode",t)}function l2e(t){Uh(i2e,"Distribution",t)}class al extends my{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class LZ extends al{apply(e,n){return es(e,n)}}LZ.className="Zeros";Ge(LZ);class e4 extends al{apply(e,n){return Ti(e,n)}}e4.className="Ones";Ge(e4);class FZ extends al{constructor(e){if(super(),typeof e!="object")throw new fe(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new fe(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return be(()=>ie(It(this.value),Ti(e,n)))}getConfig(){return{value:this.value}}}FZ.className="Constant";Ge(FZ);class zZ extends al{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return Lh(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}zZ.className="RandomUniform";Ge(zZ);class BZ extends al{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Zt(`randomNormal does not support dType ${n}.`);return GN(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}BZ.className="RandomNormal";Ge(BZ);class UZ extends al{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Zt(`truncatedNormal does not support dType ${n}.`);return Dj(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}UZ.className="TruncatedNormal";Ge(UZ);class VZ extends al{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return be(()=>{if(e.length!==2||e[0]!==e[1])throw new fe("Identity matrix initializer can only be used for 2D square matrices.");return ie(this.gain,mj(e[0]))})}getConfig(){return{gain:this.gain}}}VZ.className="Identity";Ge(VZ);function u2e(t,e="channelsLast"){let n,r;if(rs(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const s=kd(t,2);n=t[1]*s,r=t[0]*s}else if(e==="channelsLast"){const s=kd(t,0,t.length-2);n=t[t.length-2]*s,r=t[t.length-1]*s}}else{const s=kd(t);n=Math.sqrt(s),r=Math.sqrt(s)}return[n,r]}class Ri extends al{constructor(e){if(super(),e.scale<0)throw new fe(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,o2e(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,l2e(this.distribution),this.seed=e.seed}apply(e,n){const r=u2e(e),s=r[0],a=r[1];let i=this.scale;if(this.mode==="fanIn"?i/=Math.max(1,s):this.mode==="fanOut"?i/=Math.max(1,a):i/=Math.max(1,(s+a)/2),this.distribution==="normal"){const o=Math.sqrt(i);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new Zt(`${this.getClassName()} does not support dType ${n}.`);return Dj(e,0,o,n,this.seed)}else{const o=Math.sqrt(3*i);return Lh(e,-o,o,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Ri.className="VarianceScaling";Ge(Ri);class t4 extends Ri{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ri.className}}t4.className="GlorotUniform";Ge(t4);class n4 extends Ri{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ri.className}}n4.className="GlorotNormal";Ge(n4);class r4 extends Ri{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ri.className}}r4.className="HeNormal";Ge(r4);class s4 extends Ri{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ri.className}}s4.className="HeUniform";Ge(s4);class a4 extends Ri{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Ri.className}}a4.className="LeCunNormal";Ge(a4);class i4 extends Ri{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Ri.className}}i4.className="LeCunUniform";Ge(i4);class WZ extends al{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return be(()=>{if(e.length<2)throw new Zt("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=ye(e.slice(0,-1)),s=e[e.length-1],a=r*s;a>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${a}) elements: Slowness may result.`);const i=[Math.max(s,r),Math.min(s,r)],o=GN(i,0,1,n,this.seed),l=DQ.qr(o,!1);let u=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(s,r)*Math.min(s,r)],[Math.min(s,r)+1]);return u=ie(u,d.sign()),r<s&&(u=u.transpose()),ie(It(this.gain),u.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}WZ.className="Orthogonal";Ge(WZ);const XU={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function YU(t,e={}){return Qv(t,Vo.getMap().classNameMap,e,"initializer")}function Er(t){return Qj(t)}function Cr(t){if(typeof t=="string"){const e=t in XU?XU[t]:t;if(e==="GlorotNormal")return new n4;if(e==="GlorotUniform")return new t4;if(e==="HeNormal")return new r4;if(e==="HeUniform")return new s4;if(e==="LeCunNormal")return new a4;if(e==="LeCunUniform")return new i4;{const n={};return n.className=e,n.config={},YU(n)}}else return t instanceof al?t:YU(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function uD(t){return Array.isArray(t)&&Array.isArray(t[0])}function u2(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Bt(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new fe(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function Tn(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new fe(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function c2(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,s)=>r*s);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const QU="Variable";class c2e{constructor(e,n="float32",r=QU,s=!0,a=null){this.dtype=n??"float32",this.shape=e.shape,this.id=RZ(),r=r??QU,this.originalName=_Z(r),this.name=DZ(this.originalName),this.trainable_=s,this.constraint=a,this.val=CQ(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),d2e(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function d2e(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function cD(t){return t.map(e=>e.read())}function o4(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ss{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class $u{constructor(e,n,r,s,a,i,o){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=s,this.callArgs=a,this.outputTensorIndex=o,this.id=RZ(),i!=null&&(this.originalName=_Z(i),this.name=DZ(this.originalName)),this.rank=n.length}}let f2e=0;class HN{constructor(e,n){this.callArgs=n,this.id=f2e++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let h2e=0,nn=class extends my{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=h2e++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=oc(r)+"_"+WN(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let a=null;e.batchSize!=null&&(a=e.batchSize),r=[a].concat(e.inputShape)}this.batchInputShape=r;let s=e.dtype;s==null&&(s=e.inputDType),s==null&&(s="float32"),this.dtype=s}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Ho(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new fe(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return ri(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return ri(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new lu(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new lu(`Layer ${this.name} is not connected, no input to return.`);return ri(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new lu(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new lu(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return ri(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=Bn(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=Bn(this.inputSpec);if(n.length!==r.length)throw new fe(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let s=0;s<n.length;s++){const a=n[s],i=r[s];if(i==null)continue;const o=a.rank;if(i.ndim!=null&&o!==i.ndim)throw new fe(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${o}`);if(i.maxNDim!=null&&o>i.maxNDim)throw new fe(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${o}`);if(i.minNDim!=null&&o<i.minNDim)throw new fe(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${o}.`);if(i.dtype!=null&&a.dtype!==i.dtype)throw new fe(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${a.dtype}.`);if(i.axes){const l=a.shape;for(const u in i.axes){const c=Number(u),d=i.axes[u],h=c>=0?l[c]:l[l.length+c];if(d!=null&&[d,null].indexOf(h)===-1)throw new fe(`Input ${s} is incompatible with layer ${this.name}: expected axis ${c} of input shape to have value ${d} but got shape ${l}.`)}}if(i.shape!=null)for(let l=0;l<i.shape.length;++l){const u=i.shape[l],c=a.shape[l];if(u!=null&&c!=null&&u!==c)throw new fe(`Input ${s} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${a.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=Bn(e),s=g2e(e),a=y2e(e);if(s===a)throw new fe("Arguments to apply() must be all SymbolicTensors or all Tensors");return nh(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const i=[];for(const o of Bn(e))i.push(o.shape);this.build(ri(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&a&&(this._refCount=1)}if(this.assertInputCompatibility(e),a){let i=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,i);const o=Bn(i),l=[];for(let u of o)r.indexOf(u)!==-1&&(u=u.clone()),l.push(u);if(i=ri(l),this.activityRegularizer!=null)throw new Zt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{const i=p2e(e),o=this.computeOutputShape(i);let l;const u=m2e(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?i[0]:i),o!=null&&o.length>0&&Array.isArray(o[0])?l=o.map((c,d)=>new $u(u,c,this,Bn(e),n,this.name,d)):l=new $u(u,o,this,Bn(e),n,this.name),this.addInboundNode(e,l,null,null,i,o,n),this._refCount++,this.activityRegularizer!=null)throw new Zt("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,s)=>{r!=null&&e[s]!=null&&e[s]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new lu(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new lu(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Ho(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return c2(this.weights)}build(e){this.built=!0}getWeights(e=!1){return cD(e?this.trainableWeights:this.weights)}setWeights(e){be(()=>{const n=this.weights;if(n.length!==e.length)throw new fe(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],s=cD(n);for(let a=0;a<s.length;++a){const i=s[a],o=n[a],l=e[a];if(!Xt(i.shape,l.shape))throw new fe(`Layer weight shape ${i.shape} not compatible with provided weight shape ${l.shape}`);r.push([o,l])}o4(r)})}addWeight(e,n,r,s,a,i,o,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new fe(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(s=l!=null?l():Cr("zeros"));const u=s.apply(n,r),c=new c2e(u,r,e,i,o);return u.dispose(),a!=null&&this.addLoss(()=>a.apply(c.read())),i==null&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Bn(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const s=this.computeMask(e,r),a=Bn(n),i=Bn(s);if(a.length!==i.length)throw new Error(`${this.name} outputs ${a.length} tensors but ${a.length} masks for those tensors`);for(let o=0;o<a.length;o++)a[o].kerasMask=i[o]}addInboundNode(e,n,r,s,a,i,o=null){const l=Bn(e);n=Bn(n),r=Bn(r),s=Bn(s),a=u2(a),i=u2(i);const u=[],c=[],d=[];for(const h of l)u.push(h.sourceLayer),c.push(h.nodeIndex),d.push(h.tensorIndex);new HN({outboundLayer:this,inboundLayers:u,nodeIndices:c,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:s,inputShapes:a,outputShapes:i},o);for(let h=0;h<n.length;h++)n[h].sourceLayer=this,n[h].nodeIndex=this.inboundNodes.length-1,n[h].tensorIndex=h}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}};function p2e(t){t=Bn(t);const e=[];for(const n of t)e.push(n.shape);return ri(e)}function m2e(t){return"float32"}function GZ(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const s=[];for(let a=0;a<r.inboundLayers.length;a++){const i=r.inputTensors[a],o=r.inboundLayers[a],l=r.nodeIndices[a],u=GZ(i,o,l);for(const c of u)s.indexOf(c)===-1&&s.push(c)}return s}}}function g2e(t){let e=!0;for(const n of Bn(t))if(!(n instanceof $u)){e=!1;break}return e}function y2e(t){let e=!0;for(const n of Bn(t))if(n instanceof $u){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class t1 extends nn{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:WN("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new fe("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new fe("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new fe("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const s=new $u(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new HN({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new fe(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}t1.className="InputLayer";Ge(t1);function b2e(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new fe("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new t1({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function x2e(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return nt(e,t.dtype)}catch{throw new fe(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class bd{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof bd)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=x2e(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new fe(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof $u){if(this.id2Value[e.id]==null)throw new fe(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new fe(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof $u){if(this.id2Value[e.id]==null)throw new fe(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new fe(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&Rt(this.id2Mask)}}const d2=new IZ,f2=new IZ;function v2e(t){d2!=null&&d2.setMaxEntries(t),f2!=null&&f2.setMaxEntries(t)}function nb(t,e,n,r){const s=n==null?!1:n.training,a=Array.isArray(t),i=a?t:[t],o=i.map(g=>g.name),l=[],u=e.names();for(const g of o)u.indexOf(g)!==-1?l.push(e.getValue(g)):l.push(null);const c=o.join(",")+"|"+e.names().sort().join(",");let d=d2.get(c),h;if(d==null){const g=w2e(i,e);d=g.sorted,h=g.recipientCounts,d2.put(c,d),f2.put(c,h)}h={},s||Object.assign(h,f2.get(c));const m=new bd(e);for(let g=0;g<d.length;++g){const y=d[g],b=y.sourceLayer;if(b instanceof t1)continue;const w=[],C=[],k=[];let T=!1;for(const P of y.inputs){const R=m.getValue(P),O=m.getMask(P);w.push(R),C.push(O),O!=null&&(T=!0),s||(h[P.name]--,h[P.name]===0&&!e.hasKey(P)&&o.indexOf(P.name)===-1&&!R.isDisposed&&P.sourceLayer.stateful!==!0&&k.push(R))}T&&(n=n||{},n.mask=C[0]);const N=Bn(b.apply(w,n));let I=null;b.supportsMasking&&(I=b.computeMask(w,C));const A=C2e(y),D=Array.isArray(A)?A:[A];for(let P=0;P<D.length;++P){m.hasKey(D[P])||m.add(D[P],N[P],Array.isArray(I)?I[0]:I);const R=o.indexOf(D[P].name);R!==-1&&(l[R]=N[P])}s||Rt(k)}return m.disposeMasks(),a?l:l[0]}function w2e(t,e){X(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const s=ZU(t[0],e);n=s.sorted,r=s.recipientMap}else{const s=new Set;for(const a of t){const{sorted:i,recipientMap:o}=ZU(a,e);for(const l of i)s.has(l.name)||(n.push(l),s.add(l.name));for(const l in o)r[l]==null&&(r[l]=new Set),o[l].forEach(u=>r[l].add(u))}}return{sorted:n,recipientCounts:S2e(r)}}function S2e(t){const e={};for(const n in t)e[n]=t[n].size;return e}function ZU(t,e){const n=new Set,r=[],s={};for(const o of e.names())n.add(o);const a=[],i=[];for(a.push(t);a.length>0;){const o=a[a.length-1];if(n.has(o.name)){a.pop();continue}const l=i[i.length-1]===a.length-1;if(o.inputs.length===0||l)a.pop(),r.push(o),n.add(o.name),l&&i.pop();else{i.push(a.length-1);for(const u of o.inputs)s[u.name]==null&&(s[u.name]=new Set),s[u.name].add(o.name),!n.has(u.name)&&a.push(u)}}return{sorted:r,recipientMap:s}}function C2e(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const s of t.sourceLayer.inboundNodes[r].outputTensors)if(s.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k2e=ve();k2e.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,v2e);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function l4(t,e){return be(()=>ea(wt(ie(t,t),e,!0)))}class n1 extends my{getConfig(){return{}}}class HZ extends n1{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return be(()=>{const n=l4(e,this.axis),r=ui(n,0,this.maxValue);return ie(e,dt(r,je(ws(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}HZ.className="MaxNorm";Ge(HZ);class qZ extends n1{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return be(()=>dt(e,je(ws(),l4(e,this.axis))))}getConfig(){return{axis:this.axis}}}qZ.className="UnitNorm";Ge(qZ);class KZ extends n1{apply(e){return Lu(e)}}KZ.className="NonNeg";Ge(KZ);class XZ extends n1{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return be(()=>{const n=l4(e,this.axis),r=je(ie(this.rate,ui(n,this.minValue,this.maxValue)),ie(1-this.rate,n));return ie(e,dt(r,je(ws(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}XZ.className="MinMaxNorm";Ge(XZ);const JU={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function ks(t){return Qj(t)}function eV(t,e={}){return Qv(t,Vo.getMap().classNameMap,e,"constraint")}function Ns(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in JU?JU[t]:t,config:{}};return eV(n)}else return t instanceof n1?t:eV(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function If(t){if(t==null)return;const e=[],n=[],r=[];for(const s in t){const a=t[s];if(typeof a!="number"){const i=a;e.push(i.data()),n.push(s),r.push(i)}}if(e.length>0){const s=await Promise.all(e);for(let a=0;a<s.length;++a)t[n[a]]=s[a][0];Rt(r)}}function YZ(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var tV;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(tV||(tV={}));const N2e=125;class jb{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class T2e{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class $2e extends jb{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const s in n){const a=n[s];if(typeof a=="number")this.totals.hasOwnProperty(s)||(this.totals[s]=0),this.totals[s]=this.totals[s]+a*r;else{let i;s in this.totals?i=this.totals[s]:this.totals[s]=0;const o=be(()=>je(this.totals[s],ie(a,r)));this.totals[s]=o,i!=null&&i.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:be(()=>{const s=ie(dt(1,this.seen),this.totals[r]);n[r]=s,this.totals[r].dispose(),js(n[r])}))}}class I2e extends jb{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const a in this.history){const i=this.history[a];for(let o=0;o<i.length;++o)if(typeof i[o]!="number"){const l=i[o];e.push(l.data()),n.push(a),r.push(o)}}const s=await Promise.all(e);for(let a=0;a<s.length;++a)this.history[n[a]][r[a]].dispose(),this.history[n[a]][r[a]]=s[a][0]}}class E2e extends jb{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||nZ,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=N2e),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");z3(this.yieldEvery)&&(this.maybeWait=USe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const s=[];this.yield!=null&&(await If(r),s.push(this.yield(e,n,r))),s.push(this.nextFrameFunc()),await Promise.all(s)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await If(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await If(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await If(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await If(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):z3(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await If(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await If(e),await this.trainEnd(e))}}function QZ(t,e){return t==null&&(t={}),t instanceof jb?[t]:Array.isArray(t)&&t[0]instanceof jb?t:Bn(t).map(r=>new E2e(r,e))}class Lo{constructor(){}static registerCallbackConstructor(e,n){X(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),Lo.checkForDuplicate(n),Lo.constructors[e]==null&&(Lo.constructors[e]=[]),Lo.constructors[e].push(n)}static checkForDuplicate(e){for(const n in Lo.constructors)Lo.constructors[+n].forEach(s=>{if(s===e)throw new fe("Duplicate callback constructor.")})}static clear(){Lo.constructors={}}static createCallbacks(e){const n=[];for(const r in Lo.constructors){const s=+r;e>=s&&n.push(...Lo.constructors[s])}return n.map(r=>new r)}}Lo.constructors={};function ZZ(t,e,n,r,s,a,i,o,l){const u=new I2e,c=[new $2e,...Lo.createCallbacks(e)];t!=null&&c.push(...t),c.push(u);const d=new T2e(c);return d.setParams({epochs:n,initialEpoch:r,samples:s,steps:a,batchSize:i,verbose:e,doValidation:o,metrics:l}),{callbackList:d,history:u}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xc(t,e={},n=!1){return Qv(t,Vo.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function h2(t,e){return be(()=>{t.dtype!=="float32"&&(t=nt(t,"float32"));const n=wt(Jv(t),e,!0),r=dy(n.shape,ws()),s=ea(Pc(n,r));return dt(t,s)})}function qN(t,e){return be(()=>Lr(Jv(ft(e,t)),-1))}function u4(t,e){return be(()=>Lr(xs(ft(e,t)),-1))}function c4(t,e){return be(()=>{const n=ft(t,e),r=ui(xs(t),ws(),Number.MAX_VALUE),s=xs(dt(n,r));return ie(100,Lr(s,-1))})}function A2e(t,e){return be(()=>{const n=ui(e,ws(),Number.MAX_VALUE),r=fo(je(1,n)),s=ui(t,ws(),Number.MAX_VALUE),a=fo(je(1,s));return Lr(Jv(ft(r,a)),-1)})}function R2e(t,e){return be(()=>{const n=Pc(0,ft(1,ie(t,e)));return Lr(Jv(n),-1)})}function O2e(t,e){return be(()=>{const n=Pc(0,ft(1,ie(t,e)));return Lr(n,-1)})}function _2e(t,e){return be(()=>{const n=wt(ie(t,e),-1),r=Qo(ie(ft(1,t),e),-1);return Pc(0,je(1,ft(r,n)))})}function D2e(t,e){return be(()=>{const n=Math.log(2),r=ft(e,t),s=ft(je(r,fy(ie(-2,r))),n);return Lr(s,-1)})}function Lb(t,e,n=!1){return be(()=>{if(n)e=hN(e);else{const r=wt(e,e.shape.length-1,!0);e=dt(e,r)}return e=ui(e,ws(),1-ws()),vr(wt(ie(nt(t,"float32"),fo(e)),e.shape.length-1))})}function p2(t,e,n=!1){return be(()=>{const r=nt(Hv(e2e(t)),"int32");e=ui(e,ws(),1-ws());const s=e.shape,a=ce(vj(r,s[s.length-1]),s);return Lb(a,e,n)})}function P2e(t,e){if(!Xt(t.shape,e.shape))throw new fe(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return be(()=>{const n=Lu(e),r=vr(xs(e));return je(ft(n,ie(e,t)),rN(La(r)))})}function KN(t,e){return be(()=>{let n;return n=ui(e,ws(),1-ws()),n=fo(dt(n,ft(1,n))),Lr(P2e(t,n),-1)})}function M2e(t,e){return be(()=>{const n=ui(t,ws(),1),r=ui(e,ws(),1);return wt(ie(t,fo(dt(n,r))),-1)})}function j2e(t,e){return be(()=>{const n=fo(je(ws(),e));return Lr(ft(e,ie(t,n)),-1)})}function JZ(t,e){return be(()=>{const n=h2(t,-1),r=h2(e,-1),s=ie(n,r);return vr(wt(s,-1))})}const m2={meanSquaredError:qN,meanAbsoluteError:u4,meanAbsolutePercentageError:c4,meanSquaredLogarithmicError:A2e,squaredHinge:R2e,hinge:O2e,categoricalHinge:_2e,logcosh:D2e,categoricalCrossentropy:Lb,sparseCategoricalCrossentropy:p2,binaryCrossentropy:KN,kullbackLeiblerDivergence:M2e,poisson:j2e,cosineProximity:JZ};function VE(t){if(typeof t=="string"){if(t in m2)return m2[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new fe(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function eJ(t,e){return be(()=>{const n=ie(.5,ho(e)),r=xu(Mi(e,n),t.dtype);return Lr(jl(t,r),-1)})}function tJ(t,e){return be(()=>xu(jl(bh(t,-1),bh(e,-1)),"float32"))}function L2e(t,e){return be(()=>nt(wt(Tu(jl(t,1),jl(e,1))),"float32"))}function F2e(t,e){return be(()=>nt(wt(Tu(jl(t,0),jl(e,1))),"float32"))}function z2e(t,e){return be(()=>{const n=L2e(t,e),r=F2e(t,e),s=je(n,r);return nt(ma(Mi(s,0),dt(n,s),0),"float32")})}function B2e(t,e){return KN(t,e)}function U2e(t,e){return t.rank===e.rank&&(t=$n(t,[t.rank-1])),e=bh(e,-1),e.dtype!==t.dtype&&(e=nt(e,t.dtype)),nt(jl(t,e),"float32")}const V2e=qN,W2e=qN,G2e=u4,H2e=u4,q2e=c4,K2e=c4,nJ=Lb,X2e=JZ,rJ=p2,g2={binaryAccuracy:eJ,categoricalAccuracy:tJ,precision:z2e,categoricalCrossentropy:nJ,sparseCategoricalCrossentropy:rJ,mse:V2e,MSE:W2e,mae:G2e,MAE:H2e,mape:q2e,MAPE:K2e,cosine:X2e};function Y2e(t){if(typeof t=="string"&&t in g2)return g2[t];if(typeof t!="string"&&t!=null)return t;throw new fe(`Unknown metric ${t}`)}function Gw(t){if(uu(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(m2))if(m2[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(g2))if(g2[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Q2e(t){const e={Adagrad:()=>jp.adagrad(.01),Adadelta:()=>jp.adadelta(1,.95,ws()),Adam:()=>jp.adam(.001,.9,.999,ws()),Adamax:()=>jp.adamax(.002,.9,.999,ws(),0),RMSProp:()=>jp.rmsprop(.001,.9,0,ws()),SGD:()=>jp.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new fe(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const nV=1*1024*1024;function rV(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!dD(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>nV&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${nV}.`)}}function dD(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!dD(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!dD(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Z2e(t,e,n,r=console.log){const s=eCe(t),a=["Layer (type)","Input Shape","Output shape","Param #"];s?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(e*c)));let i;if(!s){a.push("Receives inputs"),i=[];for(const c in t.nodesByDepth)i.push(...t.nodesByDepth[c])}r("_".repeat(e)),y2(a,n,r),r("=".repeat(e));const o=t.layers;for(let c=0;c<o.length;++c)s?tCe(o[c],n,r):nCe(o[c],n,i,r),r((c===o.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=J2e(t),u=c2(t.nonTrainableWeights);r(`Total params: ${l+u}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${u}`),r("_".repeat(e))}function J2e(t){let e;return t.collectedTrainableWeights!=null?e=c2(t.collectedTrainableWeights):e=c2(t.trainableWeights),e}function eCe(t){let e=!0;const n=[],r=[];for(const s in t.nodesByDepth)n.push(t.nodesByDepth[s]);for(const s of n){if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){e=!1;break}r.push(...s)}if(e)for(const s of t.layers){let a=!1;for(const i of s.inboundNodes)if(r.indexOf(i)!==-1)if(a){e=!1;break}else a=!0;if(!e)break}return e}function y2(t,e,n=console.log){let r="";for(let s=0;s<t.length;++s)s>0&&(r=r.slice(0,r.length-1)+" "),r+=t[s],r=r.slice(0,e[s]),r+=" ".repeat(e[s]-r.length);n(r)}function tCe(t,e,n){let r,s;try{s=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{s="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const a=t.name,i=t.getClassName(),o=[`${a} (${i})`,s,r,t.countParams().toString()];y2(o,e,n)}function nCe(t,e,n,r){let s,a;try{a=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{a="multiple"}try{s=JSON.stringify(t.outputShape)}catch{s="multiple"}const i=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let h=0;h<d.inboundLayers.length;++h){const m=d.inboundLayers[h].name,g=d.nodeIndices[h],y=d.tensorIndices[h];i.push(`${m}[${g}][${y}]`)}const o=t.name,l=t.getClassName(),u=i.length===0?"":i[0],c=[`${o} (${l})`,a,s,t.countParams().toString(),u];y2(c,e,r);for(let d=1;d<i.length;++d)y2(["","","","",i[d]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function sJ(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function fD(t,e){if(t===null)return null;if(typeof t=="string")return Bf(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const a=t[s];sJ(e,s,a)?n.push(a):n.push(fD(a,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r];if(r==="name"&&typeof s=="string")n[r]=s;else{const a=Bf(r);n[a]=fD(s,a)}}return n}}function hD(t,e){if(t==null)return null;if(typeof t=="string")return oc(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const a=t[s];sJ(e,s,a)?n.push(a):n.push(hD(a,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r],a=oc(r);(r==="name"||r==="className")&&typeof s=="string"?n[a]=s:n[a]=hD(s,r)}return n}}/** @license See the LICENSE file. */const aJ="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const rCe=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class Nl extends nn{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const C=this.getClassName().toLowerCase();this.name=WN(C)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Cd(this.inputs).length!==this.inputs.length)throw new fe(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(C=>C.name)}`);Cd(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(C=>C.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const C of this.outputs){const k=C.sourceLayer,T=C.nodeIndex,N=C.tensorIndex;this.outputLayers.push(k),this.outputLayersNodeIndices.push(T),this.outputLayersTensorIndices.push(N)}for(const C of this.inputs){const k=C.sourceLayer,T=C.nodeIndex,N=C.tensorIndex;uu(T===0,"input layer has >1 nodes"),uu(N===0,"input layer has >1 tensors"),this.inputLayers.push(k),this.inputLayersNodeIndices.push(T),this.inputLayersTensorIndices.push(N)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let C=0;C<this.inputLayers.length;C++){const k=this.inputLayers[C];if(!(k instanceof t1))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${C} (0-based) originates from layer type ${k.getClassName()}.`);this.inputNames.push(k.name),this.feedInputShapes.push(k.batchInputShape),this.feedInputNames.push(k.name)}for(const C of this.outputLayers)this.outputNames.push(C.name);this.internalInputShapes=this.inputs.map(C=>C.shape),this.internalOutputShapes=this.outputs.map(C=>C.shape);const n={},r={},s={},a={},i={},o=[],l=(C,k,T,N,I,A)=>{(N==null||I==null||A==null)&&(N=C.sourceLayer,I=C.nodeIndex,A=C.tensorIndex);const D=N.inboundNodes[I];if(T.indexOf(D)!==-1)throw new Ho(`The tensor ${C.name} at layer "${N.name}" is part of a cycle.`);if(k.indexOf(D)!==-1)return;this.containerNodes.add(Nl.nodeKey(N,I)),N.id in i||(i[N.id]=Object.keys(i).length),T.indexOf(D)===-1&&T.push(D);const P=D.inboundLayers.length;for(let R=0;R<P;R++){const O=D.inputTensors[R],F=D.inboundLayers[R],z=D.nodeIndices[R],V=D.tensorIndices[R];l(O,k,T,F,z,V)}for(k.push(D);T.indexOf(D)>=0;)T.splice(T.indexOf(D),1);o.push(D)},u=[],c=[];for(const C of this.outputs)l(C,u,c);const d=o.slice().reverse();for(const C of d){r[C.id]=C,C.id in n||(n[C.id]=0);let k=n[C.id];const T=s[C.outboundLayer.id]==null?0:s[C.outboundLayer.id];k=Math.max(k,T),s[C.outboundLayer.id]=k,a[C.outboundLayer.id]=C.outboundLayer,n[C.id]=k;for(let N=0;N<C.inboundLayers.length;N++){const I=C.inboundLayers[N],A=C.nodeIndices[N],D=I.inboundNodes[A],P=n[D.id]==null?0:n[D.id];n[D.id]=Math.max(k+1,P),r[D.id]=D}}const h={};for(const C in n){const k=n[C];k in h||(h[k]=[]),h[k].push(r[C])}const m={};for(const C in s){const k=s[C];k in m||(m[k]=[]),m[k].push(a[C])}let g=Object.keys(m).map(C=>parseInt(C,10)).sort(Uw);this.layers=[];for(const C of g){const k=m[C];k.sort((T,N)=>{const I=i[T.id],A=i[N.id];return I<A?-1:I>A?1:0});for(const T of k)T instanceof Nl&&this.internalContainerRefs.push(T),this.layers.push(T)}this.layersByDepth=m,g=Object.keys(h).map(C=>parseInt(C,10)).sort(Uw);const y=this.inputs.slice(),b=[];for(const C of g)for(const k of h[C]){const T=k.outboundLayer;if(T!=null){for(const N of k.inputTensors)if(y.indexOf(N)===-1)throw new Ho(`Graph disconnected: cannot obtain value for tensor ${N} at layer "${T.name}". The following previous layers were accessed without issue: ${b}`);for(const N of k.outputTensors)y.push(N);b.push(T.name)}}this.nodesByDepth=h;const w=this.layers.map(C=>C.name);for(const C of w){const k=w.filter(T=>T===C).length;if(k!==1)throw new Ho(`The name "${C}" is used ${k} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(w))}this.outboundNodes=[],this.inboundNodes=[],new HN({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(C=>null),outputMasks:this.outputs.map(C=>null),inputShapes:this.inputs.map(C=>C.shape),outputShapes:this.outputs.map(C=>C.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new fe("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let s=0;const a=rCe(e);a&&this.parseWeights(e);for(const o of this.layers)for(const[l,u]of o.weights.entries()){const c=a?`${u.name.split("/").slice(0,-1).join("/")+"/"}${l}`:u.originalName;if(r[c]!=null)throw new fe(`Duplicate weight name: ${c}`);r[c]=u,s++}const i=[];for(const o in e){let l=o;if(r[o]==null){const u=o.split("/");l=u.slice(0,-2).concat([u[u.length-1]]).join("/")}if(r[l]!=null)i.push([r[l],e[o]]);else if(n)throw new fe(`Provided weight data has no target variable: ${o}`);delete r[l]}if(n){const o=[];for(const l in r)o.push(l);if(o.length>0)throw new fe(`${o.length} of ${s} weights are not set: ${o}`)}o4(i)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),s=["vars","layer_checkpoint_dependencies"],a=r.map(i=>i.startsWith("_")?i.slice(1):i).filter(i=>!s.includes(i)).join("/");a!==n&&(e[a]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${aJ}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=hD(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return be(()=>{e=Bn(e);const r=new bd;for(let s=0;s<this.inputs.length;++s)r.add(this.inputs[s],e[s]);return nb(this.outputs,r,n)})}computeMask(e,n){return be(()=>{e=Bn(e);let r;return n==null?r=Sh(null,e.length):r=Bn(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=u2(e);if(n.length!==this.inputLayers.length)throw new fe(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let o=0;o<n.length;o++){const l=this.inputLayers[o],u=n[o],c=l.name+"_0_0";r[c]=u}const s=Object.keys(this.nodesByDepth).map(o=>parseInt(o,10)).sort(Uw);if(s.length>1)for(const o of s){const l=this.nodesByDepth[o];for(const u of l){const c=u.outboundLayer;if(this.inputLayers.map(y=>y.id).indexOf(c.id)!==-1)continue;const d=[];for(let y=0;y<u.inboundLayers.length;y++){const b=u.inboundLayers[y],w=u.nodeIndices[y],C=u.tensorIndices[y],k=`${b.name}_${w}_${C}`,T=r[k];d.push(T)}const h=c.computeOutputShape(ri(d)),m=u2(h),g=c.inboundNodes.indexOf(u);for(let y=0;y<m.length;y++){const b=`${c.name}_${g}_${y}`;r[b]=m[y]}}}const a=[],i=[];for(let o=0;o<this.outputLayers.length;o++){const l=this.outputLayers[o],u=this.outputLayersNodeIndices[o],c=this.outputLayersTensorIndices[o],d=`${l.name}_${u}_${c}`;i.push(d)}for(let o=0;o<i.length;o++){const l=i[o];uu(l in r),a.push(r[l])}return ri(a)}runInternalGraph(e,n){n==null&&(n=Sh(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const u=this.inputs[l],c=e[l],d=n[l];r[u.id]=[c,d]}const s=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(Uw);for(const l of s){const u=this.nodesByDepth[l];for(const c of u){const d=c.outboundLayer,h=c.inputTensors,m=c.outputTensors,g=new Array;for(const y of h)y.id in r&&g.push(r[y.id]);if(g.length===h.length){let y={},b,w,C,k;if(c.callArgs!=null&&(y=c.callArgs),g.length===1){const[T,N]=g[0];y.mask==null&&(y.mask=N),C=Bn(d.call(T,y)),k=Bn(d.computeMask(T,N)),b=[T],w=[N]}else b=g.map(T=>T[0]),w=g.map(T=>T[1]),y.mask==null&&(y.mask=w),C=Bn(d.call(b,y)),k=Bn(d.computeMask(b,w));if(d.activityRegularizer)throw new Zt("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let T=0;T<m.length;++T){const N=m[T],I=C[T],A=k[T];r[N.id]=[I,A]}}}}const a=[],i=[],o=[];for(const l of this.outputs){uu(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[u,c]=r[l.id];o.push(u.shape),a.push(u),i.push(c)}return[a,i,o]}buildNodeConversionMap(e){const n={};let r;for(const s of this.layers){r=s instanceof Nl?1:0;for(let a=0;a<s.inboundNodes.length;a++){const i=Nl.nodeKey(s,a);this.containerNodes.has(i)&&(n[i]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new fe("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new fe(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new fe(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return be(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const s=Nl.nodeKey(n,r);this.containerNodes.has(s)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const i of this.layers){const o=i.getClassName(),l=i.getConfig(),u=[];for(let d=0;d<i.inboundNodes.length;d++){const h=i.inboundNodes[d],m=Nl.nodeKey(i,d);let g={};if(this.containerNodes.has(m)){if(h.callArgs)try{JSON.stringify(h.callArgs),g=h.callArgs}catch{console.warn(`Layer ${i.name} was passed non-serializable keyword arguments: ${h.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),g={}}if(h.inboundLayers.length>0){const y=[];for(let b=0;b<h.inboundLayers.length;b++){const w=h.inboundLayers[b],C=h.nodeIndices[b],k=h.tensorIndices[b],T=Nl.nodeKey(w,C);let N=n[T];N==null&&(N=0),y.push([w.name,N,k,g])}u.push(y)}}}const c={};c.name=i.name,c.className=o,c.config=l,c.inboundNodes=u,r.push(c)}e.layers=r;const s=[];for(let i=0;i<this.inputLayers.length;i++){const o=this.inputLayers[i],l=this.inputLayersNodeIndices[i],u=Nl.nodeKey(o,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const d=this.inputLayersTensorIndices[i];s.push([o.name,c,d])}e.inputLayers=s;const a=[];for(let i=0;i<this.outputLayers.length;i++){const o=this.outputLayers[i],l=this.outputLayersNodeIndices[i],u=Nl.nodeKey(o,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const d=this.outputLayersTensorIndices[i];a.push([o.name,c,d])}return e.outputLayers=a,e}static fromConfig(e,n,r={},s=!1){const a={},i={};function o(b,w){b.name in i?i[b.name].push(w):i[b.name]=[w]}function l(b,w){const C=[];let k;for(const T of w){const N=T[0],I=T[1],A=T[2];if(k=T[3]==null?{}:T[3],!(N in a)){o(b,w);return}const D=a[N];if(D.inboundNodes.length<=I){o(b,w);return}const P=D.inboundNodes[I];C.push(P.outputTensors[A])}C.length>0&&b.apply(ri(C),k)}function u(b){const w=b.name,C=xc(b,n.customObjects!=null?n.customObjects:{});C.setFastWeightInitDuringBuild(s),a[w]=C,b.inboundNodes.forEach(T=>{if(!(T instanceof Array))throw new fe(`Corrupted configuration, expected array for nodeData: ${T}`);o(C,T)})}const c=n.name,d=n.layers;for(const b of d)u(b);for(;!BSe(i);)for(const b of d){const w=a[b.name];if(w.name in i){const C=i[w.name];delete i[w.name];for(const k of C)l(w,k)}}const h=[],m=[],g=n.inputLayers;for(const b of g){const w=b[0],C=b[1],k=b[2];uu(w in a);const N=a[w].inboundNodes[C].outputTensors;h.push(N[k])}const y=n.outputLayers;for(const b of y){const w=b[0],C=b[1],k=b[2];uu(w in a);const N=a[w].inboundNodes[C].outputTensors;m.push(N[k])}return new e({inputs:h,outputs:m,name:c})}get stateful(){if(this._stateful)throw new fe("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){be(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function sCe(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(s=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const s=[];return e.forEach(a=>{a in t?s.push(t[a]):s.push(null)}),s}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function iJ(t,e){return sCe(t,e,"classWeight")}async function oJ(t,e,n,r){if(n!=null){const s=be(()=>{if(t.shape.length===1)return bc(t);if(t.shape.length===2){if(t.shape[1]>1)return bh(t,1);if(t.shape[1]===1)return ce(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),a=Array.from(await s.data());Rt(s);const i=[];return a.forEach(o=>{if(n[o]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${o} exists in the data but not in classWeight`);i.push(n[o])}),fs(i,"float32")}else return null}function aCe(t,e){return ie(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const iCe=32;function lJ(t,e){let n,r;const s=e;n=s.xs,r=s.ys,X(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const a=sV("input",t.inputNames,n),i=sV("output",t.outputNames,r),o=a[0].shape[0];X(a.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${a.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),X(i.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<a.length;l++)X(a[l].shape[0]===o,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${a[l].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);for(let l=0;l<i.length;l++)X(i[l].shape[0]===o,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${i[l].shape[0]}; expected  ${o} based on input ${t.inputNames[0]}.`);return{xs:a,ys:i}}function sV(t,e,n){if(n instanceof Pn)return[n];if(Array.isArray(n))return X(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const s of e){if(n[s]==null)throw new fe(`The feature data generated by the dataset lacks the required ${t} key '${s}'.`);r.push(n[s])}return r}}function oCe(t){if(t.length===3)throw new Zt("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function lCe(t,e,n){const r=n.batchesPerEpoch!=null;if(X(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),X(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),X(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),X(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),X(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const s=n.validationData!=null;let a,i;if(s)if(aV(n.validationData))X(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const b=oCe(n.validationData);a=b.xs,i=b.ys}const o=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let u;s?u=l.slice().concat(l.map(b=>"val_"+b)):u=l.slice();const c=QZ(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:h,history:m}=ZZ(c,d,n.epochs,null,null,uCe(e,n),null,s,u);h.setModel(t),t.history=m,await h.onTrainBegin(),t.stopTraining_=!1;let g=n.initialEpoch==null?0:n.initialEpoch,y=await e.iterator();for(;g<n.epochs;){const b={};await h.onEpochBegin(g);let w=0,C=0;for(r||(y=await e.iterator());!r||w<n.batchesPerEpoch;){const k=await y.next();if(r&&k.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${w} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(k.value!=null){const{xs:T,ys:N}=lJ(t,k.value),I={};I.batch=C,I.size=T[0].shape[0],await h.onBatchBegin(C,I);const A=[];if(n.classWeight!=null){const R=iJ(n.classWeight,t.outputNames);for(let O=0;O<R.length;++O)A.push(await oJ(N[O],null,R[O]))}const D=T.concat(N).concat(A),P=o(D);Rt(D);for(let R=0;R<l.length;++R){const O=l[R],F=P[R];I[O]=F,js(F)}await h.onBatchEnd(C,I),YZ(I),C++,w++}if(r?w>=n.batchesPerEpoch:k.done){if(s){let T;aV(n.validationData)?T=Bn(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):T=Bn(t.evaluate(a,i,{batchSize:n.validationBatchSize==null?iCe:n.validationBatchSize,verbose:0}));for(let N=0;N<t.metricsNames.length;++N)b[`val_${t.metricsNames[N]}`]=T[N]}break}if(t.stopTraining_)break}if(await h.onEpochEnd(g,b),g++,t.stopTraining_)break}return await h.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function uCe(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function aV(t){return typeof t.iterator=="function"}function cCe(t){return typeof t.next=="function"}async function dCe(t,e,n){n=n||{};const r=n.batches!=null,s=t.testFunction;let a=[];if(n.verbose>0)throw new Zt("Verbose mode is not implemented yet.");X(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const i=cCe(e)?e:await e.iterator();let o=0,l=0;for(;!r||l<n.batches;){const u=await i.next();if(a=be(()=>{if(u.value){const{xs:c,ys:d}=lJ(t,u.value),h=c.concat(d),m=be(()=>s(h));if(Rt(h),l===0)for(let y=0;y<m.length;++y)a.push(It(0));const g=h[0].shape[0];for(let y=0;y<m.length;++y){const b=m[y],w=a[y];a[y]=be(()=>je(a[y],ie(g,b))),l>0&&Rt(w)}Rt(m),o+=g,++l}return a}),u.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<a.length;++u){const c=a[u];a[u]=dt(a[u],o),Rt(c)}return ri(a)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function WE(t){X(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function L0(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>rh(r,e,n-e)):rh(t,e,n-e)}function pD(t,e){return be(()=>t==null?null:Array.isArray(t)?t.map(n=>pD(n,e)):MZ(t,e.dtype==="int32"?e:nt(e,"int32")))}function GE(t,e){const n=[];let r=0,s=null;for(;r<t;)s=r+e,s>=t&&(s=t),n.push([r,s]),r=s;return n}function uJ(t){const e=[];t instanceof Pn&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(Zv(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Sl(t,e){if(t==null)return;const n=[];if(e instanceof Pn)n.push(e.id);else if(Array.isArray(e))e.forEach(s=>n.push(s.id));else if(e!=null)for(const s in e){const a=e[s];n.push(a.id)}const r=[];if(t instanceof Pn)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(s=>{n.indexOf(s.id)===-1&&r.push(s)});else if(t!=null)for(const s in t){const a=t[s];n.indexOf(a.id)===-1&&r.push(a)}r.forEach(s=>{s.isDisposed||s.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function fCe(t){return t instanceof Pn}function mD(t){return Array.isArray(t)}function iV(t){return!fCe(t)&&!mD(t)}function oV(t,e,n,r=!0,s=""){if(e==null||e.length===0){if(t!=null){let i=!1;if(mD(t)&&t.length>0)i=!0;else if(iV(t)){for(const o in t)if(t.hasOwnProperty(o)){i=!0;break}}else i=!0;if(i)throw new fe(`Error when checking model ${s} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(i=>null);let a;if(iV(t)){t=t,a=[];for(const i of e){if(t[i]==null)throw new fe(`No data provided for "${i}". Need data for each key in: ${e}`);a.push(t[i])}}else if(mD(t)){if(t=t,t.length!==e.length)throw new fe(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);a=t}else{if(t=t,e.length>1)throw new fe(`The model ${s} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);a=[t]}if(a=uJ(a),n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const o=a[i];if(o.shape.length!==n[i].length)throw new fe(`Error when checking ${s}: expected ${e[i]} to have ${n[i].length} dimension(s). but got array with shape ${o.shape}`);for(let l=0;l<n[i].length;++l){if(l===0&&!r)continue;const u=o.shape[l],c=n[i][l];if(c!=null&&c>=0&&u!==c)throw new fe(`${s} expected a batch of elements where each example has shape [${n[i].slice(1,n[i].length)}] (i.e.,tensor shape [*,${n[i].slice(1,n[i].length)}]) but the ${s} received an input with ${o.shape[0]} examples, each with shape [${o.shape.slice(1,o.shape.length)}] (tensor shape [${o.shape}])`)}}return a}function hCe(t,e,n){const r=Cd(t.map(a=>a.shape[0]));r.sort();const s=Cd(e.map(a=>a.shape[0]));if(s.sort(),r.length>1)throw new fe(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(a=>a.shape))}`);if(s.length>1)throw new fe(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(a=>a.shape))}`);if(r.length>0&&s.length>0&&!Xt(r,s))throw new fe(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${s[0]} target sample(s).`)}function pCe(t,e,n){const r=[qN,KN,Lb];for(let s=0;s<t.length;++s){const a=t[s],i=e[s],o=n[s];if(i!=null){if(i===Lb&&a.shape[a.shape.length-1]===1)throw new fe(`You are passing a target array of shape ${a.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(i)!==-1){const l=a.shape.slice(1),u=o.slice(1);for(let c=0;c<l.length;++c){const d=l[c],h=u[c];if(h!=null&&d!==h)throw new fe(`A target Tensor with shape ${a.shape} was passed for an output of shape ${o}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function lV(t,e,n,r=!0,s=""){let a;if(Array.isArray(t)){if(t.length!==e.length)throw new fe(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);a=t}else{if(e.length>1)throw new fe(`The model expects ${e.length} ${s} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);a=[t]}if(n!=null)for(let i=0;i<e.length;++i){if(n[i]==null)continue;const o=a[i];if(o.shape.length!==n[i].length)throw new fe(`Error when checking ${s}: expected ${e[i]} to have ${n[i].length} dimension(s), but got array with shape ${JSON.stringify(o.shape)}`);for(let l=0;l<n[i].length;++l){if(l===0&&!r)continue;const u=o.shape[l],c=n[i][l];if(c!=null&&c!==u)throw new fe(`Error when checking ${s}: expected ${e[i]} to have shape ${JSON.stringify(n[i])} but got array with shape ${JSON.stringify(o.shape)}.`)}}}function mCe(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const s of e){let a=n.hasOwnProperty(s)?n[s]:[];Array.isArray(a)||(a=[a]),r.push(a)}return r}}const gCe="layers-model";class pm extends Nl{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new fe("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Z2e(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=Q2e(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Kd))throw new fe("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const i in e.loss)if(this.outputNames.indexOf(i)===-1)throw new fe(`Unknown entry in loss dictionary: "${i}". Only expected the following keys: ${this.outputNames}`);for(const i of this.outputNames)e.loss[i]==null&&console.warn(`Output "${i}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${i} during training`),n.push(VE(e.loss[i]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new fe(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(o=>VE(o))}else{const i=VE(e.loss);this.outputs.forEach(o=>{n.push(i)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const o=this.internalOutputShapes[i],l=this.outputNames[i];this.feedOutputNames.push(l),this.feedOutputShapes.push(o),this.feedLossFns.push(this.lossFunctions[i])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],nh("loss",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const o=this.lossFunctions[i];this.outputs.length>1&&(this.metricsTensors.push([o,i]),this.metricsNames.push(this.outputNames[i]+"_loss"))}});const s=mCe(e.metrics,this.outputNames),a=(i,o,l)=>{this.outputNames.length>1&&(o=this.outputNames[i]+"_"+o),this.metricsNames.push(o),this.metricsTensors.push([l,i])};nh("metric",()=>{for(let i=0;i<this.outputs.length;++i){if(r.indexOf(i)!==-1)continue;const o=s[i];(u=>{const c="";let d,h,m;for(const g of u){if(typeof g=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(g)!==-1){const b=this.internalOutputShapes[i];b[b.length-1]===1||this.lossFunctions[i]===KN?["accuracy","acc"].indexOf(g)!==-1?h=eJ:["crossentropy","ce"].indexOf(g)!==-1&&(h=B2e):this.lossFunctions[i]===p2?["accuracy","acc"].indexOf(g)!==-1?h=U2e:["crossentropy","ce"].indexOf(g)!==-1&&(h=rJ):["accuracy","acc"].indexOf(g)!==-1?h=tJ:["crossentropy","ce"].indexOf(g)!==-1&&(h=nJ);let w;["accuracy","acc"].indexOf(g)!==-1?w="acc":["crossentropy","ce"].indexOf(g)!==-1&&(w="ce"),m=h,d=c+w}else m=Y2e(g),d=c+Gw(g);let y;nh(d,()=>{y=m}),a(i,d,y)}})(o)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const s=r.batchSize==null?32:r.batchSize;WE(s);const i=this.standardizeUserDataXY(e,n,!0,s);try{const o=i[0].concat(i[1]);this.makeTestFunction();const l=this.testFunction,u=this.testLoop(l,o,s,r.verbose,r.steps);return ri(u)}finally{Sl(i[0],e),Sl(i[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),dCe(this,e,n)}checkNumSamples(e,n,r,s="steps"){let a;if(r!=null){if(a=null,n!=null)throw new fe(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?a=e[0].shape[0]:a=e.shape[0];else throw new fe(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return a}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new fe("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),s=r?n:[n],a=this.retrieveSymbolicTensors(s),i=new bd;if(e instanceof Pn&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new fe(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)i.add(this.inputs[l],e[l])}else for(const l of this.inputs){const u=e[l.name];if(u==null)throw new fe(`No value is provided for the model's input ${l.name}`);i.add(l,u)}const o=nb(a,i);return r?o:o[0]}retrieveSymbolicTensors(e){const n=Sh(null,e.length);let r=e.length;for(const s of this.layers){const a=Array.isArray(s.output)?s.output:[s.output],i=a.map(o=>o.name);for(let o=0;o<e.length;++o){const l=i.indexOf(e[o]);if(l!==-1&&(n[o]=a[l],r--),r===0)break}if(r===0)break}if(r>0){const s=[];throw n.forEach((a,i)=>{a==null&&s.push(e[i])}),new fe(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return n}predictLoop(e,n=32,r=!1){return be(()=>{const s=this.checkNumSamples(e);if(r)throw new Zt("Verbose predictLoop() is not implemented yet.");const a=GE(s,n),i=this.outputs.map(o=>[]);for(let o=0;o<a.length;++o)be(()=>{const u=a[o][0],c=a[o][1],d=L0(e,u,c),h=[];if(Array.isArray(d))for(let g=0;g<d.length;++g)h.push({key:this.inputs[g],value:d[g]});else h.push({key:this.inputs[0],value:d});const m=new bd(h);return nb(this.outputs,m)}).forEach((u,c)=>i[c].push(u));return ri(i.map(o=>Rr(o,0)))})}predict(e,n={}){const r=uJ(e);lV(r,this.inputNames,this.feedInputShapes,!1);try{const s=n.batchSize==null?32:n.batchSize;return WE(s),this.predictLoop(r,s)}finally{Sl(r,e)}}predictOnBatch(e){lV(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,s){if(this.optimizer_==null)throw new Ho("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const a=[];for(let i=0;i<this.feedOutputShapes.length;++i){const o=this.feedOutputShapes[i];this.feedLossFns[i]===p2?a.push(o.slice(0,o.length-1).concat([1])):a.push(o)}if(e=oV(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=oV(n,this.feedOutputNames,a,!1,"target"),hCe(e,n),pCe(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&e[0].shape[0]%s!==0)throw new fe(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,s,a=!0,i){const[o,l]=this.standardizeUserDataXY(e,n,a,i);if(r!=null)throw new Error("sample weight is not supported yet.");let u=null;if(s!=null){const c=iJ(s,this.outputNames);u=[];for(let d=0;d<c.length;++d)u.push(await oJ(l[d],null,c[d]))}return[o,l,u]}testLoop(e,n,r,s=0,a){return be(()=>{const i=this.checkNumSamples(n,r,a,"steps"),o=[];if(s>0)throw new Zt("Verbose mode is not implemented yet.");if(a!=null)throw new Zt("steps mode in testLoop() is not implemented yet");{const l=GE(i,r),u=fs(Bl(0,i));for(let c=0;c<l.length;++c){const d=l[c][0],h=l[c][1],m=rh(u,d,h-d),g=pD(n,m),y=e(g);if(c===0)for(let b=0;b<y.length;++b)o.push(It(0));for(let b=0;b<y.length;++b){const w=y[b];o[b]=je(o[b],ie(h-d,w))}}for(let c=0;c<o.length;++c)o[c]=dt(o[c],i)}return o})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const s=e[r];let a=s;if(HU(e,s)>1){const i=HU(e.slice(0,r),s);a+=`_${i}`}n.push(a)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),i=[],o=()=>{const d=[];for(let y=0;y<this.inputs.length;++y)d.push({key:this.inputs[y],value:r[y]});const h=new bd(d),m=nb(this.outputs,h,{training:!0});let g;for(let y=0;y<this.lossFunctions.length;++y){const b=this.lossFunctions[y];let w=b(s[y],m[y]);a[y]!=null&&(w=aCe(w,a[y]));const C=Lr(w);n.push(C),y===0?g=w:g=je(g,w)}for(let y=0;y<this.metricsTensors.length;++y){let b;if(this.outputs.length>1&&y<this.outputs.length)b=n[y];else{const w=this.metricsTensors[y][0],C=this.metricsTensors[y][1];b=Lr(w(s[C],m[C]))}js(b),i.push(b)}return g=Lr(g),this.calculateLosses().forEach(y=>{g=je(g,y)}),g},l=this.collectedTrainableWeights.map(d=>d.read());return[this.optimizer_.minimize(o,!0,l)].concat(i)}}makeTestFunction(){this.testFunction=e=>be(()=>{const n=[];let r;const s=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let u=0;u<this.inputs.length;++u)i.push({key:this.inputs[u],value:s[u]});const o=new bd(i),l=nb(this.outputs,o);for(let u=0;u<this.lossFunctions.length;++u){const c=this.lossFunctions[u],d=Lr(c(a[u],l[u]));u===0?r=d:r=je(r,d),n.push(r)}for(let u=0;u<this.metricsTensors.length;++u){const c=this.metricsTensors[u][0],d=this.metricsTensors[u][1],h=Lr(c(a[d],l[d]));n.push(h)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let s,a,i,o,l,u,c,d,h;try{const m=r.batchSize==null?32:r.batchSize;WE(m);const y=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,m);s=y[0],a=y[1],h=y[2];let b=!1,w;if(r.validationData!=null&&r.validationData.length>0){if(b=!0,r.validationData.length===2)l=r.validationData[0],u=r.validationData[1];else throw r.validationData.length===3?new Zt("validationData including sample weights is not supported yet."):new fe(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const R=await this.standardizeUserData(l,u,null,null,!0,m);c=R[0],d=R[1],w=c.concat(d)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){b=!0;const P=Math.floor(s[0].shape[0]*(1-r.validationSplit)),R=s[0].shape[0];c=L0(s,P,R),i=s,s=L0(s,0,P),d=L0(a,P,R),o=a,a=L0(a,0,P),w=c.concat(d)}else r.validationSteps!=null&&(b=!0);const C=s.concat(a).concat(h);this.checkTrainableWeightsConsistency();const k=this.makeTrainFunction(),T=this.getDedupedMetricsNames();let N,I;b?(this.makeTestFunction(),N=this.testFunction,I=T.slice().concat(T.map(P=>"val_"+P))):(N=null,w=[],I=T.slice());const A=QZ(r.callbacks,r.yieldEvery);return await this.fitLoop(k,C,T,m,r.epochs,r.verbose,A,N,w,r.shuffle,I,r.initialEpoch,null,null)}finally{this.isTraining=!1,Sl(s,e),Sl(a,n),Sl(i,e),Sl(o,n),Sl(c,l),Sl(d,u),h!=null&&Rt(h)}}async fitLoop(e,n,r,s,a,i,o,l,u,c,d,h,m,g){s==null&&(s=32),a==null&&(a=1),c==null&&(c=!0),h==null&&(h=0);let y=!1;if(l!=null&&u!=null&&(y=!0),g!=null&&(y=!0,m==null))throw new fe("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const b=this.checkNumSamples(n,s,m,"steps_per_epoch");let w;b!=null&&(w=Bl(0,b)),i==null&&(i=1);const{callbackList:C,history:k}=ZZ(o,i,a,h,b,m,s,y,d);C.setModel(this),this.history=k,await C.onTrainBegin(),this.stopTraining_=!1;for(let T=h;T<a;++T){await C.onEpochBegin(T);const N={};if(m!=null)throw new Zt("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new Zt("batch shuffling is not implemneted yet");c&&cpe(w);const I=fs(w),A=GE(b,s);for(let D=0;D<A.length;++D){const P={};if(await C.onBatchBegin(D,P),be(()=>{const R=A[D][0],O=A[D][1],F=rh(I,R,O-R);P.batch=D,P.size=O-R;const z=pD(n,F),V=e(z);for(let W=0;W<r.length;++W){const j=r[W],q=V[W];P[j]=q,js(q)}if(D===A.length-1&&y){const W=this.testLoop(l,u,s);for(let j=0;j<r.length;++j){const q=r[j],Y=W[j];js(Y),N["val_"+q]=Y}}}),await C.onBatchEnd(D,P),YZ(P),this.stopTraining_)break}I.dispose()}if(await C.onEpochEnd(T,N),this.stopTraining_)break}return await C.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return lCe(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),s=r[0],a=r[1],o=this.makeTrainFunction()(s.concat(a)),l=[];for(const u of o){const c=await u.data();l.push(c[0])}return Rt(o),Sl(r[0],e),Sl(r[1],n),ri(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,s=r?this.trainableWeights:this.weights,a=this.getWeights(r);for(let i=0;i<s.length;++i)r&&!s[i].trainable||n.push({name:s[i].originalName,tensor:a[i]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=vU().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-vU().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=oc(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>oc(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const s of n)if(typeof r[s]=="string")e[s]=oc(r[s]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[oc(Gw(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>oc(Gw(e)));{const e={};for(const n in this.metrics)e[n]=oc(Gw(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=fD(e.optimizer_config),r=xc(n);let s;if(typeof e.loss=="string")s=Bf(e.loss);else if(Array.isArray(e.loss))s=e.loss.map(i=>Bf(i));else if(e.loss!=null){s={};for(const i in e.loss)s[i]=Bf(e.loss[i])}let a;if(Array.isArray(e.metrics))a=e.metrics.map(i=>Bf(i));else if(e.metrics!=null){a={};for(const i in e.metrics)a[i]=Bf(e.metrics[i])}this.compile({loss:s,metrics:a,optimizer:r})}async save(e,n){if(typeof e=="string"){const u=wY(e);if(u.length===0)throw new fe(`Cannot find any save handlers for URL '${e}'`);if(u.length>1)throw new fe(`Found more than one (${u.length}) save handlers for URL '${e}'`);e=u[0]}if(e.save==null)throw new fe("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await X3(this.getNamedWeights(n)),o={modelTopology:this.toJSON(null,!1),format:gCe,generatedBy:`TensorFlow.js tfjs-layers v${aJ}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){o.trainingConfig=this.getTrainingConfig();const u="optimizer",{data:c,specs:d}=await X3(await this.optimizer.getWeights(),u);r.specs.push(...d),r.data=bY([r.data,c])}return this.userDefinedMetadata!=null&&(rV(this.userDefinedMetadata,this.name,!0),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=r.data,o.weightSpecs=r.specs,e.save(o)}setUserDefinedMetadata(e){rV(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}pm.className="Model";Ge(pm);class cJ extends pm{}cJ.className="Functional";Ge(cJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Fb extends pm{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:WN("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new fe(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof Fb||e instanceof pm;let r;if(n){if(r=e,r.outputs.length!==1)throw new fe("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new fe("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new fe("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const s=b2e({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(s)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new fe(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new fe("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=GZ(this.outputs[0])}this.inboundNodes=[],new HN({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Sh(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{const s=e.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(Tn(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new pm({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new Ho("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new Ho("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new Ho("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new Ho("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},s=!1){let a,i={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new fe("Legacy serialization format not supported yet.");a=n}else X(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),a=n.layers,delete n.layers,i=n;const o=new e(i);if(!(o instanceof Fb))throw new Zt(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(const l of a){const c=xc(l,void 0,s);s&&c.setFastWeightInitDuringBuild(!0),o.add(c)}return o}set stopTraining(e){if(this.model==null)throw new fe("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new fe("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}Fb.className="Sequential";Ge(Fb);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let ya=class extends my{getConfig(){return{}}};class dJ extends ya{apply(e,n=1){return n2e(e,n)}}dJ.className="elu";Ge(dJ);class fJ extends ya{apply(e){return Tj(e)}}fJ.className="selu";Ge(fJ);class hJ extends ya{apply(e){return Lu(e)}}hJ.className="relu";Ge(hJ);class pJ extends ya{apply(e){return be(()=>Dd(6,Lu(e)))}}pJ.className="relu6";Ge(pJ);let mJ=class extends ya{apply(e){return e}};mJ.className="linear";Ge(mJ);class gJ extends ya{apply(e){return io(e)}}gJ.className="sigmoid";Ge(gJ);class yJ extends ya{apply(e){return s2e(e)}}yJ.className="hardSigmoid";Ge(yJ);class bJ extends ya{apply(e){return fy(e)}}bJ.className="softplus";Ge(bJ);class xJ extends ya{apply(e){return r2e(e)}}xJ.className="softsign";Ge(xJ);class vJ extends ya{apply(e){return vh(e)}}vJ.className="tanh";Ge(vJ);let d4=class extends ya{apply(e,n=-1){return hN(e,n)}};d4.className="softmax";Ge(d4);class wJ extends ya{apply(e,n=-1){return gj(e,n)}}wJ.className="logSoftmax";Ge(wJ);class SJ extends ya{apply(e){return be(()=>be(()=>{const n=Math.sqrt(2),r=ie(.5,je(1,hj(dt(e,n))));return ie(e,r)}))}}SJ.className="gelu";Ge(SJ);class CJ extends ya{apply(e){return be(()=>ie(.5,ie(e,je(1,vh(ie(ea(dt(2,Math.PI)),je(e,ie(.044715,Ic(e,3)))))))))}}CJ.className="gelu_new";Ge(CJ);class kJ extends ya{apply(e){return be(()=>ie(e,vh(fy(e))))}}kJ.className="mish";Ge(kJ);class NJ extends ya{apply(e,n=1){return be(()=>ie(io(ie(e,n)),e))}}NJ.className="swish";Ge(NJ);function Md(t){return t.getClassName()}function HE(t,e={}){return Qv(t,Vo.getMap().classNameMap,e,"activation")}function jd(t){if(t==null){const e={};return e.className="linear",e.config={},HE(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},HE(e)}else return t instanceof ya?t:HE(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function yCe(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class TJ extends my{}class $J extends TJ{constructor(e){super(),yCe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return be(()=>{let n=es([1]);return this.hasL1&&(n=je(n,wt(ie(this.l1,xs(e))))),this.hasL2&&(n=je(n,wt(ie(this.l2,Jv(e))))),ce(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}$J.className="L1L2";Ge($J);const uV={l1l2:"L1L2"};function ir(t){return Qj(t)}function cV(t,e={}){return Qv(t,Vo.getMap().classNameMap,e,"regularizer")}function kr(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in uV?uV[t]:t,config:{}};return cV(n)}else return t instanceof TJ?t:cV(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class IJ extends nn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=Bt(e);let r=Lu(e);return this.maxValue!=null&&(r=ui(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}IJ.className="ReLU";Ge(IJ);class EJ extends nn{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Bt(e);return nN(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}EJ.className="LeakyReLU";Ge(EJ);class AJ extends nn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Cr(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=kr(e.alphaRegularizer),this.alphaConstraint=Ns(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new fe(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=Tn(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const s of this.sharedAxes)n[s-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let s=1;s<e.length;++s)r[s]=e[s];this.inputSpec=[new Ss({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=Bt(e),uN(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Er(this.alphaInitializer),alphaRegularizer:ir(this.alphaRegularizer),alphaConstraint:ks(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}AJ.className="PReLU";Ge(AJ);let RJ=class extends nn{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new Zt(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Bt(e);return Wv(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};RJ.className="ELU";Ge(RJ);class OJ extends nn{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=Bt(e);return ie(r,nt(Mi(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}OJ.className="ThresholdedReLU";Ge(OJ);class _J extends nn{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new d4().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return be(()=>{let r=Bt(e);const s=n.mask;if(s!=null){const a=ie(ft(Ti(r.shape),nt(s,r.dtype)),It(-1e9));r=je(r,a)}return this.axis instanceof Array?this.axis.length>1?La(ft(r,sN(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}_J.className="Softmax";Ge(_J);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mm(t,e,n){if(typeof t=="number")return Sh(t,e);if(t.length!==e)throw new fe(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const s=t[r];if(!ZSe(s))throw new fe(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${s}`)}return t}function Pl(t,e,n,r,s=1){if(t==null)return t;const a=e+(e-1)*(s-1);let i;return n==="same"?i=t:i=t-a+1,Math.floor((i+r-1)/r)}function cu(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+Pd([n-e,0]);else if(r==="same")t=t*e;else throw new fe(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function f4(t,e){return be(()=>(rs(e),e==="channelsFirst"?bn(t,[0,2,3,1]):t))}function DJ(t,e){return be(()=>(rs(e),e==="channelsFirst"?bn(t,[0,2,3,4,1]):t))}function bCe(t,e,n,r=1,s="valid",a,i=1){return be(()=>{if(a==null&&(a=Ul()),rs(a),t.shape.length!==3)throw new fe(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new fe(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new fe(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(a==="channelsFirst"&&(t=bn(t,[0,2,1])),s==="causal")throw new Zt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=lj(t,e,r,s==="same"?"same":"valid","NWC",i);return n!=null&&(o=Kl(o,n)),o})}function dV(t,e,n,r=[1,1],s="valid",a,i,o=null){return be(()=>{if(a==null&&(a=Ul()),rs(a),t.rank!==3&&t.rank!==4)throw new fe(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new fe(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=f4(t,a);if(s==="causal")throw new Zt("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=$Q({x:l,filter:e,strides:r,pad:s==="same"?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:o}),a==="channelsFirst"&&(l=bn(l,[0,3,1,2])),l})}function xCe(t,e,n,r=[1,1,1],s="valid",a,i){return be(()=>{if(a==null&&(a=Ul()),rs(a),t.rank!==4&&t.rank!==5)throw new fe(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new fe(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let o=DJ(t,a);if(s==="causal")throw new Zt("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=KY(o,e,r,s==="same"?"same":"valid","NDHWC",i),n!=null&&(o=Kl(o,n)),a==="channelsFirst"&&(o=bn(o,[0,4,1,2,3])),o})}class XN extends nn{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",XN.verifyArgs(n),this.rank=e,Ls(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new Zt(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=mm(n.kernelSize,e,"kernelSize"),this.strides=mm(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,yo(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,rs(this.dataFormat),this.activation=jd(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=Cr(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Ns(n.biasConstraint),this.biasRegularizer=kr(n.biasRegularizer),this.activityRegularizer=kr(n.activityRegularizer),this.dilationRate=mm(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new fe(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new fe(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new fe(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(uu("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!Zj(e.kernelSize,"number",1,3))throw new fe(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Md(this.activation),useBias:this.useBias,biasInitializer:Er(this.biasInitializer),biasRegularizer:ir(this.biasRegularizer),activityRegularizer:ir(this.activityRegularizer),biasConstraint:ks(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class gy extends XN{constructor(e,n){super(e,n),this.kernel=null,gy.verifyArgs(n),this.filters=n.filters,Ls(this.filters,"filters"),this.kernelInitializer=Cr(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Ns(n.kernelConstraint),this.kernelRegularizer=kr(n.kernelRegularizer)}build(e){e=Tn(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new fe(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],s=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return be(()=>{e=Bt(e);let r;const s=this.bias==null?null:this.bias.read(),a=AZ(this.activation.getClassName());if(a!=null&&this.rank===2)r=dV(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate,a);else{if(this.rank===1)r=bCe(e,this.kernel.read(),s,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=dV(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=xCe(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new Zt("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=Tn(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let a=0;a<r.length;++a){const i=Pl(r[a],this.kernelSize[a],this.padding,this.strides[a],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[a]);n.push(i)}let s=[e[0]];return this.dataFormat==="channelsLast"?(s=s.concat(n),s.push(this.filters)):(s.push(this.filters),s=s.concat(n)),s}getConfig(){const e={filters:this.filters,kernelInitializer:Er(this.kernelInitializer),kernelRegularizer:ir(this.kernelRegularizer),kernelConstraint:ks(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new fe(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class r1 extends gy{constructor(e){super(2,e),r1.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!Zj(e.kernelSize,"number",1,2))throw new fe(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}r1.className="Conv2D";Ge(r1);class s1 extends gy{constructor(e){super(3,e),s1.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new fe(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}s1.className="Conv3D";Ge(s1);class PJ extends r1{constructor(e){if(super(e),this.inputSpec=[new Ss({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new fe(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Tn(e),e.length!==4)throw new fe("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new fe("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ss({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return be(()=>{let r=Bt(e);if(r.shape.length!==4)throw new fe(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,a=s[0];let i,o;this.dataFormat==="channelsFirst"?(i=2,o=3):(i=1,o=2);const l=s[i],u=s[o],c=this.kernelSize[0],d=this.kernelSize[1],h=this.strides[0],m=this.strides[1],g=cu(l,h,c,this.padding),y=cu(u,m,d,this.padding),b=[a,g,y,this.filters];this.dataFormat!=="channelsLast"&&(r=bn(r,[0,2,3,1]));let w=cj(r,this.kernel.read(),b,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(w=bn(w,[0,3,1,2])),this.bias!=null&&(w=Kl(w,this.bias.read(),this.dataFormat)),this.activation!=null&&(w=this.activation.apply(w)),w})}computeOutputShape(e){e=Tn(e);const n=e.slice();let r,s,a;this.dataFormat==="channelsFirst"?(r=1,s=2,a=3):(r=3,s=1,a=2);const i=this.kernelSize[0],o=this.kernelSize[1],l=this.strides[0],u=this.strides[1];return n[r]=this.filters,n[s]=cu(n[s],l,i,this.padding),n[a]=cu(n[a],u,o,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}PJ.className="Conv2DTranspose";Ge(PJ);class MJ extends s1{constructor(e){if(super(e),this.inputSpec=[new Ss({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new fe(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Tn(e),e.length!==5)throw new fe("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new fe("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ss({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return be(()=>{let r=Bt(e);if(r.shape.length!==5)throw new fe(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,a=s[0];let i,o,l;this.dataFormat==="channelsFirst"?(l=2,i=3,o=4):(l=1,i=2,o=3);const u=s[l],c=s[i],d=s[o],h=this.kernelSize[0],m=this.kernelSize[1],g=this.kernelSize[2],y=this.strides[0],b=this.strides[1],w=this.strides[2],C=cu(u,y,h,this.padding),k=cu(c,b,m,this.padding),T=cu(d,w,g,this.padding),N=[a,C,k,T,this.filters];this.dataFormat!=="channelsLast"&&(r=bn(r,[0,2,3,4,1]));let I=YY(r,this.kernel.read(),N,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(I=bn(I,[0,4,1,2,3])),this.bias!==null&&(I=Kl(I,this.bias.read(),this.dataFormat)),this.activation!==null&&(I=this.activation.apply(I)),I})}computeOutputShape(e){e=Tn(e);const n=e.slice();let r,s,a,i;this.dataFormat==="channelsFirst"?(r=1,s=2,a=3,i=4):(r=4,s=1,a=2,i=3);const o=this.kernelSize[0],l=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],d=this.strides[1],h=this.strides[2];return n[r]=this.filters,n[s]=cu(n[s],c,o,this.padding),n[a]=cu(n[a],d,l,this.padding),n[i]=cu(n[i],h,u,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}MJ.className="Conv3DTranspose";Ge(MJ);class jJ extends gy{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new fe("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new fe("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new fe(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=Cr(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=kr(n.depthwiseRegularizer),this.depthwiseConstraint=Ns(n.depthwiseConstraint),this.pointwiseInitializer=Cr(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=kr(n.pointwiseRegularizer),this.pointwiseConstraint=Ns(n.pointwiseConstraint)}build(e){if(e=Tn(e),e.length<this.rank+2)throw new fe(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new fe(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],s=this.kernelSize.concat([r,this.depthMultiplier]),a=[];for(let o=0;o<this.rank;++o)a.push(1);a.push(r*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new Ss({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return be(()=>{e=Bt(e);let r;if(this.rank===1)throw new Zt("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=bn(e,[0,2,3,1])),r=$j(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Kl(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=bn(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Er(this.depthwiseInitializer),e.pointwiseInitializer=Er(this.pointwiseInitializer),e.depthwiseRegularizer=ir(this.depthwiseRegularizer),e.pointwiseRegularizer=ir(this.pointwiseRegularizer),e.depthwiseConstraint=ks(this.depthwiseConstraint),e.pointwiseConstraint=ks(this.pointwiseConstraint),e}}jJ.className="SeparableConv";class LJ extends jJ{constructor(e){super(2,e)}}LJ.className="SeparableConv2D";Ge(LJ);class YN extends gy{constructor(e){super(1,e),YN.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!Zj(e.kernelSize,"number",1,1))throw new fe(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}YN.className="Conv1D";Ge(YN);class FJ extends nn{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return be(()=>{if(e=Bt(e),this.dataFormat==="channelsLast"){const r=Ww(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Ww(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=Ww(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Ww(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}FJ.className="Cropping2D";Ge(FJ);class zJ extends nn{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,rs(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,XSe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return be(()=>{let r=Bt(e);const s=r.shape;if(this.dataFormat==="channelsFirst"){r=bn(r,[0,2,3,1]);const a=this.size[0]*s[2],i=this.size[1]*s[3],o=this.interpolation==="nearest"?ja.resizeNearestNeighbor(r,[a,i]):ja.resizeBilinear(r,[a,i]);return bn(o,[0,3,1,2])}else{const a=this.size[0]*s[1],i=this.size[1]*s[2];return this.interpolation==="nearest"?ja.resizeNearestNeighbor(r,[a,i]):ja.resizeBilinear(r,[a,i])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}zJ.className="UpSampling2D";Ge(zJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function vCe(t,e,n=[1,1],r="valid",s,a){return be(()=>{s==null&&(s=Ul()),rs(s);let i=f4(t,s);if(t.rank!==4)throw new fe(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new fe(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return i=Vv(i,e,n,r==="same"?"same":"valid","NHWC",a),s==="channelsFirst"&&(i=bn(i,[0,3,1,2])),i})}class BJ extends XN{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=Cr(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Ns(e.depthwiseConstraint),this.depthwiseRegularizer=kr(e.depthwiseRegularizer)}build(e){if(e=Tn(e),e.length<4)throw new fe(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new fe(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],s=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return be(()=>{e=Bt(e);let r=vCe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Kl(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=Tn(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=Pl(n,this.kernelSize[0],this.padding,this.strides[0]),i=Pl(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],s,a,i]:[e[0],a,i,s]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Er(this.depthwiseInitializer),e.depthwiseRegularizer=ir(this.depthwiseRegularizer),e.depthwiseConstraint=ks(this.depthwiseRegularizer),e}}BJ.className="DepthwiseConv2D";Ge(BJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function UJ(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new fe("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function s(a){return a==null||Array.isArray(a)?a:[a]}return e=s(e),n=s(n),{inputs:t,initialState:e,constants:n}}function VJ(t,e,n,r=!1,s,a,i=!1,o=!1){return be(()=>{const l=e.shape.length;if(l<3)throw new fe(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(Bl(2,l));e=bn(e,u),i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),s!=null&&(s=nt(nt(s,"bool"),"float32"),s.rank===l-1&&(s=cs(s,-1)),s=bn(s,u)),r&&(e=nl(e,0),s!=null&&(s=nl(s,0)));const c=[];let d,h=n;const m=e.shape[0],g=rl(e);let y;s!=null&&(y=rl(s));for(let w=0;w<m;++w){const C=g[w],k=be(()=>t(C,h));if(s==null)d=k[0],h=k[1];else{const T=be(()=>{const N=y[w],I=ft(ho(N),N),A=je(ie(k[0],N),ie(h[0],I)),D=h.map((P,R)=>je(ie(k[1][R],N),ie(P,I)));return{output:A,newStates:D}});d=T.output,h=T.newStates}o&&c.push(d)}let b;return o&&(b=Ai(c,1)),[d,b,h]})}class Xd extends nn{constructor(e){super(e);let n;if(e.cell==null)throw new fe("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new m4({cells:e.cell}):n=e.cell,n.stateSize==null)throw new fe("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Ss({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Bl(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){uD(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let s;if(this.returnSequences?s=[e[0],e[1],r]:s=[e[0],r],this.returnState){const a=[];for(const i of n)a.push([e[0],i]);return[s].concat(a)}else return s}computeMask(e,n){return be(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const s=this.states.map(a=>null);return[r].concat(s)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new Zt("Constants support is not implemented in RNN yet.");uD(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new Ss({shape:[n,null,...r]});const s=[e[0]].concat(e.slice(2));this.cell.build(s);let a;if(Array.isArray(this.cell.stateSize)?a=this.cell.stateSize:a=[this.cell.stateSize],this.stateSpec!=null){if(!Xt(this.stateSpec.map(i=>i.shape[i.shape.length-1]),a))throw new fe(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map(i=>new Ss({shape:[null,i]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){be(()=>{if(!this.stateful)throw new lu("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new fe("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>es([r,s])):this.states_=[es([r,this.cell.stateSize])];else if(e==null)Rt(this.states_),this.keptStates!=null&&(Rt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>es([r,s])):this.states_[0]=es([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new fe(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):Rt(this.states_);for(let s=0;s<this.states_.length;++s){const a=e[s],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,o=[r,i];if(!Xt(a.shape,o))throw new fe(`State ${s} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${a.shape}`);this.states_[s]=a}}this.states_=this.states_.map(s=>js(s.clone()))})}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const a=UJ(e,r,s,this.numConstants);e=a.inputs,r=a.initialState,s=a.constants;let i=[],o=[];if(r!=null){n.initialState=r,i=i.concat(r),this.stateSpec=[];for(const u of r)this.stateSpec.push(new Ss({shape:u.shape}));o=o.concat(this.stateSpec)}if(s!=null&&(n.constants=s,i=i.concat(s),this.numConstants=s.length),i[0]instanceof $u){const u=[e].concat(i),c=this.inputSpec.concat(o),d=this.inputSpec;this.inputSpec=c;const h=super.apply(u,n);return this.inputSpec=d,h}else return super.apply(e,n)}call(e,n){return be(()=>{const r=n==null?null:n.mask,s=n==null?null:n.training;let a=n==null?null:n.initialState;e=Bt(e),a==null&&(this.stateful?a=this.states_:a=this.getInitialState(e));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==i)throw new fe(`RNN Layer has ${i} state(s) but was passed ${a.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:s},u=VJ((g,y)=>{const b=this.cell.call([g].concat(y),o);return[b[0],b.slice(1)]},e,a,this.goBackwards,r,null,this.unroll,this.returnSequences),c=u[0],d=u[1],h=u[2];this.stateful&&this.resetStates(h,s);const m=this.returnSequences?d:c;return this.returnState?[m].concat(h):m})}getInitialState(e){return be(()=>{let n=es(e.shape);return n=wt(n,[1,2]),n=Zv(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?oD(n,[1,r]):n):this.cell.stateSize>1?[oD(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Xd.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const s=n.cell,a=xc(s,r);return new e(Object.assign(n,{cell:a}))}}Xd.className="RNN";Ge(Xd);class QN extends nn{}class h4 extends QN{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Ls(this.units,"units"),this.activation=jd(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Cr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Cr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Cr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=kr(e.kernelRegularizer),this.recurrentRegularizer=kr(e.recurrentRegularizer),this.biasRegularizer=kr(e.biasRegularizer),this.kernelConstraint=Ns(e.kernelConstraint),this.recurrentConstraint=Ns(e.recurrentConstraint),this.biasConstraint=Ns(e.biasConstraint),this.dropout=Rm([1,Pd([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Rm([1,Pd([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Tn(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return be(()=>{if(e=e,e.length!==2)throw new fe(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const s=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ld({ones:()=>ho(e),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ld({ones:()=>ho(r),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let a;const i=this.dropoutMask,o=this.recurrentDropoutMask;i!=null?a=vu(ie(e,i),this.kernel.read()):a=vu(e,this.kernel.read()),this.bias!=null&&(a=Kl(a,this.bias.read())),o!=null&&(r=ie(r,o));let l=je(a,vu(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Md(this.activation),useBias:this.useBias,kernelInitializer:Er(this.kernelInitializer),recurrentInitializer:Er(this.recurrentInitializer),biasInitializer:Er(this.biasInitializer),kernelRegularizer:ir(this.kernelRegularizer),recurrentRegularizer:ir(this.recurrentRegularizer),biasRegularizer:ir(this.biasRegularizer),activityRegularizer:ir(this.activityRegularizer),kernelConstraint:ks(this.kernelConstraint),recurrentConstraint:ks(this.recurrentConstraint),biasConstraint:ks(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}h4.className="SimpleRNNCell";Ge(h4);class WJ extends Xd{constructor(e){e.cell=new h4(e),super(e)}call(e,n){return be(()=>{this.cell.dropoutMask!=null&&(Rt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Rt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:a})})}static fromConfig(e,n){return new e(n)}}WJ.className="SimpleRNN";Ge(WJ);class p4 extends QN{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new fe("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Ls(this.units,"units"),this.activation=jd(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=jd(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Cr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Cr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Cr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=kr(e.kernelRegularizer),this.recurrentRegularizer=kr(e.recurrentRegularizer),this.biasRegularizer=kr(e.biasRegularizer),this.kernelConstraint=Ns(e.kernelConstraint),this.recurrentConstraint=Ns(e.recurrentConstraint),this.biasConstraint=Ns(e.biasConstraint),this.dropout=Rm([1,Pd([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Rm([1,Pd([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Tn(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return be(()=>{if(e=e,e.length!==2)throw new fe(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let s=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ld({ones:()=>ho(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ld({ones:()=>ho(s),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const a=this.dropoutMask,i=this.recurrentDropoutMask;let o,l,u;0<this.dropout&&this.dropout<1&&(e=ie(e,a[0]));let c=vu(e,this.kernel.read());this.useBias&&(c=Kl(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=ie(s,i[0]));const d=this.recurrentKernel.read(),[h,m]=Ei(d,[2*this.units,this.units],d.rank-1),g=vu(s,h),[y,b,w]=Ei(c,3,c.rank-1),[C,k]=Ei(g,2,g.rank-1);o=this.recurrentActivation.apply(je(y,C)),l=this.recurrentActivation.apply(je(b,k));const T=vu(ie(l,s),m);u=this.activation.apply(je(w,T));const N=je(ie(o,s),ie(je(1,vr(o)),u));return[N,N]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Md(this.activation),recurrentActivation:Md(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Er(this.kernelInitializer),recurrentInitializer:Er(this.recurrentInitializer),biasInitializer:Er(this.biasInitializer),kernelRegularizer:ir(this.kernelRegularizer),recurrentRegularizer:ir(this.recurrentRegularizer),biasRegularizer:ir(this.biasRegularizer),activityRegularizer:ir(this.activityRegularizer),kernelConstraint:ks(this.kernelConstraint),recurrentConstraint:ks(this.recurrentConstraint),biasConstraint:ks(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}p4.className="GRUCell";Ge(p4);class GJ extends Xd{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new p4(e),super(e)}call(e,n){return be(()=>{this.cell.dropoutMask!=null&&(Rt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Rt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:a})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}GJ.className="GRU";Ge(GJ);class ZN extends QN{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Ls(this.units,"units"),this.activation=jd(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=jd(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=Cr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Cr(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Cr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=kr(e.kernelRegularizer),this.recurrentRegularizer=kr(e.recurrentRegularizer),this.biasRegularizer=kr(e.biasRegularizer),this.kernelConstraint=Ns(e.kernelConstraint),this.recurrentConstraint=Ns(e.recurrentConstraint),this.biasConstraint=Ns(e.biasConstraint),this.dropout=Rm([1,Pd([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Rm([1,Pd([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=Tn(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){const a=this.biasInitializer,i=this.units;s=new(n=class extends al{apply(l,u){const c=a.apply([i]),d=new e4().apply([i]),h=a.apply([i*2]);return KU(KU(c,d),h)}},n.className="CustomInit",n)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return be(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new fe(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let s=e[1];const a=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ld({ones:()=>ho(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ld({ones:()=>ho(s),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,o=this.recurrentDropoutMask;let l,u,c,d;0<this.dropout&&this.dropout<1&&(e=ie(e,i[0]));let h=vu(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=ie(s,o[0])),h=je(h,vu(s,this.recurrentKernel.read())),this.useBias&&(h=Kl(h,this.bias.read()));const[m,g,y,b]=Ei(h,4,h.rank-1);l=this.recurrentActivation.apply(m),u=this.recurrentActivation.apply(g),c=je(ie(u,a),ie(l,this.activation.apply(y))),d=this.recurrentActivation.apply(b);const w=ie(d,this.activation.apply(c));return[w,w,c]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Md(this.activation),recurrentActivation:Md(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Er(this.kernelInitializer),recurrentInitializer:Er(this.recurrentInitializer),biasInitializer:Er(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:ir(this.kernelRegularizer),recurrentRegularizer:ir(this.recurrentRegularizer),biasRegularizer:ir(this.biasRegularizer),activityRegularizer:ir(this.activityRegularizer),kernelConstraint:ks(this.kernelConstraint),recurrentConstraint:ks(this.recurrentConstraint),biasConstraint:ks(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}ZN.className="LSTMCell";Ge(ZN);class HJ extends Xd{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new ZN(e),super(e)}call(e,n){return be(()=>{this.cell.dropoutMask!=null&&(Rt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Rt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:a})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}HJ.className="LSTM";Ge(HJ);class m4 extends QN{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return be(()=>{e=e;let r=e.slice(1);const s=[];for(const o of this.cells.slice().reverse())Array.isArray(o.stateSize)?s.push(r.splice(0,o.stateSize.length)):s.push(r.splice(0,1));s.reverse();const a=[];let i;for(let o=0;o<this.cells.length;++o){const l=this.cells[o];r=s[o],o===0?i=[e[0]].concat(r):i=[i[0]].concat(r),i=l.call(i,n),a.push(i.slice(1))}r=[];for(const o of a.slice().reverse())r.push(...o);return[i[0]].concat(r)})}build(e){uD(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,s)=>{nh(`RNNCell_${s}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=a=>({className:a.getClassName(),config:a.getConfig()}),s={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),s)}static fromConfig(e,n,r={}){const s=[];for(const a of n.cells)s.push(xc(a,r));return new e({cells:s})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return cD(e)}setWeights(e){const n=[];for(const r of this.cells){const s=r.weights.length,a=e.splice(s);for(let i=0;i<r.weights.length;++i)n.push([r.weights[i],a[i]])}o4(n)}}m4.className="StackedRNNCells";Ge(m4);function Ld(t){const{ones:e,rate:n,training:r=!1,count:s=1,dropoutFunc:a}=t,i=()=>a!=null?a(e(),n):jZ(e(),n),o=()=>e1(i,e,r);return!s||s<=1?js(o().clone()):Array(s).fill(void 0).map(o).map(u=>js(u.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var wCe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class qJ extends Xd{constructor(e){if(e.unroll)throw new Zt("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Zt("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Ss({ndim:5})]}call(e,n){return be(()=>{if(this.cell.dropoutMask!=null&&(Rt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(Rt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new fe("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,s=n==null?null:n.training,a=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:a})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return be(()=>{const{stateSize:n}=this.cell,r=e.shape,s=this.computeSingleOutputShape(r),a=[s[0],...s.slice(2)],i=es(a);return Array.isArray(n)?Array(n.length).fill(i):[i]})}resetStates(e,n=!1){be(()=>{if(!this.stateful)throw new lu("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,s=this.computeSingleOutputShape(r),a=[s[0],...s.slice(2)];if(r[0]==null)throw new fe("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>es(a)):this.states_=[es(a)];else if(e==null)Rt(this.states_),this.keptStates!=null&&(Rt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>es(a)):this.states_[0]=es(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new fe(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):Rt(this.states_);for(let o=0;o<this.states_.length;++o){const l=e[o],u=a;if(!Xt(l.shape,u))throw new fe(`State ${o} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${l.shape}`);this.states_[o]=l}}this.states_=this.states_.map(o=>js(o.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:s,padding:a,strides:i,dilationRate:o}=this.cell,l=n==="channelsFirst",u=e[l?3:2],c=e[l?4:3],d=Pl(u,s[0],a,i[0],o[0]),h=Pl(c,s[1],a,i[1],o[1]);return[...e.slice(0,2),...l?[r,d,h]:[d,h,r]]}}qJ.className="ConvRNN2D";class g4 extends ZN{constructor(e){const{filters:n,kernelSize:r,strides:s,padding:a,dataFormat:i,dilationRate:o}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,Ls(this.filters,"filters"),this.kernelSize=mm(r,2,"kernelSize"),this.kernelSize.forEach(l=>Ls(l,"kernelSize")),this.strides=mm(s||1,2,"strides"),this.strides.forEach(l=>Ls(l,"strides")),this.padding=a||"valid",yo(this.padding),this.dataFormat=i||"channelsLast",rs(this.dataFormat),this.dilationRate=mm(o||1,2,"dilationRate"),this.dilationRate.forEach(l=>Ls(l,"dilationRate"))}build(e){var n;e=Tn(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new fe(`The channel dimension of the input should be defined. Found ${e[r]}`);const s=e[r],a=4,i=this.kernelSize.concat([s,this.filters*a]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,this.filters*a]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const u=this.biasInitializer,c=this.filters;l=new(n=class extends al{apply(h,m){const g=u.apply([c]),y=Ti([c]),b=u.apply([c*2]);return Jj([g,y,b])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*a],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return be(()=>{if(e.length!==3)throw new fe(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,s=e[0],a=e[1],i=e[2],o=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Ld({ones:()=>ho(s),rate:this.dropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,u=(H,ee,te)=>!ee||!ee[te]?H:ie(ee[te],H);let c=u(s,l,0),d=u(s,l,1),h=u(s,l,2),m=u(s,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Ld({ones:()=>ho(a),rate:this.recurrentDropout,training:r,count:o,dropoutFunc:this.dropoutFunc}));const g=this.recurrentDropoutMask;let y=u(a,g,0),b=u(a,g,1),w=u(a,g,2),C=u(a,g,3);const k=3,[T,N,I,A]=Ei(this.kernel.read(),o,k),[D,P,R,O]=this.useBias?Ei(this.bias.read(),o):[null,null,null,null];c=this.inputConv(c,T,D,this.padding),d=this.inputConv(d,N,P,this.padding),h=this.inputConv(h,I,R,this.padding),m=this.inputConv(m,A,O,this.padding);const[F,z,V,W]=Ei(this.recurrentKernel.read(),o,k);y=this.recurrentConv(y,F),b=this.recurrentConv(b,z),w=this.recurrentConv(w,V),C=this.recurrentConv(C,W);const j=this.recurrentActivation.apply(je(c,y)),q=this.recurrentActivation.apply(je(d,b)),Y=je(ie(q,i),ie(j,this.activation.apply(je(h,w)))),Q=ie(this.recurrentActivation.apply(je(m,C)),this.activation.apply(Y));return[Q,Q,Y]})}getConfig(){const e=super.getConfig(),{units:n}=e,r=wCe(e,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),s)}inputConv(e,n,r,s){const a=Od(e,n,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Kl(a,r,this.dataFormat):a}recurrentConv(e,n){return Od(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}g4.className="ConvLSTM2DCell";Ge(g4);class KJ extends qJ{constructor(e){const n=new g4(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}KJ.className="ConvLSTM2D";Ge(KJ);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class y4 extends nn{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let s=0;s<this.noiseShape.length;++s)r.push(this.noiseShape[s]==null?n[s]:this.noiseShape[s]);return r}call(e,n){return be(()=>{this.invokeCallHook(e,n);const r=Bt(e);if(0<this.rate&&this.rate<1){const s=n.training==null?!1:n.training,a=this.getNoiseShape(r);return e1(()=>jZ(r,this.rate,a,this.seed),()=>r,s)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}y4.className="Dropout";Ge(y4);class XJ extends y4{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}XJ.className="SpatialDropout1D";Ge(XJ);class YJ extends nn{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,Ls(this.units,"units"),this.activation=jd(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=Cr(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Cr(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Ns(e.kernelConstraint),this.biasConstraint=Ns(e.biasConstraint),this.kernelRegularizer=kr(e.kernelRegularizer),this.biasRegularizer=kr(e.biasRegularizer),this.activityRegularizer=kr(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Tn(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=Tn(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return be(()=>{this.invokeCallHook(e,n);const r=Bt(e),s=AZ(this.activation.getClassName());let a;return s!=null?a=vu(r,this.kernel.read(),s,this.bias?this.bias.read():null):(a=vu(r,this.kernel.read()),this.bias!=null&&(a=Kl(a,this.bias.read())),this.activation!=null&&(a=this.activation.apply(a))),a})}getConfig(){const e={units:this.units,activation:Md(this.activation),useBias:this.useBias,kernelInitializer:Er(this.kernelInitializer),biasInitializer:Er(this.biasInitializer),kernelRegularizer:ir(this.kernelRegularizer),biasRegularizer:ir(this.biasRegularizer),activityRegularizer:ir(this.activityRegularizer),kernelConstraint:ks(this.kernelConstraint),biasConstraint:ks(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}YJ.className="Dense";Ge(YJ);class QJ extends nn{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Tn(e);for(const n of e.slice(1))if(n==null)throw new fe(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],kd(e,1)]}call(e,n){return be(()=>{this.invokeCallHook(e,n);let r=Bt(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const s=[0];for(let a=2;a<r.rank;++a)s.push(a);s.push(1),r=bn(r,s)}return t2e(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}QJ.className="Flatten";Ge(QJ);class ZJ extends nn{constructor(e){super(e),this.supportsMasking=!0,this.activation=jd(e.activation)}call(e,n){return be(()=>{this.invokeCallHook(e,n);const r=Bt(e);return this.activation.apply(r)})}getConfig(){const e={activation:Md(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}ZJ.className="Activation";Ge(ZJ);class JJ extends nn{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return be(()=>(e=Bt(e),JSe(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}JJ.className="RepeatVector";Ge(JJ);class eee extends nn{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",s=n.slice();let a=1,i=null;for(let l=0;l<s.length;++l){const u=s[l];if(this.isUnknown(u))if(i===null)i=l;else throw new fe("Can only specifiy one unknown dimension.");else a*=u}const o=kd(e);if(i!==null){if(a===0||o%a!==0)throw new fe(r);s[i]=o/a}else if(o!==a)throw new fe(r);return s}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return be(()=>{this.invokeCallHook(e,n);const r=Bt(e),s=r.shape,a=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return ce(r,a)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}eee.className="Reshape";Ge(eee);class tee extends nn{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=Bl(1,e.dims.length+1);if(!Xt(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Ss({ndim:this.dims.length+1})]}computeOutputShape(e){e=Tn(e);const n=e.slice();return this.dims.forEach((r,s)=>{n[s+1]=e[r]}),n}call(e,n){return bn(Bt(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}tee.className="Permute";Ge(tee);class nee extends nn{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=Bt(e);return o2(Em(r,this.maskValue),-1)}call(e,n){return be(()=>{this.invokeCallHook(e,n);const r=Bt(e),i=o2(Em(r,this.maskValue),-1,!0);return ie(r,nt(i,r.dtype))})}}nee.className="Masking";Ge(nee);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ree extends nn{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Bn(e.inputLength))}this.inputDim=e.inputDim,Ls(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Ls(this.outputDim,"outputDim"),this.embeddingsInitializer=Cr(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=kr(e.embeddingsRegularizer),this.activityRegularizer=kr(e.activityRegularizer),this.embeddingsConstraint=Ns(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return be(()=>this.maskZero?(e=Bt(e),Em(e,vn(e))):null)}computeOutputShape(e){if(e=Tn(e),this.inputLength==null)return[...e,this.outputDim];const n=Bn(this.inputLength);if(n.length!==e.length-1)throw new fe(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let s=0;s<n.length;++s){const a=n[s],i=e[s+1];if(a!=null&&i!=null&&a!==i)throw new fe(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);a==null&&(n[r]=i),r++}}return[e[0],...n,this.outputDim]}call(e,n){return be(()=>{this.invokeCallHook(e,n);let r=Bt(e);r.dtype!=="int32"&&(r=xu(r,"int32"));const s=MZ(this.embeddings.read(),ce(r,[r.size]));return ce(s,Tn(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Er(this.embeddingsInitializer),embeddingsRegularizer:ir(this.embeddingsRegularizer),activityRegularizer:ir(this.activityRegularizer),embeddingsConstraint:ks(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}ree.className="Embedding";Ge(ree);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Vh extends nn{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Zt}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let s=0;s<n.length;++s){const a=e[e.length-n.length+s],i=n[s];if(a==null||i==null||a<0||i<0)r.push(null);else if(a===1)r.push(i);else if(i===1)r.push(a);else{if(a!==i)throw new fe("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(a)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Tn(e)]),e=e,e.length<2)throw new fe(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const a of e)a!=null&&a[0]!==null&&n.push(a[0]);if(n=Cd(n),n.length>1)throw new fe(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let a=1;a<e.length;++a){const i=e[a]==null?null:e[a].slice(1);r=this.computeElementwiseOpOutputShape(r,i)}const s=e.map(a=>a.length);e.indexOf(null)===-1&&Cd(s).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return be(()=>{if(e=e,this.reshapeRequired){const r=[],s=e.map(a=>a.rank);if(s.indexOf(null)===-1){const a=Pd(s);for(let i of e){const o=i.rank;for(let l=0;l<a-o;++l)i=Zv(i,1);r.push(i)}return this.mergeFunction(r)}else{let a=!1;for(const l of e){const u=l.rank;if(u==null){const c=l.shape,d=c[0],h=c.slice(1).concat([d]);let m=ce(l,[d].concat(kd(c.slice(1))));m=bn(m,[1,0]),m=ce(m,h),r.push(m),a=!0}else if(u>1){const c=Bl(1,u).concat([0]);r.push(bn(l,c)),a=!0}else r.push(l)}let i=this.mergeFunction(r);const o=i.rank;if(a){if(o==null){const l=i.shape,u=l.length,c=l[u-1],d=[c].concat(l.slice(0,l.length-1));i=ce(bn(ce(i,[-1,c]),[1,0]),d)}else if(o>1){const l=[o-1].concat(Bl(0,o-1));i=bn(i,l)}}return i}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let s=1;s<e.length;++s){const a=e[s]==null?null:e[s].slice(1);n=this.computeElementwiseOpOutputShape(n,a)}let r=[];for(const s of e)s!=null&&s[0]!==null&&r.push(s[0]);return r=Cd(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return be(()=>{if(n==null)return null;if(!Array.isArray(n))throw new fe("`mask` should be an Array");if(!Array.isArray(e))throw new fe("`inputs` should be an Array");if(n.length!==e.length)throw new fe(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(s=>s==null))return null;n=n.map(s=>s==null?s:cs(s,0));let r=n[0];for(let s=1;s<n.length-1;++s)r=Tu(r,n[s]);return r})}}class see extends Vh{constructor(e){super(e)}mergeFunction(e){return be(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=je(n,e[r]);return n})}}see.className="Add";Ge(see);class aee extends Vh{constructor(e){super(e)}mergeFunction(e){return be(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=ie(n,e[r]);return n})}}aee.className="Multiply";Ge(aee);class iee extends Vh{constructor(e){super(e)}mergeFunction(e){return be(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=je(n,e[r]);return ie(1/e.length,n)})}}iee.className="Average";Ge(iee);class oee extends Vh{constructor(e){super(e)}mergeFunction(e){return be(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Pc(n,e[r]);return n})}}oee.className="Maximum";Ge(oee);class lee extends Vh{constructor(e){super(e)}mergeFunction(e){return be(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Dd(n,e[r]);return n})}}lee.className="Minimum";Ge(lee);class uee extends Vh{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new fe("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const s of e)if(s!=null){n=!1;break}if(n)return;const r=[];for(let s=0;s<e.length;++s){const a=e[s].slice();a.splice(this.axis,1);let i=!1;for(const o of r)if(Xt(o,a)){i=!0;break}i||r.push(a)}if(r.length>1)throw new fe("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return be(()=>Jj(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new fe("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),s=this.axis<0?r.length+this.axis:this.axis;for(const a of n.slice(1)){if(r[s]==null||a[s]==null){r[s]=null;break}r[s]+=a[s]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new fe("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new fe("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new fe(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return be(()=>{let r=!0;if(n.forEach(i=>{if(i!=null){r=!1;return}}),r)return null;const s=[];for(let i=0;i<e.length;++i)n[i]==null?s.push(nt(ho(e[i]),"bool")):n[i].rank<e[i].rank?s.push(cs(n[i],-1)):s.push(n[i]);const a=Rr(s,this.axis);return ij(a,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}uee.className="Concatenate";Ge(uee);function F0(t,e){for(;t<0;)t+=e;return t}function SCe(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new Zt("batchDot is not implemented for tensors of 4D or higher rank yet");if(X(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),X(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new Zt("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,s=e.shape.length;n==null&&(n=[r-1,s-2]);const a=n;return be(()=>{let i;if(r>s){i=r-s;const l=[];for(let u=0;u<i;++u)l.push(1);e=ce(e,e.shape.concat(l))}else if(s>r){i=s-r;const l=[];for(let u=0;u<i;++u)l.push(1);t=ce(t,t.shape.concat(l))}else i=0;let o;if(t.shape.length===2&&e.shape.length===2)a[0]===a[1]?o=wt(ie(t,e),a[0]):o=wt(ie(bn(t,[1,0]),e),a[1]);else{const l=a[0]!==t.shape.length-1,u=a[1]===e.shape.length-1;o=ln(t,e,l,u)}if(i>0){let l;r>s?l=r+s-3:l=r-1;const u=[];for(let c=l;c<l+i;++c)u.push(c);o=$n(o,u)}return o.shape.length===1&&(o=cs(o,1)),o})}let cee=class extends Vh{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){X(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new Zt("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);if(n[s[0]]!==r[s[1]])throw new fe(`Dimension incompatibility: ${n[s[0]]} !== ${r[s[1]]}`)}mergeFunction(e){if(e.length!==2)throw new fe(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],s;return Array.isArray(this.axes)?s=this.axes.map((a,i)=>F0(a,e[i].shape.length)):s=[F0(this.axes,n.shape.length),F0(this.axes,r.shape.length)],this.normalize&&(n=h2(n,s[0]),r=h2(r,s[1])),SCe(n,r,s)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[F0(this.axes,e.length),F0(this.axes,n.length)],r}computeOutputShape(e){X(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new Zt("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);n.splice(s[0],1),r.splice(s[1],1),r.splice(0,1);const a=n.concat(r);return a.length===1&&a.push(1),a}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}};cee.className="Dot";Ge(cee);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class dee extends nn{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return be(()=>{this.invokeCallHook(e,n);const r=Bt(e);return e1(()=>je(GN(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}dee.className="GaussianNoise";Ge(dee);class fee extends nn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return be(()=>{this.invokeCallHook(e,n);const r=Bt(e);return this.rate>0&&this.rate<1?e1(()=>{const a=Math.sqrt(this.rate/(1-this.rate));return ie(r,GN(r.shape,1,a))},()=>r,n.training||!1):r})}}fee.className="GaussianDropout";Ge(fee);class hee extends nn{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Bt(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return be(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return e1(()=>{const a=Bt(e),o=-1.6732632423543772*1.0507009873554805;let l=qd(Lh(r),this.rate);l=xu(l,"float32");const u=((1-this.rate)*(1+this.rate*o**2))**-.5,c=-u*o*this.rate,d=je(ie(a,l),ie(je(l,-1),o));return je(ie(d,u),c)},()=>Bt(e),n.training||!1)}return e})}}hee.className="AlphaDropout";Ge(hee);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function zb(t,e,n,r,s,a=.001){let i;if(t.rank===2)i=FY(t,e,n,r,s,a);else if(t.rank===3)i=zY(t,e,n,r,s,a);else if(t.rank===4)i=BY(t,e,n,r,s,a);else throw new Zt(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return i}function CCe(t,e,n,r,s=.001){return be(()=>{const a=oN(t,r),i=a.mean,o=a.variance;return[zb(t,i,o,n,e,s),i,o]})}function kCe(t,e,n,r,s=.001){return be(()=>{const a=oN(t,r),i=a.mean,o=a.variance,l=[];for(const g of Bl(0,t.rank))r.indexOf(g)!==-1?l.push(1):l.push(t.shape[g]);const u=ce(i,l),c=ce(o,l),d=e==null?null:ce(e,l),h=n==null?null:ce(n,l);return[zb(t,u,c,h,d,s),i,o]})}function NCe(t,e,n,r,s=.001){return Xt(r.slice().sort(),Bl(0,t.rank-1))?CCe(t,e,n,r,s):kCe(t,e,n,r,s)}class pee extends nn{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Cr(e.betaInitializer||"zeros"),this.gammaInitializer=Cr(e.gammaInitializer||"ones"),this.movingMeanInitializer=Cr(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Cr(e.movingVarianceInitializer||"ones"),this.betaConstraint=Ns(e.betaConstraint),this.gammaConstraint=Ns(e.gammaConstraint),this.betaRegularizer=kr(e.betaRegularizer),this.gammaRegularizer=kr(e.gammaRegularizer)}build(e){e=Tn(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new fe(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Ss({ndim:e.length,axes:{[n]:r}})];const s=[r];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return be(()=>{const r=n.training==null?!1:n.training,s=Bt(e),a=s.shape,i=a.length,o=Bl(0,i),l=this.axis>=0?this.axis:this.axis+i;o.splice(l,1);const u=Sh(1,i);u[l]=a[l];const c=o.slice();c.sort();const d=!Xt(c,Bl(0,i).slice(0,i-1)),h=()=>{if(d){const C=ce(this.movingMean.read(),u),k=ce(this.movingVariance.read(),u),T=this.center?ce(this.beta.read(),u):null,N=this.scale?ce(this.gamma.read(),u):null;return zb(s,C,k,T,N,this.epsilon)}else return zb(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return h();const[m,g,y]=NCe(s,this.gamma.read(),this.beta.read(),o,this.epsilon),b=(C,k,T)=>{be(()=>{const N=1-T,I=C.read(),A=ie(ft(I,k),N);C.write(ft(I,A))})};return(()=>{b(this.movingMean,g,this.momentum),b(this.movingVariance,y,this.momentum)})(),m})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Er(this.betaInitializer),gammaInitializer:Er(this.gammaInitializer),movingMeanInitializer:Er(this.movingMeanInitializer),movingVarianceInitializer:Er(this.movingVarianceInitializer),betaRegularizer:ir(this.betaRegularizer),gammaRegularizer:ir(this.gammaRegularizer),betaConstraint:ks(this.betaConstraint),gammaConstraint:ks(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}pee.className="BatchNormalization";Ge(pee);class mee extends nn{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=Cr(e.betaInitializer||"zeros"),this.gammaInitializer=Cr(e.gammaInitializer||"ones"),this.betaRegularizer=kr(e.betaRegularizer),this.gammaRegularizer=kr(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Tn(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let a=0;a<this.axis.length;++a)this.axis[a]<0&&(this.axis[a]+=n);for(const a of this.axis)if(a<0||a>=n)throw new Error(`Invalid axis: ${a}`);if(this.axis.length!==Cd(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(a=>e[a]),s=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(e,n){const r=Bt(e),s=r.shape,a=s.length;return be(()=>{let{mean:o,variance:l}=oN(r,this.axis,!0);const u=Sh(1,a);for(const y of this.axis)u[y]=s[y];const c=y=>y!=null&&y.shape.length!==a?ce(y,u):y;let d=this.scale?c(this.gamma.read()):null,h=this.center?c(this.beta.read()):null;const m=[],g=[];for(let y=0;y<a;++y)this.axis.indexOf(y)!==-1?(m.push(s[y]),g.push(1)):(m.push(1),g.push(s[y]));return o=Go(o,m),l=Go(l,m),d!=null&&(d=Go(d,g)),h!=null&&(h=Go(h,g)),zb(r,o,l,h,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Er(this.betaInitializer),gammaInitializer:Er(this.gammaInitializer),betaRegularizer:ir(this.betaRegularizer),gammaRegularizer:ir(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}mee.className="LayerNormalization";Ge(mee);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function TCe(t,e,n){return be(()=>{if(t.rank!==4)throw new fe(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new fe("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Ul()),n!=="channelsLast"&&n!=="channelsFirst")throw new fe(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],Ll(t,r)})}class gee extends nn{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Ul():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new fe(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new fe(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new fe(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new Ss({ndim:4})]}computeOutputShape(e){e=Tn(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return be(()=>TCe(Bt(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}gee.className="ZeroPadding2D";Ge(gee);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function JN(t,e,n,r,s,a){return be(()=>{rs(s),OZ(a),yo(r),n==null&&(n=[1,1]),r==null&&(r="valid"),s==null&&(s=Ul()),a==null&&(a="max"),t=f4(t,s);let i;const o=r==="same"?"same":"valid";return a==="max"?i=iN(t,e,n,o):i=Zk(t,e,n,o),s==="channelsFirst"&&(i=bn(i,[0,3,1,2])),i})}function yee(t,e,n,r,s,a){return be(()=>{rs(s),OZ(a),yo(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),s==null&&(s=Ul()),a==null&&(a="max"),t=DJ(t,s);let i;const o=r==="same"?"same":"valid";return a==="max"?i=dQ(t,e,n,o):i=LY(t,e,n,o),s==="channelsFirst"&&(i=bn(i,[0,4,1,2,3])),i})}class bee extends nn{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new fe(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Ls(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new fe(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Ls(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,yo(this.padding),this.inputSpec=[new Ss({ndim:3})]}computeOutputShape(e){e=Tn(e);const n=Pl(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return be(()=>{this.invokeCallHook(e,n),e=Zv(Bt(e),2);const r=this.poolingFunction(Bt(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return $n(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class xee extends bee{constructor(e){super(e)}poolingFunction(e,n,r,s,a){return rs(a),yo(s),JN(e,n,r,s,a,"max")}}xee.className="MaxPooling1D";Ge(xee);class vee extends bee{constructor(e){super(e)}poolingFunction(e,n,r,s,a){return rs(a),yo(s),JN(e,n,r,s,a,"avg")}}vee.className="AveragePooling1D";Ge(vee);class wee extends nn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new fe(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Ls(this.poolSize,"poolSize"),Ls(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,rs(this.dataFormat),yo(this.padding),this.inputSpec=[new Ss({ndim:4})]}computeOutputShape(e){e=Tn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=Pl(n,this.poolSize[0],this.padding,this.strides[0]),r=Pl(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return be(()=>(this.invokeCallHook(e,n),this.poolingFunction(Bt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class See extends wee{constructor(e){super(e)}poolingFunction(e,n,r,s,a){return rs(a),yo(s),JN(e,n,r,s,a,"max")}}See.className="MaxPooling2D";Ge(See);class Cee extends wee{constructor(e){super(e)}poolingFunction(e,n,r,s,a){return rs(a),yo(s),JN(e,n,r,s,a,"avg")}}Cee.className="AveragePooling2D";Ge(Cee);class kee extends nn{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new fe(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Ls(this.poolSize,"poolSize"),Ls(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,rs(this.dataFormat),yo(this.padding),this.inputSpec=[new Ss({ndim:5})]}computeOutputShape(e){e=Tn(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=Pl(n,this.poolSize[0],this.padding,this.strides[0]),r=Pl(r,this.poolSize[1],this.padding,this.strides[1]),s=Pl(s,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,s]:[e[0],n,r,s,e[4]]}call(e,n){return be(()=>(this.invokeCallHook(e,n),this.poolingFunction(Bt(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class Nee extends kee{constructor(e){super(e)}poolingFunction(e,n,r,s,a){return rs(a),yo(s),yee(e,n,r,s,a,"max")}}Nee.className="MaxPooling3D";Ge(Nee);class Tee extends kee{constructor(e){super(e)}poolingFunction(e,n,r,s,a){return rs(a),yo(s),yee(e,n,r,s,a,"avg")}}Tee.className="AveragePooling3D";Ge(Tee);class $ee extends nn{constructor(e){super(e),this.inputSpec=[new Ss({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new Zt}}class Iee extends $ee{constructor(e){super(e||{})}call(e,n){return be(()=>{const r=Bt(e);return Lr(r,1)})}}Iee.className="GlobalAveragePooling1D";Ge(Iee);class Eee extends $ee{constructor(e){super(e||{})}call(e,n){return be(()=>{const r=Bt(e);return Qo(r,1)})}}Eee.className="GlobalMaxPooling1D";Ge(Eee);class Aee extends nn{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,rs(this.dataFormat),this.inputSpec=[new Ss({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new Zt}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class Ree extends Aee{call(e,n){return be(()=>{const r=Bt(e);return this.dataFormat==="channelsLast"?Lr(r,[1,2]):Lr(r,[2,3])})}}Ree.className="GlobalAveragePooling2D";Ge(Ree);class Oee extends Aee{call(e,n){return be(()=>{const r=Bt(e);return this.dataFormat==="channelsLast"?Qo(r,[1,2]):Qo(r,[2,3])})}}Oee.className="GlobalMaxPooling2D";Ge(Oee);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class _ee extends nn{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const s=n.layer,a=xc(s,r);delete n.layer;const i={layer:a};return Object.assign(i,n),new e(i)}}class Dee extends _ee{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Tn(e),e.length<3)throw new fe(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Tn(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),s=e[1];return[r[0],s].concat(r.slice(1))}call(e,n){return be(()=>(e=Bt(e),VJ((i,o)=>[Bt(this.layer.call(i,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}Dee.className="TimeDistributed";Ge(Dee);function $Ce(t){Uh(KSe,"BidirectionalMergeMode",t)}const ICe="concat";class Pee extends _ee{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=xc(r),n.goBackwards=n.goBackwards!==!0;const s={};if(s.className=e.layer.getClassName(),s.config=n,this.backwardLayer=xc(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?ICe:e.mergeMode,$Ce(this.mergeMode),e.weights)throw new Zt("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,s,a;return this.returnState&&(a=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,s=[r]):this.mergeMode==null?s=[r,r.slice()]:s=[r],this.returnState?this.mergeMode==null?s.concat(a).concat(a.slice()):[r].concat(a).concat(a.slice()):ri(s)}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const a=UJ(e,r,s,this.numConstants);if(e=a.inputs,r=a.initialState,s=a.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&s==null)return super.apply(e,n);const i=[],o=[];if(r!=null){const u=r.length;if(u%2>0)throw new fe("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,i.push(...r);const c=r.map(d=>new Ss({shape:d.shape}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),o.push(...c)}if(s!=null)throw new Zt("Support for constants in Bidirectional layers is not implemented yet.");const l=i[0]instanceof $u;for(const u of i)if(u instanceof $u!==l)throw new fe("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const u=[e].concat(i),c=this.inputSpec.concat(o),d=this.inputSpec;this.inputSpec=c;const h=super.apply(u,n);return this.inputSpec=d,h}else return super.apply(e,n)}call(e,n){return be(()=>{const r=n.initialState;let s,a;if(r==null)s=this.forwardLayer.call(e,n),a=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),u=r.slice(r.length/2);s=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),a=this.backwardLayer.call(e,Object.assign(n,{initialState:u}))}let i;this.returnState&&(Array.isArray(s)&&(i=s.slice(1).concat(a.slice(1))),s=s[0],a=a[0]),this.returnSequences&&(a=nl(a,1));let o;return this.mergeMode==="concat"?o=Jj([s,a]):this.mergeMode==="sum"?o=je(s,a):this.mergeMode==="ave"?o=ie(.5,je(s,a)):this.mergeMode==="mul"?o=ie(s,a):this.mergeMode==null&&(o=[s,a]),this.returnState?this.mergeMode==null?o.concat(i):[o].concat(i):o})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){nh(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),nh(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const a=this.forwardLayer.states.map(i=>null);return Array.isArray(r)?r.concat(a).concat(a):[r].concat(a).concat(a)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=xc(n.layer);if(delete n.layer,n.numConstants!=null)throw new Zt("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const s=n;return s.layer=r,new e(s)}}Pee.className="Bidirectional";Ge(Pee);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Mee extends nn{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return be(()=>(e=Bt(e),e.dtype!=="float32"&&(e=xu(e,"float32")),je(ie(e,this.scale),this.offset)))}}Mee.className="Rescaling";Ge(Mee);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:ECe,cropAndResize:ACe}=ja;class jee extends nn{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,s,a,i,o,l){return be(()=>{let u,c=!1;const d=n/i,h=r/o,m=(s+n)/i,g=(a+r)/o,y=[d,h,m,g],b=[];e.rank===3?(c=!0,u=Ai([e])):u=e;for(let N=0;N<u.shape[0];N++)b.push(y);const w=Dl(b,[b.length,4]),C=Am(0,b.length,1,"int32"),T=ACe(u,w,C,[s,a],"nearest");return xu(c?Bt(rl(T)):T,l)})}upsize(e,n,r,s){return be(()=>{const a=ECe(e,[n,r]);return xu(a,s)})}call(e,n){return be(()=>{const r=Bt(e),s=r.dtype,a=r.shape,i=a[a.length-3],o=a[a.length-2];let l=0;i!==this.height&&(l=Math.floor((i-this.height)/2));let u=0;return o!==this.width&&(u=Math.floor((o-this.width)/2),u===0&&(u=1)),l>=0&&u>=0?this.centerCrop(r,l,u,this.height,this.width,i,o,s):this.upsize(e,this.height,this.width,s)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Tn(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}jee.className="CenterCrop";Ge(jee);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function RCe(t,e,n,r){let s=Bt(t);if(s.dtype!=="int32"&&(s=xu(s,"int32")),e==="int")return s;const a=s.shape;if(s.rank===0&&(s=cs(s,-1)),e==="oneHot"&&s.shape[s.shape.length-1]!==1&&(s=cs(s,-1)),s.rank>2)throw new fe(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${a} which would result in output rank ${s.rank}.`);const i=["multiHot","oneHot"].includes(e),o=s;let l;if(typeof r<"u"&&e==="count"?l=tD(o,r,n,i):l=tD(o,[],n,i),e!=="tfIdf")return l;if(r)return ie(l,r);throw new fe("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Lee extends nn{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=Tn(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return be(()=>{e=Bt(e),e.dtype!=="int32"&&(e=xu(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new fe(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=Bt(n.countWeights)}const s=Qo(e),a=Ob(e),i=Mi(this.numTokens,s).bufferSync().get(0),o=qd(a,0).bufferSync().get(0);if(!(i&&o))throw new fe(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return RCe(e,this.outputMode,this.numTokens,r)})}}Lee.className="CategoryEncoding";Ge(Lee);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const OCe=["bilinear","nearest"],fV=new Set(OCe);class Fee extends nn{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(fV.has(e.interpolation))this.interpolation=e.interpolation;else throw new fe(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=Tn(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return be(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return ja.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return ja.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...fV]} are supported`)})}}Fee.className="Resizing";Ge(Fee);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class zee{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}zee.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Bee extends nn{constructor(e){super(e),this.randomGenerator=new zee(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}Bee.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const _Ce=["bilinear","nearest"],hV=new Set(_Ce);class Uee extends Bee{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new fe(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new fe(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new fe(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(hV.has(r))this.interpolation=r;else throw new fe(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Tn(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return be(()=>{const r=Bt(e);this.imgHeight=r.shape[r.shape.length-3];const s=r.shape[r.shape.length-2];this.widthFactor=Lh([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let a=this.widthFactor.dataSync()[0]*s;a=Math.round(a);const i=[this.imgHeight,a];switch(this.interpolation){case"bilinear":return ja.resizeBilinear(e,i);case"nearest":return ja.resizeNearestNeighbor(e,i);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...hV]} are supported`)}})}}Uee.className="RandomWidth";Ge(Uee);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DCe=ve();DCe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var Ci;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(Ci||(Ci={}));var pV;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(pV||(pV={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PCe={};function Vee(t){return PCe[t]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B(t,e,n,r,s){const a=e.inputParams[t];if(a&&a.inputIndexStart!==void 0){const o=a.inputIndexStart,l=a.inputIndexEnd===0?void 0:a.inputIndexEnd===void 0?o+1:a.inputIndexEnd,u=o<0?e.inputNames.length+o:o;if(a.type==="tensor")return Qs(e.inputNames[u],n,r,s);if(a.type==="tensors"){const h=e.inputs.slice(o,l);return e.inputNames.slice(o,l).filter((g,y)=>{var b;return((b=h[y])===null||b===void 0?void 0:b.op)!=="NoOp"}).map(g=>Qs(g,n,r,s))}const c=Qs(e.inputNames[u],n,r,s),d=c.dataSync();return a.type==="number"?d[0]:Yo(c.shape,d)}const i=e.attrParams[t];return i&&i.value}function Qs(t,e,n,r){const[s,a]=ki(t,n);if(r!=null){const o=r.getHashTableHandleByName(s);if(o!=null)return o}const i=n.currentContextIds.find(o=>!!e[b2(s,o)]);return i!==void 0?e[b2(s,i)][a]:void 0}function mV(t,e,n){return e[b2(t,n.currentContextId)]}function lc(t,e){const[n,r,s]=ki(t,e);return[b2(n,e&&e.currentContextId),r,s]}function b2(t,e){return e?`${t}-${e}`:t}function ki(t,e){if(t==="")return["",0,void 0];const n=e!=null&&e.parseNodeNameCache!=null;if(n){const a=e.parseNodeNameCache.get(t);if(a!=null)return a}const r=t.split(":");let s;if(r.length===1)s=[t,0,void 0];else{const a=r[0],i=r.length===3?r[1]:void 0,o=Number(r[r.length-1]);s=[a,o,i]}return n&&e.parseNodeNameCache.set(t,s),s}function jS(t,e,n){let r=B("pad",t,e,n);if(r==="explicit"){r=B("explicitPaddings",t,e,n);const s=[[0,0],[0,0],[0,0],[0,0]];for(let a=0;a<4;a++)s[a][0]=r[a*2],s[a][1]=r[a*2+1];return s}return r}function uc(t){return t.kept?t:bc(t)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MCe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],jCe=Object.freeze(Object.defineProperty({__proto__:null,json:MCe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LCe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],FCe=Object.freeze(Object.defineProperty({__proto__:null,json:LCe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zCe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],BCe=Object.freeze(Object.defineProperty({__proto__:null,json:zCe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UCe=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],VCe=Object.freeze(Object.defineProperty({__proto__:null,json:UCe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WCe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],GCe=Object.freeze(Object.defineProperty({__proto__:null,json:WCe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HCe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],qCe=Object.freeze(Object.defineProperty({__proto__:null,json:HCe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KCe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],XCe=Object.freeze(Object.defineProperty({__proto__:null,json:KCe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YCe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],QCe=Object.freeze(Object.defineProperty({__proto__:null,json:YCe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZCe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],JCe=Object.freeze(Object.defineProperty({__proto__:null,json:ZCe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eke=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],tke=Object.freeze(Object.defineProperty({__proto__:null,json:eke},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nke=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],rke=Object.freeze(Object.defineProperty({__proto__:null,json:nke},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ske=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],ake=Object.freeze(Object.defineProperty({__proto__:null,json:ske},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ike=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],oke=Object.freeze(Object.defineProperty({__proto__:null,json:ike},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lke=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],uke=Object.freeze(Object.defineProperty({__proto__:null,json:lke},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cke=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],dke=Object.freeze(Object.defineProperty({__proto__:null,json:cke},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fke=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],hke=Object.freeze(Object.defineProperty({__proto__:null,json:fke},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pke=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],mke=Object.freeze(Object.defineProperty({__proto__:null,json:pke},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gke=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],yke=Object.freeze(Object.defineProperty({__proto__:null,json:gke},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bke=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],xke=Object.freeze(Object.defineProperty({__proto__:null,json:bke},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gV{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[jCe,FCe,BCe,VCe,GCe,qCe,XCe,QCe,JCe,tke,rke,ake,oke,uke,dke,hke,mke,yke,xke],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,s)=>(r[s.tfOpName]=s,r),{})}transformGraph(e,n={}){const r=e.node,s=[],a=[],i=[],o=r.reduce((y,b)=>(y[b.name]=this.mapNode(b),b.op.startsWith("Placeholder")?s.push(y[b.name]):b.op==="Const"?a.push(y[b.name]):(b.input==null||b.input.length===0)&&i.push(y[b.name]),y),{});let l=[];const u=[];let c={},d={};n!=null&&(c=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));const h=Object.keys(o);h.forEach(y=>{const b=o[y];b.inputNames.forEach((w,C)=>{const[k,,T]=lc(w),N=o[k];if(N.outputs!=null){const I=N.outputs.indexOf(T);if(I!==-1){const A=`${k}:${I}`;b.inputNames[C]=A}}b.inputs.push(N),N.children.push(b)})}),Object.keys(d).length===0?h.forEach(y=>{const b=o[y];b.children.length===0&&u.push(b)}):Object.keys(d).forEach(y=>{const[b]=lc(y),w=o[b];w!=null&&(w.signatureKey=d[y],u.push(w))}),Object.keys(c).length>0?Object.keys(c).forEach(y=>{const[b]=lc(y),w=o[b];w&&(w.signatureKey=c[y],l.push(w))}):l=s;let m={};e.library!=null&&e.library.function!=null&&(m=e.library.function.reduce((y,b)=>(y[b.signature.name]=this.mapFunction(b),y),{}));const g={nodes:o,inputs:l,outputs:u,weights:a,placeholders:s,signature:n,functions:m};return i.length>0&&(g.initNodes=i),g}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=Vee(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(s=>s.startsWith("^")?s.slice(1):s),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((s,a)=>(s[a.name]={type:a.type,inputIndexStart:a.start,inputIndexEnd:a.end},s),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((s,a)=>{const i=a.type;let o;switch(a.type){case"string":o=gD(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=gD(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"string[]":o=CD(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=CD(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number":o=bD(e.attr,a.tfName,a.defaultValue||0),o===void 0&&a.tfDeprecatedName&&(o=bD(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number[]":o=SD(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=SD(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool":o=yD(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=yD(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool[]":o=ND(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=ND(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape":o=wD(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=wD(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape[]":o=kD(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=kD(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype":o=xD(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=xD(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype[]":o=vD(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=vD(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"func":o=yV(e.attr,a.tfName,a.defaultValue),o===void 0&&a.tfDeprecatedName&&(o=yV(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${a.type} for op: ${e.op}`)}return s[a.name]={value:o,type:i},s},{})),r}mapFunction(e){const n=e.nodeDef,r=[],s=[];let a={};n!=null&&(a=n.reduce((d,h)=>(d[h.name]=this.mapNode(h),h.op==="Const"&&s.push(d[h.name]),d),{}));const i=[],o=[];e.signature.inputArg.forEach(d=>{const[h]=lc(d.name),m={name:h,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:b4(d.type),type:"dtype"}},children:[]};m.signatureKey=d.name,i.push(m),a[h]=m}),Object.keys(a).forEach(d=>{const h=a[d];h.inputNames.forEach((m,g)=>{const[y,,b]=lc(m),w=a[y];if(w.outputs!=null){const C=w.outputs.indexOf(b);if(C!==-1){const k=`${y}:${C}`;h.inputNames[g]=k}}h.inputs.push(w),w.children.push(h)})});const u=e.ret;e.signature.outputArg.forEach(d=>{const[h,m]=lc(u[d.name]),g=a[h];g!=null&&(g.defaultOutput=m,o.push(g))});const c=this.mapArgsToSignature(e);return{nodes:a,inputs:i,outputs:o,weights:s,placeholders:r,signature:c}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function vke(t){const e=ve().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function Wee(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):vke(t);return e?n:n.toLowerCase()}function gD(t,e,n,r=!1){const s=t[e];return s!=null?Wee(s.s,r):n}function yD(t,e,n){const r=t[e];return r?r.b:n}function bD(t,e,n){const r=t[e]||{},s=r.i!=null?r.i:r.f!=null?r.f:n;return typeof s=="number"?s:parseInt(s,10)}function b4(t){switch(typeof t=="string"&&(t=Ci[t]),t){case Ci.DT_FLOAT:case Ci.DT_HALF:return"float32";case Ci.DT_INT32:case Ci.DT_INT64:case Ci.DT_INT8:case Ci.DT_UINT8:return"int32";case Ci.DT_BOOL:return"bool";case Ci.DT_DOUBLE:return"float32";case Ci.DT_STRING:return"string";case Ci.DT_COMPLEX64:case Ci.DT_COMPLEX128:return"complex64";default:return null}}function yV(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function xD(t,e,n){const r=t[e];return r&&r.type?b4(r.type):n}function vD(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(s=>b4(s)):n}function Gee(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function wD(t,e,n){const r=t[e];return r&&r.shape?Gee(r.shape):n}function SD(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(s=>typeof s=="number"?s:parseInt(s,10)):n}function CD(t,e,n,r=!1){const s=t[e];return s&&s.list&&s.list.s?s.list.s.map(a=>Wee(a,r)):n}function kD(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(s=>Gee(s)):n}function ND(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wke{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(s=>this.getInput(s)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((s,a)=>(s[a]=this.getAttr(a),s),{}))}getInput(e){return Qs(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return Qs(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return bD(this.node.rawAttrs,e,n);if(r.s!=null)return gD(this.node.rawAttrs,e,n);if(r.b!=null)return yD(this.node.rawAttrs,e,n);if(r.shape!=null)return wD(this.node.rawAttrs,e,n);if(r.type!=null)return xD(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return SD(this.node.rawAttrs,e,n);if(r.list.s!=null)return CD(this.node.rawAttrs,e,n);if(r.list.shape!=null)return kD(this.node.rawAttrs,e,n);if(r.list.b!=null)return ND(this.node.rawAttrs,e,n);if(r.list.type!=null)return vD(this.node.rawAttrs,e,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ta=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:pY,abs:xs,acos:AY,acosh:RY,add:je,addN:Lme,all:ij,any:o2,argMax:bh,argMin:OY,asin:_Y,asinh:DY,atan:PY,atan2:MY,atanh:jY,avgPool:Zk,avgPool3d:LY,basicLSTMCell:oge,batchNorm:Uv,batchNorm2d:FY,batchNorm3d:zY,batchNorm4d:BY,batchToSpaceND:Jk,bincount:UY,bitwiseAnd:gge,booleanMaskAsync:exe,broadcastArgs:bge,broadcastTo:hm,buffer:Wt,cast:nt,ceil:VY,clipByValue:ui,clone:bc,complex:Ed,concat:Rr,concat1d:WY,concat2d:GY,concat3d:HY,concat4d:qY,conv1d:lj,conv2d:Od,conv2dTranspose:cj,conv3d:KY,conv3dTranspose:YY,cos:eN,cosh:dj,cosineWindow:jj,cumprod:l2,cumsum:fj,denseBincount:tD,depthToSpace:QY,depthwiseConv2d:Vv,diag:Bge,dilation2d:ZY,div:dt,divNoNan:JY,dot:eQ,dropout:NQ,einsum:rm,elu:Wv,enclosingPowerOfTwo:TQ,ensureShape:Qge,equal:jl,erf:hj,euclideanNorm:rQ,exp:La,expandDims:cs,expm1:sQ,eye:mj,fft:pN,fill:dy,floor:Hv,floorDiv:aj,fused:Sxe,gather:qv,gatherND:cxe,greater:Mi,greaterEqual:qd,ifft:Mb,imag:tN,image:ja,inTopKAsync:pxe,irfft:Rj,isFinite:aQ,isInf:iQ,isNaN:oQ,leakyRelu:nN,less:_b,lessEqual:jh,linalg:DQ,linspace:Cye,localResponseNormalization:lQ,log:fo,log1p:rN,logSigmoid:uQ,logSoftmax:gj,logSumExp:sN,logicalAnd:Tu,logicalNot:aN,logicalOr:yj,logicalXor:cQ,losses:Jve,lowerBound:Fye,matMul:ln,max:Qo,maxPool:iN,maxPool3d:dQ,maxPoolWithArgmax:Vye,maximum:Pc,mean:Lr,meshgrid:Hye,min:Ob,minimum:Dd,mirrorPad:xj,mod:fQ,moments:oN,movingAverage:rxe,mul:ie,multiRNNCell:Zye,multinomial:e0e,neg:vr,norm:Gv,notEqual:Em,oneHot:vj,ones:Ti,onesLike:ho,op:le,outerProduct:a0e,pad:Ll,pad1d:l0e,pad2d:c0e,pad3d:f0e,pad4d:p0e,pool:hQ,pow:Ic,prelu:uN,print:EY,prod:pQ,raggedGather:S0e,raggedRange:k0e,raggedTensorToTensor:T0e,rand:I0e,randomGamma:Y0e,randomNormal:Sj,randomStandardNormal:J0e,randomUniform:Lh,randomUniformInt:nbe,range:Am,real:Db,reciprocal:mQ,relu:Lu,relu6:Cj,reshape:ce,reverse:nl,reverse1d:ube,reverse2d:dbe,reverse3d:hbe,reverse4d:mbe,rfft:mN,round:kj,rsqrt:Nj,scalar:It,scatterND:axe,searchSorted:bj,selu:Tj,separableConv2d:$j,setdiff1dAsync:wbe,sigmoid:io,sign:gQ,signal:Zve,sin:Ij,sinh:Ej,slice:zt,slice1d:dN,slice2d:Aj,slice3d:fN,slice4d:Pb,softmax:hN,softplus:fy,spaceToBatchND:lN,sparse:e1e,sparseToDense:lxe,spectral:Qve,split:Ei,sqrt:ea,square:Kn,squaredDifference:Oj,squeeze:$n,stack:Ai,step:hy,stridedSlice:yQ,string:t1e,sub:ft,sum:wt,tan:bQ,tanh:vh,tensor:Dl,tensor1d:fs,tensor2d:Zo,tensor3d:xQ,tensor4d:Bbe,tensor5d:Ube,tensor6d:Vbe,tensorScatterUpdate:Gbe,tile:Go,topk:wQ,transpose:bn,truncatedNormal:Dj,unique:SQ,unsortedSegmentSum:Pj,unstack:rl,upperBound:Qbe,variable:CQ,where:ma,whereAsync:kQ,zeros:es,zerosLike:vn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ske=(t,e,n,r=ta)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(B("a",t,e,n),B("b",t,e,n))];case"AddN":return[r.addN(B("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(B("a",t,e,n),B("b",t,e,n))];case"Mul":return[r.mul(B("a",t,e,n),B("b",t,e,n))];case"RealDiv":case"Div":return[r.div(B("a",t,e,n),B("b",t,e,n))];case"DivNoNan":return[r.divNoNan(B("a",t,e,n),B("b",t,e,n))];case"FloorDiv":return[r.floorDiv(B("a",t,e,n),B("b",t,e,n))];case"Sub":return[r.sub(B("a",t,e,n),B("b",t,e,n))];case"Minimum":return[r.minimum(B("a",t,e,n),B("b",t,e,n))];case"Maximum":return[r.maximum(B("a",t,e,n),B("b",t,e,n))];case"Pow":return[r.pow(B("a",t,e,n),B("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(B("a",t,e,n),B("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cke=(t,e,n,r=ta)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(B("x",t,e,n))];case"Acos":return[r.acos(B("x",t,e,n))];case"Acosh":return[r.acosh(B("x",t,e,n))];case"Asin":return[r.asin(B("x",t,e,n))];case"Asinh":return[r.asinh(B("x",t,e,n))];case"Atan":return[r.atan(B("x",t,e,n))];case"Atan2":return[r.atan2(B("x",t,e,n),B("y",t,e,n))];case"Atanh":return[r.atanh(B("x",t,e,n))];case"Ceil":return[r.ceil(B("x",t,e,n))];case"Complex":return[r.complex(B("real",t,e,n),B("imag",t,e,n))];case"Cos":return[r.cos(B("x",t,e,n))];case"Cosh":return[r.cosh(B("x",t,e,n))];case"Elu":return[r.elu(B("x",t,e,n))];case"Erf":return[r.erf(B("x",t,e,n))];case"Exp":return[r.exp(B("x",t,e,n))];case"Expm1":return[r.expm1(B("x",t,e,n))];case"Floor":return[r.floor(B("x",t,e,n))];case"Log":return[r.log(B("x",t,e,n))];case"Log1p":return[r.log1p(B("x",t,e,n))];case"Imag":return[r.imag(B("x",t,e,n))];case"Neg":return[r.neg(B("x",t,e,n))];case"Reciprocal":return[r.reciprocal(B("x",t,e,n))];case"Real":return[r.real(B("x",t,e,n))];case"Relu":return[r.relu(B("x",t,e,n))];case"Round":return[r.round(B("x",t,e,n))];case"Selu":return[r.selu(B("x",t,e,n))];case"Sigmoid":return[r.sigmoid(B("x",t,e,n))];case"Sin":return[r.sin(B("x",t,e,n))];case"Sign":return[r.sign(B("x",t,e,n))];case"Sinh":return[r.sinh(B("x",t,e,n))];case"Softplus":return[r.softplus(B("x",t,e,n))];case"Sqrt":return[r.sqrt(B("x",t,e,n))];case"Square":return[r.square(B("x",t,e,n))];case"Tanh":return[r.tanh(B("x",t,e,n))];case"Tan":return[r.tan(B("x",t,e,n))];case"ClipByValue":return[r.clipByValue(B("x",t,e,n),B("clipValueMin",t,e,n),B("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(B("x",t,e,n))];case"Rsqrt":return[r.rsqrt(Qs(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(B("x",t,e,n),B("alpha",t,e,n))];case"Prelu":return[r.prelu(B("x",t,e,n),B("alpha",t,e,n))];case"IsNan":return[r.isNaN(Qs(t.inputNames[0],e,n))];case"IsInf":return[r.isInf(Qs(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite(Qs(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fo(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){X(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const s=t[r],a=e[r];X(s<0||a<0||s===a,()=>n+` Shapes ${t} and ${e} must match`)}}}function bV(t){return!(typeof t=="number"||t.some(e=>e<0))}function z0(t,e,n){let r=TD(t,n);const s=!bV(r);if(s&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(s&&e.forEach(a=>{r=TD(a.shape,r)}),!bV(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function TD(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const s=t[r],a=e[r];if(s>=0&&a>=0&&s!==a)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=s>=0?s:a}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kke{constructor(e,n,r,s,a,i,o){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=s,this.identicalElementShapes=a,this.dynamicSize=i,this.clearAfterRead=o,this.tensors=[],this.closed_=!1,this.idTensor=It(0),js(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),Fo(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,js(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,s)=>this.write(r,n[s]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let s=0;s<this.size();s++)e.push(s)}if(e.length===0)return Dl([],[0].concat(this.elementShape));const r=this.readMany(e);return Fo(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Ai(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return Dl([],[0].concat(this.elementShape));const n=[];for(let s=0;s<this.size();s++)n.push(s);const r=this.readMany(n);return Fo(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),Rr(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,rl(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const s=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const a=r===0?0:n.size/r,i=[];be(()=>{n=ce(n,[1,r,a]);for(let l=0;l<e.length;++l){const c=[0,l===0?0:s[l-1],0],d=[1,e[l],a];i[l]=ce(zt(n,c,d),this.elementShape)}return i});const o=[];for(let l=0;l<e.length;l++)o[l]=l;this.writeMany(o,i)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ch{get id(){return this.idTensor.id}constructor(e,n,r,s=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e!=null&&e.forEach(a=>{if(r!==a.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${a.dtype}`);Fo(n,a.shape,"TensorList shape mismatch: "),js(a)}),this.idTensor=It(0),this.maxNumElements=s,js(this.idTensor)}copy(){return new Ch([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);Fo(e,this.elementShape,"TensorList shape mismatch: ");const s=z0(this.elementShape,this.tensors,e);return be(()=>{const a=this.tensors.map(i=>ce(i,s));return Ai(a,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=z0(this.elementShape,this.tensors,e),s=this.tensors.pop();return s.kept=!1,Fo(s.shape,e,"TensorList shape mismatch: "),ce(s,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(Fo(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");js(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new Ch([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);Fo(this.tensors[e].shape,n,"TensorList shape mismatch: ");const s=z0(this.elementShape,this.tensors,n);return ce(this.tensors[e],s)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);Fo(this.elementShape,n.shape,"TensorList shape mismatch: "),js(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);Fo(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const s=z0(this.elementShape,this.tensors,r);return e.length===0?Dl([],[0].concat(s)):be(()=>{const a=e.map(i=>ce(this.tensors[i],s));return Ai(a,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);Fo(this.elementShape,n,"TensorList shape mismatch: ");const r=z0(this.elementShape,this.tensors,n);return this.size()===0?Dl([],[0].concat(r)):be(()=>{const s=this.tensors.map(a=>ce(a,r));return Rr(s,0)})}}function Nke(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const s=t.shape.slice(1);Fo(s,e,"TensorList shape mismatch: ");const a=rl(t);return new Ch(a,e,r)}function Tke(t,e,n,r){return new Ch([],t,e,r)}function $ke(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const s=Math.max(...e);if(r!=null&&r!==-1&&s>=r)throw new Error(`Max index must be < array size (${s}  vs. ${r})`);const a=new Ch([],n,t.dtype,r),i=rl(t,0);return e.forEach((o,l)=>{a.setItem(o,i[l])}),a}function Ike(t,e,n){let r=0;const s=e.map(c=>(r+=c,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const a=t.shape.slice(1),i=TD(a,n),o=r===0?0:t.size/r,l=be(()=>{const c=[];t=ce(t,[1,r,o]);for(let d=0;d<e.length;++d){const m=[0,d===0?0:s[d-1],0],g=[1,e[d],o];c[d]=ce(zt(t,m,g),i)}return t.dispose(),c}),u=new Ch([],n,t.dtype,e.length);for(let c=0;c<l.length;c++)u.setItem(c,l[c]);return u}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eke=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=B("thenBranch",t,e,n),s=B("elseBranch",t,e,n),a=B("cond",t,e,n),i=B("args",t,e,n);return(await a.data())[0]?n.functionMap[r].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap):n.functionMap[s].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=B("body",t,e,n),s=B("cond",t,e,n),a=B("args",t,e,n),i=await n.functionMap[s].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap),o=a.map(c=>c.id);let l=await i[0].data();i.forEach(c=>{!c.kept&&o.indexOf(c.id)===-1&&c.dispose()});let u=a;for(;l[0];){const c=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const d=u.map(m=>m.id);c.forEach(m=>{!m.kept&&o.indexOf(m.id)===-1&&d.indexOf(m.id)===-1&&m.dispose()});const h=await n.functionMap[s].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);l=await h[0].data(),h.forEach(m=>{!m.kept&&o.indexOf(m.id)===-1&&d.indexOf(m.id)===-1&&m.dispose()})}return u}case"LoopCond":{const r=B("pred",t,e,n);return[uc(r)]}case"Switch":{const r=B("pred",t,e,n);let s=B("data",t,e,n);return s.kept||(s=uc(s)),(await r.data())[0]?[void 0,s]:[s,void 0]}case"Merge":{const r=t.inputNames.find(s=>Qs(s,e,n)!==void 0);if(r){const s=Qs(r,e,n);return[uc(s)]}return}case"Enter":{const r=B("frameName",t,e,n),s=B("tensor",t,e,n);return n.enterFrame(r),[uc(s)]}case"Exit":{const r=B("tensor",t,e,n);return n.exitFrame(),[uc(r)]}case"NextIteration":{const r=B("tensor",t,e,n);return n.nextIteration(),[uc(r)]}case"TensorArrayV3":{const r=B("size",t,e,n),s=B("dtype",t,e,n),a=B("elementShape",t,e,n),i=B("dynamicSize",t,e,n),o=B("clearAfterRead",t,e,n),l=B("identicalElementShapes",t,e,n),u=B("name",t,e,n),c=new kke(u,s,r,a,l,i,o);return n.addTensorArray(c),[c.idTensor,It(1)]}case"TensorArrayWriteV3":{const r=B("tensorArrayId",t,e,n),s=B("index",t,e,n),a=B("tensor",t,e,n),i=n.getTensorArray(r.id);return i.write(s,a),[i.idTensor]}case"TensorArrayReadV3":{const r=B("tensorArrayId",t,e,n),s=B("index",t,e,n);return[n.getTensorArray(r.id).read(s)]}case"TensorArrayGatherV3":{const r=B("tensorArrayId",t,e,n),s=B("indices",t,e,n),a=B("dtype",t,e,n);return[n.getTensorArray(r.id).gather(s,a)]}case"TensorArrayScatterV3":{const r=B("tensorArrayId",t,e,n),s=B("indices",t,e,n),a=B("tensor",t,e,n),i=n.getTensorArray(r.id);return i.scatter(s,a),[i.idTensor]}case"TensorArrayConcatV3":{const r=B("tensorArrayId",t,e,n),s=n.getTensorArray(r.id),a=B("dtype",t,e,n);return[s.concat(a)]}case"TensorArraySplitV3":{const r=B("tensorArrayId",t,e,n),s=B("tensor",t,e,n),a=B("lengths",t,e,n),i=n.getTensorArray(r.id);return i.split(a,s),[i.idTensor]}case"TensorArraySizeV3":{const r=B("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return[It(s.size(),"int32")]}case"TensorArrayCloseV3":{const r=B("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return s.clearAndClose(),[s.idTensor]}case"TensorListSetItem":{const r=B("tensorListId",t,e,n),s=B("index",t,e,n),a=B("tensor",t,e,n),i=n.getTensorList(r.id);return i.setItem(s,a),[i.idTensor]}case"TensorListGetItem":{const r=B("tensorListId",t,e,n),s=B("index",t,e,n),a=B("elementShape",t,e,n),i=B("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(s,a,i)]}case"TensorListScatterV2":case"TensorListScatter":{const r=B("indices",t,e,n),s=B("tensor",t,e,n),a=B("elementShape",t,e,n),i=B("numElements",t,e,n),o=$ke(s,r,a,i);return n.addTensorList(o),[o.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=B("elementShape",t,e,n),s=B("elementDType",t,e,n);let a;t.op==="TensorListReserve"?a="numElements":a="maxNumElements";const i=B(a,t,e,n),o=t.op==="TensorListReserve"?-1:i,l=Tke(r,s,i,o);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=B("tensorListId",t,e,n),s=B("indices",t,e,n),a=B("elementShape",t,e,n),i=B("elementDType",t,e,n);return[n.getTensorList(r.id).gather(s,i,a)]}case"TensorListStack":{const r=B("tensorListId",t,e,n),s=B("elementShape",t,e,n),a=B("elementDType",t,e,n),i=B("numElements",t,e,n);return[n.getTensorList(r.id).stack(s,a,i)]}case"TensorListFromTensor":{const r=B("tensor",t,e,n),s=B("elementShape",t,e,n),a=B("elementDType",t,e,n),i=Nke(r,s,a);return n.addTensorList(i),[i.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=B("tensorListId",t,e,n),s=n.getTensorList(r.id),a=B("dtype",t,e,n),i=B("elementShape",t,e,n);return[s.concat(a,i)]}case"TensorListPushBack":{const r=B("tensorListId",t,e,n),s=B("tensor",t,e,n),a=n.getTensorList(r.id);return a.pushBack(s),[a.idTensor]}case"TensorListPopBack":{const r=B("tensorListId",t,e,n),s=B("elementShape",t,e,n),a=B("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(s,a)]}case"TensorListSplit":{const r=B("tensor",t,e,n),s=B("elementShape",t,e,n),a=B("lengths",t,e,n),i=Ike(r,a,s);return n.addTensorList(i),[i.idTensor]}case"TensorListLength":{const r=B("tensorListId",t,e,n),s=n.getTensorList(r.id);return[It(s.size(),"int32")]}case"TensorListResize":{const r=B("tensorListId",t,e,n),s=B("size",t,e,n),i=n.getTensorList(r.id).resize(s);return n.addTensorList(i),[i.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xV(t,e,n){const[r,s]=B("fusedOps",t,e,n),a=r==="biasadd",i=!a,o=s==="prelu",l=r==="fusedbatchnorm",u=B("numArgs",t,e,n);if(a){if(o&&u!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&a&&u!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=B("strides",t,e,n),d=jS(t,e,n),h=B("dataFormat",t,e,n).toUpperCase(),m=B("dilations",t,e,n);let[g,y]=B("args",t,e,n);i&&(y=g,g=void 0);const b=B("leakyreluAlpha",t,e,n);return{stride:c,pad:d,dataFormat:h,dilations:m,biasArg:g,preluArg:y,activationFunc:s,leakyreluAlpha:b}}const Ake=(t,e,n,r=ta)=>{switch(t.op){case"Conv1D":{const s=B("stride",t,e,n),a=B("pad",t,e,n),i=B("dataFormat",t,e,n).toUpperCase(),o=B("dilation",t,e,n);return[r.conv1d(B("x",t,e,n),B("filter",t,e,n),s,a,i,o)]}case"Conv2D":{const s=B("strides",t,e,n),a=jS(t,e,n),i=B("dataFormat",t,e,n).toUpperCase(),o=B("dilations",t,e,n);return[r.conv2d(B("x",t,e,n),B("filter",t,e,n),[s[1],s[2]],a,i,[o[1],o[2]])]}case"_FusedConv2D":{const{stride:s,pad:a,dataFormat:i,dilations:o,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=xV(t,e,n);return[r.fused.conv2d({x:B("x",t,e,n),filter:B("filter",t,e,n),strides:[s[1],s[2]],pad:a,dataFormat:i,dilations:[o[1],o[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:s,pad:a,dataFormat:i,dilations:o,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=xV(t,e,n);return[r.fused.depthwiseConv2d({x:B("x",t,e,n),filter:B("filter",t,e,n),strides:[s[1],s[2]],pad:a,dataFormat:i,dilations:[o[1],o[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const s=B("outputShape",t,e,n),a=B("strides",t,e,n),i=jS(t,e,n);return[r.conv2dTranspose(B("x",t,e,n),B("filter",t,e,n),s,[a[1],a[2]],i)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const s=B("strides",t,e,n),a=jS(t,e,n),i=B("dilations",t,e,n),o=B("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(B("input",t,e,n),B("filter",t,e,n),[s[1],s[2]],a,o,[i[1],i[2]])]}case"Conv3D":{const s=B("strides",t,e,n),a=B("pad",t,e,n),i=B("dataFormat",t,e,n).toUpperCase(),o=B("dilations",t,e,n);return[r.conv3d(B("x",t,e,n),B("filter",t,e,n),[s[1],s[2],s[3]],a,i,[o[1],o[2],o[3]])]}case"AvgPool":{const s=B("strides",t,e,n),a=B("pad",t,e,n),i=B("kernelSize",t,e,n);return[r.avgPool(B("x",t,e,n),[i[1],i[2]],[s[1],s[2]],a)]}case"MaxPool":{const s=B("strides",t,e,n),a=B("pad",t,e,n),i=B("kernelSize",t,e,n);return[r.maxPool(B("x",t,e,n),[i[1],i[2]],[s[1],s[2]],a)]}case"MaxPoolWithArgmax":{const s=B("strides",t,e,n),a=B("pad",t,e,n),i=B("kernelSize",t,e,n),o=B("includeBatchInIndex",t,e,n),{result:l,indexes:u}=r.maxPoolWithArgmax(B("x",t,e,n),[i[1],i[2]],[s[1],s[2]],a,o);return[l,u]}case"AvgPool3D":{const s=B("strides",t,e,n),a=B("pad",t,e,n),i=B("kernelSize",t,e,n);return[r.avgPool3d(B("x",t,e,n),[i[1],i[2],i[3]],[s[1],s[2],s[3]],a)]}case"MaxPool3D":{const s=B("strides",t,e,n),a=B("pad",t,e,n),i=B("kernelSize",t,e,n);return[r.maxPool3d(B("x",t,e,n),[i[1],i[2],i[3]],[s[1],s[2],s[3]],a)]}case"Dilation2D":{const s=B("strides",t,e,n),a=B("pad",t,e,n),i=B("dilations",t,e,n),o=s[1],l=s[2],u=i[1],c=i[2];return[r.dilation2d(B("x",t,e,n),B("filter",t,e,n),[o,l],a,[u,c],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rke=(t,e,n,r=ta)=>{switch(t.op){case"Fill":{const s=B("shape",t,e,n),a=B("dtype",t,e,n),i=B("value",t,e,n);return[r.fill(s,i,a)]}case"LinSpace":{const s=B("start",t,e,n),a=B("stop",t,e,n),i=B("num",t,e,n);return[r.linspace(s,a,i)]}case"Multinomial":{const s=B("logits",t,e,n),a=B("numSamples",t,e,n),i=B("seed",t,e,n);return[r.multinomial(s,a,i)]}case"OneHot":{const s=B("indices",t,e,n),a=B("depth",t,e,n),i=B("onValue",t,e,n),o=B("offValue",t,e,n),l=B("dtype",t,e,n);return[r.oneHot(s,a,i,o,l)]}case"Ones":return[r.ones(B("shape",t,e,n),B("dtype",t,e,n))];case"OnesLike":return[r.onesLike(B("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(B("shape",t,e,n),B("dtype",t,e,n),B("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(B("shape",t,e,n),B("minval",t,e,n),B("maxval",t,e,n),B("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(B("shape",t,e,n),B("minval",t,e,n),B("maxval",t,e,n),B("seed",t,e,n))];case"Range":{const s=B("start",t,e,n),a=B("stop",t,e,n),i=B("step",t,e,n);return[r.range(s,a,i,B("dtype",t,e,n))]}case"TruncatedNormal":{const s=B("shape",t,e,n),a=B("mean",t,e,n),i=B("stdDev",t,e,n),o=B("seed",t,e,n);return[r.truncatedNormal(s,a,i,B("dtype",t,e,n),o)]}case"Zeros":return[r.zeros(B("shape",t,e,n),B("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(B("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qE(t,e,n){const r=B("boxes",t,e,n),s=B("scores",t,e,n),a=B("maxOutputSize",t,e,n),i=B("iouThreshold",t,e,n),o=B("scoreThreshold",t,e,n),l=B("softNmsSigma",t,e,n);return{boxes:r,scores:s,maxOutputSize:a,iouThreshold:i,scoreThreshold:o,softNmsSigma:l}}const Oke=async(t,e,n,r,s=ta)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:a,scores:i,maxOutputSize:o,iouThreshold:l,scoreThreshold:u,softNmsSigma:c}=qE(t,e,n),d=await s.image.nonMaxSuppressionWithScoreAsync(a,i,o,l,u,c);return[d.selectedIndices,d.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:a,scores:i,maxOutputSize:o,iouThreshold:l,scoreThreshold:u}=qE(t,e,n),c=B("padToMaxOutputSize",t,e,n),d=await s.image.nonMaxSuppressionPaddedAsync(a,i,o,l,u,c);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:a,scores:i,maxOutputSize:o,iouThreshold:l,scoreThreshold:u}=qE(t,e,n);return[await s.image.nonMaxSuppressionAsync(a,i,o,l,u)]}case"Where":{const a=s.cast(B("condition",t,e,n),"bool"),i=[await s.whereAsync(a)];return a.dispose(),i}case"ListDiff":return s.setdiff1dAsync(B("x",t,e,n),B("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ke=(t,e,n,r=ta)=>{switch(t.op){case"LowerBound":{const s=B("sortedSequence",t,e,n),a=B("values",t,e,n);return[r.lowerBound(s,a)]}case"TopKV2":{const s=B("x",t,e,n),a=B("k",t,e,n),i=B("sorted",t,e,n),o=r.topk(s,a,i);return[o.values,o.indices]}case"UpperBound":{const s=B("sortedSequence",t,e,n),a=B("values",t,e,n);return[r.upperBound(s,a)]}case"Unique":{const s=B("x",t,e,n),a=r.unique(s);return[a.values,a.indices]}case"UniqueV2":{const s=B("x",t,e,n),a=B("axis",t,e,n),i=r.unique(s,a);return[i.values,i.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dke=(t,e,n,r=ta)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const s=B("default",t,e,n);return[Qs(t.name,e,n)||s];case"Placeholder":return[Qs(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const c=B("x",t,e,n);return[uc(c)]}case"IdentityN":return B("x",t,e,n).map(c=>uc(c));case"Snapshot":const a=B("x",t,e,n);return[uc(a)];case"Shape":return[r.tensor1d(B("x",t,e,n).shape,"int32")];case"ShapeN":return B("x",t,e,n).map(c=>r.tensor1d(c.shape));case"Size":return[r.scalar(B("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(B("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const i=B("x",t,e,n),o=B("data",t,e,n),l=B("message",t,e,n),u=B("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let c=0;c<o.length;c++)console.log(Array.prototype.slice.call(o[c].dataSync()).slice(0,u));return[i];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pke{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=It(0),this.tensorMap=new Map,js(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return It(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(s=>s.dispose()),this.tensorMap.clear(),be(()=>{const s=rl(n),a=r.length,i=s.length;X(a===i,()=>`The number of elements doesn't match, keys has ${a} elements, the values has ${i} elements.`);for(let o=0;o<a;o++){const l=r[o],u=s[o];js(u),this.tensorMap.set(l,u)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return be(()=>{const s=[];for(let a=0;a<r.length;a++){const i=r[a],o=this.findWithDefault(i,n);s.push(o)}return Ai(s)})}findWithDefault(e,n){const r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mke=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const s=r.getHashTableHandleByName(t.name);if(s!=null)return[s];{const a=B("keyDType",t,e,n),i=B("valueDType",t,e,n),o=new Pke(a,i);return r.addHashTable(t.name,o),[o.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const s=B("tableHandle",t,e,n,r),a=B("keys",t,e,n),i=B("values",t,e,n);return[await r.getHashTableById(s.id).import(a,i)]}case"LookupTableFind":case"LookupTableFindV2":{const s=B("tableHandle",t,e,n,r),a=B("keys",t,e,n),i=B("defaultValue",t,e,n);return[await r.getHashTableById(s.id).find(a,i)]}case"LookupTableSize":case"LookupTableSizeV2":{const s=B("tableHandle",t,e,n,r);return[r.getHashTableById(s.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jke=(t,e,n,r=ta)=>{switch(t.op){case"ResizeBilinear":{const s=B("images",t,e,n),a=B("size",t,e,n),i=B("alignCorners",t,e,n),o=B("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(s,[a[0],a[1]],i,o)]}case"ResizeNearestNeighbor":{const s=B("images",t,e,n),a=B("size",t,e,n),i=B("alignCorners",t,e,n),o=B("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(s,[a[0],a[1]],i,o)]}case"CropAndResize":{const s=B("image",t,e,n),a=B("boxes",t,e,n),i=B("boxInd",t,e,n),o=B("cropSize",t,e,n),l=B("method",t,e,n),u=B("extrapolationValue",t,e,n);return[r.image.cropAndResize(s,a,i,o,l,u)]}case"ImageProjectiveTransformV3":{const s=B("images",t,e,n),a=B("transforms",t,e,n),i=B("outputShape",t,e,n),o=B("fillValue",t,e,n),l=B("interpolation",t,e,n),u=B("fillMode",t,e,n);return[r.image.transform(s,a,l.toLowerCase(),u.toLowerCase(),o,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lke=(t,e,n,r=ta)=>{switch(t.op){case"Equal":return[r.equal(B("a",t,e,n),B("b",t,e,n))];case"NotEqual":return[r.notEqual(B("a",t,e,n),B("b",t,e,n))];case"Greater":return[r.greater(B("a",t,e,n),B("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(B("a",t,e,n),B("b",t,e,n))];case"Less":return[r.less(B("a",t,e,n),B("b",t,e,n))];case"LessEqual":return[r.lessEqual(B("a",t,e,n),B("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(B("a",t,e,n),B("b",t,e,n))];case"LogicalNot":return[r.logicalNot(B("a",t,e,n))];case"LogicalOr":return[r.logicalOr(B("a",t,e,n),B("b",t,e,n))];case"Select":case"SelectV2":return[r.where(B("condition",t,e,n),B("a",t,e,n),B("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(B("a",t,e,n),B("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fke=(t,e,n,r=ta)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(B("a",t,e,n),B("b",t,e,n),B("transposeA",t,e,n),B("transposeB",t,e,n))];case"Einsum":return[r.einsum(B("equation",t,e,n),...B("tensors",t,e,n))];case"Transpose":return[r.transpose(B("x",t,e,n),B("perm",t,e,n))];case"_FusedMatMul":const[s,a]=B("fusedOps",t,e,n),i=s==="biasadd",o=a==="prelu",l=B("numArgs",t,e,n),u=B("leakyreluAlpha",t,e,n);if(i){if(o&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,d]=B("args",t,e,n);return[r.fused.matMul({a:B("a",t,e,n),b:B("b",t,e,n),transposeA:B("transposeA",t,e,n),transposeB:B("transposeB",t,e,n),bias:c,activation:a,preluActivationWeights:d,leakyreluAlpha:u})];case"MatrixBandPart":return[r.linalg.bandPart(B("a",t,e,n),B("numLower",t,e,n),B("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zke=(t,e,n,r=ta)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(B("x",t,e,n),B("axis",t,e,n),B("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(B("x",t,e,n),B("mean",t,e,n),B("variance",t,e,n),B("offset",t,e,n),B("scale",t,e,n),B("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(B("x",t,e,n),B("mean",t,e,n),B("variance",t,e,n),B("offset",t,e,n),B("scale",t,e,n),B("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(B("x",t,e,n),B("radius",t,e,n),B("bias",t,e,n),B("alpha",t,e,n),B("beta",t,e,n))];case"Softmax":return[r.softmax(B("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(B("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bke=(t,e,n,r=ta)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:s,outputDenseValues:a}=r.raggedGather(B("paramsNestedSplits",t,e,n),B("paramsDenseValues",t,e,n),B("indices",t,e,n),B("outputRaggedRank",t,e,n));return s.concat(a)}case"RaggedRange":{const{rtNestedSplits:s,rtDenseValues:a}=r.raggedRange(B("starts",t,e,n),B("limits",t,e,n),B("splits",t,e,n));return[s,a]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(B("shape",t,e,n),B("values",t,e,n),B("defaultValue",t,e,n),B("rowPartitionTensors",t,e,n),B("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uke=(t,e,n,r=ta)=>{switch(t.op){case"Max":{const o=B("axis",t,e,n),l=B("keepDims",t,e,n);return[r.max(B("x",t,e,n),o,l)]}case"Mean":{const o=B("axis",t,e,n),l=B("keepDims",t,e,n);return[r.mean(B("x",t,e,n),o,l)]}case"Min":{const o=B("axis",t,e,n),l=B("keepDims",t,e,n);return[r.min(B("x",t,e,n),o,l)]}case"Sum":{const o=B("axis",t,e,n),l=B("keepDims",t,e,n);return[r.sum(B("x",t,e,n),o,l)]}case"All":{const o=B("axis",t,e,n),l=B("keepDims",t,e,n);return[r.all(B("x",t,e,n),o,l)]}case"Any":{const o=B("axis",t,e,n),l=B("keepDims",t,e,n);return[r.any(B("x",t,e,n),o,l)]}case"ArgMax":{const o=B("axis",t,e,n);return[r.argMax(B("x",t,e,n),o)]}case"ArgMin":{const o=B("axis",t,e,n);return[r.argMin(B("x",t,e,n),o)]}case"Prod":{const o=B("axis",t,e,n),l=B("keepDims",t,e,n);return[r.prod(B("x",t,e,n),o,l)]}case"Cumprod":{const o=B("axis",t,e,n),l=B("exclusive",t,e,n),u=B("reverse",t,e,n);return[r.cumprod(B("x",t,e,n),o,l,u)]}case"Cumsum":{const o=B("axis",t,e,n),l=B("exclusive",t,e,n),u=B("reverse",t,e,n);return[r.cumsum(B("x",t,e,n),o,l,u)]}case"Bincount":const s=B("x",t,e,n),a=B("weights",t,e,n),i=B("size",t,e,n);return[r.bincount(s,a,i)];case"DenseBincount":{const o=B("x",t,e,n),l=B("weights",t,e,n),u=B("size",t,e,n),c=B("binaryOutput",t,e,n);return[r.denseBincount(o,l,u,c)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vke=(t,e,n,r=ta)=>{switch(t.op){case"ConcatV2":case"Concat":{const s=B("n",t,e,n),a=B("axis",t,e,n);let i=B("tensors",t,e,n);return i=i.slice(0,s),[r.concat(i,a)]}case"Gather":{const s=B("x",t,e,n),a=B("indices",t,e,n);return[r.gather(s,r.cast(a,"int32"),0)]}case"GatherV2":{const s=B("axis",t,e,n),a=B("batchDims",t,e,n),i=B("x",t,e,n),o=B("indices",t,e,n);return[r.gather(i,r.cast(o,"int32"),s,a)]}case"Reverse":{const s=B("dims",t,e,n),a=[];for(let o=0;o<s.length;o++)s[o]&&a.push(o);const i=B("x",t,e,n);return[r.reverse(i,a)]}case"ReverseV2":{const s=B("axis",t,e,n),a=B("x",t,e,n);return[r.reverse(a,s)]}case"Slice":{const s=B("begin",t,e,n),a=B("size",t,e,n);return[r.slice(B("x",t,e,n),s,a)]}case"StridedSlice":{const s=B("begin",t,e,n),a=B("end",t,e,n),i=B("strides",t,e,n),o=B("beginMask",t,e,n),l=B("endMask",t,e,n),u=B("ellipsisMask",t,e,n),c=B("newAxisMask",t,e,n),d=B("shrinkAxisMask",t,e,n),h=B("x",t,e,n);return[r.stridedSlice(h,s,a,i,o,l,u,c,d)]}case"Pack":return be(()=>{const s=B("axis",t,e,n),a=B("tensors",t,e,n),i=a[0].shape,o=r.squeeze(a[0]).shape,l=a.map(u=>{const c=Xt(u.shape,i);if(!c&&!Xt(r.squeeze(u).shape,o))throw new Error("the input tensors shape does not match");return c?u:r.reshape(u,i)});return[r.stack(l,s)]});case"Unpack":{const s=B("axis",t,e,n),a=B("tensor",t,e,n);return r.unstack(a,s)}case"Tile":{const s=B("reps",t,e,n);return[r.tile(B("x",t,e,n),s)]}case"Split":case"SplitV":{const s=B("axis",t,e,n),a=B("numOrSizeSplits",t,e,n),i=B("x",t,e,n);return r.split(i,a,s)}case"ScatterNd":{const s=B("indices",t,e,n),a=B("values",t,e,n),i=B("shape",t,e,n);return[r.scatterND(s,a,i)]}case"GatherNd":{const s=B("x",t,e,n),a=B("indices",t,e,n);return[r.gatherND(s,a)]}case"SparseToDense":{const s=B("sparseIndices",t,e,n),a=B("outputShape",t,e,n),i=B("sparseValues",t,e,n),o=B("defaultValue",t,e,n);return[r.sparseToDense(s,i,a,i.dtype===o.dtype?o:r.cast(o,i.dtype))]}case"TensorScatterUpdate":{const s=B("indices",t,e,n),a=B("values",t,e,n),i=B("tensor",t,e,n);return[r.tensorScatterUpdate(i,s,a)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wke=(t,e,n,r=ta)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:s,outputValues:a,emptyRowIndicator:i,reverseIndexMap:o}=r.sparse.sparseFillEmptyRows(B("indices",t,e,n),B("values",t,e,n),B("denseShape",t,e,n),B("defaultValue",t,e,n));return[s,a,i,o]}case"SparseReshape":{const{outputIndices:s,outputShape:a}=r.sparse.sparseReshape(B("inputIndices",t,e,n),B("inputShape",t,e,n),B("newShape",t,e,n));return[s,a]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(B("data",t,e,n),B("indices",t,e,n),B("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(B("data",t,e,n),B("indices",t,e,n),B("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gke=(t,e,n,r=ta)=>{switch(t.op){case"FFT":return[r.fft(B("x",t,e,n))];case"IFFT":return[r.ifft(B("x",t,e,n))];case"RFFT":return[r.rfft(B("x",t,e,n))];case"IRFFT":return[r.irfft(B("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hke=(t,e,n,r=ta)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(B("input",t,e,n),B("pattern",t,e,n),B("rewrite",t,e,n),B("replaceGlobal",t,e,n))];case"StringNGrams":{const{nGrams:s,nGramsSplits:a}=r.string.stringNGrams(B("data",t,e,n),B("dataSplits",t,e,n),B("separator",t,e,n),B("nGramWidths",t,e,n),B("leftPad",t,e,n),B("rightPad",t,e,n),B("padWidth",t,e,n),B("preserveShortSequences",t,e,n));return[s,a]}case"StringSplit":{const{indices:s,values:a,shape:i}=r.string.stringSplit(B("input",t,e,n),B("delimiter",t,e,n),B("skipEmpty",t,e,n));return[s,a,i]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(B("input",t,e,n),B("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qke=(t,e,n,r=ta)=>{switch(t.op){case"Cast":return[r.cast(B("x",t,e,n),B("dtype",t,e,n))];case"ExpandDims":{const s=B("axis",t,e,n);return[r.expandDims(B("x",t,e,n),s)]}case"Squeeze":{const s=B("axis",t,e,n);return[r.squeeze(B("x",t,e,n),s)]}case"Reshape":return[r.reshape(B("x",t,e,n),B("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(B("x",t,e,n),B("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(B("x",t,e,n),B("padding",t,e,n),B("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(B("x",t,e,n),B("padding",t,e,n),B("constantValue",t,e,n))];case"SpaceToBatchND":{const s=B("blockShape",t,e,n),a=B("paddings",t,e,n);return[r.spaceToBatchND(B("x",t,e,n),s,a)]}case"BatchToSpaceND":{const s=B("blockShape",t,e,n),a=B("crops",t,e,n);return[r.batchToSpaceND(B("x",t,e,n),s,a)]}case"DepthToSpace":{const s=B("blockSize",t,e,n),a=B("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(B("x",t,e,n),s,a)]}case"BroadcastTo":return[r.broadcastTo(B("x",t,e,n),B("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(B("s0",t,e,n),B("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vV(t,e,n,r,s=be){const a=((i,o,l)=>{switch(i.category){case"arithmetic":return s(()=>Ske(i,o,l));case"basic_math":return s(()=>Cke(i,o,l));case"control":return Eke(i,o,l);case"convolution":return s(()=>Ake(i,o,l));case"creation":return s(()=>Rke(i,o,l));case"dynamic":return Oke(i,o,l);case"evaluation":return s(()=>_ke(i,o,l));case"image":return s(()=>jke(i,o,l));case"graph":return s(()=>Dke(i,o,l));case"logical":return s(()=>Lke(i,o,l));case"matrices":return s(()=>Fke(i,o,l));case"normalization":return s(()=>zke(i,o,l));case"ragged":return s(()=>Bke(i,o,l));case"reduction":return s(()=>Uke(i,o,l));case"slice_join":return s(()=>Vke(i,o,l));case"sparse":return s(()=>Wke(i,o,l));case"spectral":return s(()=>Gke(i,o,l));case"string":return s(()=>Hke(i,o,l));case"transformation":return s(()=>qke(i,o,l));case"hash_table":return Mke(i,o,l,r);case"custom":const u=Vee(i.op);if(u&&u.customExecutor)return u.customExecutor(new wke(i,o,l));throw TypeError(`Custom op ${i.op} is not registered.`);default:throw TypeError(`Unknown op '${i.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return hh(a)?a.then(i=>[].concat(i)):[].concat(a)}class wV{constructor(e={},n={},r={},s={},a){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=s,this.parseNodeNameCache=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SV(t,e,n,r){const s=new Set,a=[];let i=null,o=null;const l=new Set,u=new Set(Object.keys(t).map(h=>ki(h)[0]));r=r||[];const c=new Set(r.map(h=>ki(h.name)[0])),d=[...e];for(;d.length>0;){const h=d.pop();if((Uf(h)||tNe(h)||nNe(h))&&i==null&&(i=h,o=i.children.map(m=>m.name).filter(m=>s.has(m))),s.add(h.name),n[h.name]==null&&!u.has(h.name)&&!c.has(h.name)){if(h.inputs.length===0){a.push(h.name);continue}h.inputs.forEach(m=>{l.has(m.name)||(l.add(m.name),d.push(m))})}}return{inputs:t,outputs:e,usedNodes:s,missingInputs:a,dynamicNode:i,syncInputs:o}}function Kke(t,e){const{usedNodes:n,inputs:r}=e,s=Object.keys(r).map(b=>ki(b)[0]).map(b=>t.nodes[b]),a=t.initNodes||[],i=b=>n.has(typeof b=="string"?b:b.name);function o(b){return[...new Map(b.map(w=>[w.name,w])).values()]}const l=o([...s,...t.weights,...a]).filter(i),u=o([...l,...Object.values(t.nodes)]).filter(i),c=new Map(u.map(b=>[b.name,b])),d={};for(const b of u){d[b.name]=d[b.name]||0;for(const w of b.children)i(w)||(d[w.name]=Number.POSITIVE_INFINITY),d[w.name]=(d[w.name]||0)+1}const h=Object.entries(d).filter(([,b])=>b===0).map(([b])=>b),m=[...h];for(;h.length>0;){const b=h.pop(),w=c.get(b);for(const C of w.children.filter(i))--d[C.name]===0&&(m.push(C.name),h.push(C.name))}const g=m.map(b=>c.get(b)),y=Xke(g,l);return Yke(y,l),y}function Xke(t,e){const n=new Map(t.map(i=>[i.name,i])),r=e.map(i=>i.name),s=new Set(r);for(;r.length>0;){const i=r.pop(),o=n.get(i);for(const l of o.children)!n.has(l.name)||s.has(l.name)||(s.add(l.name),r.push(l.name))}return t.filter(i=>s.has(i.name))}class Hw extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function Yke(t,e){const n=new Map(t.map((o,l)=>[o.name,l])),r=new Set(e.map(o=>o.name)),s=o=>r.has(typeof o=="string"?o:o.name),a=new Set(t.map(o=>o.name)),i=o=>a.has(typeof o=="string"?o:o.name);for(const o of t){for(const l of o.children.filter(i)){if(!n.has(l.name))throw new Hw(`Child ${l.name} of node ${o.name} is unreachable.`);if(n.get(o.name)>n.get(l.name))throw new Hw(`Node ${o.name} is scheduled to run after its child ${l.name}.`)}if(!s(o))for(const l of o.inputs){if(!n.has(l.name))throw new Hw(`Input ${l.name} of node ${o.name} is unreachable.`);if(n.get(l.name)>n.get(o.name))throw new Hw(`Node ${o.name} is scheduled to run before its input ${l.name}.`)}}}function Qke(t){const e=new Map(t.map((o,l)=>[o.name,l])),n=Number.MAX_SAFE_INTEGER,r=t.map((o,l)=>Uf(o)?n:l),s=o=>{const l=r[e.get(o.name)];return l??-1},a=t.map((o,l)=>o.children.map(s).reduce((u,c)=>Math.max(u,c),r[l])),i=new Map;for(let o=0;o<t.length;++o){const l=a[o];if(l===n)continue;const u=t[o],c=t[l];i.has(c.name)||i.set(c.name,[]),i.get(c.name).push(u)}return i}const Zke=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),Jke=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),eNe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Uf(t){return Zke.has(t.op)}function tNe(t){return Jke.has(t.op)}function nNe(t){return eNe.has(t.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x2{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(s=>s.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new x2(e.functions[r],this)})}getCompilationKey(e,n){const r=e.map(a=>a.name).sort(),s=n.map(a=>a.name).sort();return r.join(this.SEPARATOR)+"--"+s.join(this.SEPARATOR)}compile(e,n){const r=SV(e,n,this.weightMap,this._initNodes),{missingInputs:s,dynamicNode:a,syncInputs:i}=r;if(a!=null)throw new Error(`This execution contains the node '${a.name}', which has the dynamic op '${a.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${i}]`);if(s.length>0){const u=n.map(d=>d.name),c=Object.keys(e);throw new Error(`Cannot compute the outputs [${u}] from the provided inputs [${c}]. Missing the following inputs: [${s}]`)}const o=Kke(this.graph,r),l=Qke(o);return{orderedNodes:o,nodeLiveUntilMap:l}}cloneAndKeepTensor(e){if(e==null)return null;const n=e.clone();return js(n),n}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const s=r.map(h=>this.graph.nodes[ki(h)[0]]),a=n.map(h=>ki(h)[0]),i=new Set(a);let o=a.map(h=>this.graph.nodes[h]);o.length===0&&(o=this._outputs);const l=this.getCompilationKey(s,o);let u=this.compiledMap.get(l);u==null&&(u=this.compile(e,o),this.compiledMap.set(l,u));try{this.keepIntermediateTensors=ve().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}const c={},d={};return be(()=>{const h=new wV(this.weightMap,c,d,this.functionExecutorMap,this.parseNodeNameCache),m=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(w=>{const[C,k]=ki(w,h),T=[];T[k]=e[w],m[C]=T,this.keepIntermediateTensors&&(this.clonedTensorsMap[C]=this.cloneTensorList(T))});const g=this.getFrozenTensorIds(m),{orderedNodes:y,nodeLiveUntilMap:b}=u;for(const w of y){if(m[w.name])continue;const C=vV(w,m,h,this._resourceManager);if(hh(C))throw new Error(`The execution of the op '${w.op}' returned a promise. Please use model.executeAsync() instead.`);m[w.name]=C,this.keepIntermediateTensors&&(this.clonedTensorsMap[w.name]=this.cloneTensorList(C)),this.checkTensorForDisposalWithNodeLiveUntilInfo(w,m,h,g,i,b.get(w.name))}return this.parent==null&&h.dispose(g),n.map(w=>Qs(w,m,h))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(s=>s.id)));return new Set(n)}checkTensorForDisposal(e,n,r,s,a,i,o){if(!(Uf(n)||i.has(e))){for(const l of r[e])l!=null&&(o[l.id]=(o[l.id]||0)+n.children.length);for(const l of n.inputs){if(Uf(l))continue;const u=mV(l.name,r,s);if(u!=null)for(const c of u){if(!c||c.kept||a.has(c.id))continue;const d=o[c.id];d===1?(c.dispose(),delete o[c.id]):d!=null&&o[c.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,s,a,i){function o(l){return Uf(l)||a.has(l.name)}if(!(Uf(e)||i==null))for(const l of i){if(o(l))continue;const u=mV(l.name,n,r);for(const c of u)!c||c.kept||s.has(c.id)||c.dispose()}}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,n,r=!1,s={},a={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=ve().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}const i=new wV(this.weightMap,s,a,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const o=await this.executeWithControlFlow(e,i,n,r),l=n.map(h=>Qs(h,o,i)),u=l.map(h=>h.id),c=Object.keys(e).map(h=>e[h].id),d=new Set([...u,...c,...this.weightIds]);return Object.values(o).forEach(h=>{h.forEach(m=>{m&&!m.isDisposed&&!d.has(m.id)&&m.dispose()})}),this.parent==null&&i.dispose(d),l}async executeFunctionAsync(e,n,r){const s=e.reduce((a,i,o)=>(a[this.inputs[o].name]=i,a),{});return this._executeAsync(s,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,s){const a=Object.keys(e),i=a.map(T=>this.graph.nodes[ki(T)[0]]),o=r.map(T=>ki(T)[0]),l=new Set(o);let u=o.map(T=>this.graph.nodes[T]);u.length===0&&(u=this._outputs);const{usedNodes:c,missingInputs:d,dynamicNode:h,syncInputs:m}=SV(e,u,this.weightMap,this._initNodes),g=[...i,...this.graph.weights,...this._initNodes||[]].map(T=>({node:T,contexts:n.currentContext})),y=Object.assign({},this.weightMap);Object.keys(e).forEach(T=>{const[N,I]=ki(T),A=[];A[I]=e[T],y[N]=A});const b={},w=this.getFrozenTensorIds(y),C={};for(;g.length>0;){const T=this.processStack(i,g,n,y,C,w,l,b,c);await Promise.all(T)}h==null&&!s&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const k=u.filter(T=>!Uf(T)&&!Qs(T.name,y,n)).map(T=>T.name);if(k.length>0){let T="";throw h!=null&&(T=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${m}]`),new Error(`Cannot compute the outputs [${k}] from the provided inputs [${a}]. Consider providing the following inputs: [${d}]. ${T}`)}return y}processStack(e,n,r,s,a,i,o,l,u){const c=[];for(;n.length>0;){const d=n.pop();r.currentContext=d.contexts;let h="";if(d.node.op==="Enter"&&B("isConstant",d.node,s,r)&&([h]=lc(d.node.name,r)),s[d.node.name]==null){const m=vV(d.node,s,r,this._resourceManager);h||([h]=lc(d.node.name,r));const g=r.currentContext;hh(m)?c.push(m.then(y=>(s[h]=y,this.keepIntermediateTensors&&(this.clonedTensorsMap[h]=this.cloneTensorList(y)),r.currentContext=g,this.checkTensorForDisposal(h,d.node,s,r,i,o,l),this.processChildNodes(d.node,n,r,s,a,u),y))):(s[h]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[h]=this.cloneTensorList(m)),this.checkTensorForDisposal(h,d.node,s,r,i,o,l),this.processChildNodes(d.node,n,r,s,a,u))}else this.processChildNodes(d.node,n,r,s,a,u)}return c}processChildNodes(e,n,r,s,a,i){e.children.forEach(o=>{const[l]=lc(o.name,r);a[l]||!i.has(o.name)||(o.op==="Merge"?o.inputNames.some(u=>!!Qs(u,s,r))&&(a[l]=!0,n.push({contexts:r.currentContext,node:o})):o.inputNames.every(u=>!!Qs(u,s,r))&&(a[l]=!0,n.push({contexts:r.currentContext,node:o})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[s]=ki(n),a=this.graph.nodes[s];if(a.attrParams.shape&&a.attrParams.shape.value){const i=a.attrParams.shape.value,o=i.length===r.shape.length&&r.shape.every((l,u)=>i[u]===-1||i[u]===l);X(o,()=>`The shape of dict['${a.name}'] provided in model.execute(dict) must be [${i}], but was [${r.shape}]`)}a.attrParams.dtype&&a.attrParams.dtype.value&&X(r.dtype===a.attrParams.dtype.value,()=>`The dtype of dict['${a.name}'] provided in model.execute(dict) must be ${a.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var n,r;const s={};for(const a in e){const i=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[a];i!=null?s[i.name]=e[a]:s[a]=e[a]}return s}checkInputs(e){const n=Object.keys(e).filter(r=>{const[s]=ki(r);return this.graph.nodes[s]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var r,s;const a=(s=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||s===void 0?void 0:s[n];return a!=null?a.name:n},{})}checkOutputs(e){e.forEach(n=>{const[r]=ki(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class rNe{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sNe="?tfjs-format=file",aNe="model.json";class iNe{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},r=HQ){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new rNe}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return hh(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){const n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const n=await yY(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)}loadWithWeightMap(e,n){this.artifacts=e;const r=this.artifacts.modelTopology;let s=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const a=this.artifacts.userDefinedMetadata;a.signature!=null&&(s=a.signature),a.structuredOutputKeys!=null&&(this.structuredOutputKeys=a.structuredOutputKeys)}if(this.signature=s,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new x2(gV.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const a=gV.Instance.transformGraph(e.modelInitializer);this.initializer=new x2(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const n=e instanceof Pn?[e]:e,r={};return n.forEach((s,a)=>r[this.structuredOutputKeys[a]]=s),r}return e}predict(e,n){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,n){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var n;if(!(e instanceof Pn)&&!Array.isArray(e)){const a=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(a!=null)for(const i in a){const o=a[i];o.resourceId!=null&&(e[i]=this.resourceIdToCapturedInput[o.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let s=0;return this.inputNodes.reduce((a,i)=>{var o,l,u;const c=(u=(l=(o=this.signature)===null||o===void 0?void 0:o.inputs)===null||l===void 0?void 0:l[i])===null||u===void 0?void 0:u.resourceId;return c!=null?a[i]=this.resourceIdToCapturedInput[c]:a[i]=e[s++],a},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,r=Object.keys(n);for(let s=0;s<r.length;s++){const a=r[s],i=n[a];this.resourceIdToCapturedInput[i.resourceId]=e[s]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Rt(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function Om(t,e={},n=HQ){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=oNe(t));const r=new iNe(t,e,n);return await r.load(),r}function oNe(t){return t.endsWith("/")||(t=t+"/"),`${t}${aNe}${sNe}`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var CV;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(CV||(CV={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function St(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&X(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lNe=Mj;class eT extends ZC{nextDataId(){return eT.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new FM(this,Aa())}write(e,n,r){this.firstUse&&(this.firstUse=!1,ve().get("IS_NODE")&&to(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const s={id:this.nextDataId()};return this.data.set(s,{values:e,dtype:r,refCount:1}),s}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&pg(r[0])){const a=r.map(i=>yc(i));s=this.write(a,e,n)}else s=this.write(r,e,n);return{dataId:s,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,s,a){this.data.set(e,{values:n,dtype:s,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const s=this.readSync(r.real.dataId),a=this.readSync(r.imag.dataId);return Fl(s,a)}return $S(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>Ml(s));return Wt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Wt(e.shape,e.dtype,n)}makeOutput(e,n,r){return Aa().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=ti();return e(),{kernelMs:ti()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){St([e],"where");const n=this.readSync(e.dataId);return lNe(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}eT.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hee(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const uNe=t=>{const{x:e}=t.inputs,n=t.backend;St(e,"abs");let r=new Float32Array(ye(e.shape));const s=n.data.get(e.dataId).values;return r=Hee(s),n.makeOutput(r,e.shape,e.dtype)},cNe={kernelName:zx,backendName:"cpu",kernelFunc:uNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ss(t){return(e,n,r,s,a)=>{const i=_t(e,n),o=i.length,l=$t(i),u=ye(i),c=$s(a,u),d=e.length,h=n.length,m=$t(e),g=$t(n),y=_d(e,i),b=_d(n,i);if(y.length+b.length===0)for(let w=0;w<c.length;++w)c[w]=t(r[w%r.length],s[w%s.length]);else for(let w=0;w<c.length;++w){const C=mg(w,o,l),k=C.slice(-d);y.forEach(A=>k[A]=0);const T=bu(k,d,m),N=C.slice(-h);b.forEach(A=>N[A]=0);const I=bu(N,h,g);c[w]=t(r[T],s[I])}return[c,i]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ni(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,a=n.data.get(r.dataId).values,i=n.data.get(s.dataId).values,o=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(o.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",a),imag:n.makeTensorInfo(s.shape,"float32",i)},o}const dNe={kernelName:ik,backendName:"cpu",kernelFunc:Ni};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v2(t,e,n="float32"){if(n==="complex64"){const s=v2(t,e,"float32"),a=v2(t,e,"float32");return Ni({inputs:{real:s,imag:a},backend:t})}const r=Js(ye(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iu(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const fNe={kernelName:Mg,backendName:"cpu",kernelFunc:Iu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kh(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.real,a=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,a)}const hNe={kernelName:Dk,backendName:"cpu",kernelFunc:kh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qee(t,e,n,r){if(r==="int32"){const s=Int32Array.from(t);return[e,"int32",s]}if(r==="bool"){const s=Mh([0],n),[a,i]=ss((o,l)=>o!==l?1:0)(e,[],t,s,"bool");return[i,"bool",a]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Fd(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:a}=r;if(a==="complex64"){if(s.dtype==="complex64")return Iu({inputs:{x:s},backend:n});const c=v2(n,s.shape,s.dtype),d=Fd({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),h=Ni({inputs:{real:d,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),h}if(s.dtype==="complex64"){const c=kh({inputs:{input:s},backend:n}),d=Fd({inputs:{x:c},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(c),d}if(!UM(s.dtype,a)){const c=Iu({inputs:{x:s},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:a}}const i=n.data.get(s.dataId).values,[o,l,u]=qee(i,s.shape,s.dtype,a);return n.makeTensorInfo(o,l,u)}const pNe={kernelName:Cg,backendName:"cpu",kernelFunc:Fd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function As(t,e,n,r){return n==null?({inputs:s,backend:a})=>{const{a:i,b:o}=s,l=a;St([i,o],t);const u=l.data.get(i.dataId).values,c=l.data.get(o.dataId).values,d=i.dtype==="string"?zl(u):u,h=i.dtype==="string"?zl(c):c,m=r||i.dtype,[g,y]=e(i.shape,o.shape,d,h,m);return l.makeTensorInfo(y,m,g)}:({inputs:s,backend:a})=>{const{a:i,b:o}=s,l=a;if(i.dtype==="complex64"||o.dtype==="complex64"){const u=Fd({inputs:{x:i},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),d=c.complexTensorInfos.real,h=c.complexTensorInfos.imag,m=l.data.get(d.dataId).values,g=l.data.get(h.dataId).values,y=Fd({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),b=l.data.get(y.dataId),w=b.complexTensorInfos.real,C=b.complexTensorInfos.imag,k=l.data.get(w.dataId).values,T=l.data.get(C.dataId).values,[N,I,A]=n(i.shape,o.shape,m,g,k,T),D=l.makeTensorInfo(A,"float32",N),P=l.makeTensorInfo(A,"float32",I),R=Ni({inputs:{real:D,imag:P},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(y),l.disposeIntermediateTensorInfo(D),l.disposeIntermediateTensorInfo(P),R}else{const u=l.data.get(i.dataId).values,c=l.data.get(o.dataId).values,d=r||i.dtype,[h,m]=e(i.shape,o.shape,u,c,d);return l.makeTensorInfo(m,d,h)}}}function x4(t){return(e,n,r,s,a,i)=>{const o=_t(e,n),l=ye(o),u=o.length,c=$t(o),d=$s("float32",l),h=$s("float32",l),m=_d(e,o),g=_d(n,o),y=Fl(r,s),b=Fl(a,i),w=e.length,C=$t(e),k=n.length,T=$t(n);if(m.length+g.length===0)for(let N=0;N<d.length;N++){const I=N%y.length,A=N%b.length,D=t(y[I*2],y[I*2+1],b[A*2],b[A*2+1]);d[N]=D.real,h[N]=D.imag}else for(let N=0;N<d.length;N++){const I=mg(N,u,c),A=I.slice(-w);m.forEach(F=>A[F]=0);const D=bu(A,w,C),P=I.slice(-k);g.forEach(F=>P[F]=0);const R=bu(P,k,T),O=t(y[D*2],y[D*2+1],b[R*2],b[R*2+1]);d[N]=O.real,h[N]=O.imag}return[d,h,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kee=ss((t,e)=>t+e),mNe=x4((t,e,n,r)=>({real:t+n,imag:e+r})),_m=As(Ph,Kee,mNe),gNe={kernelName:Ph,backendName:"cpu",kernelFunc:_m};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v4(t,e,n,r,s){const a=ye(r),i=Js(s,n);for(let o=0;o<t.length;o++){const l=t[o];if(l<0)throw new Error("Input x must be non-negative!");l>=s||(a>0?i[l]+=e[o]:i[l]+=1)}return i}function Xee(t,e,n,r=!1){const s=t.shape[0],a=t.shape[1],i=Wt([s,n],e.dtype);for(let o=0;o<s;o++)for(let l=0;l<a;l++){const u=t.get(o,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?i.set(1,o,u):e.size>0?i.set(i.get(o,u)+e.get(o,l),o,u):i.set(i.get(o,u)+1,o,u))}return i}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yee=ss((t,e)=>t&e),yNe=As(sk,Yee),bNe={kernelName:sk,backendName:"cpu",kernelFunc:yNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zu(t){return(e,n,r)=>{const s=Fr(n,e.length);for(let a=0;a<e.length;++a)s[a]=t(e[a],r);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vn(t,e,n){const r=zu(e);return Yd(t,r,n)}function Yd(t,e,n){return({inputs:r,attrs:s,backend:a})=>{const{x:i}=r;St(i,t);const o=a,l=o.data.get(i.dataId).values;let u;if(i.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");u=zl(l)}else u=l;const c=n||i.dtype,d=e(u,c,s);return o.makeTensorInfo(i.shape,c,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qee=zu(t=>Math.ceil(t)),xNe=Yd(kg,Qee),vNe={kernelName:kg,backendName:"cpu",kernelFunc:xNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zee(t,e,n,r){const s=Fr(n,ye(e));if(r&&n!=="string"){let a=0;t.forEach(i=>{const o=ye(i.shape);s.set(i.vals,a),a+=o})}else{let a=0;t.forEach(i=>{const o=n==="string"?zl(i.vals):i.vals;let l=0;for(let u=0;u<i.shape[0];++u){const c=u*e[1]+a;for(let d=0;d<i.shape[1];++d)s[c+d]=o[l++]}a+=i.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jee=ss((t,e)=>t===e?1:0),ete=As(nv,Jee,null,"bool"),wNe={kernelName:nv,backendName:"cpu",kernelFunc:ete};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tte=zu(t=>Math.exp(t)),nte=Yd(Rg,tte,"float32"),SNe={kernelName:Rg,backendName:"cpu",kernelFunc:nte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rte=zu(t=>Math.expm1(t)),CNe=Yd(Og,rte),kNe={kernelName:Og,backendName:"cpu",kernelFunc:CNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ste=zu(t=>Math.floor(t)),NNe=Yd(_g,ste),TNe={kernelName:_g,backendName:"cpu",kernelFunc:NNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ate=ss((t,e)=>Math.floor(t/e)),$Ne=As(Dg,ate,null,"int32"),INe={kernelName:Dg,backendName:"cpu",kernelFunc:$Ne};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ite(t,e,n,r,s,a,i,o,l){const u=Wt([r,a],n);for(let c=0;c<r;c++){const d=[];let h=0;for(let m=0;m<s;m++){const g=t[c*s+m];h+=g*i[m],d.push(g)}if(h<0||h>=l/a)throw new Error(`Invalid indices: ${d} does not index into ${o}`);for(let m=0;m<a;m++)u.values[c*a+m]=e.get(...e.indexToLoc(h*a+m))}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ote(t,e,n){const r=Wt(n,t.dtype);for(let s=0;s<r.size;++s){const i=r.indexToLoc(s).slice(),o=i[0],l=i[2],u=e.locToIndex([o,l]);i[2]=e.values[u];const c=t.locToIndex(i);0<=c&&c<t.values.length&&(r.values[s]=t.values[c])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lte=ss((t,e)=>t>e?1:0),ENe=As(iv,lte,null,"bool"),ANe={kernelName:iv,backendName:"cpu",kernelFunc:ENe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ute=ss((t,e)=>t>=e?1:0),RNe=As(Pg,ute,null,"bool"),ONe={kernelName:Pg,backendName:"cpu",kernelFunc:RNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cte=ss((t,e)=>t<e?1:0),_Ne=As(lv,cte,null,"bool"),DNe={kernelName:lv,backendName:"cpu",kernelFunc:_Ne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dte=ss((t,e)=>t<=e?1:0),PNe=As(uv,dte,null,"bool"),MNe={kernelName:uv,backendName:"cpu",kernelFunc:PNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fte(t,e,n){const r=(e-t)/(n-1),s=Js(n,"float32");s[0]=t;for(let a=1;a<s.length;a++)s[a]=s[a-1]+r;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hte=zu(t=>Math.log(t)),jNe=Yd(zg,hte),LNe={kernelName:zg,backendName:"cpu",kernelFunc:jNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pte(t,e,n,r){const s=$s(r,ye(n));for(let a=0;a<s.length;++a){const i=a*e;let o=t[i];for(let l=0;l<e;++l){const u=t[i+l];(Number.isNaN(u)||u>o)&&(o=u)}s[a]=o}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mte=ss((t,e)=>Math.max(t,e)),FNe=As(Ug,mte),zNe={kernelName:Ug,backendName:"cpu",kernelFunc:FNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gte=ss((t,e)=>Math.min(t,e)),BNe=As(Vg,gte),UNe={kernelName:Vg,backendName:"cpu",kernelFunc:BNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w4=ss((t,e)=>t*e),VNe=x4((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),tT=As(Gg,w4,VNe),WNe={kernelName:Gg,backendName:"cpu",kernelFunc:tT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yte(t,e,n){const r=Vd(-1,n);return w4([],e,r,t,n)}function GNe(t){const{inputs:e,backend:n}=t,{x:r}=e;St(r,"neg");const s=n.data.get(r.dataId).values,[a,i]=yte(s,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,a)}const HNe={kernelName:vv,backendName:"cpu",kernelFunc:GNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bte=ss((t,e)=>t!==e?1:0),qNe=As(wv,bte,null,"bool"),KNe={kernelName:wv,backendName:"cpu",kernelFunc:qNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S4(t,e,n,r,s){const a=e.length,i=ye(e),o=$t(e),l=$t(s),u=$s(n,ye(s));for(let c=0;c<i;++c){const d=mg(c,a,o),h=new Array(d.length);for(let g=0;g<h.length;g++)h[g]=d[r[g]];const m=bu(h,a,l);u[m]=t[c]}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ci(t){const{inputs:e,attrs:n,backend:r}=t,{x:s}=e,{perm:a}=n;St(s,"transpose");const i=s.shape.length,o=new Array(i);for(let d=0;d<o.length;d++)o[d]=s.shape[a[d]];const l=r.data.get(s.dataId).values,u=S4(l,s.shape,s.dtype,a,o);return{dataId:r.write(u,o,s.dtype),shape:o,dtype:s.dtype}}const XNe={kernelName:th,backendName:"cpu",kernelFunc:ci};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xte(t,e,n,r){const[s,a]=ns(t,r),i=zs(e,"int32"),o=Js(ye(s),i),l=ye(a);for(let u=0;u<o.length;++u){const c=u*l;let d=1;for(let h=0;h<l;++h)d*=n[c+h];o[u]=d}return{outVals:o,outShape:s,outDtype:i}}function YNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r;St(s,"prod");const o=s.shape.length,l=Gt(a,s.shape),u=Yn(l,o);let c=l,d=s;const h=[];u!=null&&(d=ci({inputs:{x:s},backend:n,attrs:{perm:u}}),h.push(d),c=gr(c.length,o));const m=n.data.get(d.dataId).values,{outVals:g,outShape:y,outDtype:b}=xte(d.shape,d.dtype,m,c);let w=y;return i&&(w=Ur(y,l)),h.forEach(C=>n.disposeIntermediateTensorInfo(C)),n.makeTensorInfo(w,b,g)}const QNe={kernelName:$v,backendName:"cpu",kernelFunc:YNe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZNe(t,e,n){t.forEach((r,s)=>{if(r<0||r>=n){const a=mg(s,e.length,$t(e)).join(",");throw new Error(`indices[${a}] = ${r} is not in [0, ${n})`)}})}function JNe(t,e){for(let n=0;n<t.length;++n){const r=t[n],s=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let a=1;a<r.length;++a)if(r[a-1]>r[a])throw new Error("Ragged splits must be sorted in ascending order")}}function eTe(t,e,n,r){const s=[];let a=0;const i=e.length-1+n.length,o=new Array(i).fill(null).map(()=>[0]);JNe(n,r);let l=1;for(let u=0;u<e.length-1;++u){l*=e[u];const c=e[u+1];for(let d=1;d<l+1;++d)o[u].push(d*c)}for(let u=0;u<t.length;++u){let c=t[u],d=t[u]+1;for(let h=0;h<n.length;++h){const m=n[h],g=h+e.length-1;if(g>=0){const y=o[g],b=y[y.length-1]-m[c];for(let w=c;w<d;++w)o[g].push(m[w+1]+b)}c=m[c],d=m[d]}d!==c&&(s.push([c,d]),a+=d-c)}return{outSplits:o,valueSlices:s,numValues:a}}function tTe(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,s=Fr("int32",r);e.push(s),t[n].forEach((a,i)=>s[i]=a)}return e}function kV(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function nTe(t,e,n,r,s,a){const i=kV(e,2)[1],o=kV(a,2)[1];let l=0;for(const u of n)for(let c=u[0];c<u[1];++c){for(let d=0;d<r;++d)s[l*o+d]=t[c*i+d];++l}}function rTe(t,e,n,r,s){const a=e.slice();a[0]=s;const i=Fr(n,ye(a)),o=t.length,l=o===0?0:o/e[0];return nTe(t,e,r,l,i,a),[i,a]}function vte(t,e,n,r,s,a,i,o){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(ZNe(a,i,l),r.length===0)throw new Error("params.rank must be nonzero");const u=r[0],{outSplits:c,valueSlices:d,numValues:h}=eTe(a,i,t,u),m=tTe(c),g=rTe(n,r,s,d,h);return[m,g[0],g[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NV=2147483647;function wte(t,e,n,r,s,a,i){if(e.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(i.length>1)throw new Error("deltas must be a scalar or vector");const o=e.length===0,l=s.length===0,u=i.length===0,c=[];o||c.push(e[0]),l||c.push(s[0]),u||c.push(i[0]);for(let b=1;b<c.length;++b)if(c[b]!==c[b-1])throw new Error("starts, limits, and deltas must have the same shape");const d=c.length===0?1:c[0],h=Fr("int32",d+1);h[0]=0;for(let b=0;b<d;++b){const w=o?t[0]:t[b],C=l?r[0]:r[b],k=u?a[0]:a[b];if(k===0)throw new Error("Requires delta != 0");let T;if(k>0&&C<w||k<0&&C>w)T=0;else if(T=Math.ceil(Math.abs((C-w)/k)),T>NV)throw new Error(`Requires ((limit - start) / delta) <= ${NV}`);h[b+1]=h[b]+T}const m=h[d],g=Fr(n,m);let y=0;for(let b=0;b<d;++b){const w=h[b+1]-h[b];let C=o?t[0]:t[b];const k=u?a[0]:a[b];for(let T=0;T<w;++T)g[y++]=C,C+=k}return[h,g]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Po=El;class w2{constructor(e,n,r,s,a,i,o,l,u,c){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=s,this.valuesDType=a,this.defaultValue=i,this.defaultValueShape=o,this.rowPartitionValues=l,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=sZ(c),this.raggedRank=aZ(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Po.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Po.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Po.VALUE_ROWIDS:return w2.getMaxWidthValueRowID(n);case Po.ROW_SPLITS:return w2.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Po[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let s=0;s<n-1;++s){const a=e[s+1]-e[s];a>r&&(r=a)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,s=e[0],a=0;for(let i=1;i<n;++i){const o=e[i];o!==s&&(s=o,a=Math.max(i-r,a),r=i)}return Math.max(n-r,a)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return $V(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;iZ(r,n);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=rZ(this.raggedRank,s,n);i[0]<0&&(i[0]=e);for(let o=1;o<=this.raggedRank;++o)i[o]<0&&(i[o]=this.getMaxWidth(o));return i}calculateFirstParentOutputIndex(e,n,r){const s=Math.min(e,r),a=[];let i=0;for(let o=0;o<s;++o,i+=n)a.push(i);for(let o=s;o<e;++o)a.push(-1);return X(a.length===e,()=>"Final length of result must be equal to firstDimension."),a}calculateOutputIndexRowSplit(e,n,r,s){const a=e.length,i=[];for(let o=0;o<a-1;++o){const l=e[o+1]-e[o];let u=Math.min(s,l),c=n[o];c===-1&&(u=0);for(let d=0;d<u;++d)i.push(c),c+=r;for(let d=0;d<l-u;++d)i.push(-1)}if(a>0&&i.length!==e[a-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(e,n,r,s){const a=e.length,i=[];if(a===0)return[];let o=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let u=n[l];i.push(u);for(let c=1;c<a;++c){const d=e[c];if(d===l)u>=0&&(++o,o<s?u+=r:u=-1);else{if(o=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);u=n[d]}i.push(u)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(e,n,r,s){const a=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case Po.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,n,r,s);case Po.ROW_SPLITS:if(a.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${a.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(a,n,r,s);default:throw new Error(`Unsupported partition type: ${Po[i]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Po.FIRST_DIM_SIZE:return e[0];case Po.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Po.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Po[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let l=s.length-2;l>=0;--l)s[l]=s[l+1]*r[l+1];const a=$V(r,!1),i=Fr(this.valuesDType,ye(a));if(s[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,s[0],r[0]);for(let u=1;u<=this.raggedRank;++u)l=this.calculateOutputIndex(u-1,l,s[u],r[u]);this.setOutput(this.raggedRank,l,i,a)}return[a,i]}setOutput(e,n,r,s){if(r.length===0)return;const a=this.values,i=r;let o=s.slice();o=o.slice(e+1);const l=ye(o),u=n.length;let c=this.defaultValue;if(c.length!==l&&c.length!==1){const g=this.defaultValueShape;be(()=>{const y=ce(c,g);c=hm(y,o).dataSync()})}let d=0,h=0,m=0;for(let g=0;g<=u;++g){let y=g<u?n[g]:-1;if(y===m){++m;continue}if(h<m){const b=a.subarray(d*l),w=i.subarray(h*l),C=(m-h)*l;TV(w,b,C)}if(g>=u){const b=r.length;y=Math.floor(b/l)}if(y>m)if(this.defaultValue.length===1)i.subarray(m*l,y*l).fill(this.defaultValue[0]),m=y;else for(;y>m;){const b=i.slice(m*l);TV(b,c,l),++m}y<0?(d=g+1,h=m):(d=g,h=m,m=h+1)}}}function TV(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function $V(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function Ste(t,e,n,r,s,a,i,o,l,u){return new w2(t,e,n,r,s,a,i,o,l,u).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cte(t,e,n,r){const s=t===e,a=t<e&&n<0,i=e<t&&n>1;if(s||a||i)return Js(0,r);const o=Math.abs(Math.ceil((e-t)/n)),l=Js(o,r);e<t&&n===1&&(n=-1),l[0]=t;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kte=zu(t=>1/Math.sqrt(t)),sTe=Yd(Qg,kte),aTe={kernelName:Qg,backendName:"cpu",kernelFunc:sTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qf(t,e,n,r,s,a,i,o,l,u){const c=[r/s,s],d=t.values,h=e.values;if(r===0)return Wt(n,e.dtype);const m=l instanceof Cs?l:Wt(c,e.dtype);typeof l=="string"||typeof l=="number"?m.values.fill(l):typeof l=="boolean"&&m.values.fill(+l);for(let g=0;g<a;g++){const y=[];let b=0;for(let w=0;w<i;w++){const C=d[g*i+w];y.push(C),b+=C*o[w]}if(b<0||b>=r/s)throw new Error(`Invalid indices: ${y} does not index into ${n}`);for(let w=0;w<s;w++)u?m.values[b*s+w]+=h[g*s+w]:m.values[b*s+w]=e.rank===0?h[0]:h[g*s+w]}return m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iTe=zu(t=>1/(1+Math.exp(-t))),Nte=Vn(ny,t=>1/(1+Math.exp(-t))),oTe={kernelName:ny,backendName:"cpu",kernelFunc:Nte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tte(t,e,n,r,s){const a=Gj(r,e,n),i=ye(n),o=$t(r);if(a){const d=Hj(e,o);return s==="string"?t.slice(d,d+i):t.subarray(d,d+i)}const l=s==="string"?zl(t):t,u=Wt(r,s,l),c=Wt(n,s);for(let d=0;d<c.size;++d){const h=c.indexToLoc(d),m=h.map((g,y)=>g+e[y]);c.set(u.get(...m),...h)}return s==="string"?NZ(c.values):c.values}function Nh(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:a,size:i}=r;St(s,"slice");const[o,l]=Kv(s,a,i);CN(s,o,l);const u=n.data.get(s.dataId).values,c=Tte(u,o,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,c)}const lTe={kernelName:_v,backendName:"cpu",kernelFunc:Nh};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $te(t,e,n,r,s,a,i){const o=e[0],l=a[0],u=new Array(l),c=new Array(o),d=e[1];if(l===0){if(o!==0)throw new Error(hZ(o));const b=Fr(n,0),w=Fr(s,0);return[b,[0,d],w,u,c]}let h=!0,m=0;const g=new Array(l).fill(0);for(let b=0;b<o;++b){const w=t[b*d];if(w<0)throw new Error(pZ(b,w));if(w>=l)throw new Error(mZ(b,w,l));++g[w],h=h&&w>=m,m=w}let y=!0;for(let b=0;b<l;++b){const w=g[b]===0;u[b]=w,y=y&&!w,g[b]=Math.max(g[b],1),b>0&&(g[b]+=g[b-1])}if(y&&h){const b=t,w=r;for(let C=0;C<o;++C)c[C]=C;return[b,[o,d],w,u,c]}else{const b=g[l-1],w=Fr(n,b*d),C=Fr(s,b),k=new Array(l).fill(0);for(let T=0;T<o;++T){const N=t[T*d],I=k[N],A=(N===0?0:g[N-1])+I;k[N]++;for(let D=0;D<d;++D)w[A*d+D]=t[T*d+D];C[A]=r[T],c[T]=A}for(let T=0;T<l;++T)if(k[T]===0){const I=T===0?0:g[T-1];w[I*d+0]=T;for(let A=1;A<d;++A)w[I*d+A]=0;C[I]=i}return[w,[b,d],C,u,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ite(t,e,n,r,s){const a=ye(r),i=e[0],o=s.length,l=[];let u=1,c=-1;for(let b=0;b<o;++b){const w=s[b];if(w===-1){if(c!==-1)throw new Error(gZ(c,b));c=b,l.push(1)}else{if(w<0)throw new Error(yZ(b,w));u*=w,l.push(w)}}if(c!==-1){if(u<=0)throw new Error(bZ());const b=Math.trunc(a/u);if(u*b!==a)throw new Error(xZ(r,l));l[c]=b}if(ye(l)!==a)throw new Error(vZ(r,l));const h=r.length,m=[];if(h>0){m[h-1]=1;for(let b=h-2;b>=0;--b)m[b]=m[b+1]*r[b+1]}const g=[];if(o>0){g[o-1]=1;for(let b=o-2;b>=0;--b)g[b]=g[b+1]*l[b+1]}const y=Fr(n,i*o);for(let b=0;b<i;++b){let w=0;for(let C=0;C<h;++C)w+=t[b*h+C]*m[C];for(let C=0;C<o;++C)y[b*o+C]=Math.trunc(w/g[C]),w%=g[C]}return[y,[i,o],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C4(t,e,n,r,s,a=!1,i=0){const o=r.length,l=[e[0],t.length/e[0]],u=l[1],d=o>0?s[o-1]+1:0;if(d<0)throw new Error(aD());const h=e.slice();h[0]=d;const m=h.reduce((k,T)=>k*T,1),g=Fr(n,m);if(o===0)return d>0&&g.fill(i),[g,h];if(d<=0)throw new Error(aD());let y=0,b=1,w=0,C=s[y];for(;;){let k=0;if(b<o){if(k=s[b],C===k){++b;continue}if(C>=k)throw new Error(wZ())}if(C<0||C>=d)throw new Error(SZ(C,d));C>w&&g.fill(i,w*u,C*u);for(let T=y;T<b;++T){const N=r[T];if(N<0||N>=l[0])throw new Error(CZ(T,r[T],l[0]));for(let I=0;I<u;I++)g[C*u+I]+=t[N*u+I]}if(a)for(let T=0;T<u;T++)g[C*u+T]/=b-y;if(y=b,++b,w=C+1,C=k,b>o)break}return w<d&&g.fill(i,w*u,d*u),[g,h]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uTe=zu(t=>Math.sqrt(t)),cTe=Vn(sy,t=>Math.sqrt(t)),dTe={kernelName:sy,backendName:"cpu",kernelFunc:cTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ete=ss((t,e)=>{const n=t-e;return n*n}),fTe=As(ay,Ete),hTe={kernelName:ay,backendName:"cpu",kernelFunc:fTe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ate=zu((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:s}=e;return t.replace(new RegExp(n,r?"g":""),s)}),pTe=Yd(Wk,Ate),mTe={kernelName:Wk,backendName:"cpu",kernelFunc:pTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rte(t,e,n,r){const s=Wt(t,e.dtype);for(let a=0;a<s.size;a++){const i=s.indexToLoc(a),o=new Array(i.length);for(let l=0;l<o.length;l++)o[l]=i[l]*n[l]+r[l];s.set(e.get(...o),...i)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gTe{constructor(e,n,r,s,a,i){this.separator=yc(e),this.nGramWidths=n,this.leftPad=yc(r),this.rightPad=yc(s),this.padWidth=a,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,s,a,i){for(let o=0;o<a;++o){const l=this.getPadWidth(i),u=Math.max(0,l-o),c=Math.max(0,l-(a-(o+1))),d=i-(u+c),h=n+(u>0?0:o-l);let m=0;m+=u*this.leftPad.length;for(let C=0;C<d;++C)m+=e[h+C].length;m+=c*this.rightPad.length;const g=u+c+d-1;m+=g*this.separator.length,r[s+o]=new Uint8Array(m);const y=r[s+o];let b=0;const w=C=>C.forEach(k=>y[b++]=k);for(let C=0;C<u;++C)w(this.leftPad),w(this.separator);for(let C=0;C<d-1;++C)w(e[h+C]),w(this.separator);if(d>0){w(e[h+d-1]);for(let C=0;C<c;++C)w(this.separator),w(this.rightPad)}else{for(let C=0;C<c-1;++C)w(this.rightPad),w(this.separator);w(this.rightPad)}}}compute(e,n){const r=e.length,s=n.length;if(s>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<s;++u){let c=n[u]>=l;if(c=c&&n[u]<=r,!c)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${r}]`);l=n[u]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const a=s-1,i=Fr("int32",s);if(r===0||s===0){const l=new Array(r);for(let u=0;u<=a;++u)i[u]=0;return[l,i]}i[0]=0;for(let l=1;l<=a;++l){const u=n[l]-n[l-1];let c=0;this.nGramWidths.forEach(d=>{c+=this.getNumNGrams(u,d)}),this.preserveShort&&u>0&&c===0&&(c=1),i[l]=i[l-1]+c}const o=new Array(i[a]);for(let l=0;l<a;++l){const u=n[l];let c=i[l];if(this.nGramWidths.forEach(d=>{const h=n[l+1]-n[l],m=this.getNumNGrams(h,d);this.createNGrams(e,u,o,c,m,d),c+=m}),this.preserveShort&&c===i[l]){const d=n[l+1]-n[l];if(d===0)continue;const h=d+2*this.padWidth;this.createNGrams(e,u,o,c,1,h)}}return[o,i]}}function Ote(t,e,n,r,s,a,i,o){return new gTe(n,r,s,a,i,o).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yTe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let a=0;a<t.length;++a)r.push(t.subarray(a,a+1));return}if(e.length===1){const a=e[0];let i=t.indexOf(a);for(;i!==-1;){const o=t.subarray(0,i);(!n||o.length!==0)&&r.push(o),t=t.subarray(i+1),i=t.indexOf(a)}(!n||t.length!==0)&&r.push(t);return}let s=0;for(let a=0;a<t.length+1;a++)if(a===t.length||e.indexOf(t[a])!==-1){const i=t.subarray(s,a);(!n||i.length!==0)&&r.push(i),s=a+1}}function _te(t,e,n){const r=t.length,s=[];let a=0,i=0;const o=new Array(r);for(let h=0;h<r;++h){const m=s.length;yTe(t[h],e,n,s);const g=s.length-m;o[h]=g,a+=g,i=Math.max(i,g)}const l=Fr("int32",a*2),u=new Array(a),c=[r,i];let d=0;for(let h=0;h<r;++h)for(let m=0;m<o[h];++m)l[d*2]=h,l[d*2+1]=m,u[d]=s[d],++d;return[l,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dte(t,e){const n=Fr("int32",t.length);for(let r=0;r<t.length;++r)n[r]=Ope(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pte=ss((t,e)=>t-e),bTe=x4((t,e,n,r)=>({real:t-n,imag:e-r})),k4=As(iy,Pte,bTe),xTe={kernelName:iy,backendName:"cpu",kernelFunc:k4};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mte(t,e){const n=new Array(t.rank);for(let s=0;s<n.length;s++)n[s]=t.shape[s]*e[s];const r=Wt(n,t.dtype);for(let s=0;s<r.values.length;++s){const a=r.indexToLoc(s),i=new Array(t.rank);for(let l=0;l<i.length;l++)i[l]=a[l]%t.shape[l];const o=t.locToIndex(i);r.values[s]=t.values[o]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rb=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function jte(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const o=r-n+1,l=e-n+1,u=Math.log(o),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(o-c)/o)*Math.sign(l-o/2),h=Math.max(n,Math.floor(e-l*c/o+d)),m=Math.min(r,Math.floor(e+(o-l)*c/o+d));jte(t,e,h,m)}const s=t[e];let a=n,i=r;for(em(t,n,e),rb(t[r],s)>0&&em(t,n,r);a<i;){for(em(t,a,i),a++,i--;rb(t[a],s)<0;)a=a+1;for(;rb(t[i],s)>0;)i=i-1}rb(t[n],s)===0?em(t,n,i):(i=i+1,em(t,i,r)),i<=e&&(n=i+1),e<=i&&(r=i-1)}}function Lte(t,e,n,r,s){const a=e[e.length-1],[i,o]=[t.length/a,a],l=$s(n,i*r),u=$s("int32",i*r);for(let d=0;d<i;d++){const h=d*o,m=t.subarray(h,h+o);let g=new Array(m.length);m.forEach((C,k)=>g[k]={value:C,index:k}),r<g.length&&(jte(g,r),g=g.slice(0,r)),s&&g.sort(rb);const y=d*r,b=l.subarray(y,y+r),w=u.subarray(y,y+r);for(let C=0;C<r;C++)b[C]=g[C].value,w[C]=g[C].index}const c=e.slice();return c[c.length-1]=r,[Wt(c,n,l),Wt(c,"int32",u)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fte(t,e,n,r){const s=Gt(e,n)[0],a=[1,n[0],1];for(let g=0;g<s;g++)a[0]*=n[g];a[1]=n[s];for(let g=s+1;g<n.length;g++)a[2]*=n[g];const i=new Map,o=new Int32Array(n[s]),l=new Cs(a,r,t),u=[],c=a[0]===1&&a[2]===1;for(let g=0;g<n[s];g++){let y;if(c)y=t[g].toString();else{const w=[];for(let C=0;C<a[0];C++)for(let k=0;k<a[2];k++)w.push(l.get(C,g,k));y=w.join(",")}const b=i.get(y);if(b!=null)o[g]=b;else{const w=i.size;i.set(y,w),o[g]=w,u.push(g)}}const d=a.slice();d[1]=i.size;const h=new Cs(d,r);u.forEach((g,y)=>{for(let b=0;b<a[0];b++)for(let w=0;w<a[2];w++)h.set(l.get(b,g,w),b,y,w)});const m=n.slice();return m[s]=d[1],{outputValues:h.values,outputShape:m,indices:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zte=Object.freeze(Object.defineProperty({__proto__:null,addImpl:Kee,bincountImpl:v4,bincountReduceImpl:Xee,bitwiseAndImpl:Yee,castImpl:qee,ceilImpl:Qee,concatImpl:Zee,equalImpl:Jee,expImpl:tte,expm1Impl:rte,floorDivImpl:ate,floorImpl:ste,gatherNdImpl:ite,gatherV2Impl:ote,greaterEqualImpl:ute,greaterImpl:lte,lessEqualImpl:dte,lessImpl:cte,linSpaceImpl:fte,logImpl:hte,maxImpl:pte,maximumImpl:mte,minimumImpl:gte,multiplyImpl:w4,negImpl:yte,notEqualImpl:bte,prodImpl:xte,raggedGatherImpl:vte,raggedRangeImpl:wte,raggedTensorToTensorImpl:Ste,rangeImpl:Cte,rsqrtImpl:kte,scatterImpl:qf,sigmoidImpl:iTe,simpleAbsImpl:Hee,sliceImpl:Tte,sparseFillEmptyRowsImpl:$te,sparseReshapeImpl:Ite,sparseSegmentReductionImpl:C4,sqrtImpl:uTe,squaredDifferenceImpl:Ete,staticRegexReplaceImpl:Ate,stridedSliceImpl:Rte,stringNGramsImpl:Ote,stringSplitImpl:_te,stringToHashBucketFastImpl:Dte,subImpl:Pte,tileImpl:Mte,topKImpl:Lte,transposeImpl:S4,uniqueImpl:Fte},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */nj("cpu",()=>new eT,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bte=Vn(Eg,t=>t>=0?t:Math.exp(t)-1),vTe={kernelName:Eg,backendName:"cpu",kernelFunc:Bte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ute(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:a}=r;St([s],"leakyRelu");const i=ye(s.shape),o=n.data.get(s.dataId).values,l=$s("float32",i);for(let u=0;u<o.length;u++)l[u]=o[u]<0?a*o[u]:o[u];return n.makeTensorInfo(s.shape,"float32",l)}const wTe={kernelName:ov,backendName:"cpu",kernelFunc:Ute};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const STe=ss((t,e)=>t<0?e*t:t);function Vte(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e;St([r,s],"prelu");const a=n.data.get(r.dataId).values,i=n.data.get(s.dataId).values,[o,l]=STe(r.shape,s.shape,a,i,"float32");return n.makeTensorInfo(l,"float32",o)}const CTe={kernelName:Tv,backendName:"cpu",kernelFunc:Vte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wte=Vn(Kg,t=>Math.max(0,t)),kTe={kernelName:Kg,backendName:"cpu",kernelFunc:Wte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gte=Vn(Xg,t=>Math.min(Math.max(0,t),6)),NTe={kernelName:Xg,backendName:"cpu",kernelFunc:Gte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S2(t,e,n,r,s){if(n==="linear")return Iu({inputs:{x:e},backend:t});if(n==="relu")return Wte({inputs:{x:e},backend:t});if(n==="elu")return Bte({inputs:{x:e},backend:t});if(n==="relu6")return Gte({inputs:{x:e},backend:t});if(n==="prelu")return Vte({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return Ute({inputs:{x:e},backend:t,attrs:{alpha:s}});if(n==="sigmoid")return Nte({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pr(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:a}=r,i=ye(s.shape),o=BM(a,i),l=ye(o);X(i===l,()=>`The new shape (${o}) has ${l} elements and the old shape (${s.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),n.incRef(s.dataId);const u=n.data.get(s.dataId);if(u.complexTensorInfos!=null){const c=u.complexTensorInfos.real,d=u.complexTensorInfos.imag;c.shape=o,d.shape=o}return{dataId:s.dataId,shape:o,dtype:s.dtype}}const TTe={kernelName:Iv,backendName:"cpu",kernelFunc:pr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hte(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:a}=e,{transposeA:i,transposeB:o}=r;St([s,a],"matMul");const l=s.shape.length,u=a.shape.length,c=i?s.shape[l-2]:s.shape[l-1],d=o?a.shape[u-1]:a.shape[u-2],h=i?s.shape[l-1]:s.shape[l-2],m=o?a.shape[u-2]:a.shape[u-1],g=s.shape.slice(0,-2),y=a.shape.slice(0,-2),b=ye(g),w=ye(y),k=_t(s.shape.slice(0,-2),a.shape.slice(0,-2)).concat([h,m]);X(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${s.shape} and ${a.shape} and transposeA=${i} and transposeB=${o} must match.`);const T=i?[b,c,h]:[b,h,c],N=o?[w,m,d]:[w,d,m],I=pr({inputs:{x:s},backend:n,attrs:{shape:T}}),A=pr({inputs:{x:a},backend:n,attrs:{shape:N}}),D=i?I.shape[1]:I.shape[2],P=i?I.shape[2]:I.shape[1],R=o?A.shape[1]:A.shape[2],O=Math.max(b,w),F=n.data.get(I.dataId).values,z=n.data.get(A.dataId).values,V=$t(I.shape),W=$t(A.shape),[j,q,Y]=i?[V[0],1,V[1]]:[V[0],V[1],1],[Q,H,ee]=o?[1,W[1],W[0]]:[W[1],1,W[0]],te=P*R,ne=Wt([O,P,R],I.dtype),he=ne.values,Se=n.blockSize;for(let Ie=0;Ie<O;Ie++){const Qe=Ie%b,Ve=Ie%w;for(let $e=0;$e<P;$e+=Se){const We=Math.min($e+Se,P);for(let ze=0;ze<R;ze+=Se){const ke=Math.min(ze+Se,R);for(let et=0;et<D;et+=Se){const Je=Math.min(et+Se,D);for(let Re=$e;Re<We;Re++)for(let Ke=ze;Ke<ke;Ke++){let xe=0;for(let De=et;De<Je;De++){const at=F[Qe*j+Re*q+De*Y],Xe=z[De*Q+Ke*H+Ve*ee];xe+=at*Xe}he[Ie*te+(Re*R+Ke)]+=xe}}}}}return n.disposeIntermediateTensorInfo(I),n.disposeIntermediateTensorInfo(A),n.makeTensorInfo(k,ne.dtype,ne.values)}const $Te={kernelName:Hx,backendName:"cpu",kernelFunc:Hte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ITe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:a,bias:i,preluActivationWeights:o}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;let h,m,g;const y=[];h=Hte({inputs:{a:s,b:a},attrs:{transposeA:l,transposeB:u},backend:n}),i&&(m=_m({inputs:{a:h,b:i},backend:n}),y.push(h),h=m),c&&(g=S2(n,h,c,o,d),y.push(h),h=g);for(const w of y)n.disposeIntermediateTensorInfo(w);return h}const ETe={kernelName:Tb,backendName:"cpu",kernelFunc:ITe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ATe=Vn(gg,t=>Math.acos(t)),RTe={kernelName:gg,backendName:"cpu",kernelFunc:ATe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OTe=Vn(yg,t=>Math.acosh(t)),_Te={kernelName:yg,backendName:"cpu",kernelFunc:OTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DTe(t){const{inputs:e,backend:n}=t,r=e;St(e,"addN");const s=r.map(o=>n.data.get(o.dataId).values),a=Wt(r[0].shape,r[0].dtype),i=a.values;for(let o=0;o<r.length;o++){const l=s[o];for(let u=0;u<i.length;u++)i[u]+=l[u]}return n.makeTensorInfo(a.shape,a.dtype,a.values)}const PTe={kernelName:Bx,backendName:"cpu",kernelFunc:DTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r;St(s,"all");const o=Gt(a,s.shape);let l=o;const u=Yn(l,s.shape.length);let c=s;u!=null&&(c=ci({inputs:{x:s},backend:n,attrs:{perm:u}}),l=gr(l.length,s.shape.length)),hs("all",l,c.shape.length);const[d,h]=ns(c.shape,l),m=ye(h),g=Js(ye(d),c.dtype),y=n.data.get(c.dataId).values;for(let w=0;w<g.length;++w){const C=w*m;let k=y[C];for(let T=0;T<m;++T){const N=y[C+T];k=k&&N}g[w]=k}u!=null&&n.disposeIntermediateTensorInfo(c);const b=n.makeTensorInfo(d,c.dtype,g);if(i){const w=Ur(d,o),C=pr({inputs:{x:b},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(b),C}return b}const jTe={kernelName:JC,backendName:"cpu",kernelFunc:MTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r;St(s,"any");const o=Gt(a,s.shape);let l=o;const u=Yn(l,s.shape.length);let c=s;u!=null&&(c=ci({inputs:{x:s},backend:n,attrs:{perm:u}}),l=gr(l.length,s.shape.length)),hs("any",l,c.shape.length);const[d,h]=ns(c.shape,l),m=ye(h),g=Js(ye(d),c.dtype),y=n.data.get(c.dataId).values;for(let w=0;w<g.length;++w){const C=w*m;let k=y[C];for(let T=0;T<m;++T){const N=y[C+T];k=k||N}g[w]=k}u!=null&&n.disposeIntermediateTensorInfo(c);const b=n.makeTensorInfo(d,c.dtype,g);if(i){const w=Ur(d,o),C=pr({inputs:{x:b},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(b),C}return b}const FTe={kernelName:ek,backendName:"cpu",kernelFunc:LTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a}=r;St(s,"argMax");let i=Gt(a,s.shape);const o=Yn(i,s.shape.length);let l=s;const u=[];o!=null&&(l=ci({inputs:{x:s},backend:n,attrs:{perm:o}}),u.push(l),i=gr(i.length,l.shape.length)),i=[i[0]],hs("argMax",i,l.shape.length);const[c,d]=ns(l.shape,i),h=ye(c),m=Js(h,"int32"),g=ye(d),y=n.data.get(l.dataId).values;for(let b=0;b<m.length;++b){const w=b*g;let C=y[w],k=0;for(let T=0;T<g;++T){const N=y[w+T];N>C&&(C=N,k=T)}m[b]=k}return u.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(c,"int32",m)}const BTe={kernelName:Ux,backendName:"cpu",kernelFunc:zTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a}=r;St(s,"argMin");let i=Gt(a,s.shape);const o=Yn(i,s.shape.length);let l=s;const u=[];o!=null&&(l=ci({inputs:{x:s},backend:n,attrs:{perm:o}}),u.push(l),i=gr(i.length,l.shape.length)),i=[i[0]],hs("argMin",i,l.shape.length);const[c,d]=ns(l.shape,i),h=ye(c),m=Js(h,"int32"),g=ye(d),y=n.data.get(l.dataId).values;for(let b=0;b<m.length;++b){const w=b*g;let C=y[w],k=0;for(let T=0;T<g;++T){const N=y[w+T];N<C&&(C=N,k=T)}m[b]=k}return u.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(c,"int32",m)}const VTe={kernelName:Vx,backendName:"cpu",kernelFunc:UTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WTe=Vn(bg,t=>Math.asin(t)),GTe={kernelName:bg,backendName:"cpu",kernelFunc:WTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HTe=Vn(xg,t=>Math.asinh(t)),qTe={kernelName:xg,backendName:"cpu",kernelFunc:HTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KTe=Vn(vg,t=>Math.atan(t)),XTe={kernelName:vg,backendName:"cpu",kernelFunc:KTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YTe=ss((t,e)=>Math.atan2(t,e)),QTe=As(Sg,YTe),ZTe={kernelName:Sg,backendName:"cpu",kernelFunc:QTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JTe=Vn(wg,t=>Math.atanh(t)),e$e={kernelName:wg,backendName:"cpu",kernelFunc:JTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N4(t,e,n,r,s,a){const i=s.strideHeight,o=s.strideWidth,l=s.dilationHeight,u=s.dilationWidth,c=s.effectiveFilterHeight,d=s.effectiveFilterWidth,h=s.padInfo.top,m=s.padInfo.left,g=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=Wt(s.outShape,n),b=y.values,w=s.outShape[1]*s.outShape[2]*s.outShape[3],C=s.outShape[2]*s.outShape[3],k=s.outShape[3];for(let T=0;T<s.batchSize;++T){const N=T*w,I=T*r[0];for(let A=0;A<s.inChannels;++A)for(let D=0;D<s.outHeight;++D){const P=D*i-h,R=Math.max(0,P),O=Math.min(s.inHeight,c+P),F=N+D*C;for(let z=0;z<s.outWidth;++z){const V=z*o-m,W=Math.max(0,V),j=Math.min(s.inWidth,d+V);let q=g,Y=0,Q=0;for(let ee=R;ee<O;ee+=l){const te=I+ee*r[1];for(let ne=W;ne<j;ne+=u){const he=te+ne*r[2],Se=t[he+A];a==="max"&&Se>q?q=Se:a==="avg"&&(Y+=Se,Q++)}if(isNaN(q))break}const H=F+z*k+A;b[H]=a==="avg"?Y/Q:q}}}return y}function qte(t,e,n,r,s=!1,a=!1){const i=Wt(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,m=r.padInfo.top,g=r.padInfo.left,y=Wt(e,n,t);for(let b=0;b<r.batchSize;++b)for(let w=0;w<r.inChannels;++w)for(let C=0;C<r.outHeight;++C){const k=C*o-m;let T=k;for(;T<0;)T+=u;const N=Math.min(r.inHeight,d+k);for(let I=0;I<r.outWidth;++I){const A=I*l-g;let D=A;for(;D<0;)D+=c;const P=Math.min(r.inWidth,h+A);let R=Number.NEGATIVE_INFINITY,O=-1;for(let F=T;F<N;F+=u){const z=F-k;for(let V=D;V<P;V+=c){const W=V-A,j=y.get(b,F,V,w);j>R&&(R=j,s?O=a?((b*r.inHeight+F)*r.inWidth+V)*r.inChannels+w:(F*r.inWidth+V)*r.inChannels+w:O=z*h+W)}}i.set(O,b,C,I,w)}}return i}function Kte(t,e,n,r,s,a){const i=s.strideDepth,o=s.strideHeight,l=s.strideWidth,u=s.dilationDepth,c=s.dilationHeight,d=s.dilationWidth,h=s.effectiveFilterDepth,m=s.effectiveFilterHeight,g=s.effectiveFilterWidth,y=s.padInfo.front,b=s.padInfo.top,w=s.padInfo.left,C=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,k=Wt(s.outShape,n),T=k.values,N=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],I=s.outShape[2]*s.outShape[3]*s.outShape[4],A=s.outShape[3]*s.outShape[4],D=s.outShape[4];for(let P=0;P<s.batchSize;++P){const R=P*N,O=P*r[0];for(let F=0;F<s.inChannels;++F)for(let z=0;z<s.outDepth;++z){const V=z*i-y;let W=V;for(;W<0;)W+=u;const j=Math.min(s.inDepth,h+V),q=R+z*I;for(let Y=0;Y<s.outHeight;++Y){const Q=Y*o-b;let H=Q;for(;H<0;)H+=c;const ee=Math.min(s.inHeight,m+Q),te=q+Y*A;for(let ne=0;ne<s.outWidth;++ne){const he=ne*l-w;let Se=he;for(;Se<0;)Se+=d;const Ie=Math.min(s.inWidth,g+he),Qe=te+ne*D;let Ve=C,$e=0,We=0;for(let ke=W;ke<j;ke+=u){const et=O+ke*r[1];for(let Je=H;Je<ee;Je+=c){const Re=et+Je*r[2];for(let Ke=Se;Ke<Ie;Ke+=d){const xe=Re+Ke*r[3],De=t[xe+F];if(a==="max"&&De>Ve?Ve=De:a==="avg"&&($e+=De,We++),isNaN(Ve))break}if(isNaN(Ve))break}if(isNaN(Ve))break}const ze=Qe+F;T[ze]=a==="avg"?$e/Math.max(We,1):Ve}}}}return k}function t$e(t,e){const n=Wt(e.outShape,"int32"),r=e.strideDepth,s=e.strideHeight,a=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.front,m=e.padInfo.top,g=e.padInfo.left;for(let y=0;y<e.batchSize;++y)for(let b=0;b<e.inChannels;++b)for(let w=0;w<e.outDepth;++w){const C=w*r-h;let k=C;for(;k<0;)k+=i;const T=Math.min(e.inDepth,u+C);for(let N=0;N<e.outHeight;++N){const I=N*s-m;let A=I;for(;A<0;)A+=o;const D=Math.min(e.inHeight,c+I);for(let P=0;P<e.outWidth;++P){const R=P*a-g;let O=R;for(;O<0;)O+=l;const F=Math.min(e.inWidth,d+R);let z=Number.NEGATIVE_INFINITY,V=-1;for(let W=k;W<T;W+=i){const j=W-C;for(let q=A;q<D;q+=o){const Y=q-I;for(let Q=O;Q<F;Q+=l){const H=Q-R,ee=t.get(y,W,q,Q,b);ee>=z&&(z=ee,V=j*c*d+Y*c+H)}}}n.set(V,y,w,N,P,b)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;St(s,"avgPool");const{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=r,u=1;X(Es(i,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=ga(s.shape,a,i,u,o,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&Xt(c.inShape,c.outShape))d=Iu({inputs:{x:s},backend:n});else{const h=n.data.get(s.dataId).values,m=$t(s.shape),g=N4(h,s.shape,s.dtype,m,c,"avg");d=n.makeTensorInfo(c.outShape,s.dtype,g.values)}return d}const r$e={kernelName:Wx,backendName:"cpu",kernelFunc:n$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:a,strides:i,pad:o,dimRoundingMode:l,dataFormat:u}=r;St(s,"avgPool3d");const c=go(s.shape,a,i,1,o,l,u),d=n.data.get(s.dataId).values,h=Kte(d,s.shape,s.dtype,$t(s.shape),c,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}const a$e={kernelName:Gx,backendName:"cpu",kernelFunc:s$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i$e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:a}=e,{filterSize:i,strides:o,pad:l,dimRoundingMode:u}=r;St([s,a],"avgPool3DGrad");const c=go(a.shape,i,o,1,l,u),d=c.strideDepth,h=c.strideHeight,m=c.strideWidth,g=c.filterDepth,y=c.filterHeight,b=c.filterWidth,w=c.dilationDepth,C=c.dilationHeight,k=c.dilationWidth,T=c.effectiveFilterDepth,N=c.effectiveFilterHeight,I=c.effectiveFilterWidth,A=T-1-c.padInfo.front,D=I-1-c.padInfo.left,P=N-1-c.padInfo.top,R=Wt(a.shape,"float32"),O=1/(g*y*b),F=n.bufferSync(s);for(let z=0;z<c.batchSize;++z)for(let V=0;V<c.inChannels;++V)for(let W=0;W<c.inDepth;++W)for(let j=0;j<c.inHeight;++j)for(let q=0;q<c.inWidth;++q){const Y=W-A,Q=j-P,H=q-D;let ee=0;for(let te=0;te<T;te+=w){const ne=(Y+te)/d;if(!(ne<0||ne>=c.outDepth||Math.floor(ne)!==ne))for(let he=0;he<N;he+=C){const Se=(Q+he)/h;if(!(Se<0||Se>=c.outHeight||Math.floor(Se)!==Se))for(let Ie=0;Ie<I;Ie+=k){const Qe=(H+Ie)/m;if(Qe<0||Qe>=c.outWidth||Math.floor(Qe)!==Qe)continue;const Ve=F.get(z,ne,Se,Qe,V);ee+=Ve}}}R.set(ee*O,z,W,j,q,V)}return n.makeTensorInfo(R.shape,R.dtype,R.values)}const o$e={kernelName:nk,backendName:"cpu",kernelFunc:i$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l$e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:a}=e,i=a;St([s,a],"avgPoolGrad");const{filterSize:o,strides:l,pad:u}=r,c=ga(i.shape,o,l,1,u),d=c.strideHeight,h=c.strideWidth,m=c.filterHeight,g=c.filterWidth,y=c.dilationHeight,b=c.dilationWidth,w=c.effectiveFilterHeight,C=c.effectiveFilterWidth,k=C-1-c.padInfo.left,T=w-1-c.padInfo.top,N=Wt(i.shape,"float32"),I=1/(m*g),A=n.data.get(s.dataId).values,D=Wt(s.shape,"float32",A);for(let P=0;P<c.batchSize;++P)for(let R=0;R<c.inChannels;++R)for(let O=0;O<c.inHeight;++O)for(let F=0;F<c.inWidth;++F){const z=O-T,V=F-k;let W=0;for(let j=0;j<w;j+=y){const q=(z+j)/d;if(!(q<0||q>=c.outHeight||Math.floor(q)!==q))for(let Y=0;Y<C;Y+=b){const Q=(V+Y)/h;if(Q<0||Q>=c.outWidth||Math.floor(Q)!==Q)continue;const H=D.get(P,q,Q,R);W+=H}}N.set(W*I,P,O,F,R)}return n.makeTensorInfo(N.shape,N.dtype,N.values)}const u$e={kernelName:tk,backendName:"cpu",kernelFunc:l$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,scale:a,offset:i,mean:o,variance:l}=e;X(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),X(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),X(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),St([s,o,l,a,i],"batchNorm");let{varianceEpsilon:u}=r;u==null&&(u=.001);const c=n.data.get(s.dataId).values,d=n.data.get(o.dataId).values,h=n.data.get(l.dataId).values,m=a?n.data.get(a.dataId).values:new Float32Array([1]),g=i?n.data.get(i.dataId).values:new Float32Array([0]),y=new Float32Array(c.length),b=g.length,w=m.length,C=h.length,k=d.length;let T=0,N=0,I=0,A=0;for(let D=0;D<c.length;++D)y[D]=g[T++]+(c[D]-d[N++])*m[I++]/Math.sqrt(h[A++]+u),T>=b&&(T=0),N>=k&&(N=0),I>=w&&(I=0),A>=C&&(A=0);return n.makeTensorInfo(s.shape,s.dtype,y)}const d$e={kernelName:sv,backendName:"cpu",kernelFunc:c$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:a,crops:i}=r;St([s],"batchToSpaceND");const o=a.reduce((w,C)=>w*C),l=Fh(s.shape,a,o),u=zh(l.length,a.length),c=Bh(s.shape,a,o),d=EN(i,a.length),h=AN(c,i,a.length),m=pr({inputs:{x:s},backend:n,attrs:{shape:l}}),g=ci({inputs:{x:m},backend:n,attrs:{perm:u}}),y=pr({inputs:{x:g},backend:n,attrs:{shape:c}}),b=Nh({inputs:{x:y},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),b}const h$e={kernelName:qx,backendName:"cpu",kernelFunc:f$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:a}=e,{size:i}=r,o=n.data.get(s.dataId).values,l=n.data.get(a.dataId).values,u=v4(o,l,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,u)}const m$e={kernelName:rk,backendName:"cpu",kernelFunc:p$e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g$e(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,a=n.data.get(r.dataId).values,i=n.data.get(s.dataId).values,o=_t(Array.from(a),Array.from(i));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const y$e={kernelName:ak,backendName:"cpu",kernelFunc:g$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b$e=Vn(Ng,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),x$e={kernelName:Ng,backendName:"cpu",kernelFunc:b$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v$e=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(ye(e.shape)),s=n.data.get(e.dataId),a=s.complexTensorInfos.real,i=s.complexTensorInfos.imag,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values;for(let u=0;u<o.length;u++){const c=o[u],d=l[u];r[u]=Math.hypot(c,d)}return n.makeOutput(r,e.shape,"float32")},w$e={kernelName:Kx,backendName:"cpu",kernelFunc:v$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dm(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.imag,a=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,a)}const S$e={kernelName:kk,backendName:"cpu",kernelFunc:Dm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pm(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,a=Gt(s,e[0].shape)[0],i=e.map(y=>y.shape);TN(i,a);let o=ii(e.map(y=>y.shape),a);if(ye(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(y=>ye(y.shape)>0);if(l.length===1)return Iu({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const y=l.map(T=>kh({inputs:{input:T},backend:n})),b=l.map(T=>Dm({inputs:{input:T},backend:n})),w=Pm({inputs:y,backend:n,attrs:{axis:a}}),C=Pm({inputs:b,backend:n,attrs:{axis:a}}),k=Ni({inputs:{real:w,imag:C},backend:n});return y.forEach(T=>n.disposeIntermediateTensorInfo(T)),b.forEach(T=>n.disposeIntermediateTensorInfo(T)),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(C),k}const u=l.map(y=>{const w=[-1,ye(y.shape.slice(a))];return pr({inputs:{x:y},backend:n,attrs:{shape:w}})}),c=u.map(y=>({vals:n.data.get(y.dataId).values,shape:y.shape}));o=ii(u.map(y=>y.shape),1);const d=u[0].shape[0]===1,h=Zee(c,o,e[0].dtype,d),m=ii(l.map(y=>y.shape),a),g=n.makeTensorInfo(m,e[0].dtype,h);return u.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const C$e={kernelName:Xx,backendName:"cpu",kernelFunc:Pm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xte(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a}=e,{strides:i,pad:o,dataFormat:l,dilations:u,dimRoundingMode:c}=r;St([s,a],"conv2d");const d=Pi(l),h=mr(s.shape,a.shape,i,u,o,c,!1,d),m=h.filterHeight,g=h.filterWidth,y=h.dilationHeight,b=h.dilationWidth,w=h.padInfo.left,C=h.padInfo.top,k=h.dataFormat==="channelsLast",T=new Cs(h.outShape,s.dtype),N=$t(s.shape),I=$t(a.shape),A=N[0],D=k?N[1]:N[2],P=k?N[2]:1,R=k?1:N[1],O=T.strides[0],F=k?T.strides[1]:T.strides[2],z=k?T.strides[2]:1,V=k?1:T.strides[1],W=n.data.get(s.dataId).values,j=n.data.get(a.dataId).values,q=T.values;for(let Y=0;Y<h.batchSize;++Y){const Q=Y*A,H=Y*O;for(let ee=0;ee<h.outHeight;++ee){const te=H+ee*F,ne=ee*h.strideHeight-C;for(let he=0;he<m;++he){const Se=ne+he*y;if(Se<0||Se>=h.inHeight)continue;const Ie=he*I[0],Qe=Q+Se*D;for(let Ve=0;Ve<h.outWidth;++Ve){const $e=te+Ve*z,We=Ve*h.strideWidth-w;for(let ze=0;ze<g;++ze){const ke=We+ze*b;if(ke<0||ke>=h.inWidth)continue;const et=Ie+ze*I[1],Je=Qe+ke*P;let Re=et;for(let Ke=0;Ke<h.inChannels;++Ke){const xe=W[Je+Ke*R];for(let De=0;De<h.outChannels;++De)q[$e+De*V]+=xe*j[Re+De];Re+=h.outChannels}}}}}}return n.makeTensorInfo(T.shape,T.dtype,q)}const k$e={kernelName:Yx,backendName:"cpu",kernelFunc:Xte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:a}=e,{strides:i,pad:o,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;St([s,a],"conv2dBackpropFilter");const d=Pi(l),h=mr(s.shape,c,i,1,o,u,!1,d),{strideHeight:m,strideWidth:g,filterHeight:y,filterWidth:b}=h,w=h.dataFormat==="channelsLast",C=new Cs(h.filterShape,"float32"),k=h.padInfo.left,T=h.padInfo.top,N=n.data.get(s.dataId).values,I=n.data.get(a.dataId).values,A=new Cs(s.shape,s.dtype,N),D=new Cs(a.shape,a.dtype,I);for(let P=0;P<y;++P){const R=Math.max(0,Math.ceil((T-P)/m)),O=Math.min(h.outHeight,(h.inHeight+T-P)/m);for(let F=0;F<b;++F){const z=Math.max(0,Math.ceil((k-F)/g)),V=Math.min(h.outWidth,(h.inWidth+k-F)/g);for(let W=0;W<h.inChannels;++W)for(let j=0;j<h.outChannels;++j){let q=0;for(let Y=0;Y<h.batchSize;++Y)for(let Q=R;Q<O;++Q){const H=P+Q*m-T;for(let ee=z;ee<V;++ee){const te=F+ee*g-k;w?q+=A.get(Y,H,te,W)*D.get(Y,Q,ee,j):q+=A.get(Y,W,H,te)*D.get(Y,j,Q,ee)}}C.set(q,P,F,W,j)}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const T$e={kernelName:ok,backendName:"cpu",kernelFunc:N$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $$e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:a}=e,{inputShape:i,strides:o,pad:l,dataFormat:u,dimRoundingMode:c}=r;St([s,a],"conv2dBackpropInput");const d=$t(a.shape),h=$t(s.shape);let m=Pi(u);const g=mr(i,a.shape,o,1,l,c,!1,m),y=new Cs(g.inShape,"float32"),b=y.values,w=n.data.get(s.dataId).values,C=n.data.get(a.dataId).values,[k,T,N]=d,{batchSize:I,filterHeight:A,filterWidth:D,inChannels:P,inHeight:R,inWidth:O,outChannels:F,outHeight:z,outWidth:V,strideHeight:W,strideWidth:j}=g;m=g.dataFormat;const q=A-1-g.padInfo.top,Y=D-1-g.padInfo.left,Q=m==="channelsLast",H=y.strides[0],ee=Q?y.strides[1]:y.strides[2],te=Q?y.strides[2]:1,ne=Q?1:y.strides[1],he=h[0],Se=Q?h[1]:h[2],Ie=Q?h[2]:1,Qe=Q?1:h[1];for(let Ve=0;Ve<I;++Ve)for(let $e=0;$e<P;++$e)for(let We=0;We<R;++We){const ze=We-q,ke=Math.max(0,Math.ceil(ze/W)),et=Math.min(z,(A+ze)/W);for(let Je=0;Je<O;++Je){const Re=Je-Y,Ke=Math.max(0,Math.ceil(Re/j)),xe=Math.min(V,(D+Re)/j);let De=0;for(let Xe=ke;Xe<et;++Xe){const Nt=Xe*W-ze;for(let Be=Ke;Be<xe;++Be){const Tt=Be*j-Re,Ot=he*Ve+Se*Xe+Ie*Be,Wn=k*(A-1-Nt)+T*(D-1-Tt)+N*$e;for(let rn=0;rn<F;++rn){const cn=w[Ot+Qe*rn],Jt=C[Wn+rn];De+=cn*Jt}}}const at=H*Ve+ee*We+te*Je+ne*$e;b[at]=De}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const I$e={kernelName:Qx,backendName:"cpu",kernelFunc:$$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a}=e,{strides:i,pad:o,dilations:l}=r;St([s,a],"conv3d");const u=ql(s.shape,a.shape,i,l,o),{filterDepth:c,filterHeight:d,filterWidth:h,dilationDepth:m,dilationHeight:g,dilationWidth:y,padInfo:b}=u,w=b.front,C=b.left,k=b.top,T=new Cs(u.outShape,s.dtype),N=n.data.get(s.dataId).values,I=n.data.get(a.dataId).values,A=T.values,D=$t(s.shape),P=$t(a.shape);for(let R=0;R<u.batchSize;++R){const O=R*D[0],F=R*T.strides[0];for(let z=0;z<u.outDepth;++z){const V=F+z*T.strides[1],W=z*u.strideDepth-w;for(let j=0;j<c;++j){const q=W+j*m;if(q<0||q>=u.inDepth)continue;const Y=j*P[0],Q=O+q*D[1];for(let H=0;H<u.outHeight;++H){const ee=V+H*T.strides[2],te=H*u.strideHeight-k;for(let ne=0;ne<d;++ne){const he=te+ne*g;if(he<0||he>=u.inHeight)continue;const Se=Y+ne*P[1],Ie=Q+he*D[2];for(let Qe=0;Qe<u.outWidth;++Qe){const Ve=ee+Qe*u.outChannels,$e=Qe*u.strideWidth-C;for(let We=0;We<h;++We){const ze=$e+We*y;if(ze<0||ze>=u.inWidth)continue;const ke=Se+We*P[2],et=Ie+ze*u.inChannels;let Je=ke;for(let Re=0;Re<u.inChannels;++Re){const Ke=N[et+Re];for(let xe=0;xe<u.outChannels;++xe)A[Ve+xe]+=Ke*I[Je+xe];Je+=u.outChannels}}}}}}}}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const A$e={kernelName:Zx,backendName:"cpu",kernelFunc:E$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:a}=e,{strides:i,pad:o,filterShape:l}=r;St([s,a],"conv3dBackpropFilterV2");const u=$t(s.shape),c=$t(a.shape),d=ql(s.shape,l,i,1,o),h=d.strideDepth,m=d.strideHeight,g=d.strideWidth,y=d.filterDepth,b=d.filterHeight,w=d.filterWidth,C=new Cs(d.filterShape,"float32"),k=C.values,[T,N,I,A]=C.strides,D=n.data.get(a.dataId).values,[P,R,O,F]=c,z=n.data.get(s.dataId).values,[V,W,j,q]=u,Y=d.padInfo.front,Q=d.padInfo.left,H=d.padInfo.top;for(let ee=0;ee<y;++ee){const te=Math.max(0,Math.ceil((Y-ee)/h)),ne=Math.min(d.outDepth,(d.inDepth+Y-ee)/h),he=ee*T;for(let Se=0;Se<b;++Se){const Ie=Math.max(0,Math.ceil((H-Se)/m)),Qe=Math.min(d.outHeight,(d.inHeight+H-Se)/m),Ve=Se*N+he;for(let $e=0;$e<w;++$e){const We=Math.max(0,Math.ceil((Q-$e)/g)),ze=Math.min(d.outWidth,(d.inWidth+Q-$e)/g),ke=$e*I+Ve;for(let et=0;et<d.inChannels;++et){const Je=et*A+ke;for(let Re=0;Re<d.outChannels;++Re){let Ke=0;for(let xe=0;xe<d.batchSize;++xe){const De=xe*V,at=xe*P;for(let Xe=te;Xe<ne;++Xe){const Be=(ee+Xe*h-Y)*W+De,Tt=Xe*R+at;for(let Ot=Ie;Ot<Qe;++Ot){const rn=(Se+Ot*m-H)*j+Be,cn=Ot*O+Tt;for(let Jt=We;Jt<ze;++Jt){const Ua=($e+Jt*g-Q)*q+rn,Li=Jt*F+cn;Ke+=z[Ua+et]*D[Li+Re]}}}}k[Je+Re]=Ke}}}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const O$e={kernelName:lk,backendName:"cpu",kernelFunc:R$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _$e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:a}=e,{pad:i,strides:o,inputShape:l}=r;St([s],"conv3dBackpropInputV2");const u=$t(s.shape),c=$t(a.shape),d=ql(l,a.shape,o,1,i),h=new Cs(d.inShape,"float32"),m=h.values,[g,y,b,w]=h.strides,C=n.data.get(s.dataId).values,[k,T,N,I]=u,A=n.data.get(a.dataId).values,[D,P,R,O]=c,{batchSize:F,filterDepth:z,filterHeight:V,filterWidth:W,inChannels:j,inDepth:q,inHeight:Y,inWidth:Q,outChannels:H,outDepth:ee,outHeight:te,outWidth:ne,strideDepth:he,strideHeight:Se,strideWidth:Ie}=d,Qe=z-1-d.padInfo.front,Ve=V-1-d.padInfo.top,$e=W-1-d.padInfo.left;for(let We=0;We<F;++We)for(let ze=0;ze<j;++ze)for(let ke=0;ke<q;++ke){const et=ke-Qe,Je=Math.max(0,Math.ceil(et/he)),Re=Math.min(ee,(z+et)/he);for(let Ke=0;Ke<Y;++Ke){const xe=Ke-Ve,De=Math.max(0,Math.ceil(xe/Se)),at=Math.min(te,(V+xe)/Se);for(let Xe=0;Xe<Q;++Xe){const Nt=Xe-$e,Be=Math.max(0,Math.ceil(Nt/Ie)),Tt=Math.min(ne,(W+Nt)/Ie);let Ot=0;for(let Wn=Je;Wn<Re;++Wn){const rn=Wn*he-et;for(let cn=De;cn<at;++cn){const Jt=cn*Se-xe;for(let Mn=Be;Mn<Tt;++Mn){const Ua=Mn*Ie-Nt,Li=k*We+T*Wn+N*cn+I*Mn,cl=D*(z-1-rn)+P*(V-1-Jt)+R*(W-1-Ua)+O*ze;for(let ms=0;ms<H;++ms){const Va=C[Li+ms],aa=A[cl+ms];Ot+=Va*aa}}}}m[g*We+y*ke+b*Ke+w*Xe+ze]=Ot}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}const D$e={kernelName:uk,backendName:"cpu",kernelFunc:_$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P$e=Vn(Tg,t=>Math.cos(t)),M$e={kernelName:Tg,backendName:"cpu",kernelFunc:P$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j$e=Vn($g,t=>Math.cosh(t)),L$e={kernelName:$g,backendName:"cpu",kernelFunc:j$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F$e(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:a,boxInd:i}=e,{cropSize:o,method:l,extrapolationValue:u}=r,[c,d,h,m]=s.shape,g=a.shape[0],[y,b]=o,w=Wt([g,y,b,m],"float32"),C=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,T=n.data.get(s.dataId).values,N=$t(s.shape),I=$t(w.shape);for(let A=0;A<g;A++){const D=A*4,P=C[D],R=C[D+1],O=C[D+2],F=C[D+3],z=k[A];if(z>=c)continue;const V=y>1?(O-P)*(d-1)/(y-1):0,W=b>1?(F-R)*(h-1)/(b-1):0;for(let j=0;j<y;j++){const q=y>1?P*(d-1)+j*V:.5*(P+O)*(d-1);if(q<0||q>d-1){for(let Y=0;Y<b;Y++)for(let Q=0;Q<m;Q++){const H=Q+Y*I[2]+j*I[1]+A*I[0];w.values[H]=u}continue}if(l==="bilinear"){const Y=Math.floor(q),Q=Math.ceil(q),H=q-Y;for(let ee=0;ee<b;ee++){const te=b>1?R*(h-1)+ee*W:.5*(R+F)*(h-1);if(te<0||te>h-1){for(let Ie=0;Ie<m;Ie++){const Qe=Ie+ee*I[2]+j*I[1]+A*I[0];w.values[Qe]=u}continue}const ne=Math.floor(te),he=Math.ceil(te),Se=te-ne;for(let Ie=0;Ie<m;Ie++){let Qe=Ie+ne*N[2]+Y*N[1]+z*N[0];const Ve=T[Qe];Qe=Ie+he*N[2]+Y*N[1]+z*N[0];const $e=T[Qe];Qe=Ie+ne*N[2]+Q*N[1]+z*N[0];const We=T[Qe];Qe=Ie+he*N[2]+Q*N[1]+z*N[0];const ze=T[Qe],ke=Ve+($e-Ve)*Se,et=We+(ze-We)*Se;Qe=Ie+ee*I[2]+j*I[1]+A*I[0],w.values[Qe]=ke+(et-ke)*H}}}else for(let Y=0;Y<b;++Y){const Q=b>1?R*(h-1)+Y*W:.5*(R+F)*(h-1);if(Q<0||Q>h-1){for(let te=0;te<m;te++){const ne=te+Y*I[2]+j*I[1]+A*I[0];w.values[ne]=u}continue}const H=Math.round(Q),ee=Math.round(q);for(let te=0;te<m;te++){const ne=te+H*N[2]+ee*N[1]+z*N[0],he=te+Y*I[2]+j*I[1]+A*I[0];w.values[he]=T[ne]}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const z$e={kernelName:dk,backendName:"cpu",kernelFunc:F$e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,exclusive:i,reverse:o}=r;St(s,"cumprod");const l=Yn([a],s.shape.length);let u=s;l!=null&&(u=ci({inputs:{x:s},backend:n,attrs:{perm:l}}));const c=gr(1,s.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=zs(u.dtype,"int32"),h=VM(ye(u.shape),d),m=n.data.get(u.dataId).values,g=u.shape[u.shape.length-1],y=o?(w,C)=>w+g-C-1:(w,C)=>w+C;for(let w=0;w<m.length;w+=g)for(let C=0;C<g;C++){const k=y(w,C);if(C===0)h[k]=i?1:m[k];else{const T=y(w,C-1);h[k]=i?m[T]*h[T]:m[k]*h[T]}}const b=n.makeTensorInfo(u.shape,d,h);if(l!=null){const w=ju(l),C=ci({inputs:{x:b},backend:n,attrs:{perm:w}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(u),C}return b}const U$e={kernelName:ck,backendName:"cpu",kernelFunc:B$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,exclusive:i,reverse:o}=r;St(s,"cumsum");const l=Yn([a],s.shape.length);let u=s;l!=null&&(u=ci({inputs:{x:s},backend:n,attrs:{perm:l}}));const c=gr(1,s.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=zs(u.dtype,"int32"),h=Js(ye(u.shape),d),m=n.data.get(u.dataId).values,g=u.shape[u.shape.length-1],y=o?(w,C)=>w+g-C-1:(w,C)=>w+C;for(let w=0;w<m.length;w+=g)for(let C=0;C<g;C++){const k=y(w,C);if(C===0)h[k]=i?0:m[k];else{const T=y(w,C-1);h[k]=i?m[T]+h[T]:m[k]+h[T]}}const b=n.makeTensorInfo(u.shape,d,h);if(l!=null){const w=ju(l),C=ci({inputs:{x:b},backend:n,attrs:{perm:w}});return n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(u),C}return b}const W$e={kernelName:Jx,backendName:"cpu",kernelFunc:V$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:a}=e,{size:i,binaryOutput:o}=r;if(s.shape.length===1){const l=n.data.get(s.dataId).values,u=n.data.get(a.dataId).values,c=v4(l,u,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,c)}else if(s.shape.length===2){const l=n.bufferSync(s),u=n.bufferSync(a),c=Xee(l,u,i,o);return n.makeTensorInfo(c.shape,a.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const H$e={kernelName:fk,backendName:"cpu",kernelFunc:G$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:a,dataFormat:i}=r;X(i==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`);const o=s.shape[0],l=s.shape[1],u=s.shape[2],c=s.shape[3],d=l*a,h=u*a,m=c/(a*a),g=n.data.get(s.dataId).values,y=new Float32Array(o*d*h*m);let b=0;for(let w=0;w<o;++w)for(let C=0;C<d;++C){const k=Math.floor(C/a),T=C%a;for(let N=0;N<h;++N){const I=Math.floor(N/a),A=N%a,D=(T*a+A)*m;for(let P=0;P<m;++P){const O=P+D+c*(I+u*(k+l*w));y[b++]=g[O]}}}return n.makeTensorInfo([o,d,h,m],s.dtype,y)}const K$e={kernelName:hk,backendName:"cpu",kernelFunc:q$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yte(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a}=e,{strides:i,pad:o,dilations:l,dimRoundingMode:u}=r;St([s,a],"depthwiseConv2DNative");const c=$t(s.shape),d=$t(a.shape);let h=l;h==null&&(h=[1,1]),X(Es(i,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${h}'`);const m=mr(s.shape,a.shape,i,h,o,u,!0),{filterHeight:g,filterWidth:y,dilationHeight:b,dilationWidth:w,padInfo:C}=m,k=C.left,T=C.top,N=m.outChannels/m.inChannels,I=new Cs(m.outShape,s.dtype),A=n.data.get(s.dataId).values,D=n.data.get(a.dataId).values,P=I.values;for(let R=0;R<m.batchSize;++R){const O=R*c[0],F=R*I.strides[0];for(let z=0;z<m.outHeight;++z){const V=F+z*I.strides[1],W=z*m.strideHeight-T;for(let j=0;j<g;++j){const q=W+j*b;if(q<0||q>=m.inHeight)continue;const Y=j*d[0],Q=O+q*c[1];for(let H=0;H<m.outWidth;++H){const ee=V+H*I.strides[2],te=H*m.strideWidth-k;for(let ne=0;ne<y;++ne){const he=te+ne*w;if(he<0||he>=m.inWidth)continue;const Se=Y+ne*d[1],Ie=Q+he*m.inChannels;let Qe=ee,Ve=Se;for(let $e=0;$e<m.inChannels;++$e){const We=A[Ie+$e];for(let ze=0;ze<N;++ze)P[Qe+ze]+=We*D[Ve+ze];Qe+=N,Ve+=N}}}}}}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const X$e={kernelName:ev,backendName:"cpu",kernelFunc:Yte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:a}=e,{strides:i,dilations:o,pad:l,dimRoundingMode:u,filterShape:c}=r;St([s,a],"depthwiseConv2dNativeBackpropFilter");const d=mr(s.shape,c,i,o,l,u,!0),{strideHeight:h,strideWidth:m,filterHeight:g,filterWidth:y}=d,b=new Cs(d.filterShape,"float32"),w=d.padInfo.left,C=d.padInfo.top,k=d.outChannels/d.inChannels,T=n.data.get(s.dataId).values,N=new Cs(s.shape,s.dtype,T),I=n.data.get(a.dataId).values,A=new Cs(a.shape,a.dtype,I);for(let D=0;D<g;++D){const P=Math.max(0,Math.ceil((C-D)/h)),R=Math.min(d.outHeight,(d.inHeight+C-D)/h);for(let O=0;O<y;++O){const F=Math.max(0,Math.ceil((w-O)/m)),z=Math.min(d.outWidth,(d.inWidth+w-O)/m);for(let V=0;V<d.outChannels;++V){const W=Math.trunc(V/k),j=V%k;let q=0;for(let Y=0;Y<d.batchSize;++Y)for(let Q=P;Q<R;++Q){const H=D+Q*h-C;for(let ee=F;ee<z;++ee){const te=O+ee*m-w;q+=N.get(Y,H,te,W)*A.get(Y,Q,ee,V)}}b.set(q,D,O,W,j)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const Q$e={kernelName:pk,backendName:"cpu",kernelFunc:Y$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z$e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:a}=e,{strides:i,dilations:o,pad:l,dimRoundingMode:u,inputShape:c}=r;St([s,a],"depthwiseConv2DNativeBackpropInput");const d=$t(s.shape),h=$t(a.shape),m=mr(c,a.shape,i,o,l,u,!0),g=new Cs(m.inShape,"float32"),y=g.values,[b,w,C]=g.strides,k=n.data.get(s.dataId).values,[T,N,I]=d,A=n.data.get(a.dataId).values,[D,P,R]=h,{batchSize:O,filterHeight:F,filterWidth:z,inChannels:V,inHeight:W,inWidth:j,outChannels:q,outHeight:Y,outWidth:Q,strideHeight:H,strideWidth:ee}=m,te=F-1-m.padInfo.top,ne=z-1-m.padInfo.left,he=q/V;for(let Se=0;Se<O;++Se)for(let Ie=0;Ie<V;++Ie)for(let Qe=0;Qe<W;++Qe){const Ve=Qe-te,$e=Math.max(0,Math.ceil(Ve/H)),We=Math.min(Y,(F+Ve)/H);for(let ze=0;ze<j;++ze){const ke=ze-ne,et=Math.max(0,Math.ceil(ke/ee)),Je=Math.min(Q,(z+ke)/ee);let Re=0;for(let Ke=$e;Ke<We;++Ke){const xe=Ke*H-Ve;for(let De=et;De<Je;++De){const at=De*ee-ke,Xe=T*Se+N*Ke+I*De,Nt=D*(F-1-xe)+P*(z-1-at)+R*Ie;for(let Be=0;Be<he;++Be){const Tt=Ie*he+Be,Ot=k[Xe+Tt],Wn=A[Nt+Be];Re+=Ot*Wn}}}y[b*Se+w*Qe+C*ze+Ie]=Re}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const J$e={kernelName:mk,backendName:"cpu",kernelFunc:Z$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eIe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=ye(r.shape),a=n.data.get(r.dataId).values,i=Wt([s,s],r.dtype),o=i.values;for(let u=0;u<a.length;u++)o[u*s+u]=a[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,i.dtype,i.values)}const tIe={kernelName:gk,backendName:"cpu",kernelFunc:eIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nIe={kernelName:tv,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s}=t,{strides:a,pad:i,dilations:o}=n,l=e,u=l.data.get(r.dataId).values,c=r.shape.length,d=l.data.get(s.dataId).values,h=s.shape.length,{batchSize:m,inHeight:g,inWidth:y,inChannels:b,outHeight:w,outWidth:C,padInfo:k,strideHeight:T,strideWidth:N,filterHeight:I,filterWidth:A,dilationHeight:D,dilationWidth:P,outShape:R}=Hd(r.shape,s.shape,a,i,"NHWC",o),O=ye(R),F=R.length,z=Fr(r.dtype,O);for(let W=0;W<m;++W)for(let j=0;j<w;++j){const q=j*T-k.top;for(let Y=0;Y<C;++Y){const Q=Y*N-k.left;for(let H=0;H<b;++H){let ee=Number.MIN_SAFE_INTEGER;for(let ne=0;ne<I;++ne){const he=q+ne*D;if(he>=0&&he<g)for(let Se=0;Se<A;++Se){const Ie=Q+Se*P;if(Ie>=0&&Ie<y){const Qe=bu([W,he,Ie,H],c,$t(r.shape)),Ve=bu([ne,Se,H],h,$t(s.shape)),$e=u[Qe]+d[Ve];$e>ee&&(ee=$e)}}}const te=bu([W,j,Y,H],F,$t(R));z[te]=ee}}}return{dataId:l.write(Mh(z,r.dtype),R,r.dtype),shape:R,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rIe={kernelName:t2,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:a}=t,{strides:i,pad:o,dilations:l}=n,u=e,c=Yo(r.shape,u.data.get(r.dataId).values),d=Yo(s.shape,u.data.get(s.dataId).values),{batchSize:h,inHeight:m,inWidth:g,inChannels:y,outHeight:b,outWidth:w,padInfo:C,strideHeight:k,strideWidth:T,filterHeight:N,filterWidth:I,dilationHeight:A,dilationWidth:D,outShape:P}=Hd(r.shape,s.shape,i,o,"NHWC",l);X(a.rank===P.length,()=>`Error in ${t2}, dy must have the same rank as output ${P.length}, but got ${a.rank}`);const R=Yo(P,u.data.get(a.dataId).values),O=YX(s.shape,s.dtype);for(let z=0;z<h;++z)for(let V=0;V<b;++V){const W=V*k-C.top;for(let j=0;j<w;++j){const q=j*T-C.left;for(let Y=0;Y<y;++Y){let Q=Number.MIN_SAFE_INTEGER,H=0,ee=0;for(let te=0;te<N;++te){const ne=W+te*A;if(ne>=0&&ne<m)for(let he=0;he<I;++he){const Se=q+he*D;if(Se>=0&&Se<g){const Ie=c[z][ne][Se][Y]+d[te][he][Y];Ie>Q&&(Q=Ie,H=te,ee=he)}}}O[H][ee][Y]+=R[z][V][j][Y]}}}return{dataId:u.write(Mh(O,r.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sIe={kernelName:e2,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:a}=t,{strides:i,pad:o,dilations:l}=n,u=e,c=Yo(r.shape,u.data.get(r.dataId).values),d=Yo(s.shape,u.data.get(s.dataId).values),{batchSize:h,inHeight:m,inWidth:g,inChannels:y,outHeight:b,outWidth:w,padInfo:C,strideHeight:k,strideWidth:T,filterHeight:N,filterWidth:I,dilationHeight:A,dilationWidth:D,outShape:P}=Hd(r.shape,s.shape,i,o,"NHWC",l);X(a.rank===P.length,()=>`Error in ${e2}, dy must have the same rank as output ${P.length}, but got ${a.rank}`);const R=Yo(P,u.data.get(a.dataId).values),O=YX(r.shape,r.dtype);for(let z=0;z<h;++z)for(let V=0;V<b;++V){const W=V*k-C.top;for(let j=0;j<w;++j){const q=j*T-C.left;for(let Y=0;Y<y;++Y){let Q=Number.MIN_SAFE_INTEGER,H=W<0?0:W,ee=q<0?0:q;for(let te=0;te<N;++te){const ne=W+te*A;if(ne>=0&&ne<m)for(let he=0;he<I;++he){const Se=q+he*D;if(Se>=0&&Se<g){const Ie=c[z][ne][Se][Y]+d[te][he][Y];Ie>Q&&(Q=Ie,H=ne,ee=Se)}}}O[z][H][ee][Y]+=R[z][V][j][Y]}}}return{dataId:u.write(Mh(O,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aIe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s}=e,{canvas:a,options:i}=r,{contextOptions:o,imageOptions:l}=i||{},u=(l==null?void 0:l.alpha)||1,c=(o==null?void 0:o.contextType)||"2d";if(c!=="2d")throw new Error(`Context type ${o.contextType} is not supported by the CPU backend.`);const d=a.getContext(c,(o==null?void 0:o.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${c} type.`);const[h,m]=s.shape.slice(0,2),g=s.shape.length===2?1:s.shape[2],y=n.data.get(s.dataId).values,b=s.dtype==="float32"?255:1,w=new Uint8ClampedArray(m*h*4);for(let k=0;k<h*m;++k){const T=[0,0,0,255*u];for(let I=0;I<g;I++){const A=y[k*g+I];if(s.dtype==="float32"){if(A<0||A>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${A}.`)}else if(s.dtype==="int32"&&(A<0||A>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${A}.`);g===1?(T[0]=A*b,T[1]=A*b,T[2]=A*b):T[I]=A*b}const N=k*4;w[N+0]=Math.round(T[0]),w[N+1]=Math.round(T[1]),w[N+2]=Math.round(T[2]),w[N+3]=Math.round(T[3])}a.width=m,a.height=h;const C=new ImageData(w,m,h);return d.putImageData(C,0,0),s}const iIe={kernelName:GM,backendName:"cpu",kernelFunc:aIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a1(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r;St(s,"sum");let o;s.dtype==="bool"?o=Fd({inputs:{x:s},backend:n,attrs:{dtype:"int32"}}):o=Iu({inputs:{x:s},backend:n});const l=o.shape.length,u=Gt(a,o.shape),c=Yn(u,l);let d=u,h=o;c!=null&&(h=ci({inputs:{x:o},backend:n,attrs:{perm:c}}),d=gr(d.length,l)),hs("sum",d,h.shape.length);const[m,g]=ns(h.shape,d),y=zs(h.dtype,"int32");let b=v2(n,m,y);const w=ye(g),C=n.data.get(b.dataId).values,k=n.data.get(h.dataId).values;for(let T=0;T<C.length;++T){const N=T*w;let I=0;for(let A=0;A<w;++A)I+=k[N+A];C[T]=I}if(i){const T=Ur(b.shape,u),N=b;b=pr({inputs:{x:b},backend:n,attrs:{shape:T}}),n.disposeIntermediateTensorInfo(N)}return n.disposeIntermediateTensorInfo(o),c!=null&&n.disposeIntermediateTensorInfo(h),b}const oIe={kernelName:Dv,backendName:"cpu",kernelFunc:a1};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lIe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,a=e,{allDims:i,summedDims:o,idDims:l}=jN(s,a.length);FN(i.length,l,a);const{path:u,steps:c}=zN(o,l),d=c.length;let h=null,m=i.length;const g=[];for(let y=0;y<d;++y){for(const b of c[y]){const{permutationIndices:w,expandDims:C}=LN(m,l[b]);let k;BN(w)?k=a[b]:(k=ci({inputs:{x:a[b]},backend:n,attrs:{perm:w}}),g.push(k));const T=k.shape.slice();for(let N=0;N<C.length;++N)T.splice(C[N],0,1);Xt(k.shape,T)||(k=pr({inputs:{x:k},backend:n,attrs:{shape:T}}),g.push(k)),h===null?h=k:(h=tT({inputs:{a:k,b:h},backend:n}),g.push(h))}y<d-1&&(u[y]>=0&&(h=a1({inputs:{x:h},backend:n,attrs:{axis:u[y]-(i.length-m),keepDims:!1}}),g.push(h)),m--)}for(const y of g)y!==h&&n.disposeIntermediateTensorInfo(y);return h}const uIe={kernelName:yk,backendName:"cpu",kernelFunc:lIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cIe(t){const{inputs:e,backend:n}=t,{dy:r,y:s}=e;St([r,s],"eluGrad");const a=new Float32Array(ye(s.shape)),i=n.data.get(s.dataId).values,o=n.data.get(r.dataId).values;for(let l=0;l<i.length;++l){const u=i[l];u>=0?a[l]=o[l]:a[l]=o[l]*(u+1)}return n.makeTensorInfo(s.shape,"float32",a)}const dIe={kernelName:bk,backendName:"cpu",kernelFunc:cIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fIe=RN,hIe=ON,pIe=_N,mIe=DN,gIe=PN,yIe=MN,bIe=Vn(Ag,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+fIe*n);return e*(1-((((yIe*r+gIe)*r+mIe)*r+pIe)*r+hIe)*r*Math.exp(-n*n))}),xIe={kernelName:Ag,backendName:"cpu",kernelFunc:bIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C2(t){const{inputs:e,backend:n,attrs:r}=t,{input:s}=e,{dim:a}=r,i=s.shape.length,o=s.shape.slice();let l=a;return a<0&&(X(-(i+1)<=a,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+a+1),o.splice(l,0,1),pr({inputs:{x:s},backend:n,attrs:{shape:o}})}const vIe={kernelName:rv,backendName:"cpu",kernelFunc:C2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wIe=ss((t,e)=>t/e),T4=As(Ig,wIe),$D={kernelName:Ig,backendName:"cpu",kernelFunc:T4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qte(t,e,n){const r=t.shape,s=r[0],a=r[1],i=n.data.get(t.dataId),o=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,u=[s,a],c=ye(u),d=$s("float32",c),h=$s("float32",c);for(let b=0;b<s;b++){const w=Nh({inputs:{x:o},backend:n,attrs:{begin:[b,0],size:[1,a]}}),C=Nh({inputs:{x:l},backend:n,attrs:{begin:[b,0],size:[1,a]}}),k=Ni({inputs:{real:w,imag:C},backend:n}),{real:T,imag:N}=SIe(k,e,n),I=Fl(T,N);for(let A=0;A<a;A++){const D=Kj(I,A);d[b*a+A]=D.real,h[b*a+A]=D.imag}n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(k)}const m=n.makeTensorInfo(u,"float32",d),g=n.makeTensorInfo(u,"float32",h),y=Ni({inputs:{real:m,imag:g},backend:n});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}function SIe(t,e,n){const r=ye(t.shape),s=n.data.get(t.dataId),a=n.data.get(s.complexTensorInfos.real.dataId).values,i=n.data.get(s.complexTensorInfos.imag.dataId).values;if(CIe(r)){const o=ID(a,i,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const u=n.makeTensorInfo(l,"float32",o.real),c=n.makeTensorInfo(l,"float32",o.imag),d=n.makeTensorInfo([],"float32",Vd(r,"float32")),h=Iu({inputs:{x:d},backend:n}),m=$D.kernelFunc({inputs:{a:u,b:d},backend:n}),g=$D.kernelFunc({inputs:{a:c,b:h},backend:n}),y=n.data.get(m.dataId).values,b=n.data.get(g.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),{real:y,imag:b}}return o}else{const o=Fl(a,i),l=kIe(o,r,e);return oZ(l)}}function CIe(t){return(t&t-1)===0}function ID(t,e,n,r,s){if(n===1)return{real:t,imag:e};const a=Fl(t,e),i=n/2,o=lZ(a),l=o.real,u=o.imag,c=[l.length],d=s.makeTensorInfo(c,"float32",l),h=s.makeTensorInfo(c,"float32",u),m=Ni({inputs:{real:d,imag:h},backend:s}),g=uZ(a),y=g.real,b=g.imag,w=[y.length],C=s.makeTensorInfo(w,"float32",y),k=s.makeTensorInfo(w,"float32",b),T=Ni({inputs:{real:C,imag:k},backend:s}),N=ID(l,u,i,r,s),I=N.real,A=N.imag,D=[I.length],P=s.makeTensorInfo(D,"float32",I),R=s.makeTensorInfo(D,"float32",A),O=Ni({inputs:{real:P,imag:R},backend:s}),F=ID(y,b,i,r,s),z=F.real,V=F.imag,W=[z.length],j=s.makeTensorInfo(W,"float32",z),q=s.makeTensorInfo(W,"float32",V),Y=Ni({inputs:{real:j,imag:q},backend:s}),Q=dZ(n,r),H=[Q.real.length],ee=s.makeTensorInfo(H,"float32",Q.real),te=s.makeTensorInfo(H,"float32",Q.imag),ne=Ni({inputs:{real:ee,imag:te},backend:s}),he=tT({inputs:{a:ne,b:Y},backend:s}),Se=_m({inputs:{a:O,b:he},backend:s}),Ie=k4({inputs:{a:O,b:he},backend:s}),Qe=kh({inputs:{input:Se},backend:s}),Ve=kh({inputs:{input:Ie},backend:s}),$e=Dm({inputs:{input:Se},backend:s}),We=Dm({inputs:{input:Ie},backend:s}),ze=Pm({inputs:[Qe,Ve],backend:s,attrs:{axis:0}}),ke=Pm({inputs:[$e,We],backend:s,attrs:{axis:0}}),et=s.data.get(ze.dataId).values,Je=s.data.get(ke.dataId).values;return s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(m),s.disposeIntermediateTensorInfo(C),s.disposeIntermediateTensorInfo(k),s.disposeIntermediateTensorInfo(T),s.disposeIntermediateTensorInfo(P),s.disposeIntermediateTensorInfo(R),s.disposeIntermediateTensorInfo(O),s.disposeIntermediateTensorInfo(j),s.disposeIntermediateTensorInfo(q),s.disposeIntermediateTensorInfo(Y),s.disposeIntermediateTensorInfo(ee),s.disposeIntermediateTensorInfo(te),s.disposeIntermediateTensorInfo(ne),s.disposeIntermediateTensorInfo(he),s.disposeIntermediateTensorInfo(Se),s.disposeIntermediateTensorInfo(Ie),s.disposeIntermediateTensorInfo(Qe),s.disposeIntermediateTensorInfo($e),s.disposeIntermediateTensorInfo(Ve),s.disposeIntermediateTensorInfo(We),s.disposeIntermediateTensorInfo(ze),s.disposeIntermediateTensorInfo(ke),{real:et,imag:Je}}function kIe(t,e,n){const r=new Float32Array(e*2);for(let s=0;s<e;s++){let a=0,i=0;for(let o=0;o<e;o++){const l=fZ(s*o,e,n),u=Kj(t,o);a+=u.real*l.real-u.imag*l.imag,i+=u.real*l.imag+u.imag*l.real}n&&(a/=e,i/=e),cZ(r,a,i,s)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NIe(t){const{inputs:e,backend:n}=t,{input:r}=e,s=ye(r.shape),a=r.shape[r.shape.length-1],i=s/a,o=pr({inputs:{x:r},backend:n,attrs:{shape:[i,a]}}),l=Qte(o,!1,n),u=pr({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}const TIe={kernelName:xk,backendName:"cpu",kernelFunc:NIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $4(t){const{backend:e,attrs:n}=t,{shape:r,value:s,dtype:a}=n,i=a||Dh(s),o=Fr(i,ye(r));return IIe(o,s,i),e.makeTensorInfo(r,i,o)}const $Ie={kernelName:vk,backendName:"cpu",kernelFunc:$4};function IIe(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EIe={kernelName:wk,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,s=n,a=$s(r.dtype,ye(r.shape)),[i,o,l,u]=r.shape,c=s.data.get(r.dataId).values;for(let h=0;h<i;h++){const m=h*l*o*u;for(let g=0;g<o;g++){const y=g*(l*u);for(let b=0;b<l;b++){const w=b*u;for(let C=0;C<u;C++){const k=Math.round(l-b-1),T=m+y+w+C;let N=c[T];if(k>=0&&k<l){const I=k*u,A=m+y+I+C;N=c[A]}a[T]=N}}}}return{dataId:s.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a,bias:i,preluActivationWeights:o}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h,activation:m,leakyreluAlpha:g}=r;let y=Xte({inputs:{x:s,filter:a},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h}});if(i){const b=y;if(c==="NCHW"&&i.shape.length===1&&i.shape[0]!==1){const w=pr({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});y=_m({inputs:{a:y,b:w},backend:n}),n.disposeIntermediateTensorInfo(w)}else y=_m({inputs:{a:y,b:i},backend:n});n.disposeIntermediateTensorInfo(b)}if(m){const b=y;if(c==="NCHW"&&m==="prelu"&&o.shape.length===1&&o.shape[0]!==1){const w=pr({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});y=S2(n,y,m,w,g),n.disposeIntermediateTensorInfo(w)}else y=S2(n,y,m,o,g);n.disposeIntermediateTensorInfo(b)}return y}const RIe={kernelName:$b,backendName:"cpu",kernelFunc:AIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a,bias:i,preluActivationWeights:o}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h,activation:m,leakyreluAlpha:g}=r;let y=Yte({inputs:{x:s,filter:a},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h}});if(i){const b=y;y=_m({inputs:{a:y,b:i},backend:n}),n.disposeIntermediateTensorInfo(b)}if(m){const b=y;y=S2(n,y,m,o,g),n.disposeIntermediateTensorInfo(b)}return y}const _Ie={kernelName:Ib,backendName:"cpu",kernelFunc:OIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DIe(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,a=ye(r.shape),i=s.shape,o=i[i.length-1],[l,u,c,d]=SN(r,s);if(u===0)return n.makeTensorInfo(l,r.dtype,[]);const h=n.data.get(s.dataId).values,m=n.bufferSync(r),g=ite(h,m,r.dtype,u,o,c,d,r.shape,a);return n.makeTensorInfo(l,r.dtype,g.values)}const PIe={kernelName:Sk,backendName:"cpu",kernelFunc:DIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:a}=e,{axis:i,batchDims:o}=r;St([s,a],"gatherV2");const l=Gt(i,s.shape)[0],u=n.data.get(a.dataId).values,c=s.shape[l];for(let T=0;T<u.length;++T){const N=u[T];X(N<=c-1&&N>=0,()=>`GatherV2: the index value ${N} is not in [0, ${c-1}]`)}let d=o;o==null&&(d=0);const h=ye(a.shape),m=VN(s,a,l,d),g=pr({inputs:{x:s},backend:n,attrs:{shape:[m.batchSize,m.outerSize,m.dimSize,m.sliceSize]}}),y=pr({inputs:{x:a},backend:n,attrs:{shape:[m.batchSize,h/m.batchSize]}}),b=[m.batchSize,m.outerSize,h/m.batchSize,m.sliceSize],w=n.bufferSync(y),C=n.bufferSync(g),k=ote(C,w,b);return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.makeTensorInfo(m.outputShape,k.dtype,k.values)}const jIe={kernelName:av,backendName:"cpu",kernelFunc:MIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LIe(t){const{inputs:e,backend:n}=t,{input:r}=e,s=ye(r.shape),a=r.shape[r.shape.length-1],i=s/a,o=pr({inputs:{x:r},backend:n,attrs:{shape:[i,a]}}),l=Qte(o,!0,n),u=pr({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}const FIe={kernelName:Ck,backendName:"cpu",kernelFunc:LIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zIe=Vn(jg,t=>Number.isFinite(t)?1:0,"bool"),BIe={kernelName:jg,backendName:"cpu",kernelFunc:zIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UIe=Vn(Lg,t=>Math.abs(t)===1/0?1:0,"bool"),VIe={kernelName:Lg,backendName:"cpu",kernelFunc:UIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WIe=Vn(Fg,t=>Number.isNaN(t)?1:0,"bool"),GIe={kernelName:Fg,backendName:"cpu",kernelFunc:WIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HIe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:a}=n,i=fte(r,s,a);return e.makeTensorInfo([i.length],"float32",i)}const qIe={kernelName:Nk,backendName:"cpu",kernelFunc:HIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KIe=Vn(Bg,t=>Math.log1p(t)),XIe={kernelName:Bg,backendName:"cpu",kernelFunc:KIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YIe=ss((t,e)=>t&&e),QIe=As(cv,YIe,null,"bool"),ZIe={kernelName:cv,backendName:"cpu",kernelFunc:QIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JIe=Vn(dv,t=>t?0:1,"bool"),eEe={kernelName:dv,backendName:"cpu",kernelFunc:JIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tEe=ss((t,e)=>t||e),nEe=As(fv,tEe,null,"bool"),rEe={kernelName:fv,backendName:"cpu",kernelFunc:nEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:a,bias:i,alpha:o,beta:l}=r;St(s,"LRN");const u=s.shape[3],c=u-1,d=n.data.get(s.dataId).values,h=ye(s.shape),m=new Float32Array(h);function g(y){const b=y%u;let w=y-b+Math.max(0,b-a);const C=y-b+Math.min(b+a,c);let k=0;for(;w<=C;w++){const T=d[w];k+=T*T}return k}for(let y=0;y<h;y++){const b=g(y),w=d[y]*Math.pow(i+o*b,-l);m[y]=w}return n.makeTensorInfo(s.shape,s.dtype,m)}const aEe={kernelName:hv,backendName:"cpu",kernelFunc:sEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,y:a,dy:i}=e,{depthRadius:o,bias:l,alpha:u,beta:c}=r;St(i,"LRNGrad");const d=ye(i.shape),h=i.shape[3],m=n.data.get(i.dataId).values,g=n.data.get(s.dataId).values,y=n.data.get(a.dataId).values,b=new Float32Array(d),w=d;for(let C=0;C<w;C++){const k=C%h,T=C-k+Math.max(0,k-o),N=C-k+Math.min(h,k+o+1);let I=0;for(let A=T;A<N;A++)I+=Math.pow(g[A],2);I=u*I+l;for(let A=T;A<N;A++){let D=-2*u*c*g[A]*y[C]/I;C===A&&(D+=Math.pow(I,-c)),D*=m[C],b[A]+=D}}return n.makeTensorInfo(i.shape,s.dtype,b)}const oEe={kernelName:Tk,backendName:"cpu",kernelFunc:iEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zte(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:a,keepDims:i}=r,o=n;let l=s.shape;const u=l.length,c=Gt(a,l);let d=c;const h=Yn(d,u);let m=o.data.get(s.dataId).values;if(h!=null){const T=new Array(u);for(let N=0;N<T.length;N++)T[N]=l[h[N]];m=S4(m,l,s.dtype,h,T),d=gr(d.length,u),l=T}St(s,"max"),hs("max",d,u);const[g,y]=ns(l,d),b=ye(y),w=pte(m,b,g,s.dtype),C=o.write(w,g,s.dtype);let k=g;return i&&(k=Ur(g,c)),{dataId:C,shape:k,dtype:s.dtype}}const lEe={kernelName:pv,backendName:"cpu",kernelFunc:Zte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;St(s,"maxPool");const{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=r,u=1;X(Es(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=ga(s.shape,a,i,u,o,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&Xt(c.inShape,c.outShape))d=Iu({inputs:{x:s},backend:n});else{const h=n.data.get(s.dataId).values,m=$t(s.shape),g=N4(h,s.shape,s.dtype,m,c,"max");d=n.makeTensorInfo(c.outShape,s.dtype,g.values)}return d}const cEe={kernelName:mv,backendName:"cpu",kernelFunc:uEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:a,strides:i,pad:o,dimRoundingMode:l,dataFormat:u}=r;St(s,"maxPool3d");const c=go(s.shape,a,i,1,o,l,u),d=n.data.get(s.dataId).values,h=Kte(d,s.shape,s.dtype,$t(s.shape),c,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}const fEe={kernelName:gv,backendName:"cpu",kernelFunc:dEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hEe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:a}=e,{filterSize:i,strides:o,pad:l,dimRoundingMode:u}=r;St([s,a],"maxPool3DGrad");const c=go(a.shape,i,o,1,l,u),d=n.bufferSync(a),h=t$e(d,c),m=c.strideDepth,g=c.strideHeight,y=c.strideWidth,b=c.dilationDepth,w=c.dilationHeight,C=c.dilationWidth,k=c.effectiveFilterDepth,T=c.effectiveFilterHeight,N=c.effectiveFilterWidth,I=k-1-c.padInfo.front,A=N-1-c.padInfo.left,D=T-1-c.padInfo.top,P=Wt(a.shape,"float32"),R=n.bufferSync(s);for(let O=0;O<c.batchSize;++O)for(let F=0;F<c.inChannels;++F)for(let z=0;z<c.inDepth;++z)for(let V=0;V<c.inHeight;++V)for(let W=0;W<c.inWidth;++W){const j=z-I,q=V-D,Y=W-A;let Q=0;for(let H=0;H<k;H+=b){const ee=(j+H)/m;if(!(ee<0||ee>=c.outDepth||Math.floor(ee)!==ee))for(let te=0;te<T;te+=w){const ne=(q+te)/g;if(!(ne<0||ne>=c.outHeight||Math.floor(ne)!==ne))for(let he=0;he<N;he+=C){const Se=(Y+he)/y;if(Se<0||Se>=c.outWidth||Math.floor(Se)!==Se)continue;const Ie=k*T*N-1-h.get(O,ee,ne,Se,F),Qe=H*T*N+te*N+he,Ve=Ie===Qe?1:0;if(Ve===0)continue;const $e=R.get(O,ee,ne,Se,F);Q+=$e*Ve}}}P.set(Q,O,z,V,W,F)}return n.makeTensorInfo(P.shape,P.dtype,P.values)}const pEe={kernelName:Ik,backendName:"cpu",kernelFunc:hEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mEe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:a,output:i}=e,o=a;St([a,i],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,h=ga(o.shape,l,u,1,c,d),m=n.data.get(o.dataId).values,g=Wt(h.outShape,o.dtype,qte(m,o.shape,o.dtype,h).values),y=h.strideHeight,b=h.strideWidth,w=h.dilationHeight,C=h.dilationWidth,k=h.effectiveFilterHeight,T=h.effectiveFilterWidth,N=T-1-h.padInfo.left,I=k-1-h.padInfo.top,A=Wt(o.shape,"float32"),D=n.data.get(s.dataId).values,P=Wt(s.shape,"float32",D);for(let R=0;R<h.batchSize;++R)for(let O=0;O<h.inChannels;++O)for(let F=0;F<h.inHeight;++F)for(let z=0;z<h.inWidth;++z){const V=F-I,W=z-N;let j=0;for(let q=0;q<k;q+=w){const Y=(V+q)/y;if(!(Y<0||Y>=h.outHeight||Math.floor(Y)!==Y))for(let Q=0;Q<T;Q+=C){const H=(W+Q)/b;if(H<0||H>=h.outWidth||Math.floor(H)!==H)continue;const ee=k*T-1-g.get(R,Y,H,O),te=q*T+Q,ne=ee===te?1:0;if(ne===0)continue;const he=P.get(R,Y,H,O);j+=he*ne}}A.set(j,R,F,z,O)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}const gEe={kernelName:$k,backendName:"cpu",kernelFunc:mEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yEe(t,e,n,r,s){const a=$t(e),i=N4(t,e,n,a,s,"max"),o=qte(t,e,n,s,!0,r);return[i.values,o.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bEe={kernelName:Ek,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:a,pad:i,includeBatchInIndex:o}=e,l=n;St(r,"MaxPoolWithArgmax");const u=l.data.get(r.dataId).values,c=ga(r.shape,s,a,[1,1],i),[d,h]=yEe(u,r.shape,r.dtype,o,c),m=l.write(d,c.outShape,r.dtype),g=l.write(h,c.outShape,r.dtype);return[{dataId:m,shape:c.outShape,dtype:r.dtype},{dataId:g,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r,o=Gt(a,s.shape),u=ns(s.shape,o)[1],c=ye(u),d=[],h=n.makeTensorInfo([],"float32",new Float32Array([c]));d.push(h);const m=Fd({inputs:{x:s},backend:n,attrs:{dtype:"float32"}});d.push(m);const g=T4({inputs:{a:m,b:h},backend:n});d.push(g);const y=a1({inputs:{x:g},backend:n,attrs:{axis:a,keepDims:i}});return d.forEach(b=>n.disposeIntermediateTensorInfo(b)),y}const vEe={kernelName:yv,backendName:"cpu",kernelFunc:xEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r;St(s,"min");const o=Gt(a,s.shape);let l=o;const u=Yn(l,s.shape.length);let c=s;u!=null&&(c=ci({inputs:{x:s},backend:n,attrs:{perm:u}}),l=gr(l.length,s.shape.length)),hs("min",l,c.shape.length);const[d,h]=ns(c.shape,l),m=ye(h),g=Js(ye(d),c.dtype),y=n.data.get(c.dataId).values;for(let w=0;w<g.length;++w){const C=w*m;let k=y[C];for(let T=0;T<m;++T){const N=y[C+T];(Number.isNaN(N)||N<k)&&(k=N)}g[w]=k}u!=null&&n.disposeIntermediateTensorInfo(c);const b=n.makeTensorInfo(d,c.dtype,g);if(i){const w=Ur(d,o),C=pr({inputs:{x:b},backend:n,attrs:{shape:w}});return n.disposeIntermediateTensorInfo(b),C}return b}const SEe={kernelName:bv,backendName:"cpu",kernelFunc:wEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:a,mode:i}=r;St(s,"mirrorPad");const o=a.map((k,T)=>k[0]+s.shape[T]+k[1]),l=a.map(k=>k[0]),u=a.map((k,T)=>k[0]+s.shape[T]),c=i==="reflect"?0:1,d=n.data.get(s.dataId).values,h=s.shape.length,m=$t(s.shape),g=ye(o),y=o.length,b=$t(o),w=$s(s.dtype,g);for(let k=0;k<g;k++){let T=mg(k,y,b);for(let I=0;I<y;I++)T[I]<l[I]?T[I]=l[I]*2-T[I]-c:T[I]>=u[I]&&(T[I]=(u[I]-1)*2-T[I]+c);T=T.map((I,A)=>I-l[A]);const N=bu(T,h,m);w[k]=d[N]}return{dataId:n.write(w,o,s.dtype),shape:o,dtype:s.dtype}}const kEe={kernelName:xv,backendName:"cpu",kernelFunc:CEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NEe=ss((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),TEe=As(Wg,NEe),$Ee={kernelName:Wg,backendName:"cpu",kernelFunc:TEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jte(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:a}=r,i=s.shape.length;let o=a;if(o===-1&&(o=i-1),o!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${o}`);const l=Gt([o],s.shape),u=Zte({inputs:{x:s},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=Ur(u.shape,l),d=pr({inputs:{x:u},backend:n,attrs:{shape:c}}),h=k4({inputs:{a:s,b:d},backend:n}),m=nte({inputs:{x:h},backend:n}),g=a1({inputs:{x:m},backend:n,attrs:{axis:l,keepDims:!1}}),y=pr({inputs:{x:g},backend:n,attrs:{shape:c}}),b=T4({inputs:{a:m,b:y},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),b}const IEe={kernelName:jv,backendName:"cpu",kernelFunc:Jte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EEe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:a,seed:i,normalized:o}=r;St(s,"multinomial");const l=o?s:Jte({inputs:{logits:s},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],d=n.data.get(l.dataId).values,h=[u,a],m=Js(ye(h),"int32");for(let g=0;g<u;++g){const y=g*c,b=new Float32Array(c-1);b[0]=d[y];for(let k=1;k<b.length;++k)b[k]=b[k-1]+d[y+k];const w=cN.alea(i.toString()),C=g*a;for(let k=0;k<a;++k){const T=w();m[C+k]=b.length;for(let N=0;N<b.length;N++)if(T<b[N]){m[C+k]=N;break}}}return o||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(h,"int32",m)}const AEe={kernelName:Ak,backendName:"cpu",kernelFunc:EEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const REe=vN;function OEe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l}=r;St(s,"NonMaxSuppression");const u=n.data.get(s.dataId).values,c=n.data.get(a.dataId).values,{selectedIndices:d}=REe(u,c,i,o,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const _Ee={kernelName:Rk,backendName:"cpu",kernelFunc:OEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DEe=Fj;function PEe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:u}=r;St(s,"NonMaxSuppressionPadded");const c=n.data.get(s.dataId).values,d=n.data.get(a.dataId).values,{selectedIndices:h,validOutputs:m}=DEe(c,d,i,o,l,u);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([m]))]}const MEe={kernelName:HM,backendName:"cpu",kernelFunc:PEe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jEe=wN;function LEe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,softNmsSigma:u}=r;St(s,"NonMaxSuppressionWithScore");const c=n.data.get(s.dataId).values,d=n.data.get(a.dataId).values,h=i,m=o,g=l,y=u,{selectedIndices:b,selectedScores:w}=jEe(c,d,h,m,g,y);return[n.makeTensorInfo([b.length],"int32",new Int32Array(b)),n.makeTensorInfo([w.length],"float32",new Float32Array(w))]}const FEe={kernelName:Ok,backendName:"cpu",kernelFunc:LEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zEe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:a,depth:i,onValue:o,offValue:l}=r;St(s,"oneHot");const u=ye(s.shape),c=new Float32Array(u*i);c.fill(l);const d=n.data.get(s.dataId).values;for(let h=0;h<u;++h)d[h]>=0&&d[h]<i&&(c[h*i+d[h]]=o);return n.makeTensorInfo([...s.shape,i],a,c)}const BEe={kernelName:Cv,backendName:"cpu",kernelFunc:zEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k2(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const s=kh({inputs:{input:r},backend:n}),a=k2({inputs:{x:s},backend:n}),i=Dm({inputs:{input:r},backend:n}),o=k2({inputs:{x:i},backend:n}),l=Ni({inputs:{real:a,imag:o},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),l}else return $4({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const UEe={kernelName:zv,backendName:"cpu",kernelFunc:k2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ene(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const s=kh({inputs:{input:r},backend:n}),a=ene({inputs:{x:s},backend:n}),i=Dm({inputs:{input:r},backend:n}),o=k2({inputs:{x:i},backend:n}),l=Ni({inputs:{real:a,imag:o},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),l}else return $4({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const VEe={kernelName:Sv,backendName:"cpu",kernelFunc:ene};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tne(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return C2({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const a=e[0].shape,i=e[0].dtype;e.forEach(c=>{di(a,c.shape,"All tensors passed to stack must have matching shapes"),X(i===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(c=>{const d=C2({inputs:{input:c},backend:n,attrs:{dim:s}});return o.push(d),d}),u=Pm({inputs:l,backend:n,attrs:{axis:s}});return o.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const WEe={kernelName:kv,backendName:"cpu",kernelFunc:tne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:a,constantValue:i}=r;St(s,"pad");const o=a.map((C,k)=>C[0]+s.shape[k]+C[1]),l=a.map(C=>C[0]),u=n.data.get(s.dataId).values,c=ye(s.shape),d=s.shape.length,h=$t(s.shape),m=ye(o),g=o.length,y=$t(o),b=$s(s.dtype,m);i!==0&&b.fill(i);for(let C=0;C<c;C++){const T=mg(C,d,h).map((I,A)=>I+l[A]),N=bu(T,g,y);b[N]=u[C]}return{dataId:n.write(b,o,s.dtype),shape:o,dtype:s.dtype}}const nne={kernelName:Nv,backendName:"cpu",kernelFunc:GEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HEe=ss((t,e)=>Math.pow(t,e)),qEe=As(Hg,HEe),KEe={kernelName:Hg,backendName:"cpu",kernelFunc:qEe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XEe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:a,indices:i}=e,{outputRaggedRank:o}=r,l=s.map(w=>n.data.get(w.dataId).values),u=s.map(w=>w.shape),c=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,[h,m,g]=vte(l,u,c,a.shape,a.dtype,d,i.shape),y=h.map(w=>n.makeTensorInfo([w.length],"int32",w)),b=n.makeTensorInfo(g,a.dtype,m);return y.concat([b])}const YEe={kernelName:qM,backendName:"cpu",kernelFunc:XEe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QEe(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:a}=e,i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,l=n.data.get(a.dataId).values,[u,c]=wte(i,r.shape,r.dtype,o,s.shape,l,a.shape),d=n.makeTensorInfo([u.length],"int32",u),h=n.makeTensorInfo([c.length],r.dtype,c);return[d,h]}const ZEe={kernelName:KM,backendName:"cpu",kernelFunc:QEe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JEe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:a,defaultValue:i,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,u=n.data.get(s.dataId).values,c=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,h=o.map(b=>n.data.get(b.dataId).values),m=o.map(b=>b.shape),[g,y]=Ste(u,s.shape,c,a.shape,a.dtype,d,i.shape,h,m,l);return n.makeTensorInfo(g,a.dtype,y)}const eAe={kernelName:XM,backendName:"cpu",kernelFunc:JEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tAe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,dtype:a,step:i}=n,o=Cte(r,s,i,a);return e.makeTensorInfo([o.length],a,o)}const nAe={kernelName:_k,backendName:"cpu",kernelFunc:tAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rAe=Vn(qg,t=>1/t),sAe={kernelName:qg,backendName:"cpu",kernelFunc:rAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aAe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:a,halfPixelCenters:i,size:o}=r;St(s,"resizeBilinear");const l=$t(s.shape),[u,c]=o,[d,h,m,g]=s.shape,y=n.data.get(s.dataId).values,b=new Float32Array(ye([d,u,c,g])),w=[a&&u>1?h-1:h,a&&c>1?m-1:m],C=[a&&u>1?u-1:u,a&&c>1?c-1:c];let k=0;const T=w[0]/C[0],N=w[1]/C[1];for(let I=0;I<d;I++)for(let A=0;A<u;A++){let D;i?D=T*(A+.5)-.5:D=T*A;const P=Math.max(0,Math.floor(D)),R=D-P,O=Math.min(h-1,Math.ceil(D)),F=I*l[0]+P*l[1],z=I*l[0]+O*l[1];for(let V=0;V<c;V++){let W;i?W=N*(V+.5)-.5:W=N*V;const j=Math.max(0,Math.floor(W)),q=W-j,Y=Math.min(m-1,Math.ceil(W)),Q=F+j*l[2],H=z+j*l[2],ee=F+Y*l[2],te=z+Y*l[2];for(let ne=0;ne<g;ne++){const he=y[Q+ne],Se=y[H+ne],Ie=y[ee+ne],Qe=y[te+ne],Ve=he+(Ie-he)*q,$e=Se+(Qe-Se)*q,We=Ve+($e-Ve)*R;b[k++]=We}}}return n.makeTensorInfo([d,u,c,g],"float32",b)}const iAe={kernelName:Av,backendName:"cpu",kernelFunc:aAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oAe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:a}=e,{alignCorners:i}=r;St([a,s],"resizeBilinearGrad");const o=$t(s.shape),[l,u,c,d]=s.shape,[,h,m]=a.shape,g=new Float32Array(l*u*c*d),y=[i&&h>1?u-1:u,i&&m>1?c-1:c],b=[i&&h>1?h-1:h,i&&m>1?m-1:m],w=y[0]/b[0],C=y[1]/b[1],k=n.data.get(a.dataId).values;let T=0;for(let N=0;N<l;N++){const I=N*o[0];for(let A=0;A<h;A++){const D=A*w,P=Math.floor(D),R=Math.min(Math.ceil(D),u-1),O=I+P*o[1],F=I+R*o[1],z=D-P,V=1-z;for(let W=0;W<m;W++){const j=W*C,q=Math.floor(j),Y=Math.min(Math.ceil(j),c-1),Q=j-q,H=1-Q,ee=O+q*o[2],te=O+Y*o[2],ne=F+q*o[2],he=F+Y*o[2],Se=V*H,Ie=V*Q,Qe=z*H,Ve=z*Q;for(let $e=0;$e<d;$e++){const We=k[T++];g[ee+$e]+=We*Se,g[te+$e]+=We*Ie,g[ne+$e]+=We*Qe,g[he+$e]+=We*Ve}}}}return n.makeTensorInfo([l,c,u,d],"float32",g)}const lAe={kernelName:Mk,backendName:"cpu",kernelFunc:oAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uAe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:a,halfPixelCenters:i,size:o}=r;St(s,"resizeNearestNeighbor");const l=$t(s.shape),[u,c]=o,[d,h,m,g]=s.shape,y=n.data.get(s.dataId).values,b=new Float32Array(d*u*c*g),w=[a&&u>1?h-1:h,a&&c>1?m-1:m],C=[a&&u>1?u-1:u,a&&c>1?c-1:c],k=w[0]/C[0],T=w[1]/C[1];let N=0;for(let I=0;I<d;I++){const A=I*l[0];for(let D=0;D<u;D++){const P=i?k*(D+.5):k*D;let R=Math.min(h-1,a?Math.round(P):Math.floor(P));i&&(R=Math.max(0,R));const O=A+R*l[1];for(let F=0;F<c;F++){const z=i?T*(F+.5):T*F;let V=Math.min(m-1,a?Math.round(z):Math.floor(z));i&&(V=Math.max(0,V));const W=O+V*l[2];for(let j=0;j<g;j++){const q=y[W+j];b[N++]=q}}}}return n.makeTensorInfo([d,u,c,g],s.dtype,b)}const cAe={kernelName:Ev,backendName:"cpu",kernelFunc:uAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dAe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:a}=e,{alignCorners:i}=r;St([a,s],"resizeNearestNeighborGrad");const o=$t(s.shape),l=$t(a.shape),[u,c,d,h]=s.shape,[,m,g]=a.shape,y=new Float32Array(u*c*d*h),b=n.data.get(a.dataId).values,w=[i&&m>1?c-1:c,i&&g>1?d-1:d],C=[i&&m>1?m-1:m,i&&g>1?g-1:g],k=w[0]/C[0],T=w[1]/C[1],N=1/k,I=1/T,A=Math.ceil(N)*2+2,D=Math.ceil(I)*2+2;for(let P=0;P<u;P++){const R=P*o[0];for(let O=0;O<c;O++){const F=R+O*o[1],z=Math.floor(O*N),V=Math.floor(z-A/2);for(let W=0;W<d;W++){const j=F+W*o[2],q=Math.floor(W*I),Y=Math.floor(q-D/2);for(let Q=0;Q<h;Q++){let H=0;for(let ee=0;ee<A;ee++){const te=ee+V;if(te<0||te>=m)continue;const ne=R+te*l[1],he=te*k,Se=Math.min(c-1,i?Math.round(he):Math.floor(he));if(O===Se)for(let Ie=0;Ie<D;Ie++){const Qe=Ie+Y;if(Qe<0||Qe>=g)continue;const Ve=ne+Qe*l[2],$e=Qe*T,We=Math.min(d-1,i?Math.round($e):Math.floor($e));W===We&&(H+=b[Ve+Q])}}y[j+Q]=H}}}}return n.makeTensorInfo(s.shape,s.dtype,y)}const fAe={kernelName:Pk,backendName:"cpu",kernelFunc:dAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:a}=r;St(s,"reverse");const i=s.shape.length,o=Gt(a,s.shape);if(i===0)return Iu({inputs:{x:s},backend:n});const l=new Cs(s.shape,s.dtype),u=n.bufferSync(s);for(let c=0;c<l.size;c++){const d=l.indexToLoc(c),h=d.slice();o.forEach(m=>h[m]=s.shape[m]-1-h[m]),l.set(u.get(...h),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const pAe={kernelName:Rv,backendName:"cpu",kernelFunc:hAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mAe={kernelName:Xk,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:a,center:i}=e,o=n,l=$s(r.dtype,ye(r.shape)),[u,c,d,h]=r.shape,[m,g]=IN(i,c,d),y=255,b=Math.sin(s),w=Math.cos(s),C=o.data.get(r.dataId).values;for(let T=0;T<u;T++){const N=T*d*c*h;for(let I=0;I<c;I++){const A=I*(d*h);for(let D=0;D<d;D++){const P=D*h;for(let R=0;R<h;R++){const O=[u,I,D,R],F=O[2],z=O[1];let V=(F-m)*w-(z-g)*b,W=(F-m)*b+(z-g)*w;V=Math.round(V+m),W=Math.round(W+g);let j=a;if(typeof a!="number"&&(R===3?j=y:j=a[R]),V>=0&&V<d&&W>=0&&W<c){const Y=W*(d*h),Q=V*h,H=N+Y+Q+R;j=C[H]}const q=N+A+P+R;l[q]=j}}}}return{dataId:o.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gAe=Vn(Yg,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),yAe={kernelName:Yg,backendName:"cpu",kernelFunc:gAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bAe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:a}=e,{shape:i}=r,{sliceRank:o,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Fu(a,s,i),h=!0,m=n.bufferSync(s),g=n.bufferSync(a),y=qf(m,g,i,d,u,l,o,c,0,h);return n.makeTensorInfo(i,y.dtype,y.values)}const xAe={kernelName:jk,backendName:"cpu",kernelFunc:bAe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vAe(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<e?n=s+1:r=s;return r}function wAe(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<=e?n=s+1:r=s;return r}function SAe(t,e,n,r,s,a){const i=Fr("int32",n*s);for(let o=0;o<n;++o){const l=t.slice(o*r,(o+1)*r),u=o*s;for(let c=0;c<s;++c)i[u+c]=a==="left"?vAe(l,e[c+u]):wAe(l,e[c+u])}return i}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CAe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:a}=e,{side:i}=r,o=n.data.get(s.dataId).values,l=n.data.get(a.dataId).values,u=SAe(o,l,s.shape[0],s.shape[1],a.shape[1],i);return n.makeTensorInfo(a.shape,"int32",u)}const kAe={kernelName:Fk,backendName:"cpu",kernelFunc:CAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NAe(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:a}=e;St([r,s,a],"select");const i=r.shape.length,o=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,u=n.data.get(a.dataId).values,c=zs(s.dtype,a.dtype),d=Js(ye(s.shape),c);let h=0;const m=i===0||i>1||s.shape.length===1?1:ye(s.shape.slice(1));for(let g=0;g<o.length;g++)for(let y=0;y<m;y++)o[g]===1?d[h++]=l[g]:d[h++]=u[g];return n.makeTensorInfo(s.shape,c,d)}const TAe={kernelName:Ov,backendName:"cpu",kernelFunc:NAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Ae=Xv,IAe=Yv,EAe=Vn(Zg,t=>t>=0?IAe*t:$Ae*(Math.exp(t)-1)),AAe={kernelName:Zg,backendName:"cpu",kernelFunc:EAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RAe=Vn(ty,t=>t<0?-1:t>0?1:0),OAe={kernelName:ty,backendName:"cpu",kernelFunc:RAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ae=Vn(Jg,t=>Math.sin(t)),DAe={kernelName:Jg,backendName:"cpu",kernelFunc:_Ae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PAe=Vn(ey,t=>Math.sinh(t)),MAe={kernelName:ey,backendName:"cpu",kernelFunc:PAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jAe=11920928955078125e-23,IV=Math.log(jAe)+2,LAe=Vn(ry,t=>{const e=t>-IV,n=t<IV,r=Math.exp(t);let s;return n?s=r:e?s=t:s=Math.log(1+r),s}),FAe={kernelName:ry,backendName:"cpu",kernelFunc:LAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:a,paddings:i}=r;St([s],"spaceToBatchND");const o=ye(a),l=[[0,0]];l.push(...i);for(let I=1+a.length;I<s.shape.length;++I)l.push([0,0]);const u=nne.kernelFunc({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),c=Fh(u.shape,a,o,!1),d=zh(c.length,a.length,!1),h=Bh(u.shape,a,o,!1),y=pr({inputs:{x:u},backend:n,attrs:{shape:c}}),C=ci({inputs:{x:y},backend:n,attrs:{perm:d}}),N=pr({inputs:{x:C},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(C),N}const BAe={kernelName:Pv,backendName:"cpu",kernelFunc:zAe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UAe(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:a,defaultValue:i}=e;if(a.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${a.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${s.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const o=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values[0],[d,h,m,g,y]=$te(o,r.shape,r.dtype,l,s.dtype,u,c);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],s.dtype,m),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(b=>Number(b)))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}const VAe={kernelName:YM,backendName:"cpu",kernelFunc:UAe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WAe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:a}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${s.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const i=Array.from(n.data.get(s.dataId).values),o=n.data.get(r.dataId).values,l=Array.from(n.data.get(a.dataId).values),[u,c,d]=Ite(o,r.shape,r.dtype,i,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],a.dtype,new Int32Array(d))]}const GAe={kernelName:QM,backendName:"cpu",kernelFunc:WAe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HAe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${s.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${a.shape}`);if(s.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,l=n.data.get(a.dataId).values,[u,c]=C4(i,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const qAe={kernelName:zk,backendName:"cpu",kernelFunc:HAe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KAe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${s.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${a.shape}`);if(s.shape[0]!==a.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,l=n.data.get(a.dataId).values,[u,c]=C4(i,r.shape,r.dtype,o,l);return n.makeTensorInfo(c,r.dtype,u)}const XAe={kernelName:Bk,backendName:"cpu",kernelFunc:KAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YAe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:a,defaultValue:i}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:h}=Fu(a,s,o),m=!1,g=n.bufferSync(s);let y;switch(a.dtype){case"bool":{const b=n.bufferSync(a),w=!!n.data.get(i.dataId).values[0];y=qf(g,b,o,h,c,u,l,d,w,m);break}case"float32":{const b=n.bufferSync(a),w=n.data.get(i.dataId).values[0];y=qf(g,b,o,h,c,u,l,d,w,m);break}case"int32":{const b=n.bufferSync(a),w=n.data.get(i.dataId).values[0];y=qf(g,b,o,h,c,u,l,d,w,m);break}case"string":{const b=n.bufferSync(a),w=Ml(n.data.get(i.dataId).values[0]);y=qf(g,b,o,h,c,u,l,d,w,m);break}default:throw new Error(`Unsupported type ${a.dtype}`)}return n.makeTensorInfo(o,y.dtype,y.values)}const QAe={kernelName:Uk,backendName:"cpu",kernelFunc:YAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:a,axis:i}=r,o=Gt(i,s.shape)[0],l=UN(s,a,o),u=new Array(s.shape.length).fill(0),c=s.shape.slice();return l.map(d=>{const h=[...c];h[o]=d;const m=Nh({inputs:{x:s},backend:n,attrs:{begin:u,size:h}});return u[o]+=d,m})}const JAe={kernelName:Mv,backendName:"cpu",kernelFunc:ZAe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eRe={kernelName:Vk,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;St(n,"square");const s=r.data.get(n.dataId).values,a=new Float32Array(s.length);for(let o=0;o<s.length;++o){const l=s[o];a[o]=l*l}return{dataId:r.write(a,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tRe=Vn(cy,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),nRe={kernelName:cy,backendName:"cpu",kernelFunc:tRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:a,end:i,strides:o,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:h}=r;St(s,"stridedSlice");const{finalShapeSparse:m,finalShape:g,isIdentity:y,sliceDim0:b,isSimpleSlice:w,begin:C,end:k,strides:T}=NN(s.shape,a,i,o,l,u,c,d,h);let N;if(y)N=pr({inputs:{x:s},backend:n,attrs:{shape:g}});else if(b||w){X(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const I=kN(C,k,T),A=Nh({inputs:{x:s},backend:n,attrs:{begin:C,size:I}});N=pr({inputs:{x:A},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(A)}else{const I=n.bufferSync(s),A=Rte(m,I,T,C);N=n.makeTensorInfo(g,A.dtype,A.values)}return N}const sRe={kernelName:Gk,backendName:"cpu",kernelFunc:rRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aRe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:a,leftPad:i,rightPad:o,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=e,h=n.data.get(c.dataId).values,m=n.data.get(d.dataId).values,[g,y]=Ote(h,m,s,a,i,o,l,u);return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(d.shape,"int32",y)]}const iRe={kernelName:Hk,backendName:"cpu",kernelFunc:aRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oRe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:a,delimiter:i}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(a.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values[0],[u,c,d]=_te(o,l,s),h=c.length;return[n.makeTensorInfo([h,2],"int32",u),n.makeTensorInfo([h],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const lRe={kernelName:ZM,backendName:"cpu",kernelFunc:oRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uRe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:a}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const i=n.data.get(a.dataId).values,o=Dte(i,s);return n.makeTensorInfo(a.shape,"int32",o)}const cRe={kernelName:JM,backendName:"cpu",kernelFunc:uRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dRe=Vn(oy,t=>Math.tan(t)),fRe={kernelName:oy,backendName:"cpu",kernelFunc:dRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hRe=Vn(ly,t=>Math.tanh(t)),pRe={kernelName:ly,backendName:"cpu",kernelFunc:hRe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mRe(t){const{inputs:e,backend:n}=t,{tensor:r,indices:s,updates:a}=e,{sliceRank:i,numUpdates:o,sliceSize:l,strides:u,outputSize:c}=Fu(a,s,r.shape),d=!1,h=n.bufferSync(s),m=n.bufferSync(a),g=n.bufferSync(r),y=qf(h,m,r.shape,c,l,o,i,u,g,d);return n.makeTensorInfo(r.shape,y.dtype,y.values)}const gRe={kernelName:Lk,backendName:"cpu",kernelFunc:mRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:a}=r;St(s,"tile");const i=Mte(n.bufferSync(s),a);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const bRe={kernelName:uy,backendName:"cpu",kernelFunc:yRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:a,sorted:i}=r;St(s,"topk");const o=n.data.get(s.dataId).values,[l,u]=Lte(o,s.shape,s.dtype,a,i);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const vRe={kernelName:qk,backendName:"cpu",kernelFunc:xRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wRe(t){const{inputs:e,attrs:n,backend:r}=t,{image:s,transforms:a}=e,{interpolation:i,fillMode:o,fillValue:l,outputShape:u}=n,[c,d,h,m]=s.shape,[g,y]=u??[d,h],b=[c,g,y,m],w=$t(s.shape),C=w[0],k=w[1],T=w[2],N=$t(b),I=N[0],A=N[1],D=N[2],P=$s(s.dtype,ye(b));P.fill(l);const R=r.data.get(s.dataId).values,O=r.data.get(a.dataId).values;for(let z=0;z<c;++z){const V=a.shape[0]===1?O:O.subarray(z*8,z*8+8);for(let W=0;W<g;++W)for(let j=0;j<y;++j)for(let q=0;q<m;++q){let Y;const Q=V[6]*j+V[7]*W+1;if(Q===0)continue;const H=(V[0]*j+V[1]*W+V[2])/Q,ee=(V[3]*j+V[4]*W+V[5])/Q,te=EV(H,h,o),ne=EV(ee,d,o);switch(i){case"nearest":Y=$Re(R,d,h,C,k,T,z,ne,te,q,l);break;case"bilinear":Y=IRe(R,d,h,C,k,T,z,ne,te,q,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}const he=z*I+W*A+j*D+q;P[he]=Y}return r.makeTensorInfo(b,s.dtype,P)}return{dataId:r.write(P,b,s.dtype),shape:s.shape,dtype:s.dtype}}const SRe={kernelName:Kk,backendName:"cpu",kernelFunc:wRe};function EV(t,e,n){switch(n){case"reflect":return CRe(t,e);case"wrap":return kRe(t,e);case"nearest":return TRe(t,e);case"constant":default:return NRe(t)}}function CRe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return fh(0,n,e-1)}function kRe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return fh(0,n,e-1)}function NRe(t,e){return t}function TRe(t,e){return fh(0,t,e-1)}function sb(t,e,n,r,s,a,i,o,l,u,c){const d=i*r+o*s+l*a+u;return 0<=o&&o<e&&0<=l&&l<n?t[d]:c}function $Re(t,e,n,r,s,a,i,o,l,u,c){const d=Math.round(o),h=Math.round(l);return sb(t,e,n,r,s,a,i,d,h,u,c)}function IRe(t,e,n,r,s,a,i,o,l,u,c){const d=Math.floor(o),h=Math.floor(l),m=d+1,g=h+1,y=(g-l)*sb(t,e,n,r,s,a,i,d,h,u,c)+(l-h)*sb(t,e,n,r,s,a,i,d,g,u,c),b=(g-l)*sb(t,e,n,r,s,a,i,m,h,u,c)+(l-h)*sb(t,e,n,r,s,a,i,m,g,u,c);return(m-o)*y+(o-d)*b}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ERe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:a}=e;St(a,"unique");const i=r.data.get(a.dataId).values,{outputValues:o,outputShape:l,indices:u}=Fte(i,s,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,o),r.makeTensorInfo([u.length],"int32",u)]}const ARe={kernelName:ej,backendName:"cpu",kernelFunc:ERe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RRe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:a}=r;a<0&&(a+=s.shape.length);const i=s.shape.length,o=s.shape[a],l=new Array(i-1);let u=0;for(let m=0;m<i;m++)m!==a&&(l[u++]=s.shape[m]);const c=new Array(i).fill(0),d=s.shape.slice();d[a]=1;const h=new Array(o);for(let m=0;m<h.length;m++){c[a]=m;const g=Nh({inputs:{x:s},backend:n,attrs:{begin:c,size:d}});h[m]=pr({inputs:{x:g},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(g)}return h}const ORe={kernelName:Lv,backendName:"cpu",kernelFunc:RRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Re(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:a}=e,{numSegments:i}=r;St(s,"unsortedSegmentSum");const o=s.shape.length,l=a.shape.length,u=[],c=[],d=o-l;let h=a;for(let g=0;g<d;++g){const y=C2({inputs:{input:h},backend:n,attrs:{dim:g+1}});h=y,c.push(y)}for(let g=0;g<i;++g){const y=Vd(g,"int32"),b=n.makeTensorInfo([],"int32",y),w=ete({inputs:{a:b,b:h},backend:n}),C=Fd({inputs:{x:w},backend:n,attrs:{dtype:"float32"}}),k=tT({inputs:{a:C,b:s},backend:n}),T=a1({inputs:{x:k},backend:n,attrs:{axis:0,keepDims:!1}});u.push(T),c.push(b),c.push(w),c.push(C),c.push(k),c.push(T)}const m=tne({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const DRe={kernelName:Fv,backendName:"cpu",kernelFunc:_Re};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PRe=[ETe,cNe,RTe,_Te,gNe,PTe,jTe,FTe,BTe,VTe,GTe,qTe,XTe,ZTe,e$e,r$e,a$e,o$e,u$e,$Te,d$e,h$e,m$e,bNe,y$e,pNe,vNe,x$e,dNe,w$e,C$e,k$e,T$e,I$e,A$e,O$e,D$e,M$e,L$e,z$e,U$e,W$e,H$e,K$e,X$e,Q$e,J$e,tIe,nIe,rIe,sIe,iIe,uIe,vTe,dIe,wNe,xIe,SNe,vIe,kNe,TIe,$Ie,EIe,TNe,INe,RIe,_Ie,PIe,jIe,ANe,ONe,fNe,FIe,S$e,BIe,VIe,GIe,wTe,DNe,MNe,qIe,LNe,XIe,ZIe,eEe,rEe,aEe,oEe,lEe,zNe,cEe,fEe,pEe,gEe,bEe,vEe,SEe,UNe,kEe,$Ee,AEe,WNe,HNe,_Ee,MEe,FEe,KNe,BEe,VEe,WEe,nne,KEe,CTe,QNe,YEe,ZEe,eAe,nAe,hNe,$D,sAe,kTe,NTe,TTe,iAe,lAe,cAe,fAe,pAe,mAe,yAe,aTe,xAe,kAe,TAe,AAe,oTe,OAe,DAe,MAe,lTe,IEe,FAe,BAe,VAe,GAe,qAe,XAe,QAe,JAe,dTe,eRe,hTe,mTe,nRe,sRe,iRe,lRe,cRe,xTe,oIe,fRe,pRe,gRe,bRe,vRe,SRe,XNe,ARe,ORe,DRe,UEe];for(const t of PRe)tj(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vf={},qw={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function MRe(t,e){Vf[t]=e}function Vl(t,e){if(!(t in Vf)||e!=null){const r=LRe(t,e);if(r!==null)Vf[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=Vf[t];return n==null||n.isContextLost()?(delete Vf[t],Vl(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Vf[t])}function jRe(t){if(!ve().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function LRe(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??jRe(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Vf[t]},!1),ve().getBool("SOFTWARE_WEBGL_ENABLED")&&(qw.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",qw)||n.getContext("experimental-webgl",qw):n.getContext("webgl2",qw)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Bb;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Bb||(Bb={}));var so;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(so||(so={}));var Zs;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Zs||(Zs={}));function i1(t,e){return[e,t]}function FRe(t,e){return t*e}function Kw(t){const e=ye(t),n=Math.ceil(e/4);return F3(n)}function yy(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function zRe(t,e){const[n,r]=yy(t,e);return n*r*4}function I4(t,e){const n=t;let r,s,a,i,o,l,u,c,d,h;return ve().getNumber("WEBGL_VERSION")===2?(r=n.R32F,s=n.R16F,a=n.RGBA16F,i=n.RGBA32F,o=n.RED,u=4,c=1,d=n.HALF_FLOAT,h=n.FLOAT,l=n.RGBA8):(r=t.RGBA,s=t.RGBA,a=t.RGBA,i=n.RGBA,o=t.RGBA,u=4,c=4,d=e!=null?e.HALF_FLOAT_OES:null,h=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:h}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gt(t,e){const n=e();return ve().getBool("DEBUG")&&BRe(t),n}function BRe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+GRe(t,e))}const URe=596e-10,VRe=65504;function WRe(t){return!!(ve().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||URe<Math.abs(t)&&Math.abs(t)<VRe)}function GRe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function Xw(t,e){return jc(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function HRe(t,e){const n=jc(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(gt(t,()=>t.shaderSource(n,e)),gt(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function qRe(t,e){const n=jc(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(gt(t,()=>t.shaderSource(n,e)),gt(t,()=>t.compileShader(n)),ve().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw rne(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const KRe=/ERROR: [0-9]+:([0-9]+):/g;function rne(t,e){const n=KRe.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],s=t.split(`
`),a=s.length.toString().length+2,i=s.map((d,h)=>cm((h+1).toString(),a)+d);let o=0;for(let d=0;d<i.length;d++)o=Math.max(i[d].length,o);const l=i.slice(0,r-1),u=i.slice(r-1,r),c=i.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${cm(u[0],o)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function XRe(t){return jc(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function YRe(t,e){if(gt(t,()=>t.linkProgram(e)),!ve().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function KE(t,e){if(gt(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function QRe(t,e){const n=jc(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return gt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),gt(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function ZRe(t,e){const n=jc(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return gt(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),gt(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function JRe(t){return jc(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function eOe(t,e){const n=ve().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,s=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+s+".")}}function tOe(t){return jc(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function AV(t,e,n,r,s,a,i){const o=t.getAttribLocation(e,n);return o===-1?!1:(gt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),gt(t,()=>t.vertexAttribPointer(o,s,t.FLOAT,!1,a,i)),gt(t,()=>t.enableVertexAttribArray(o)),!0)}function nOe(t,e,n){oOe(t,n),gt(t,()=>t.activeTexture(t.TEXTURE0+n)),gt(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function rOe(t,e,n){return jc(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function sOe(t,e,n){return t.getUniformLocation(e,n)}function aOe(t,e,n,r){gt(t,()=>nOe(t,e,r)),gt(t,()=>t.uniform1i(n,r))}function XE(t,e,n){gt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),gt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function RV(t,e){gt(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),gt(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Yw(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+iOe(t,e))}function iOe(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function jc(t,e,n){const r=gt(t,()=>e());if(r==null)throw new Error(n);return r}function oOe(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const s=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${s}.`)}}function Mm(t,e=2){return ye(t.slice(0,t.length-e))}function jm(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Qw(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Mm(t),...jm(t)]),e}function lOe(t,e=!1){let n=ve().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=ve().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&ve().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((o,l)=>l>=t.length-2?zM(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=Ud(t).newShape);let s=ye(t),a=null;t.length<=1&&s<=n?a=[1,s]:t.length===2&&t[0]<=n&&t[1]<=n?a=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?a=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?a=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?a=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(a=[t[0],t[1]*t[2]*t[3]]);const i=a!=null&&Math.max(...a)>r&&Math.min(...a)<=(e?2:1)&&Math.min(...a)>0;if(a==null||i)if(e){const o=Mm(t);let l=2,u=2;t.length&&([l,u]=jm(t)),s=o*(l/2)*(u/2),a=F3(s).map(c=>c*2)}else a=F3(s);return a}function Zw(t){return t%2===0}function N2(t,e){if(t=t.slice(-2),e=e.slice(-2),Xt(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||Zw(n)&&Zw(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Zw(t[0])&&Zw(e[0])}let YE,QE;function uOe(t){if(YE==null){const e=Vl(t);YE=e.getParameter(e.MAX_TEXTURE_SIZE)}return YE}function cOe(t){if(QE==null){const e=Vl(t);QE=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,QE)}function dOe(t){if(t===0)return 0;let e;const n=Vl(t);return qo(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:qo(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function qo(t,e){return t.getExtension(e)!=null}function OV(t){try{if(Vl(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function fOe(t){if(t===0)return!1;const e=Vl(t);if(t===1){if(!qo(e,"OES_texture_float"))return!1}else if(!qo(e,"EXT_color_buffer_float"))return!1;return ED(e)}function hOe(t){if(t===0)return!1;const e=Vl(t);if(t===1){if(!qo(e,"OES_texture_float")||!qo(e,"WEBGL_color_buffer_float"))return!1}else{if(qo(e,"EXT_color_buffer_float"))return ED(e);const r="EXT_color_buffer_half_float";if(qo(e,r)){const s=e.getExtension(r);return pOe(e,s)}return!1}return ED(e)}function ED(t){const e=I4(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(a),i}function pOe(t,e){const n=I4(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(i),o}function mOe(t){return t!==2?!1:Vl(t).fenceSync!=null}function o1(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&X(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kt=ve();kt.registerFlag("HAS_WEBGL",()=>kt.getNumber("WEBGL_VERSION")>0);kt.registerFlag("WEBGL_VERSION",()=>OV(2)?2:OV(1)?1:0);kt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);kt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>kt.get("WEBGL_VERSION")===2);kt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);kt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);kt.registerFlag("WEBGL_PACK",()=>kt.getBool("HAS_WEBGL"));kt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>kt.getBool("WEBGL_PACK"));kt.registerFlag("WEBGL_PACK_CLIP",()=>kt.getBool("WEBGL_PACK"));kt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>kt.getBool("WEBGL_PACK"));kt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>kt.getBool("WEBGL_PACK"));kt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>kt.getBool("WEBGL_PACK"));kt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>kt.getBool("WEBGL_PACK"));kt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>kt.getBool("WEBGL_PACK"));kt.registerFlag("WEBGL_PACK_REDUCE",()=>kt.getBool("WEBGL_PACK"));kt.registerFlag("WEBGL_LAZILY_UNPACK",()=>kt.getBool("WEBGL_PACK"));kt.registerFlag("WEBGL_CONV_IM2COL",()=>kt.getBool("WEBGL_PACK"));kt.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>kt.getBool("WEBGL_PACK"));kt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>uOe(kt.getNumber("WEBGL_VERSION")));kt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>cOe(kt.getNumber("WEBGL_VERSION")));kt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=kt.getNumber("WEBGL_VERSION");return t===0?0:dOe(t)});kt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>kt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!dY());kt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>fOe(kt.getNumber("WEBGL_VERSION")));kt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>kt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:kt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));kt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>hOe(kt.getNumber("WEBGL_VERSION")));kt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>mOe(kt.getNumber("WEBGL_VERSION")));kt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>kt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);kt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});kt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>dY()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});kt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);kt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);kt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);kt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);kt.registerFlag("WEBGL_EXP_CONV",()=>!1);kt.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>kt.getBool("IS_TEST"));kt.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);kt.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);kt.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);kt.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ba(){let t,e,n,r,s,a,i,o,l,u;return ve().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",s="texture",a="outputColor",i="out vec4 outputColor;",o=ve().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",s="texture2D",a="gl_FragColor",i="",o=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:s,output:a,defineOutput:i,defineSpecialNaN:o,defineSpecialInf:l,defineRound:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wh(t,e,n="index"){const r=$t(e);return r.map((s,a)=>{const i=`int ${t[a]} = ${n} / ${s}`,o=a===r.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * ${s}`:`index -= ${t[a]} * ${s}`;return`${i}; ${o};`}).join("")}function nT(t,e,n="index"){const r=$t(e);return r.map((s,a)=>{const i=`int ${t[a]} = ${n} / outShapeStrides[${a}]`,o=a===r.length-1?`int ${t[a+1]} = ${n} - ${t[a]} * outShapeStrides[${a}]`:`index -= ${t[a]} * outShapeStrides[${a}]`;return`${i}; ${o};`}).join("")}function gOe(t,e){const n=t.length,r=t.map(a=>`${e}[${a}]`),s=new Array(n-1);s[n-2]=r[n-1];for(let a=n-3;a>=0;--a)s[a]=`(${s[a+1]} * ${r[a+1]})`;return s}function yOe(t,e,n="index"){const r=t.map((a,i)=>i),s=gOe(r,e);return s.map((a,i)=>{const o=`int ${t[i]} = ${n} / ${s[i]}`,l=i===s.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${s[i]}`:`index -= ${t[i]} * ${s[i]}`;return`${o}; ${l};`}).join("")}function E4(t){const e=$t(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function A4(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const sne=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:ane}=P1e;function bOe(t,e,n){const r=[];if(t.forEach(m=>{const g=ye(m.shapeInfo.logicalShape);if(m.shapeInfo.isUniform?r.push(`uniform float ${m.name}${g>1?`[${g}]`:""};`):(r.push(`uniform sampler2D ${m.name};`),r.push(`uniform int offset${m.name};`)),n.enableShapeUniforms){const{uniformShape:y}=R4(n.packedInputs,m.shapeInfo.logicalShape,m.shapeInfo.texShape);switch(y.length){case 1:r.push(`uniform int ${m.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${m.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${m.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${m.name}Shape;`);break}r.push(`uniform ivec2 ${m.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(m=>{r.push(`uniform ${m.type} ${m.name}${m.arrayIndex?`[${m.arrayIndex}]`:""};`)});const s=r.join(`
`),a=t.map(m=>xOe(m,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),i=e.texShape,o=Ba(),l=SOe(o);let u,c,d=NOe(o);return e.isPacked?(u=vOe(e.logicalShape,i,n.enableShapeUniforms),c=kOe(o)):(u=wOe(e.logicalShape,i,n.enableShapeUniforms),c=COe(o)),n.packedInputs&&(d+=EOe),[d,l,c,s,u,a,n.userCode].join(`
`)}function by(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return BOe(t,e);case 1:return VOe(t,e);case 2:return GOe(t,e);case 3:return qOe(t,e);case 4:return XOe(t,e);case 5:return YOe(t);case 6:return QOe(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function ine(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return zOe(t);case 1:return UOe(t,e);case 2:return WOe(t,e);case 3:return HOe(t,e);default:return KOe(t,e)}}function xOe(t,e,n=!1,r){let s="";n?s+=ine(t,r):s+=by(t,r);const a=t.shapeInfo.logicalShape,i=e.logicalShape;return a.length<=i.length&&(n?s+=ZOe(t,e):s+=JOe(t,e)),s}function vOe(t,e,n){switch(t.length){case 0:return one();case 1:return AOe(t,e,n);case 2:return LOe(t,e,n);case 3:return OOe(t,e,n);default:return DOe(t,e,n)}}function wOe(t,e,n){switch(t.length){case 0:return one();case 1:return ROe(t,e,n);case 2:return FOe(t,e,n);case 3:return _Oe(t,e,n);case 4:return POe(t,e,n);case 5:return MOe(t,e);case 6:return jOe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function SOe(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function COe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function kOe(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function NOe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${TOe}
    ${$Oe}
    ${IOe}
  `}const TOe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,$Oe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,IOe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,EOe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function one(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function AOe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function ROe(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function OOe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[2]/2),a=s*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function _Oe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${nT(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=Wh(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function DOe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[t.length-1]/2),a=s*Math.ceil(t[t.length-2]/2);let i=a,o="",l="b, r, c";for(let u=2;u<t.length-1;u++)i*=t[t.length-u-1],o=`
      int b${u} = index / ${i};
      index -= b${u} * ${i};
    `+o,l=`b${u}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${o}

      int b = index / ${a};
      index -= b * ${a};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${t.length}(${l});
    }
  `}function POe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${nT(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=Wh(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function MOe(t,e){const n=Wh(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function jOe(t,e){const n=Wh(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function LOe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Xt(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function FOe(t,e,n){return Xt(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Gh(t){return`offset${t}`}function zOe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Ba();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function BOe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[s,a]=t.shapeInfo.texShape;if(s===1&&a===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const i=Gh(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${i});
      return sampleTexture(${n}, uv);
    }
  `;const[o,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${o}, ${l}, ${i});
      return sampleTexture(${n}, uv);
    }
  `}function UOe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,a=Ba();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${a.texture2D}(${n}, uv);
    }
  `;const i=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${i[0]}, ${i[1]}, index);
      return ${a.texture2D}(${n}, uv);
    }
  `}function VOe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${xy(t)}
      }
    `;const s=t.shapeInfo.texShape,a=s[0],i=s[1];if(i===1&&a===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=Gh(n);return i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${a}.0);
        return sampleTexture(${n}, uv);
      }
    `:a===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${i}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${o});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${a}, ${i}, index + ${o});
      return sampleTexture(${n}, uv);
    }
  `}function WOe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape,i=a[0],o=a[1],l=Ba();if(a!=null&&Xt(n,a))return e?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${o}.0, ${i}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function GOe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape;if(a!=null&&Xt(n,a)){if(e)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const h=a[0],m=a[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${m}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:i,keptDims:o}=Ud(n),l=i;if(l.length<n.length){const h=vy(t,l),m=["row","col"];return`
      ${by(h,e)}
      float ${s}(int row, int col) {
        return ${s}(${wy(m,o)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${xy(t)}
      }
    `;const u=a[0],c=a[1],d=Gh(r);return c===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${r}, uv);
    }
  `:u===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function HOe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=t.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(n[0]===1){const h=n.slice(1),m=[1,2],g=vy(t,h),y=["b","row","col"];return`
        ${ine(g,e)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${wy(y,m)});
        }
      `}const o=Ba();if(e)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `;const l=i[0],u=i[1],c=Math.ceil(n[2]/2),d=c*Math.ceil(n[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${d}, ${c}, b, row, col);
      return ${o.texture2D}(${r}, uv);
    }
  `}function qOe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[1]*n[2],i=n[2],{newShape:o,keptDims:l}=Ud(n),u=o;if(u.length<n.length){const y=vy(t,u),b=["row","col","depth"];return`
        ${by(y,e)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${wy(b,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${a}, ${i}, 1)));
        ${xy(t)}
      }
    `;const c=t.shapeInfo.texShape,d=c[0],h=c[1],m=t.shapeInfo.flatOffset;if(h===a&&m==null)return e?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${i}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${h}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(h===i&&m==null)return e?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const g=Gh(r);return e?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${g};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${a} + col * ${i} + depth + ${g};
        vec2 uv = uvFromFlat(${d}, ${h}, index);
        return sampleTexture(${r}, uv);
      }
  `}function KOe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=Ba();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${n}, uv);
    }
  `;const a=t.shapeInfo.logicalShape,i=a.length,o=t.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],u=l[0],c=l[1],d=Math.ceil(a[i-1]/2);let h=d*Math.ceil(a[i-2]/2),m="int b, int row, int col",g=`b * ${h} + (row / 2) * ${d} + (col / 2)`;for(let y=2;y<i-1;y++)m=`int b${y}, `+m,h*=a[i-y-1],g=`b${y} * ${h} + `+g;return`
    vec4 ${r}(${m}) {
      int index = ${g};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${s.texture2D}(${n}, uv);
    }
  `}function XOe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),a=n[3],i=n[2]*a,o=n[1]*i,{newShape:l,keptDims:u}=Ud(n);if(l.length<n.length){const C=vy(t,l),k=["row","col","depth","depth2"];return`
      ${by(C,e)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${wy(k,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${o}, ${i}, ${a}, 1)));
        ${xy(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],m=d[1],g=`int stride2 = ${r}Shape[3];`,y=`int stride1 = ${r}Shape[2] * stride2;`,b=`int stride0 = ${r}Shape[1] * stride1;`;if(m===o&&c==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${g}
        ${y}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${i}, ${a}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(m===a&&c==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;const w=Gh(r);return e?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${g}
      ${y}
      ${b}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${w});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${i} +
          depth * ${a} + depth2;
      vec2 uv = uvFromFlat(${h}, ${m}, index + ${w});
      return sampleTexture(${r}, uv);
    }
  `}function YOe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e[4],a=e[3]*s,i=e[2]*a,o=e[1]*i,{newShape:l,keptDims:u}=Ud(e);if(l.length<e.length){const y=vy(t,l),b=["row","col","depth","depth2","depth3"];return`
      ${by(y)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${wy(b,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${o}, ${i}, ${a}, ${s})) +
          depth3;
        ${xy(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],m=d[1];if(m===o&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${i}, ${a}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(m===s&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const g=Gh(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${o} + col * ${i} + depth * ${a} +
          depth2 * ${s} + depth3 + ${g};
      vec2 uv = uvFromFlat(${h}, ${m}, index);
      return sampleTexture(${n}, uv);
    }
  `}function QOe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:a}=Ud(e);if(s.length<e.length){const b=vy(t,s),w=["row","col","depth","depth2","depth3","depth4"];return`
      ${by(b)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${wy(w,a)});
      }
    `}const i=e[5],o=e[4]*i,l=e[3]*o,u=e[2]*l,c=e[1]*u;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${o})) +
          dot(
            vec2(depth3, depth4),
            vec2(${i}, 1)));
        ${xy(t)}
      }
    `;const d=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,m=h[0],g=h[1];if(g===c&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${o}, ${i})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${m}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(g===i&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${m}.0);
        return sampleTexture(${n}, uv);
      }
    `;const y=Gh(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${o} + depth3 * ${i} + depth4 + ${y};
      vec2 uv = uvFromFlat(${m}, ${g}, index);
      return sampleTexture(${n}, uv);
    }
  `}function xy(t){const e=t.name,n=ye(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function ZOe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",a=t.shapeInfo.logicalShape.length,i=e.logicalShape.length,o=ane(t.shapeInfo.logicalShape,e.logicalShape),l=Xn(i),u=i-a;let c;const d=["x","y","z","w","u","v"];a===0?c="":i<2&&o.length>=1?c="coords = 0;":c=o.map(C=>`coords.${d[C+u]} = 0;`).join(`
`);let h="";i<2&&a>0?h="coords":h=t.shapeInfo.logicalShape.map((C,k)=>`coords.${d[k+u]}`).join(", ");let m="return outputValue;";const y=ye(t.shapeInfo.logicalShape)===1,w=ye(e.logicalShape)===1;if(a===1&&!y&&!w)m=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(y&&!w)i===1?m=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:m=`
        return vec4(outputValue.x);
      `;else if(o.length){const C=a-2,k=a-1;o.indexOf(C)>-1&&o.indexOf(k)>-1?m="return vec4(outputValue.x);":o.indexOf(C)>-1?m="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(k)>-1&&(m="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${h});
      ${m}
    }
  `}function JOe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",a=e.texShape,i=t.shapeInfo.texShape,o=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&o===l&&t.shapeInfo.flatOffset==null&&Xt(i,a))return`
      float ${s}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=Xn(l),c=ane(t.shapeInfo.logicalShape,e.logicalShape),d=l-o;let h;const m=["x","y","z","w","u","v"];o===0?h="":l<2&&c.length>=1?h="coords = 0;":h=c.map(y=>`coords.${m[y+d]} = 0;`).join(`
`);let g="";return l<2&&o>0?g="coords":g=t.shapeInfo.logicalShape.map((y,b)=>`coords.${m[b+d]}`).join(", "),`
    float ${s}() {
      ${u} coords = getOutputCoords();
      ${h}
      return get${r}(${g});
    }
  `}function Xn(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function R4(t,e,n){const{newShape:r,keptDims:s}=Ud(e),a=e.length,i=t&&a===3&&e[0]===1,o=i?e.slice(1):r,l=!t&&a>1&&!Xt(e,n)&&r.length<a||i;return{useSqueezeShape:l,uniformShape:l?o:e,keptDims:s}}function vy(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function wy(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e_e(t,e,n,r){const s=n.map((c,d)=>{const h={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(h.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:h}}),a=s.map(c=>c.shapeInfo),i={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=bOe(s,i,e),l=qRe(t.gl,o),u=t.createProgram(l);return ve().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:o,webGLProgram:u,inShapeInfos:a,outShapeInfo:i,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(u),Object.assign({program:e,fragmentShader:l,source:o,webGLProgram:u,inShapeInfos:a,outShapeInfo:i},lne(t,e,u)))}function lne(t,e,n){const r=[],s=[];let a,i,o,l=null,u=null;u=t.getUniformLocation(n,"NAN",!1),ve().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const d of e.variableNames){const h={name:d,uniform:t.getUniformLocation(n,d,c),offset:t.getUniformLocation(n,`offset${d}`,c)};e.enableShapeUniforms&&(h.shape=t.getUniformLocation(n,`${d}Shape`,c),h.texShape=t.getUniformLocation(n,`${d}TexShape`,c)),r.push(h)}if(e.enableShapeUniforms&&(a=t.getUniformLocation(n,"outShape",c),o=t.getUniformLocation(n,"outShapeStrides",c),i=t.getUniformLocation(n,"outTexShape",c)),e.customUniforms)for(const d of e.customUniforms)s.push(t.getUniformLocation(n,d.name,c));return{variablesLocations:r,customUniformLocations:s,infLoc:l,nanLoc:u,outShapeLocation:a,outShapeStridesLocation:o,outTexShapeLocation:i}}function _V(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const s=n.logicalShape,a=e[r],i=a.shape;if(!Xt(s,i))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${i} must match`);if(n.isUniform&&a.isUniform)return;const o=n.texShape,l=a.isUniform?null:a.texData.texShape;if(!Xt(o,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${l} must match`)})}function t_e(t,e,n,r,s){e.program.enableShapeUniforms||(_V(e.inShapeInfos,n),_V([e.outShapeInfo],[r]));const a=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(a.texture,i[0],i[1]):t.setOutputMatrixTexture(a.texture,i[0],i[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),ve().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const u=n[l],{uniform:c,offset:d,shape:h,texShape:m}=e.variablesLocations[l];if(h){const{uniformShape:g}=R4(e.program.packedInputs,u.shape,u.texData.texShape);switch(g.length){case 1:t.gl.uniform1iv(h,new Int32Array(g));break;case 2:t.gl.uniform2iv(h,new Int32Array(g));break;case 3:t.gl.uniform3iv(h,new Int32Array(g));break;case 4:t.gl.uniform4iv(h,new Int32Array(g));break}}if(m&&t.gl.uniform2i(m,u.texData.texShape[0],u.texData.texShape[1]),c!=null){if(u.isUniform){if(ye(u.shape)<2)t.gl.uniform1f(c,u.uniformValues[0]);else{let g=u.uniformValues;g instanceof Float32Array||(g=new Float32Array(g)),t.gl.uniform1fv(c,g)}continue}u.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,u.texData.slice.flatOffset),t.setInputMatrixTexture(u.texData.texture.texture,c,l)}}const o=e.outShapeLocation;if(o)switch(r.shape.length){case 1:t.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(o,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=$t(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&s)for(let l=0;l<e.program.customUniforms.length;++l){const u=e.program.customUniforms[l],c=e.customUniformLocations[l],d=s[l];if(u.type==="float")t.gl.uniform1fv(c,d);else if(u.type==="vec2")t.gl.uniform2fv(c,d);else if(u.type==="vec3")t.gl.uniform3fv(c,d);else if(u.type==="vec4")t.gl.uniform4fv(c,d);else if(u.type==="int")t.gl.uniform1iv(c,d);else if(u.type==="ivec2")t.gl.uniform2iv(c,d);else if(u.type==="ivec3")t.gl.uniform3iv(c,d);else if(u.type==="ivec4")t.gl.uniform4iv(c,d);else throw Error(`uniform type ${u.type} is not supported yet.`)}t.executeProgram()}function n_e(t,e,n){let r="";e.concat(n).forEach(i=>{const o=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!i.isUniform){const l=i.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:d}=R4(t.packedInputs,i.shape,l);let h="",m="",g="";if(c.length===1&&t.packedInputs){const N=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];h=`${N[0]>1}_${N[1]>1}`}else if(c.length===2&&!t.packedInputs)m=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const N=$t(c);g=`${N[0]===l[1]}_${N[N.length-1]===l[1]}`}const y=i.shape.length,b=c.length===2&&Xt(i.shape,l),w=ye(i.shape)===1,C=_d(i.shape,n.shape),k=!t.packedInputs&&y===n.shape.length&&Xt(l,n.texData.texShape),T=t.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${y}_${k}_${u?d:""}_${c.length}_${w}_${C}_${b}_${h}_${m}_${g}_${T}_${o}`}else{const l=i.isUniform?"uniform":i.texData.texShape;r+=`${i.shape}_${l}_${o}`}});const s=t.userCode;let a=t.constructor.name;return a+="_"+r+"_"+s+`${ve().getNumber("WEBGL_VERSION")}`,a}function ba(t){return ve().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class r_e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Bb.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Ba();this.outputShape=e,this.enableShapeUniforms=ba(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?nT(["r","c","d"],e):Wh(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s_e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Bb.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Ba();this.outputShape=e,this.enableShapeUniforms=ba(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?nT(["r","c","d"],e):Wh(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a_e{constructor(e){this.variableNames=["A"],this.outTexUsage=so.DOWNLOAD;const n=Ba();this.outputShape=e,this.userCode=`
      ${sne}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i_e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=so.DOWNLOAD;const n=Ba();this.outputShape=e,this.userCode=`
      ${sne}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o_e={R:0,G:1,B:2,A:3};class DV{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Ba();this.outputShape=e,this.enableShapeUniforms=ba(this.outputShape.length);let a="result";n&&(a="floor(result * 255. + 0.5)");let i="";for(let o=0;o<r.length;o++){const l=r[o];i+=`
          if(offset == ${o}) {
            result = values[${o_e[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?A4():E4(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${i}
        }
        ${s.output} = vec4(${a}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l_e{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Ba();this.outputShape=e,this.enableShapeUniforms=ba(this.outputShape.length);let s="",a="result";n&&(a="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let o=0;o<=1;o++){const l=i*2+o;s+=`
          localCoords = coords;
          if(localCoords[2] + ${o} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${o};
          if (localCoords[1] + ${i} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${i};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?A4():E4(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${r.output} = ${a};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u_e(t){const e=Ba(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return HRe(t,n)}function c_e(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return QRe(t,e)}function d_e(t){const e=new Uint16Array([0,1,2,2,1,3]);return ZRe(t,e)}function l1(t,e,n,r,s,a){eOe(e,n);const i=JRe(t),o=t.TEXTURE_2D;return gt(t,()=>t.bindTexture(o,i)),gt(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),gt(t,()=>t.texParameteri(o,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),gt(t,()=>t.texParameteri(o,t.TEXTURE_MIN_FILTER,t.NEAREST)),gt(t,()=>t.texParameteri(o,t.TEXTURE_MAG_FILTER,t.NEAREST)),ve().getNumber("WEBGL_VERSION")===1?gt(t,()=>t.texImage2D(o,0,r,e,n,0,s,a,null)):gt(t,()=>t.texStorage2D(o,1,r,e,n)),gt(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:i,texShape:[n,e]}}function une(t){return t.internalFormatFloat}function f_e(t,e,n,r){const[s,a]=i1(e,n);return l1(t,s,a,une(r),r.textureFormatFloat,t.FLOAT)}function cne(t){return t.internalFormatHalfFloat}function h_e(t,e,n,r){const[s,a]=i1(e,n);return l1(t,s,a,cne(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function dne(t){return t.downloadTextureFormat}function p_e(t,e,n,r){const[s,a]=i1(e,n);return l1(t,s,a,dne(r),t.RGBA,t.UNSIGNED_BYTE)}function fne(t){return t.internalFormatPackedFloat}function m_e(t,e,n,r){const[s,a]=yy(e,n);return l1(t,s,a,fne(r),t.RGBA,t.FLOAT)}function hne(t){return t.internalFormatPackedHalfFloat}function g_e(t,e,n,r){const[s,a]=yy(e,n);return l1(t,s,a,hne(r),t.RGBA,r.textureTypeHalfFloat)}function y_e(t,e,n){return gt(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),AV(t,e,"clipSpacePos",n,3,20,0)&&AV(t,e,"uv",n,2,20,12)}function b_e(t,e,n,r,s,a){gt(t,()=>t.bindTexture(t.TEXTURE_2D,e));let i,o,l;s instanceof Uint8Array?(i=new Uint8Array(n*r*4),o=t.UNSIGNED_BYTE,l=t.RGBA):(i=new Float32Array(n*r*4),o=t.FLOAT,l=a.internalFormatPackedFloat),i.set(s),ve().getNumber("WEBGL_VERSION")===2?gt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,o,i)):gt(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,o,i)),gt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function x_e(t,e,n){gt(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?ve().getNumber("WEBGL_VERSION")===2?gt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):gt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):ve().getNumber("WEBGL_VERSION")===2?gt(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):gt(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),gt(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function v_e(t,e,n,r){const s=t.createBuffer();gt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const o=4*4*e*n;return gt(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,o,t.STREAM_READ)),gt(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),gt(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}function w_e(t,e,n){const r=t,s=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function S_e(t,e,n,r){const[s,a]=i1(e,n),i=4,o=new Uint8Array(FRe(e*n,i));return gt(t,()=>t.readPixels(0,0,s,a,r.downloadTextureFormat,t.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)}function C_e(t,e,n,r,s,a,i,o){const l=t,u=new Float32Array(zRe(a,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function k_e(t,e,n){const r=new Float32Array(e*n*4);return gt(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZE{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=ve().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,MRe(n,e)):this.gl=Vl(n),e=this.gl,ve().getNumber("WEBGL_VERSION")===2){const a=e;this.createVertexArray=()=>gt(a,()=>a.createVertexArray()),this.bindVertexArray=i=>gt(a,()=>a.bindVertexArray(i)),this.deleteVertexArray=i=>gt(a,()=>a.deleteVertexArray(i)),this.getVertexArray=()=>gt(a,()=>a.getParameter(a.VERTEX_ARRAY_BINDING))}else if(e!=null){const a=e.getExtension("OES_vertex_array_object");if(a==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>gt(e,()=>a.createVertexArrayOES()),this.bindVertexArray=i=>gt(e,()=>a.bindVertexArrayOES(i)),this.deleteVertexArray=i=>gt(e,()=>a.deleteVertexArrayOES(i)),this.getVertexArray=()=>gt(e,()=>e.getParameter(a.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),ve().getNumber("WEBGL_VERSION")===1){const a="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=Xw(this.gl,a),qo(this.gl,i))this.textureHalfFloatExtension=Xw(this.gl,i);else if(ve().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),qo(this.gl,s))this.colorBufferHalfFloatExtension=Xw(this.gl,s);else if(ve().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",qo(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(qo(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=c_e(this.gl),this.indexBuffer=d_e(this.gl),this.framebuffer=tOe(this.gl),this.textureConfig=I4(this.gl,this.textureHalfFloatExtension)}get debug(){return ve().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;gt(e,()=>e.finish()),gt(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),gt(e,()=>e.deleteFramebuffer(this.framebuffer)),gt(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),gt(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),gt(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),f_e(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),h_e(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),p_e(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),x_e(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,s){this.throwIfDisposed(),b_e(this.gl,e,n,r,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),g_e(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),m_e(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(RV(this.gl,this.framebuffer),this.outputTexture=null),gt(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>S_e(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,s,a,i){return C_e(this.gl,e,n,r,s,a,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return w_e(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const s=v_e(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(ve().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,a=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const i=s.clientWaitSync(a,0,0);return i===s.ALREADY_SIGNALED||i===s.CONDITION_SATISFIED},n=a}else ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>k_e(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=u_e(n));const r=XRe(n);gt(n,()=>n.attachShader(r,this.vertexShader)),gt(n,()=>n.attachShader(r,e)),YRe(n,r);const s=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&KE(n,s),s}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;gt(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),y_e(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(gt(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&KE(this.gl,this.program),gt(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?rOe(this.gl,e,n):sOe(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),gt(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),aOe(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[s,a]=yy(n,r);this.setOutputMatrixTextureDriver(e,s,a)}setOutputMatrixWriteRegion(e,n,r,s){this.setOutputMatrixWriteRegionDriver(r,e,s,n)}setOutputPackedMatrixWriteRegion(e,n,r,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&KE(this.gl,this.program),Yw(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}gt(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),gt(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Xw(this.gl,ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),a=r.createQuery();return r.beginQuery(s.TIME_ELAPSED_EXT,a),a}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await cU(()=>this.disposed||this.isQueryAvailable(e,ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),a=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),a&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),s=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=N_e(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in ve().platform&&(r=ve().platform.setTimeoutCustom.bind(ve().platform)),cU(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),XE(this.gl,e,this.framebuffer),this.debug&&Yw(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(XE(this.gl,this.outputTexture,this.framebuffer),this.debug&&Yw(this.gl)):RV(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const s=this.gl;XE(s,e,this.framebuffer),this.debug&&Yw(s),this.outputTexture=e,gt(s,()=>s.viewport(0,0,n,r)),gt(s,()=>s.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,s){this.throwIfDisposed(),gt(this.gl,()=>this.gl.scissor(e,n,r,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function N_e(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:T_e,bincountImpl:pne,bincountReduceImpl:$_e,bitwiseAndImpl:I_e,castImpl:E_e,ceilImpl:A_e,concatImpl:R_e,equalImpl:O_e,expImpl:__e,expm1Impl:D_e,floorImpl:P_e,gatherNdImpl:M_e,gatherV2Impl:j_e,greaterImpl:L_e,greaterEqualImpl:F_e,lessImpl:z_e,lessEqualImpl:B_e,linSpaceImpl:U_e,logImpl:V_e,maxImpl:W_e,maximumImpl:G_e,minimumImpl:H_e,multiplyImpl:q_e,negImpl:K_e,notEqualImpl:X_e,prodImpl:Y_e,raggedGatherImpl:Q_e,raggedRangeImpl:Z_e,raggedTensorToTensorImpl:J_e,rangeImpl:e3e,rsqrtImpl:t3e,scatterImpl:n3e,sigmoidImpl:r3e,simpleAbsImpl:mne,sliceImpl:s3e,sparseFillEmptyRowsImpl:a3e,sparseReshapeImpl:i3e,sparseSegmentReductionImpl:gne,sqrtImpl:o3e,staticRegexReplaceImpl:l3e,stridedSliceImpl:u3e,stringNGramsImpl:c3e,stringSplitImpl:d3e,stringToHashBucketFastImpl:f3e,subImpl:h3e,tileImpl:p3e,topKImpl:m3e,transposeImpl:O4,uniqueImpl:g3e}=zte;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yne(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function Ma(t,e){return e===1?[t]:yne(t,e)}function y3e(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b3e{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=ba(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Ma("rc",this.rank),r=Xn(this.rank),s=this.getOutOfBoundsCondition(n),a=this.getSetup(n),i=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${a}

            setOutput(vec4(${i}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let a=`${r===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let i=2;i<this.rank;i++)a=`${e[e.length-1-i]},`+a;n.push(a)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${s};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bne{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=ba(this.outputShape.length);let r="";for(let s=0;s<4;s++){let a="thisRC = rc;";s%2===1&&(a+="thisRC.z += 1;"),s>1&&(a+="thisRC.y += 1;"),r+=`
        ${a}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${x3e(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?A4():E4(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function x3e(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?yOe(["r","c","d"],"inputShape"):Wh(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let v3e=class{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const s=MV(n,r),a=jV(e,s,r);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);const i=PV(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const l=this.freeTextures[a].pop();return this.usedTextures[a].push(l),l}let o;return s===Zs.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===Zs.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===Zs.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===Zs.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===Zs.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(o),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),o}releaseTexture(e,n,r,s){if(this.freeTextures==null)return;const a=MV(r,s),i=jV(n,a,s);i in this.freeTextures||(this.freeTextures[i]=[]);const o=PV(n,a,this.gpgpu.gl,this.gpgpu.textureConfig,s),l=ve().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;const u=this.usedTextures[i],c=u&&u.indexOf(e);if(c==null||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u[c]=u[u.length-1],u.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}};function w3e(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function PV(t,e,n,r,s){const a=S3e(e,r);let i;if(s){const[l,u]=yy(t[0],t[1]);i=l*u}else{const[l,u]=i1(t[0],t[1]);i=l*u}const o=w3e(n,a);return i*o}function S3e(t,e){switch(t){case Zs.PACKED_2X2_FLOAT32:return fne(e);case Zs.PACKED_2X2_FLOAT16:return hne(e);case Zs.UNPACKED_FLOAT32:return une(e);case Zs.UNPACKED_FLOAT16:return cne(e);case Zs.PACKED_4X1_UNSIGNED_BYTE:return dne(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function C3e(t){return ve().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Zs.PACKED_2X2_FLOAT32:Zs.UNPACKED_FLOAT32:t?Zs.PACKED_2X2_FLOAT16:Zs.UNPACKED_FLOAT16}function MV(t,e){if(t===so.UPLOAD)return Zs.PACKED_2X2_FLOAT32;if(t===so.RENDER||t==null)return C3e(e);if(t===so.DOWNLOAD||t===so.PIXELS)return Zs.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function jV(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let gu=class{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=ba(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}};const il="if (isnan(x)) return x;",k3e="return x;",LV="return abs(x);",N3e="return (x >= 0.0) ? x : (exp(x) - 1.0);",T3e=il+`
  return (x < 0.0) ? 0.0 : x;
`,$3e=il+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,pd="return x;",I3e="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E3e="return x;",A3e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,R3e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,O3e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,_3e="return 1.0 / (1.0 + exp(-1.0 * x));";class xd{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=ba(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D3e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=ba(this.outputShape.length);const n=e.length,r=Ma("rc",n),s=Xn(n),a=y3e(n,r),i=r.slice(-2),o=n<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${a});

        setOutput(getChannel(packedInput, ${o}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P3e=Mj,M3e=1e-7,j3e=1e-4,Jw={};function L3e(t){return t in Jw||(Jw[t]={}),Jw[t]}const F3e=ve().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),z3e=600;function B3e(){return ve().global.screen==null?1024:ve().global.screen.height*ve().global.screen.width*window.devicePixelRatio*z3e/1024/1024}class rT extends ZC{nextDataId(){return rT.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!ve().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof ZE)n=e;else{const r=Vl(ve().getNumber("WEBGL_VERSION"),e);n=new ZE(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Vl(ve().getNumber("WEBGL_VERSION"));n=new ZE(r),this.binaryCache=L3e(ve().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new v3e(this.gpgpu),this.numMBBeforeWarning=B3e(),this.texData=new FM(this,Aa())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,s,a,i){const o=this.makeTensorInfo(n,r),l=this.texData.get(o.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[s,a]},l.texShape=[s,a];const u=Qw(n),c=new DV(u,!1,i),d=this.runWebGLProgram(c,[o],r,[[s,a]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(o),d.dataId}write(e,n,r){if((ve().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||ve().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:n,dtype:r,values:e,usage:so.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,s,a){if(ve().getBool("DEBUG")&&this.checkNumericalProblems(n),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:s,values:n,usage:so.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:s,complexTensorInfos:a,slice:i,shape:o,isPacked:l}=n;if(i!=null){let h;l?h=new xd(o,pd):h=new gu(o,pd);const m=this.runWebGLProgram(h,[{dataId:e,shape:o,dtype:s}],s),g=this.readSync(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return r;const u=this.activeTimers!=null;let c;u&&(c=ti());let d;if(s==="complex64"){const h=this.readSync(a.real.dataId),m=this.readSync(a.imag.dataId);d=Fl(h,m)}else d=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=ti()-c),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const g=this.pendingRead.get(e);return new Promise(y=>g.push(y))}const n=this.texData.get(e),{values:r,shape:s,slice:a,dtype:i,complexTensorInfos:o,isPacked:l}=n;if(a!=null){let g;l?g=new xd(s,pd):g=new gu(s,pd);const y=this.runWebGLProgram(g,[{dataId:e,shape:s,dtype:i}],i),b=this.read(y.dataId);return this.disposeIntermediateTensorInfo(y),b}if(r!=null)return this.convertAndCacheOnCPU(e);if(ve().getBool("DEBUG")&&!ve().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ve().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(i!=="complex64"&&ve().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const g=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(g.texture.texture,...Kw(s))}this.pendingRead.set(e,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(i==="complex64"){const g=await Promise.all([this.read(o.real.dataId),this.read(o.imag.dataId)]),y=g[0],b=g[1];d=Fl(y,b)}else if(u==null)d=this.getValuesFromTexture(e);else{const g=ye(s);d=this.gpgpu.downloadFloat32MatrixFromBuffer(u,g)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){const g=this.gpgpu.gl;gt(g,()=>g.deleteBuffer(u))}const h=this.convertAndCacheOnCPU(e,d),m=this.pendingRead.get(e);return this.pendingRead.delete(e),m.forEach(g=>g(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Aa().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e,n={}){const r=this.texData.get(e),{values:s,shape:a,slice:i,dtype:o,isPacked:l,texture:u}=r;if(o==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(i!=null){let m;l?m=new xd(a,pd):m=new gu(a,pd);const g=this.runWebGLProgram(m,[{dataId:e,shape:a,dtype:o}],o),y=this.readToGPU(g,n);return this.disposeIntermediateTensorInfo(g),y}if(u==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),d=Aa().makeTensorFromTensorInfo(c),h=this.texData.get(c.dataId);return Object.assign({tensorRef:d},h.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>Ml(s));return Wt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Wt(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!WRe(r))throw ve().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:s}=this.texData.get(e),a=ye(n);if(ve().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const h=this.decode(e),m=this.texData.get(h.dataId),g=this.gpgpu.downloadMatrixFromPackedTexture(m.texture.texture,...Kw(n)).subarray(0,a);return this.disposeIntermediateTensorInfo(h),g}const i=ve().getBool("WEBGL_PACK")&&s===!0,o=i?Qw(n):n,l=i?new i_e(o):new a_e(o),u=this.runWebGLProgram(l,[{shape:o,dtype:r,dataId:e}],"float32"),c=this.texData.get(u.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(u),d}timerAvailable(){return ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,e();const a=$c(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),i=$c(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,s&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(a);o.kernelMs=KX(l),o.getExtraProfileInfo=()=>l.map((u,c)=>({name:i[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:ti(),endMs:null}}endTimer(e){return ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=ti(),e)}async getQueryTime(e){if(ve().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:s,usage:a,isPacked:i,slice:o}=this.texData.get(e),l=o&&o.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(n,s,a,i)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=F3e){return ve().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&ye(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){to("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return P3e(e.shape,n)}packedUnaryOp(e,n,r){const s=new xd(e.shape,n),a=this.compileAndRun(s,[e],r);return Aa().makeTensorFromTensorInfo(a)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=mne(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(ve().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,LV,e.dtype);const n=new gu(e.shape,LV),r=this.compileAndRun(n,[e]);return Aa().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&pg(r[0])){const a=r.map(i=>yc(i));s=this.write(a,e,n)}else s=this.write(r,e,n);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:n}}makeOutput(e,n,r){return Aa().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new D3e(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new b3e(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[Mm(e.shape),...jm(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},a=[Mm(n),...jm(n)],i=new bne(a,r),o=!0,l=[r],u=this.runWebGLProgram(i,[s],e.dtype,l,o);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:s,shape:a,dtype:i}=r;if(n!=null){const h=ye(a),m=n[0]*n[1]*4;X(h<=m,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const o=Qw(a);let l;s?l=new s_e(o):l=new r_e(o);const u=!0,c=[n??Kw(o)],d=this.runWebGLProgram(l,[{shape:o,dtype:i,dataId:e}],i,c,u,n);return{dtype:i,shape:a,dataId:d.dataId}}runWebGLProgram(e,n,r,s,a=!1,i){const o=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(o.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===Bb.DENSE){const w=i??Kw(e.outputShape);l.texShape=w.map(C=>C*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),ye(o.shape)===0)return l.values=$s(o.dtype,0),o;const u=[],c=n.map(w=>{if(w.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let C=this.texData.get(w.dataId);if(C.texture==null){if(!e.packedInputs&&ye(w.shape)<=ve().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:w.shape,texData:null,isUniform:!0,uniformValues:C.values};e.packedInputs&&(C.isPacked=!0,C.shape=w.shape)}if(this.uploadToGPU(w.dataId),!!C.isPacked!=!!e.packedInputs)w=C.isPacked?this.unpackTensor(w):this.packTensor(w),u.push(w),C=this.texData.get(w.dataId);else if(C.isPacked&&!N2(C.shape,w.shape)){const k=w,T=w.shape;w.shape=C.shape,w=this.packedReshape(w,T),u.push(w),C=this.texData.get(w.dataId),k.shape=T}return{shape:w.shape,texData:C,isUniform:!1}});this.uploadToGPU(o.dataId);const d={shape:o.shape,texData:l,isUniform:!1},h=n_e(e,c,d),m=this.getAndSaveBinary(h,()=>e_e(this.gpgpu,e,c,d)),g=this.activeTimers!=null;let y;g&&(y=this.startTimer()),ve().get("ENGINE_COMPILE_ONLY")||t_e(this.gpgpu,m,c,d,s),u.forEach(w=>this.disposeIntermediateTensorInfo(w)),g&&(y=this.endTimer(y),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(y)}));const b=ve().getNumber("WEBGL_FLUSH_THRESHOLD");if(b>0){const w=ti();w-this.lastGlFlushTime>b&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=w)}if(!ve().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&a===!1){const w=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),w}return o}compileAndRun(e,n,r,s,a=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,s,a)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(ve().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=be(()=>{if(!ve().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=ve().getBool("DEBUG");ve().set("DEBUG",!1);const n=this.abs(It(1e-8)).dataSync()[0];if(ve().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?M3e:j3e}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:s,values:a,texture:i,usage:o,isPacked:l}=n;if(i!=null)return;const u=this.activeTimers!=null;let c;u&&(c=ti());let d=n.texShape;if(d==null&&(d=lOe(r,l),n.texShape=d),a!=null){const h=Qw(r);let m,g=d[1],y=d[0];const b=a instanceof Uint8Array||a instanceof Uint8ClampedArray;(l||!b)&&([g,y]=yy(d[0],d[1])),l?m=new l_e(h,b):m=new DV(h,b);const w=b?[y,g]:d,C=this.makeTensorInfo(w,s),k=this.texData.get(C.dataId);b?k.usage=so.PIXELS:k.usage=so.UPLOAD,k.texShape=w,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(C.dataId),g,y,a);const T=[[y,g]],I=this.runWebGLProgram(m,[C],s,T,!0),A=this.texData.get(I.dataId);n.texShape=A.texShape,n.isPacked=A.isPacked,n.usage=A.usage,ve().get("ENGINE_COMPILE_ONLY")?this.disposeData(I.dataId):(n.texture=A.texture,n.values=null,this.texData.delete(I.dataId)),this.disposeIntermediateTensorInfo(C),u&&(this.uploadWaitMs+=ti()-c)}else{const h=this.acquireTexture(d,o,s,l);n.texture=h}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:s}=r;return n!=null&&(r.values=U3e(n,s)),r.values}acquireTexture(e,n,r,s){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${a} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,s)}computeBytes(e,n){return e[0]*e[1]*JS(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(s=>{try{this.checkCompletion_(n),s(!0)}catch(a){throw a}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await nZ(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(rne(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:s,nanLoc:a,outShapeLocation:i,outShapeStridesLocation:o,outTexShapeLocation:l}=lne(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=s,e.nanLoc=a,e.outShapeLocation=i,e.outShapeStridesLocation=o,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:s,height:a,width:i,channels:o}=e,l=Aa().backend;if(!l.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const u=l.writeTexture(s,n,r,a,i,o);return Aa().makeTensorFromDataId(u,n,r,l)}}rT.nextDataId=0;function U3e(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */fY()&&nj("webgl",()=>new rT,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _4=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;let Th=class{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=_t(n,r),this.enableShapeUniforms=ba(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hh=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class Sy{constructor(e,n,r,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=_t(n,r);const a=this.outputShape.length;this.enableShapeUniforms=ba(a);let i="";if(s)if(a===0||ye(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          ${Xn(a)} coords = getOutputCoords();
        `,a===1)this.enableShapeUniforms?i+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:i+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Ma("coords",a);this.enableShapeUniforms?i+=`
            bool nextRowOutOfBounds =
              (${l[a-2]} + 1) >= outShape[${a} - 2];
            bool nextColOutOfBounds =
              (${l[a-1]} + 1) >= outShape[${a} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:i+=`
            bool nextRowOutOfBounds =
              (${l[a-2]} + 1) >= ${this.outputShape[a-2]};
            bool nextColOutOfBounds =
              (${l[a-1]} + 1) >= ${this.outputShape[a-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${i}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oi(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const V3e={kernelName:Mg,backendName:"webgl",kernelFunc:Oi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qd(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,a=n.makeTensorInfo(r.shape,"complex64"),i=n.texData.get(a.dataId),o=Oi({inputs:{x:r},backend:n}),l=Oi({inputs:{x:s},backend:n});return i.complexTensorInfos={real:o,imag:l},a}const W3e={kernelName:ik,backendName:"webgl",kernelFunc:Qd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xne="return (a < 0.) ? b * a : a;",vne=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function G3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:a}=r,i=n.makeTensorInfo([],"float32",Vd(a,"float32")),o=ve().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Sy(vne,s.shape,i.shape):new Th(xne,s.shape,i.shape),l=n.runWebGLProgram(o,[s,i],"float32");return n.disposeIntermediateTensorInfo(i),l}const H3e={kernelName:ov,backendName:"webgl",kernelFunc:G3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wne="return (a < 0.) ? b * a : a;",Sne=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function q3e(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e,a=ve().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Sy(Sne,r.shape,s.shape):new Th(wne,r.shape,s.shape);return n.runWebGLProgram(a,[r,s],"float32")}const K3e={kernelName:Tv,backendName:"webgl",kernelFunc:q3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cy="if (isnan(x)) return x;";function Sn({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:s,backend:a})=>{const{x:i}=s,o=a,l=r||i.dtype;if(o.shouldExecuteOnCPU([i])&&n!=null){const d=o.texData.get(i.dataId),h=n(d.values,l);return o.makeTensorInfo(i.shape,l,h)}const u=ve().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return u?c=new xd(i.shape,e):c=new gu(i.shape,t),o.runWebGLProgram(c,[i],l)}}function na({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:a}){return({inputs:i,backend:o})=>{const{a:l,b:u}=i,c=o;if(r&&l.dtype==="complex64"){const g=c.texData.get(l.dataId),y=c.texData.get(u.dataId),[b,w]=[[g.complexTensorInfos.real,y.complexTensorInfos.real],[g.complexTensorInfos.imag,y.complexTensorInfos.imag]].map(k=>{const[T,N]=k,I={dataId:T.dataId,dtype:T.dtype,shape:l.shape},A={dataId:N.dataId,dtype:N.dtype,shape:u.shape},D=new Th(t,l.shape,u.shape);return c.runWebGLProgram(D,[I,A],zs(T.dtype,N.dtype))}),C=Qd({inputs:{real:b,imag:w},backend:c});return c.disposeIntermediateTensorInfo(b),c.disposeIntermediateTensorInfo(w),C}const d=a||zs(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&s!=null){const g=c.texData.get(l.dataId).values,y=c.texData.get(u.dataId).values,b=l.dtype==="string"?zl(g):g,w=l.dtype==="string"?zl(y):y,[C,k]=s(l.shape,u.shape,b,w,d),T=c.makeTensorInfo(k,d),N=c.texData.get(T.dataId);return N.values=C,T}const h=ve().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let m;return h?m=new Sy(e,l.shape,u.shape,n):m=new Th(t,l.shape,u.shape),c.runWebGLProgram(m,[l,u],d)}}function Ub(t,e=!1){if(t==="linear")return e?E3e:k3e;if(t==="relu")return e?R3e:T3e;if(t==="elu")return e?A3e:N3e;if(t==="relu6")return e?O3e:$3e;if(t==="prelu")return e?Sne:wne;if(t==="leakyrelu")return e?vne:xne;if(t==="sigmoid")return e?_3e:I3e;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Cne=class{constructor(e,n,r,s=!1,a=!1,i=!1,o=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=ba(this.outputShape.length);const c=s?e[1]:e[2],d=Math.ceil(c/2),h=s?"i * 2, rc.y":"rc.y, i * 2",m=a?"rc.z, i * 2":"i * 2, rc.z",g=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],y=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let b="",w="";o&&(l?b=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:u?b=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:b=`vec4 activation(vec4 x) {
          ${o}
        }`,w="result = activation(result);");const C=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let k="rc.x",T="rc.x";e[0]<n[0]?k=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(T=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${b}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${k};
        int batchB = ${T};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${h});
          vec4 b = getMatrixB(batchB, ${m});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${g[0]} * ${y[0]});
          result += (${g[1]} * ${y[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${C}

        ${w}

        setOutput(result);
      }
    `}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FV={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};let zV=class{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=_t(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BV="return a * b;";function D4(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,a=zs(r.dtype,s.dtype);if(r.dtype==="complex64"){const o=n.texData.get(r.dataId),l=n.texData.get(s.dataId),u=new zV(FV.REAL,r.shape,s.shape),c=new zV(FV.IMAG,r.shape,s.shape),d=[{dataId:o.complexTensorInfos.real.dataId,dtype:o.complexTensorInfos.real.dtype,shape:r.shape},{dataId:o.complexTensorInfos.imag.dataId,dtype:o.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape}],h=n.runWebGLProgram(u,d,"float32"),m=n.runWebGLProgram(c,d,"float32"),g=Qd({inputs:{real:h,imag:m},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}if(n.shouldExecuteOnCPU([r,s])){const o=n.texData.get(r.dataId),l=n.texData.get(s.dataId),[u,c]=q_e(r.shape,s.shape,o.values,l.values,a),d=n.makeTensorInfo(c,a),h=n.texData.get(d.dataId);return h.values=u,d}let i;return ve().getBool("WEBGL_PACK_BINARY_OPERATIONS")?i=new Sy(BV,r.shape,s.shape):i=new Th(BV,r.shape,s.shape),n.runWebGLProgram(i,[r,s],a)}const X3e={kernelName:Gg,backendName:"webgl",kernelFunc:D4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y3e(t,e,n){const r=[Mm(t.shape),...jm(t.shape)],s={dtype:t.dtype,shape:r,dataId:t.dataId},a=[Mm(e),...jm(e)],i=new bne(a,r),o=!0,l=[r],u=n.runWebGLProgram(i,[s],t.dtype,l,o);return{dataId:u.dataId,shape:e,dtype:u.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ot(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:a}=r,i=n,o=ye(s.shape),l=BM(a,o),u=ye(l);X(o===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${s.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);const c=i.texData.get(s.dataId);return c.isPacked&&!N2(s.shape,l)&&!(c.texture!==null&&N2(c.shape,l))?Y3e(s,l,i):(i.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype})}const Q3e={kernelName:Iv,backendName:"webgl",kernelFunc:ot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UV{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:a,outSize:i}=e;this.outputShape=[s,i];const o=Math.floor(r/4)*4,l=r%4;let u="sumValue += dot(values, ones);";if(n!=null){const d=1/n;u=`sumValue += dot(values * ${$m(d)?d.toPrecision(2):d}, ones);`}let c="";a%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${o}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${o};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Z3e=class{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:a,outSize:i}=e;this.outputShape=[s,i];let o="0.0",l="";n==="prod"?o="1.0":n==="min"?(o="1.0 / 1e-20",l="min"):n==="max"&&(o="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(r/4)*4,d=r%4;let h=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,m="vec4";n==="all"?(o="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,m="bvec4"):n==="any"&&(o="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,m="bvec4");let g="";a%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${o};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${o});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${h}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===2}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===3}) {
          ${m} values = ${m}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${h}
        }
        setOutput(${u});
      }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J3e(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=$N(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function qh(t,e,n,r){const s=J3e(t.shape);let a=t;for(let i=0;i<s.length;i++){const{inSize:o,windowSize:l,outSize:u}=s[i];let c,d;n==="mean"?c=i===0?new UV({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:u},o):new UV({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:u}):c=new Z3e({windowSize:l,inSize:o,batchSize:t.shape[0],outSize:u},n),d=a,a=r.runWebGLProgram(c,[a],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return a}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eDe=class{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[n[i]];this.outputShape=r,this.rank=r.length;const s=Xn(this.rank),a=tDe(n);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${a}));
    }
    `}};function tDe(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let s=0;s<t.length;s++)r[t[s]]=n[s];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nDe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=Xn(this.rank),a=yne("rc",this.rank),i=new Array(this.rank);for(let c=0;c<n.length;c++)i[n[c]]=a[c];const o=`vec2(${i.slice(-2).join()})`,l=`++${a[this.rank-1]} < ${r[this.rank-1]}`,u=`getChannel(getA(${i.join()}), ${o})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${a[this.rank-1]};
      if(++${a[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sT(t,e,n){const r=ve().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new nDe(t.shape,e):new eDe(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rDe(t,e,n,r){const s=e,a=t.shape.length,i=Gt(s,t.shape);let o=i;const l=Yn(o,a),u=l!=null;let c=t;u&&(c=sT(t,l,r),o=gr(o.length,a)),hs("sum",o,a);const[d,h]=ns(c.shape,o);let m=d;n&&(m=Ur(d,i));const g=ye(h),b=ye(t.shape)/g,w=ot({inputs:{x:c},attrs:{shape:[b,g]},backend:r}),C=Qk(t.dtype),k=qh(w,C,"sum",r),T=ot({inputs:{x:k},attrs:{shape:m},backend:r});return r.disposeIntermediateTensorInfo(w),r.disposeIntermediateTensorInfo(k),u&&r.disposeIntermediateTensorInfo(c),T}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aT(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r;return rDe(s,a,i,n)}const sDe={kernelName:Dv,backendName:"webgl",kernelFunc:aT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fa(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{perm:a}=r,i=n,o=s.shape.length,l=new Array(o);for(let c=0;c<l.length;c++)l[c]=s.shape[a[c]];let u;if(i.shouldExecuteOnCPU([s])){const d=i.texData.get(s.dataId).values,h=O4(d,s.shape,s.dtype,a,l);u=i.makeTensorInfo(l,s.dtype);const m=i.texData.get(u.dataId);m.values=h}else u=sT(s,a,i);return u}const aDe={kernelName:th,backendName:"webgl",kernelFunc:Fa};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kne=1e3;function T2({a:t,b:e,transposeA:n,transposeB:r,backend:s,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:l=null}){const u=t.shape.length,c=e.shape.length,d=n?t.shape[u-2]:t.shape[u-1],h=r?e.shape[c-1]:e.shape[c-2],m=n?t.shape[u-1]:t.shape[u-2],g=r?e.shape[c-2]:e.shape[c-1],y=t.shape.slice(0,-2),b=e.shape.slice(0,-2),w=ye(y),C=ye(b),T=_t(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([m,g]);X(d===h,()=>`Error in matMul: inner shapes (${d}) and (${h}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const N=n?[w,d,m]:[w,m,d],I=r?[C,g,h]:[C,h,g],A=ot({inputs:{x:t},backend:s,attrs:{shape:N}}),D=ot({inputs:{x:e},backend:s,attrs:{shape:I}}),P=[A,D],R=Math.max(w,C),O=n?A.shape[1]:A.shape[2],F=a!=null,z=i!=null,V=l==="leakyrelu",W=l!=null?Ub(l,!0):null,j=F||z||V||W!=null;let q;if((m===1||g===1)&&O>kne&&j===!1){let Q=A,H=D;n&&(Q=Fa({inputs:{x:A},backend:s,attrs:{perm:[0,2,1]}}),P.push(Q)),r&&(H=Fa({inputs:{x:D},backend:s,attrs:{perm:[0,2,1]}}),P.push(H));const ee=g!==1,te=g===1;let ne=Q;ee&&(ne=ot({inputs:{x:Q},backend:s,attrs:{shape:[R,O,1]}}),P.push(ne));const he=g===1?2:1;let Se=H;te&&(Se=ot({inputs:{x:H},backend:s,attrs:{shape:[R,1,O]}}),P.push(Se));const Ie=D4({inputs:{a:ne,b:Se},backend:s});q=aT({inputs:{x:Ie},backend:s,attrs:{axis:he,keepDims:!0}}),P.push(Ie)}else{const Q=zs(t.dtype,e.dtype),H=new Cne(N,I,[R,m,g],n,r,F,W,z,V),ee=[A,D];if(a!=null&&ee.push(a),z&&ee.push(i),V){const te=s.makeTensorInfo([],"float32",Vd(o,"float32"));ee.push(te),P.push(te)}q=s.runWebGLProgram(H,ee,Q)}const Y=ot({inputs:{x:q},backend:s,attrs:{shape:T}});P.push(q);for(const Q of P)s.disposeIntermediateTensorInfo(Q);return Y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iDe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:a,bias:i,preluActivationWeights:o}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;return T2({a:s,b:a,transposeA:l,transposeB:u,backend:n,bias:i,preluActivationWeights:o,leakyreluAlpha:d,activation:c})}const oDe={kernelName:Tb,backendName:"webgl",kernelFunc:iDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VV="return abs(x);";function lDe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const a=n.texData.get(r.dataId),i=mne(a.values);return n.makeTensorInfo(r.shape,r.dtype,i)}let s;return ve().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new xd(r.shape,VV):s=new gu(r.shape,VV),n.runWebGLProgram(s,[r],r.dtype)}const uDe={kernelName:zx,backendName:"webgl",kernelFunc:lDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cDe=il+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,dDe=Sn({opSnippet:cDe}),fDe={kernelName:gg,backendName:"webgl",kernelFunc:dDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hDe=il+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,pDe=Sn({opSnippet:hDe}),mDe={kernelName:yg,backendName:"webgl",kernelFunc:pDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WV="return a + b;",gDe=na({opSnippet:WV,packedOpSnippet:WV,supportsComplex:!0,cpuKernelImpl:T_e}),yDe={kernelName:Ph,backendName:"webgl",kernelFunc:gDe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bDe{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((a,i)=>`T${i}`);const r=[];this.variableNames.forEach(a=>{r.push(`float v${a} = get${a}AtOutCoords();`)});const s=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let xDe=class{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((a,i)=>`T${i}`);const r=[];this.variableNames.forEach(a=>{r.push(`vec4 v${a} = get${a}AtOutCoords();`)});const s=this.variableNames.map(a=>`v${a}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LS(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return Oi({inputs:{x:r[0]},backend:n});if(r.length>ve().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),u=LS({inputs:r.slice(0,l),backend:n}),c=LS({inputs:r.slice(l),backend:n});return LS({inputs:[u,c],backend:n})}const s=r.map(l=>l.dtype).reduce((l,u)=>zs(l,u)),a=r.map(l=>l.shape),o=ve().getBool("WEBGL_PACK")?new xDe(r[0].shape,a):new bDe(r[0].shape,a);return n.runWebGLProgram(o,r,s)}const vDe={kernelName:Bx,backendName:"webgl",kernelFunc:LS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r,o=s.shape.length,l=Gt(a,s.shape);let u=l;const c=Yn(u,o);let d=s;c!=null&&(d=Fa({inputs:{x:s},backend:n,attrs:{perm:c}}),u=gr(u.length,o)),hs("all",u,o);const[h,m]=ns(d.shape,u),g=ye(m),y=ot({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),b=qh(y,y.dtype,"all",n);let w;if(i){const C=Ur(h,l);w=ot({inputs:{x:b},backend:n,attrs:{shape:C}})}else w=ot({inputs:{x:b},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),c!=null&&n.disposeIntermediateTensorInfo(d),w}const SDe={kernelName:JC,backendName:"webgl",kernelFunc:wDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r,o=s.shape.length,l=Gt(a,s.shape);let u=l;const c=Yn(u,o);let d=s;c!=null&&(d=Fa({inputs:{x:s},backend:n,attrs:{perm:c}}),u=gr(u.length,o)),hs("any",u,o);const[h,m]=ns(d.shape,u),g=ye(m),y=ot({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),b=qh(y,y.dtype,"any",n);let w;if(i){const C=Ur(h,l);w=ot({inputs:{x:b},backend:n,attrs:{shape:C}})}else w=ot({inputs:{x:b},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),c!=null&&n.disposeIntermediateTensorInfo(d),w}const kDe={kernelName:ek,backendName:"webgl",kernelFunc:CDe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let NDe=class{constructor(e,n,r){this.variableNames=["A"];const{windowSize:s,batchSize:a,outSize:i}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[a,i];const o=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${o} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TDe{constructor(e,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,X(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const a=e[e.length-1],i=Math.ceil(a/n);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),s||this.variableNames.push("bestIndicesA");const o=this.outputShape,l=o.length,u=Xn(l),c=Ma("coords",l);let d,h;if(i===1){h=l+1;const D=Xn(h);d=`
        ${D} sourceLocR = ${D}(${c.join()}, 0);
        ++${c[l-1]};
        ${D} sourceLocG = ${D}(${c.join()}, 0);
        ++${c[l-2]};
        ${D} sourceLocA = ${D}(${c.join()}, 0);
        --${c[l-1]};
        ${D} sourceLocB = ${D}(${c.join()}, 0);
        --${c[l-2]};`}else h=l,d=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const m=["x","y","z","w","u","v"].slice(0,h),g="."+m[h-1],y=m.map(D=>"int "+D),b=Ma("sourceLocR",h-1).concat("inIdx.r"),w=Ma("sourceLocG",h-1).concat("inIdx.g"),C=Ma("sourceLocB",h-1).concat("inIdx.b"),k=Ma("sourceLocA",h-1).concat("inIdx.a"),T=r==="max"?"greaterThan":"lessThan",N=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${w.join()}),
                             getBestIndicesAChannel(${C.join()}),
                             getBestIndicesAChannel(${k.join()})));`,I=`vec4(
            getAChannel(${b.join()}),
            hasNextCol ? getAChannel(${w.join()}) : 0.,
            hasNextRow ? getAChannel(${C.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${k.join()}) : 0.)`,A=s?"":`
      float getBestIndicesAChannel(${y.join()}) {
        return getChannel(getBestIndicesA(${m.join()}),
                                          vec2(${m.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${y.join()}) {
        return getChannel(getA(${m.join()}),
                               vec2(${m.slice(-2).join()}));
      }
      ${A}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${o[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${o[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${g}, sourceLocG${g},
          sourceLocB${g}, sourceLocA${g}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${I};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${N}
          vec4 candidate = ${I};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${T}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nne(t,e,n,r=null){let s=e.shape[0],a=e.shape[1];r!=null&&(s=r.shape[0],a=r.shape[1]);const i=$N(a),o={windowSize:i,inSize:a,batchSize:s,outSize:Math.ceil(a/i)},l=new NDe(o,n,r==null),u=[e];r!=null&&u.push(r);const c=t.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const d=Nne(t,e,n,c);return t.disposeIntermediateTensorInfo(c),d}function Tne(t,e,n,r=null){const s=r!=null?r.shape:e.shape,a=s[s.length-1],i=$N(a),o=new TDe(s,i,n,r==null),l=r==null?[e]:[e,r],u=t.runWebGLProgram(o,l,"int32");if(u.shape.length===e.shape.length){const c=Tne(t,e,n,u);return t.disposeIntermediateTensorInfo(u),c}return u}function $ne(t,e,n,r){const s=[n];if(hs("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,e.shape.length),!ve().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const a=[],i=t.texData.get(e.dataId),o=i!==null&&i.isPacked;let l=e;o&&(l=t.unpackTensor(e),a.push(l));const[u,c]=ns(l.shape,s),d=ye(c),h=ot({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});a.push(h);const m=Nne(t,h,r);a.push(m);const g=ot({inputs:{x:m},backend:t,attrs:{shape:u}});return a.forEach(y=>t.disposeIntermediateTensorInfo(y)),g}return Tne(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $De(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a}=r;let i=Gt(a,s.shape);const o=Yn(i,s.shape.length);let l=s;const u=[];o!=null&&(l=Fa({inputs:{x:s},backend:n,attrs:{perm:o}}),u.push(l),i=gr(i.length,l.shape.length)),hs("argMax",[i[0]],l.shape.length);const c=$ne(n,l,i[0],"max");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const IDe={kernelName:Ux,backendName:"webgl",kernelFunc:$De};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a}=r;let i=Gt(a,s.shape);const o=Yn(i,s.shape.length);let l=s;const u=[];o!=null&&(l=Fa({inputs:{x:s},backend:n,attrs:{perm:o}}),u.push(l),i=gr(i.length,l.shape.length)),hs("argMin",[i[0]],l.shape.length);const c=$ne(n,l,i[0],"min");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const ADe={kernelName:Vx,backendName:"webgl",kernelFunc:EDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RDe=il+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,ODe=Sn({opSnippet:RDe}),_De={kernelName:bg,backendName:"webgl",kernelFunc:ODe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DDe=il+"return log(x + sqrt(x * x + 1.0));",PDe=Sn({opSnippet:DDe}),MDe={kernelName:xg,backendName:"webgl",kernelFunc:PDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jDe=il+`
  return atan(x);
`,LDe=Sn({opSnippet:jDe}),FDe={kernelName:vg,backendName:"webgl",kernelFunc:LDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zDe=_4+`
  return atan(a, b);
`,BDe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Hh+`
  return result;
`,UDe=na({opSnippet:zDe,packedOpSnippet:BDe}),VDe={kernelName:Sg,backendName:"webgl",kernelFunc:UDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WDe=il+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,GDe=Sn({opSnippet:WDe}),HDe={kernelName:wg,backendName:"webgl",kernelFunc:GDe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Vb=class{constructor(e,n,r,s=!1,a=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,o=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,m=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;const y=n==="avg",b=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,w=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let C="0.0";if(y||(C="-1.0 / 1e-20"),r){const D=">=";this.userCode=`
        const ivec2 strides = ivec2(${o}, ${l});
        const ivec2 pads = ivec2(${m}, ${g});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${D} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?a?b:w:`wR * ${h} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const k="max";let T=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(T="avgValue / max(count, 1.0)");const N=Math.floor(i/4)*4,I=i%4,A=`
      if (${y}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${k}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${l});
      const ivec2 pads = ivec2(${m}, ${g});
      const float initializationValue = ${C};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${C});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${N}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${A}
          }

          int xC = xCCorner + ${N};
          if (${I===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${A}
          } else if (${I===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${A}
          } else if (${I===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${A}
          }
        }
        setOutput(${T});
      }
    `}},P4=class{constructor(e,n,r,s=!1,a=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const i=e.filterWidth,o=e.strideDepth,l=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,d=e.dilationHeight,h=e.dilationWidth,m=e.effectiveFilterDepth,g=e.effectiveFilterHeight,y=e.effectiveFilterWidth,b=e.padInfo.front,w=e.padInfo.top,C=e.padInfo.left;this.outputShape=e.outShape;const k=n==="avg";let T="0.0";if(k||(T="-1.0 / 1e-20"),r){const R=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${o}, ${l}, ${u});
        const ivec3 pads = ivec3(${b}, ${w}, ${C});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${m};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${g};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${y};
                  wC += ${h}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${R} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?a?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${g} * ${y} +
                      wR * ${y} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const N="max";let I=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(I="avgValue / max(count, 1.0)");const A=Math.floor(i/4)*4,D=i%4,P=`
      if (${k}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${N}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${o}, ${l}, ${u});
      const ivec3 pads = ivec3(${b}, ${w}, ${C});
      const float initializationValue = ${T};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${T});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${m};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${g};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${A}; wC += 4) {
              int xC = xCCorner + wC * ${h};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                getValue(batch, xD, xR, xC + 3 * ${h}, ch)
              );

              ${P}
            }

            int xC = xCCorner + ${A};
            if (${D===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${P}
            } else if (${D===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                initializationValue,
                initializationValue
              );

              ${P}
            } else if (${D===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                initializationValue
              );

              ${P}
            }
          }
        }
        setOutput(${I});
      }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;o1(s,"avgPool");const{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=r,u=1;X(Es(i,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=ga(s.shape,a,i,u,o,l);if(c.filterWidth===1&&c.filterHeight===1&&Xt(c.inShape,c.outShape))return Oi({inputs:{x:s},backend:n});const d=new Vb(c,"avg",!1);return n.runWebGLProgram(d,[s],"float32")}const KDe={kernelName:Wx,backendName:"webgl",kernelFunc:qDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:a,strides:i,pad:o,dimRoundingMode:l,dataFormat:u}=r,c=[1,1,1],d=go(s.shape,a,i,c,o,l,u),h=new P4(d,"avg",!1);return n.runWebGLProgram(h,[s],"float32")}const YDe={kernelName:Gx,backendName:"webgl",kernelFunc:XDe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let QDe=class{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=l-1-e.padInfo.top,d=u-1-e.padInfo.left,h=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${d});
      const float avgMultiplier = float(${h});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${o}) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}},ZDe=class{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterDepth,h=e.effectiveFilterHeight,m=e.effectiveFilterWidth,g=d-1-e.padInfo.front,y=h-1-e.padInfo.top,b=m-1-e.padInfo.left,w=1/(n*r*s);this.userCode=`
      const ivec3 pads = ivec3(${g}, ${y}, ${b});
      const float avgMultiplier = float(${w});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${a}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${h};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${m};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JDe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:a}=e,i=a,{filterSize:o,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],h=go(i.shape,o,l,d,u,c),m=new ZDe(h);return n.runWebGLProgram(m,[s],i.dtype)}const ePe={kernelName:nk,backendName:"webgl",kernelFunc:JDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tPe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:a}=e,i=a;o1([s,a],"avgPoolGrad");const{filterSize:o,strides:l,pad:u}=r,c=ga(i.shape,o,l,1,u),d=new QDe(c);return n.runWebGLProgram(d,[s],i.dtype)}const nPe={kernelName:tk,backendName:"webgl",kernelFunc:tPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rPe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:a}=e,{transposeA:i,transposeB:o}=r;return T2({a:s,b:a,transposeA:i,transposeB:o,backend:n})}const sPe={kernelName:Hx,backendName:"webgl",kernelFunc:rPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let aPe=class{constructor(e,n,r,s,a,i){this.outputShape=[],this.variableNames=["x","mean","variance"],_t(e,n),_t(e,r);let o="0.0";s!=null&&(_t(e,s),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="1.0";a!=null&&(_t(e,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${o};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${i}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iPe{constructor(e,n,r,s,a,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],_t(e,n),_t(e,r);let o="vec4(0.0)";s!=null&&(_t(e,s),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="vec4(1.0)";a!=null&&(_t(e,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${o};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${i}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oPe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:s,variance:a,offset:i,scale:o}=t;X(s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),X(i==null||s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),X(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[r,s,a];let c=null;i!=null&&(c=i.shape,u.push(i));let d=null;o!=null&&(d=o.shape,u.push(o));const h=ve().getBool("WEBGL_PACK_NORMALIZATION")?new iPe(r.shape,s.shape,a.shape,c,d,l):new aPe(r.shape,s.shape,a.shape,c,d,l);return e.runWebGLProgram(h,u,u[0].dtype)},lPe={kernelName:sv,backendName:"webgl",kernelFunc:oPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let uPe=class{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Xn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=cPe(this.rank);let s;const a=e.map((i,o)=>`sourceLoc.${AD[o]} = start[${o}] + coords.${AD[o]};`);s=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${a.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${r}));
      }
    `}};const AD=["x","y","z","w","u","v"];function cPe(t){if(t===1)return"sourceLoc";if(t<=6)return AD.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dPe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Xn(this.rank),r=Ma("coords",this.rank),s=Ma("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,i=`getChannel(getSource(${s.join()}), ${a})`,o=`
      result.x = ${i};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${i};
        --${s[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${i};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${i};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,d)=>`start[${d}]`).join()});`:e.map((c,d)=>`${s[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${o}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fPe(t,e,n,r){const s=r.texData.get(t.dataId),a=r.makeTensorInfo(n,t.dtype),i=r.texData.get(a.dataId);Object.assign(i,s),i.refCount=1,i.shape=n,i.dtype=t.dtype;let o=Hj(e,$t(t.shape));s.slice&&(o+=s.slice.flatOffset),i.slice={flatOffset:o,origDataId:s.slice&&s.slice.origDataId||t.dataId};const l=r.dataRefCount.get(i.slice.origDataId)||1;return r.dataRefCount.set(i.slice.origDataId,l+1),a}function ky(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:a,size:i}=r,[o,l]=Kv(s,a,i);if(CN(s,o,l),ye(l)===0)return n.makeTensorInfo(l,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||s.dtype==="string"){const d=n.texData.get(s.dataId),h=s3e(d.values,o,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,h)}const{isPacked:u}=n.texData.get(s.dataId),c=Gj(s.shape,o,l);if(u||!c){const d=ve().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new dPe(l):new uPe(l),h=[o];return n.runWebGLProgram(d,[s],s.dtype,h)}return n.uploadToGPU(s.dataId),fPe(s,o,l,n)}const hPe={kernelName:_v,backendName:"webgl",kernelFunc:ky};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pPe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:a,crops:i}=r;X(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const o=a.reduce((C,k)=>C*k),l=Fh(s.shape,a,o),u=zh(l.length,a.length),c=Bh(s.shape,a,o),d=EN(i,a.length),h=AN(c,i,a.length),m=[],g=ot({inputs:{x:s},backend:n,attrs:{shape:l}}),y=Fa({inputs:{x:g},backend:n,attrs:{perm:u}}),b=ot({inputs:{x:y},backend:n,attrs:{shape:c}}),w=ky({inputs:{x:b},backend:n,attrs:{begin:d,size:h}});return m.push(g),m.push(y),m.push(b),m.forEach(C=>n.disposeIntermediateTensorInfo(C)),w},mPe={kernelName:qx,backendName:"webgl",kernelFunc:pPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:a}=e,{size:i}=r,o=n.readSync(s.dataId),l=n.readSync(a.dataId),u=pne(o,l,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,u)}const yPe={kernelName:rk,backendName:"webgl",kernelFunc:gPe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bPe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,xPe=`
  return float(int(a.r) & int(b.r));
`;function vPe(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,a=ve().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=ve().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,s])||i===1){const l=n.texData.get(r.dataId).values,u=n.texData.get(s.dataId).values,[c,d]=I_e(r.shape,s.shape,l,u,r.dtype),h=n.makeTensorInfo(d,r.dtype),m=n.texData.get(h.dataId);return m.values=c,h}let o;return a?o=new Sy(bPe,r.shape,s.shape,!1):o=new Th(xPe,r.shape,s.shape),n.runWebGLProgram(o,[r,s],r.dtype)}const wPe={kernelName:sk,backendName:"webgl",kernelFunc:vPe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SPe(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,a=n.readSync(r.dataId),i=n.readSync(s.dataId),o=_t(Array.from(a),Array.from(i));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}const CPe={kernelName:ak,backendName:"webgl",kernelFunc:SPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kPe="return float(a != b);",Ine=na({opSnippet:kPe,cpuKernelImpl:X_e,dtype:"bool"}),NPe={kernelName:wv,backendName:"webgl",kernelFunc:Ine};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u1(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Oi({inputs:{x:s.complexTensorInfos.real},backend:n})}const TPe={kernelName:Dk,backendName:"webgl",kernelFunc:u1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Pe="return float(int(x));";function IPe(t,e){const n=new gu(t.shape,$Pe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RD(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:a}=r;if(a==="complex64"){if(s.dtype==="complex64")return Oi({inputs:{x:s},backend:n});const i=es(s.shape),o=RD({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),l=Qd({inputs:{real:o,imag:i},backend:n});return i.dispose(),n.disposeIntermediateTensorInfo(o),l}if(s.dtype==="complex64"){const i=u1({inputs:{input:s},backend:n}),o=RD({inputs:{x:i},backend:n,attrs:{dtype:a}});return n.disposeIntermediateTensorInfo(i),o}if(!UM(s.dtype,a)){const i=Oi({inputs:{x:s},backend:n});return{dataId:i.dataId,shape:i.shape,dtype:a}}if(n.shouldExecuteOnCPU([s])){const i=n.texData.get(s.dataId).values,[o,l,u]=E_e(i,s.shape,s.dtype,a);return n.makeTensorInfo(o,l,u)}if(a==="int32")return IPe(s,n);if(a==="bool"){const i=n.makeTensorInfo([],"bool",$s("bool",1)),l=Ine({inputs:{a:s,b:i},backend:n});return n.disposeIntermediateTensorInfo(i),l}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${a}`)}const EPe={kernelName:Cg,backendName:"webgl",kernelFunc:RD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GV="return ceil(x);",APe=Sn({opSnippet:GV,packedOpSnippet:GV,cpuKernelImpl:A_e}),RPe={kernelName:kg,backendName:"webgl",kernelFunc:APe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let OPe=class{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Pe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{clipValueMin:a,clipValueMax:i}=r;let o;ve().getBool("WEBGL_PACK_CLIP")?o=new _Pe(s.shape):o=new OPe(s.shape);const l=[[a],[i]];return n.runWebGLProgram(o,[s],s.dtype,l)}const PPe={kernelName:Ng,backendName:"webgl",kernelFunc:DPe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let MPe=class{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HV(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function jPe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=n.texData.get(r.dataId),a=new MPe(r.shape),i=[HV(r,s.complexTensorInfos.real),HV(r,s.complexTensorInfos.imag)];return n.runWebGLProgram(a,i,i[0].dtype)}const LPe={kernelName:Kx,backendName:"webgl",kernelFunc:jPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let FPe=class{constructor(e){this.outputShape=[],this.outputShape=ii(e,1),this.variableNames=e.map((i,o)=>`T${o}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let i=1;i<n.length;i++)n[i]=n[i-1]+e[i][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let i=1;i<n.length;i++){const o=n[i-1];r.push(`else if (yC < ${n[i]}) setOutput(getT${i}(yR, yC-${o}));`)}const s=n.length,a=n[n.length-1];r.push(`else setOutput(getT${s}(yR, yC-${a}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zPe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=ii(e,n);const r=this.outputShape,s=r.length,a=Xn(s),i=Ma("coords",s),o=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((y,b)=>`T${b}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let y=1;y<l.length;y++)l[y]=l[y-1]+e[y][n];const u=o[n],c=o.slice(-2),d=o.join();let h=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${c.join()}));
        }`;for(let y=1;y<l.length;y++){const b=l[y-1];h+=`
        if (${u} < ${l[y]}  && ${u} >= ${l[y-1]}) {
          return getChannel(
            getT${y}(${eS(o,u,b)}),
            vec2(${eS(c,u,b)}));
        }`}const m=l.length,g=l[l.length-1];h+=`
        return getChannel(
          getT${m}(${eS(o,u,g)}),
          vec2(${eS(c,u,g)}));`,this.userCode=`
      float getValue(${o.map(y=>"int "+y)}) {
        ${h}
      }

      void main() {
        ${a} coords = getOutputCoords();
        vec4 result = vec4(getValue(${i}), 0., 0., 0.);

        ${i[s-1]} = ${i[s-1]} + 1;
        if (${i[s-1]} < ${r[s-1]}) {
          result.g = getValue(${i});
        }

        ${i[s-2]} = ${i[s-2]} + 1;
        if (${i[s-2]} < ${r[s-2]}) {
          result.a = getValue(${i});
        }

        ${i[s-1]} = ${i[s-1]} - 1;
        if (${i[s-2]} < ${r[s-2]} &&
            ${i[s-1]} < ${r[s-1]}) {
          result.b = getValue(${i});
        }
        setOutput(result);
      }
    `}}function eS(t,e,n){const r=t.indexOf(e);return t.map((a,i)=>i===r?`${a} - ${n}`:a).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iT(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return Oi({inputs:{x:s.complexTensorInfos.imag},backend:n})}const BPe={kernelName:kk,backendName:"webgl",kernelFunc:iT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ab(t,e,n){const r=t[0].dtype;if(r==="complex64"){const m=t.map(C=>u1({inputs:{input:C},backend:n})),g=t.map(C=>iT({inputs:{input:C},backend:n})),y=ab(m,e,n),b=ab(g,e,n),w=Qd({inputs:{real:y,imag:b},backend:n});return m.forEach(C=>n.disposeIntermediateTensorInfo(C)),g.forEach(C=>n.disposeIntermediateTensorInfo(C)),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),w}let s=n.shouldExecuteOnCPU(t);if(r==="string"&&(s=!0),s){const m=t.map(T=>{const I=[-1,ye(T.shape.slice(e))];return ot({inputs:{x:T},backend:n,attrs:{shape:I}})}),g=m.map(T=>({vals:n.readSync(T.dataId),shape:T.shape})),y=ii(m.map(T=>T.shape),1),b=m[0].shape[0]===1,w=R_e(g,y,r,b),C=ii(t.map(T=>T.shape),e),k=n.makeTensorInfo(C,r,w);return m.forEach(T=>n.disposeIntermediateTensorInfo(T)),k}const a=t.filter(m=>ye(m.shape)>0),i=ve().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&a[0].shape.length>1;if(a.length===1){const m=i?new gu(t[0].shape,pd):new xd(t[0].shape,pd);return n.runWebGLProgram(m,t,r)}const o=ve().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(a.length>o){const m=[];for(let y=0;y<a.length;y+=o){const b=a.slice(y,y+o);m.push(ab(b,e,n))}const g=ab(m,e,n);for(const y of m)n.disposeIntermediateTensorInfo(y);return g}if(i){const m=new zPe(a.map(g=>g.shape),e);return n.runWebGLProgram(m,a,r)}const{tensors2D:l,outShape:u}=UPe(a,e,n),c=new FPe(l.map(m=>m.shape)),d=n.runWebGLProgram(c,l,r);l.forEach(m=>n.disposeIntermediateTensorInfo(m));const h=ot({inputs:{x:d},attrs:{shape:u},backend:n});return n.disposeIntermediateTensorInfo(d),h}function UPe(t,e,n){const r=ii(t.map(a=>a.shape),e);return{tensors2D:t.map(a=>ot({inputs:{x:a},attrs:{shape:[-1,ye(a.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ene(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,a=Gt(s,e[0].shape)[0],i=e.map(u=>u.shape);TN(i,a);const o=ii(e.map(u=>u.shape),a);if(ye(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(u=>ye(u.shape)>0);return l.length===1?Oi({inputs:{x:l[0]},backend:n}):ab(l,a,n)}const VPe={kernelName:Xx,backendName:"webgl",kernelFunc:Ene};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ane{constructor(e,n=!1,r=null,s=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const i=e.padInfo.top,o=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,h=e.filterHeight,m=e.filterWidth,g=Math.floor(e.inChannels/4)*4,y=e.inChannels%4,b=e.dataFormat==="channelsLast",w=b?1:2,C=b?2:3,k=b?3:1;let T="",N="";r&&(s?T=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?T=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:T=`
          float activation(float x) {
            ${r}
          }
        `,N="result = activation(result);");const I=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${T}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${i}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${k}];

        ivec2 xRCCorner =
            ivec2(coords[${w}], coords[${C}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${h}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${m}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${g}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${b}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${y===1}) {

              if (${b}) {
                dotProd +=
                    getX(batch, xR, xC, ${g}) *
                    getW(wR, wC, ${g}, d2);
              } else {
                dotProd +=
                    getX(batch, ${g}, xR, xC) *
                    getW(wR, wC, ${g}, d2);
              }

            } else if (${y===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2)
              );

              if (${b}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${y===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${g}, d2),
                getW(wR, wC, ${g} + 1, d2),
                getW(wR, wC, ${g} + 2, d2)
              );

              if (${b}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${g}),
                  getX(batch, xR, xC, ${g} + 1),
                  getX(batch, xR, xC, ${g} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${g}, xR, xC),
                  getX(batch, ${g} + 1, xR, xC),
                  getX(batch, ${g} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${I}
        ${N}
        setOutput(result);
      }
    `}}class WPe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,s=e.padInfo.left,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.filterDepth,h=e.filterHeight,m=e.filterWidth,g=Math.floor(e.inChannels/4)*4,y=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${a}, ${i}, ${o});
      const ivec3 pads = ivec3(${n}, ${r}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${m}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${g}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${y===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${g}) *
                  getW(wF, wR, wC, ${g}, d2);
              } else if (${y===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${y===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${g}),
                  getX(batch, xF, xR, xC, ${g} + 1),
                  getX(batch, xF, xR, xC, ${g} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${g}, d2),
                  getW(wF, wR, wC, ${g} + 1, d2),
                  getW(wF, wR, wC, ${g} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rne{constructor(e,n=!1,r=null,s=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ba(this.outputShape.length);const i=e.padInfo.left,o=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,d=c;let h=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let b=0;b<c;b++)h+=`
           vec4 xTexelC${b*2};
           int xTexelC${b*2}Ready;
           vec4 xTexelC${b*2+1};
           int xTexelC${b*2+1}Ready;
           vec4 xC${b};`;h+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let b=0;b<c;b++)h+=`
           xTexelC${b*2} = vec4(0.0);
           xTexelC${b*2}Ready = 0;
           xTexelC${b*2+1} = vec4(0.0);
           xTexelC${b*2+1}Ready = 0;
           xC${b} = vec4(0.0);`;h+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let b=0;b<(d+1)/2;b++){const w=b*2;if(h+=`
           xC = xCCorner + ${w*l};
           `,o===1){if(w<c&&(i%2===1?(h+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }
               `,l===1&&w>0?h+=`
                 xC${w} = vec4(xTexelC${w-2}.zw, xTexelC${w}.xy);
                 `:h+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${w} = vec4(previous.zw, xTexelC${w}.xy);
                   } else {
                     xC${w} = vec4(0.0, 0.0, xTexelC${w}.xy);
                   }
                   `):h+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 xC${w} = xTexelC${w};
                 `,w+1<c)){const C=i%2===0?zM(l):l;l%2===0&&i%2===1||l%2!==0&&i%2!==1?(h+=`
                   xCOffset = xC + imod(pads[1], 2) + ${C};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                     xTexelC${w+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${w+1}.zw = vec2(0.0);
                     }
                     xTexelC${w+1}Ready = 1;
                   }
                   `,l>1?h+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${w+1} = vec4(previous.zw, xTexelC${w+1}.xy);
                     } else {
                      xC${w+1} = vec4(0.0, 0.0, xTexelC${w+1}.xy);
                     }
                     `:h+=`
                     xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.xy);
                     `):C===1?h+=`
                     xC${w+1} = xTexelC${w};
                     `:h+=`
                     xCOffset = xC + ${C};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                       xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${w+1}.zw = vec2(0.0);
                       }
                       xTexelC${w+1}Ready = 1;
                     }

                     xC${w+1} = xTexelC${w+1};
                     `}}else w<c&&(i%2===1?(h+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${w+1}Ready == 0) {
                   xTexelC${w+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${w+1}.zw = vec2(0.0);
                   }
                   xTexelC${w+1}Ready = 1;
                 }

                 xC${w} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
               `,w+1<c&&(h+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${w+1} = vec4(xTexelC${w+1}.xy, final.xy);
                 `)):(h+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${w}Ready == 0) {
                   xTexelC${w} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${w}.zw = vec2(0.0);
                   }
                   xTexelC${w}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${w+1}Ready == 0) {
                   xTexelC${w+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${w+1}.zw = vec2(0.);
                   }
                   xTexelC${w+1}Ready = 1;
                 }

                 xC${w} = vec4(
                   xTexelC${w}.xy, xTexelC${w+1}.xy);
               `,w+1<c&&(h+=`
                   xC${w+1} = vec4(xTexelC${w}.zw, xTexelC${w+1}.zw);
                 `)));w<c&&(h+=`
             wTexel = getW(r, ${w}, d1, d2);
             dotProd += xC${w}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${w}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,w+1<c&&(h+=`
               wTexel = getW(r, ${w+1}, d1, d2);
               dotProd += xC${w+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${w+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}h+=`
     }
   `,h+=`
     }
   `,h+=`
     }
   `;let m="",g="";r&&(s?m=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:a?m=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:m=`vec4 activation(vec4 x) {
           ${r}
         }`,g="result = activation(result);");const y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${m}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${h}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${y}
         ${g}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GPe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=ba(this.outputShape.length);const{dataFormat:r}=n,s=Ba(),a=r==="channelsLast",i=a?1:2,o=a?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let u="";for(let c=0;c<=1;c++)for(let d=0;d<=1;d++)u+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${c};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${i}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${o}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${a}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $2(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function One({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:i=0,activation:o=null}){const l=t.shape,u=r.texData.get(t.dataId),c=n.inChannels,d=l[0]*l[1]*l[2],h=n.outChannels,m=n.dataFormat==="channelsLast",g=!1,y=!1;let b;const w=[];if(a!=null){const T=$2(a.shape,m);T!=null&&(a=ot({inputs:{x:a},backend:r,attrs:{shape:T}}),w.push(a))}if(s!=null){const T=$2(s.shape,m);T!=null&&(s=ot({inputs:{x:s},backend:r,attrs:{shape:T}}),w.push(s))}if(!((d===1||h===1)&&c>kne)&&u.isPacked&&m&&u.texture!=null&&l[2]%2!==0&&Xt(u.shape.slice(-3),l.slice(-3))){const T=l[0]*l[1]*(l[2]+1),N={dataId:t.dataId,shape:[1,T,n.inChannels],dtype:t.dtype},I=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,X(N2(u.shape,N.shape),()=>`packed reshape ${u.shape} to ${N.shape} isn't free`);const A=ot({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});w.push(A);const D=T2({a:N,b:A,backend:r,transposeA:g,transposeB:y,bias:s,activation:o,preluActivationWeights:a,leakyreluAlpha:i}),P=r.texData.get(D.dataId);X(P.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=I,P.shape=n.outShape,b=Oi({inputs:{x:D},backend:r}),b.shape=n.outShape,w.push(D)}else{const T=n.outHeight*n.outWidth,N=ot({inputs:{x:t},backend:r,attrs:{shape:m?[n.batchSize,T,n.inChannels]:[n.batchSize,n.inChannels,T]}}),I=ot({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),A=T2({a:m?N:I,b:m?I:N,transposeA:!m,transposeB:y,backend:r,bias:s,activation:o,preluActivationWeights:a,leakyreluAlpha:i});b=ot({inputs:{x:A},backend:r,attrs:{shape:n.outShape}}),w.push(N),w.push(I),w.push(A)}for(const T of w)r.disposeIntermediateTensorInfo(T);return b}function _ne({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:i=0,activation:o=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:d,outHeight:h,dataFormat:m}=n,g=m==="channelsLast",y=l*u*c,b=h*d,w=[n.batchSize,y,b],C=!0,k=!1,T=[];if(a!=null){const Y=$2(a.shape,g);Y!=null&&(a=ot({inputs:{x:a},backend:r,attrs:{shape:Y}}),T.push(a))}if(s!=null){const Y=$2(s.shape,g);Y!=null&&(s=ot({inputs:{x:s},backend:r,attrs:{shape:Y}}),T.push(s))}const N=ot({inputs:{x:e},backend:r,attrs:{shape:[1,y,ye(e.shape)/y]}});T.push(N);const I=new GPe(w,n),A=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],D=r.runWebGLProgram(I,[t],"float32",A),P=ot({inputs:{x:D},backend:r,attrs:{shape:w}});T.push(D),T.push(P);const R=s!=null,O=a!=null,F=o==="leakyrelu",z=o?Ub(o,!0):null,V=new Cne(g?P.shape:N.shape,g?N.shape:P.shape,g?[n.batchSize,b,n.outChannels]:[n.batchSize,n.outChannels,b],C,k,R,z,O,F),W=g?[P,N]:[N,P];if(s&&W.push(s),O&&W.push(a),F){const Y=r.makeTensorInfo([],"float32",Vd(i,"float32"));W.push(Y),T.push(Y)}const j=r.runWebGLProgram(V,W,"float32"),q=ot({inputs:{x:j},backend:r,attrs:{shape:n.outShape}});T.push(j);for(const Y of T)r.disposeIntermediateTensorInfo(Y);return q}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a}=e,{strides:i,pad:o,dataFormat:l,dilations:u,dimRoundingMode:c}=r,d=Pi(l),h=mr(s.shape,a.shape,i,u,o,c,!1,d);let m;if(h.filterHeight===1&&h.filterWidth===1&&h.dilationHeight===1&&h.dilationWidth===1&&h.strideHeight===1&&h.strideWidth===1&&(h.padInfo.type==="SAME"||h.padInfo.type==="VALID"))m=One({x:s,filter:a,convInfo:h,backend:n});else if(h.strideWidth<=2&&d==="channelsLast"&&ve().getBool("WEBGL_EXP_CONV")){const y=new Rne(h),b=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];m=n.runWebGLProgram(y,[s,a],"float32",b)}else if(ve().getBool("WEBGL_CONV_IM2COL"))m=_ne({x:s,filter:a,convInfo:h,backend:n});else{const y=new Ane(h);m=n.runWebGLProgram(y,[s,a],"float32")}const g=ot({inputs:{x:m},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(m),g}const qPe={kernelName:Yx,backendName:"webgl",kernelFunc:HPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let KPe=class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,a=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${i?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}},XPe=class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,a=e.strideWidth,i=e.dataFormat==="channelsLast",o=n-1-e.padInfo.top,l=r-1-e.padInfo.left,u=i?1:2,c=i?2:3,d=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${i}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}},YPe=class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,a=e.padInfo.front,i=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${a};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${i};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${o};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}},QPe=class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=n-1-e.padInfo.front,u=r-1-e.padInfo.top,c=s-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${a}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:a}=e,{strides:i,pad:o,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,d=Pi(l),h=mr(s.shape,c,i,1,o,u,!1,d),m=new KPe(h);return n.runWebGLProgram(m,[s,a],"float32")}const JPe={kernelName:ok,backendName:"webgl",kernelFunc:ZPe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eMe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=ba(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,s=n-1-e.padInfo.top,a=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tMe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:a}=e,{inputShape:i,strides:o,pad:l,dataFormat:u,dimRoundingMode:c}=r,d=Pi(u),h=mr(i,a.shape,o,1,l,c,!1,d);if(ve().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const m=[[h.strideHeight,h.strideWidth]],g=new eMe(h);return n.runWebGLProgram(g,[s,a],"float32",m)}else{const m=new XPe(h);return n.runWebGLProgram(m,[s,a],"float32")}}const nMe={kernelName:Qx,backendName:"webgl",kernelFunc:tMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a}=e,{strides:i,pad:o,dilations:l}=r,u=ql(s.shape,a.shape,i,l,o),c=new WPe(u);return n.runWebGLProgram(c,[s,a],"float32")}const sMe={kernelName:Zx,backendName:"webgl",kernelFunc:rMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:a}=e,{strides:i,pad:o,filterShape:l}=r,u=ql(s.shape,l,i,1,o),c=new YPe(u);return n.runWebGLProgram(c,[s,a],"float32")}const iMe={kernelName:lk,backendName:"webgl",kernelFunc:aMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oMe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:a}=e,{pad:i,strides:o,inputShape:l}=r,u=ql(l,a.shape,o,1,i),c=new QPe(u);return n.runWebGLProgram(c,[s,a],"float32")}const lMe={kernelName:uk,backendName:"webgl",kernelFunc:oMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uMe=Cy+`
  return cos(x);
`,cMe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Hh}
  return result;
`,dMe=Sn({opSnippet:uMe,packedOpSnippet:cMe}),fMe={kernelName:Tg,backendName:"webgl",kernelFunc:dMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hMe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,pMe=Sn({opSnippet:hMe}),mMe={kernelName:$g,backendName:"webgl",kernelFunc:pMe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let gMe=class{constructor(e,n,r,s,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,o,l,u]=e,[c]=n,[d,h]=r;this.outputShape=[c,d,h,u];const m=s==="bilinear"?1:0,[g,y]=[`${o-1}.0`,`${l-1}.0`],[b,w,C]=d>1?[`${(o-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${g} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${g}`],[k,T,N]=h>1?[`${(l-1)/(h-1)}`,"(x2-x1) * width_ratio",`x1*${y} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${y}`];this.userCode=`
      const float height_ratio = float(${b});
      const float width_ratio = float(${k});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${i}) {
          return;
        }

        float height_scale = ${w};
        float width_scale = ${T};

        float in_y = ${C};
        if( in_y < 0.0 || in_y > ${g} ) {
          setOutput(float(${a}));
          return;
        }
        float in_x = ${N};
        if( in_x < 0.0 || in_x > ${y} ) {
          setOutput(float(${a}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${m} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yMe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:a,boxInd:i}=e,{cropSize:o,method:l,extrapolationValue:u}=r,c=new gMe(s.shape,a.shape,o,l,u);return n.runWebGLProgram(c,[s,a,i],"float32")},bMe={kernelName:dk,backendName:"webgl",kernelFunc:yMe};var Wb;(function(t){t.Prod="*",t.Sum="+"})(Wb||(Wb={}));let qV=class{constructor(e,n,r,s){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const a=this.outputShape.length,i=this.op===Wb.Prod?"1.0":"0.0",o=r?i:`getX(${KV(a,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let u="",c="";r?(u=s?`end != ${l-1}`:"end != 0",c=s?"end + 1":"end - 1"):(u=s?`end + pow2 < ${l}`:"end >= pow2",c=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Xn(a)} coords = getOutputCoords();
        int end = ${XV(a,"coords",this.op)};
        float val = ${o};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${c};
          ${XV(a,"coords",this.op)} = idx;
          val ${this.op}= getX(${KV(a,"coords",this.op)});
        }
        setOutput(val);
      }
    `}};function KV(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function XV(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dne(t,e,n,r,s,a){const i=e.shape.length,o=Yn([r],i);let l=e;o!=null&&(l=Fa({inputs:{x:e},backend:n,attrs:{perm:o}}));const u=gr(1,i)[0];if(u!==i-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=l.shape[u];let d=Oi({inputs:{x:l},backend:n});for(let h=0;h<=Math.ceil(Math.log2(c))-1;h++){const m=new qV(t,l.shape,!1,a),g=[[h]],y=d;d=n.runWebGLProgram(m,[d],d.dtype,g),n.disposeIntermediateTensorInfo(y)}if(s){const h=new qV(t,l.shape,s,a),m=d;d=n.runWebGLProgram(h,[d],d.dtype),n.disposeIntermediateTensorInfo(m)}if(o!=null){const h=ju(o),m=Fa({inputs:{x:d},backend:n,attrs:{perm:h}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),m}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,exclusive:i,reverse:o}=r;return Dne(Wb.Prod,s,n,a,i,o)}const vMe={kernelName:ck,backendName:"webgl",kernelFunc:xMe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,exclusive:i,reverse:o}=r;return Dne(Wb.Sum,s,n,a,i,o)}const SMe={kernelName:Jx,backendName:"webgl",kernelFunc:wMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:a}=e,{size:i,binaryOutput:o}=r;if(s.shape.length===1){const l=n.readSync(s.dataId),u=n.readSync(a.dataId),c=pne(l,u,a.dtype,a.shape,i);return n.makeTensorInfo([i],a.dtype,c)}else if(s.shape.length===2){const l=n.bufferSync(s),u=n.bufferSync(a),c=$_e(l,u,i,o);return n.makeTensorInfo(c.shape,a.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const kMe={kernelName:fk,backendName:"webgl",kernelFunc:CMe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let NMe=class{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:a,dataFormat:i}=r,o=s.shape[0],l=i==="NHWC"?s.shape[1]:s.shape[2],u=i==="NHWC"?s.shape[2]:s.shape[3],c=i==="NHWC"?s.shape[3]:s.shape[1],d=l*a,h=u*a,m=c/(a*a),g=i==="NHWC"?[o,d,h,m]:[o,m,d,h],y=new NMe(g,a,i);return n.runWebGLProgram(y,[s],s.dtype)}const $Me={kernelName:hk,backendName:"webgl",kernelFunc:TMe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Pne=class{constructor(e,n=!1,r=null,s=!1,a=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ba(this.outputShape.length);const i=e.filterHeight,o=e.filterWidth,l=e.outChannels/e.inChannels;let u="",c="";r&&(s?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:u=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${i}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${o}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${c}
        setOutput(result);
      }
    `}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mne{constructor(e,n=!1,r=null,s=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ba(this.outputShape.length);const i=e.outChannels/e.inChannels,o=e.padInfo.left,l=e.strideWidth,u=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,h=d;let m=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let w=0;w<d;w++)m+=`
          vec4 xTexelC${w*2};
          int xTexelC${w*2}Ready;
          vec4 xTexelC${w*2+1};
          int xTexelC${w*2+1}Ready;
          vec4 xC${w};`;m+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let w=0;w<d;w++)m+=`
          xTexelC${w*2} = vec4(0.0);
          xTexelC${w*2}Ready = 0;
          xTexelC${w*2+1} = vec4(0.0);
          xTexelC${w*2+1}Ready = 0;
          xC${w} = vec4(0.0);`;m+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let w=0;w<(h+1)/2;w++){const C=w*2;if(m+=`
          xC = xCCorner + ${C*u};
          `,l===1){if(C<d&&(o%2===1?(m+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C}Ready == 0) {
                  xTexelC${C} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${C}.zw = vec2(0.0);
                  }
                  xTexelC${C}Ready = 1;
                }
              `,u===1&&C>0?m+=`
                xC${C} = vec4(xTexelC${C-2}.zw, xTexelC${C}.xy);
                `:m+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${C} = vec4(previous.zw, xTexelC${C}.xy);
                  } else {
                    xC${C} = vec4(0.0, 0.0, xTexelC${C}.xy);
                  }
                  `):m+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${C}Ready == 0) {
                  xTexelC${C} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${C}.zw = vec2(0.0);
                  }
                  xTexelC${C}Ready = 1;
                }

                xC${C} = xTexelC${C};
                `,C+1<d)){const k=o%2===0?zM(u):u;u%2===0&&o%2===1||u%2!==0&&o%2!==1?(m+=`
                  xCOffset = xC + imod(pads[1], 2) + ${k};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                    xTexelC${C+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${C+1}.zw = vec2(0.0);
                    }
                    xTexelC${C+1}Ready = 1;
                  }
                  `,u>1?m+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${C+1} = vec4(previous.zw, xTexelC${C+1}.xy);
                    } else {
                     xC${C+1} = vec4(0.0, 0.0, xTexelC${C+1}.xy);
                    }
                    `:m+=`
                    xC${C+1} = vec4(xTexelC${C}.zw, xTexelC${C+1}.xy);
                    `):k===1?m+=`
                    xC${C+1} = xTexelC${C};
                    `:m+=`
                    xCOffset = xC + ${k};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                      xTexelC${C+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${C+1}.zw = vec2(0.0);
                      }
                      xTexelC${C+1}Ready = 1;
                    }

                    xC${C+1} = xTexelC${C+1};
                    `}}else C<d&&(o%2===1?(m+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C}Ready == 0) {
                  xTexelC${C} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${C}.zw = vec2(0.0);
                  }
                  xTexelC${C}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${C+1}Ready == 0) {
                  xTexelC${C+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${C+1}.zw = vec2(0.0);
                  }
                  xTexelC${C+1}Ready = 1;
                }

                xC${C} = vec4(xTexelC${C}.zw, xTexelC${C+1}.zw);
              `,C+1<d&&(m+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${C+1} = vec4(xTexelC${C+1}.xy, final.xy);
                `)):(m+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${C}Ready == 0) {
                  xTexelC${C} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${C}.zw = vec2(0.0);
                  }
                  xTexelC${C}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${C+1}Ready == 0) {
                  xTexelC${C+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${C+1}.zw = vec2(0.);
                  }
                  xTexelC${C+1}Ready = 1;
                }

                xC${C} = vec4(
                  xTexelC${C}.xy, xTexelC${C+1}.xy);
              `,C+1<d&&(m+=`
                  xC${C+1} = vec4(xTexelC${C}.zw, xTexelC${C+1}.zw);
                `)));C<d&&(m+=`
            wTexel = getW(r, ${C}, d1, q);
            dotProd += xC${C} * vec4(wTexel.xz, wTexel.xz);
          `,C+1<d&&(m+=`
              wTexel = getW(r, ${C+1}, d1, q);
              dotProd += xC${C+1} * vec4(wTexel.xz, wTexel.xz);
            `))}m+=`
    }
  `,m+=`
      }
    `;let g="",y="";r&&(s?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:a?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:g=`vec4 activation(vec4 x) {
          ${r}
        }`,y="result = activation(result);");const b=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${g}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${i};
        int q = d2 - d1 * ${i};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${m}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${b}
        ${y}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a}=e,{strides:i,pad:o,dilations:l,dimRoundingMode:u}=r;let c=l;c==null&&(c=[1,1]),X(Es(i,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const d=mr(s.shape,a.shape,i,c,o,u,!0);let h;ve().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?h=new Mne(d):h=new Pne(d);const m=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(h,[s,a],"float32",m)}const EMe={kernelName:ev,backendName:"webgl",kernelFunc:IMe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let AMe=class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,a=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${i} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}},RMe=class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,a=e.strideWidth,i=n-1-e.padInfo.top,o=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:a}=e,{strides:i,dilations:o,pad:l,dimRoundingMode:u,filterShape:c}=r,d=mr(s.shape,c,i,o,l,u,!0),h=new AMe(d);return n.runWebGLProgram(h,[s,a],"float32")}const _Me={kernelName:pk,backendName:"webgl",kernelFunc:OMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DMe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:a}=e,{strides:i,dilations:o,pad:l,dimRoundingMode:u,inputShape:c}=r,d=mr(c,a.shape,i,o,l,u,!0),h=new RMe(d);return n.runWebGLProgram(h,[s,a],"float32")}const PMe={kernelName:mk,backendName:"webgl",kernelFunc:DMe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let MMe=class{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jMe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=[...r.shape,...r.shape],a=ye(r.shape),i=ot({inputs:{x:r},backend:n,attrs:{shape:[a]}}),o=new MMe(a),l=n.runWebGLProgram(o,[i],i.dtype),u=ot({inputs:{x:l},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),u}const LMe={kernelName:gk,backendName:"webgl",kernelFunc:jMe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let FMe=class{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:s,strideHeight:a,strideWidth:i,filterHeight:o,filterWidth:l,dilationHeight:u,dilationWidth:c}=e,{top:d,left:h}=s;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${i});
      const ivec2 pads = ivec2(${d}, ${h});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${o}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a}=e,{strides:i,pad:o,dilations:l}=r,u=Hd(s.shape,a.shape,i,o,"NHWC",l);let c;const d=new FMe(u);c=n.runWebGLProgram(d,[s,a],"float32");const h=ot({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),h}const BMe={kernelName:tv,backendName:"webgl",kernelFunc:zMe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UMe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,a=e,{allDims:i,summedDims:o,idDims:l}=jN(s,a.length);FN(i.length,l,a);const{path:u,steps:c}=zN(o,l),d=c.length;let h=null,m=i.length;const g=[];for(let y=0;y<d;++y){for(const b of c[y]){const{permutationIndices:w,expandDims:C}=LN(m,l[b]);let k;BN(w)?k=a[b]:(k=Fa({inputs:{x:a[b]},backend:n,attrs:{perm:w}}),g.push(k));const T=k.shape.slice();for(let N=0;N<C.length;++N)T.splice(C[N],0,1);Xt(k.shape,T)||(k=ot({inputs:{x:k},backend:n,attrs:{shape:T}}),g.push(k)),h===null?h=k:(h=D4({inputs:{a:k,b:h},backend:n}),g.push(h))}y<d-1&&(u[y]>=0&&(h=aT({inputs:{x:h},backend:n,attrs:{axis:u[y]-(i.length-m),keepDims:!1}}),g.push(h)),m--)}for(const y of g)y!==h&&n.disposeIntermediateTensorInfo(y);return h}const VMe={kernelName:yk,backendName:"webgl",kernelFunc:UMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WMe="return (x >= 0.0) ? x : (exp(x) - 1.0);",GMe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,HMe=Sn({opSnippet:WMe,packedOpSnippet:GMe}),qMe={kernelName:Eg,backendName:"webgl",kernelFunc:HMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KMe="return (b >= 0.0) ? a : a * (b + 1.0);",XMe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,YMe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:s}=e,a=ve().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Sy(XMe,r.shape,s.shape):new Th(KMe,r.shape,s.shape);return n.runWebGLProgram(a,[r,s],r.dtype)},QMe={kernelName:bk,backendName:"webgl",kernelFunc:YMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZMe=`
  return vec4(equal(a, b));
`,JMe="return float(a == b);",eje=na({opSnippet:JMe,packedOpSnippet:ZMe,dtype:"bool",cpuKernelImpl:O_e}),tje={kernelName:nv,backendName:"webgl",kernelFunc:eje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nje=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${RN};
  float a1 = ${ON};
  float a2 = ${_N};
  float a3 = ${DN};
  float a4 = ${PN};
  float a5 = ${MN};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,rje=Sn({opSnippet:nje}),sje={kernelName:Ag,backendName:"webgl",kernelFunc:rje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aje=Cy+`
  return exp(x);
`,ije=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,jne=Sn({opSnippet:aje,packedOpSnippet:ije,cpuKernelImpl:__e,dtype:"float32"}),oje={kernelName:Rg,backendName:"webgl",kernelFunc:jne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OD(t){const{inputs:e,attrs:n,backend:r}=t,{dim:s}=n,{input:a}=e,i=a.shape.length,o=a.shape.slice();let l=s;return s<0&&(X(-(i+1)<=s,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+s+1),o.splice(l,0,1),ot({inputs:{x:a},backend:r,attrs:{shape:o}})}const lje={kernelName:rv,backendName:"webgl",kernelFunc:OD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YV="return exp(x) - 1.0;",uje=Sn({opSnippet:YV,packedOpSnippet:YV,cpuKernelImpl:D_e}),cje={kernelName:Og,backendName:"webgl",kernelFunc:uje};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let QV=class{constructor(e,n,r){this.variableNames=["real","imag"];const s=n[1];this.outputShape=n;const a=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=r?`${s}.0`:"1.0";let o;if(e==="real")o="return real * expR - imag * expI;";else if(e==="imag")o="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${a};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${o}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${i};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lne(t,e,n){const r=n.texData.get(t.dataId),s=ye(t.shape),a=t.shape[t.shape.length-1],i=s/a,o=ot({inputs:{x:t},backend:n,attrs:{shape:[i,a]}}),l=o.shape,u=new QV("real",l,e),c=new QV("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],h=n.runWebGLProgram(u,d,"float32"),m=n.runWebGLProgram(c,d,"float32"),g=Qd({inputs:{real:h,imag:m},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m);const y=ot({inputs:{x:g},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(g),y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dje(t){const{inputs:e,backend:n}=t,{input:r}=e;return Lne(r,!1,n)}const fje={kernelName:xk,backendName:"webgl",kernelFunc:dje};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let hje=class{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c1(t){const{backend:e,attrs:n}=t,{shape:r,value:s}=n;let{dtype:a}=n;if(a=a||Dh(s),a==="string"){const i=Fr(a,ye(r));return i.fill(s),e.makeTensorInfo(r,a,i)}else{const i=new hje(r,s),o=[[s]];return e.runWebGLProgram(i,[],a,o)}}const pje={kernelName:vk,backendName:"webgl",kernelFunc:c1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let mje=class{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gje={kernelName:wk,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,s=new mje(n.shape);return r.runWebGLProgram(s,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZV="return floor(x);",yje=Sn({opSnippet:ZV,packedOpSnippet:ZV,cpuKernelImpl:P_e}),bje={kernelName:_g,backendName:"webgl",kernelFunc:yje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xje=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,vje=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,wje=na({opSnippet:xje,packedOpSnippet:vje,dtype:"int32"}),Sje={kernelName:Dg,backendName:"webgl",kernelFunc:wje};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Cje=class{constructor(e){this.variableNames=["A"];const n=Ba(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kje{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Ba(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nje={kernelName:n2,backendName:"webgl",kernelFunc:Tje};let Fp,JE=ve().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function Tje(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:s}=e;const{numChannels:a}=r,i=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[l,u]=i?[s.videoWidth,s.videoHeight]:[s.width,s.height],c=[u,l],d=[u,l,a];if(o||i){const y=ve().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Fp==null||y!==JE)&&(JE=y,Fp=document.createElement("canvas").getContext("2d",{willReadFrequently:JE})),Fp.canvas.width=l,Fp.canvas.height=u,Fp.drawImage(s,0,0,l,u),s=Fp.canvas}const h=n.makeTensorInfo(c,"int32");n.texData.get(h.dataId).usage=so.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),s);const m=ve().getBool("WEBGL_PACK")?new kje(d):new Cje(d),g=n.runWebGLProgram(m,[h],"int32");return n.disposeData(h.dataId),g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $je(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a,bias:i,preluActivationWeights:o}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h,activation:m,leakyreluAlpha:g}=r,y=Pi(c),b=mr(s.shape,a.shape,l,d,u,h,!1,y);let w;const C=[],k=i!=null,T=o!=null,N=m==="leakyrelu",I=()=>{const D=[s,a],P=(R,O)=>{if(O==="NCHW"&&R.shape.length===1&&R.shape[0]!==1){const F=ot({inputs:{x:R},backend:n,attrs:{shape:[R.shape[0],1,1]}});return C.push(F),F}return R};if(k&&D.push(P(i,c)),T&&D.push(P(o,c)),N){const R=n.makeTensorInfo([],"float32",Vd(g,"float32"));D.push(R),C.push(R)}return D};if(b.filterHeight===1&&b.filterWidth===1&&b.dilationHeight===1&&b.dilationWidth===1&&b.strideHeight===1&&b.strideWidth===1&&(b.padInfo.type==="SAME"||b.padInfo.type==="VALID"))w=One({x:s,filter:a,convInfo:b,backend:n,bias:i,activation:m,preluActivationWeights:o,leakyreluAlpha:g});else if(b.strideWidth<=2&&y==="channelsLast"&&ve().getBool("WEBGL_EXP_CONV")){const D=m?Ub(m,!0):null,P=new Rne(b,k,D,T,N),R=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],O=I();w=n.runWebGLProgram(P,O,"float32",R)}else if(ve().getBool("WEBGL_CONV_IM2COL"))w=_ne({x:s,filter:a,convInfo:b,backend:n,bias:i,activation:m,preluActivationWeights:o,leakyreluAlpha:g});else{const D=m?Ub(m,!1):null,P=new Ane(b,k,D,T,N),R=I();w=n.runWebGLProgram(P,R,"float32")}const A=ot({inputs:{x:w},backend:n,attrs:{shape:b.outShape}});return C.push(w),C.forEach(D=>n.disposeIntermediateTensorInfo(D)),A}const Ije={kernelName:$b,backendName:"webgl",kernelFunc:$je};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eje(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a,bias:i,preluActivationWeights:o}=e,{strides:l,pad:u,dilations:c,dimRoundingMode:d,activation:h,leakyreluAlpha:m}=r,g=[];let y=c;y==null&&(y=[1,1]),X(Es(l,y),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${y}'`);const b=mr(s.shape,a.shape,l,y,u,d,!0),w=ve().getBool("WEBGL_PACK_DEPTHWISECONV")&&b.strideWidth<=2&&b.outChannels/b.inChannels===1,C=h?Ub(h,w):null,k=[s,a],T=i!=null,N=o!=null,I=h==="leakyrelu";if(T&&k.push(i),N&&k.push(o),I){const R=n.makeTensorInfo([],"float32",Vd(m,"float32"));k.push(R),g.push(R)}let A;w?A=new Mne(b,T,C,N,I):A=new Pne(b,T,C,N,I);const D=[[b.padInfo.top,b.padInfo.left],[b.strideHeight,b.strideWidth],[b.dilationHeight,b.dilationWidth],[b.inHeight,b.inWidth]],P=n.runWebGLProgram(A,k,"float32",D);return g.forEach(R=>n.disposeIntermediateTensorInfo(R)),P}const Aje={kernelName:Ib,backendName:"webgl",kernelFunc:Eje};let Rje=class{constructor(e,n,r,s){this.sliceDim=e,this.strides=n,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=r;const a=Xn(r.length);let i=`
    int index;`;for(let o=0;o<this.sliceDim;o++)i+=`
          index = round(getIndices(coords[0], ${o}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[o]};
          flattenIndex += index * ${this.strides[o]};`;this.userCode=`
         void main() {
          ${a} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${i}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oje(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,a=s.shape,i=a[a.length-1],o=ye(r.shape),[l,u,c,d]=SN(r,s),h=ot({inputs:{x:s},backend:n,attrs:{shape:[u,i]}}),m=ot({inputs:{x:r},backend:n,attrs:{shape:[ye(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const w=n.readSync(s.dataId),C=n.bufferSync(r),k=M_e(w,C,r.dtype,u,i,c,d,r.shape,o);return n.makeTensorInfo(l,r.dtype,k.values)}const g=new Rje(i,d,[u,c],r.shape),y=n.runWebGLProgram(g,[m,h],m.dtype),b=ot({inputs:{x:y},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),b}const _je={kernelName:Sk,backendName:"webgl",kernelFunc:Oje};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Dje=class{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Xn(this.rank),s=Pje(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}};function Pje(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<t.length;s++)s===2?r.push("index"):r.push(`${n[s]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fne(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:a}=e,{axis:i,batchDims:o}=r,l=Gt(i,s.shape)[0];if(ve().get("DEBUG")){const C=n.readSync(a.dataId),k=s.shape[l];for(let T=0;T<C.length;++T){const N=C[T];X(N<=k-1&&N>=0,()=>`GatherV2: the index value ${N} is not in [0, ${k-1}]`)}}const u=VN(s,a,l,o),c=ye(a.shape),d=[],h=ot({inputs:{x:s},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),m=ot({inputs:{x:a},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});d.push(h),d.push(m);const g=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([s,a])||s.dtype==="string"){const C=n.bufferSync(m),k=n.bufferSync(h),T=j_e(k,C,g);return d.forEach(N=>n.disposeIntermediateTensorInfo(N)),n.makeTensorInfo(u.outputShape,T.dtype,T.values)}const y=new Dje(h.shape,g),b=n.runWebGLProgram(y,[h,m],h.dtype);d.push(b);const w=ot({inputs:{x:b},backend:n,attrs:{shape:u.outputShape}});return d.forEach(C=>n.disposeIntermediateTensorInfo(C)),w}const Mje={kernelName:av,backendName:"webgl",kernelFunc:Fne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jje="return float(a > b);",Lje=`
  return vec4(greaterThan(a, b));
`,Fje=na({opSnippet:jje,packedOpSnippet:Lje,cpuKernelImpl:L_e,dtype:"bool"}),zje={kernelName:iv,backendName:"webgl",kernelFunc:Fje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bje="return float(a >= b);",Uje=`
  return vec4(greaterThanEqual(a, b));
`,Vje=na({opSnippet:Bje,packedOpSnippet:Uje,dtype:"bool",cpuKernelImpl:F_e}),Wje={kernelName:Pg,backendName:"webgl",kernelFunc:Vje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gje(t){const{inputs:e,backend:n}=t,{input:r}=e;return Lne(r,!0,n)}const Hje={kernelName:Ck,backendName:"webgl",kernelFunc:Gje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qje="return float(!isnan(x) && !isinf(x));",Kje=Sn({opSnippet:qje,dtype:"bool"}),Xje={kernelName:jg,backendName:"webgl",kernelFunc:Kje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yje="return float(isinf(x));",Qje=Sn({opSnippet:Yje,dtype:"bool"}),Zje={kernelName:Lg,backendName:"webgl",kernelFunc:Qje};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jje="return float(isnan(x));",e4e=Sn({opSnippet:Jje,dtype:"bool"}),t4e={kernelName:Fg,backendName:"webgl",kernelFunc:e4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n4e="return float(a < b);",r4e=`
  return vec4(lessThan(a, b));
`,s4e=na({opSnippet:n4e,packedOpSnippet:r4e,cpuKernelImpl:z_e,dtype:"bool"}),a4e={kernelName:lv,backendName:"webgl",kernelFunc:s4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i4e="return float(a <= b);",o4e=`
  return vec4(lessThanEqual(a, b));
`,l4e=na({opSnippet:i4e,packedOpSnippet:o4e,cpuKernelImpl:B_e,dtype:"bool"}),u4e={kernelName:uv,backendName:"webgl",kernelFunc:l4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c4e(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:a}=n,i=U_e(r,s,a);return e.makeTensorInfo([i.length],"float32",i)}const d4e={kernelName:Nk,backendName:"webgl",kernelFunc:c4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f4e=Cy+`
  return x < 0.0 ? 0./0. : log(x);
`,h4e=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,p4e=Sn({opSnippet:f4e,packedOpSnippet:h4e,cpuKernelImpl:V_e}),m4e={kernelName:zg,backendName:"webgl",kernelFunc:p4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g4e=Cy+`
  return log(1.0 + x);
`,y4e=Sn({opSnippet:g4e}),b4e={kernelName:Bg,backendName:"webgl",kernelFunc:y4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x4e="return float(a >= 1.0 && b >= 1.0);",v4e=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,w4e=na({opSnippet:x4e,packedOpSnippet:v4e,dtype:"bool"}),S4e={kernelName:cv,backendName:"webgl",kernelFunc:w4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C4e="return float(!(x >= 1.0));",k4e=Sn({opSnippet:C4e}),N4e={kernelName:dv,backendName:"webgl",kernelFunc:k4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T4e="return float(a >= 1.0 || b >= 1.0);",$4e=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,I4e=na({opSnippet:T4e,packedOpSnippet:$4e,dtype:"bool"}),E4e={kernelName:fv,backendName:"webgl",kernelFunc:I4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let A4e=class{constructor(e,n,r,s,a){this.variableNames=["x"],this.outputShape=[];const i=n,o=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${s}) * sum`;a===.5?l=`inversesqrt(${u})`:a===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${i}; j <= ${i}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${o}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R4e{constructor(e,n,r,s,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=n,o=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${s}) * sum`;a===.5?l=`inversesqrt(${u})`:a===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${i};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${i}; j <= ${i}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O4e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:a,bias:i,alpha:o,beta:l}=r,u=ve().getBool("WEBGL_PACK_NORMALIZATION")?new R4e(s.shape,a,i,o,l):new A4e(s.shape,a,i,o,l);return n.runWebGLProgram(u,[s],s.dtype)},_4e={kernelName:hv,backendName:"webgl",kernelFunc:O4e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let D4e=class{constructor(e,n,r,s,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=s,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${a})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${a});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P4e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s,y:a,dy:i}=e,{depthRadius:o,bias:l,alpha:u,beta:c}=r,d=new D4e(s.shape,o,l,u,c);return n.runWebGLProgram(d,[s,a,i],s.dtype)},M4e={kernelName:Tk,backendName:"webgl",kernelFunc:P4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j4e(t,e,n,r){const s=ye(e),i=ye(t.shape)/s,o=ot({inputs:{x:t},attrs:{shape:[i,s]},backend:r}),l=qh(o,t.dtype,"max",r),u=ot({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zne(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:a,keepDims:i}=r,o=s.shape.length,l=Gt(a,s.shape);let u=l;const c=Yn(u,o),d=c!=null,h=n.shouldExecuteOnCPU([s]);let m=s;if(d){if(h){const k=n.texData.get(m.dataId).values,T=new Array(o);for(let A=0;A<T.length;A++)T[A]=s.shape[c[A]];const N=O4(k,s.shape,s.dtype,c,T);m=n.makeTensorInfo(T,s.dtype);const I=n.texData.get(m.dataId);I.values=N}else m=sT(s,c,n);u=gr(u.length,o)}hs("max",u,o);const[g,y]=ns(m.shape,u);let b=g;i&&(b=Ur(g,l));let w;if(h){const k=n.texData.get(m.dataId).values,T=W_e(k,ye(y),b,s.dtype);w=n.makeTensorInfo(b,s.dtype);const N=n.texData.get(w.dataId);N.values=T}else w=j4e(m,y,b,n);return d&&n.disposeIntermediateTensorInfo(m),w}const L4e={kernelName:pv,backendName:"webgl",kernelFunc:zne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F4e=_4+`
  return max(a, b);
`,z4e=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Hh+`
  return result;
`,B4e=na({opSnippet:F4e,packedOpSnippet:z4e,cpuKernelImpl:G_e}),U4e={kernelName:Ug,backendName:"webgl",kernelFunc:B4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;o1(s,"maxPool");const{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=r,u=1;X(Es(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=ga(s.shape,a,i,u,o,l);if(c.filterWidth===1&&c.filterHeight===1&&Xt(c.inShape,c.outShape))return Oi({inputs:{x:s},backend:n});const d=new Vb(c,"max",!1);return n.runWebGLProgram(d,[s],s.dtype)}const W4e={kernelName:mv,backendName:"webgl",kernelFunc:V4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:a,strides:i,pad:o,dataFormat:l,dimRoundingMode:u}=r,c=[1,1,1],d=go(s.shape,a,i,c,o,u,l),h=new P4(d,"max",!1);return n.runWebGLProgram(h,[s],s.dtype)}const H4e={kernelName:gv,backendName:"webgl",kernelFunc:G4e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let q4e=class{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,s=e.dilationHeight,a=e.effectiveFilterHeight,i=e.effectiveFilterWidth,o=a-1-e.padInfo.top,l=i-1-e.padInfo.left,u=a*i-1;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${a};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${i} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}},K4e=class{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,a=e.dilationDepth,i=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=l-1-e.padInfo.front,h=u-1-e.padInfo.top,m=c-1-e.padInfo.left,g=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${h}, ${m});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${a}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${i}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${o}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${g} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X4e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:a}=e,i=a,{filterSize:o,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],h=go(i.shape,o,l,d,u,c),m=new P4(h,"max",!0),g=n.runWebGLProgram(m,[i],i.dtype),y=new K4e(h),b=n.runWebGLProgram(y,[s,g],i.dtype);return n.disposeIntermediateTensorInfo(g),b}const Y4e={kernelName:Ik,backendName:"webgl",kernelFunc:X4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q4e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:a,output:i}=e,o=a;o1([a,i],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,h=ga(o.shape,l,u,1,c,d),m=!0,g=new Vb(h,"max",m),y=n.runWebGLProgram(g,[o],o.dtype),b=new q4e(h),w=n.runWebGLProgram(b,[s,y],o.dtype);return n.disposeIntermediateTensorInfo(y),w}const Z4e={kernelName:$k,backendName:"webgl",kernelFunc:Q4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J4e(t,e,n,r){let s=new Vb(n,"max",!1);const a=r.runWebGLProgram(s,[t],"float32");s=new Vb(n,"max",!0,!0,e);const i=r.runWebGLProgram(s,[t],"float32");return[a,i]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eLe={kernelName:Ek,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:a,pad:i,includeBatchInIndex:o}=e,l=n;X(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const u=[1,1];X(Es(a,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const c=ga(r.shape,s,a,u,i),[d,h]=J4e(r,o,c,l);return[d,h]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tLe(t,e,n,r){const s=ye(e),i=ye(t.shape)/s,o=ot({inputs:{x:t},attrs:{shape:[i,s]},backend:r}),l=qh(o,"float32","mean",r),u=ot({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nLe={kernelName:yv,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:s,axis:a}=e,i=n,o=r.shape.length,l=Gt(a,r.shape);let u=l;const c=Yn(u,o),d=c!=null,h=i.shouldExecuteOnCPU([r]),m=[];let g=r;if(d){if(h){const T=i.texData.get(g.dataId).values,N=new Array(o);for(let D=0;D<N.length;D++)N[D]=r.shape[c[D]];const I=O4(T,r.shape,r.dtype,c,N);g=i.makeTensorInfo(N,r.dtype);const A=i.texData.get(g.dataId);A.values=I}else g=sT(r,c,i);m.push(g),u=gr(u.length,o)}hs("sum",u,o);const[y,b]=ns(g.shape,u);let w=y;s&&(w=Ur(y,l));const C=tLe(g,b,w,i);for(const k of m)i.disposeIntermediateTensorInfo(k);return C}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r,o=s.shape.length,l=Gt(a,s.shape);let u=l;const c=Yn(u,o);let d=s;c!=null&&(d=Fa({inputs:{x:s},backend:n,attrs:{perm:c}}),u=gr(u.length,s.shape.length)),hs("min",u,o);const[h,m]=ns(d.shape,u),g=ye(m),y=ot({inputs:{x:d},backend:n,attrs:{shape:[-1,g]}}),b=qh(y,y.dtype,"min",n);let w;if(i){const C=Ur(h,l);w=ot({inputs:{x:b},backend:n,attrs:{shape:C}})}else w=ot({inputs:{x:b},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),c!=null&&n.disposeIntermediateTensorInfo(d),w}const sLe={kernelName:bv,backendName:"webgl",kernelFunc:rLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aLe=_4+`
  return min(a, b);
`,iLe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Hh+`
  return result;
`,oLe=na({opSnippet:aLe,packedOpSnippet:iLe,cpuKernelImpl:H_e}),lLe={kernelName:Vg,backendName:"webgl",kernelFunc:oLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let uLe=class{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,d)=>c[0]+e[d]+c[1]);const s=e.length,a=Xn(s),i=n.map(c=>c[0]).join(","),o=n.map((c,d)=>c[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),u=r==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${i};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${i});
      ${a} end = ${a}(${o});

      void main() {
        ${a} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${a} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cLe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((g,y)=>g[0]+e[y]+g[1]);const s=e.length,a=Xn(s),i=n.map(g=>g[0]).join(","),o=n.map((g,y)=>g[0]+e[y]).join(","),l=Ma("rc",s),u=Ma("source",s),c=`${l[s-1]} < ${this.outputShape[s-1]}`,d=s===1?"source":`vec2(${u.slice(-2).join()})`,h=r==="reflect"?0:1;let m="";if(s===1){const g=`
        ${a} source = rc;
        if (source < start) {
          source = start * 2 - source - ${h};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${h};
        }
        source -= start;
      `;m=`
        ${a} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[s-1]} += 1;
        if(${c}) {
          ${g}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
      `}else{const g=`
        ${a} source = rc;
        ${a} lt = ${a}(lessThan(source, start));
        ${a} gte = ${a}(greaterThanEqual(source, end));
        ${a} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${h}) +
                gte * ((end - 1) * 2 - source + ${h});
        source -= start;
      `;m=`
        ${a} rc = outputLoc;
        ${g}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[s-1]} += 1;
        if(${c}) {
          ${g}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
        rc = outputLoc;
        ${l[s-2]} += 1;
        if(${l[s-2]} < ${this.outputShape[s-2]}) {
          ${g}
          result[2] = getChannel(getX(${u.join()}), ${d});
          ${l[s-1]} += 1;
          if(${c}) {
            ${g}
            result[3] = getChannel(getX(${u.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${a} start = ${a}(${i});
      const ${a} end = ${a}(${o});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dLe=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:s,mode:a}=n,i=ve().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new cLe(r.shape,s,a):new uLe(r.shape,s,a);return e.runWebGLProgram(i,[r],r.dtype)},fLe={kernelName:xv,backendName:"webgl",kernelFunc:dLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hLe=`if (b == 0.0) return NAN;
  return mod(a, b);`,pLe=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Hh+`
  return result;
`,mLe=na({opSnippet:hLe,packedOpSnippet:pLe}),gLe={kernelName:Wg,backendName:"webgl",kernelFunc:mLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let yLe=class{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bLe=`
if (a == b) {
  return 1.0;
};
return a / b;`,xLe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,Bne=na({opSnippet:bLe,packedOpSnippet:xLe,checkOutOfBounds:!0}),vLe={kernelName:Ig,backendName:"webgl",kernelFunc:Bne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JV="return a - b;",Une=na({opSnippet:JV,packedOpSnippet:JV,supportsComplex:!0,cpuKernelImpl:h3e}),wLe={kernelName:iy,backendName:"webgl",kernelFunc:Une};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vne(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:a}=r,i=Gt([a],s.shape),o=zne({inputs:{x:s},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),l=Ur(o.shape,i),u=ot({inputs:{x:o},backend:n,attrs:{shape:l}}),c=Une({inputs:{a:s,b:u},backend:n}),d=jne({inputs:{x:c},backend:n}),h=aT({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:!1}}),m=ot({inputs:{x:h},backend:n,attrs:{shape:l}}),g=Bne({inputs:{a:d,b:m},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}const SLe={kernelName:jv,backendName:"webgl",kernelFunc:Vne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CLe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:a,seed:i,normalized:o}=r,l=o?s:Vne({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),u=l.shape[0],c=l.shape[1],d=new yLe(u,c,a),h=[[i]],m=n.runWebGLProgram(d,[l],"int32",h);return o||n.disposeIntermediateTensorInfo(l),m}const kLe={kernelName:Ak,backendName:"webgl",kernelFunc:CLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NLe=il+`
  return -x;
`,TLe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function $Le(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const a=n.texData.get(r.dataId),[i,o]=K_e(a.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,i)}let s;return ve().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new xd(r.shape,TLe):s=new gu(r.shape,NLe),n.runWebGLProgram(s,[r],r.dtype)}const ILe={kernelName:vv,backendName:"webgl",kernelFunc:$Le};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ELe=vN;function ALe(t){to("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l}=r,u=n.readSync(s.dataId),c=n.readSync(a.dataId),{selectedIndices:d}=ELe(u,c,i,o,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const RLe={kernelName:Rk,backendName:"webgl",kernelFunc:ALe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OLe=Fj;function _Le(t){to("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(s.dataId),d=n.readSync(a.dataId),{selectedIndices:h,validOutputs:m}=OLe(c,d,i,o,l,u);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([m]))]}const DLe={kernelName:HM,backendName:"webgl",kernelFunc:_Le};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PLe=wN;function MLe(t){to("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(s.dataId),d=n.readSync(a.dataId),h=i,m=o,g=l,y=u,{selectedIndices:b,selectedScores:w}=PLe(c,d,h,m,g,y);return[n.makeTensorInfo([b.length],"int32",new Int32Array(b)),n.makeTensorInfo([w.length],"float32",new Float32Array(w))]}const jLe={kernelName:Ok,backendName:"webgl",kernelFunc:MLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let LLe=class{constructor(e,n,r,s){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${r}),
                      float(index == coords.y)));
      }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FLe=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:a,depth:i,onValue:o,offValue:l}=r,u=ye(s.shape),c=new LLe(u,i,o,l),d=ot({inputs:{x:s},backend:n,attrs:{shape:[u]}}),h=n.runWebGLProgram(c,[d],a);n.disposeIntermediateTensorInfo(d);const m=[...s.shape,i],g=ot({inputs:{x:h},backend:n,attrs:{shape:m}});return n.disposeIntermediateTensorInfo(h),g},zLe={kernelName:Cv,backendName:"webgl",kernelFunc:FLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I2(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const s=u1({inputs:{input:r},backend:n}),a=I2({inputs:{x:s},backend:n}),i=iT({inputs:{input:r},backend:n}),o=I2({inputs:{x:i},backend:n}),l=Qd({inputs:{real:a,imag:o},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),l}else return c1({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const BLe={kernelName:zv,backendName:"webgl",kernelFunc:I2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wne(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=u1({inputs:{input:r},backend:n}),a=Wne({inputs:{x:s},backend:n}),i=iT({inputs:{input:r},backend:n}),o=I2({inputs:{x:i},backend:n}),l=Qd({inputs:{real:a,imag:o},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),l}else return c1({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const ULe={kernelName:Sv,backendName:"webgl",kernelFunc:Wne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VLe(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return OD({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const a=e[0].shape,i=e[0].dtype;e.forEach(c=>{di(a,c.shape,"All tensors passed to stack must have matching shapes"),X(i===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(c=>{const d=OD({inputs:{input:c},backend:n,attrs:{dim:s}});return o.push(d),d}),u=Ene({inputs:l,backend:n,attrs:{axis:s}});return o.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const WLe={kernelName:kv,backendName:"webgl",kernelFunc:VLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let GLe=class{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,c)=>u[0]+e[c]+u[1]);const s=e.length,a=Xn(s),i=n.map(u=>u[0]).join(","),o=n.map((u,c)=>u[0]+e[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${i};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${i});
      ${a} end = ${a}(${o});

      void main() {
        ${a} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${a} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HLe{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((y,b)=>y[0]+e[b]+y[1]);const s=e.length,a=Xn(s),i=n.map(y=>y[0]).join(","),o=n.map((y,b)=>y[0]+e[b]).join(","),l=Ma("rc",s),u=Ma("source",s),c=`${l[s-1]} < ${this.outputShape[s-1]}`,d=s===1?"source":`vec2(${u.slice(-2).join()})`,h=[`${a} rc = outputLoc;`,`${l[s-1]} += 1;
       if(${c}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${l[s-2]} += 1;
       if(${l[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${l[s-1]} += 1;
         if(${c}) {`],m=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let g="";for(let y=0,b=s===1?2:4;y<b;y++)g+=`
        ${h[y]}
        if (${m}) {
          result[${y}] = float(value);
        } else {
          ${a} source = rc - start;
          result[${y}] = getChannel(getX(${u.join()}), ${d});
        }
      `;g+=s===1?"} ":"}}",this.userCode=`
      const ${a} start = ${a}(${i});
      const ${a} end = ${a}(${o});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gne=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:a,constantValue:i}=r;if(ye(s.shape)===0){const u=a.map((c,d)=>c[0]+s.shape[d]+c[1]);return c1({backend:n,attrs:{shape:u,value:i,dtype:s.dtype}})}const o=ve().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new HLe(s.shape,a,i):new GLe(s.shape,a,i),l=[[i]];return n.runWebGLProgram(o,[s],s.dtype,l)},qLe={kernelName:Nv,backendName:"webgl",kernelFunc:Gne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KLe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,XLe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Hh+`
  return result;
`,YLe=na({opSnippet:KLe,packedOpSnippet:XLe}),QLe={kernelName:Hg,backendName:"webgl",kernelFunc:YLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r,o=s.shape.length,l=[],u=Gt(a,s.shape);let c=u;const d=Yn(c,o);let h=s;d!=null&&(h=Fa({inputs:{x:s},backend:n,attrs:{perm:d}}),c=gr(c.length,o),l.push(h)),hs("prod",c,o);let m;if(n.shouldExecuteOnCPU([h])){const g=n.texData.get(h.dataId).values,{outVals:y,outShape:b,outDtype:w}=Y_e(h.shape,h.dtype,g,c);m=n.makeTensorInfo(b,w,y)}else{const[g,y]=ns(h.shape,c),b=ye(y),w=ot({inputs:{x:h},backend:n,attrs:{shape:[-1,b]}}),C=Qk(s.dtype),k=qh(w,C,"prod",n);m=ot({inputs:{x:k},backend:n,attrs:{shape:g}}),l.push(w),l.push(k)}if(i){l.push(m);const g=Ur(m.shape,u);m=ot({inputs:{x:m},backend:n,attrs:{shape:g}})}return l.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const JLe={kernelName:$v,backendName:"webgl",kernelFunc:ZLe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eFe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:a,indices:i}=e,{outputRaggedRank:o}=r,l=s.map(w=>n.readSync(w.dataId)),u=s.map(w=>w.shape),c=n.readSync(a.dataId),d=n.readSync(i.dataId),[h,m,g]=Q_e(l,u,c,a.shape,a.dtype,d,i.shape,o),y=h.map(w=>n.makeTensorInfo([w.length],"int32",w)),b=n.makeTensorInfo(g,a.dtype,m);return y.concat([b])}const tFe={kernelName:qM,backendName:"webgl",kernelFunc:eFe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nFe(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:a}=e,i=n.readSync(r.dataId),o=n.readSync(s.dataId),l=n.readSync(a.dataId),[u,c]=Z_e(i,r.shape,r.dtype,o,s.shape,l,a.shape),d=n.makeTensorInfo([u.length],"int32",u),h=n.makeTensorInfo([c.length],r.dtype,c);return[d,h]}const rFe={kernelName:KM,backendName:"webgl",kernelFunc:nFe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sFe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:a,defaultValue:i,rowPartitionTensors:o}=e,{rowPartitionTypes:l}=r,u=n.readSync(s.dataId),c=n.readSync(a.dataId),d=n.readSync(i.dataId),h=o.map(b=>n.readSync(b.dataId)),m=o.map(b=>b.shape),[g,y]=J_e(u,s.shape,c,a.shape,a.dtype,d,i.shape,h,m,l);return n.makeTensorInfo(g,a.dtype,y)}const aFe={kernelName:XM,backendName:"webgl",kernelFunc:sFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hne=t=>{const{backend:e,attrs:n}=t,{start:r,stop:s,step:a,dtype:i}=n,o=e3e(r,s,a,i);return e.makeTensorInfo([o.length],i,o)},iFe={kernelName:_k,backendName:"webgl",kernelFunc:Hne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oFe="return 1.0 / x;",lFe=Sn({opSnippet:oFe}),uFe={kernelName:qg,backendName:"webgl",kernelFunc:lFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cFe=il+`
  return (x < 0.0) ? 0.0 : x;
`,dFe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,fFe=Sn({opSnippet:cFe,packedOpSnippet:dFe}),hFe={kernelName:Kg,backendName:"webgl",kernelFunc:fFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pFe=il+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,mFe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,gFe=Sn({opSnippet:pFe,packedOpSnippet:mFe}),yFe={kernelName:Xg,backendName:"webgl",kernelFunc:gFe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let bFe=class{constructor(e,n,r,s,a){this.variableNames=["A"],this.outputShape=[];const[i,o,l,u]=e;this.outputShape=[i,n,r,u];const c=[s&&n>1?o-1:o,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r];let h;a?h="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xFe{constructor(e,n,r,s,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,o,l,u]=e;this.outputShape=[i,n,r,u];const c=[s&&n>1?o-1:o,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r];let h;a?h="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vFe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:a,halfPixelCenters:i,size:o}=r,[l,u]=o,c=ve().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new xFe(s.shape,l,u,a,i):new bFe(s.shape,l,u,a,i);return n.runWebGLProgram(c,[s],"float32")}const wFe={kernelName:Av,backendName:"webgl",kernelFunc:vFe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let SFe=class{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,a]=n,[,i,o]=e,l=[r&&i>1?s-1:s,r&&o>1?a-1:a],u=[r&&i>1?i-1:i,r&&o>1?o-1:o],c=l[0]/u[0],d=l[1]/u[1],h=1/c,m=1/d,g=Math.ceil(h)*2+2,y=Math.ceil(m)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${m});

        const int winHeight = int(${g});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${a-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CFe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:a}=e,{alignCorners:i}=r,o=new SFe(a.shape,s.shape,i);return n.runWebGLProgram(o,[a],a.dtype)}const kFe={kernelName:Mk,backendName:"webgl",kernelFunc:CFe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let NFe=class{constructor(e,n,r,s,a){this.variableNames=["A"],this.outputShape=[];const[i,o,l,u]=e;this.outputShape=[i,n,r,u];const c=[s&&n>1?o-1:o,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r],h=s?"0.5":"0.0";let m;a?m="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":m="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${m};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TFe{constructor(e,n,r,s,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,o,l,u]=e;this.outputShape=[i,n,r,u];const c=[s&&n>1?o-1:o,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r],h=s?"0.5":"0.0";let m;a?m="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":m="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${m};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Fe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:a,halfPixelCenters:i,size:o}=r,[l,u]=o,c=ve().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new TFe(s.shape,l,u,a,i):new NFe(s.shape,l,u,a,i);return n.runWebGLProgram(c,[s],s.dtype)}const IFe={kernelName:Ev,backendName:"webgl",kernelFunc:$Fe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let EFe=class{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,a]=n,[,i,o]=e,l=[r&&i>1?s-1:s,r&&o>1?a-1:a],u=[r&&i>1?i-1:i,r&&o>1?o-1:o],c=l[0]/u[0],d=l[1]/u[1],h=1/c,m=1/d,g=Math.ceil(h)*2+2,y=Math.ceil(m)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${m});

        const int winHeight = int(${g});
        const int winWidth = int(${y});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${a}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AFe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:a}=e,{alignCorners:i}=r,o=new EFe(a.shape,s.shape,i);return n.runWebGLProgram(o,[a],a.dtype)}const RFe={kernelName:Pk,backendName:"webgl",kernelFunc:AFe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let OFe=class{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const s=o=>n.indexOf(o)!==-1&&e[o]!==1?`${e[o]} - coords[${o}] - 1`:`coords[${o}]`,a=e.map((o,l)=>s(l)).join(","),i=Xn(r);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Fe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const s=Ma("rc",r),a=`${s[r-1]} + 1 < ${this.outputShape[r-1]}`,i=`${s[r-2]} + 1 < ${this.outputShape[r-2]}`,o=Xn(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${a}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${o} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(s.slice())};
          if(${a}){
            result.g = ${u(s.slice())};
          }
          if(${i}) {
            result.b = ${c(s.slice())};
            if(${a}) {
              result.a = ${d(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(g){return h(g)}function u(g){return g[r-1]="("+g[r-1]+" + 1)",h(g)}function c(g){return g[r-2]="("+g[r-2]+" + 1)",h(g)}function d(g){return g[r-1]="("+g[r-1]+" + 1)",g[r-2]="("+g[r-2]+" + 1)",h(g)}function h(g){const y=e.map((C,k)=>m(k,g)),b=y.join(","),w=y.slice(-2).join(",");return`getChannel(getX(${b}), vec2(${w}))`}function m(g,y){return n.indexOf(g)!==-1&&e[g]!==1?`${e[g]} - ${y[g]} - 1`:`${y[g]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DFe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:a}=r,i=s.shape.length,o=Gt(a,s.shape);if(i===0)return Oi({inputs:{x:s},backend:n});const l=ve().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new _Fe(s.shape,o):new OFe(s.shape,o);return n.runWebGLProgram(l,[s],s.dtype)}const PFe={kernelName:Rv,backendName:"webgl",kernelFunc:DFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let MFe=class{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],s=e[2];this.outputShape=e;let a="";typeof n=="number"?a=`float outputValue = ${n.toFixed(2)};`:a=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${a}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jFe={kernelName:Xk,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:a,center:i}=e,o=n,l=new MFe(r.shape,a),[u,c]=IN(i,r.shape[1],r.shape[2]),d=[[u,c,Math.sin(s),Math.cos(s)]];return o.runWebGLProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LFe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,FFe=Sn({opSnippet:LFe}),zFe={kernelName:Yg,backendName:"webgl",kernelFunc:FFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BFe="return inversesqrt(x);",UFe=Sn({opSnippet:BFe,cpuKernelImpl:t3e}),VFe={kernelName:Qg,backendName:"webgl",kernelFunc:UFe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let M4=class{constructor(e,n,r,s,a,i,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const u=Xn(a.length),c=Xn(i.length);let d="";r===1?d="i":r===2&&(d="i, j");const h=`getIndices(${d})`;let m="";s===1?m="i":s===2&&(m="i, coords[1]");const g=`getUpdates(${m})`;let y="";l&&(y="coords[0], coords[1]");const b=`getDefaultValue(${y})`,w=n>1?"strides[j]":"strides";this.userCode=`
        ${u} strides = ${u}(${a});

        void main() {
          ${c} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${h});
              flattenedIndex += index * ${w};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${g};
              found = true;
            }
          }
          setOutput(mix(${b}, sum, float(found)));
        }
      `}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WFe{constructor(e,n,r,s,a,i,o=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;const u=Xn(a.length),c=Xn(i.length);let d="";r===1?d="i":r===2&&(d="i, j");const h=`getIndices(${d})`;let m="";s===1?m="i":s===2&&(m="i, coords[1]");const g=`getUpdates(${m})`;let y="";l&&(y="coords[0], coords[1]");const b=`getDefaultValue(${y})`,w=n>1?"strides[j]":"strides",C=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${u} strides = ${u}(${a});

        void main() {
          ${c} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${h});
              flattenedIndex += index.xz * ${w};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${C};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${g};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${b}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GFe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:a}=e,{shape:i}=r,{sliceRank:o,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Fu(a,s,i),h=[d/u,u];if(d===0)return n.makeTensorInfo(i,s.dtype);const m=ot({inputs:{x:s},backend:n,attrs:{shape:[l,o]}}),g=ot({inputs:{x:a},backend:n,attrs:{shape:[l,u]}}),y=n.makeTensorInfo([],"float32",new Float32Array([0]));let b;ve().getBool("WEBGL_PACK")?b=new WFe(l,o,m.shape.length,g.shape.length,c,h):b=new M4(l,o,m.shape.length,g.shape.length,c,h);const w=n.runWebGLProgram(b,[g,m,y],g.dtype),C=ot({inputs:{x:w},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(y),C}const HFe={kernelName:jk,backendName:"webgl",kernelFunc:GFe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let qFe=class{constructor(e,n,r,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const a="while (left < right) {",i=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,o=ve().getNumber("WEBGL_VERSION")===2?a:i,l=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${o}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KFe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:a}=e,{side:i}=r,o=new qFe(s.shape[0],s.shape[1],a.shape[1],i),l=[[s.shape[1]]];return n.runWebGLProgram(o,[s,a],"int32",l)}const XFe={kernelName:Fk,backendName:"webgl",kernelFunc:KFe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let YFe=class{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let s,a;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)a="resRC",s="resRC";else{const o=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${o[c]}`),c<e&&l.push(`${o[c]}`);s=l.join(),a=u.join()}const i=Xn(r);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${a}));
        } else {
          setOutput(getB(${a}));
        }
      }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QFe(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:a}=e,i=new YFe(r.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(i,[r,s,a],zs(s.dtype,a.dtype))}const ZFe={kernelName:Ov,backendName:"webgl",kernelFunc:QFe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JFe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${Xv};
  float scale = ${Yv};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,eze=Sn({opSnippet:JFe}),tze={kernelName:Zg,backendName:"webgl",kernelFunc:eze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nze=Cy+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,rze=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,sze=Sn({opSnippet:nze,packedOpSnippet:rze,cpuKernelImpl:r3e}),aze={kernelName:ny,backendName:"webgl",kernelFunc:sze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ize=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,oze=Sn({opSnippet:ize}),lze={kernelName:ty,backendName:"webgl",kernelFunc:oze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uze=Cy+`
  return sin(x);
`,cze=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Hh}
  return result;
`,dze=Sn({opSnippet:uze,packedOpSnippet:cze}),fze={kernelName:Jg,backendName:"webgl",kernelFunc:dze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hze=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,pze=Sn({opSnippet:hze}),mze={kernelName:ey,backendName:"webgl",kernelFunc:pze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gze=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,yze=Sn({opSnippet:gze}),bze={kernelName:ry,backendName:"webgl",kernelFunc:yze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xze=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:a,paddings:i}=r;X(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const o=a.reduce((w,C)=>w*C),l=[[0,0]];l.push(...i);for(let w=1+a.length;w<s.shape.length;++w)l.push([0,0]);const u=[],c=Gne({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),d=Fh(c.shape,a,o,!1),h=zh(d.length,a.length,!1),m=Bh(c.shape,a,o,!1),g=ot({inputs:{x:c},backend:n,attrs:{shape:d}}),y=Fa({inputs:{x:g},backend:n,attrs:{perm:h}}),b=ot({inputs:{x:y},backend:n,attrs:{shape:m}});return u.push(c),u.push(g),u.push(y),u.forEach(w=>n.disposeIntermediateTensorInfo(w)),b},vze={kernelName:Pv,backendName:"webgl",kernelFunc:xze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wze(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:a,defaultValue:i}=e;if(a.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${a.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const o=n.readSync(r.dataId),l=n.readSync(s.dataId),u=n.readSync(a.dataId),c=n.readSync(i.dataId)[0],[d,h,m,g,y]=a3e(o,r.shape,r.dtype,l,s.dtype,u,c);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],s.dtype,m),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map(b=>Number(b)))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}const Sze={kernelName:YM,backendName:"webgl",kernelFunc:wze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cze(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:a}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(a.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${a.shape}`);const i=Array.from(n.readSync(s.dataId)),o=n.readSync(r.dataId),l=Array.from(n.readSync(a.dataId)),[u,c,d]=i3e(o,r.shape,r.dtype,i,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],a.dtype,new Int32Array(d))]}const kze={kernelName:QM,backendName:"webgl",kernelFunc:Cze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nze(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${a.shape}`);const i=n.readSync(r.dataId),o=n.readSync(s.dataId),l=n.readSync(a.dataId),[u,c]=gne(i,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const Tze={kernelName:zk,backendName:"webgl",kernelFunc:Nze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ze(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:a}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(a.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${a.shape}`);const i=n.readSync(r.dataId),o=n.readSync(s.dataId),l=n.readSync(a.dataId),[u,c]=gne(i,r.shape,r.dtype,o,l);return n.makeTensorInfo(c,r.dtype,u)}const Ize={kernelName:Bk,backendName:"webgl",kernelFunc:$ze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eze(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:a,defaultValue:i}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:h}=Fu(a,s,o),m=!1;if(a.dtype==="string"){const w=n.bufferSync(s),C=n.bufferSync(a),k=Ml(n.readSync(i.dataId)[0]),T=n3e(w,C,o,h,c,u,l,d,k,m);return n.makeTensorInfo(o,T.dtype,T.values)}const g=new M4(u,l,s.shape.length,a.shape.length,d,[h,1],m),y=n.runWebGLProgram(g,[a,s,i],a.dtype),b=ot({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(y),b}const Aze={kernelName:Uk,backendName:"webgl",kernelFunc:Eze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:a,axis:i}=r,o=Gt(i,s.shape)[0],l=UN(s,a,o),u=s.shape.length,c=new Array(u).fill(0),d=s.shape.slice();return l.map(h=>{const m=[...d];m[o]=h;const g=ky({inputs:{x:s},backend:n,attrs:{begin:c,size:m}});return c[o]+=h,g})}const Oze={kernelName:Mv,backendName:"webgl",kernelFunc:Rze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eW="return sqrt(x);",_ze=Sn({opSnippet:eW,packedOpSnippet:eW,cpuKernelImpl:o3e}),Dze={kernelName:sy,backendName:"webgl",kernelFunc:_ze};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pze="return x * x;",Mze=Sn({opSnippet:Pze}),jze={kernelName:Vk,backendName:"webgl",kernelFunc:Mze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tW="return (a - b) * (a - b);",Lze=na({opSnippet:tW,packedOpSnippet:tW}),Fze={kernelName:ay,backendName:"webgl",kernelFunc:Lze};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const a=n.readSync(s.dataId),i=zl(a),o=l3e(i,"string",r);return n.makeTensorInfo(s.shape,"string",o)}const Bze={kernelName:Wk,backendName:"webgl",kernelFunc:zze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uze({inputs:t,attrs:e,backend:n}){const{x:r}=t,s=il+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,a=new gu(r.shape,s);return n.runWebGLProgram(a,[r],r.dtype)}const Vze={kernelName:cy,backendName:"webgl",kernelFunc:Uze};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Wze=class{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const s=r.length,a=Xn(r.length),i=Xn(r.length);let o="";if(s===1)o="coords * strides + begin";else{let l=0;o=r.map((u,c)=>(l++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${a} begin = ${a}(${e});
      ${a} strides = ${a}(${n});

      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:a,end:i,strides:o,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:h}=r,{finalShapeSparse:m,finalShape:g,isIdentity:y,sliceDim0:b,isSimpleSlice:w,begin:C,end:k,strides:T}=NN(s.shape,a,i,o,l,u,c,d,h);let N;if(y)N=ot({inputs:{x:s},backend:n,attrs:{shape:g}});else if(b||w){X(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const A=kN(C,k,T),D=ky({inputs:{x:s},backend:n,attrs:{begin:C,size:A}});N=ot({inputs:{x:D},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(D)}else if(n.shouldExecuteOnCPU([s])){const D=n.readSync(s.dataId),P=Wt(s.shape,s.dtype,D),R=u3e(m,P,T,C);N=n.makeTensorInfo(g,s.dtype,R.values)}else{const D=new Wze(C,T,m);N=n.runWebGLProgram(D,[s],s.dtype)}const I=ot({inputs:{x:N},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(N),I}const Hze={kernelName:Gk,backendName:"webgl",kernelFunc:Gze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qze(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:a,leftPad:i,rightPad:o,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=e,h=n.readSync(c.dataId),m=n.readSync(d.dataId),[g,y]=c3e(h,m,s,a,i,o,l,u);return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(d.shape,"int32",y)]}const Kze={kernelName:Hk,backendName:"webgl",kernelFunc:qze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xze(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:a,delimiter:i}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(a.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${a.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const o=n.readSync(a.dataId),l=n.readSync(i.dataId)[0],[u,c,d]=d3e(o,l,s),h=c.length;return[n.makeTensorInfo([h,2],"int32",u),n.makeTensorInfo([h],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const Yze={kernelName:ZM,backendName:"webgl",kernelFunc:Xze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qze(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:a}=e;if(a.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(a.dataId),o=f3e(i,s);return n.makeTensorInfo(a.shape,"int32",o)}const Zze={kernelName:JM,backendName:"webgl",kernelFunc:Qze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jze="return tan(x);",eBe=Sn({opSnippet:Jze}),tBe={kernelName:oy,backendName:"webgl",kernelFunc:eBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nBe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,rBe=Sn({opSnippet:nBe}),sBe={kernelName:ly,backendName:"webgl",kernelFunc:rBe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aBe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:s,indices:a,updates:i}=e,{sliceRank:o,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Fu(i,a,s.shape),h=[d/u,u];if(d===0)return n.makeTensorInfo(s.shape,a.dtype);const m=ot({inputs:{x:a},backend:n,attrs:{shape:[l,o]}}),g=ot({inputs:{x:i},backend:n,attrs:{shape:[l,u]}}),y=ot({inputs:{x:s},backend:n,attrs:{shape:h}}),b=new M4(l,o,m.shape.length,g.shape.length,c,h,!1,!0),w=n.runWebGLProgram(b,[g,m,y],y.dtype),C=ot({inputs:{x:w},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(w),C}const iBe={kernelName:Lk,backendName:"webgl",kernelFunc:aBe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let oBe=class{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let i=0;i<r.length;i++)r[i]=e[i]*n[i];this.outputShape=r,this.rank=r.length;const s=Xn(this.rank),a=lBe(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${a}));
      }
    `}};function lBe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<t.length;s++)r.push(`imod(${n[s]}, ${t[s]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qne(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:a}=r;if(s.dtype==="string"||s.shape.length>5){const l=n.readSync(s.dataId),u=s.dtype==="string"?l.map(h=>Ml(h)):l,c=Wt(s.shape,s.dtype,u),d=p3e(c,a);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const i=new oBe(s.shape,a);return n.runWebGLProgram(i,[s],s.dtype)}const uBe={kernelName:uy,backendName:"webgl",kernelFunc:qne};let cBe=class{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}},dBe=class{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ef(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function nW(t){let e=1;for(;e<t;)e*=2;return e}function fBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:a,sorted:i}=r,o=ve().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=ve().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=s.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([s])||c<o||a>l){const R=n.readSync(s.dataId),[O,F]=m3e(R,u,s.dtype,a,i);return[n.makeTensorInfo(O.shape,O.dtype,O.values),n.makeTensorInfo(F.shape,F.dtype,F.values)]}if(a===0)return u[u.length-1]=0,[n.makeTensorInfo(u,s.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[s,c1({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const d=n.texData.get(s.dataId),h=d!==null&&d.isPacked,m=h?n.unpackTensor(s):s,y=ye(u)/c,b=ot({inputs:{x:m},attrs:{shape:[y,c]},backend:n});h&&Ef(n,m);const w=nW(a),C=nW(c);let k=null;const T=()=>k===null?[b,b]:[b,k],N=(R,O,F)=>{const z=T(),V=new cBe(F),j=[[c],[k===null?1:0],[Number.NEGATIVE_INFINITY],[R],[O]],q=k;k=n.runWebGLProgram(V,z,"int32",j),Ef(n,q)};for(let R=1;R<w;R*=2){const O=R*2;for(let F=R;F>=1;F/=2)N(O,F,[y,C])}for(let R=C;R>w;R/=2){const O=T(),F=new dBe([y,R/2]),V=[[c],[k===null?1:0],[w]],W=k;k=n.runWebGLProgram(F,O,"int32",V),Ef(n,W);const j=w/2,q=j*2;for(let Y=j;Y>=1;Y/=2)N(q,Y,k.shape)}let I=k;k=ky({inputs:{x:k},backend:n,attrs:{begin:0,size:[y,a]}}),Ef(n,I);let A=Fne({inputs:{x:b,indices:k},backend:n,attrs:{axis:1,batchDims:1}});Ef(n,b);const D=u.slice(0,-1);D.push(a),I=k,k=ot({inputs:{x:k},attrs:{shape:D},backend:n}),Ef(n,I);const P=A;return A=ot({inputs:{x:A},attrs:{shape:D},backend:n}),Ef(n,P),[A,k]}const hBe={kernelName:qk,backendName:"webgl",kernelFunc:fBe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let pBe=class{constructor(e,n,r,s,a,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const o=r==="nearest"?1:2;let l;switch(s){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${a});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${a});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${o} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mBe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,transforms:a}=e,{interpolation:i,fillMode:o,fillValue:l,outputShape:u}=r,[c,d,h,m]=s.shape,[g,y]=u??[d,h],b=[c,g,y,m],w=new pBe(d,h,i,o,l,b);return n.runWebGLProgram(w,[s,a],"float32")}const gBe={kernelName:Kk,backendName:"webgl",kernelFunc:mBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yBe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:a}=e;o1(a,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=r.readSync(a.dataId),{outputValues:o,outputShape:l,indices:u}=g3e(i,s,a.shape,a.dtype);return[r.makeTensorInfo(l,a.dtype,o),r.makeTensorInfo([u.length],"int32",u)]}const bBe={kernelName:ej,backendName:"webgl",kernelFunc:yBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xBe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:a}=r;a<0&&(a+=s.shape.length);const i=s,o=i.shape.length,l=s.shape[a],u=new Array(o-1);let c=0;for(let y=0;y<o;y++)y!==a&&(u[c++]=i.shape[y]);const d=[],h=new Array(o).fill(0),m=i.shape.slice();m[a]=1;const g=new Array(l);for(let y=0;y<g.length;y++){h[a]=y;const b=ky({inputs:{x:i},backend:n,attrs:{begin:h,size:m}}),w=ot({inputs:{x:b},backend:n,attrs:{shape:u}});g[y]=w,d.push(b)}return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const vBe={kernelName:Lv,backendName:"webgl",kernelFunc:xBe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wBe{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,s=e.batchSize,a=e.inSize,i=e.numSegments,o=i*Math.ceil(a/r);this.outputShape=[s,o];const l="0.0",u="sumValue",c=Math.floor(r/4)*4,d=r%4,h=`
        sumValue += dot(values, segFilter);
    `;let m="";a%r>0&&(m=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `);let g="";a%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${g}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${i})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${i})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${h}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${h}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${h}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${h}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:a}=e,{numSegments:i}=r,o=s.shape.length,l=[];let u=0;const c=Yn([u],o);let d=s;c!=null&&(d=Fa({inputs:{x:s},backend:n,attrs:{perm:c}}),l.push(d),u=gr(1,o)[0]);const h=Xj(d.shape,u,i),m=ye([d.shape[u]]),g=ot({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}});l.push(g);const y=Qk(s.dtype),b=(T,N,I,A,D)=>{const P=T.shape[0],R=T.shape[1],O=kZ(R,D),F={windowSize:O,inSize:R,batchSize:P,numSegments:D},z=new wBe(F,N),V=n.compileAndRun(z,[T,I],A);if(l.push(V),V.shape[1]===D)return V;const W=Hne({backend:n,attrs:{start:0,stop:D,step:1,dtype:"float32"}}),j=qne({inputs:{x:W},backend:n,attrs:{reps:[R/O]}});return l.push(W),l.push(j),b(V,N,j,A,D)},w=b(g,"unsortedSegmentSum",a,y,i),C=ot({inputs:{x:w},backend:n,attrs:{shape:h}});let k=C;if(c!=null){l.push(C);const T=ju(c);k=Fa({inputs:{x:k},backend:n,attrs:{perm:T}})}return l.forEach(T=>n.disposeIntermediateTensorInfo(T)),k}const CBe={kernelName:Fv,backendName:"webgl",kernelFunc:SBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kBe=[oDe,uDe,fDe,mDe,yDe,vDe,SDe,kDe,IDe,ADe,_De,MDe,FDe,VDe,HDe,KDe,YDe,ePe,nPe,sPe,lPe,mPe,yPe,wPe,CPe,EPe,RPe,PPe,W3e,LPe,VPe,qPe,JPe,nMe,sMe,iMe,lMe,fMe,mMe,bMe,vMe,SMe,kMe,$Me,EMe,_Me,PMe,LMe,BMe,VMe,qMe,QMe,tje,sje,oje,lje,cje,fje,pje,gje,bje,Sje,Nje,Ije,Aje,_je,Mje,zje,Wje,V3e,Hje,BPe,Xje,Zje,t4e,H3e,a4e,u4e,d4e,m4e,b4e,S4e,N4e,E4e,_4e,M4e,L4e,U4e,W4e,H4e,Y4e,Z4e,eLe,nLe,sLe,lLe,fLe,gLe,kLe,X3e,ILe,RLe,DLe,jLe,NPe,zLe,ULe,WLe,qLe,QLe,K3e,JLe,tFe,rFe,aFe,iFe,TPe,vLe,uFe,hFe,yFe,Q3e,wFe,kFe,IFe,RFe,PFe,jFe,zFe,VFe,HFe,XFe,ZFe,tze,aze,lze,fze,mze,hPe,SLe,bze,vze,Sze,kze,Tze,Ize,Aze,Oze,Dze,jze,Fze,Bze,Vze,Hze,Kze,Yze,Zze,wLe,sDe,tBe,sBe,iBe,uBe,hBe,gBe,aDe,bBe,vBe,CBe,BLe];for(const t of kBe)tj(t);var eA={},rW;function NBe(){return rW||(rW=1,(function(){var t;function e(E){var M=0;return function(){return M<E.length?{done:!1,value:E[M++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(E,M,U){return E==Array.prototype||E==Object.prototype||(E[M]=U.value),E};function r(E){E=[typeof globalThis=="object"&&globalThis,E,typeof window=="object"&&window,typeof self=="object"&&self,typeof im=="object"&&im];for(var M=0;M<E.length;++M){var U=E[M];if(U&&U.Math==Math)return U}throw Error("Cannot find global object")}var s=r(this);function a(E,M){if(M)e:{var U=s;E=E.split(".");for(var K=0;K<E.length-1;K++){var re=E[K];if(!(re in U))break e;U=U[re]}E=E[E.length-1],K=U[E],M=M(K),M!=K&&M!=null&&n(U,E,{configurable:!0,writable:!0,value:M})}}a("Symbol",function(E){function M(ae){if(this instanceof M)throw new TypeError("Symbol is not a constructor");return new U(K+(ae||"")+"_"+re++,ae)}function U(ae,se){this.h=ae,n(this,"description",{configurable:!0,writable:!0,value:se})}if(E)return E;U.prototype.toString=function(){return this.h};var K="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",re=0;return M}),a("Symbol.iterator",function(E){if(E)return E;E=Symbol("Symbol.iterator");for(var M="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),U=0;U<M.length;U++){var K=s[M[U]];typeof K=="function"&&typeof K.prototype[E]!="function"&&n(K.prototype,E,{configurable:!0,writable:!0,value:function(){return i(e(this))}})}return E});function i(E){return E={next:E},E[Symbol.iterator]=function(){return this},E}function o(E){var M=typeof Symbol<"u"&&Symbol.iterator&&E[Symbol.iterator];return M?M.call(E):{next:e(E)}}function l(E){if(!(E instanceof Array)){E=o(E);for(var M,U=[];!(M=E.next()).done;)U.push(M.value);E=U}return E}var u=typeof Object.assign=="function"?Object.assign:function(E,M){for(var U=1;U<arguments.length;U++){var K=arguments[U];if(K)for(var re in K)Object.prototype.hasOwnProperty.call(K,re)&&(E[re]=K[re])}return E};a("Object.assign",function(E){return E||u});var c=typeof Object.create=="function"?Object.create:function(E){function M(){}return M.prototype=E,new M},d;if(typeof Object.setPrototypeOf=="function")d=Object.setPrototypeOf;else{var h;e:{var m={a:!0},g={};try{g.__proto__=m,h=g.a;break e}catch{}h=!1}d=h?function(E,M){if(E.__proto__=M,E.__proto__!==M)throw new TypeError(E+" is not extensible");return E}:null}var y=d;function b(E,M){if(E.prototype=c(M.prototype),E.prototype.constructor=E,y)y(E,M);else for(var U in M)if(U!="prototype")if(Object.defineProperties){var K=Object.getOwnPropertyDescriptor(M,U);K&&Object.defineProperty(E,U,K)}else E[U]=M[U];E.za=M.prototype}function w(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function C(E){if(E.m)throw new TypeError("Generator is already running");E.m=!0}w.prototype.u=function(E){this.i=E};function k(E,M){E.l={ma:M,na:!0},E.h=E.s||E.v}w.prototype.return=function(E){this.l={return:E},this.h=this.v};function T(E,M,U){return E.h=U,{value:M}}function N(E){this.h=new w,this.i=E}function I(E,M){C(E.h);var U=E.h.j;return U?A(E,"return"in U?U.return:function(K){return{value:K,done:!0}},M,E.h.return):(E.h.return(M),D(E))}function A(E,M,U,K){try{var re=M.call(E.h.j,U);if(!(re instanceof Object))throw new TypeError("Iterator result "+re+" is not an object");if(!re.done)return E.h.m=!1,re;var ae=re.value}catch(se){return E.h.j=null,k(E.h,se),D(E)}return E.h.j=null,K.call(E.h,ae),D(E)}function D(E){for(;E.h.h;)try{var M=E.i(E.h);if(M)return E.h.m=!1,{value:M.value,done:!1}}catch(U){E.h.i=void 0,k(E.h,U)}if(E.h.m=!1,E.h.l){if(M=E.h.l,E.h.l=null,M.na)throw M.ma;return{value:M.return,done:!0}}return{value:void 0,done:!0}}function P(E){this.next=function(M){return C(E.h),E.h.j?M=A(E,E.h.j.next,M,E.h.u):(E.h.u(M),M=D(E)),M},this.throw=function(M){return C(E.h),E.h.j?M=A(E,E.h.j.throw,M,E.h.u):(k(E.h,M),M=D(E)),M},this.return=function(M){return I(E,M)},this[Symbol.iterator]=function(){return this}}function R(E){function M(K){return E.next(K)}function U(K){return E.throw(K)}return new Promise(function(K,re){function ae(se){se.done?K(se.value):Promise.resolve(se.value).then(M,U).then(ae,re)}ae(E.next())})}function O(E){return R(new P(new N(E)))}a("Promise",function(E){function M(se){this.i=0,this.j=void 0,this.h=[],this.u=!1;var me=this.l();try{se(me.resolve,me.reject)}catch(Ee){me.reject(Ee)}}function U(){this.h=null}function K(se){return se instanceof M?se:new M(function(me){me(se)})}if(E)return E;U.prototype.i=function(se){if(this.h==null){this.h=[];var me=this;this.j(function(){me.m()})}this.h.push(se)};var re=s.setTimeout;U.prototype.j=function(se){re(se,0)},U.prototype.m=function(){for(;this.h&&this.h.length;){var se=this.h;this.h=[];for(var me=0;me<se.length;++me){var Ee=se[me];se[me]=null;try{Ee()}catch(qe){this.l(qe)}}}this.h=null},U.prototype.l=function(se){this.j(function(){throw se})},M.prototype.l=function(){function se(qe){return function(it){Ee||(Ee=!0,qe.call(me,it))}}var me=this,Ee=!1;return{resolve:se(this.I),reject:se(this.m)}},M.prototype.I=function(se){if(se===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(se instanceof M)this.L(se);else{e:switch(typeof se){case"object":var me=se!=null;break e;case"function":me=!0;break e;default:me=!1}me?this.F(se):this.s(se)}},M.prototype.F=function(se){var me=void 0;try{me=se.then}catch(Ee){this.m(Ee);return}typeof me=="function"?this.M(me,se):this.s(se)},M.prototype.m=function(se){this.v(2,se)},M.prototype.s=function(se){this.v(1,se)},M.prototype.v=function(se,me){if(this.i!=0)throw Error("Cannot settle("+se+", "+me+"): Promise already settled in state"+this.i);this.i=se,this.j=me,this.i===2&&this.K(),this.H()},M.prototype.K=function(){var se=this;re(function(){if(se.D()){var me=s.console;typeof me<"u"&&me.error(se.j)}},1)},M.prototype.D=function(){if(this.u)return!1;var se=s.CustomEvent,me=s.Event,Ee=s.dispatchEvent;return typeof Ee>"u"?!0:(typeof se=="function"?se=new se("unhandledrejection",{cancelable:!0}):typeof me=="function"?se=new me("unhandledrejection",{cancelable:!0}):(se=s.document.createEvent("CustomEvent"),se.initCustomEvent("unhandledrejection",!1,!0,se)),se.promise=this,se.reason=this.j,Ee(se))},M.prototype.H=function(){if(this.h!=null){for(var se=0;se<this.h.length;++se)ae.i(this.h[se]);this.h=null}};var ae=new U;return M.prototype.L=function(se){var me=this.l();se.T(me.resolve,me.reject)},M.prototype.M=function(se,me){var Ee=this.l();try{se.call(me,Ee.resolve,Ee.reject)}catch(qe){Ee.reject(qe)}},M.prototype.then=function(se,me){function Ee(Et,pt){return typeof Et=="function"?function(Dt){try{qe(Et(Dt))}catch(Kt){it(Kt)}}:pt}var qe,it,Mt=new M(function(Et,pt){qe=Et,it=pt});return this.T(Ee(se,qe),Ee(me,it)),Mt},M.prototype.catch=function(se){return this.then(void 0,se)},M.prototype.T=function(se,me){function Ee(){switch(qe.i){case 1:se(qe.j);break;case 2:me(qe.j);break;default:throw Error("Unexpected state: "+qe.i)}}var qe=this;this.h==null?ae.i(Ee):this.h.push(Ee),this.u=!0},M.resolve=K,M.reject=function(se){return new M(function(me,Ee){Ee(se)})},M.race=function(se){return new M(function(me,Ee){for(var qe=o(se),it=qe.next();!it.done;it=qe.next())K(it.value).T(me,Ee)})},M.all=function(se){var me=o(se),Ee=me.next();return Ee.done?K([]):new M(function(qe,it){function Mt(Dt){return function(Kt){Et[Dt]=Kt,pt--,pt==0&&qe(Et)}}var Et=[],pt=0;do Et.push(void 0),pt++,K(Ee.value).T(Mt(Et.length-1),it),Ee=me.next();while(!Ee.done)})},M});function F(E,M){E instanceof String&&(E+="");var U=0,K=!1,re={next:function(){if(!K&&U<E.length){var ae=U++;return{value:M(ae,E[ae]),done:!1}}return K=!0,{done:!0,value:void 0}}};return re[Symbol.iterator]=function(){return re},re}a("Array.prototype.keys",function(E){return E||function(){return F(this,function(M){return M})}}),a("Array.prototype.fill",function(E){return E||function(M,U,K){var re=this.length||0;for(0>U&&(U=Math.max(0,re+U)),(K==null||K>re)&&(K=re),K=Number(K),0>K&&(K=Math.max(0,re+K)),U=Number(U||0);U<K;U++)this[U]=M;return this}});function z(E){return E||Array.prototype.fill}a("Int8Array.prototype.fill",z),a("Uint8Array.prototype.fill",z),a("Uint8ClampedArray.prototype.fill",z),a("Int16Array.prototype.fill",z),a("Uint16Array.prototype.fill",z),a("Int32Array.prototype.fill",z),a("Uint32Array.prototype.fill",z),a("Float32Array.prototype.fill",z),a("Float64Array.prototype.fill",z),a("Object.is",function(E){return E||function(M,U){return M===U?M!==0||1/M===1/U:M!==M&&U!==U}}),a("Array.prototype.includes",function(E){return E||function(M,U){var K=this;K instanceof String&&(K=String(K));var re=K.length;for(U=U||0,0>U&&(U=Math.max(U+re,0));U<re;U++){var ae=K[U];if(ae===M||Object.is(ae,M))return!0}return!1}}),a("String.prototype.includes",function(E){return E||function(M,U){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(M instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(M,U||0)!==-1}});var V=this||self;function W(E,M){E=E.split(".");var U=V;E[0]in U||typeof U.execScript>"u"||U.execScript("var "+E[0]);for(var K;E.length&&(K=E.shift());)E.length||M===void 0?U[K]&&U[K]!==Object.prototype[K]?U=U[K]:U=U[K]={}:U[K]=M}function j(E){var M;e:{if((M=V.navigator)&&(M=M.userAgent))break e;M=""}return M.indexOf(E)!=-1}var q=Array.prototype.map?function(E,M){return Array.prototype.map.call(E,M,void 0)}:function(E,M){for(var U=E.length,K=Array(U),re=typeof E=="string"?E.split(""):E,ae=0;ae<U;ae++)ae in re&&(K[ae]=M.call(void 0,re[ae],ae,E));return K},Y={},Q=null;function H(E){var M=E.length,U=3*M/4;U%3?U=Math.floor(U):"=.".indexOf(E[M-1])!=-1&&(U="=.".indexOf(E[M-2])!=-1?U-2:U-1);var K=new Uint8Array(U),re=0;return ee(E,function(ae){K[re++]=ae}),re!==U?K.subarray(0,re):K}function ee(E,M){function U(Ee){for(;K<E.length;){var qe=E.charAt(K++),it=Q[qe];if(it!=null)return it;if(!/^[\s\xa0]*$/.test(qe))throw Error("Unknown base64 encoding at char: "+qe)}return Ee}te();for(var K=0;;){var re=U(-1),ae=U(0),se=U(64),me=U(64);if(me===64&&re===-1)break;M(re<<2|ae>>4),se!=64&&(M(ae<<4&240|se>>2),me!=64&&M(se<<6&192|me))}}function te(){if(!Q){Q={};for(var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),M=["+/=","+/","-_=","-_.","-_"],U=0;5>U;U++){var K=E.concat(M[U].split(""));Y[U]=K;for(var re=0;re<K.length;re++){var ae=K[re];Q[ae]===void 0&&(Q[ae]=re)}}}}var ne=typeof Uint8Array<"u",he=!(j("Trident")||j("MSIE"))&&typeof V.btoa=="function";function Se(E){if(!he){var M;M===void 0&&(M=0),te(),M=Y[M];for(var U=Array(Math.floor(E.length/3)),K=M[64]||"",re=0,ae=0;re<E.length-2;re+=3){var se=E[re],me=E[re+1],Ee=E[re+2],qe=M[se>>2];se=M[(se&3)<<4|me>>4],me=M[(me&15)<<2|Ee>>6],Ee=M[Ee&63],U[ae++]=qe+se+me+Ee}switch(qe=0,Ee=K,E.length-re){case 2:qe=E[re+1],Ee=M[(qe&15)<<2]||K;case 1:E=E[re],U[ae]=M[E>>2]+M[(E&3)<<4|qe>>4]+Ee+K}return U.join("")}for(M="";10240<E.length;)M+=String.fromCharCode.apply(null,E.subarray(0,10240)),E=E.subarray(10240);return M+=String.fromCharCode.apply(null,E),btoa(M)}var Ie=RegExp("[-_.]","g");function Qe(E){switch(E){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function Ve(E){if(!he)return H(E);Ie.test(E)&&(E=E.replace(Ie,Qe)),E=atob(E);for(var M=new Uint8Array(E.length),U=0;U<E.length;U++)M[U]=E.charCodeAt(U);return M}var $e;function We(){return $e||($e=new Uint8Array(0))}var ze={},ke=typeof Uint8Array.prototype.slice=="function",et=0,Je=0;function Re(E){var M=0>E;E=Math.abs(E);var U=E>>>0;E=Math.floor((E-U)/4294967296),M&&(U=o(xe(U,E)),M=U.next().value,E=U.next().value,U=M),et=U>>>0,Je=E>>>0}var Ke=typeof BigInt=="function";function xe(E,M){return M=~M,E?E=~E+1:M+=1,[E,M]}function De(E,M){this.i=E>>>0,this.h=M>>>0}function at(E){if(!E)return Xe||(Xe=new De(0,0));if(!/^-?\d+$/.test(E))return null;if(16>E.length)Re(Number(E));else if(Ke)E=BigInt(E),et=Number(E&BigInt(4294967295))>>>0,Je=Number(E>>BigInt(32)&BigInt(4294967295));else{var M=+(E[0]==="-");Je=et=0;for(var U=E.length,K=M,re=(U-M)%6+M;re<=U;K=re,re+=6)K=Number(E.slice(K,re)),Je*=1e6,et=1e6*et+K,4294967296<=et&&(Je+=et/4294967296|0,et%=4294967296);M&&(M=o(xe(et,Je)),E=M.next().value,M=M.next().value,et=E,Je=M)}return new De(et,Je)}var Xe;function Nt(E,M){return Error("Invalid wire type: "+E+" (at position "+M+")")}function Be(){return Error("Failed to read varint, encoding is invalid.")}function Tt(E,M){return Error("Tried to read past the end of the data "+M+" > "+E)}function Ot(){throw Error("Invalid UTF8")}function Wn(E,M){return M=String.fromCharCode.apply(null,M),E==null?M:E+M}var rn=void 0,cn,Jt=typeof TextDecoder<"u",Mn,Ua=typeof TextEncoder<"u",Li;function cl(E){if(E!==ze)throw Error("illegal external caller")}function ms(E,M){if(cl(M),this.V=E,E!=null&&E.length===0)throw Error("ByteString should be constructed with non-empty values")}function Va(){return Li||(Li=new ms(null,ze))}function aa(E){cl(ze);var M=E.V;return M=M==null||ne&&M!=null&&M instanceof Uint8Array?M:typeof M=="string"?Ve(M):null,M==null?M:E.V=M}function dl(E){if(typeof E=="string")return{buffer:Ve(E),C:!1};if(Array.isArray(E))return{buffer:new Uint8Array(E),C:!1};if(E.constructor===Uint8Array)return{buffer:E,C:!1};if(E.constructor===ArrayBuffer)return{buffer:new Uint8Array(E),C:!1};if(E.constructor===ms)return{buffer:aa(E)||We(),C:!0};if(E instanceof Uint8Array)return{buffer:new Uint8Array(E.buffer,E.byteOffset,E.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function Fi(E,M){this.i=null,this.m=!1,this.h=this.j=this.l=0,Yl(this,E,M)}function Yl(E,M,U){U=U===void 0?{}:U,E.S=U.S===void 0?!1:U.S,M&&(M=dl(M),E.i=M.buffer,E.m=M.C,E.l=0,E.j=E.i.length,E.h=E.l)}Fi.prototype.reset=function(){this.h=this.l};function Wa(E,M){if(E.h=M,M>E.j)throw Tt(E.j,M)}function zi(E){var M=E.i,U=E.h,K=M[U++],re=K&127;if(K&128&&(K=M[U++],re|=(K&127)<<7,K&128&&(K=M[U++],re|=(K&127)<<14,K&128&&(K=M[U++],re|=(K&127)<<21,K&128&&(K=M[U++],re|=K<<28,K&128&&M[U++]&128&&M[U++]&128&&M[U++]&128&&M[U++]&128&&M[U++]&128)))))throw Be();return Wa(E,U),re}function fl(E,M){if(0>M)throw Error("Tried to read a negative byte length: "+M);var U=E.h,K=U+M;if(K>E.j)throw Tt(M,E.j-U);return E.h=K,U}var Bi=[];function Ql(){this.h=[]}Ql.prototype.length=function(){return this.h.length},Ql.prototype.end=function(){var E=this.h;return this.h=[],E};function Zl(E,M,U){for(;0<U||127<M;)E.h.push(M&127|128),M=(M>>>7|U<<25)>>>0,U>>>=7;E.h.push(M)}function Ga(E,M){for(;127<M;)E.h.push(M&127|128),M>>>=7;E.h.push(M)}function xo(E,M){if(Bi.length){var U=Bi.pop();Yl(U,E,M),E=U}else E=new Fi(E,M);this.h=E,this.j=this.h.h,this.i=this.l=-1,this.setOptions(M)}xo.prototype.setOptions=function(E){E=E===void 0?{}:E,this.ca=E.ca===void 0?!1:E.ca},xo.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function hl(E){var M=E.h;if(M.h==M.j)return!1;E.j=E.h.h;var U=zi(E.h)>>>0;if(M=U>>>3,U&=7,!(0<=U&&5>=U))throw Nt(U,E.j);if(1>M)throw Error("Invalid field number: "+M+" (at position "+E.j+")");return E.l=M,E.i=U,!0}function vo(E){switch(E.i){case 0:if(E.i!=0)vo(E);else e:{E=E.h;for(var M=E.h,U=M+10,K=E.i;M<U;)if((K[M++]&128)===0){Wa(E,M);break e}throw Be()}break;case 1:E=E.h,Wa(E,E.h+8);break;case 2:E.i!=2?vo(E):(M=zi(E.h)>>>0,E=E.h,Wa(E,E.h+M));break;case 5:E=E.h,Wa(E,E.h+4);break;case 3:M=E.l;do{if(!hl(E))throw Error("Unmatched start-group tag: stream EOF");if(E.i==4){if(E.l!=M)throw Error("Unmatched end-group tag");break}vo(E)}while(!0);break;default:throw Nt(E.i,E.j)}}var pl=[];function xa(){this.j=[],this.i=0,this.h=new Ql}function Qn(E,M){M.length!==0&&(E.j.push(M),E.i+=M.length)}function Wr(E,M){if(M=M.R){Qn(E,E.h.end());for(var U=0;U<M.length;U++)Qn(E,aa(M[U])||We())}}var Gr=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function va(E,M){return Gr?E[Gr]|=M:E.A!==void 0?E.A|=M:(Object.defineProperties(E,{A:{value:M,configurable:!0,writable:!0,enumerable:!1}}),M)}function Uu(E,M){Gr?E[Gr]&&(E[Gr]&=~M):E.A!==void 0&&(E.A&=~M)}function Zn(E){var M;return Gr?M=E[Gr]:M=E.A,M??0}function Rs(E,M){Gr?E[Gr]=M:E.A!==void 0?E.A=M:Object.defineProperties(E,{A:{value:M,configurable:!0,writable:!0,enumerable:!1}})}function Ha(E){return va(E,1),E}function ml(E,M){Rs(M,(E|0)&-51)}function ia(E,M){Rs(M,(E|18)&-41)}var wa={};function Sa(E){return E!==null&&typeof E=="object"&&!Array.isArray(E)&&E.constructor===Object}var Vs,lr=[];Rs(lr,23),Vs=Object.freeze(lr);function wo(E){if(Zn(E.o)&2)throw Error("Cannot mutate an immutable Message")}function So(E){var M=E.length;(M=M?E[M-1]:void 0)&&Sa(M)?M.g=1:(M={},E.push((M.g=1,M)))}function Ca(E){var M=E.i+E.G;return E.B||(E.B=E.o[M]={})}function Nr(E,M){return M===-1?null:M>=E.i?E.B?E.B[M]:void 0:E.o[M+E.G]}function Ws(E,M,U,K){wo(E),fi(E,M,U,K)}function fi(E,M,U,K){E.j&&(E.j=void 0),M>=E.i||K?Ca(E)[M]=U:(E.o[M+E.G]=U,(E=E.B)&&M in E&&delete E[M])}function Co(E,M,U,K){var re=Nr(E,M);Array.isArray(re)||(re=Vs);var ae=Zn(re);if(ae&1||Ha(re),K)ae&2||va(re,2),U&1||Object.freeze(re);else{K=!(U&2);var se=ae&2;U&1||!se?K&&ae&16&&!se&&Uu(re,16):(re=Ha(Array.prototype.slice.call(re)),fi(E,M,re))}return re}function gl(E,M){var U=Nr(E,M),K=U==null?U:typeof U=="number"||U==="NaN"||U==="Infinity"||U==="-Infinity"?Number(U):void 0;return K!=null&&K!==U&&fi(E,M,K),K}function Ui(E,M,U,K,re){E.h||(E.h={});var ae=E.h[U],se=Co(E,U,3,re);if(!ae){var me=se;ae=[];var Ee=!!(Zn(E.o)&16);se=!!(Zn(me)&2);var qe=me;!re&&se&&(me=Array.prototype.slice.call(me));for(var it=se,Mt=0;Mt<me.length;Mt++){var Et=me[Mt],pt=M,Dt=!1;if(Dt=Dt===void 0?!1:Dt,Et=Array.isArray(Et)?new pt(Et):Dt?new pt:void 0,Et!==void 0){pt=Et.o;var Kt=Dt=Zn(pt);se&&(Kt|=2),Ee&&(Kt|=16),Kt!=Dt&&Rs(pt,Kt),pt=Kt,it=it||!!(2&pt),ae.push(Et)}}return E.h[U]=ae,Ee=Zn(me),M=Ee|33,M=it?M&-9:M|8,Ee!=M&&(it=me,Object.isFrozen(it)&&(it=Array.prototype.slice.call(it)),Rs(it,M),me=it),qe!==me&&fi(E,U,me),(re||K&&se)&&va(ae,2),K&&Object.freeze(ae),ae}return re||(re=Object.isFrozen(ae),K&&!re?Object.freeze(ae):!K&&re&&(ae=Array.prototype.slice.call(ae),E.h[U]=ae)),ae}function hi(E,M,U){var K=!!(Zn(E.o)&2);if(M=Ui(E,M,U,K,K),E=Co(E,U,3,K),!(K||Zn(E)&8)){for(K=0;K<M.length;K++){if(U=M[K],Zn(U.o)&2){var re=qr(U,!1);re.j=U}else re=U;U!==re&&(M[K]=re,E[K]=re.o)}va(E,8)}return M}function yr(E,M,U){if(U!=null&&typeof U!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof U+": "+U);Ws(E,M,U)}function ko(E,M,U,K,re){wo(E);var ae=Ui(E,U,M,!1,!1);return U=K??new U,E=Co(E,M,2,!1),re!=null?(ae.splice(re,0,U),E.splice(re,0,U.o)):(ae.push(U),E.push(U.o)),U.C()&&Uu(E,8),U}function Vi(E,M){return E??M}function Pr(E,M,U){return U=U===void 0?0:U,Vi(gl(E,M),U)}var pi;function yl(E){switch(typeof E){case"number":return isFinite(E)?E:String(E);case"object":if(E)if(Array.isArray(E)){if((Zn(E)&128)!==0)return E=Array.prototype.slice.call(E),So(E),E}else{if(ne&&E!=null&&E instanceof Uint8Array)return Se(E);if(E instanceof ms){var M=E.V;return M==null?"":typeof M=="string"?M:E.V=Se(M)}}}return E}function Ye(E,M,U,K){if(E!=null){if(Array.isArray(E))E=ct(E,M,U,K!==void 0);else if(Sa(E)){var re={},ae;for(ae in E)re[ae]=Ye(E[ae],M,U,K);E=re}else E=M(E,K);return E}}function ct(E,M,U,K){var re=Zn(E);K=K?!!(re&16):void 0,E=Array.prototype.slice.call(E);for(var ae=0;ae<E.length;ae++)E[ae]=Ye(E[ae],M,U,K);return U(re,E),E}function qt(E){return E.ja===wa?E.toJSON():yl(E)}function dn(E,M){E&128&&So(M)}function jn(E,M,U){if(U=U===void 0?ia:U,E!=null){if(ne&&E instanceof Uint8Array)return E.length?new ms(new Uint8Array(E),ze):Va();if(Array.isArray(E)){var K=Zn(E);return K&2?E:M&&!(K&32)&&(K&16||K===0)?(Rs(E,K|2),E):(E=ct(E,jn,K&4?ia:U,!0),M=Zn(E),M&4&&M&2&&Object.freeze(E),E)}return E.ja===wa?Hr(E):E}}function kn(E,M,U,K,re,ae,se){if(E=E.h&&E.h[U]){if(K=Zn(E),K&2?K=E:(ae=q(E,Hr),ia(K,ae),Object.freeze(ae),K=ae),wo(M),se=K==null?Vs:Ha([]),K!=null){for(ae=!!K.length,E=0;E<K.length;E++){var me=K[E];ae=ae&&!(Zn(me.o)&2),se[E]=me.o}ae=(ae?8:0)|1,E=Zn(se),(E&ae)!==ae&&(Object.isFrozen(se)&&(se=Array.prototype.slice.call(se)),Rs(se,E|ae)),M.h||(M.h={}),M.h[U]=K}else M.h&&(M.h[U]=void 0);fi(M,U,se,re)}else Ws(M,U,jn(K,ae,se),re)}function Hr(E){return Zn(E.o)&2||(E=qr(E,!0),va(E.o,2)),E}function qr(E,M){var U=E.o,K=[];va(K,16);var re=E.constructor.h;if(re&&K.push(re),re=E.B,re){K.length=U.length,K.fill(void 0,K.length,U.length);var ae={};K[K.length-1]=ae}(Zn(U)&128)!==0&&So(K),M=M||E.C()?ia:ml,ae=E.constructor,pi=K,K=new ae(K),pi=void 0,E.R&&(K.R=E.R.slice()),ae=!!(Zn(U)&16);for(var se=re?U.length-1:U.length,me=0;me<se;me++)kn(E,K,me-E.G,U[me],!1,ae,M);if(re)for(var Ee in re)kn(E,K,+Ee,re[Ee],!0,ae,M);return K}function Jn(E,M,U){E==null&&(E=pi),pi=void 0;var K=this.constructor.i||0,re=0<K,ae=this.constructor.h,se=!1;if(E==null){E=ae?[ae]:[];var me=48,Ee=!0;re&&(K=0,me|=128),Rs(E,me)}else{if(!Array.isArray(E)||ae&&ae!==E[0])throw Error();var qe=me=va(E,0);if((Ee=(16&qe)!==0)&&((se=(32&qe)!==0)||(qe|=32)),re){if(128&qe)K=0;else if(0<E.length){var it=E[E.length-1];if(Sa(it)&&"g"in it){K=0,qe|=128,delete it.g;var Mt=!0,Et;for(Et in it){Mt=!1;break}Mt&&E.pop()}}}else if(128&qe)throw Error();me!==qe&&Rs(E,qe)}this.G=(ae?0:-1)-K,this.h=void 0,this.o=E;e:{if(ae=this.o.length,K=ae-1,ae&&(ae=this.o[K],Sa(ae))){this.B=ae,this.i=K-this.G;break e}M!==void 0&&-1<M?(this.i=Math.max(M,K+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!re&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(U){M=Ee&&!se&&!0,re=this.i;var pt;for(Ee=0;Ee<U.length;Ee++)se=U[Ee],se<re?(se+=this.G,(K=E[se])?wr(K,M):E[se]=Vs):(pt||(pt=Ca(this)),(K=pt[se])?wr(K,M):pt[se]=Vs)}}Jn.prototype.toJSON=function(){return ct(this.o,qt,dn)},Jn.prototype.C=function(){return!!(Zn(this.o)&2)};function wr(E,M){if(Array.isArray(E)){var U=Zn(E),K=1;!M||U&2||(K|=16),(U&K)!==K&&Rs(E,U|K)}}Jn.prototype.ja=wa,Jn.prototype.toString=function(){return this.o.toString()};function qa(E,M,U){if(U){var K={},re;for(re in U){var ae=U[re],se=ae.ra;se||(K.J=ae.xa||ae.oa.W,ae.ia?(K.aa=lt(ae.ia),se=function(me){return function(Ee,qe,it){return me.J(Ee,qe,it,me.aa)}}(K)):ae.ka?(K.Z=yt(ae.da.P,ae.ka),se=function(me){return function(Ee,qe,it){return me.J(Ee,qe,it,me.Z)}}(K)):se=K.J,ae.ra=se),se(M,E,ae.da),K={J:K.J,aa:K.aa,Z:K.Z}}}Wr(M,E)}var ka=Symbol();function Ka(E,M,U){return E[ka]||(E[ka]=function(K,re){return M(K,re,U)})}function Xa(E){var M=E[ka];if(!M){var U=Wi(E);M=function(K,re){return np(K,re,U)},E[ka]=M}return M}function Jl(E){var M=E.ia;if(M)return Xa(M);if(M=E.wa)return Ka(E.da.P,M,E.ka)}function No(E){var M=Jl(E),U=E.da,K=E.oa.U;return M?function(re,ae){return K(re,ae,U,M)}:function(re,ae){return K(re,ae,U)}}function mi(E,M){var U=E[M];return typeof U=="function"&&U.length===0&&(U=U(),E[M]=U),Array.isArray(U)&&(gi in U||Ht in U||0<U.length&&typeof U[0]=="function")?U:void 0}function de(E,M,U,K,re,ae){M.P=E[0];var se=1;if(E.length>se&&typeof E[se]!="number"){var me=E[se++];U(M,me)}for(;se<E.length;){U=E[se++];for(var Ee=se+1;Ee<E.length&&typeof E[Ee]!="number";)Ee++;switch(me=E[se++],Ee-=se,Ee){case 0:K(M,U,me);break;case 1:(Ee=mi(E,se))?(se++,re(M,U,me,Ee)):K(M,U,me,E[se++]);break;case 2:Ee=se++,Ee=mi(E,Ee),re(M,U,me,Ee,E[se++]);break;case 3:ae(M,U,me,E[se++],E[se++],E[se++]);break;case 4:ae(M,U,me,E[se++],E[se++],E[se++],E[se++]);break;default:throw Error("unexpected number of binary field arguments: "+Ee)}}return M}var He=Symbol();function lt(E){var M=E[He];if(!M){var U=as(E);M=function(K,re){return Vc(K,re,U)},E[He]=M}return M}function yt(E,M){var U=E[He];return U||(U=function(K,re){return qa(K,re,M)},E[He]=U),U}var Ht=Symbol();function sn(E,M){E.push(M)}function An(E,M,U){E.push(M,U.W)}function Os(E,M,U,K){var re=lt(K),ae=as(K).P,se=U.W;E.push(M,function(me,Ee,qe){return se(me,Ee,qe,ae,re)})}function Ya(E,M,U,K,re,ae){var se=yt(K,ae),me=U.W;E.push(M,function(Ee,qe,it){return me(Ee,qe,it,K,se)})}function as(E){var M=E[Ht];return M||(M=de(E,E[Ht]=[],sn,An,Os,Ya),gi in E&&Ht in E&&(E.length=0),M)}var gi=Symbol();function tp(E,M){E[0]=M}function Fy(E,M,U,K){var re=U.U;E[M]=K?function(ae,se,me){return re(ae,se,me,K)}:re}function $1(E,M,U,K,re){var ae=U.U,se=Xa(K),me=Wi(K).P;E[M]=function(Ee,qe,it){return ae(Ee,qe,it,me,se,re)}}function af(E,M,U,K,re,ae,se){var me=U.U,Ee=Ka(K,re,ae);E[M]=function(qe,it,Mt){return me(qe,it,Mt,K,Ee,se)}}function Wi(E){var M=E[gi];return M||(M=de(E,E[gi]={},tp,Fy,$1,af),gi in E&&Ht in E&&(E.length=0),M)}function np(E,M,U){for(;hl(M)&&M.i!=4;){var K=M.l,re=U[K];if(!re){var ae=U[0];ae&&(ae=ae[K])&&(re=U[K]=No(ae))}if(!re||!re(M,E,K)){re=M,K=E,ae=re.j,vo(re);var se=re;if(!se.ca){if(re=se.h.h-ae,se.h.h=ae,se=se.h,re==0)re=Va();else{if(ae=fl(se,re),se.S&&se.m)re=se.i.subarray(ae,ae+re);else{se=se.i;var me=ae;re=ae+re,re=me===re?We():ke?se.slice(me,re):new Uint8Array(se.subarray(me,re))}re=re.length==0?Va():new ms(re,ze)}(ae=K.R)?ae.push(re):K.R=[re]}}}return E}function Vc(E,M,U){for(var K=U.length,re=K%2==1,ae=re?1:0;ae<K;ae+=2)(0,U[ae+1])(M,E,U[ae]);qa(E,M,re?U[0]:void 0)}function yi(E,M){return{U:E,W:M}}var Qa=yi(function(E,M,U){if(E.i!==5)return!1;E=E.h;var K=E.i,re=E.h,ae=K[re],se=K[re+1],me=K[re+2];return K=K[re+3],Wa(E,E.h+4),se=(ae<<0|se<<8|me<<16|K<<24)>>>0,E=2*(se>>31)+1,ae=se>>>23&255,se&=8388607,Ws(M,U,ae==255?se?NaN:1/0*E:ae==0?E*Math.pow(2,-149)*se:E*Math.pow(2,ae-150)*(se+Math.pow(2,23))),!0},function(E,M,U){if(M=gl(M,U),M!=null){Ga(E.h,8*U+5),E=E.h;var K=+M;K===0?0<1/K?et=Je=0:(Je=0,et=2147483648):isNaN(K)?(Je=0,et=2147483647):(K=(U=0>K?-2147483648:0)?-K:K,34028234663852886e22<K?(Je=0,et=(U|2139095040)>>>0):11754943508222875e-54>K?(K=Math.round(K/Math.pow(2,-149)),Je=0,et=(U|K)>>>0):(M=Math.floor(Math.log(K)/Math.LN2),K*=Math.pow(2,-M),K=Math.round(8388608*K),16777216<=K&&++M,Je=0,et=(U|M+127<<23|K&8388607)>>>0)),U=et,E.h.push(U>>>0&255),E.h.push(U>>>8&255),E.h.push(U>>>16&255),E.h.push(U>>>24&255)}}),rp=yi(function(E,M,U){if(E.i!==0)return!1;var K=E.h,re=0,ae=E=0,se=K.i,me=K.h;do{var Ee=se[me++];re|=(Ee&127)<<ae,ae+=7}while(32>ae&&Ee&128);for(32<ae&&(E|=(Ee&127)>>4),ae=3;32>ae&&Ee&128;ae+=7)Ee=se[me++],E|=(Ee&127)<<ae;if(Wa(K,me),128>Ee)K=re>>>0,Ee=E>>>0,(E=Ee&2147483648)&&(K=~K+1>>>0,Ee=~Ee>>>0,K==0&&(Ee=Ee+1>>>0)),K=4294967296*Ee+(K>>>0);else throw Be();return Ws(M,U,E?-K:K),!0},function(E,M,U){M=Nr(M,U),M!=null&&(typeof M=="string"&&at(M),M!=null&&(Ga(E.h,8*U),typeof M=="number"?(E=E.h,Re(M),Zl(E,et,Je)):(U=at(M),Zl(E.h,U.i,U.h))))}),I1=yi(function(E,M,U){return E.i!==0?!1:(Ws(M,U,zi(E.h)),!0)},function(E,M,U){if(M=Nr(M,U),M!=null&&M!=null)if(Ga(E.h,8*U),E=E.h,U=M,0<=U)Ga(E,U);else{for(M=0;9>M;M++)E.h.push(U&127|128),U>>=7;E.h.push(1)}}),of=yi(function(E,M,U){if(E.i!==2)return!1;var K=zi(E.h)>>>0;E=E.h;var re=fl(E,K);if(E=E.i,Jt){var ae=E,se;(se=cn)||(se=cn=new TextDecoder("utf-8",{fatal:!0})),E=re+K,ae=re===0&&E===ae.length?ae:ae.subarray(re,E);try{var me=se.decode(ae)}catch(Mt){if(rn===void 0){try{se.decode(new Uint8Array([128]))}catch{}try{se.decode(new Uint8Array([97])),rn=!0}catch{rn=!1}}throw!rn&&(cn=void 0),Mt}}else{me=re,K=me+K,re=[];for(var Ee=null,qe,it;me<K;)qe=E[me++],128>qe?re.push(qe):224>qe?me>=K?Ot():(it=E[me++],194>qe||(it&192)!==128?(me--,Ot()):re.push((qe&31)<<6|it&63)):240>qe?me>=K-1?Ot():(it=E[me++],(it&192)!==128||qe===224&&160>it||qe===237&&160<=it||((ae=E[me++])&192)!==128?(me--,Ot()):re.push((qe&15)<<12|(it&63)<<6|ae&63)):244>=qe?me>=K-2?Ot():(it=E[me++],(it&192)!==128||(qe<<28)+(it-144)>>30!==0||((ae=E[me++])&192)!==128||((se=E[me++])&192)!==128?(me--,Ot()):(qe=(qe&7)<<18|(it&63)<<12|(ae&63)<<6|se&63,qe-=65536,re.push((qe>>10&1023)+55296,(qe&1023)+56320))):Ot(),8192<=re.length&&(Ee=Wn(Ee,re),re.length=0);me=Wn(Ee,re)}return Ws(M,U,me),!0},function(E,M,U){if(M=Nr(M,U),M!=null){var K=!1;if(K=K===void 0?!1:K,Ua){if(K&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(M))throw Error("Found an unpaired surrogate");M=(Mn||(Mn=new TextEncoder)).encode(M)}else{for(var re=0,ae=new Uint8Array(3*M.length),se=0;se<M.length;se++){var me=M.charCodeAt(se);if(128>me)ae[re++]=me;else{if(2048>me)ae[re++]=me>>6|192;else{if(55296<=me&&57343>=me){if(56319>=me&&se<M.length){var Ee=M.charCodeAt(++se);if(56320<=Ee&&57343>=Ee){me=1024*(me-55296)+Ee-56320+65536,ae[re++]=me>>18|240,ae[re++]=me>>12&63|128,ae[re++]=me>>6&63|128,ae[re++]=me&63|128;continue}else se--}if(K)throw Error("Found an unpaired surrogate");me=65533}ae[re++]=me>>12|224,ae[re++]=me>>6&63|128}ae[re++]=me&63|128}}M=re===ae.length?ae:ae.subarray(0,re)}Ga(E.h,8*U+2),Ga(E.h,M.length),Qn(E,E.h.end()),Qn(E,M)}}),lf=yi(function(E,M,U,K,re){if(E.i!==2)return!1;M=ko(M,U,K),U=E.h.j,K=zi(E.h)>>>0;var ae=E.h.h+K,se=ae-U;if(0>=se&&(E.h.j=ae,re(M,E,void 0,void 0,void 0),se=ae-E.h.h),se)throw Error("Message parsing ended unexpectedly. Expected to read "+(K+" bytes, instead read "+(K-se)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return E.h.h=ae,E.h.j=U,!0},function(E,M,U,K,re){if(M=hi(M,K,U),M!=null)for(K=0;K<M.length;K++){var ae=E;Ga(ae.h,8*U+2);var se=ae.h.end();Qn(ae,se),se.push(ae.i),ae=se,re(M[K],E),se=E;var me=ae.pop();for(me=se.i+se.h.length()-me;127<me;)ae.push(me&127|128),me>>>=7,se.i++;ae.push(me),se.i++}});function sp(E){return function(M,U){e:{if(pl.length){var K=pl.pop();K.setOptions(U),Yl(K.h,M,U),M=K}else M=new xo(M,U);try{var re=Wi(E),ae=np(new re.P,M,re);break e}finally{re=M.h,re.i=null,re.m=!1,re.l=0,re.j=0,re.h=0,re.S=!1,M.l=-1,M.i=-1,100>pl.length&&pl.push(M)}ae=void 0}return ae}}function Gs(E){return function(){var M=new xa;Vc(this,M,as(E)),Qn(M,M.h.end());for(var U=new Uint8Array(M.i),K=M.j,re=K.length,ae=0,se=0;se<re;se++){var me=K[se];U.set(me,ae),ae+=me.length}return M.j=[U],U}}function bi(E){Jn.call(this,E)}b(bi,Jn);var uf=[bi,1,I1,2,Qa,3,of,4,of];bi.prototype.l=Gs(uf);function Vu(E){Jn.call(this,E,-1,o$)}b(Vu,Jn),Vu.prototype.addClassification=function(E,M){return ko(this,1,bi,E,M),this};var o$=[1],zy=sp([Vu,1,lf,uf]);function Wu(E){Jn.call(this,E)}b(Wu,Jn);var Wc=[Wu,1,Qa,2,Qa,3,Qa,4,Qa,5,Qa];Wu.prototype.l=Gs(Wc);function cf(E){Jn.call(this,E,-1,E1)}b(cf,Jn);var E1=[1],l$=sp([cf,1,lf,Wc]);function ap(E){Jn.call(this,E)}b(ap,Jn);var A1=[ap,1,Qa,2,Qa,3,Qa,4,Qa,5,Qa,6,rp],By=sp(A1);ap.prototype.l=Gs(A1);function R1(E,M,U){if(U=E.createShader(U===0?E.VERTEX_SHADER:E.FRAGMENT_SHADER),E.shaderSource(U,M),E.compileShader(U),!E.getShaderParameter(U,E.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+E.getShaderInfoLog(U));return U}function u$(E){return hi(E,bi,1).map(function(M){var U=Nr(M,1);return{index:U??0,qa:Pr(M,2),label:Nr(M,3)!=null?Vi(Nr(M,3),""):void 0,displayName:Nr(M,4)!=null?Vi(Nr(M,4),""):void 0}})}function c$(E){return{x:Pr(E,1),y:Pr(E,2),z:Pr(E,3),visibility:gl(E,4)!=null?Pr(E,4):void 0}}function Uy(E){return hi(l$(E),Wu,1).map(c$)}function Vy(E,M){this.i=E,this.h=M,this.m=0}function Wy(E,M,U){return d$(E,M),typeof E.h.canvas.transferToImageBitmap=="function"?Promise.resolve(E.h.canvas.transferToImageBitmap()):U?Promise.resolve(E.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(E.h.canvas):(E.j===void 0&&(E.j=document.createElement("canvas")),new Promise(function(K){E.j.height=E.h.canvas.height,E.j.width=E.h.canvas.width,E.j.getContext("2d",{}).drawImage(E.h.canvas,0,0,E.h.canvas.width,E.h.canvas.height),K(E.j)}))}function d$(E,M){var U=E.h;if(E.s===void 0){var K=R1(U,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),re=R1(U,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),ae=U.createProgram();if(U.attachShader(ae,K),U.attachShader(ae,re),U.linkProgram(ae),!U.getProgramParameter(ae,U.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+U.getProgramInfoLog(ae));K=E.s=ae,U.useProgram(K),re=U.getUniformLocation(K,"sampler0"),E.l={O:U.getAttribLocation(K,"aVertex"),N:U.getAttribLocation(K,"aTex"),ya:re},E.v=U.createBuffer(),U.bindBuffer(U.ARRAY_BUFFER,E.v),U.enableVertexAttribArray(E.l.O),U.vertexAttribPointer(E.l.O,2,U.FLOAT,!1,0,0),U.bufferData(U.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),U.STATIC_DRAW),U.bindBuffer(U.ARRAY_BUFFER,null),E.u=U.createBuffer(),U.bindBuffer(U.ARRAY_BUFFER,E.u),U.enableVertexAttribArray(E.l.N),U.vertexAttribPointer(E.l.N,2,U.FLOAT,!1,0,0),U.bufferData(U.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),U.STATIC_DRAW),U.bindBuffer(U.ARRAY_BUFFER,null),U.uniform1i(re,0)}K=E.l,U.useProgram(E.s),U.canvas.width=M.width,U.canvas.height=M.height,U.viewport(0,0,M.width,M.height),U.activeTexture(U.TEXTURE0),E.i.bindTexture2d(M.glName),U.enableVertexAttribArray(K.O),U.bindBuffer(U.ARRAY_BUFFER,E.v),U.vertexAttribPointer(K.O,2,U.FLOAT,!1,0,0),U.enableVertexAttribArray(K.N),U.bindBuffer(U.ARRAY_BUFFER,E.u),U.vertexAttribPointer(K.N,2,U.FLOAT,!1,0,0),U.bindFramebuffer(U.DRAW_FRAMEBUFFER?U.DRAW_FRAMEBUFFER:U.FRAMEBUFFER,null),U.clearColor(0,0,0,0),U.clear(U.COLOR_BUFFER_BIT),U.colorMask(!0,!0,!0,!0),U.drawArrays(U.TRIANGLE_FAN,0,4),U.disableVertexAttribArray(K.O),U.disableVertexAttribArray(K.N),U.bindBuffer(U.ARRAY_BUFFER,null),E.i.bindTexture2d(0)}function f$(E){this.h=E}var h$=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function p$(E,M){return M+E}function ip(E,M){window[E]=M}function m$(E){var M=document.createElement("script");return M.setAttribute("src",E),M.setAttribute("crossorigin","anonymous"),new Promise(function(U){M.addEventListener("load",function(){U()},!1),M.addEventListener("error",function(){U()},!1),document.body.appendChild(M)})}function g$(){return O(function(E){switch(E.h){case 1:return E.s=2,T(E,WebAssembly.instantiate(h$),4);case 4:E.h=3,E.s=0;break;case 2:return E.s=0,E.l=null,E.return(!1);case 3:return E.return(!0)}})}function Gy(E){if(this.h=E,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=E&&E.locateFile||p$,typeof window=="object")var M=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")M=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=M,E.options){M=o(Object.keys(E.options));for(var U=M.next();!U.done;U=M.next()){U=U.value;var K=E.options[U].default;K!==void 0&&(this.l[U]=typeof K=="function"?K():K)}}}t=Gy.prototype,t.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function O1(E){var M,U,K,re,ae,se,me,Ee,qe,it,Mt;return O(function(Et){switch(Et.h){case 1:return E.ga?(M=E.h.files===void 0?[]:typeof E.h.files=="function"?E.h.files(E.l):E.h.files,T(Et,g$(),2)):Et.return();case 2:if(U=Et.i,typeof window=="object")return ip("createMediapipeSolutionsWasm",{locateFile:E.locateFile}),ip("createMediapipeSolutionsPackedAssets",{locateFile:E.locateFile}),se=M.filter(function(pt){return pt.data!==void 0}),me=M.filter(function(pt){return pt.data===void 0}),Ee=Promise.all(se.map(function(pt){var Dt=op(E,pt.url);if(pt.path!==void 0){var Kt=pt.path;Dt=Dt.then(function(Rn){return E.overrideFile(Kt,Rn),Promise.resolve(Rn)})}return Dt})),qe=Promise.all(me.map(function(pt){return pt.simd===void 0||pt.simd&&U||!pt.simd&&!U?m$(E.locateFile(pt.url,E.ha)):Promise.resolve()})).then(function(){var pt,Dt,Kt;return O(function(Rn){if(Rn.h==1)return pt=window.createMediapipeSolutionsWasm,Dt=window.createMediapipeSolutionsPackedAssets,Kt=E,T(Rn,pt(Dt),2);Kt.i=Rn.i,Rn.h=0})}),it=function(){return O(function(pt){return E.h.graph&&E.h.graph.url?pt=T(pt,op(E,E.h.graph.url),0):(pt.h=0,pt=void 0),pt})}(),T(Et,Promise.all([qe,Ee,it]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return K=M.filter(function(pt){return pt.simd===void 0||pt.simd&&U||!pt.simd&&!U}).map(function(pt){return E.locateFile(pt.url,E.ha)}),importScripts.apply(null,l(K)),re=E,T(Et,createMediapipeSolutionsWasm(Module),6);case 6:re.i=Et.i,E.m=new OffscreenCanvas(1,1),E.i.canvas=E.m,ae=E.i.GL.createContext(E.m,{antialias:!1,alpha:!1,va:typeof WebGL2RenderingContext<"u"?2:1}),E.i.GL.makeContextCurrent(ae),Et.h=4;break;case 7:if(E.m=document.createElement("canvas"),Mt=E.m.getContext("webgl2",{}),!Mt&&(Mt=E.m.getContext("webgl",{}),!Mt))return alert("Failed to create WebGL canvas context when passing video frame."),Et.return();E.K=Mt,E.i.canvas=E.m,E.i.createContext(E.m,!0,!0,{});case 4:E.j=new E.i.SolutionWasm,E.ga=!1,Et.h=0}})}function y$(E){var M,U,K,re,ae,se,me,Ee;return O(function(qe){if(qe.h==1){if(E.h.graph&&E.h.graph.url&&E.fa===E.h.graph.url)return qe.return();if(E.u=!0,!E.h.graph||!E.h.graph.url){qe.h=2;return}return E.fa=E.h.graph.url,T(qe,op(E,E.h.graph.url),3)}for(qe.h!=2&&(M=qe.i,E.j.loadGraph(M)),U=o(Object.keys(E.D)),K=U.next();!K.done;K=U.next())re=K.value,E.j.overrideFile(re,E.D[re]);if(E.D={},E.h.listeners)for(ae=o(E.h.listeners),se=ae.next();!se.done;se=ae.next())me=se.value,w$(E,me);Ee=E.l,E.l={},E.setOptions(Ee),qe.h=0})}t.reset=function(){var E=this;return O(function(M){E.j&&(E.j.reset(),E.s={},E.v={}),M.h=0})},t.setOptions=function(E,M){var U=this;if(M=M||this.h.options){for(var K=[],re=[],ae={},se=o(Object.keys(E)),me=se.next();!me.done;ae={X:ae.X,Y:ae.Y},me=se.next())if(me=me.value,!(me in this.l&&this.l[me]===E[me])){this.l[me]=E[me];var Ee=M[me];Ee!==void 0&&(Ee.onChange&&(ae.X=Ee.onChange,ae.Y=E[me],K.push(function(qe){return function(){var it;return O(function(Mt){if(Mt.h==1)return T(Mt,qe.X(qe.Y),2);it=Mt.i,it===!0&&(U.u=!0),Mt.h=0})}}(ae))),Ee.graphOptionXref&&(me=Object.assign({},{calculatorName:"",calculatorIndex:0},Ee.graphOptionXref,{valueNumber:Ee.type===1?E[me]:0,valueBoolean:Ee.type===0?E[me]:!1,valueString:Ee.type===2?E[me]:""}),re.push(me)))}(K.length!==0||re.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(re),this.F=(this.F===void 0?[]:this.F).concat(K))}};function b$(E){var M,U,K,re,ae,se,me;return O(function(Ee){switch(Ee.h){case 1:if(!E.u)return Ee.return();if(!E.F){Ee.h=2;break}M=o(E.F),U=M.next();case 3:if(U.done){Ee.h=5;break}return K=U.value,T(Ee,K(),4);case 4:U=M.next(),Ee.h=3;break;case 5:E.F=void 0;case 2:if(E.H){for(re=new E.i.GraphOptionChangeRequestList,ae=o(E.H),se=ae.next();!se.done;se=ae.next())me=se.value,re.push_back(me);E.j.changeOptions(re),re.delete(),E.H=void 0}E.u=!1,Ee.h=0}})}t.initialize=function(){var E=this;return O(function(M){return M.h==1?T(M,O1(E),2):M.h!=3?T(M,y$(E),3):T(M,b$(E),0)})};function op(E,M){var U,K;return O(function(re){return M in E.L?re.return(E.L[M]):(U=E.locateFile(M,""),K=fetch(U).then(function(ae){return ae.arrayBuffer()}),E.L[M]=K,re.return(K))})}t.overrideFile=function(E,M){this.j?this.j.overrideFile(E,M):this.D[E]=M},t.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},t.send=function(E,M){var U=this,K,re,ae,se,me,Ee,qe,it,Mt;return O(function(Et){switch(Et.h){case 1:return U.h.inputs?(K=1e3*(M??performance.now()),T(Et,U.I,2)):Et.return();case 2:return T(Et,U.initialize(),3);case 3:for(re=new U.i.PacketDataList,ae=o(Object.keys(E)),se=ae.next();!se.done;se=ae.next())if(me=se.value,Ee=U.h.inputs[me]){e:{var pt=E[me];switch(Ee.type){case"video":var Dt=U.s[Ee.stream];if(Dt||(Dt=new Vy(U.i,U.K),U.s[Ee.stream]=Dt),Dt.m===0&&(Dt.m=Dt.i.createTexture()),typeof HTMLVideoElement<"u"&&pt instanceof HTMLVideoElement)var Kt=pt.videoWidth,Rn=pt.videoHeight;else typeof HTMLImageElement<"u"&&pt instanceof HTMLImageElement?(Kt=pt.naturalWidth,Rn=pt.naturalHeight):(Kt=pt.width,Rn=pt.height);Rn={glName:Dt.m,width:Kt,height:Rn},Kt=Dt.h,Kt.canvas.width=Rn.width,Kt.canvas.height=Rn.height,Kt.activeTexture(Kt.TEXTURE0),Dt.i.bindTexture2d(Dt.m),Kt.texImage2D(Kt.TEXTURE_2D,0,Kt.RGBA,Kt.RGBA,Kt.UNSIGNED_BYTE,pt),Dt.i.bindTexture2d(0),Dt=Rn;break e;case"detections":for(Dt=U.s[Ee.stream],Dt||(Dt=new f$(U.i),U.s[Ee.stream]=Dt),Dt.data||(Dt.data=new Dt.h.DetectionListData),Dt.data.reset(pt.length),Rn=0;Rn<pt.length;++Rn){Kt=pt[Rn];var er=Dt.data,Kr=er.setBoundingBox,Za=Rn,oa=Kt.la,mn=new ap;if(yr(mn,1,oa.sa),yr(mn,2,oa.ta),yr(mn,3,oa.height),yr(mn,4,oa.width),yr(mn,5,oa.rotation),Ws(mn,6,oa.pa),oa=mn.l(),Kr.call(er,Za,oa),Kt.ea)for(er=0;er<Kt.ea.length;++er){mn=Kt.ea[er],Kr=Dt.data,Za=Kr.addNormalizedLandmark,oa=Rn,mn=Object.assign({},mn,{visibility:mn.visibility?mn.visibility:0});var is=new Wu;yr(is,1,mn.x),yr(is,2,mn.y),yr(is,3,mn.z),mn.visibility&&yr(is,4,mn.visibility),mn=is.l(),Za.call(Kr,oa,mn)}if(Kt.ba)for(er=0;er<Kt.ba.length;++er)Kr=Dt.data,Za=Kr.addClassification,oa=Rn,mn=Kt.ba[er],is=new bi,yr(is,2,mn.qa),mn.index&&Ws(is,1,mn.index),mn.label&&Ws(is,3,mn.label),mn.displayName&&Ws(is,4,mn.displayName),mn=is.l(),Za.call(Kr,oa,mn)}Dt=Dt.data;break e;default:Dt={}}}switch(qe=Dt,it=Ee.stream,Ee.type){case"video":re.pushTexture2d(Object.assign({},qe,{stream:it,timestamp:K}));break;case"detections":Mt=qe,Mt.stream=it,Mt.timestamp=K,re.pushDetectionList(Mt);break;default:throw Error("Unknown input config type: '"+Ee.type+"'")}}return U.j.send(re),T(Et,U.I,4);case 4:re.delete(),Et.h=0}})};function x$(E,M,U){var K,re,ae,se,me,Ee,qe,it,Mt,Et,pt,Dt,Kt,Rn;return O(function(er){switch(er.h){case 1:if(!U)return er.return(M);for(K={},re=0,ae=o(Object.keys(U)),se=ae.next();!se.done;se=ae.next())me=se.value,Ee=U[me],typeof Ee!="string"&&Ee.type==="texture"&&M[Ee.stream]!==void 0&&++re;1<re&&(E.M=!1),qe=o(Object.keys(U)),se=qe.next();case 2:if(se.done){er.h=4;break}if(it=se.value,Mt=U[it],typeof Mt=="string")return Kt=K,Rn=it,T(er,v$(E,it,M[Mt]),14);if(Et=M[Mt.stream],Mt.type==="detection_list"){if(Et){for(var Kr=Et.getRectList(),Za=Et.getLandmarksList(),oa=Et.getClassificationsList(),mn=[],is=0;is<Kr.size();++is){var bl=By(Kr.get(is)),P1=Pr(bl,1),M1=Pr(bl,2),S$=Pr(bl,3),C$=Pr(bl,4),k$=Pr(bl,5,0),lp=void 0;lp=lp===void 0?0:lp,bl={la:{sa:P1,ta:M1,height:S$,width:C$,rotation:k$,pa:Vi(Nr(bl,6),lp)},ea:Uy(Za.get(is)),ba:u$(zy(oa.get(is)))},mn.push(bl)}Kr=mn}else Kr=[];K[it]=Kr,er.h=7;break}if(Mt.type==="proto_list"){if(Et){for(Kr=Array(Et.size()),Za=0;Za<Et.size();Za++)Kr[Za]=Et.get(Za);Et.delete()}else Kr=[];K[it]=Kr,er.h=7;break}if(Et===void 0){er.h=3;break}if(Mt.type==="float_list"){K[it]=Et,er.h=7;break}if(Mt.type==="proto"){K[it]=Et,er.h=7;break}if(Mt.type!=="texture")throw Error("Unknown output config type: '"+Mt.type+"'");return pt=E.v[it],pt||(pt=new Vy(E.i,E.K),E.v[it]=pt),T(er,Wy(pt,Et,E.M),13);case 13:Dt=er.i,K[it]=Dt;case 7:Mt.transform&&K[it]&&(K[it]=Mt.transform(K[it])),er.h=3;break;case 14:Kt[Rn]=er.i;case 3:se=qe.next(),er.h=2;break;case 4:return er.return(K)}})}function v$(E,M,U){var K;return O(function(re){return typeof U=="number"||U instanceof Uint8Array||U instanceof E.i.Uint8BlobList?re.return(U):U instanceof E.i.Texture2dDataOut?(K=E.v[M],K||(K=new Vy(E.i,E.K),E.v[M]=K),re.return(Wy(K,U,E.M))):re.return(void 0)})}function w$(E,M){for(var U=M.name||"$",K=[].concat(l(M.wants)),re=new E.i.StringList,ae=o(M.wants),se=ae.next();!se.done;se=ae.next())re.push_back(se.value);ae=E.i.PacketListener.implement({onResults:function(me){for(var Ee={},qe=0;qe<M.wants.length;++qe)Ee[K[qe]]=me.get(qe);var it=E.listeners[U];it&&(E.I=x$(E,Ee,M.outs).then(function(Mt){Mt=it(Mt);for(var Et=0;Et<M.wants.length;++Et){var pt=Ee[K[Et]];typeof pt=="object"&&pt.hasOwnProperty&&pt.hasOwnProperty("delete")&&pt.delete()}Mt&&(E.I=Mt)}))}}),E.j.attachMultiListener(re,ae),re.delete()}t.onResults=function(E,M){this.listeners[M||"$"]=E},W("Solution",Gy),W("OptionType",{BOOL:0,NUMBER:1,ua:2,0:"BOOL",1:"NUMBER",2:"STRING"});function _1(E){switch(E===void 0&&(E=0),E){case 1:return"pose_landmark_full.tflite";case 2:return"pose_landmark_heavy.tflite";default:return"pose_landmark_lite.tflite"}}function D1(E){var M=this;E=E||{},this.h=new Gy({locateFile:E.locateFile,files:function(U){return[{url:"pose_solution_packed_assets_loader.js"},{simd:!1,url:"pose_solution_wasm_bin.js"},{simd:!0,url:"pose_solution_simd_wasm_bin.js"},{data:!0,url:_1(U.modelComplexity)}]},graph:{url:"pose_web.binarypb"},listeners:[{wants:["pose_landmarks","world_landmarks","segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:Uy},poseWorldLandmarks:{type:"proto",stream:"world_landmarks",transform:Uy},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(U){var K,re,ae;return O(function(se){return se.h==1?(K=_1(U),re="third_party/mediapipe/modules/pose_landmark/"+K,T(se,op(M.h,K),2)):(ae=se.i,M.h.overrideFile(re,ae),se.return(!0))})}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}}}})}t=D1.prototype,t.reset=function(){this.h.reset()},t.close=function(){return this.h.close(),Promise.resolve()},t.onResults=function(E){this.h.onResults(E)},t.initialize=function(){var E=this;return O(function(M){return T(M,E.h.initialize(),0)})},t.send=function(E,M){var U=this;return O(function(K){return T(K,U.h.send(E,M),0)})},t.setOptions=function(E){this.h.setOptions(E)},W("Pose",D1),W("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),W("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),W("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),W("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),W("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),W("VERSION","0.5.1675469404")}).call(eA)),eA}var TBe=NBe();/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bo=ve();bo.registerFlag("WEBGPU_DEFERRED_SUBMIT_BATCH_SIZE",()=>15);bo.registerFlag("WEBGPU_CPU_FORWARD",()=>!0);bo.registerFlag("WEBGPU_MATMUL_PROGRAM_TYPE",()=>-1);bo.registerFlag("WEBGPU_USE_NAIVE_CONV2D_TRANSPOSE",()=>!0);bo.registerFlag("WEBGPU_USE_LOW_POWER_GPU",()=>!1);bo.registerFlag("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e3);bo.registerFlag("WEBGPU_USE_PROFILE_TOOL",()=>!1);bo.registerFlag("WEBGPU_IMPORT_EXTERNAL_TEXTURE",()=>!0);bo.registerFlag("WEBGPU_USE_NAIVE_CONV2D_DEBUG",()=>!1);bo.registerFlag("WEBGPU_THRESHOLD_TO_INCREASE_WORKGROUPS_FOR_MATMUL",()=>-1);bo.registerFlag("WEBGPU_CONV_SEPARATE_IM2COL_SHADER",()=>!1);bo.registerFlag("WEBGPU_PRINT_SHADER",()=>"");bo.registerFlag("WEBGPU_ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $Be{constructor(e){e&&(this.vendor=e.vendor,this.architecture=e.architecture,this.intelGPUGeneration=this.getIntelGPUGeneration())}getIntelGPUGeneration(){if(this.isIntel()){if(this.architecture.startsWith("gen"))return Number(this.architecture.match(/\d+/));if(this.architecture.startsWith("xe"))return 12}return 0}isIntel(){return this.vendor==="intel"}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IBe{constructor(e){this.device=e,this.numUsedBuffers=0,this.numFreeBuffers=0,this.freeBuffers=new Map,this.usedBuffers=new Map,this.numBytesUsed=0,this.numBytesAllocated=0}acquireBuffer(e,n,r=!1,s=!0){let a;const i=sW(e,n);return s?(this.freeBuffers.has(i)||this.freeBuffers.set(i,[]),this.freeBuffers.get(i).length>0?(a=this.freeBuffers.get(i).pop(),this.numFreeBuffers--):(a=this.device.createBuffer({size:e,usage:n,mappedAtCreation:r}),this.numBytesAllocated+=e)):(a=this.device.createBuffer({size:e,usage:n,mappedAtCreation:r}),this.numBytesAllocated+=e),this.usedBuffers.has(i)||this.usedBuffers.set(i,[]),this.usedBuffers.get(i).push(a),this.numUsedBuffers++,this.numBytesUsed+=e,a}releaseBuffer(e,n=!0){if(this.freeBuffers.size===0)return;const r=e.size,s=e.usage,a=sW(r,s),i=this.usedBuffers.get(a),o=i.indexOf(e);if(o<0)throw new Error("Cannot find the buffer in buffer manager");i[o]=i[i.length-1],i.pop(),this.numUsedBuffers--,this.numBytesUsed-=r,n?(this.freeBuffers.get(a).push(e),this.numFreeBuffers++):(e.destroy(),this.numBytesAllocated-=r)}getNumUsedBuffers(){return this.numUsedBuffers}getNumFreeBuffers(){return this.numFreeBuffers}dispose(){this.freeBuffers.forEach((e,n)=>{e.forEach(r=>{r.destroy()})}),this.usedBuffers.forEach((e,n)=>{e.forEach(r=>{r.destroy()})}),this.freeBuffers=new Map,this.usedBuffers=new Map,this.numUsedBuffers=0,this.numFreeBuffers=0,this.numBytesUsed=0,this.numBytesAllocated=0}}function sW(t,e){return`${t}_${e}`}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EBe{constructor(e){this.device=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures=new Map,this.usedTextures=new Map,this.numBytesUsed=0,this.numBytesAllocated=0}acquireTexture(e,n,r,s){const a=iW(r),i=e*n*a,o=aW(e,n,r,s);if(this.freeTextures.has(o)||this.freeTextures.set(o,[]),this.usedTextures.has(o)||this.usedTextures.set(o,[]),this.numBytesUsed+=i,this.numUsedTextures++,this.freeTextures.get(o).length>0){this.numFreeTextures--;const u=this.freeTextures.get(o).shift();return this.usedTextures.get(o).push(u),u}this.numBytesAllocated+=i;const l=this.device.createTexture({size:[e,n],format:r,usage:s});return this.usedTextures.get(o).push(l),l}releaseTexture(e){if(this.freeTextures.size===0)return;const n=e.width,r=e.height,s=e.format,a=e.usage,i=aW(n,r,s,a);this.freeTextures.has(i)||this.freeTextures.set(i,[]),this.freeTextures.get(i).push(e),this.numFreeTextures++,this.numUsedTextures--;const o=this.usedTextures.get(i),l=o.indexOf(e);if(l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(l,1);const u=iW(s),c=n*r*u;this.numBytesUsed-=c}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){this.freeTextures.forEach((e,n)=>{e.forEach(r=>{r.destroy()})}),this.usedTextures.forEach((e,n)=>{e.forEach(r=>{r.destroy()})}),this.freeTextures=new Map,this.usedTextures=new Map,this.numUsedTextures=0,this.numFreeTextures=0,this.numBytesUsed=0,this.numBytesAllocated=0}}function aW(t,e,n,r){return`${t}_${e}_${n}_${r}`}function iW(t){if(t==="rgba8unorm")return 16;throw new Error(`${t} is not supported!`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ABe(t,e){if(Math.max(...t)>5)throw new Error("Cannot symbolically compute strides for rank > 6 tensor.");const n=t.length,r="xyzwuv",s=t.map(i=>`${e}.${r[i]}`),a=new Array(n-1);a[n-2]=s[n-1];for(let i=n-3;i>=0;--i)a[i]=`(${a[i+1]} * ${s[i+1]})`;return a}const Zd=(t,e,n)=>n==="int32"?`atomicAdd(${t}, bitcast<i32>(${e}));`:`
          {
            var oldValue = 0;
            loop {
              let newValueF32 = bitcast<f32>(oldValue) + (${e});
              let newValue = bitcast<i32>(newValueF32);
              let res = atomicCompareExchangeWeak(${t}, oldValue, newValue);
              if res.exchanged {
                break;
              }
              oldValue = res.old_value;
            }
          }`;/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Lm;(function(t){t[t.FROM_PIXELS=0]="FROM_PIXELS",t[t.DRAW=1]="DRAW"})(Lm||(Lm={}));const RBe=(t,e,n,r,s)=>{const a={dtype:r.dtype,shape:r.shape},i=_Be(n,a,e),o=t.createShaderModule({code:i,label:e.constructor.name});let l=ve().get("WEBGPU_PRINT_SHADER");if(l!==""){l=l.toLowerCase();const u=l.split(",");(l==="all"||u.some(c=>e.shaderKey.toLowerCase().includes(c)))&&(console.group(e.shaderKey),console.debug(i),console.groupEnd())}return s?t.createComputePipelineAsync({compute:{module:o,entryPoint:"_start"},label:e.constructor.name,layout:"auto"}):t.createComputePipeline({compute:{module:o,entryPoint:"_start"},label:e.constructor.name,layout:"auto"})},Yt=(t,e="f32")=>{switch(t){case 1:return`${e}`;case 2:return`vec2<${e}>`;case 3:return`vec3<${e}>`;case 4:return`vec4<${e}>`;default:throw new Error(`${t}-component ${e} is not supported.`)}};function ts(t){if(t<=1)return"i32";if(t===2)return"vec2<i32>";if(t===3)return"vec3<i32>";if(t===4)return"vec4<i32>";if(t===5)return"vec5";if(t===6)return"vec6";throw Error(`GPU for rank ${t} is not yet supported`)}function vc(t){if(t===0)return"x";if(t===1)return"y";if(t===2)return"z";if(t===3)return"w";if(t===4)return"u";if(t===5)return"v";throw Error(`Index ${t} is not yet supported`)}function rt(...t){let e;switch(t.length){case 0:e=`
        fn main()
      `;break;case 1:e=`
        fn main(${t[0]} : i32)
      `;break;default:throw Error("Unreachable")}return e}function oW(t,e){let n;return n=`
     ${OBe(e)}
      fn _start(@builtin(local_invocation_id) LocalId : vec3<u32>,
                @builtin(global_invocation_id) GlobalId : vec3<u32>,
                @builtin(local_invocation_index) LocalIndex: u32,
                @builtin(workgroup_id) WorkgroupId : vec3<u32>,
                @builtin(num_workgroups) NumWorkgroups : vec3<u32>) {
        localId = LocalId;
        localIndex = LocalIndex;
        globalId = GlobalId;
        numWorkgroups = NumWorkgroups;
        workgroupId = WorkgroupId;
        ${t?"main(getGlobalIndex());":"main();"};
      }
    `,n}function OBe(t){return`
  @compute @workgroup_size(${t.workgroupSize[0]}, ${t.workgroupSize[1]}, ${t.workgroupSize[2]})
`}function _Be(t,e,n){const r=[],s=n.workgroupSize[0]*n.workgroupSize[1]*n.workgroupSize[2];if(n.outputComponent=n.outputComponent?n.outputComponent:1,r.push(`

      var<private> localId: vec3<u32>;
      var<private> localIndex: u32;
      var<private> globalId: vec3<u32>;
      var<private> numWorkgroups: vec3<u32>;
      var<private> workgroupId: vec3<u32>;

      // Only used when the y/z dimension of workgroup size is 1.
      fn getGlobalIndex() -> i32 {
        ${Kne(n)?"  return i32(globalId.x);":`  return i32((workgroupId.z * numWorkgroups.x * numWorkgroups.y +
                workgroupId.y * numWorkgroups.x + workgroupId.x) * ${s}u +
                localIndex);
        `}
      }
    `),n.pixelsOpType!=null){const g=n.pixelsOpType===Lm.FROM_PIXELS?`@group(0) @binding(0) var<storage, read_write> result: array<${Wf(e.dtype,n.outputComponent)}>;`:`@group(0) @binding(1) var<storage, read> inBuf : array<${Wf(t[0].dtype,n.outputComponent)}>;`,y=e.shape.length===3?"vec2<i32>":"i32";r.push(`
        struct Uniform {
          outShapeStrides : ${y},
          size            : i32,
          numChannels     : i32,
          alpha           : f32,
        };

        ${g}
        @group(0) @binding(2) var<uniform> uniforms: Uniform;
      `);const b=uW(n);return[lW,r.join(`
`),FS(e.shape),n.getUserCode(),oW(b,n)].join(`
`)}let a,i,o="struct Uniforms { NAN : f32, INFINITY : f32, ";n.variableNames.forEach((g,y)=>{const b=ts(t[y].shape.length);o+=`${g.charAt(0).toLowerCase()+g.slice(1)}Shape : ${b}, `,a=t[y].shape.length-1,i=ts(a),o+=`${g.charAt(0).toLowerCase()+g.slice(1)}ShapeStrides: ${i}, `});const l=ts(e.shape.length);o+=`outShape : ${l}, `,a=e.shape.length-1,i=ts(a),o+=`
         outShapeStrides: ${i}, `,n.size&&(o+="size : i32, "),n.uniforms&&(o+=n.uniforms),o+="};",o=UBe(o),r.push(o),n.atomic?r.push(`
      @group(0) @binding(0) var<storage, read_write> result: array<atomic<i32>>;
    `):r.push(`
      @group(0) @binding(0) var<storage, read_write> result: array<${Wf(e.dtype,n.outputComponent)}>;
    `),n.variableNames.forEach((g,y)=>{r.push(`
      @group(0) @binding(${1+y}) var<storage, read> ${g}: array<${n.variableComponents?Wf(t[y].dtype,n.variableComponents[y]):Wf(t[y].dtype,n.outputComponent)}>;
        `)}),o!==""&&r.push(`
      @group(0) @binding(${1+n.variableNames.length}) var<uniform> uniforms: Uniforms;
      `);const u=FBe(e.shape,n.dispatchLayout),c=[lW,r.join(`
`)+PBe,FS(e.shape),u,zBe(e.shape.length)];n.atomic||c.push(BBe(e.shape,e.dtype,n.outputComponent)),n.variableNames.forEach((g,y)=>{c.push(`${FS(t[y].shape,g)}`)});const d=t.map((g,y)=>LBe(g,e.shape,n.variableComponents?n.variableComponents[y]:n.outputComponent,n.dispatchLayout.x.length===e.shape.length)).join(`
`);c.push(d),c.push(n.getUserCode());const h=uW(n);return c.push(oW(h,n)),c.join(`
`)}function DBe(t,e,n){let r=t.shaderKey;if(t.pixelsOpType!=null)return r;const s=[],a=[];e.forEach(c=>{s.push(c.shape),a.push(c.dtype)}),s.push(n.shape),a.push(n.dtype);const i=e.map(c=>_d(c.shape,n.shape)),o=e.map(c=>Xt(c.shape,n.shape)).join("_"),l=i.map(c=>c.join("_")).join(";"),u=Kne(t)?"flatDispatch":"";return r+="_"+(t.workgroupSize?t.workgroupSize.join(","):"")+s.map(c=>c.length).join(",")+a.join(",")+t.variableNames.join(",")+l+o+u,r}const lW=`
  struct vec5 {x: i32, y: i32, z: i32, w: i32, u: i32};
  struct vec6 {x: i32, y: i32, z: i32, w: i32, u: i32, v: i32};

  // Checks whether coordinates lie within the bounds of the shape.
  fn coordsInBounds2D(coord : vec2<i32>, shape : vec2<i32>) -> bool {
    return all(coord >= vec2<i32>(0)) && all(coord < shape);
  }
  fn coordsInBounds3D(coord : vec3<i32>, shape : vec3<i32>) -> bool {
    return all(coord >= vec3<i32>(0)) && all(coord < shape);
  }
  fn coordsInBounds4D(coord : vec4<i32>, shape : vec4<i32>) -> bool {
    return all(coord >= vec4<i32>(0)) && all(coord < shape);
  }

  fn getIndexFromCoords1D(coord : i32, shape : i32) -> i32 {
    return coord;
  }
  fn getIndexFromCoords2D(coords : vec2<i32>, shape : vec2<i32>) -> i32 {
    return dot(coords, vec2<i32>(shape.y, 1));
  }
  fn getIndexFromCoords3D(coords : vec3<i32>, shape : vec3<i32>) -> i32 {
    return dot(coords, vec3<i32>(shape.y * shape.z, shape.z, 1));
  }
  fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {
    return dot(coords, vec4<i32>(
        shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));
  }
  fn getIndexFromCoords5D(coords : vec5, shape : vec5) -> i32 {
    let shapeStrides: vec5 = vec5(shape.y * shape.z * shape.w * shape.u, shape.z * shape.w * shape.u, shape.w * shape.u, shape.u, 1);
    return coords.x*shapeStrides.x + coords.y*shapeStrides.y + coords.z*shapeStrides.z + coords.w*shapeStrides.w + coords.u*shapeStrides.u;
  }
  fn getIndexFromCoords6D(coords : vec6, shape : vec6) -> i32 {
    let shapeStrides: vec6 = vec6(shape.y * shape.z * shape.w * shape.u * shape.v, shape.z * shape.w * shape.u * shape.v, shape.w * shape.u * shape.v, shape.u * shape.v, shape.v, 1);
    return coords.x*shapeStrides.x + coords.y*shapeStrides.y + coords.z*shapeStrides.z + coords.w*shapeStrides.w + coords.u*shapeStrides.u + coords.v*shapeStrides.v;
  }

  // NaN defination in IEEE 754-1985 is :
  //   - sign = either 0 or 1.
  //   - biased exponent = all 1 bits.
  //   - fraction = anything except all 0 bits (since all 0 bits represents infinity).
  // https://en.wikipedia.org/wiki/IEEE_754-1985#Representation_of_non-numbers
  fn isnan(val: f32) -> bool {
    let floatToUint: u32 = bitcast<u32>(val);
    return (floatToUint & 0x7fffffffu) > 0x7f800000u;
  }
  fn isnanVec4(val : vec4<f32>) -> vec4<bool> {
    let floatToUint: vec4<u32> = bitcast<vec4<u32>>(val);
    return (floatToUint & vec4<u32>(0x7fffffffu)) > vec4<u32>(0x7f800000u);
  }
`,PBe=`
  fn isinf(val: f32) -> bool {
    return abs(val) == uniforms.INFINITY;
  }
`;function FS(t,e=""){const n=t.length,r=e!==""?`get${e.charAt(0).toUpperCase()+e.slice(1)}CoordsFromIndex`:"getCoordsFromIndex",s=e!==""?`${e.charAt(0).toLowerCase()+e.slice(1)}ShapeStrides`:"outShapeStrides";if(n<=1)return`fn ${r}(index : i32) -> i32 { return index; }`;const a=$t(t),i=ts(n),o=[];for(let u=0;u<n;u++)o.push(`d${u}`);if(a.length===1)return`    fn ${r}(index : i32) -> vec2<i32> {
      let d0 = index / uniforms.${s}; let d1 = index - d0 * uniforms.${s};
      return vec2<i32>(d0, d1);
    }`;let l;return l="var index2 = index;"+a.map((u,c)=>{const d=`let ${o[c]} = index2 / uniforms.${s}.${vc(c)}`,h=c===a.length-1?`let ${o[c+1]} = index2 - ${o[c]} * uniforms.${s}.${vc(c)}`:`index2 = index2 - ${o[c]} * uniforms.${s}.${vc(c)}`;return`${d}; ${h};`}).join(""),`
    fn ${r}(index : i32) -> ${i} {
      ${l}
      return ${i}(${o.join(",")});
    }
  `}function MBe(t,e){const n=t.name,r=t.shape.length,s=ts(r),a="get"+n.charAt(0).toUpperCase()+n.slice(1),i=["d0","d1","d2","d3","d4","d5"].slice(0,r),o=i.map(c=>`${c} : i32`).join(", ");if(r<1)return`
      fn ${a}() -> ${Yt(e)} {
        return ${Yt(e)}(${n}[0]);
      }
    `;const l=`uniforms.${n.charAt(0).toLowerCase()+n.slice(1)}Shape`;let u=`${r}D`;return r===0&&(u="1D"),`
    fn ${a}(${o}) -> ${Yt(e)} {
      return ${Yt(e)}(${n}[getIndexFromCoords${u}(${s}(${i.join(",")}),
        ${l})${e===1?"":` / ${e}`}]);
    }
   `}function jBe(t,e,n,r){const s=t.name,a=s.charAt(0).toUpperCase()+s.slice(1),i="get"+a+"ByOutput",o=t.shape.length,l=e.length,u=ts(l);if(Xt(t.shape,e)&&r)return`
    fn ${i}Index(globalIndex : i32) -> ${Yt(n)} {
      return ${Yt(n)}(${s}[globalIndex]);
    }

    fn ${i}Coords(coords : ${u}) -> ${Yt(n)} {
      return ${Yt(n)}(${s}[${l>1?"getOutputIndexFromCoords(coords)":"coords"}${n===1?"":` / ${n}`}]);
    }
    `;const c=_d(t.shape,e),d=l-o;let h="";if(o===0)return`
    fn ${i}Index(globalIndex : i32) -> ${Yt(n)}{
      return get${a}();
    }

    fn ${i}Coords(coords : ${u}) -> ${Yt(n)}{
      return get${a}();
    }
  `;l<2&&c.length>=1?h="coords = 0;":h=c.map(b=>`coords.${vc(b+d)} = 0;`).join(`
`);let m="";if(l<2&&o>0)m="coords";else if(l>1){const b=ts(o),w=t.shape.map((C,k)=>`coords.${vc(k+d)}`).join(", ");m=`${b}(${w})`}else m="coords";const g=`uniforms.${s.charAt(0).toLowerCase()+s.slice(1)}Shape`,y=`${o}D`;return`
  fn ${i}Index(globalIndex : i32) -> ${Yt(n)} {
    var coords = getCoordsFromIndex(globalIndex);
    ${h}
    return ${Yt(n)}(${s}[getIndexFromCoords${y}(${m}, ${g})${n===1?"":` / ${n}`}]);
  }

  fn ${i}Coords(coordsIn : ${u}) -> ${Yt(n)} {
    var coords = coordsIn;
    ${h}
    return ${Yt(n)}(${s}[getIndexFromCoords${y}(${m}, ${g})${n===1?"":` / ${n}`}]);
  }
`}function LBe(t,e,n,r){let s=MBe(t,n);return t.shape.length<=e.length&&(s+=jBe(t,e,n,r)),s}function FBe(t,e){const{x:n,y:r=[],z:s=[]}=e,a=t.length,i=n.length+r.length+s.length;if(i!==a)return"";if(n.length===a)return`fn getOutputCoords() -> ${ts(a)}{
    let globalIndex = getGlobalIndex();
    return getCoordsFromIndex(globalIndex);
  }
  `;let o="";const l=[n,r,s];for(let h=0;h<l.length;h++){const m=l[h];if(m.length!==0)if(m.length===1)o+=`let d${m[0]} = i32(globalId[${h}]);`;else{const g=ABe(m,"uniforms.outShape");o+=`var index${h} = i32(globalId[${h}]);`;for(let y=0;y<g.length;y++)o+=`let d${m[y]} = index${h} / ${g[y]};`,y===g.length-1?o+=`let d${m[y+1]} = index${h} - d${m[y]} * ${g[y]};`:o+=`index${h} = index${h} - d${m[y]} * ${g[y]};`}}const u=[];for(let h=0;h<i;h++)u.push(`d${h}`);const c=ts(i);let d=`fn getOutputCoords() -> ${c} {
  ${o}
`;return u.length===0?d+=`return ${c}(0); }`:d+=`return ${c}(${u.join(",")}); }`,d}function zBe(t){let e="";switch(t){case 0:case 1:e+=`
        fn getOutputIndexFromCoords(coords : i32) -> i32 {
          return coords;
        }
        `;break;case 2:e+=`
        fn getOutputIndexFromCoords(coords : vec2<i32>) -> i32 {
          return dot(coords, vec2<i32>(uniforms.outShapeStrides, 1));
        }
        `;break;case 3:e+=`
        fn getOutputIndexFromCoords(coords : vec3<i32>) -> i32 {
          return dot(coords, vec3<i32>(uniforms.outShapeStrides.x, uniforms.outShapeStrides.y, 1));
        }
        `;break;case 4:e+=`
        fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {
          return dot(coords, vec4<i32>(
            uniforms.outShapeStrides.x, uniforms.outShapeStrides.y, uniforms.outShapeStrides.z, 1));
        }
        `;break;case 5:e+=`
        fn getOutputIndexFromCoords(coords : vec5) -> i32 {
          return coords.x * uniforms.outShapeStrides.x +
              coords.y * uniforms.outShapeStrides.y +
              coords.z * uniforms.outShapeStrides.z +
              coords.w * uniforms.outShapeStrides.w +
              coords.u;
        }
        `;break;case 6:e+=`
        fn getOutputIndexFromCoords(coords : vec6) -> i32 {
          return coords.x * uniforms.outShapeStrides.x +
              coords.y * uniforms.outShapeStrides.y +
              coords.z * uniforms.outShapeStrides.z +
              coords.w * uniforms.outShapeStrides.w +
              coords.u * uniforms.outShapeStrides.u +
              coords.v;
        }
        `;break;default:X(!1,()=>`Unsupported ${t}D shape`);break}return e}function Kne(t){return t.dispatch[1]===1&&t.dispatch[2]===1}function Wf(t,e=1){if(t==="float32")return Yt(e,"f32");if(t==="int32"||t==="bool")return Yt(e,"i32");throw new Error(`type ${t} is not supported.`)}function BBe(t,e,n){const r=t.length,s=Wf(e,n);let a=`fn setOutputAtIndex(flatIndex : i32, value : ${Yt(n)}) {
      result[flatIndex] = ${s}(value);
    }

    fn setOutputAtIndexI32(flatIndex : i32, value : ${Yt(n,"i32")}) {
      result[flatIndex] = ${s}(value);
    }
    `;if(r>=2){const i=["d0","d1","d2","d3","d4","d5"].slice(0,r),o=ts(r);a+=`
      fn setOutputAtCoords(${i.map(l=>`${l} : i32`).join(", ")}, value : ${Yt(n)}) {
        let flatIndex = getOutputIndexFromCoords(${o}(${i.join(", ")}));
        setOutputAtIndex(flatIndex${n===1?"":` / ${n}`}, value);
      }
      fn setOutputAtCoordsI32(${i.map(l=>`${l} : i32`).join(", ")}, value : ${Yt(n,"i32")}) {
        let flatIndex = getOutputIndexFromCoords(${o}(${i.join(", ")}));
        setOutputAtIndexI32(flatIndex${n===1?"":` / ${n}`}, value);
      }
    `}return a}function UBe(t){const e=/(\w+)\s*:\s*vec(5|6)/g;t=t.replace(e,r=>"@align(16) "+r);const n=/vec(5|6)\s*,\s*(\w+)/g;return t=t.replace(n,(r,s,a)=>`vec${s}, @align(16) ${a}`),t}function uW(t){return!(t.dispatchLayout.hasOwnProperty("y")&&t.dispatchLayout.y.length!==0||t.dispatchLayout.hasOwnProperty("z")&&t.dispatchLayout.z.length!==0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sh=t=>{let e=1;for(let n=0;n<t.length;n++)e*=t[n];return e};function st(t,e,n=[1,1,1],r=[1,1,1]){const[s,a,i]=[Math.ceil(sh(t.x.map(o=>e[o]))/(n[0]*r[0])),t.y?Math.ceil(sh(t.y.map(o=>e[o]))/(n[1]*r[1])):1,t.z?Math.ceil(sh(t.z.map(o=>e[o]))/(n[2]*r[2])):1];return[s,a,i]}function VBe(t,e,n,r=!1){const s=[8,8,1],a=[4,4,1];return r||(t<=8&&(a[1]=1),e<=16&&n<=16&&(s[0]=4)),{workgroupSize:s,elementsPerThread:a}}function Xne(t,e,n=!1){if(n)return[8,8,1];const r=sh(t.x.map(a=>e[a])),s=sh(t.y.map(a=>e[a]));return r<=4?[4,16,1]:s<=4?[16,4,1]:[16,16,1]}function Yne(t,e,n=!1){if(n)return[4,4,1];const r=sh(t.x.map(a=>e[a])),s=sh(t.y.map(a=>e[a]));return r<=4?[1,2,1]:s<=4?[2,1,1]:[2,2,1]}function ht(t){return{x:t.map((e,n)=>n)}}function cW(t){if(t==="float32"||t==="int32"||t==="bool"||t==="string")return 4;if(t==="complex64")return 8;throw new Error(`Unknown dtype ${t}`)}function Qne(){return!!(typeof globalThis<"u"&&globalThis.navigator&&globalThis.navigator.gpu)}function Zne(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&X(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGPU backend.`)})}var ou;(function(t){t[t.MatMulReduceProgram=0]="MatMulReduceProgram",t[t.MatMulSplitKProgram=1]="MatMulSplitKProgram",t[t.MatMulSmallOutputSizeProgram=2]="MatMulSmallOutputSizeProgram",t[t.MatMulPackedProgram=3]="MatMulPackedProgram",t[t.MatMulMax=4]="MatMulMax"})(ou||(ou={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WBe=ve().getNumber("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD"),GBe=(t,e)=>{const n=t.limits.maxComputeWorkgroupsPerDimension,r=e.dispatchLayout,s=e.dispatch;if(s.every(i=>i<=n))return s;X(s[0]>n&&r.y===void 0&&r.z===void 0,()=>"Dispatch size exceeds WebGPU limits in Y or Z dimension.");let a=Math.ceil(Math.sqrt(s[0]));return a>n?(a=Math.ceil(Math.cbrt(s[0])),X(a<=n,()=>"Total dispatch size exceeds WebGPU maximum."),[a,a,a]):[a,a,1]};class Ny extends ZC{nextDataId(){return Ny.nextDataId++}constructor(e,n){if(super(),this.commandQueueOwnedIds=new WeakSet,this.dispatchCountInPass=0,this.disposed=!1,this.downloadWaitMs=0,this.tensorDataPendingDisposal=[],this.queryResolveBuffer=null,this.querySet=null,this.querySetCount=2,this.stagingPendingDisposal=[],this.uniformPendingDisposal=[],this.uploadWaitMs=0,this.hasReadSyncWarned=!1,this.hasTimestampQueryWarned=!1,!Qne())throw new Error("WebGPU is not supported on this device");this.pipelineCache={},this.device=e,this.queue=e.queue,this.commandEncoder=null,this.computePassEncoder=null,this.adapterInfo=new $Be(n),this.supportTimestampQuery=this.device.features.has("timestamp-query"),this.thresholdToIncreaseWorkgroups=this.adapterInfo.intelGPUGeneration>=12?16:8,this.bufferManager=new IBe(this.device),this.textureManager=new EBe(this.device),this.tensorMap=new FM(this,Aa()),ve().getBool("WEBGPU_USE_PROFILE_TOOL")&&(this.dummyCanvas=document.createElement("canvas"),this.dummyCanvas.width=1,this.dummyCanvas.height=1,this.dummyContext=this.dummyCanvas.getContext("webgpu"),this.dummyContext.configure({device:e,format:"bgra8unorm"}),document.body.appendChild(this.dummyCanvas))}floatPrecision(){return 32}disposeData(e,n=!1){if(!this.tensorMap.has(e))return!0;const r=this.tensorMap.get(e);return n?r.refCount=0:r.refCount--,r.refCount>0?!1:(r.complexTensorInfos!=null&&(this.disposeData(r.complexTensorInfos.real.dataId),this.disposeData(r.complexTensorInfos.imag.dataId)),this.commandQueueOwnedIds.has(e)?(this.tensorDataPendingDisposal.push(e),!0):(this.releaseResource(e),this.tensorMap.delete(e),!0))}memory(){return{numBytesInGPU:this.bufferManager.numBytesUsed,numBytesAllocatedInGPU:this.bufferManager.numBytesAllocated,unreliable:!1}}releaseResource(e){const n=this.tensorMap.get(e);if(!(!n||!n.resource)){if(n.external){n.resource=null;return}n.resource instanceof GPUBuffer?this.bufferManager.releaseBuffer(n.resource):n.resource instanceof GPUTexture&&this.textureManager.releaseTexture(n.resource),n.resource=null}}refCount(e){return this.tensorMap.has(e)?this.tensorMap.get(e).refCount:0}incRef(e){const n=this.tensorMap.get(e);n.refCount++}decRef(e){if(this.tensorMap.has(e)){const n=this.tensorMap.get(e);n.refCount--}}write(e,n,r){if(r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.tensorMap.set(s,{dtype:r,shape:n,values:e,refCount:1}),s}move(e,n,r,s,a){if(s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.tensorMap.set(e,{dtype:s,shape:r,values:n,refCount:a})}submitQueue(){this.queue.submit([this.commandEncoder.finish()]),this.commandEncoder=null,this.dispatchCountInPass=0,this.commandQueueOwnedIds=new WeakSet,this.tensorDataPendingDisposal.forEach(e=>{this.releaseResource(e),this.tensorMap.delete(e)}),this.uniformPendingDisposal.forEach(e=>this.bufferManager.releaseBuffer(e)),this.stagingPendingDisposal.forEach(e=>this.bufferManager.releaseBuffer(e,!1)),this.tensorDataPendingDisposal=[],this.uniformPendingDisposal=[],this.stagingPendingDisposal=[]}ensureCommandEncoderReady(){this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder())}endComputePassEncoder(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}async checkCompileCompletionAsync(){let e;try{e=await Promise.all(Object.values(this.pipelineCache))}catch(n){throw new Error(n.message)}Object.keys(this.pipelineCache).map((n,r)=>{this.pipelineCache[n]=e[r]})}async getBufferData(e){if(ve().getBool("WEBGPU_ENGINE_COMPILE_ONLY"))return console.warn("The data may be invalid since WEBGPU_ENGINE_COMPILE_ONLY is true, this can only be called when WEBGPU_ENGINE_COMPILE_ONLY is false"),null;const n=e.size,r=this.bufferManager.acquireBuffer(n,GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ);this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(e,0,r,0,n),this.submitQueue(),await r.mapAsync(GPUMapMode.READ);const s=r.getMappedRange().slice(0);return r.unmap(),r!=null&&this.bufferManager.releaseBuffer(r),ve().getBool("WEBGPU_USE_PROFILE_TOOL")&&(X(this.dummyContext!==void 0,()=>"Fail to get context for profiling tool"),this.dummyContext.getCurrentTexture()),s}convertAndCacheOnCPU(e,n){const r=this.tensorMap.get(e);return r.values=n,r.values}readSync(e){const n=this.tensorMap.get(e),{values:r,complexTensorInfos:s}=n;if(r!=null||n.dtype==="string")return r;if(n.dtype==="complex64"){const y=this.readSync(s.real.dataId),b=this.readSync(s.imag.dataId),w=$S(Fl(y,b).buffer,"float32");return this.convertAndCacheOnCPU(e,w),w}this.hasReadSyncWarned||(this.hasReadSyncWarned=!0,console.warn("The performance of synchronously reading data from GPU to CPU is poor on the webgpu backend, please use asynchronous APIs instead."));const a=["opaque","premultiplied"],i=n.resource,o=i.size;X(o%4===0,()=>"Because there is 4 bytes for one pixel, buffer size must be multiple of 4.");const l=o/4,u=new ArrayBuffer(o),c=256,d=256,h=a.map(y=>new OffscreenCanvas(c,d)),m=new OffscreenCanvas(c,d);this.endComputePassEncoder(),h.map((y,b)=>{const w=y.getContext("webgpu");return w.configure({device:this.device,format:"bgra8unorm",usage:GPUTextureUsage.COPY_DST,alphaMode:a[b]}),w.getCurrentTexture()}).map((y,b)=>{const w=c*4,C=(D,P,R)=>{this.ensureCommandEncoderReady(),this.commandEncoder.copyBufferToTexture({buffer:i,bytesPerRow:w,offset:R},{texture:y},{width:D,height:P}),this.submitQueue();const O=m.getContext("2d",{willReadFrequently:!0});O.clearRect(0,0,D,P),O.drawImage(h[b],0,0);const F=O.getImageData(0,0,D,P).data,z=a[b],V=new Uint8ClampedArray(u,R,D*P*4);for(let W=0;W<V.length;W+=4)if(z==="premultiplied")V[W+3]=F[W+3];else{const j=F[W];V[W]=F[W+2],V[W+1]=F[W+1],V[W+2]=j}},k=Math.floor(l/(c*d));let T=c,N=d,I=0;for(let D=0;D<k;D++)C(T,N,I),I+=c*d*4;const A=l%(c*d);N=Math.floor(A/c),N>0&&(C(T,N,I),I+=N*(c*4)),T=A%c,T>0&&C(T,1,I)});const g=$S(u,n.dtype);return this.convertAndCacheOnCPU(e,g),g}async read(e){if(!this.tensorMap.has(e))throw new Error(`Tensor ${e} was not registered!`);const n=this.tensorMap.get(e),{values:r}=n;if(r!=null)return r;let s;if(n.dtype==="complex64"){const a=await Promise.all([this.read(n.complexTensorInfos.real.dataId),this.read(n.complexTensorInfos.imag.dataId)]),i=a[0],o=a[1];s=Fl(i,o)}else{const a=await this.getBufferData(n.resource);s=$S(a,n.dtype)}return this.convertAndCacheOnCPU(e,s),s}copyBuffer(e){const n=e.size,r=e.usage,s=this.bufferManager.acquireBuffer(n,r);return this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(e,0,s,0,n),this.submitQueue(),s}createTensorFromGPUData(e,n,r){let s=e.buffer;if(r==="complex64")throw new Error("Cannot write to a complex64 dtype. ");const a={id:this.nextDataId()};this.tensorMap.set(a,{dtype:r,shape:n,values:null,refCount:1,external:e.zeroCopy});const i=this.tensorMap.get(a),o=cW(i.dtype)*ye(i.shape);if(e.buffer.size<o)throw new Error(`GPUBuffer size(${e.buffer.size}) is smaller than tensor size(${o})!`);if((e.buffer.usage&(GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC))!==(GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC))throw new Error("GPUBuffer.usage should include GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC!");return e.zeroCopy!==!0&&(s=this.copyBuffer(s)),i.resource=s,Aa().makeTensorFromDataId(a,n,r,this)}readToGPU(e){const n=this.tensorMap.get(e),{values:r,dtype:s,shape:a,resource:i}=n;if(s==="complex64")throw new Error("Does not support reading buffer for complex64 dtype.");if(i==null)throw r!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const o=i,l=o.size,u=o.usage,c=this.bufferManager.acquireBuffer(l,u);this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(i,0,c,0,l),this.submitQueue();const d=this.makeTensorInfo(a,s),h=Aa().makeTensorFromTensorInfo(d),m=this.tensorMap.get(d.dataId);return m.resource=c,{tensorRef:h,buffer:c}}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>Ml(s));return Wt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Wt(e.shape,e.dtype,n)}async time(e){!this.supportTimestampQuery&&!this.hasTimestampQueryWarned&&(console.warn("This device doesn't support timestamp-query extension. Start Chrome browser with flag --enable-dawn-features=allow_unsafe_apis to try it again. Otherwise, zero will be shown for the kernel time when profiling mode is enabled."),this.hasTimestampQueryWarned=!0);const n=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,e();const a=$c(this.activeTimers.map(u=>u.query)).filter(u=>u!=null),i=$c(this.activeTimers.map(u=>u.name)).filter(u=>u!=null);this.activeTimers=n,s&&(this.programTimersStack=null);const o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},l=await Promise.all(a);return o.kernelMs=KX(l),o.getExtraProfileInfo=()=>l.map((u,c)=>({name:i[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", "),this.uploadWaitMs=0,this.downloadWaitMs=0,o}makeTensorInfo(e,n,r){return n==="string"&&r!=null&&r.length>0&&pg(r[0])&&(r=r.map(a=>yc(a))),{dataId:this.write(r,e,n),shape:e,dtype:n}}tensorToBinding(e){if(!e)return null;const r=this.tensorMap.get(e.dataId).resource;return r instanceof GPUBuffer?{buffer:r}:r instanceof GPUTexture?r.createView():r}uploadToGPU(e){const n=this.tensorMap.get(e);if(n.resource!=null)return;const r=cW(n.dtype)*ye(n.shape);let s;const a=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST;if(n.values){if(s=this.bufferManager.acquireBuffer(r,a,!0),s.mapState==="unmapped"){const i=this.bufferManager.acquireBuffer(r,GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC,!0,!1),o=i.getMappedRange();n.dtype==="int32"||n.dtype==="bool"?new Int32Array(o).set(n.values):new Float32Array(o).set(n.values),i.unmap(),this.ensureCommandEncoderReady(),this.endComputePassEncoder(),this.commandEncoder.copyBufferToBuffer(i,0,s,0,r),this.stagingPendingDisposal.push(i)}else{const i=s.getMappedRange();n.dtype==="int32"||n.dtype==="bool"?new Int32Array(i).set(n.values):new Float32Array(i).set(n.values),s.unmap()}n.values=null}else s=this.bufferManager.acquireBuffer(r,a);n.resource=s}makeUniforms(e){let n=0,r=0;const s=[];let a=1;e.forEach(l=>{l.data.length===0&&(l.data=[1]);let u;switch(l.data.length){case 1:u=4;break;case 2:u=8;break;case 3:u=16;break;case 4:u=16;break;case 5:u=16;break;case 6:u=16;break;default:X(!1,()=>`Unsupported ${l.data.length}D shape`)}(r===5||r===6)&&(u=16),u>a&&(a=u),n=Math.ceil(n/u)*u,r=l.data.length,s.push(n),n+=l.data.length*4}),n=Math.ceil(n/a)*a;const i=new ArrayBuffer(n);e.forEach((l,u)=>{const c=s[u];l.type==="int32"?new Int32Array(i,c,l.data.length).set(l.data):l.type==="uint32"?new Uint32Array(i,c,l.data.length).set(l.data):new Float32Array(i,c,l.data.length).set(l.data)});const o=this.bufferManager.acquireBuffer(n,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);return this.queue.writeBuffer(o,0,i,0,n),this.uniformPendingDisposal.push(o),{offset:0,size:n,buffer:o}}runWebGPUProgram(e,n,r,s,a){if(a||(a=this.makeTensorInfo(e.outputShape,r)),ye(a.shape)===0)return this.tensorMap.get(a.dataId).values=$s(a.dtype,0),a;this.uploadToGPU(a.dataId),e.dispatch=GBe(this.device,e);const i=n.map((l,u)=>{if(l.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");return this.uploadToGPU(l.dataId),{dtype:this.tensorMap.get(l.dataId).dtype,shape:l.shape,name:e.variableNames[u]}});e.shaderKey=DBe(e,i,a);const o=ve().getBool("WEBGPU_ENGINE_COMPILE_ONLY");return e.shaderKey in this.pipelineCache||(this.pipelineCache[e.shaderKey]=RBe(this.device,e,i,a,o)),e.pipeline=this.pipelineCache[e.shaderKey],o||this.recordAndSubmit(e,a,n,s),a}recordAndSubmit(e,n,r,s){if(e.pipeline instanceof Promise)throw new Error("Please call checkCompileCompletionAsync to ensure parallel compilation is done!");let a=[],i=[];const o="int32";if(e.pixelsOpType==null){a.push({type:"float32",data:[NaN]},{type:"float32",data:[1/0]}),i=r.concat(n).map(m=>m.shape);const h="int32";i.map(m=>{a.push({type:h,data:m});const g=$t(m);a.push({type:h,data:g})})}else{const h=$t(n.shape);a.push({type:o,data:h})}if(e.size){const h=ye(e.outputShape);a.push({type:o,data:[e.outputComponent?h/e.outputComponent:h]})}s&&(a=[...a,...s]);const l=[this.tensorToBinding(n),...r.map(h=>this.tensorToBinding(h)),this.makeUniforms(a)];r.forEach(h=>{this.commandQueueOwnedIds.add(h.dataId)}),this.commandQueueOwnedIds.add(n.dataId);const u=this.device.createBindGroup({layout:e.pipeline.getBindGroupLayout(0),entries:l.map((h,m)=>({binding:m,resource:h}))}),c=this.activeTimers!=null;this.ensureCommandEncoderReady();const d={};c&&this.supportTimestampQuery?(this.endComputePassEncoder(),this.querySet==null&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.querySetCount})),d.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:0,endOfPassWriteIndex:1},this.computePassEncoder=this.commandEncoder.beginComputePass(d)):this.computePassEncoder||(this.computePassEncoder=this.commandEncoder.beginComputePass(d)),this.computePassEncoder.setPipeline(e.pipeline),this.computePassEncoder.setBindGroup(0,u),this.computePassEncoder.dispatchWorkgroups(e.dispatch[0],e.dispatch[1],e.dispatch[2]),this.dispatchCountInPass++,(c||ve().get("WEBGPU_DEFERRED_SUBMIT_BATCH_SIZE")<=this.dispatchCountInPass||e.pixelsOpType===Lm.DRAW)&&(this.endComputePassEncoder(),c?this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime()}):this.submitQueue())}async getQueryTime(){if(!this.supportTimestampQuery)return 0;this.queryResolveBuffer==null&&(this.queryResolveBuffer=this.bufferManager.acquireBuffer(this.querySetCount*8,GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST|GPUBufferUsage.QUERY_RESOLVE)),this.commandEncoder.resolveQuerySet(this.querySet,0,this.querySetCount,this.queryResolveBuffer,0);const e=this.bufferManager.acquireBuffer(this.querySetCount*8,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,e,0,this.querySetCount*8),this.submitQueue(),await e.mapAsync(GPUMapMode.READ);const n=new BigUint64Array(e.getMappedRange()),r=Number(n[1]-n[0])/1e6;return e.unmap(),this.bufferManager.releaseBuffer(e),r}shouldExecuteOnCPU(e,n=WBe){return ve().getBool("WEBGPU_CPU_FORWARD")&&e.every(r=>this.tensorMap.get(r.dataId).resource==null&&ye(r.shape)<n)}numDataIds(){return this.tensorMap.numDataIds()-this.tensorDataPendingDisposal.length}dispose(){this.disposed||(this.querySet!=null&&this.querySet.destroy(),this.bufferManager.dispose(),this.textureManager.dispose(),this.disposed=!0)}}Ny.nextDataId=0;/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Qne()&&nj("webgpu",async()=>{const t={powerPreference:ve().get("WEBGPU_USE_LOW_POWER_GPU")?"low-power":"high-performance"},e=await navigator.gpu.requestAdapter(t),n={},r=[];e.features.has("timestamp-query")&&r.push("timestamp-query"),e.features.has("bgra8unorm-storage")&&r.push(["bgra8unorm-storage"]),n.requiredFeatures=r;const s=e.limits;n.requiredLimits={maxComputeWorkgroupStorageSize:s.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:s.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:s.maxStorageBufferBindingSize,maxBufferSize:s.maxBufferSize,maxComputeWorkgroupSizeX:s.maxComputeWorkgroupSizeX,maxComputeInvocationsPerWorkgroup:s.maxComputeInvocationsPerWorkgroup};const a=await e.requestDevice(n),i="info"in e?e.info:"requestAdapterInfo"in e?await e.requestAdapterInfo():void 0;return new Ny(a,i)},3);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ft;(function(t){t[t.ADD=0]="ADD",t[t.ATAN2=1]="ATAN2",t[t.COMPLEX_MULTIPLY_IMAG=2]="COMPLEX_MULTIPLY_IMAG",t[t.COMPLEX_MULTIPLY_REAL=3]="COMPLEX_MULTIPLY_REAL",t[t.DIV=4]="DIV",t[t.ELU_DER=5]="ELU_DER",t[t.EQUAL=6]="EQUAL",t[t.FLOOR_DIV=7]="FLOOR_DIV",t[t.GREATER=8]="GREATER",t[t.GREATER_EQUAL=9]="GREATER_EQUAL",t[t.LESS=10]="LESS",t[t.LESS_EQUAL=11]="LESS_EQUAL",t[t.LOGICAL_AND=12]="LOGICAL_AND",t[t.LOGICAL_OR=13]="LOGICAL_OR",t[t.MAX=14]="MAX",t[t.MIN=15]="MIN",t[t.MOD=16]="MOD",t[t.MUL=17]="MUL",t[t.NOT_EQUAL=18]="NOT_EQUAL",t[t.POW=19]="POW",t[t.PRELU=20]="PRELU",t[t.SQUARED_DIFFERENCE=21]="SQUARED_DIFFERENCE",t[t.SUB=22]="SUB"})(Ft||(Ft={}));const HBe="let resultTemp = a + b;",qBe="let resultTemp = atan2(a, b);",KBe="let resultTemp = areal * breal - aimag * bimag;",XBe="let resultTemp = areal * bimag + aimag * breal;",YBe="let resultTemp = a / b;",QBe="let resultTemp = select(a * (b + 1.0), a, b >= b - b);",ZBe=`
  let zero = sign(a) * 0 + 0;
  let one = sign(b) * 0 + 1;
  let resultTemp = select(zero, one, a == b);
`,JBe=`
  let remainder =
      select(a % b, round(a % b), (round(a) == a) & (round(b) == b));
  let quotient = (a - remainder) / b;
  let resultTemp =
      round(select(quotient, quotient - 1, sign(remainder) == -sign(b)));
`,e5e=`
  let zero = sign(a) * 0 + 0;
  let one = sign(b) * 0 + 1;
  let resultTemp = select(zero, one, a > b);
`,t5e=`
  let zero = sign(a) * 0 + 0;
  let one = sign(b) * 0 + 1;
  let resultTemp = select(zero, one, a >= b);
`,n5e=`
  let zero = sign(a) * 0 + 0;
  let one = sign(b) * 0 + 1;
  let resultTemp = select(zero, one, a < b);
`,r5e=`
  let zero = sign(a) * 0 + 0;
  let one = sign(b) * 0 + 1;
  let resultTemp = select(zero, one, a <= b);
`,s5e="return f32(a >= 1.0 && b >= 1.0);",a5e=`return (vec4<f32>(a >= vec4<f32>(1.0)) *
  vec4<f32>(b >= vec4<f32>(1.0)));`,i5e="return f32(a >= 1.0 || b >= 1.0);",o5e=`return min(vec4<f32>(a >= vec4<f32>(1.0)) +
  vec4<f32>(b >= vec4<f32>(1.0)), vec4<f32>(1.0));`,l5e="let resultTemp = max(a, b);",u5e="let resultTemp = min(a, b);",c5e=`
  let isNaN = b == 0.;
  var resultTemp = a % b;
  resultTemp = select((resultTemp + b) % b, resultTemp,
      (a < 0. && b < 0.) || (a >= 0. && b > 0.));
`,d5e=`
  let isNaN = !vec4<bool>(b);
  var resultTemp = vec4<f32>(a % b);
  if (!((a[0] < 0. && b[0] < 0.) || (a[0] >= 0. && b[0] > 0.))) {
    resultTemp[0] = (resultTemp[0] + b[0]) % b[0];
  }
  if (!((a[1] < 0. && b[1] < 0.) || (a[1] >= 0. && b[1] > 0.))) {
    resultTemp[1] = (resultTemp[1] + b[1]) % b[1];
  }
  if (!((a[2] < 0. && b[2] < 0.) || (a[2] >= 0. && b[2] > 0.))) {
    resultTemp[2] = (resultTemp[2] + b[2]) % b[2];
  }
  if (!((a[3] < 0. && b[3] < 0.) || (a[3] >= 0. && b[3] > 0.))) {
    resultTemp[3] = (resultTemp[3] + b[3]) % b[3];
  }
`,f5e="let resultTemp = a * b;",h5e=`
  var resultTemp = f32(a != b);
  let valueForNaN = 1.0;
`,p5e=`
  var resultTemp = vec4<f32>(a != b);
  let valueForNaN = 1.0;
`,m5e=`
  let isNaN = a < 0.0 && floor(b) < b;
  if (b == 0.0) {
    return 1.0;
  }
  var resultTemp = select(sign(a) * pow(abs(a), b), pow(abs(a), b),
      round(abs(b) % 2.0) != 1.0);
`,g5e=`
  let isModRound1Bool = vec4<i32>(round(abs(b) % vec4<f32>(2.0))) == vec4<i32>(1);
  let isModRound1 = vec4<f32>(isModRound1Bool);
  let multiplier = sign(a) * isModRound1 + (vec4<f32>(1.0) - isModRound1);
  var resultTemp = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  let isExpZero = b == vec4<f32>(0.0);
  if (isExpZero.r) {
    resultTemp.r = 1.0;
  }
  if (isExpZero.g) {
    resultTemp.g = 1.0;
  }
  if (isExpZero.b) {
    resultTemp.b = 1.0;
  }
  if (isExpZero.a) {
    resultTemp.a = 1.0;
  }
  let isNaN = (a < vec4<f32>(0.0)) & (floor(b) < b);
`,y5e="if (a < 0.0) { return b * a; }  return a;",b5e=`
  let aLessThanZero = vec4<f32>(a < vec4<f32>(0.0));
  return (aLessThanZero * (b * a)) + ((vec4<f32>(1.0) - aLessThanZero) * a);
`,x5e="let resultTemp = (a - b) * (a - b);",v5e="let resultTemp = a - b;";function j4(t,e){let n;do{switch(t){case Ft.ATAN2:n=qBe;break;case Ft.MAX:n=l5e;break;case Ft.MIN:n=u5e;break;case Ft.MOD:n=e?d5e:c5e;break;case Ft.NOT_EQUAL:n=e?p5e:h5e;break;case Ft.POW:n=e?g5e:m5e;break;default:continue}let r,s,a;return e?(r="isnanVec4",s="vec4<f32>",a="vec4<bool>"):(r="isnan",s="f32",a="bool"),`
      let aIsNaN = ${r}(a);
      let aPostLegalization = select(a, ${s}(42), aIsNaN);
      let bIsNaN = ${r}(b);
      let bPostLegalization = select(b, ${s}(42), bIsNaN);
      let isNaN = false;
      let valueForNaN = uniforms.NAN;
      {
        let a = aPostLegalization;
        let b = bPostLegalization;
        ${n}
        return select(
            resultTemp, ${s}(valueForNaN),
            ${a}(isNaN) | aIsNaN | bIsNaN);
      }
    `}while(!1);switch(t){case Ft.ADD:n=HBe;break;case Ft.COMPLEX_MULTIPLY_IMAG:n=XBe;break;case Ft.COMPLEX_MULTIPLY_REAL:n=KBe;break;case Ft.DIV:n=YBe;break;case Ft.ELU_DER:n=QBe;break;case Ft.EQUAL:n=ZBe;break;case Ft.FLOOR_DIV:n=JBe;break;case Ft.GREATER:n=e5e;break;case Ft.GREATER_EQUAL:n=t5e;break;case Ft.LESS:n=n5e;break;case Ft.LESS_EQUAL:n=r5e;break;case Ft.LOGICAL_AND:return e?a5e:s5e;case Ft.LOGICAL_OR:return e?o5e:i5e;case Ft.MUL:n=f5e;break;case Ft.PRELU:return e?b5e:y5e;case Ft.SQUARED_DIFFERENCE:n=x5e;break;case Ft.SUB:n=v5e;break}return`
    ${n}
    return resultTemp;
  `}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var tt;(function(t){t[t.ABS=0]="ABS",t[t.ACOS=1]="ACOS",t[t.ACOSH=2]="ACOSH",t[t.ASIN=3]="ASIN",t[t.ASINH=4]="ASINH",t[t.ATAN=5]="ATAN",t[t.ATANH=6]="ATANH",t[t.CEIL=7]="CEIL",t[t.COS=8]="COS",t[t.COSH=9]="COSH",t[t.ELU=10]="ELU",t[t.ERF=11]="ERF",t[t.EXP=12]="EXP",t[t.EXPM1=13]="EXPM1",t[t.FLOOR=14]="FLOOR",t[t.IS_FINITE=15]="IS_FINITE",t[t.IS_INF=16]="IS_INF",t[t.IS_NAN=17]="IS_NAN",t[t.LINEAR=18]="LINEAR",t[t.LOG=19]="LOG",t[t.LOG1P=20]="LOG1P",t[t.LOGICAL_NOT=21]="LOGICAL_NOT",t[t.NEG=22]="NEG",t[t.RELU=23]="RELU",t[t.RELU6=24]="RELU6",t[t.LEAKYRELU=25]="LEAKYRELU",t[t.RECIPROCAL=26]="RECIPROCAL",t[t.ROUND=27]="ROUND",t[t.RSQRT=28]="RSQRT",t[t.SELU=29]="SELU",t[t.SIGMOID=30]="SIGMOID",t[t.SIGN=31]="SIGN",t[t.SIN=32]="SIN",t[t.SINH=33]="SINH",t[t.SOFTPLUS=34]="SOFTPLUS",t[t.SQRT=35]="SQRT",t[t.SQUARE=36]="SQUARE",t[t.STEP=37]="STEP",t[t.TAN=38]="TAN",t[t.TANH=39]="TANH",t[t.TO_INT=40]="TO_INT"})(tt||(tt={}));const w5e="return abs(a);",S5e=`
  if (abs(a) > 1.) {
    return uniforms.NAN;
  }
  return acos(a);
`,C5e=`
  if (a < 1.) {
    return uniforms.NAN;
  }
  return acosh(a);
`,k5e=`
  if (abs(a) > 1.) {
    return uniforms.NAN;
  }
  return asin(a);
`,N5e="return asinh(a);",T5e=`
  if (isnan(a)) {
    return uniforms.NAN;
  }
  return atan(a);
`,$5e=`
  if (abs(a) > 1.) {
    return uniforms.NAN;
  }
  if (a == 1.) {
    return uniforms.INFINITY;
  }
  if (a == -1.) {
    return -uniforms.INFINITY;
  }
  return atanh(a);
`,I5e="return ceil(a);",E5e="return cos(a);",A5e=`
  let e2x = exp(-a);
  return (e2x + 1.0 / e2x) / 2.0;
`,R5e="return exp(a) - 1.0;",O5e="if (a >= 0.0) { return a; }  return (exp(a) - 1.0);",_5e=`
  var resFloat = exp(a) - vec4<f32>(1.0);
  if (a.r >= 0.0) {
    resFloat.r = a.r;
  }
  if (a.g >= 0.0) {
    resFloat.g = a.g;
  }
  if (a.b >= 0.0) {
    resFloat.b = a.b;
  }
  if (a.a >= 0.0) {
    resFloat.a = a.a;
  }
  return resFloat;
`,D5e=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  let p = ${RN};
  let a1 = ${ON};
  let a2 = ${_N};
  let a3 = ${DN};
  let a4 = ${PN};
  let a5 = ${MN};

  let sign = sign(a);
  let absA = abs(a);
  let t = 1.0 / (1.0 + p * absA);
  return sign * (1.0 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * exp(-absA * absA));
`,P5e="return exp(a);",M5e="return floor(a);",j5e="return f32(!isnan(a) && !isinf(a));",L5e="return f32(isinf(a));",F5e="return f32(isnan(a));",z5e="return a;",B5e=`if (a < 0.0) { return uniforms.NAN; }
  return log(a);`,U5e=`
  if (isnan(a)) { return a; }
  return log(1.0 + a);
`,V5e="return f32(!(a >= 1.0));",W5e="return -a;",G5e="if (a < 0.0) { return uniforms.alpha * a; } return a;",H5e=`
  let aLessThanZero = vec4<f32>(a < vec4<f32>(0.0));
  return (aLessThanZero * (uniforms.alpha * a)) + ((vec4<f32>(1.0) - aLessThanZero) * a);
`,q5e="return 1.0 / a;",K5e="return select(a, 0.0, a < 0.0);",X5e="return clamp(a, 0.0, 6.0);",Y5e="return clamp(a, vec4<f32>(0.0, 0.0, 0.0, 0.0), vec4<f32>(6.0, 6.0, 6.0, 6.0));",Q5e=`
  return select(a, vec4<f32>(0.0), a < vec4<f32>(0.0));
`,Z5e="return round(a);",J5e="return inverseSqrt(a);",eUe=`
  if (a >= 0.0) {
    return ${Yv} * a;
  } else {
    return ${Xv} * (exp(a) - 1.0);
  }
`,tUe="return 1.0 / (1.0 + exp(-1.0 * a));",nUe="return sign(a);",rUe="return sin(a);",sUe=`
  let e2x = exp(a);
  return (e2x - 1.0 / e2x) / 2.0;
`,aUe=`
  let epsilon = 1.1920928955078125e-7;
  let threshold = log(epsilon) + 2.0;

  let too_large = a > -threshold;
  let too_small = a < threshold;
  let exp_a = exp(a);

  if (too_large) {
    return a;
  } else if (too_small) {
    return exp_a;
  } else {
    return log(exp_a + 1.0);
  }
`,iUe="return sqrt(a);",oUe="return a * a;",lUe=`
  if (isnan(a)) {
    return a;
  }

  return select(uniforms.stepAlpha, 1.0, a > 0.0);
`,uUe="return tan(a);",cUe=`
  let e2x = exp(-2.0 * abs(a));
  return sign(a) * (1.0 - e2x) / (1.0 + e2x);
`,dUe="return f32(i32((a)));";function Df(t,e){switch(t){case tt.ABS:return w5e;case tt.ACOS:return S5e;case tt.ACOSH:return C5e;case tt.ASIN:return k5e;case tt.ASINH:return N5e;case tt.ATAN:return T5e;case tt.ATANH:return $5e;case tt.COS:return E5e;case tt.COSH:return A5e;case tt.CEIL:return I5e;case tt.ELU:return e?_5e:O5e;case tt.ERF:return D5e;case tt.EXP:return P5e;case tt.EXPM1:return R5e;case tt.FLOOR:return M5e;case tt.IS_FINITE:return j5e;case tt.IS_INF:return L5e;case tt.IS_NAN:return F5e;case tt.LINEAR:return z5e;case tt.LOG:return B5e;case tt.LOG1P:return U5e;case tt.LOGICAL_NOT:return V5e;case tt.NEG:return W5e;case tt.LEAKYRELU:return e?H5e:G5e;case tt.RECIPROCAL:return q5e;case tt.RELU:return e?Q5e:K5e;case tt.RELU6:return e?Y5e:X5e;case tt.ROUND:return Z5e;case tt.RSQRT:return J5e;case tt.SELU:return eUe;case tt.SIGMOID:return tUe;case tt.SIGN:return nUe;case tt.SIN:return rUe;case tt.SINH:return sUe;case tt.SOFTPLUS:return aUe;case tt.SQRT:return iUe;case tt.SQUARE:return oUe;case tt.STEP:return lUe;case tt.TAN:return uUe;case tt.TANH:return cUe;case tt.TO_INT:return dUe;default:throw new Error(`BinaryType ${t} is not implemented!`)}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lc(t,e=!1,n=!1,r=3){if(t===null)return"";let s="";if(t==="linear")s=Df(tt.LINEAR);else if(t==="relu")s=Df(tt.RELU,n);else if(t==="elu")s=Df(tt.ELU,n);else if(t==="relu6")s=Df(tt.RELU6,n);else if(t==="prelu")s=j4(Ft.PRELU,n);else if(t==="sigmoid")s=Df(tt.SIGMOID,n);else if(t==="leakyrelu")s=Df(tt.LEAKYRELU,n);else throw new Error(`Activation ${t} has not been implemented for the WebGPU backend.`);const i=Yt(n?4:1);let o="";return e?o=`
      fn activation(a : ${i}, coords : vec${r}<i32>) -> ${i} {
        let b = getPreluActivationWeightsByOutputCoords(coords);
        ${s}
      }`:o=`
      fn activation(a : ${i}, coords : vec${r}<i32>) -> ${i} {
        ${s}
      }`,o}function Kh(t,e){return`
      ${t?"value = value + getBiasByOutputCoords(coords);":""}
      ${e?"value = activation(value, coords);":""}
      `}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jne(t,e,n=!1,r=!1,s=!1,a=1){X(t&&a===1||!t,()=>`transposeA ${t} is not compatible with component size ${a}`);const i=`
      ${t?"value = getA(batch, col, row);":"value = getA(batch, row, col);"}

    `,o=e?"value = getB(batch, col, row);":"value = getB(batch, row, col);";return`
  fn mm_readA(batch: i32, row: i32, col: i32) -> ${Yt(a)} {
    var value = ${Yt(a)}(0.0);
    ${n&&s?i:`
    ${t?"if(row < uniforms.dimAOuter && col < uniforms.dimInner)":"if(row < uniforms.aShape[1] && col < uniforms.aShape[2])"}
    {
      ${i}
    }
    `}
    return value;
  }

  fn mm_readB(batch: i32, row: i32, col: i32) -> ${Yt(a)} {
    var value = ${Yt(a)}(0.0);
    ${o}
    return value;
  }
  `}function L4(t,e,n,r,s=!1,a=!1,i=!1,o=1){return`
  ${Jne(n,r,s,a,i,o)}
  fn mm_write(batch: i32, row: i32, col: i32, valueIn: ${Yt(o)}) {
    ${s&&a?"":"if (row < uniforms.dimAOuter && col < uniforms.dimBOuter)"}
    {
      var value = valueIn;
      let coords = vec3<i32>(batch, row, col);
      ${Kh(t,e)}
      setOutputAtCoords(coords[0], coords[1], coords[2], value);
    }
  }
  `}const fUe=(t,e)=>t?`
        mm_Asub[inputRow][inputCol] = mm_readA(batchA,
          kStart + inputRow,
          globalRowStart + inputCol * ${e});
        `:`
        mm_Asub[inputRow][inputCol] = mm_readA(batchA,
          globalRow + innerRow,
          kStart + inputCol * ${e});
        `,hUe=(t,e,n,r)=>{if(t)return`
      for (var k = 0; k < ${r}; k++) {
        let BCached0 = mm_Bsub[k][tileCol];
        let ACached0 = mm_Asub[k][localRow];
        for (var i = 0; i < ${n}; i++) {
          acc[i] = fma(BCached0, vec4<f32>(ACached0[i]), acc[i]);
        }
      }`;{let s="",a="";for(let i=0;i<e;i++)s+=`let BCached${i} = mm_Bsub[k * ${e} + ${i}][tileCol];`,a+=`acc[i] = fma(BCached${i}, vec4<f32>(ACached[${i}]), acc[i]);`;return`
      for (var k = 0; k < ${r/e}; k++) {
        ${s}
        for (var i = 0; i < ${n}; i++) {
          let ACached = mm_Asub[tileRow + i][k];
          ${a}
        }
      }`}};function oT(t,e,n=!1,r=32,s=!1,a=32,i=!1){const o=e[1]*t[1],l=e[0]*t[0],u=n?o:r,c=n?r:o,d=u/e[0],h=r/e[1],m=t[1],g=t[0];return X((n&&d===4&&t[1]===4||!n&&(d===3||d===4))&&u%e[0]===0&&r%e[1]===0&&t[0]===4,()=>`If transposeA ${n} is true, innerElementSize ${d} and workPerThread[1] ${t[1]} must be 4.
          Otherwise, innerElementSize ${d} must be 3 or 4.
      tileAWidth ${u} must be divisible by workgroupSize[0]${e[0]}. tileInner ${r} must be divisible by workgroupSize[1] ${e[1]}. colPerThread ${t[0]} must be 4.`),`
  var<workgroup> mm_Asub : array<array<vec${d}<f32>, ${u/d}>, ${c}>;
  var<workgroup> mm_Bsub : array<array<vec4<f32>, ${l/t[0]}>, ${r}>;

  ${rt()} {
    let localRow = i32(localId.y);
    let tileRow = localRow * ${m};
    let tileCol = i32(localId.x);

    let globalRow = i32(globalId.y) * ${m};
    let globalCol = i32(globalId.x) * ${g};
    let batch = ${s?"0":"i32(globalId.z)"};
    let batchA = ${s||!i?"batch":"batch % uniforms.aShape[0]"};
    let batchB = ${s||!i?"batch":"batch % uniforms.bShape[0]"};
    let globalRowStart = i32(workgroupId.y) * ${o};

    let numTiles = ${s?`${Math.ceil(a/r)}`:`(uniforms.dimInner - 1) / ${r} + 1`};
    var kStart = ${s?`i32(globalId.z) * ${a}`:"0"};

    var acc: array<vec4<f32>, ${m}>;

    // Loop over shared dimension.
    let tileRowB = localRow * ${h};
    for (var t = 0; t < numTiles; t++) {
        // Load one tile of A into local memory.
        for (var innerRow = 0; innerRow < ${m}; innerRow++) {
            let inputRow = tileRow + innerRow;
            let inputCol = tileCol;
            ${fUe(n,d)}
        }

        // Load one tile of B into local memory.
        for (var innerRow = 0; innerRow < ${h}; innerRow++) {
            let inputRow = tileRowB + innerRow;
            let inputCol = tileCol;
            mm_Bsub[inputRow][inputCol] = mm_readB(batchB, kStart + inputRow, globalCol);
        }
        kStart = kStart + ${r};
        workgroupBarrier();

        // Compute acc values for a single thread.
        ${hUe(n,d,m,r)}
        workgroupBarrier();
    }

    for (var innerRow = 0; innerRow < ${m}; innerRow++) {
        mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);
    }
  }`}const dW=t=>t?`
        mm_Asub[inputRow][inputCol] = mm_readA(batchA,
          kStart + inputRow,
          globalRowStart + inputCol);
        `:`
        mm_Asub[inputRow][inputCol] = mm_readA(batchA,
          globalRowStart + inputRow,
          kStart + inputCol);
        `,pUe=t=>t?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];";function lT(t,e,n=!1,r=32,s=!1,a=32,i=!1,o=!1){const l=t[1]*e[1],u=t[0]*e[0],c=n?l:r,d=n?r:l;X(d%e[1]===0&&c%e[0]===0&&r%e[1]===0,()=>`tileAHight ${d} must be divisible by workgroupSize[1]${e[1]}, tileAWidth ${c} must be divisible by workgroupSize[0]${e[0]}, tileInner ${r} must be divisible by workgroupSize[1]${e[1]}`);const h=d/e[1],m=c/e[0],g=r/e[1],y=t[1],b=t[0],w=i?`
      let localRow = i32(localId.y);
      let localCol = i32(localId.x);
      let globalRowStart = i32(workgroupId.y) * ${l};
      let globalColStart = i32(workgroupId.x) * ${u};

      // Loop over shared dimension.
      for (var t = 0; t < numTiles; t++) {
        // Load one tile of A into local memory.
        for (var inputRow = localRow; inputRow < ${d}; inputRow = inputRow + ${e[1]}) {
          for (var inputCol = localCol; inputCol < ${c}; inputCol = inputCol + ${e[0]}) {
            ${dW(n)}
          }
        }
        // Load one tile of B into local memory.
        for (var inputRow = localRow; inputRow < ${r}; inputRow = inputRow + ${e[1]}) {
              for (var inputCol = localCol; inputCol < ${u}; inputCol = inputCol + ${e[0]}) {
            mm_Bsub[inputRow][inputCol] = mm_readB(batchB,
              kStart + inputRow,
              globalColStart + inputCol);
          }
        }
        kStart = kStart + ${r};
        workgroupBarrier();

        // Compute acc values for a single thread.
        var BCached : array<f32, ${b}>;
        for (var k = 0; k < ${r}; k++) {
          for (var inner = 0; inner < ${b}; inner++) {
            BCached[inner] = mm_Bsub[k][localCol + inner * ${e[0]}];
          }
          for (var innerRow = 0; innerRow < ${y}; innerRow++) {
            let ACached = ${n?`mm_Asub[k][localRow + innerRow * ${e[1]}];`:`mm_Asub[localRow + innerRow * ${e[1]}][k];`}
            for (var innerCol = 0; innerCol < ${b}; innerCol++) {
              acc[innerRow][innerCol] =
                  fma(ACached, BCached[innerCol], acc[innerRow][innerCol]);
            }
          }
        }
        workgroupBarrier();
      }
      for (var innerRow = 0; innerRow < ${y}; innerRow++) {
        let gRow = globalRowStart + localRow + innerRow * ${e[1]};
        for (var innerCol = 0; innerCol < ${b}; innerCol++) {
          let gCol = globalColStart + localCol + innerCol * ${e[0]};
          mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);
        }
      }
      `:`
  let tileRow = i32(localId.y) * ${y};
  let tileCol = i32(localId.x) * ${b};

  let globalRow = i32(globalId.y) * ${y};
  let globalCol = i32(globalId.x) * ${b};
  let globalRowStart = i32(workgroupId.y) * ${l};

  let tileRowA = i32(localId.y) * ${h};
  let tileColA = i32(localId.x) * ${m};
  let tileRowB = i32(localId.y) * ${g};
  // Loop over shared dimension.
  for (var t = 0; t < numTiles; t++) {
    // Load one tile of A into local memory.
    for (var innerRow = 0; innerRow < ${h}; innerRow++) {
      for (var innerCol = 0; innerCol < ${m}; innerCol++) {
        let inputRow = tileRowA + innerRow;
        let inputCol = tileColA + innerCol;
        ${dW(n)}
      }
    }

    // Load one tile of B into local memory.
    for (var innerRow = 0; innerRow < ${g}; innerRow++) {
      for (var innerCol = 0; innerCol < ${b}; innerCol++) {
        let inputRow = tileRowB + innerRow;
        let inputCol = tileCol + innerCol;
        mm_Bsub[inputRow][inputCol] = mm_readB(batchB,
          kStart + inputRow,
          globalCol + innerCol);
      }
    }
    kStart = kStart + ${r};
    workgroupBarrier();

    // Compute acc values for a single thread.
    var BCached : array<f32, ${b}>;
    for (var k = 0; k < ${r}; k++) {
      for (var inner = 0; inner < ${b}; inner++) {
        BCached[inner] = mm_Bsub[k][tileCol + inner];
      }

      for (var innerRow = 0; innerRow < ${y}; innerRow++) {
        ${pUe(n)}
        for (var innerCol = 0; innerCol < ${b}; innerCol++) {
          acc[innerRow][innerCol] =
              fma(ACached, BCached[innerCol], acc[innerRow][innerCol]);
        }
      }
    }

    workgroupBarrier();
  }

  for (var innerRow = 0; innerRow < ${y}; innerRow++) {
    for (var innerCol = 0; innerCol < ${b}; innerCol++) {
      mm_write(batch, globalRow + innerRow, globalCol + innerCol,
          acc[innerRow][innerCol]);
    }
  }
  `;return`
    var<workgroup> mm_Asub : array<array<f32, ${c}>, ${d}>;
    var<workgroup> mm_Bsub : array<array<f32, ${u}>, ${r}>;

    ${rt()} {
      let batch = ${s?"0":"i32(globalId.z)"};
      let batchA = ${s||!o?"batch":"batch % uniforms.aShape[0]"};
      let batchB = ${s||!o?"batch":"batch % uniforms.bShape[0]"};
      let numTiles = ${s?`${Math.ceil(a/r)}`:`(uniforms.dimInner - 1) / ${r} + 1`};
      var kStart = ${s?`i32(globalId.z) * ${a}`:"0"};

      var acc : array<array<f32, ${b}>, ${y}>;

      // Without this initialization strange values show up in acc.
      for (var innerRow = 0; innerRow < ${y}; innerRow++) {
        for (var innerCol = 0; innerCol < ${b}; innerCol++) {
          acc[innerRow][innerCol] = 0.0;
        }
      }
      ${w}
    }
  `}const mUe=t=>t?`
      mm_readA(batchA, colA, globalRow),
      mm_readA(batchA, colA + 1, globalRow),
      mm_readA(batchA, colA + 2, globalRow),
      mm_readA(batchA, colA + 3, globalRow)
  `:`
      mm_readA(batchA, globalRow, colA),
      mm_readA(batchA, globalRow, colA + 1),
      mm_readA(batchA, globalRow, colA + 2),
      mm_readA(batchA, globalRow, colA + 3)
  `;function gUe(t,e=!1){X(t[1]===1&&t[2]===1,()=>`A linear work group size is required. But got ${t}.`);const n=t[0]*4;return`
    var<workgroup> mm_Asub : array<vec4<f32>, ${t[0]}>;

    ${rt()} {
      let tileCol = i32(localId.x);
      let globalCol = i32(globalId.x);
      let globalRow = i32(globalId.y);

      let numTiles = (uniforms.dimInner - 1) / ${n} + 1;
      let batch = i32(globalId.z);
      let batchA = batch % uniforms.aShape[0];
      let batchB = batch % uniforms.bShape[0];
      // Without this initialization strange values show up in acc.
      var acc = 0.0;

      // Loop over shared dimension.
      for (var t = 0; t < numTiles; t++) {
        // Load one tile of A into local memory.
        let colA = t * ${n} + tileCol * 4;
        mm_Asub[tileCol] = vec4<f32>(${mUe(e)});
        workgroupBarrier();

        // Compute acc values for a single thread.
        for (var k = 0; k < ${n/4}; k++) {
          let rowB = t * ${n} + k * 4;
          let BCached = vec4<f32>(mm_readB(batchB, rowB, globalCol),
                              mm_readB(batchB, rowB + 1, globalCol),
                              mm_readB(batchB, rowB + 2, globalCol),
                              mm_readB(batchB, rowB + 3, globalCol));

          let ACached = mm_Asub[k];
          acc = acc + dot(ACached, BCached);
        }

        workgroupBarrier();
      }

      mm_write(batch, globalRow, globalCol, acc);
    }
  `}class yUe{constructor(e,n,r=!1,s=!1,a=null,i=null,o=null,l=!1){this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.outputShape=n,this.dispatchLayout={x:[2],y:[1],z:[0]};const u=r?e[1]:e[2];if(this.isVec4=(u%4===0&&!r||n[1]%4===0&&r)&&n[2]%4===0&&!s,this.outputComponent=this.isVec4?4:1,this.isVectorA=n[1]===1&&!r,!this.isVec4&&this.isVectorA)this.elementsPerThread=[1,1,1],this.workgroupSize=[32,1,1];else{const h=VBe(n[1],u,n[2],r);this.workgroupSize=h.workgroupSize,this.elementsPerThread=h.elementsPerThread}this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize,this.elementsPerThread);const c=a!=null,d=o!=null;c&&this.variableNames.push("bias"),d&&this.variableNames.push("preluActivationWeights"),this.sequentialAccessByThreads=l,this.transposeA=r,this.transposeB=s,this.addBias=c,this.activation=i,this.hasPreluActivationWeights=d,[this.fitAOuter,this.fitBOuter,this.fitInner]=this.getShapeFit(n[1],n[2],u),this.shaderKey=`matMulPacked_${this.elementsPerThread}_${r}_${s}_${this.activation}_${this.fitAOuter}_${this.fitBOuter}_${this.fitInner}_${this.isVec4}_${this.isVectorA}_${this.sequentialAccessByThreads}`}getShapeFit(e,n,r){const s=this.workgroupSize[1]*this.elementsPerThread[1],a=this.workgroupSize[0]*this.elementsPerThread[0];!this.isVec4&&this.isVectorA?this.tileInner=this.workgroupSize[0]*4:this.tileInner=a;const i=e%s===0,o=n%a===0,l=r%this.tileInner===0;return[i,o,l]}getUserCode(){return`
      ${Lc(this.activation,this.hasPreluActivationWeights,this.isVec4)}
      ${L4(this.addBias,this.activation,!1,this.transposeB,this.fitAOuter,this.fitBOuter,this.fitInner,this.isVec4?4:1)}
      ${this.isVec4?oT(this.elementsPerThread,this.workgroupSize,this.transposeA,this.tileInner,!1,null,!0):this.isVectorA?gUe(this.workgroupSize,this.transposeA):lT(this.elementsPerThread,this.workgroupSize,this.transposeA,this.tileInner,!1,null,this.sequentialAccessByThreads,!0)}
    `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bUe(t){return`
    var<workgroup> sumValues : array<f32, ${t}>;
    ${rt()} {
      let coords = getOutputCoords();
      let batch = coords[0];
      let batchA = batch % uniforms.aShape[0];
      let batchB = batch % uniforms.bShape[0];
      let row = coords[1];
      let col = coords[2];
      var sum = 0.0;
      let Length = uniforms.dimInner;
      for (var k = i32(localId.x); k < Length; k = k + ${t}) {
        let dataA = mm_readA(batchA, row, k);
        let dataB = mm_readB(batchB, k, col);
        sum = sum + dataA * dataB;
      }
      sumValues[localId.x] = sum;
      workgroupBarrier();

      for(var currentSize = ${t/2}u; currentSize > 1u;
          currentSize = currentSize / 2u) {
        if (localId.x < currentSize)
        {
          sumValues[localId.x] = sumValues[localId.x] + sumValues[localId.x + currentSize];
        }
        workgroupBarrier();
      }

      if (localId.x == 0u) {
        sum = sumValues[0] + sumValues[1];
        mm_write(batch, row, col, sum);
      }
    }
  `}class xUe{constructor(e,n=!1,r=!1,s=null,a=null,i=null){this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workgroupSize=[256,1,1],this.outputShape=e,this.dispatchLayout={x:[],y:[1,2],z:[0]},this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize);const o=s!=null,l=i!=null;o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),this.transposeA=n,this.transposeB=r,this.addBias=o,this.activation=a,this.hasPreluActivationWeights=l,this.shaderKey=`matMulReduce_${this.activation}_${n}_${r}`}getUserCode(){return`
      ${Lc(this.activation,this.hasPreluActivationWeights)}
      ${L4(this.addBias,this.activation,this.transposeA,this.transposeB)}
      ${bUe(this.workgroupSize[0])}
    `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vUe(t){const e=t[1],n=t[0],r=e>n?e:n;return`
  var<workgroup> mm_Asub : array<array<f32, ${r}>, ${e}>;
  var<workgroup> mm_Bsub : array<array<f32, ${n}>, ${r}>;

  // If the output size is small for matrix multiplication, avoid to use vec4
  // and handle some elements per thread to optimally utilize the ALU.
  // Read data from global memory to registers firstly, then store them into
  // shared memory, so it is instruction-Level parallelism for arithmetic
  // operations and others handle IO operations between barrier api, makes ALU
  // and load/store units work simultaneously, could improves the performance.
  ${rt()} {
    let tileRow = i32(localId.y);
    let tileCol = i32(localId.x);
    let globalRow = i32(globalId.y);
    let globalCol = i32(globalId.x);
    let batch = i32(globalId.z);
    let batchA = batch % uniforms.aShape[0];
    let batchB = batch % uniforms.bShape[0];

    // uniforms.dimInner should be greater than 0.
    let numTiles = (uniforms.dimInner - 1) / ${r} + 1;
    var acc = 0.0;

    var globalColA = tileCol;
    var globalRowB = 0;
    var regA = mm_readA(batchA, globalRow, globalColA);
    var regB0 = mm_readB(batchB, globalRowB + 2 * tileRow, globalCol);
    var regB1 = mm_readB(batchB, globalRowB + 2 * tileRow + 1, globalCol);
    globalColA = globalColA + ${r};
    globalRowB = globalRowB + ${r};

    for (var t = 0; t < numTiles; t = t + 1) {
      mm_Asub[tileRow][tileCol] = regA;
      mm_Bsub[2 * tileRow][tileCol] = regB0;
      mm_Bsub[2 * tileRow + 1][tileCol] = regB1;

      workgroupBarrier();

      regA = mm_readA(batchA, globalRow, globalColA);
      regB0 = mm_readB(batchB, globalRowB + 2 * tileRow, globalCol);
      regB1 = mm_readB(batchB, globalRowB + 2 * tileRow + 1, globalCol);
      globalColA = globalColA + ${r};
      globalRowB = globalRowB + ${r};

      for (var k = 0; k < ${r}; k = k + 1) {
        acc = acc + mm_Asub[tileRow][k] * mm_Bsub[k][tileCol];
      }
      workgroupBarrier();
    }

    mm_write(batch, globalRow, globalCol, acc);
  }
  `}class wUe{constructor(e,n,r,s=!1,a=!1,i=null,o=null,l=null){this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workgroupSize=[16,8,1],this.outputShape=r,this.dispatchLayout={x:[2],y:[1],z:[0]},this.dispatch=[Math.ceil(r[2]/this.workgroupSize[0]),Math.ceil(r[1]/this.workgroupSize[1]),r[0]];const u=i!=null;u&&this.variableNames.push("bias");const c=l!=null;c&&this.variableNames.push("preluActivationWeights"),this.transposeA=s,this.transposeB=a,this.addBias=u,this.activation=o,this.hasPreluActivationWeights=c,this.shaderKey=`matMulSmallOutputSize_${this.activation}_${s}_${a}`}getUserCode(){return`
      ${Lc(this.activation,this.hasPreluActivationWeights)}
      ${L4(this.addBias,this.activation,this.transposeA,this.transposeB)}
      ${vUe(this.workgroupSize)}
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SUe{constructor(e,n,r=!1,s=!1){this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workgroupSize=[8,8,1],this.atomic=!0,this.splitedDimInner=128,X(e[0]===1,()=>"MatMulSplitKProgram only supports batch = 1."),this.outputShape=e,this.dispatchLayout={x:[2],y:[1],z:[0,3]};const a=(r&&this.outputShape[1]%4===0||!r&&n%4===0)&&this.outputShape[2]%4===0;this.elementsPerThread=[4,4,this.splitedDimInner],this.outputComponent=a?4:1,a||(this.outputShape[1]<16&&(this.elementsPerThread[1]=1),this.outputShape[2]<16&&(this.elementsPerThread[0]=1)),this.dispatch=st(this.dispatchLayout,[this.outputShape[0],this.outputShape[1],this.outputShape[2],n],this.workgroupSize,this.elementsPerThread),this.transposeA=r,this.transposeB=s,this.shaderKey=`matMulSplitK_${r}_${s}_${this.elementsPerThread}_${this.outputComponent}`}getUserCode(){const e=this.outputComponent;return`
      ${Jne(!1,this.transposeB,!1,!1,!1,e)}
      fn mm_write(batch: i32, row : i32, col : i32, value : ${Yt(e)}) {
        if (row < uniforms.dimAOuter && col < uniforms.dimBOuter) {
          let coords = vec3<i32>(batch, row, col);
          let flatIndex = getOutputIndexFromCoords(coords);
          // The problem is that we should initialize output to zero before using.
          // Otherwise, the original value will be added to the result.
          for (var i = 0; i < ${e}; i = i + 1) {
            ${Zd("&result[flatIndex + i]",`${e>1?"value[i]":"value"}`,"float32")}
          }
        }
      }
      ${e===4?oT(this.elementsPerThread,this.workgroupSize,this.transposeA,32,!0,this.splitedDimInner):lT(this.elementsPerThread,this.workgroupSize,this.transposeA,32,!0,this.splitedDimInner)}
    `}}class CUe{constructor(e,n=null,r=null,s=null){this.uniforms="",this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.addBias=n!=null,this.hasPreluActivationWeights=s!=null,this.activation=r,this.addBias&&this.variableNames.push("bias"),this.hasPreluActivationWeights&&this.variableNames.push("preluActivationWeights"),this.shaderKey=`biasActivation_${r}`}getUserCode(){return`
    ${Lc(this.activation,this.hasPreluActivationWeights)}
    ${rt("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        var value = getXByOutputIndex(index);
        ${Kh(this.addBias,this.activation)}
        setOutputAtIndex(index, value);
      }
    }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kUe{constructor(e){this.variableNames=[],this.outputShape=[],this.uniforms="value : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="fill"}getUserCode(){return`
    ${rt("index")} {
      if (index < uniforms.size) {
        setOutputAtIndex(index, uniforms.value);
      }
    }
  `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oi(t){const{backend:e,attrs:n}=t,{shape:r,value:s}=n;let{dtype:a}=n;if(a=a||Dh(s),a==="string"){const i=Fr(a,ye(r));return i.fill(s),e.makeTensorInfo(r,a,i)}else{const i=new kUe(r),o=[{type:"float32",data:[s]}];return e.runWebGPUProgram(i,[],a,o)}}const NUe={kernelName:vk,backendName:"webgpu",kernelFunc:oi};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vt(t){const{inputs:e,attrs:n}=t,{x:r}=e,{shape:s}=n,a=ye(r.shape),i=BM(s,a),o=ye(i);return X(a===o,()=>`The new shape (${i}) has ${o} elements and the old shape (${r.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`),t.backend.incRef(r.dataId),{dataId:r.dataId,shape:i,dtype:r.dtype}}const TUe={kernelName:Iv,backendName:"webgpu",kernelFunc:vt};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uT({a:t,b:e,transposeA:n,transposeB:r,backend:s,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:l=null}){const u=t.shape.length,c=e.shape.length,d=n?t.shape[u-2]:t.shape[u-1],h=r?e.shape[c-1]:e.shape[c-2],m=n?t.shape[u-1]:t.shape[u-2],g=r?e.shape[c-2]:e.shape[c-1],y=t.shape.slice(0,-2),b=e.shape.slice(0,-2),w=ye(y),C=ye(b),T=_t(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([m,g]);X(d===h,()=>`Error in matMul: inner shapes (${d}) and (${h}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const N=n?[w,d,m]:[w,m,d],I=r?[C,g,h]:[C,h,g],A=vt({inputs:{x:t},backend:s,attrs:{shape:N}}),D=vt({inputs:{x:e},backend:s,attrs:{shape:I}}),P=[A,D],R=Math.max(w,C),O=[A,D],F=[{type:"int32",data:[m]},{type:"int32",data:[g]},{type:"int32",data:[d]}];let z,V;const W=[R,m,g];let j=ve().get("WEBGPU_MATMUL_PROGRAM_TYPE");if(j<0){const Y=ve().getNumber("WEBGPU_THRESHOLD_TO_INCREASE_WORKGROUPS_FOR_MATMUL"),Q=Y>0?Y:s.thresholdToIncreaseWorkgroups,H=R*Math.ceil(m/32)*Math.ceil(g/32);H<=Q||m<=8&&H<=Q*2?R*m*g<=128?j=ou.MatMulReduceProgram:R===1&&h>=2e3?j=ou.MatMulSplitKProgram:j=ou.MatMulSmallOutputSizeProgram:j=ou.MatMulPackedProgram}switch(j){case ou.MatMulReduceProgram:z=new xUe(W,n,r,a,l,i);break;case ou.MatMulSplitKProgram:{if(V=oi({backend:s,attrs:{shape:W,value:0,dtype:t.dtype}}),z=new SUe(W,h,n,r),a||l){V=s.runWebGPUProgram(z,O,t.dtype,F,V);const Q=new CUe(V.shape,a,l,i);let H=null;const ee=[V];a&&ee.push(a),i&&ee.push(i),l==="leakyrelu"&&(H=[{type:"float32",data:[o]}],Q.uniforms+=" alpha : f32,");const te=s.runWebGPUProgram(Q,ee,V.dtype,H);P.push(V);const ne=vt({inputs:{x:te},backend:s,attrs:{shape:T}});P.push(te);for(const he of P)s.disposeData(he.dataId);return ne}break}case ou.MatMulSmallOutputSizeProgram:z=new wUe(N,I,W,n,r,a,l,i);break;case ou.MatMulPackedProgram:const Y=s.adapterInfo.isIntel();z=new yUe(N,W,n,r,a,l,i,Y);break;default:throw new Error(`Unsupported MatMulProgramType ${j}.`)}a&&O.push(a),i&&O.push(i),l==="leakyrelu"&&(F.push({type:"float32",data:[o]}),z.uniforms+=" alpha : f32,"),V=s.runWebGPUProgram(z,O,t.dtype,F,V);const q=vt({inputs:{x:V},backend:s,attrs:{shape:T}});P.push(V);for(const Y of P)s.disposeData(Y.dataId);return q}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ue(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:a,bias:i,preluActivationWeights:o}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;return uT({a:s,b:a,transposeA:l,transposeB:u,backend:n,bias:i,preluActivationWeights:o,leakyreluAlpha:d,activation:c})}const IUe={kernelName:Tb,backendName:"webgpu",kernelFunc:$Ue};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fW{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.workgroupSize=[128,1,1],this.size=!0,this.outputShape=_t(n,r),this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey=`binaryOpComplex_${e}`,this.op=e}getUserCode(){return`
      fn binaryOpComplex(
          areal : f32, aimag : f32, breal : f32, bimag : f32) -> f32 {
        ${j4(this.op,!1)}
      }

      ${rt("index")} {
        if(index < uniforms.size) {
          let areal = getARealByOutputIndex(index);
          let aimag = getAImagByOutputIndex(index);
          let breal = getBRealByOutputIndex(index);
          let bimag = getBImagByOutputIndex(index);
          setOutputAtIndex(index, binaryOpComplex(areal, aimag, breal, bimag));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class E2{constructor(e,n,r){if(this.size=!0,this.variableNames=["A","B"],this.outputShape=_t(n,r),this.dispatchLayout=ht(this.outputShape),this.op=e,this.useSharedMemoryWithA=n.length<=1&&r.length>1&&n[0]<128,this.useSharedMemoryWithB=r.length<=1&&n.length>1&&r[0]<128,this.useSharedMemoryWithA||this.useSharedMemoryWithB)this.outputComponent=1,this.variableComponents=[1,1],this.lastDimensionSize=this.useSharedMemoryWithB?r[0]:n[0],this.shaderKey=`binary_${e}_${this.lastDimensionSize}`,this.type="shared",this.workgroupSize=[256,1,1];else{const s=n.length>0&&n[n.length-1]%4===0,a=r.length>0&&r[r.length-1]%4===0;s&&a?(this.outputComponent=4,this.variableComponents=[4,4]):s&&(uU(r)||r[r.length-1]===1)||a&&(uU(n)||n[n.length-1]===1)?(this.outputComponent=4,this.variableComponents=s?[4,1]:[1,4]):(this.outputComponent=1,this.variableComponents=[1,1]),this.type="nonshared",this.shaderKey=`binary_${e}_${this.variableComponents}`,this.workgroupSize=[128,1,1]}this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.outputComponent,1,1])}getUserCode(){let e;const n=this.outputComponent===4?"vec4<f32>":"f32",r=`
    fn binaryOperation(a : ${n}, b : ${n}) -> ${n} {
      ${j4(this.op,this.outputComponent===4)}
    };
    `;if(this.type==="shared"){const s=this.lastDimensionSize>1?`coords[${this.outputShape.length-1}]`:"0",a=this.useSharedMemoryWithB?`let a = getAByOutputIndex(index);
          let b = sharedBuf[${s}];`:`let a = sharedBuf[${s}];
          let b = getBByOutputIndex(index);`;e=`
        ${r}
        var<workgroup> sharedBuf : array<f32, ${this.lastDimensionSize}>;
        ${rt("index")} {
          // Fill in the shared memory buffer.
          let localIndex = i32(localId.x);
          if(localIndex < ${this.lastDimensionSize}) {
            sharedBuf[localIndex] = f32(${this.useSharedMemoryWithB?"B":"A"}[localIndex]);
          }
          workgroupBarrier();

          if(index < uniforms.size) {
            let coords = getCoordsFromIndex(index);
            ${a}
            setOutputAtIndex(index, binaryOperation(a, b));
          }
        }
        `}else e=`
       ${r}
       ${rt("index")} {
         if (index < uniforms.size) {
           let coords = getCoordsFromIndex(index * ${this.outputComponent});
           let a = ${n}(getAByOutputCoords(coords));
           let b = ${n}(getBByOutputCoords(coords));
           setOutputAtIndex(index, binaryOperation(a, b));
         }
       }
       `;return e}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _i(t){const{inputs:e}=t,{x:n}=e;return t.backend.incRef(n.dataId),{dataId:n.dataId,shape:n.shape,dtype:n.dtype}}const EUe={kernelName:Mg,backendName:"webgpu",kernelFunc:_i};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xh(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,a=n.makeTensorInfo(r.shape,"complex64"),i=n.tensorMap.get(a.dataId),o=_i({inputs:{x:r},backend:n}),l=_i({inputs:{x:s},backend:n});return i.complexTensorInfos={real:o,imag:l},a}const AUe={kernelName:ik,backendName:"webgpu",kernelFunc:Xh};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ty{constructor(e,n,r=""){this.variableNames=["A"],this.size=!0;const s=128;this.workgroupSize=[s,1,1],this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.op=n,r!==""&&(this.uniforms=r),this.shaderKey=`unary_${n}`}getUserCode(){return`
      fn unaryOperation(a : f32) -> f32 {
        ${Df(this.op,!1)}
      }
      ${rt("index")} {
        if (index < uniforms.size) {
          let a = getAByOutputIndex(index);
          setOutputAtIndex(index, unaryOperation(a));
        }
      }
      `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cn({opType:t,cpuKernelImpl:e,dtype:n}){return({inputs:r,backend:s})=>{const{x:a}=r,i=s,o=n||a.dtype;if(i.shouldExecuteOnCPU([a])&&e!=null){const u=i.tensorMap.get(a.dataId),c=e(u.values,o);return i.makeTensorInfo(a.shape,o,c)}const l=new Ty(a.shape,t);return i.runWebGPUProgram(l,[a],o)}}function Bs({opType:t,cpuKernelImpl:e,supportsComplex:n=!1,dtype:r}){return({inputs:s,backend:a})=>{const{a:i,b:o}=s,l=a;if(n&&i.dtype==="complex64"){const d=l.tensorMap.get(i.dataId),h=l.tensorMap.get(o.dataId);let m,g;if(t!==Ft.MUL)[m,g]=[[d.complexTensorInfos.real,h.complexTensorInfos.real],[d.complexTensorInfos.imag,h.complexTensorInfos.imag]].map(b=>{const[w,C]=b,k={dataId:w.dataId,dtype:w.dtype,shape:i.shape},T={dataId:C.dataId,dtype:C.dtype,shape:o.shape},N=new E2(t,i.shape,o.shape);return l.runWebGPUProgram(N,[k,T],zs(w.dtype,C.dtype))});else{const b=new fW(Ft.COMPLEX_MULTIPLY_REAL,i.shape,o.shape),w=new fW(Ft.COMPLEX_MULTIPLY_IMAG,i.shape,o.shape),C=[{dataId:d.complexTensorInfos.real.dataId,dtype:d.complexTensorInfos.real.dtype,shape:i.shape},{dataId:d.complexTensorInfos.imag.dataId,dtype:d.complexTensorInfos.imag.dtype,shape:i.shape},{dataId:h.complexTensorInfos.real.dataId,dtype:h.complexTensorInfos.real.dtype,shape:o.shape},{dataId:h.complexTensorInfos.imag.dataId,dtype:h.complexTensorInfos.imag.dtype,shape:o.shape}];m=l.runWebGPUProgram(b,C,"float32"),g=l.runWebGPUProgram(w,C,"float32")}const y=Xh({inputs:{real:m,imag:g},backend:l});return l.disposeData(m.dataId),l.disposeData(g.dataId),y}const u=r||zs(i.dtype,o.dtype);if((i.dtype==="string"||o.dtype==="string"||l.shouldExecuteOnCPU([i,o]))&&e!=null){const d=l.tensorMap.get(i.dataId).values,h=l.tensorMap.get(o.dataId).values,m=i.dtype==="string"?zl(d):d,g=i.dtype==="string"?zl(h):h,[y,b]=e(i.shape,o.shape,m,g,u);return l.makeTensorInfo(b,u,y)}const c=new E2(t,i.shape,o.shape);return l.runWebGPUProgram(c,[i,o],u)}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:RUe,castImpl:OUe,ceilImpl:_Ue,concatImpl:DUe,equalImpl:PUe,expImpl:MUe,expm1Impl:jUe,floorImpl:LUe,floorDivImpl:FUe,gatherNdImpl:zUe,gatherV2Impl:BUe,greaterEqualImpl:UUe,greaterImpl:VUe,lessEqualImpl:WUe,lessImpl:GUe,logImpl:HUe,maxImpl:qUe,maximumImpl:KUe,minimumImpl:XUe,multiplyImpl:YUe,negImpl:QUe,notEqualImpl:ZUe,prodImpl:JUe,rangeImpl:eVe,rsqrtImpl:tVe,scatterImpl:nVe,simpleAbsImpl:rVe,sliceImpl:sVe,stridedSliceImpl:aVe,stringNGramsImpl:iVe,subImpl:oVe,tileImpl:lVe,topKImpl:uVe,transposeImpl:cVe}=zte;/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dVe=Cn({opType:tt.ABS,cpuKernelImpl:rVe}),fVe={kernelName:zx,backendName:"webgpu",kernelFunc:dVe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hVe=Cn({opType:tt.ACOS}),pVe={kernelName:gg,backendName:"webgpu",kernelFunc:hVe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mVe=Cn({opType:tt.ACOSH}),gVe={kernelName:yg,backendName:"webgpu",kernelFunc:mVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yVe=Bs({opType:Ft.ADD,cpuKernelImpl:RUe,supportsComplex:!0}),bVe={kernelName:Ph,backendName:"webgpu",kernelFunc:yVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xVe{constructor(e){this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e[0],this.variableNames=e.map((n,r)=>`T${r}`),this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.shaderKey="addN"}getUserCode(){const e=[];this.variableNames.forEach(s=>{e.push(`let v${s} = get${s}ByOutputCoords(coords);`)});const n=this.variableNames.map(s=>`v${s}`).join(" + ");return`
      ${rt("index")} {
        for (var i = 0; i < ${this.workPerThread}; i = i + 1) {
          let flatIndex = index * ${this.workPerThread} + i;
          if (flatIndex < uniforms.size) {
            let coords = getCoordsFromIndex(flatIndex);
            ${e.join(`
        `)}
            setOutputAtIndex(flatIndex, ${n});
          }
        }
      }
    `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vVe(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return _i({inputs:{x:r[0]},backend:n});const s=r.map(o=>o.dtype).reduce((o,l)=>zs(o,l)),a=r.map(o=>o.shape),i=new xVe(a);return n.runWebGPUProgram(i,r,s)}const wVe={kernelName:Bx,backendName:"webgpu",kernelFunc:vVe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SVe{constructor(e,n){this.variableNames=["A"],this.workgroupSize=[16,16,1];const r=new Array(e.length);for(let s=0;s<r.length;s++)r[s]=e[n[s]];this.outputShape=r,this.dispatchLayout={x:[0],y:[1]},this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize,[1,1,1]),this.shaderKey="transposeShared"}getUserCode(){X(this.workgroupSize[0]===this.workgroupSize[1],()=>`Must be a square tile, current tile shape is ${this.workgroupSize[0]} x ${this.workgroupSize[1]}`);const e=this.workgroupSize[0];return`
      var<workgroup> tile : array<array<f32, ${this.workgroupSize[0]+1}>, ${this.workgroupSize[0]}>;
      ${rt()} {
        var x = i32(workgroupId.x) * ${e} + i32(localId.x);
        var y = i32(workgroupId.y) * ${e} + i32(localId.y);
        let width = uniforms.outShape[0];
        let height = uniforms.outShape[1];
        if (x < width && y < height) {
          tile[localId.y][localId.x] = f32(A[y * width + x]);
        }
        workgroupBarrier();

        x = i32(workgroupId.y) * ${e} + i32(localId.x);
        y = i32(workgroupId.x) * ${e} + i32(localId.y);
        if (x < height && y < width) {
          setOutputAtIndex((y * height + x), tile[localId.x]
            [localId.y]);
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CVe{constructor(e,n){this.variableNames=["A"],this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0;const r=new Array(e.length);for(let s=0;s<r.length;s++)r[s]=e[n[s]];this.outputShape=r,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.newDim=n,this.shaderKey=`transpose_${n}`}getUserCode(){const e=ts(this.outputShape.length),n=ere(this.newDim);return`
      ${rt("index")} {
        for(var i = 0; i < ${this.workPerThread}; i = i + 1) {
          let flatIndex = index * ${this.workPerThread} + i;
          if(flatIndex < uniforms.size) {
            let coords = getCoordsFromIndex(flatIndex);
            setOutputAtIndex(flatIndex, A[getIndexFromCoords${this.outputShape.length}D(
              ${e}(${n}), uniforms.aShape)]);
          }
        }
      }
    `}}function ere(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=new Array(e);for(let r=0;r<t.length;r++)n[t[r]]=`coords.${vc(r)}`;return n.join()}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eu(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{perm:a}=r,i=n,o=s.shape.length,l=new Array(o);for(let c=0;c<l.length;c++)l[c]=s.shape[a[c]];if(n.shouldExecuteOnCPU([s])){const d=i.tensorMap.get(s.dataId).values,h=cVe(d,s.shape,s.dtype,a,l);return n.makeTensorInfo(l,s.dtype,h)}if(s.shape.length===2&&Xt(a,[1,0])){const c=new SVe(s.shape,a);return i.runWebGPUProgram(c,[s],s.dtype)}const u=new CVe(s.shape,a);return i.runWebGPUProgram(u,[s],s.dtype)}const kVe={kernelName:th,backendName:"webgpu",kernelFunc:Eu};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NVe{constructor(e,n,r){this.variableNames=["x"],this.uniforms="reduceSize : i32,",this.size=!0,this.inputShape=[e.batchSize,e.inSize];const[s]=ns(this.inputShape,[1]);this.outputShape=s.length===0?[1]:s,e.inSize>=32768&&r>=512?this.workgroupSize=[512,1,1]:e.inSize>=4096?this.workgroupSize=[256,1,1]:this.workgroupSize=[64,1,1],this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,[1,1,1]),this.reduceType=n,this.shaderKey=`reduce_${n}`}getUserCode(){let e="",n="0.0";const r=this.workgroupSize[0];this.reduceType==="min"||this.reduceType==="max"?(e=`
         if (isnan(candidate)) {
          bestValue = uniforms.NAN;
         } else if (!isnan(bestValue) && candidate ${this.reduceType==="min"?"<":">"} bestValue)
           {  bestValue = candidate; }`,n="f32(x[offset])"):this.reduceType==="sum"||this.reduceType==="mean"?e=" bestValue = bestValue + candidate; ":this.reduceType==="prod"?(e=" bestValue = bestValue * candidate; ",n="1.0"):this.reduceType==="all"?(e=" bestValue = f32(bestValue >= 1.0 && candidate >= 1.0); ",n="1.0"):this.reduceType==="any"&&(e=" bestValue = f32(bestValue >= 1.0 || candidate >= 1.0); ",n="0.0");const s=this.reduceType==="mean"?"setOutputAtIndex(outputIndex, bestValue / f32(uniforms.reduceSize));":"setOutputAtIndex(outputIndex, bestValue);";return`
       fn DIV_CEIL(a : u32, b : u32) -> u32 {
        return ((a - 1u) / b + 1u);
       }

       ${`
         var<workgroup> xBestValues : array<f32, ${r}>;
       `}
       fn getOffset(outputIndex : i32) -> i32 {
         let outputCoords = getCoordsFromIndex(outputIndex);
         let offset = ${this.outputShape.length===1?"outputCoords":"outputCoords[0]"} * uniforms.reduceSize;
          return offset;
       }
       ${rt("index")} {
         let outputIndex = index / ${r};
         let offset = getOffset(outputIndex);
         var bestValue = ${n};
         let Length = uniforms.reduceSize;
         let WorkPerThread = DIV_CEIL(u32(Length), ${r}u);
         for (var k = i32(localId.x); k < Length && outputIndex < uniforms.size;
             k = k + ${r}) {
           let candidate = f32(x[offset + k]);
           ${e}
         }
         xBestValues[localId.x] = bestValue;
         workgroupBarrier();

         var reduceSize = min(u32(Length), ${r}u);
         for (var currentSize = reduceSize / 2u; reduceSize > 1u;
             currentSize = reduceSize / 2u) {
           let interval = DIV_CEIL(reduceSize, 2u);
           if (localId.x < currentSize) {
            let candidate = xBestValues[localId.x + interval];
            ${e}
            xBestValues[localId.x] = bestValue;
           }
           reduceSize = interval;
           workgroupBarrier();
         }

         if (localId.x == 0u && outputIndex < uniforms.size) {
          ${s}
        }
       }
     `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TVe={mean:"float32",all:"bool",any:"bool"};function Yh(t,e,n,r,s){const a=t.shape.length,i=[],o=Gt(e,t.shape);let l=o;const u=Yn(l,a);let c=t;u!=null&&(c=Eu({inputs:{x:t},attrs:{perm:u},backend:s}),l=gr(l.length,a),i.push(c)),hs(r,l,a);const[d,h]=ns(c.shape,l);let m=d;n&&(m=Ur(d,o));let g;if((r==="max"||r==="prod")&&s.shouldExecuteOnCPU([c])){const y=s.tensorMap.get(c.dataId).values;switch(r){case"max":const b=qUe(y,ye(h),m,t.dtype);g=s.makeTensorInfo(m,t.dtype,b);break;case"prod":const{outVals:w,outShape:C,outDtype:k}=JUe(c.shape,c.dtype,y,l);g=s.makeTensorInfo(C,k,w);break;default:throw new Error(`${r} CPU implementation is not yet supported.`)}}else{const y=ye(h),w=ye(c.shape)/y,C={windowSize:y,inSize:y,batchSize:w,outSize:1},k=TVe[r]||Qk(t.dtype),T=[{type:"int32",data:[y]}],N=new NVe(C,r,s.device.limits.maxComputeWorkgroupSizeX),I=s.runWebGPUProgram(N,[c],k,T);i.push(I),g=vt({inputs:{x:I},attrs:{shape:m},backend:s})}return i.forEach(y=>s.disposeData(y.dataId)),g}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{keepDims:a,axis:i}=r;return Yh(s,i,a,"all",n)}const IVe={kernelName:JC,backendName:"webgpu",kernelFunc:$Ve};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{keepDims:a,axis:i}=r;return Yh(s,i,a,"any",n)}const AVe={kernelName:ek,backendName:"webgpu",kernelFunc:EVe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tre{constructor(e,n,r){this.workgroupSize=[64,1,1],this.variableNames=["x"],this.uniforms="infinityValue : f32,",this.size=!0;const s=[n];this.op=r==="min"?"<":">";const[a,i]=ns(e,s);this.outputShape=a.length===0?[1]:a,this.dispatchLayout=ht(this.outputShape),ye(i)<32?(this.type="plain",this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize)):(this.type="shared",this.dispatch=st(this.dispatchLayout,this.outputShape,[1,1,1])),this.inputShape=e,this.shaderKey=`argMinMax_${this.op}_${this.type}`}getUserCode(){const e=this.workgroupSize[0],n=()=>this.inputShape.length===1?"uniforms.xShape":`uniforms.xShape.${vc(this.inputShape.length-1)}`,r=()=>{let s="";if(this.outputShape.length===1)this.inputShape.length!==1&&(s+="outputCoords,");else for(let a=0;a<this.outputShape.length;a++)s+=`outputCoords.${vc(a)},`;return s};return this.type==="shared"?`
      fn DIV_CEIL(a : u32, b : u32) -> u32 {
        return ((a - 1u) / b + 1u);
      }

      ${`
      var<workgroup> xBestIndices : array<i32, ${e}>;
      var<workgroup> xBestValues : array<f32, ${e}>;
    `}

      ${rt("index")} {
        let outputIndex = index / ${e};
        let reduceLength = ${n()};

        var bestIndex = i32(localId.x);
        var bestValue = uniforms.infinityValue;
        let outputCoords = getCoordsFromIndex(outputIndex);
        for (var k = i32(localId.x); k < reduceLength && outputIndex < uniforms.size;
            k = k + ${e}) {
          let candidate = getX(${r()} k);
          if (!isnan(candidate) && candidate ${this.op} bestValue) {
            bestValue = candidate;
            bestIndex = k;
          }
        }
        xBestValues[localId.x] = bestValue;
        xBestIndices[localId.x] = bestIndex;
        workgroupBarrier();

        var reduceSize = min(u32(reduceLength), ${e}u);
        for (var currentSize = reduceSize / 2u; reduceSize > 1u;
            currentSize = reduceSize / 2u) {
          let interval = DIV_CEIL(reduceSize, 2u);
          if (localId.x < currentSize) {
            let candidate = xBestValues[localId.x + interval];
            if (candidate ${this.op} bestValue) {
              bestValue = candidate;
              xBestValues[localId.x] = bestValue;
              xBestIndices[localId.x] = xBestIndices[localId.x + interval];
            }
          }
          reduceSize = interval;
          workgroupBarrier();
        }

        if (localId.x == 0u && outputIndex < uniforms.size) {
          setOutputAtIndexI32(outputIndex, xBestIndices[localId.x]);
        }
      }
    `:`
      ${rt("index")} {
        if (index < uniforms.size) {
          let outputCoords = getCoordsFromIndex(index);
          var bestIndex = 0;
          var bestValue = getX(${r()} 0);
          let reduceLength = ${n()};
          for (var i = 1; i < reduceLength; i++) {
            let candidate = getX(${r()} i);
            if (candidate ${this.op} bestValue) {
              bestValue = candidate;
              bestIndex = i;
            }
          }
          setOutputAtIndexI32(index, bestIndex);
        }
      }
      `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a}=r;let i=Gt(a,s.shape);const o=Yn(i,s.shape.length);let l=s;const u=[];o!=null&&(l=Eu({inputs:{x:s},backend:n,attrs:{perm:o}}),u.push(l),i=gr(i.length,l.shape.length)),hs("argMax",[i[0]],l.shape.length);const c=new tre(l.shape,i[0],"max"),d=[{type:"float32",data:[Number.NEGATIVE_INFINITY]}],h=n.runWebGPUProgram(c,[l],"int32",d);return u.forEach(m=>n.disposeData(m.dataId)),h}const OVe={kernelName:Ux,backendName:"webgpu",kernelFunc:RVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a}=r;let i=Gt(a,s.shape);const o=Yn(i,s.shape.length);let l=s;const u=[];o!=null&&(l=Eu({inputs:{x:s},backend:n,attrs:{perm:o}}),u.push(l),i=gr(i.length,l.shape.length)),hs("argMin",[i[0]],l.shape.length);const c=new tre(l.shape,i[0],"min"),d=[{type:"float32",data:[Number.POSITIVE_INFINITY]}],h=n.runWebGPUProgram(c,[l],"int32",d);return u.forEach(m=>n.disposeData(m.dataId)),h}const DVe={kernelName:Vx,backendName:"webgpu",kernelFunc:_Ve};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PVe=Cn({opType:tt.ASIN}),MVe={kernelName:bg,backendName:"webgpu",kernelFunc:PVe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jVe=Cn({opType:tt.ASINH}),LVe={kernelName:xg,backendName:"webgpu",kernelFunc:jVe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FVe=Cn({opType:tt.ATAN}),zVe={kernelName:vg,backendName:"webgpu",kernelFunc:FVe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BVe=Bs({opType:Ft.ATAN2}),UVe={kernelName:Sg,backendName:"webgpu",kernelFunc:BVe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VVe=Cn({opType:tt.ATANH}),WVe={kernelName:wg,backendName:"webgpu",kernelFunc:VVe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GVe{constructor(e){this.variableNames=["x"],this.uniforms="strides : vec2<i32>,",this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=e.outShape,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="poolWithFilterSizeEqualsOne"}getUserCode(){return`
      ${rt("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let batch = coords[0];
          let d = coords[3];

          let xRCCorner = coords.yz * uniforms.strides;
          let xRCorner = xRCCorner.x;
          let xCCorner = xRCCorner.y;

          let value = getX(batch, xRCorner, xCCorner, d);
          setOutputAtIndex(index, value);
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gb{constructor(e,n,r=!1,s=!1,a=!1){if(this.variableNames=["x"],this.uniforms="strides : vec2<i32>, pads : vec2<i32>, dilations : vec2<i32>, convDims : vec2<i32>, filterDims : vec2<i32>,",this.workgroupSize=[128,1,1],this.size=!0,n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");this.outputShape=e.outShape,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.poolType=n,this.computePositions=r,this.flattenPositions=s,this.includeBatchIndex=a,this.shaderKey=`pool2D_${n}_${r}_${s}_${a}`}getUserCode(){let e;this.poolType==="avg"?e="resultValue = resultValue + value; count = count + 1.0;":this.computePositions?e=`let currMaxValue = mix(value, maxValue, maxValueFound);
      if (value >= currMaxValue) {
        maxValue = value;
        maxValueFound = 1.0;
        maxPosition = ${this.flattenPositions?this.includeBatchIndex?"((batch * uniforms.xShape[1] + xR) * uniforms.xShape[2] + xC) * uniforms.xShape[3] + d":"(xR * uniforms.xShape[2] + xC) * uniforms.xShape[3] + d":"wR * uniforms.filterDims.y + wC"};
      }`:e="resultValue = max(value, resultValue);";let n="resultValue";return this.poolType==="avg"&&(n="resultValue / max(count, 1.0)"),`
      ${rt("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
          let batch = coords[0];
          let d = coords[3];
          let xRCCorner = vec2<i32>(coords.yz) * uniforms.strides - uniforms.pads;
          let xRCorner = xRCCorner.x;
          let xCCorner = xRCCorner.y;

          ${this.computePositions?`var maxValue = 0.0;
            var maxValueFound = 0.0;
            var maxPosition = 0;`:`var resultValue = ${this.poolType==="avg"?"0.0":"-1.0 / pow(10.0, -20.0)"};`}

          var count = 0.0;
          for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + uniforms.dilations.x) {
            let xR = xRCorner + wR;

            if (xR < 0 || xR >= uniforms.convDims.x) {
              continue;
            }

            for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + uniforms.dilations.y) {
              let xC = xCCorner + wC;
              if (xC < 0 || xC >= uniforms.convDims.y) {
                continue;
              }

              let value = getX(batch, xR, xC, d);
              ${e}
            }
          }

          ${this.computePositions?"setOutputAtIndexI32(index, maxPosition);":`setOutputAtIndex(index, ${n});`}
        }
      }
    `}}class F4{constructor(e,n,r=!1,s=!1,a=!1){if(this.variableNames=["x"],this.uniforms="strides : vec3<i32>, pads : vec3<i32>, convDims : vec3<i32>, filterDims : vec3<i32>,",this.workgroupSize=[128,1,1],this.size=!0,n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");this.outputShape=e.outShape,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.poolType=n,this.computePositions=r,this.flattenPositions=s,this.includeBatchIndex=a,this.shaderKey=`pool3D_${n}_${r}_${s}_${a}`}getUserCode(){let e;this.poolType==="avg"?e="resultValue += value; count += 1.0;":this.computePositions?e=`let currMaxValue = mix(value, maxValue, maxValueFound);
      if (value >= currMaxValue) {
        maxValue = value;
        maxValueFound = 1.0;
        maxPosition = ${this.flattenPositions?this.includeBatchIndex?"(((batch * uniforms.xShape.y + xD) * uniforms.xShape.z + xR) * uniforms.xShape.w + xC) * uniforms.xShape.u + ch":"((xD * uniforms.xShape.z + xR) * uniforms.xShape.w + xC) * uniforms.xShape.u + ch":"wD * uniforms.filterDims.y * uniforms.filterDims.y + wR * uniforms.filterDims.z + wC"};
      }`:e="resultValue = max(value, resultValue);";let n="resultValue";return this.poolType==="avg"&&(n="resultValue / max(count, 1.0)"),`
      ${rt("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let batch = coords.x;
          let ch = coords.u;

          let xCorner = vec3<i32>(coords.y, coords.z, coords.w) * uniforms.strides - uniforms.pads;
          let xDCorner = xCorner.x;
          let xRCorner = xCorner.y;
          let xCCorner = xCorner.z;

          ${this.computePositions?`var maxValue = 0.0;
            var maxValueFound = 0.0;
            var maxPosition = 0;`:`var resultValue = ${this.poolType==="avg"?"0.0":"-1.0 / pow(10.0, -20.0)"};`}

          var count = 0.0;
          for (var wD = 0; wD < uniforms.filterDims.x; wD++) {
            let xD = xDCorner + wD;
            if (xD < 0 || xD >= uniforms.convDims.x) {
              continue;
            }

            for (var wR = 0; wR < uniforms.filterDims.y; wR++) {
              let xR = xRCorner + wR;
              if (xR < 0 || xR >= uniforms.convDims.y) {
                continue;
              }

              for (var wC = 0; wC < uniforms.filterDims.z; wC++) {
                let xC = xCCorner + wC;
                if (xC < 0 || xC >= uniforms.convDims.z) {
                  continue;
                }

                let value = getX(batch, xD, xR, xC, ch);
                ${e}
              }
            }
          }

          ${this.computePositions?"setOutputAtIndexI32(index, maxPosition);":`setOutputAtIndex(index, ${n});`}
        }
      }
    `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nre(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:a,keepDims:i}=r;return Yh(s,a,i,"max",n)}const HVe={kernelName:pv,backendName:"webgpu",kernelFunc:nre};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rre(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{keepDims:a,axis:i}=r;return Yh(s,i,a,"mean",n)}const qVe={kernelName:yv,backendName:"webgpu",kernelFunc:rre};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sre(t,e,n,r){if(e.filterWidth===1&&e.filterHeight===1&&Xt(e.inShape,e.outShape))return _i({inputs:{x:t},backend:r});if(e.filterWidth===e.inWidth&&e.filterHeight===e.inHeight&&e.batchSize===1&&e.padInfo.type==="VALID"){const i=t.shape.length,o=vt({inputs:{x:t},backend:r,attrs:{shape:[t.shape[i-3]*t.shape[i-2],t.shape[i-1]]}});let l;n==="avg"?l=rre({inputs:{x:o},backend:r,attrs:{axis:0,keepDims:!1}}):(X(n==="max",()=>`Invalid pool type ${n}`),l=nre({inputs:{x:o},backend:r,attrs:{reductionIndices:0,keepDims:!1}}));const u=vt({inputs:{x:l},backend:r,attrs:{shape:e.outShape}});return r.disposeData(o.dataId),r.disposeData(l.dataId),u}let s;const a=[{type:"int32",data:[e.strideHeight,e.strideWidth]}];return e.filterHeight===1&&e.filterWidth===1?s=new GVe(e):(n==="avg"?s=new Gb(e,"avg"):(X(n==="max",()=>`Invalid pool type ${n}`),s=new Gb(e,"max")),a.push({type:"int32",data:[e.padInfo.top,e.padInfo.left]},{type:"int32",data:[e.dilationHeight,e.dilationWidth]},{type:"int32",data:[e.inHeight,e.inWidth]},{type:"int32",data:[e.effectiveFilterHeight,e.effectiveFilterWidth]})),r.runWebGPUProgram(s,[t],t.dtype,a)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=r,c=ga(s.shape,a,i,1,o,l);return sre(s,c,"avg",n)}const XVe={kernelName:Wx,backendName:"webgpu",kernelFunc:KVe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YVe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:a,strides:i,pad:o,dataFormat:l,dimRoundingMode:u}=r,c=[1,1,1],d=go(s.shape,a,i,c,o,u,l),h=new F4(d,"avg"),m=[{type:"int32",data:[d.strideDepth,d.strideHeight,d.strideWidth]},{type:"int32",data:[d.padInfo.front,d.padInfo.top,d.padInfo.left]},{type:"int32",data:[d.inDepth,d.inHeight,d.inWidth]},{type:"int32",data:[d.effectiveFilterDepth,d.effectiveFilterHeight,d.effectiveFilterWidth]}];return n.runWebGPUProgram(h,[s],s.dtype,m)}const QVe={kernelName:Gx,backendName:"webgpu",kernelFunc:YVe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZVe{constructor(e){this.variableNames=["dy"],this.uniforms=`strides : vec2<i32>, pads : vec2<i32>, dilations : vec2<i32>, filterDims : vec2<i32>,
       outHeight : i32, outWidth : i32, avgMultiplier : f32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.inShape,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="avgPool2DBackprop"}getUserCode(){return`
      ${rt("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let batch = coords[0];
        let d = coords[3];

        let dyRCCorner = vec2<i32>(coords.yz) - uniforms.pads;
        let dyRCorner = dyRCCorner.x;
        let dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        var dotProd = 0.0;
        for (var wR = 0; wR < uniforms.filterDims[0]; wR = wR + uniforms.dilations[0]) {
          let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[0]);

          if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {
            continue;
          }
          let idyR = i32(dyR);

          for (var wC = 0; wC < uniforms.filterDims[1]; wC = wC + uniforms.dilations[1]) {
            let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[1]);

            if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {
              continue;
            }
            let idyC = i32(dyC);

            let dyValue = getDy(batch, idyR, idyC, d);

            dotProd = dotProd + dyValue * uniforms.avgMultiplier;
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
    `}}class JVe{constructor(e){this.variableNames=["dy"],this.uniforms=`strides : vec3<i32>, pads : vec3<i32>, filterDims : vec3<i32>,
       outDepth : i32, outHeight : i32, outWidth : i32, avgMultiplier : f32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.inShape,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="avgPool3DBackprop"}getUserCode(){return`
      ${rt("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let batch = coords.x;
        let ch = coords.u;

        let dyCorner = vec3<i32>(coords.y, coords.z, coords.w) - uniforms.pads;
        let dyDCorner = dyCorner.x;
        let dyRCorner = dyCorner.y;
        let dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        var dotProd = 0.0;
        for (var wD = 0; wD < uniforms.filterDims[0]; wD++) {
          let dyD = f32(dyDCorner + wD) / f32(uniforms.strides[0]);

          if (dyD < 0.0 || dyD >= f32(uniforms.outDepth) || fract(dyD) > 0.0) {
            continue;
          }
          let idyD = i32(dyD);

          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {
            let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[1]);

            if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {
              continue;
            }
            let idyR = i32(dyR);

            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {
              let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[2]);

              if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {
                continue;
              }
              let idyC = i32(dyC);

              let dyValue = getDy(batch, idyD, idyR, idyC, ch);
              dotProd += dyValue * uniforms.avgMultiplier;
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
    `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eWe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:a}=e,i=a,{filterSize:o,strides:l,pad:u,dimRoundingMode:c}=r,d=go(i.shape,o,l,1,u,c),h=new JVe(d),m=1/(d.filterDepth*d.filterHeight*d.filterWidth),g=[{type:"int32",data:[d.strideDepth,d.strideHeight,d.strideWidth]},{type:"int32",data:[d.effectiveFilterDepth-1-d.padInfo.front,d.effectiveFilterHeight-1-d.padInfo.top,d.effectiveFilterWidth-1-d.padInfo.left]},{type:"int32",data:[d.effectiveFilterDepth,d.effectiveFilterHeight,d.effectiveFilterWidth]},{type:"int32",data:[d.outDepth]},{type:"int32",data:[d.outHeight]},{type:"int32",data:[d.outWidth]},{type:"float32",data:[m]}];return n.runWebGPUProgram(h,[s],i.dtype,g)}const tWe={kernelName:nk,backendName:"webgpu",kernelFunc:eWe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nWe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:a}=e,i=a;Zne([s,a],"avgPoolGrad");const{filterSize:o,strides:l,pad:u}=r,c=ga(i.shape,o,l,1,u),d=new ZVe(c),h=1/(c.filterHeight*c.filterWidth),m=[{type:"int32",data:[c.strideHeight,c.strideWidth]},{type:"int32",data:[c.effectiveFilterHeight-1-c.padInfo.top,c.effectiveFilterWidth-1-c.padInfo.left]},{type:"int32",data:[c.dilationHeight,c.dilationWidth]},{type:"int32",data:[c.effectiveFilterHeight,c.effectiveFilterWidth]},{type:"int32",data:[c.outHeight]},{type:"int32",data:[c.outWidth]},{type:"float32",data:[h]}];return n.runWebGPUProgram(d,[s],i.dtype,m)}const rWe={kernelName:tk,backendName:"webgpu",kernelFunc:nWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sWe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:a}=e,{transposeA:i,transposeB:o}=r;return uT({a:s,b:a,transposeA:i,transposeB:o,backend:n})}const aWe={kernelName:Hx,backendName:"webgpu",kernelFunc:sWe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iWe{constructor(e,n){this.variableNames=["source"],this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=n,this.rank=n.length,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.start=e,this.uniforms=`start : ${ts(e.length)}, `,this.shaderKey="slice"}getUserCode(){const e=ts(this.rank),n=oWe(this.rank);let r;return this.start.length===1?r=this.outputShape.map((a,i)=>"sourceLoc = uniforms.start + coords;"):r=this.outputShape.map((a,i)=>`sourceLoc.${_D[i]} = uniforms.start.${vc(i)} + coords.${_D[i]};`),`
      ${rt("index")} {
        if (index < uniforms.size) {
          var sourceLoc : ${e};
          let coords = getCoordsFromIndex(index);
          ${r.join(`
`)}
          setOutputAtIndex(index, getSource(${n}));
        }
      }
    `}}const _D=["x","y","z","w","u","v"];function oWe(t){if(t===1)return"sourceLoc";if(t<=6)return _D.slice(0,t).map(e=>`sourceLoc.${e}`).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $y(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:a,size:i}=r,[o,l]=Kv(s,a,i);if(CN(s,o,l),n.shouldExecuteOnCPU([s])||s.dtype==="string"){const d=n.tensorMap.get(s.dataId),h=sVe(d.values,o,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,h)}if(ye(l)===0)return n.makeTensorInfo(l,s.dtype,[]);const u=new iWe(o,l),c=[{type:"int32",data:o}];return n.runWebGPUProgram(u,[s],s.dtype,c)}const lWe={kernelName:_v,backendName:"webgpu",kernelFunc:$y};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uWe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:a,crops:i}=r;X(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGPU backend not implemented yet");const o=a.reduce((C,k)=>C*k),l=Fh(s.shape,a,o),u=zh(l.length,a.length),c=Bh(s.shape,a,o),d=EN(i,a.length),h=AN(c,i,a.length),m=[],g=vt({inputs:{x:s},backend:n,attrs:{shape:l}}),y=Eu({inputs:{x:g},backend:n,attrs:{perm:u}}),b=vt({inputs:{x:y},backend:n,attrs:{shape:c}}),w=$y({inputs:{x:b},backend:n,attrs:{begin:d,size:h}});return m.push(g),m.push(y),m.push(b),m.forEach(C=>n.disposeData(C.dataId)),w},cWe={kernelName:qx,backendName:"webgpu",kernelFunc:uWe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dWe=`
  fn bincount_write(index: i32, value: f32) {
    ${Zd("&result[index]","value","float32")}
  }
`,fWe=`
  fn bincount_write(index: i32, value: f32) {
    atomicStore(&result[index], bitcast<i32>(value));
  }
`;class are{constructor(e,n,r=!1){this.outputShape=[],this.variableNames=["x"],this.uniforms="binCountSize : i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.hasWeights=!0,this.binaryOutput=!1,this.outputShape=e,this.rank=e.length,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.binaryOutput=r,r&&(this.atomic=!1),this.hasWeights=n,this.hasWeights&&this.variableNames.push("w"),this.shaderKey=`bincount_${this.hasWeights}_${this.binaryOutput}_${this.rank}`}getUserCode(){return`
    ${this.binaryOutput?fWe:dWe}
  ${rt("index")} {
    ${this.rank===1?`if (index < uniforms.xShape) {
      let indexVal = i32(getX(index));
      if (indexVal < uniforms.binCountSize) {
        let value = ${this.binaryOutput?1:this.hasWeights?"getW(index)":"1."};
        bincount_write(indexVal, value);
      }
    }`:`let coord = getCoordsFromIndex(index);
    if (coordsInBounds2D(coord, uniforms.xShape)) {
      let indexVal = i32(getX(coord[0], coord[1]));
      if (indexVal < uniforms.binCountSize) {
        let value = ${this.binaryOutput?1:this.hasWeights?"getW(coord[0], coord[1])":"1."};
        bincount_write(coord.x * uniforms.binCountSize + indexVal, value);
      }
    }`}
  }
  `}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:a}=e,{size:i}=r,o=ye(s.shape),u=ye(a.shape)>0,c=[i],d=a.dtype,h=oi({backend:n,attrs:{shape:c,value:0,dtype:d}}),m=new are([o],u),g=[{type:"int32",data:[i]}],y=u?[s,a]:[s];return n.runWebGPUProgram(m,y,d,g,h)}const pWe={kernelName:rk,backendName:"webgpu",kernelFunc:hWe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mWe{constructor(e){this.outputShape=[],this.variableNames=["s0","s1"],this.uniforms="s0Size : i32, s1Size : i32, ",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[e],this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="broadcastArgs"}getUserCode(){return`
  ${rt("index")} {
    if (index < uniforms.size) {
      var s0 = 1.0;
      var s1 = 1.0;
      let indexS0 = index - uniforms.size + uniforms.s0Size;
      let indexS1 = index - uniforms.size + uniforms.s1Size;
      if (indexS0 >= 0) {
        s0 = getS0(indexS0);
      }
      if (indexS1 >= 0) {
        s1 = getS1(indexS1);
      }

      if (s0 == 1.0) {
        setOutputAtIndex(index, s1);
      } else if (s1 == 1.0) {
        setOutputAtIndex(index, s0);
      } else if (s0 != s1) {
        setOutputAtIndex(index, uniforms.NAN);
      } else {
        setOutputAtIndex(index, s0);
      }
    }
  }
  `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gWe(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e;if(n.shouldExecuteOnCPU([r,s])){const c=n.tensorMap.get(r.dataId),d=n.tensorMap.get(s.dataId),h=c.values,m=d.values,g=_t(Array.from(h),Array.from(m));return n.makeTensorInfo([g.length],"int32",Int32Array.from(g))}const a=ye(r.shape),i=ye(s.shape),o=Math.max(a,i),l=new mWe(o),u=[{type:"int32",data:[a]},{type:"int32",data:[i]}];return n.runWebGPUProgram(l,[r,s],"int32",u)}const yWe={kernelName:ak,backendName:"webgpu",kernelFunc:gWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ire=Bs({opType:Ft.NOT_EQUAL,dtype:"bool",cpuKernelImpl:ZUe}),bWe={kernelName:wv,backendName:"webgpu",kernelFunc:ire};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d1(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.tensorMap.get(r.dataId);return _i({inputs:{x:s.complexTensorInfos.real},backend:n})}const xWe={kernelName:Dk,backendName:"webgpu",kernelFunc:d1};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vWe(t,e){const n=new Ty(t.shape,tt.TO_INT),r=e.runWebGPUProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DD(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:a}=r;if(a==="complex64"){if(s.dtype==="complex64")return _i({inputs:{x:s},backend:n});const i=es(s.shape),o=DD({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),l=Xh({inputs:{real:o,imag:i},backend:n});return i.dispose(),n.disposeData(o.dataId),l}if(s.dtype==="complex64"){const i=d1({inputs:{input:s},backend:n}),o=DD({inputs:{x:i},backend:n,attrs:{dtype:a}});return n.disposeData(i.dataId),o}if(!UM(s.dtype,a)){const i=_i({inputs:{x:s},backend:n});return{dataId:i.dataId,shape:i.shape,dtype:a}}if(n.shouldExecuteOnCPU([s])){const i=n.tensorMap.get(s.dataId).values,[o,l,u]=OUe(i,s.shape,s.dtype,a);return n.makeTensorInfo(o,l,u)}if(a==="int32")return vWe(s,n);if(a==="bool"){const i=n.makeTensorInfo([],"bool",$s("bool",1)),l=ire({inputs:{a:s,b:i},backend:n});return n.disposeData(i.dataId),l}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${a}`)}const wWe={kernelName:Cg,backendName:"webgpu",kernelFunc:DD};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SWe=Cn({opType:tt.CEIL,cpuKernelImpl:_Ue}),CWe={kernelName:kg,backendName:"webgpu",kernelFunc:SWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kWe{constructor(e){this.variableNames=["A"],this.uniforms="minVal : f32, maxVal : f32,",this.workPerThread=4,this.workgroupSize=[64,1,1],this.outputComponent=4,this.size=!0,this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.shaderKey="clipVec4"}getUserCode(){return`
      ${rt("index")} {
        if(index < uniforms.size) {
          let value = getAByOutputIndex(index);
          var clampedValue = clamp(
              value, vec4<f32>(uniforms.minVal), vec4<f32>(uniforms.maxVal));
          clampedValue = select(clampedValue, value, isnanVec4(value));
          setOutputAtIndex(index, clampedValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NWe{constructor(e){this.variableNames=["A"],this.uniforms="minVal : f32, maxVal : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="clip"}getUserCode(){return`
      ${rt("index")} {
        if(index < uniforms.size) {
          let value = getAByOutputIndex(index);
          if (isnan(value)) {
            setOutputAtIndex(index, value);
            return;
          }
          setOutputAtIndex(index, clamp(value, uniforms.minVal, uniforms.maxVal));
        }
      }
    `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{clipValueMin:a,clipValueMax:i}=r;let o;const l=[{type:"float32",data:[a]},{type:"float32",data:[i]}];return ye(s.shape)%4===0?o=new kWe(s.shape):o=new NWe(s.shape),n.runWebGPUProgram(o,[s],s.dtype,l)}const $We={kernelName:Ng,backendName:"webgpu",kernelFunc:TWe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IWe{constructor(e){this.outputShape=[],this.variableNames=["real","imag"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="complexAbs"}getUserCode(){return`
    ${rt("index")} {
      if (index < uniforms.size) {
        let re = abs(getRealByOutputIndex(index));
        let im = abs(getImagByOutputIndex(index));
        let mx = max(re, im);

        // The length function in wgsl may be not underflow-safe on some GPUs.
        // So the safe solution is to ensure underflow-safety in all cases.
        setOutputAtIndex(index, select(mx * length(vec2<f32>(1, min(re, im)/mx)), 0.0, mx == 0.0));
      }
    }
  `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hW(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function EWe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=n.tensorMap.get(r.dataId),a=new IWe(r.shape),i=[hW(r,s.complexTensorInfos.real),hW(r,s.complexTensorInfos.imag)];return n.runWebGPUProgram(a,i,i[0].dtype)}const AWe={kernelName:Kx,backendName:"webgpu",kernelFunc:EWe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RWe{constructor(e){this.uniforms="",this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=ii(e,1),this.variableNames=e.map((n,r)=>`T${r}`),this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]),this.offsetLength=e.length-1;for(let n=0;n<this.offsetLength;n++)this.uniforms+=`offset${n} : i32,`;this.shaderKey="concat"}getUserCode(){const e=[];if(this.offsetLength>0){e.push("if (yC < uniforms.offset0){ setOutputAtCoords(coords.x, coords.y, getT0(yR, yC)); }");for(let a=1;a<this.offsetLength;a++)e.push(`else if (yC < uniforms.offset${[a]}){ setOutputAtCoords(coords.x, coords.y, getT${a}(yR, yC - uniforms.offset${a-1})); }`);const r=this.offsetLength,s=this.offsetLength-1;e.push(`else { setOutputAtCoords(coords.x, coords.y, getT${r}(yR, yC - uniforms.offset${s})); }`)}else e.push("setOutputAtCoords(coords.x, coords.y, getT0(yR, yC));");return`
      ${rt("index")} {
        for(var i = 0; i < ${this.workPerThread}; i = i + 1) {
          let flatIndex = index * ${this.workPerThread} + i;
          if(flatIndex < uniforms.size) {
            let coords = getCoordsFromIndex(flatIndex);
            let yR = coords.x;
            let yC = coords.y;

            ${e.join(`
        `)}
          }
        }
      }
    `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cT(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.tensorMap.get(r.dataId);return _i({inputs:{x:s.complexTensorInfos.imag},backend:n})}const OWe={kernelName:kk,backendName:"webgpu",kernelFunc:cT};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ib(t,e,n){const r=t[0].dtype;if(r==="complex64"){const g=t.map(k=>d1({inputs:{input:k},backend:n})),y=t.map(k=>cT({inputs:{input:k},backend:n})),b=ib(g,e,n),w=ib(y,e,n),C=Xh({inputs:{real:b,imag:w},backend:n});return g.forEach(k=>n.disposeData(k.dataId)),y.forEach(k=>n.disposeData(k.dataId)),n.disposeData(b.dataId),n.disposeData(w.dataId),C}let s=n.shouldExecuteOnCPU(t);if(r==="string"&&(s=!0),s){const g=t.map(N=>{const A=[-1,ye(N.shape.slice(e))];return vt({inputs:{x:N},backend:n,attrs:{shape:A}})}),y=g.map(N=>({vals:n.readSync(N.dataId),shape:N.shape})),b=ii(g.map(N=>N.shape),1),w=g[0].shape[0]===1,C=DUe(y,b,r,w),k=ii(t.map(N=>N.shape),e),T=n.makeTensorInfo(k,r,C);return g.forEach(N=>n.disposeData(N.dataId)),T}const a=n.device.limits.maxStorageBuffersPerShaderStage-1;if(t.length>a){const g=[];for(let b=0;b<t.length;b+=a){const w=t.slice(b,b+a);g.push(ib(w,e,n))}const y=ib(g,e,n);for(const b of g)n.disposeData(b.dataId);return y}const{tensors2D:i,outShape:o}=_We(t,e,n),l=i.map(g=>g.shape),u=new RWe(l),c=[],d=new Array(l.length-1);if(d.length>0){d[0]=l[0][1],c.push({type:"int32",data:[d[0]]});for(let g=1;g<d.length;g++)d[g]=d[g-1]+l[g][1],c.push({type:"int32",data:[d[g]]})}const h=n.runWebGPUProgram(u,i,i[0].dtype,c);i.forEach(g=>n.disposeData(g.dataId));const m=vt({inputs:{x:h},backend:n,attrs:{shape:o}});return n.disposeData(h.dataId),m}function _We(t,e,n){const r=ii(t.map(a=>a.shape),e);return{tensors2D:t.map(a=>vt({inputs:{x:a},backend:n,attrs:{shape:[ye(a.shape.slice(0,e)),ye(a.shape.slice(e))]}})),outShape:r}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ore(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,a=Gt(s,e[0].shape)[0],i=e.map(u=>u.shape);TN(i,a);const o=ii(e.map(u=>u.shape),a);if(ye(o)===0)return n.makeTensorInfo(o,e[0].dtype,[]);const l=e.filter(u=>ye(u.shape)>0);return l.length===1?_i({inputs:{x:l[0]},backend:n}):ib(l,a,n)}const DWe={kernelName:Xx,backendName:"webgpu",kernelFunc:ore};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PWe(t,e,n,r,s=!1,a=null,i=!1,o=4,l=4,u=4){const c=P=>{switch(P){case 1:return"resData = f32(x[xIndex]);";case 3:return"resData = vec3<f32>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);";case 4:return"resData = vec4<f32>(x[xIndex / 4]);";default:throw new Error(`innerElementSize ${P} is not supported.`)}},d=P=>{switch(P){case 1:return"return f32(W[row * uniforms.wShape[3] + col]);";case 4:return"return vec4<f32>(W[(row * uniforms.wShape[3] + col) / 4]);";default:throw new Error(`innerElementSize ${P} is not supported.`)}},h=t?`
      let coord = vec4<i32>(batch, xRow, xCol, xCh);
      `:`
      let coord = vec4<i32>(batch, xCh, xRow, xCol);
      `,m=t?`
      let coords = vec4<i32>(
        batch,
        row / outWidth,
        row % outWidth,
        col);
      `:`
      let coords = vec4<i32>(
        batch,
        row,
        col / outWidth,
        col % outWidth);
      `,g=t?"uniforms.xShape[1]":"uniforms.xShape[2]",y=t?"uniforms.xShape[2]":"uniforms.xShape[3]",b=t?"row":"col",w=t?"col":"row",C=`
      let inChannels = uniforms.wShape[2];
      let outWidth = ${t?"uniforms.outShape[2]":"uniforms.outShape[3]"};
      let outRow = ${b} / outWidth;
      let outCol = ${b} % outWidth;

      let WRow = ${w} / (uniforms.filterDims[1] * inChannels);
      let WCol = ${w} / inChannels % uniforms.filterDims[1];
      let xRow = outRow * uniforms.strides[0] + uniforms.dilations[0] * WRow - uniforms.pads[0];
      let xCol = outCol * uniforms.strides[1] + uniforms.dilations[1] * WCol - uniforms.pads[1];
      let xCh = ${w} % inChannels;
      var resData = ${Yt(o)}(0.0);
      // The bounds checking is always needed since we use it to pad zero for
      // the 'same' padding type.
      if (xRow >= 0 && xRow < ${g} && xCol >= 0 && xCol < ${y}) {
        ${h}
        let xIndex = getIndexFromCoords4D(coord, uniforms.xShape);
        ${c(o)}
      }
      return resData;`,k=t?e&&r?`
      ${C}`:`
      if (row < uniforms.dimAOuter && col < uniforms.dimInner) {
        ${C}
      }
      return ${Yt(o)}(0.0);`:r&&n?`
      ${C}`:`
      if (row < uniforms.dimInner && col < uniforms.dimBOuter) {
        ${C}
      }
      return ${Yt(o)}(0.0);`,T=`${d(l)}`,N=Yt(u),I=Yt(t?o:l),A=Yt(t?l:o);return`
      ${Lc(a,i,u===4,4)}
      fn mm_readA(batch: i32, row : i32, col : i32) -> ${I} {
        ${t?k:T}
      }

      fn mm_readB(batch: i32, row : i32, col : i32) -> ${A} {
        ${t?T:k}
      }

      fn mm_write(batch: i32, row : i32, col : i32, valueIn : ${N}) {
        if (row < uniforms.dimAOuter && col < uniforms.dimBOuter)
        {
        var value = valueIn;
        let outWidth = ${t?"uniforms.outShape[2]":"uniforms.outShape[3]"};
        ${m}
        ${Kh(s,a)}
        setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
        }
      }`}class MWe{constructor(e,n,r,s,a=!1,i=null,o=!1,l=!1){this.variableNames=["x","W"],this.uniforms="filterDims : vec2<i32>, pads : vec2<i32>, strides : vec2<i32>, dilations : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.outputShape=e.outShape,this.isChannelsLast=e.dataFormat==="channelsLast",this.isVec4=((e.inChannels%4===0||e.inChannels%3===0)&&this.isChannelsLast||e.outWidth%4===0&&!this.isChannelsLast)&&e.outChannels%4===0,this.dispatchLayout=this.isChannelsLast?{x:[3],y:[1,2],z:[0]}:{x:[2,3],y:[1],z:[0]},this.workgroupSize=Xne(this.dispatchLayout,this.outputShape,this.isVec4),this.elementsPerThread=Yne(this.dispatchLayout,this.outputShape,this.isVec4),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize,this.elementsPerThread),this.isVec4?(this.outputComponent=4,this.isChannelsLast&&e.inChannels%4!==0?(this.innerElementSize=3,this.variableComponents=[1,4]):(this.innerElementSize=4,this.variableComponents=[4,4]),a&&(this.variableNames.push("bias"),this.variableComponents.push(4)),o&&(this.variableNames.push("preluActivationWeights"),this.variableComponents.push(4))):(this.innerElementSize=this.elementsPerThread[0],a&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights")),this.sequentialAccessByThreads=l,this.addBias=a,this.activation=i,this.hasPreluActivationWeights=o,this.tileAOuter=this.workgroupSize[1]*this.elementsPerThread[1],this.tileBOuter=this.workgroupSize[0]*this.elementsPerThread[0],this.tileInner=Math.max(this.workgroupSize[0]*this.innerElementSize,this.workgroupSize[1]),this.fitAOuter=n%this.tileAOuter===0,this.fitBOuter=r%this.tileBOuter===0,this.fitInner=s%this.tileInner===0,this.shaderKey=`conv2DMM_${this.elementsPerThread}_${this.activation}}_${this.fitAOuter}_${this.fitBOuter}_${this.fitInner}_${this.isVec4}_${this.innerElementSize}_${this.isChannelsLast}_${this.sequentialAccessByThreads}`}getUserCode(){const e=this.isVec4?oT(this.elementsPerThread,this.workgroupSize,!this.isChannelsLast,this.tileInner):lT(this.elementsPerThread,this.workgroupSize,!this.isChannelsLast,this.tileInner,!1,null,this.sequentialAccessByThreads),n=this.isVec4?[this.innerElementSize,4,4]:[1,1,1];return`
    ${PWe(this.isChannelsLast,this.fitAOuter,this.fitBOuter,this.fitInner,this.addBias,this.activation,this.hasPreluActivationWeights,n[0],n[1],n[2])}
    ${e}
  `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jWe{constructor(e,n=!1,r=null,s=!1){this.variableNames=["x","W"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>,",this.workgroupSize=[4,4,8],this.outputShape=e.outShape,this.isChannelsLast=e.dataFormat==="channelsLast",this.dispatchLayout=this.isChannelsLast?{x:[2],y:[1],z:[0,3]}:{x:[3],y:[2],z:[0,1]},this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.addBias=n,this.activation=r,this.hasPreluActivationWeights=s,n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),this.shaderKey=`conv2dnaive_${this.activation}_${this.isChannelsLast}`}getUserCode(){return`
       ${Lc(this.activation,this.hasPreluActivationWeights,!1,4)}
       fn readInp(batch : i32, row : i32, col : i32, chan : i32) -> f32{
         let coords = vec4<i32>(batch, row, col, chan);
         if (coordsInBounds4D(coords, uniforms.xShape)) {
           return  getX(batch, row, col, chan);
         } else {
          return 0.0;
         }
       }
       fn readFilt(row : i32, col : i32, xChannel : i32, outChannel : i32) -> f32{
         let coords = vec4<i32>(row, col, xChannel, outChannel);
         if(coordsInBounds4D(coords, uniforms.wShape)) {
           return getW(row, col, xChannel, outChannel);
          } else {
            return 0.0;
          }
       }
       fn writeResult(batch : i32, row : i32, col : i32, chan : i32, valueIn : f32) {
         let coords = ${this.isChannelsLast?"vec4<i32>(batch, row, col, chan);":"vec4<i32>(batch, chan, row, col);"}
         if (coordsInBounds4D(coords, uniforms.outShape)) {
           var value = valueIn;
           ${Kh(this.addBias,this.activation)}
           setOutputAtCoords(coords.x, coords.y, coords.z, coords.w, value);
         }
       }
       ${rt("index")} {
         let coords = getOutputCoords();
         let batch = coords[0];
         let outChannel = ${this.isChannelsLast?"coords[3];":"coords[1];"}
         let outRow = ${this.isChannelsLast?"coords[1];":"coords[2];"}
         let outCol = ${this.isChannelsLast?"coords[2];":"coords[3];"}
         var acc : f32 = 0.0;
         for (var row = 0; row < uniforms.filterDims[0]; row = row + 1) {
           for (var col = 0; col < uniforms.filterDims[1]; col = col + 1) {
             let xRow = outRow * uniforms.strides[0] + uniforms.dilations[0] * row - uniforms.pads[0];
             let xCol = outCol * uniforms.strides[1] + uniforms.dilations[1] * col - uniforms.pads[1];
             for (var xChannel = 0; xChannel < ${this.isChannelsLast?"uniforms.xShape[3];":"uniforms.xShape[1];"} xChannel = xChannel + 1) {
               ${this.isChannelsLast?"let v = readInp(batch, xRow, xCol, xChannel);":"let v = readInp(batch, xChannel, xRow, xCol);"}
               let f = readFilt(row, col, xChannel, outChannel);
               acc = acc + v * f;
             }
           }
         }
         writeResult(batch, outRow, outCol, outChannel, acc);
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LWe{constructor(e,n){this.variableNames=["x"],this.uniforms=`pads : vec2<i32>, strides : vec2<i32>, dilations : vec2<i32>, outWidth : i32, itemsPerBlockRow : i32,
       inChannels : i32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.isChannelsLast=n,this.shaderKey=`im2col_${this.isChannelsLast}`}getUserCode(){const e=this.isChannelsLast?1:2,n=this.isChannelsLast?2:3,r=this.isChannelsLast?"coords[1]":"coords[2]",s=this.isChannelsLast?"coords[2]":"coords[1]",a=this.isChannelsLast?"getX(batch, xRow, xCol, ch)":"getX(batch, ch, xRow, xCol)";return`
    ${rt("index")} {
      let coords = getCoordsFromIndex(index);
      if(index < uniforms.size) {
        let batch = coords[0];
        let row = ${r};
        let col = ${s};
        let offsetY = (row / uniforms.outWidth) * uniforms.strides[0] - uniforms.pads[0];
        let xRow = offsetY + uniforms.dilations[0] * (col / uniforms.itemsPerBlockRow);
        var value = 0.0;
        if(xRow < uniforms.xShape[${e}] && xRow >= 0) {
          let offsetX = (row % uniforms.outWidth) * uniforms.strides[1] -
              uniforms.pads[1];
          let xCol = offsetX + uniforms.dilations[1] * ((col %
              uniforms.itemsPerBlockRow) / uniforms.inChannels);
          let ch = col % uniforms.inChannels;
          if(xCol < uniforms.xShape[${n}] && xCol >= 0) {
            value = ${a};
          }
        }
        setOutputAtIndex(index, value);
      }
    }
   `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A2(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function FWe({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:i=0,activation:o=null}){const l=n.dataFormat==="channelsLast",u=!l,c=!1,d=l&&n.filterHeight===n.inHeight&&n.filterWidth===n.inWidth&&n.padInfo.type==="VALID",h=[];let m,g;if(d){const w=n.inHeight*n.inWidth*n.inChannels;m=vt({inputs:{x:t},backend:r,attrs:{shape:[1,n.batchSize,w]}}),g=vt({inputs:{x:e},backend:r,attrs:{shape:[1,w,n.outChannels]}})}else m=vt({inputs:{x:t},backend:r,attrs:{shape:l?[n.batchSize,n.inHeight*n.inWidth,n.inChannels]:[n.batchSize,n.inChannels,n.inHeight*n.inWidth]}}),g=vt({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});if(h.push(m),h.push(g),a!=null){const w=A2(a.shape,l);w!=null&&(a=vt({inputs:{x:a},backend:r,attrs:{shape:w}}),h.push(a))}if(s!=null){const w=A2(s.shape,l);w!=null&&(s=vt({inputs:{x:s},backend:r,attrs:{shape:w}}),h.push(s))}const y=uT({a:l?m:g,b:l?g:m,transposeA:u,transposeB:c,backend:r,bias:s,activation:o,preluActivationWeights:a,leakyreluAlpha:i}),b=vt({inputs:{x:y},backend:r,attrs:{shape:n.outShape}});h.push(y);for(const w of h)r.disposeData(w.dataId);return b}function zWe({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:i=0,activation:o=null}){const{filterWidth:l,filterHeight:u,inChannels:c,strideWidth:d,strideHeight:h,padInfo:m,outWidth:g,outHeight:y,dilationWidth:b,dilationHeight:w,dataFormat:C}=n,k=C==="channelsLast",T=l*u*c,N=y*g,I=k?[n.batchSize,N,T]:[n.batchSize,T,N],A=new LWe(I,k),D=[{type:"int32",data:[m.top,m.left]},{type:"int32",data:[h,d]},{type:"int32",data:[w,b]},{type:"int32",data:[g]},{type:"int32",data:[c*l]},{type:"int32",data:[c]}],P=r.runWebGPUProgram(A,[t],t.dtype,D),R=[];R.push(P);const O=vt({inputs:{x:e},backend:r,attrs:{shape:[1,T,-1]}});if(R.push(O),a!=null){const j=A2(a.shape,k);j!=null&&(a=vt({inputs:{x:a},backend:r,attrs:{shape:j}}),R.push(a))}if(s!=null){const j=A2(s.shape,k);j!=null&&(s=vt({inputs:{x:s},backend:r,attrs:{shape:j}}),R.push(s))}const V=uT({a:k?P:O,b:k?O:P,transposeA:!k,transposeB:!1,backend:r,bias:s,activation:o,preluActivationWeights:a,leakyreluAlpha:i}),W=vt({inputs:{x:V},backend:r,attrs:{shape:n.outShape}});R.push(V);for(const j of R)r.disposeData(j.dataId);return W}function lre({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:a=null,leakyreluAlpha:i=0,activation:o=null}){const l=s!=null,u=a!=null,c=n.dataFormat==="channelsLast",d=c&&n.filterHeight===n.inHeight&&n.filterWidth===n.inWidth&&n.padInfo.type==="VALID",h=ve().getBool("WEBGPU_USE_NAIVE_CONV2D_DEBUG");if(!h&&(d||n.filterHeight===1&&n.filterWidth===1&&n.dilationHeight===1&&n.dilationWidth===1&&n.strideHeight===1&&n.strideWidth===1&&(n.padInfo.type==="SAME"||n.padInfo.type==="VALID")))return FWe({x:t,filter:e,convInfo:n,backend:r,bias:s,activation:o,preluActivationWeights:a,leakyreluAlpha:i});const m=ve().getNumber("WEBGPU_THRESHOLD_TO_INCREASE_WORKGROUPS_FOR_MATMUL"),g=m>-1?m:r.thresholdToIncreaseWorkgroups,y=n.batchSize*Math.ceil(n.outHeight*n.outWidth/32)*Math.ceil(n.outChannels/32);if(ve().getBool("WEBGPU_CONV_SEPARATE_IM2COL_SHADER")||y<=g)return zWe({x:t,filter:e,convInfo:n,backend:r,bias:s,preluActivationWeights:a,leakyreluAlpha:i,activation:o});let b;const w=[n.padInfo.top,n.padInfo.left],C=[{type:"int32",data:[n.filterHeight,n.filterWidth]},{type:"int32",data:[...w]},{type:"int32",data:[n.strideHeight,n.strideWidth]},{type:"int32",data:[n.dilationHeight,n.dilationWidth]}];if(h)b=new jWe(n,l,o,u);else{const I=c?n.outHeight*n.outWidth:n.outChannels,A=c?n.outChannels:n.outHeight*n.outWidth,D=n.filterHeight*n.filterWidth*n.inChannels;C.push({type:"int32",data:[I]},{type:"int32",data:[A]},{type:"int32",data:[D]});const P=r.adapterInfo.isIntel();b=new MWe(n,I,A,D,l,o,u,P)}const k=[],T=[t,e];l&&(!c&&s.shape.length===1&&(s=vt({inputs:{x:s},backend:r,attrs:{shape:[s.shape[0],1,1]}}),k.push(s)),T.push(s)),u&&(!c&&a.shape.length===1&&(a=vt({inputs:{x:a},backend:r,attrs:{shape:[a.shape[0],1,1]}}),k.push(a)),T.push(a)),o==="leakyrelu"&&(C.push({type:"float32",data:[i]}),b.uniforms+=" alpha : f32,");const N=r.runWebGPUProgram(b,T,t.dtype,C);for(const I of k)r.disposeData(I.dataId);return N}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BWe(t){const{inputs:e,attrs:n,backend:r}=t,{x:s,filter:a}=e,{strides:i,pad:o,dataFormat:l,dilations:u,dimRoundingMode:c}=n,d=Pi(l),h=mr(s.shape,a.shape,i,u,o,c,!1,d);return lre({x:s,filter:a,convInfo:h,backend:r})}const UWe={kernelName:Yx,backendName:"webgpu",kernelFunc:BWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VWe{constructor(e){this.variableNames=["dy","W"],this.uniforms="filterDims : vec2<i32>, pads : vec2<i32>, strides : vec2<i32>, outBackprop : vec4<i32>,",this.workgroupSize=[64,1,1],this.size=!1,this.isVec4=!1,this.workPerThread=1,this.outputShape=e.inShape,this.isChannelsLast=e.dataFormat==="channelsLast",this.isVec4=this.isChannelsLast&&e.outChannels%4===0&&e.inChannels%4===0,this.isVec4?(this.workPerThread=2,this.outputComponent=4,this.workgroupSize=[4,4,4],this.dispatchLayout={x:[3],y:[2],z:[0,1]},this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize,[4,this.workPerThread,1])):(this.size=!0,this.workPerThread=1,this.workgroupSize=[64,1,1],this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize)),this.shaderKey=`conv2DDerInput_${this.isChannelsLast}_${this.isVec4}_${this.workPerThread}`}getUserCode(){const e=this.isChannelsLast?1:2,n=this.isChannelsLast?2:3,r=this.isChannelsLast?3:1,s=`
    ${rt()} {
      let batch = i32(globalId.z) / uniforms.outShape[1];
      let r = i32(globalId.z) % uniforms.outShape[1];
      let c = i32(globalId.y) * ${this.workPerThread};
      let d1 = i32(globalId.x) * 4;

      let dyCorner = vec2<i32>(r, c) - uniforms.pads;

      // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
      // ? = to be determined. : = across all values in that axis.
      var dotProd: array<vec4<f32>, ${this.workPerThread}>;
      for (var i = 0; i < ${this.workPerThread}; i++) {
        dotProd[i] = vec4<f32>(0.0);
      }
      for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + 1) {
        let dyR = f32(dyCorner.x + wR) / f32(uniforms.strides.x);
        let wRPerm = uniforms.filterDims.x - 1 - wR;
        if (dyR < 0.0 || dyR >= f32(uniforms.outBackprop[1]) ||
            fract(dyR) > 0.0) {
          continue;
        }
        let idyR = i32(dyR);

        for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + 1) {
          let dyC = f32(dyCorner.y + wC) / f32(uniforms.strides.y);
          let dyC2 = f32(dyCorner.y + 1 + wC) / f32(uniforms.strides.y);
          let wCPerm = uniforms.filterDims.y - 1 - wC;
          var bDyCVal = true;
          var bDyCVal2 = true;
          if (dyC < 0.0 || dyC >= f32(uniforms.outBackprop[2]) ||
              fract(dyC) > 0.0) {
            bDyCVal = false;
          }
          if (dyC2 < 0.0 || dyC2 >= f32(uniforms.outBackprop[2]) ||
              fract(dyC2) > 0.0) {
            bDyCVal2 = false;
          }

          let idyC = i32(dyC);
          let idyC2 = i32(dyC2);
          if (bDyCVal && bDyCVal2) {
            let d2Length = uniforms.outBackprop[3];
            for (var d2 = 0; d2 < d2Length; d2 = d2 + 4) {
              let wValue0 = getW(wRPerm, wCPerm, d1, d2);
              let wValue1 = getW(wRPerm, wCPerm, d1 + 1, d2);
              let wValue2 = getW(wRPerm, wCPerm, d1 + 2, d2);
              let wValue3 = getW(wRPerm, wCPerm, d1 + 3, d2);
              var xValue =  getDy(batch, idyR, idyC, d2);
              let tmpval = vec4<f32>(dot(xValue, wValue0),
                                     dot(xValue, wValue1),
                                     dot(xValue, wValue2),
                                     dot(xValue, wValue3));
              dotProd[0] = dotProd[0] + tmpval;
              xValue = getDy(batch, idyR, idyC2, d2);
              dotProd[1] = dotProd[1] + vec4<f32>(dot(xValue, wValue0),
                                                  dot(xValue, wValue1),
                                                  dot(xValue, wValue2),
                                                  dot(xValue, wValue3));
            }
          } else if (bDyCVal) {
            let d2Length = uniforms.outBackprop[3];
            for (var d2 = 0; d2 < d2Length; d2 = d2 + 4) {
              let wValue0 = getW(wRPerm, wCPerm, d1, d2);
              let wValue1 = getW(wRPerm, wCPerm, d1 + 1, d2);
              let wValue2 = getW(wRPerm, wCPerm, d1 + 2, d2);
              let wValue3 = getW(wRPerm, wCPerm, d1 + 3, d2);
              var xValue =  getDy(batch, idyR, idyC, d2);
              let tmpval = vec4<f32>(dot(xValue, wValue0),
                                     dot(xValue, wValue1),
                                     dot(xValue, wValue2),
                                     dot(xValue, wValue3));
              dotProd[0] = dotProd[0] + tmpval;
            }
          } else if (bDyCVal2) {
            let d2Length = uniforms.outBackprop[3];
            for (var d2 = 0; d2 < d2Length; d2 = d2 + 4) {
              let wValue0 = getW(wRPerm, wCPerm, d1, d2);
              let wValue1 = getW(wRPerm, wCPerm, d1 + 1, d2);
              let wValue2 = getW(wRPerm, wCPerm, d1 + 2, d2);
              let wValue3 = getW(wRPerm, wCPerm, d1 + 3, d2);
              var xValue =  getDy(batch, idyR, idyC2, d2);
              let tmpval = vec4<f32>(dot(xValue, wValue0),
                                     dot(xValue, wValue1),
                                     dot(xValue, wValue2),
                                     dot(xValue, wValue3));
              dotProd[1] = dotProd[1] + tmpval;
            }
          }
        }
      }

      for (var i = 0; i < ${this.workPerThread}; i = i + 1) {
        let coords = vec4<i32>(batch, r, c + i, d1);
        if (coordsInBounds4D(coords, uniforms.outShape)) {
          setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], dotProd[i]);
        }
      }
    }
    `;return this.isVec4?`
    ${s}
    `:`
    ${rt("index")} {
      if(index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let batch = coords[0];
        let d1 = coords[${r}];

        let dyCorner = vec2<i32>(coords[${e}], coords[${n}]) - uniforms.pads;
        let dyRCorner = dyCorner.x;
        let dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        var dotProd = 0.0;
        for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + 1) {
          let dyR = (f32(dyRCorner) + f32(wR)) / f32(uniforms.strides.x);
          let wRPerm = uniforms.filterDims.x - 1 - wR;
          if (dyR < 0.0 || dyR >= f32(uniforms.outBackprop[1]) || fract(dyR) > 0.0 ||
              wRPerm < 0) {
            continue;
          }
          let idyR = i32(dyR);

          for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + 1) {
            let dyC = (f32(dyCCorner) + f32(wC)) / f32(uniforms.strides.y);
            let wCPerm = uniforms.filterDims.y - 1 - wC;
            if (dyC < 0.0 || dyC >= f32(uniforms.outBackprop[2]) ||
                fract(dyC) > 0.0 || wCPerm < 0) {
              continue;
            }
            let idyC = i32(dyC);

            for (var d2 = 0; d2 < uniforms.outBackprop[3]; d2 = d2 + 1) {
              let xValue = ${this.isChannelsLast?"getDy(batch, idyR, idyC, d2)":"getDy(batch, d2, idyR, idyC)"};
              let wValue = getW(wRPerm, wCPerm, d1, d2);
              dotProd = dotProd + xValue * wValue;
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
  `}}class WWe{constructor(e){this.variableNames=["x","dy"],this.uniforms="pads : vec2<i32>, strides : vec2<i32>, batchSize : i32, outHeight : i32, outWidth : i32, inHeight : i32, inWidth : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.filterShape,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.isChannelsLast=e.dataFormat==="channelsLast",this.shaderKey=`conv2DDerFilter_${this.isChannelsLast}`}getUserCode(){return`
    ${rt("index")} {
      if(index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let wR = coords[0];
        let wC = coords[1];
        let d1 = coords[2];
        let d2 = coords[3];

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        var dotProd = 0.0;
        for (var b = 0; b < uniforms.batchSize; b = b + 1) {
          for (var yR = 0; yR < uniforms.outHeight; yR = yR + 1) {
            let xR = wR + yR * uniforms.strides[0] - uniforms.pads[0];
            if (xR < 0 || xR >= uniforms.inHeight) {
              continue;
            }

            for (var yC = 0; yC < uniforms.outWidth; yC = yC + 1) {
              let xC = wC + yC * uniforms.strides[1] - uniforms.pads[1];

              if (xC < 0 || xC >= uniforms.inWidth) {
                continue;
              }

              if (${this.isChannelsLast}) {
                let dyValue = getDy(b, yR, yC, d2);
                let xValue = getX(b, xR, xC, d1);
                dotProd = dotProd + xValue * dyValue;
              } else {
                let dyValue = getDy(b, d2, yR, yC);
                let xValue = getX(b, d1, xR, xC);
                dotProd = dotProd + xValue * dyValue;
              }
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
  `}}class GWe{constructor(e){this.variableNames=["x","dy"],this.uniforms=`pads : vec3<i32>, strides : vec3<i32>, batchSize : i32, outDepth : i32,
       outHeight : i32, outWidth : i32, inDepth : i32, inHeight : i32, inWidth : i32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.filterShape,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="conv3DDerFilter"}getUserCode(){return`
    ${rt("index")} {
      if(index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let wF = coords.x;
        let wR = coords.y;
        let wC = coords.z;
        let d1 = coords.w;
        let d2 = coords.u;

        var dotProd = 0.0;
        for (var b = 0; b < uniforms.batchSize; b++) {
          for (var yF = 0; yF < uniforms.outDepth; yF++) {
            let xF = wF + yF * uniforms.strides[0] - uniforms.pads[0];
            if (xF < 0 || xF >= uniforms.inDepth) {
              continue;
            }

            for (var yR = 0; yR < uniforms.outHeight; yR++) {
              let xR = wR + yR * uniforms.strides[1] - uniforms.pads[1];
              if (xR < 0 || xR >= uniforms.inHeight) {
                continue;
              }

              for (var yC = 0; yC < uniforms.outWidth; yC++) {
                let xC = wC + yC * uniforms.strides[2] - uniforms.pads[2];
                if (xC < 0 || xC >= uniforms.inWidth) {
                  continue;
                }

                let dyValue = getDy(b, yF, yR, yC, d2);
                let xValue = getX(b, xF, xR, xC, d1);
                dotProd += xValue * dyValue;
              }
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
  `}}class HWe{constructor(e){this.variableNames=["dy","W"],this.uniforms=`filterDims : vec3<i32>, pads : vec3<i32>, strides : vec3<i32>,
      outDepth : i32, outHeight : i32, outWidth : i32, outChannels : i32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.inShape,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="conv3DDerInput"}getUserCode(){return`
    ${rt("index")} {
      if(index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let batch = coords.x;
        let d1 = coords.u;

        let dyCorner = vec3<i32>(coords.y, coords.z, coords.w) - uniforms.pads;
        let dyFCorner = dyCorner.x;
        let dyRCorner = dyCorner.y;
        let dyCCorner = dyCorner.z;

        var dotProd = 0.0;
        for (var wF = 0; wF < uniforms.filterDims[0]; wF++) {
          let dyF = f32(dyFCorner + wF) / f32(uniforms.strides[0]);
          if (dyF < 0.0 || dyF >= f32(uniforms.outDepth) || fract(dyF) > 0.0) {
            continue;
          }
          let idyF = i32(dyF);

          let wFPerm = uniforms.filterDims[0] - 1 - wF;

          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {
            let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[1]);

            if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {
              continue;
            }
            let idyR = i32(dyR);

            let wRPerm = uniforms.filterDims[1] - 1 - wR;

            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {
              let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[2]);

              if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {
                continue;
              }
              let idyC = i32(dyC);

              let wCPerm = uniforms.filterDims[2] - 1 - wC;

              for (var d2 = 0; d2 < uniforms.outChannels; d2++) {
                let xValue = getDy(batch, idyF, idyR, idyC, d2);
                let wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
  `}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qWe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:a}=e,{strides:i,pad:o,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,d=Pi(l),h=mr(s.shape,c,i,1,o,u,!1,d),m=new WWe(h),g=[{type:"int32",data:[h.padInfo.top,h.padInfo.left]},{type:"int32",data:[h.strideHeight,h.strideWidth]},{type:"int32",data:[h.batchSize]},{type:"int32",data:[h.outHeight]},{type:"int32",data:[h.outWidth]},{type:"int32",data:[h.inHeight]},{type:"int32",data:[h.inWidth]}];return n.runWebGPUProgram(m,[s,a],s.dtype,g)}const KWe={kernelName:ok,backendName:"webgpu",kernelFunc:qWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XWe(t=4){const e=a=>{switch(a){case 1:return"return W[getIndexFromCoords4D(coord, uniforms.wShape)];";case 4:return`
            let coord1 = vec4<i32>(coordX, coordY, col + 1, rowInner);
            let coord2 = vec4<i32>(coordX, coordY, col + 2, rowInner);
            let coord3 = vec4<i32>(coordX, coordY, col + 3, rowInner);
            let v0 = W[getIndexFromCoords4D(coord, uniforms.wShape)];
            let v1 = W[getIndexFromCoords4D(coord1, uniforms.wShape)];
            let v2 = W[getIndexFromCoords4D(coord2, uniforms.wShape)];
            let v3 = W[getIndexFromCoords4D(coord3, uniforms.wShape)];
            return vec4<f32>(v0, v1, v2, v3);
            `;default:throw new Error(`innerElementSize ${a} is not supported.`)}},r=`if (row < uniforms.dimAOuter && col < uniforms.dimInner) {
        ${`
      let outRow = row / uniforms.outShape[2];
      let outCol = row % uniforms.outShape[2];

      let WRow = col / (uniforms.filterDims[1] * uniforms.outBackprop[3]);
      let WCol = col / uniforms.outBackprop[3] % uniforms.filterDims[1];
      let xR = f32(outRow - uniforms.pads[0] + WRow) / f32(uniforms.strides[0]);
      let xC = f32(outCol - uniforms.pads[1] + WCol) / f32(uniforms.strides[1]);
      if (xR < 0.0 || xR >= f32(uniforms.outBackprop[1]) || fract(xR) > 0.0) {
        return ${Yt(t)}(0.0);
      }
      if (xC < 0.0 || xC >= f32(uniforms.outBackprop[2]) || fract(xC) > 0.0) {
        return ${Yt(t)}(0.0);
      }
      let coord = vec4<i32>(
          batch,
          i32(xR),
          i32(xC),
          col % uniforms.outBackprop[3]);
      return x[getIndexFromCoords4D(coord, uniforms.xShape)/${t}];`}
      }
      return ${Yt(t)}(0.0);`;return`
  fn mm_readA(batch: i32, row : i32, col : i32) -> ${Yt(t)} {
    ${r}
  }

  fn mm_readB(batch: i32, row : i32, col : i32) -> ${Yt(t)} {
    let coordX = uniforms.filterDims.x - 1 -
        row / (uniforms.filterDims[1] * uniforms.outBackprop[3]);
    let coordY = uniforms.filterDims.y - 1 -
        (row / uniforms.outBackprop[3]) % uniforms.filterDims[1];
    if (row < uniforms.dimInner && col < uniforms.dimBOuter &&
        coordX >= 0 && coordY >= 0) {
      let rowInner = row % uniforms.outBackprop[3];
      let coord = vec4<i32>(coordX, coordY, col, rowInner);
      ${e(t)}
    }
    return ${Yt(t)}(0.0);
  }

  fn mm_write(batch: i32, row : i32, col : i32, valueInput : ${Yt(t)}) {
    if (row < uniforms.dimAOuter && col < uniforms.dimBOuter) {
      var value = valueInput;
      let outCoord = vec4<i32>(
          batch,
          row / uniforms.outShape[2],
          row % uniforms.outShape[2],
          col);
      result[getIndexFromCoords4D(outCoord, uniforms.outShape)/${t}] = value;
    }
  }`}class YWe{constructor(e){this.variableNames=["x","W"],this.uniforms="filterDims : vec2<i32>, pads : vec2<i32>, strides : vec2<i32>, outBackprop : vec4<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.outputShape=e.inShape,X(e.dataFormat==="channelsLast",()=>"TODO: NCHW is unimplemented"),this.isVec4=e.inChannels%4===0&&e.outChannels%4===0,this.dispatchLayout={x:[3],y:[1,2],z:[0]},this.workgroupSize=Xne(this.dispatchLayout,this.outputShape,this.isVec4),this.elementsPerThread=Yne(this.dispatchLayout,this.outputShape,this.isVec4),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize,this.elementsPerThread),this.isVec4&&(this.outputComponent=4,this.variableComponents=[4,1]),this.shaderKey=`conv2DDerInputMM_${this.isVec4}_${this.elementsPerThread}`}getUserCode(){const e=this.isVec4?oT(this.elementsPerThread,this.workgroupSize):lT(this.elementsPerThread,this.workgroupSize);return`
    ${XWe(this.isVec4?4:1)}
    ${e}
    `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QWe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:a}=e,{inputShape:i,strides:o,pad:l,dataFormat:u,dimRoundingMode:c}=r,d=Pi(u),h=mr(i,a.shape,o,1,l,c,!1,d),m=[{type:"int32",data:[h.filterHeight,h.filterWidth]},{type:"int32",data:[h.filterHeight-1-h.padInfo.top,h.filterWidth-1-h.padInfo.left]},{type:"int32",data:[h.strideHeight,h.strideWidth]},{type:"int32",data:[h.batchSize,h.outHeight,h.outWidth,h.outChannels]}];let g;if(ve().getBool("WEBGPU_USE_NAIVE_CONV2D_TRANSPOSE")||h.dataFormat!=="channelsLast")g=new VWe(h);else{g=new YWe(h);const y=h.inHeight*h.inWidth,b=h.inChannels,w=h.filterHeight*h.filterWidth*h.outChannels;m.push({type:"uint32",data:[y]},{type:"uint32",data:[b]},{type:"uint32",data:[w]})}return n.runWebGPUProgram(g,[s,a],"float32",m)}const ZWe={kernelName:Qx,backendName:"webgpu",kernelFunc:QWe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JWe{constructor(e){this.variableNames=["x","W"],this.uniforms="filterDims: vec3<i32>, pads: vec3<i32>, strides: vec3<i32>, dilations: vec3<i32>,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.outShape,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="conv3dnaive"}getUserCode(){return`
    ${rt("index")} {
      if (index < uniforms.size) {
        let coords = getOutputCoords();
        let batch = coords.x;
        let d2 = coords.u;

        let xFRCCorner = vec3<i32>(coords.y, coords.z, coords.w) * uniforms.strides - uniforms.pads;
        let xFCorner = xFRCCorner.x;
        let xRCorner = xFRCCorner.y;
        let xCCorner = xFRCCorner.z;

        let inputDepthNearestVec4 = (uniforms.xShape.u / 4) * 4;
        let inputDepthVec4Remainder = uniforms.xShape.u % 4;

        var dotProd = 0.0;
        for (var wF = 0; wF < uniforms.filterDims[0]; wF++) {
          let xF = xFCorner + wF * uniforms.dilations[0];
          if (xF < 0 || xF >= uniforms.xShape.y) {
            continue;
          }

          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {
            let xR = xRCorner + wR * uniforms.dilations[1];
            if (xR < 0 || xR >= uniforms.xShape.z) {
              continue;
            }

            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {
              let xC = xCCorner + wC * uniforms.dilations[2];
              if (xC < 0 || xC >= uniforms.xShape.w) {
                continue;
              }

              for (var d1 = 0; d1 < inputDepthNearestVec4; d1 += 4) {
                let xValues = vec4<f32>(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                let wValues = vec4<f32>(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (inputDepthVec4Remainder == 1) {
                dotProd += getX(batch, xF, xR, xC, inputDepthNearestVec4) *
                  getW(wF, wR, wC, inputDepthNearestVec4, d2);
              } else if (inputDepthVec4Remainder == 2) {
                let xValues = vec2<f32>(
                  getX(batch, xF, xR, xC, inputDepthNearestVec4),
                  getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1)
                );
                let wValues = vec2<f32>(
                  getW(wF, wR, wC, inputDepthNearestVec4, d2),
                  getW(wF, wR, wC, inputDepthNearestVec4 + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (inputDepthVec4Remainder == 3) {
                let xValues = vec3<f32>(
                  getX(batch, xF, xR, xC, inputDepthNearestVec4),
                  getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1),
                  getX(batch, xF, xR, xC, inputDepthNearestVec4 + 2)
                );
                let wValues = vec3<f32>(
                  getW(wF, wR, wC, inputDepthNearestVec4, d2),
                  getW(wF, wR, wC, inputDepthNearestVec4 + 1, d2),
                  getW(wF, wR, wC, inputDepthNearestVec4 + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }`}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a}=e,{strides:i,pad:o,dilations:l}=r,u=ql(s.shape,a.shape,i,l,o),c=[u.padInfo.front,u.padInfo.top,u.padInfo.left],d=[{type:"int32",data:[u.filterDepth,u.filterHeight,u.filterWidth]},{type:"int32",data:[...c]},{type:"int32",data:[u.strideDepth,u.strideHeight,u.strideWidth]},{type:"int32",data:[u.dilationDepth,u.dilationHeight,u.dilationWidth]}],h=new JWe(u),m=zs(s.dtype,a.dtype);return n.runWebGPUProgram(h,[s,a],m,d)}const t6e={kernelName:Zx,backendName:"webgpu",kernelFunc:e6e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:a}=e,{strides:i,pad:o,filterShape:l}=r,u=ql(s.shape,l,i,1,o),c=new GWe(u),d=[{type:"int32",data:[u.padInfo.front,u.padInfo.top,u.padInfo.left]},{type:"int32",data:[u.strideDepth,u.strideHeight,u.strideWidth]},{type:"int32",data:[u.batchSize]},{type:"int32",data:[u.outDepth]},{type:"int32",data:[u.outHeight]},{type:"int32",data:[u.outWidth]},{type:"int32",data:[u.inDepth]},{type:"int32",data:[u.inHeight]},{type:"int32",data:[u.inWidth]}];return n.runWebGPUProgram(c,[s,a],a.dtype,d)}const r6e={kernelName:lk,backendName:"webgpu",kernelFunc:n6e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s6e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:a}=e,{strides:i,pad:o,inputShape:l}=r,u=ql(l,a.shape,i,1,o),c=new HWe(u),d=[{type:"int32",data:[u.filterDepth,u.filterHeight,u.filterWidth]},{type:"int32",data:[u.filterDepth-1-u.padInfo.front,u.filterHeight-1-u.padInfo.top,u.filterWidth-1-u.padInfo.left]},{type:"int32",data:[u.strideDepth,u.strideHeight,u.strideWidth]},{type:"int32",data:[u.outDepth]},{type:"int32",data:[u.outHeight]},{type:"int32",data:[u.outWidth]},{type:"int32",data:[u.outChannels]}];return n.runWebGPUProgram(c,[s,a],s.dtype,d)}const a6e={kernelName:uk,backendName:"webgpu",kernelFunc:s6e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i6e=Cn({opType:tt.COS}),o6e={kernelName:Tg,backendName:"webgpu",kernelFunc:i6e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l6e=Cn({opType:tt.COSH}),u6e={kernelName:$g,backendName:"webgpu",kernelFunc:l6e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c6e{constructor(e,n,r,s){this.variableNames=["Image","Boxes","BoxInd"],this.uniforms="extrapolationValue : f32,",this.workgroupSize=[64,1,1],this.size=!0;const[a]=n;this.outputShape=[a,r[0],r[1],e],this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.methodId=s==="bilinear"?1:0,this.cropHeightBiggerThan1=this.outputShape[1]>1,this.cropWidthBiggerThan1=this.outputShape[2]>1,this.shaderKey=`cropAndResize_${this.methodId}_${this.cropHeightBiggerThan1}_${this.cropWidthBiggerThan1}`}getUserCode(){const[e,n]=["f32(uniforms.imageShape[1] - 1)","f32(uniforms.imageShape[2] - 1)"],[r,s,a]=this.cropHeightBiggerThan1?[`(${e} / f32(uniforms.outShape[1] - 1))`,"(y2-y1) * height_ratio",`y1*${e} + f32(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${e}`],[i,o,l]=this.cropWidthBiggerThan1?[`(${n} / f32(uniforms.outShape[2] - 1))`,"(x2-x1) * width_ratio",`x1*${n} + f32(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${n}`];return`
    ${rt("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let height_ratio = f32(${r});
        let width_ratio = f32(${i});
        let b = coords[0];
        let y = coords[1];
        let x = coords[2];
        let d = coords[3];
        // get box vals
        let y1 = getBoxes(b, 0);
        let x1 = getBoxes(b, 1);
        let y2 = getBoxes(b, 2);
        let x2 = getBoxes(b, 3);
        // get image in batch index
        let bInd = i32(round(getBoxInd(b)));
        if(bInd < 0 || bInd >= uniforms.outShape[0]) {
          return;
        }
        let height_scale = ${s};
        let width_scale = ${o};
        let in_y = ${a};
        if( in_y < 0.0 || in_y > ${e} ) {
          setOutputAtIndex(index, uniforms.extrapolationValue);
          return;
        }
        let in_x = ${l};
        if( in_x < 0.0 || in_x > ${n} ) {
          setOutputAtIndex(index, uniforms.extrapolationValue);
          return;
        }
        let sourceFracIndexCR = vec2<f32>(in_x,in_y);
        if(${this.methodId} == 1) {
          // Compute the four integer indices.
          let sourceFloorCR = vec2<i32>(sourceFracIndexCR);
          let sourceCeilCR = vec2<i32>(ceil(sourceFracIndexCR));
          let topLeft = getImage(bInd, sourceFloorCR.y, sourceFloorCR.x, d);
          let bottomLeft = getImage(bInd, sourceCeilCR.y, sourceFloorCR.x, d);
          let topRight = getImage(bInd, sourceFloorCR.y, sourceCeilCR.x, d);
          let bottomRight = getImage(bInd, sourceCeilCR.y, sourceCeilCR.x, d);
          let fracCR = sourceFracIndexCR - vec2<f32>(sourceFloorCR);
          let top = topLeft + (topRight - topLeft) * fracCR.x;
          let bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          let newValue = top + (bottom - top) * fracCR.y;
          setOutputAtIndex(index, newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          let sourceNearestCR = vec2<i32>(floor(
            sourceFracIndexCR + vec2<f32>(0.5,0.5)));
          let newValue = getImage(
            bInd, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutputAtIndex(index, newValue);
        }
      }
    }
    `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d6e=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:a,boxInd:i}=e,{cropSize:o,method:l,extrapolationValue:u}=r,c=new c6e(s.shape[3],a.shape,o,l),d=[{type:"float32",data:[u]}];return n.runWebGPUProgram(c,[s,a,i],"float32",d)},f6e={kernelName:dk,backendName:"webgpu",kernelFunc:d6e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Hb;(function(t){t.Prod="*",t.Sum="+"})(Hb||(Hb={}));class pW{constructor(e,n,r,s){this.variableNames=["x"],this.uniforms="index : f32,",this.size=!0,this.workgroupSize=[128,1,1],this.outputShape=n,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.exclusive=r,this.reverse=s,this.op=e,this.shaderKey=`cum_${this.op}_${this.exclusive}_${this.reverse}`}getUserCode(){const e=this.outputShape.length,n=this.op===Hb.Prod?"1.0":"0.0",r=this.exclusive?n:`getX(${mW(e,"coords",this.op)})`,s=this.outputShape[this.outputShape.length-1];let a="",i="";return this.exclusive?(a=this.reverse?`end != ${s-1}`:"end != 0",i=this.reverse?"end + 1":"end - 1"):(a=this.reverse?`end + pow2 < ${s}`:"end >= pow2",i=this.reverse?"end + pow2":"end - pow2"),`
      ${rt("index")} {
       if (index < uniforms.size) {
         var coords = getCoordsFromIndex(index);

         let end = ${gW(e,"coords",this.op)};
         var val = ${r};
         let pow2 = i32(pow(2.0, uniforms.index));
         if (${a}) {
           let idx = ${i};
           ${gW(e,"coords",this.op)} = idx;
           val ${this.op}= getX(${mW(e,"coords",this.op)});
         }
         setOutputAtIndex(index, val);
       }
      }
    `}}function mW(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function gW(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ure(t,e,n,r,s,a){const i=e.shape.length,o=Yn([r],i);let l=e;o!=null&&(l=Eu({inputs:{x:e},backend:n,attrs:{perm:o}}));const u=gr(1,i)[0];if(u!==i-1)throw new Error(`WebGPU cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=l.shape[u];let d=_i({inputs:{x:l},backend:n});for(let h=0;h<=Math.ceil(Math.log2(c))-1;h++){const m=new pW(t,l.shape,!1,a),g=d,y=[{type:"float32",data:[h]}];d=n.runWebGPUProgram(m,[d],d.dtype,y),n.disposeData(g.dataId)}if(s){const h=new pW(t,l.shape,s,a),m=d,g=[{type:"float32",data:[0]}];d=n.runWebGPUProgram(h,[d],d.dtype,g),n.disposeData(m.dataId)}if(o!=null){const h=ju(o),m=Eu({inputs:{x:d},backend:n,attrs:{perm:h}});return n.disposeData(d.dataId),n.disposeData(l.dataId),m}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,exclusive:i,reverse:o}=r;return ure(Hb.Prod,s,n,a,i,o)}const p6e={kernelName:ck,backendName:"webgpu",kernelFunc:h6e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,exclusive:i,reverse:o}=r;return ure(Hb.Sum,s,n,a,i,o)}const g6e={kernelName:Jx,backendName:"webgpu",kernelFunc:m6e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:a}=e,{size:i,binaryOutput:o}=r,l=s.shape.length===1,c=ye(a.shape)>0,d=a.dtype,h=l?[s.shape[0]]:[s.shape[0],s.shape[1]],m=l?[i]:[s.shape[0],i],g=oi({backend:n,attrs:{shape:m,value:0,dtype:d}}),y=new are(h,c,o),b=[{type:"int32",data:[i]}],w=c?[s,a]:[s];return n.runWebGPUProgram(y,w,d,b,g)}const b6e={kernelName:fk,backendName:"webgpu",kernelFunc:y6e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x6e{constructor(e,n){this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.uniforms="blockSize : i32,",this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey=`depthToSpace_${n}`,this.dataFormat=n}getUserCode(){return`
      ${rt("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let b = coords[0];
          let h = ${this.getHeightCoordString()};
          let w = ${this.getWidthCoordString()};
          let d = ${this.getDepthCoordString()};

          let in_h = h / uniforms.blockSize;
          let offset_h = h % uniforms.blockSize;
          let in_w = w / uniforms.blockSize;
          let offset_w = w % uniforms.blockSize;
          let offset_d = (offset_h * uniforms.blockSize + offset_w) *
            ${this.getOutputDepthSize()};
          let in_d = d + offset_d;

          let rlt = ${this.getInputSamplingString()};
          setOutputAtIndex(index, rlt);
        }
      }`}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?"uniforms.outShape[3]":"uniforms.outShape[1]"}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:a,dataFormat:i}=r,o=s.shape[0],l=i==="NHWC"?s.shape[1]:s.shape[2],u=i==="NHWC"?s.shape[2]:s.shape[3],c=i==="NHWC"?s.shape[3]:s.shape[1],d=l*a,h=u*a,m=c/(a*a),g=i==="NHWC"?[o,d,h,m]:[o,m,d,h],y=[{type:"int32",data:[a]}],b=new x6e(g,i);return n.runWebGPUProgram(b,[s],s.dtype,y)}const w6e={kernelName:hk,backendName:"webgpu",kernelFunc:v6e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class S6e{constructor(e,n,r,s=!1,a=null,i=!1){this.variableNames=["x","W"],this.uniforms="pads : vec2<i32>, inDims : vec2<i32>,",this.workgroupSize=[16,16,1],this.outputShape=e,this.dispatchLayout={x:[3],y:[2],z:[0,1]},this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),s&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),this.addBias=s,this.activation=a,this.hasPreluActivation=i,this.filterHeight=n,this.filterWidth=r,this.shaderKey=`depthwiseNCHW_${this.activation}_${this.filterHeight}_${this.filterWidth}`}getUserCode(){const e=this.filterWidth*this.filterHeight,n=this.workgroupSize[0]*this.workgroupSize[1]*this.workgroupSize[2],r=this.workgroupSize[1]+this.filterHeight-1,s=this.workgroupSize[0]+this.filterWidth-1;return`
      ${Lc(this.activation,this.hasPreluActivation,!1,4)}

      var<workgroup> mm_Asub : array<array<f32, ${s}>, ${r}>;
      var<workgroup> mm_Bsub : array<array<f32, ${this.filterWidth}>, ${this.filterHeight}>;
      fn readX(batch : i32, channel : i32, row : i32, col : i32) -> f32 {
        var value = 0.0;
        if (row >=0 && row < uniforms.inDims[0] && col >=0 && col < uniforms.inDims[1])
        {
          value = getX(batch, channel, row, col);
        }
        return value;
      }

      ${rt()} {
        let coords = getOutputCoords();
        let batch = coords[0];
        let xRCCorner = vec2<i32>(coords.zw) - uniforms.pads;
        let channelMul = uniforms.wShape[3];
        let d1 = coords[1] / channelMul;
        let q = coords[1] % channelMul;

        let inputRowStart = xRCCorner.x;
        let inputColStart = xRCCorner.y;

        let localRow = i32(localId.y);
        let localCol = i32(localId.x);

        // Load one tile of X into local memory.
        for (var inputRow = localRow; inputRow < ${r}; inputRow = inputRow + ${this.workgroupSize[1]}) {
          for (var inputCol = localCol; inputCol < ${s}; inputCol = inputCol + ${this.workgroupSize[0]}) {
            let rowOffset = inputRow - localRow;
            let colOffset = inputCol - localCol;
            mm_Asub[inputRow][inputCol] = readX(batch, d1, inputRowStart + rowOffset, inputColStart + colOffset);
          }
        }

        // Load one tile of W into local memory.
        var wIndex = i32(localIndex);
        ${e<n?`if (wIndex < ${e})`:`for(; wIndex < ${e}; wIndex = wIndex + ${n})`}

        {
          let wRow = wIndex / ${this.filterWidth};
          let wCol = wIndex % ${this.filterWidth};
          mm_Bsub[wRow][wCol] = getW(wRow, wCol, d1, q);
        }

        workgroupBarrier();

        var value = 0.0;
        for (var wR = 0; wR < ${this.filterHeight}; wR = wR + 1) {
          for (var wC = 0; wC < ${this.filterWidth}; wC = wC + 1) {
            let xVal = mm_Asub[localRow + wR][localCol + wC];
            let wVal = mm_Bsub[wR][wC];
            value = fma(xVal, wVal, value);
          }
        }
        ${Kh(this.addBias,this.activation)}
        if (coordsInBounds4D(coords, uniforms.outShape)) {
          setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
        }
      }
    `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cre{constructor(e,n=!1,r=null,s=!1){this.variableNames=["x","W"],this.uniforms="pads : vec2<i32>, inDims : vec2<i32>, virtualWidth : i32,",this.workgroupSize=[64,1,1],this.workPerThread=4,this.outputComponent=4,this.outputShape=e.outShape,this.virtualWidth=Math.ceil(this.outputShape[2]/this.workPerThread)*this.workPerThread;const a=[this.outputShape[0],this.outputShape[1],this.virtualWidth,this.outputShape[3]];this.dispatchLayout=ht(a),this.dispatch=st(this.dispatchLayout,a,this.workgroupSize,[this.outputComponent*this.workPerThread,1,1]),X(e.dataFormat==="channelsLast",()=>"TODO: NCHW is unimplemented"),n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),this.convInfo=e,this.addBias=n,this.activation=r,this.hasPreluActivation=s,this.shaderKey=`depthwiseVec4_${r}_${this.convInfo.filterHeight}_${this.convInfo.filterWidth}_${this.convInfo.strideHeight}_${this.convInfo.strideWidth}_${this.workPerThread}`}getUserCode(){const e=(this.workPerThread-1)*this.convInfo.strideWidth+this.convInfo.filterWidth,n=this.convInfo.strideHeight,r=this.convInfo.strideWidth;return`
      ${Lc(this.activation,this.hasPreluActivation,!0,4)}
      fn readX(batch : i32, row : i32, col : i32, channel : i32) -> vec4<f32> {
        var value = vec4<f32>(0.0);
        if (col >=0 && col < uniforms.inDims[1]) {
          value = getX(batch, row, col, channel);
        }
        return value;
      }

      ${rt("index")} {
        let width0 = uniforms.outShape[3] / ${this.outputComponent};
        let d1 = (index % width0) * ${this.outputComponent};
        var index1 = index / width0;
        let width1 = uniforms.virtualWidth / ${this.workPerThread};
        let c = (index1 % width1) * ${this.workPerThread};
        index1 = index1 / width1;
        let r = index1 % uniforms.outShape[1];
        let batch = index1 / uniforms.outShape[1];

        let xRCCorner = vec2<i32>(r, c) * vec2<i32>(${n}, ${r}) - uniforms.pads;

        let xRCorner = xRCCorner.x;
        let xCCorner = xRCCorner.y;
        var xVals : array<vec4<f32>, ${e}>;
        var dotProd : array<vec4<f32>, ${this.workPerThread}>;
        for (var i = 0; i < ${this.workPerThread}; i++) {
          dotProd[i] = vec4<f32>(0.0);
        }

        // Use constant instead of uniform can give better performance.
        for (var wR = 0; wR < ${this.convInfo.filterHeight}; wR = wR + 1) {
          let xR = xRCorner + wR;
          if (xR >=0 && xR < uniforms.inDims[0]) {
            for (var i = 0; i < ${e}; i++) {
              xVals[i] = readX(batch, xR, xCCorner + i, d1);
            }
            for (var wC = 0; wC < ${this.convInfo.filterWidth}; wC = wC + 1) {
              let wValue = getW(wR, wC, d1, 0);
              for (var i = 0; i < ${this.workPerThread}; i++) {
                dotProd[i] = fma(xVals[i * ${r} + wC], wValue, dotProd[i]);
              }
            }
          }
        }

        for (var i = 0; i < ${this.workPerThread}; i = i + 1) {
          let coords = vec4<i32>(batch, r, c + i, d1);
          if (coordsInBounds4D(coords, uniforms.outShape)) {
            var value = dotProd[i];
            ${Kh(this.addBias,this.activation)}
            setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
          }
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dre{constructor(e,n=!1,r=null,s=!1){this.variableNames=["x","W"],this.uniforms=`pads : vec2<i32>, inDims : vec2<i32>, filterHeight : i32,
      filterWidth : i32, strides : vec2<i32>, dilations : vec2<i32>,`,this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=e.outShape,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.isChannelsLast=e.dataFormat==="channelsLast",n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),this.convInfo=e,this.addBias=n,this.activation=r,this.hasPreluActivation=s,this.shaderKey=`depthwise_${this.activation}_${this.isChannelsLast}`}getUserCode(){const e=this.isChannelsLast?"getX(batch, xR, xC, d1);":"getX(batch, d1, xR, xC);";return`
      ${Lc(this.activation,this.hasPreluActivation,!1,4)}

      ${rt("index")} {
        if (index < uniforms.size) {
          let coords = getOutputCoords();
          let batch = coords[0];
          let xRCCorner = vec2<i32>(coords.${this.isChannelsLast?"yz":"zw"}) * uniforms.strides - uniforms.pads;
          let d2 = coords[${this.isChannelsLast?3:1}];
          let channelMul = uniforms.wShape[3];
          let d1 = d2 / channelMul;
          let q = d2 % channelMul;

          let inputRowStart = xRCCorner.x;
          let inputColStart = xRCCorner.y;
          let inputRowEnd = inputRowStart + uniforms.filterHeight *
              uniforms.dilations[0];
          let inputColEnd = inputColStart + uniforms.filterWidth *
              uniforms.dilations[1];

          // Convolve x(?, ?, d1)|x(d1, ?, ?) with w(:, :, d1, q) to get
          // y(yR, yC, d2)|y(d2, yR, yC). ? = to be determined. : = across all
          // values in that axis. x(?, ?, d1) and y(yR, yC, d2) is for NHWC.
          // x(d1, ?, ?) and y(d2, yR, yC) is for NCHW.
          var value = 0.0;

          // Extract if checking out of for loop for performance.
          if (inputRowStart >= 0 && inputColStart >= 0 &&
            inputRowEnd < uniforms.inDims[0] &&
                inputColEnd < uniforms.inDims[1]) {
              for (var wR = 0; wR < uniforms.filterHeight; wR = wR + 1) {
                let xR = inputRowStart + wR * uniforms.dilations[0];

                for (var wC = 0; wC < uniforms.filterWidth; wC = wC + 1) {
                  let xC = inputColStart + wC * uniforms.dilations[1];

                  let xVal = ${e};
                  let wVal = getW(wR, wC, d1, q);
                  value = value + xVal * wVal;
                }
              }
            } else {
              for (var wR = 0; wR < uniforms.filterHeight; wR = wR + 1) {
                let xR = inputRowStart + wR * uniforms.dilations[0];

                if (xR < 0 || xR >= uniforms.inDims[0]) {
                  continue;
                }

                for (var wC = 0; wC < uniforms.filterWidth; wC = wC + 1) {
                  let xC = inputColStart + wC * uniforms.dilations[1];

                  if (xC < 0 || xC >= uniforms.inDims[1]) {
                    continue;
                  }

                  let xVal = ${e};
                  let wVal = getW(wR, wC, d1, q);
                  value = value + xVal * wVal;
                }
              }
            }
            ${Kh(this.addBias,this.activation)}
          setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
        }
      }
    `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a}=e,{strides:i,pad:o,dataFormat:l,dilations:u,dimRoundingMode:c}=r,d=Pi(l);let h=u;h==null&&(h=[1,1]);const m=mr(s.shape,a.shape,i,h,o,c,!0,d),g=[{type:"int32",data:[m.padInfo.top,m.padInfo.left]},{type:"int32",data:[m.inHeight,m.inWidth]}],y=m.dataFormat==="channelsLast";let b;return!y&&m.inHeight>16&&m.inWidth>16&&m.strideHeight===1&&m.strideWidth===1&&m.dilationWidth===1&&m.dilationHeight===1&&m.inChannels===m.outChannels?b=new S6e(m.outShape,m.filterHeight,m.filterWidth):y&&m.outHeight>4&&m.outWidth>4&&m.strideWidth<=2&&m.inChannels===m.outChannels&&m.dilationHeight===1&&m.dilationWidth===1&&m.inChannels%4===0?(b=new cre(m),g.push({type:"int32",data:[b.virtualWidth]})):(b=new dre(m),g.push({type:"int32",data:[m.filterHeight]},{type:"int32",data:[m.filterWidth]},{type:"int32",data:[m.strideHeight,m.strideWidth]},{type:"int32",data:[m.dilationHeight,m.dilationWidth]})),n.runWebGPUProgram(b,[s,a],s.dtype,g)}const k6e={kernelName:ev,backendName:"webgpu",kernelFunc:C6e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class N6e{constructor(e){this.variableNames=["x","dy"],this.uniforms=`strides : vec2<i32>, pads : vec2<i32>, filterDims : vec2<i32>, outHeight : i32,
      outWidth : i32, inHeight : i32, inWidth : i32, batchSize : i32, channelMul : i32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.filterShape,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="depthwise_conv2d_backprop_filter"}getUserCode(){return`
      ${rt("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let wR = coords[0];
        let wC = coords[1];
        let d1 = coords[2];
        let dm = coords[3];
        let d2 = d1 * uniforms.channelMul + dm;

        var dotProd = 0.0;
        for (var b = 0; b < uniforms.batchSize; b++) {
          for (var yR = 0; yR < uniforms.outHeight; yR++) {
            let xR = wR + yR * uniforms.strides[0] - uniforms.pads[0];

            if (xR < 0 || xR >= uniforms.inHeight) {
              continue;
            }

            for (var yC = 0; yC < uniforms.outWidth; yC++) {
              let xC = wC + yC * uniforms.strides[1] - uniforms.pads[1];

              if (xC < 0 || xC >= uniforms.inWidth) {
                continue;
              }

              let dyValue = getDy(b, yR, yC, d2);
              let xValue = getX(b, xR, xC, d1);
              dotProd += xValue * dyValue;
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
    `}}class T6e{constructor(e){this.variableNames=["dy","W"],this.uniforms=`strides : vec2<i32>, pads : vec2<i32>, filterDims : vec2<i32>,
       outHeight : i32, outWidth : i32, channelMul : i32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.inShape,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="depthwise_conv2d_backprop_input"}getUserCode(){return`
      ${rt("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let batch = coords[0];
        let d1 = coords[3];
        let dyCorner = coords.yz - uniforms.pads;
        let dyRCorner = dyCorner.x;
        let dyCCorner = dyCorner.y;

        var dotProd = 0.0;
        for (var wR = 0; wR < uniforms.filterDims[0]; wR++) {
          let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[0]);

          if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {
            continue;
          }

          let idyR = i32(dyR);
          let wRPerm = uniforms.filterDims[0] - 1 - wR;

          for (var wC = 0; wC < uniforms.filterDims[1]; wC++) {
            let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[1]);

            if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {
              continue;
            }

            let idyC = i32(dyC);
            let wCPerm = uniforms.filterDims[1] - 1 - wC;

            for (var dm = 0; dm < uniforms.channelMul; dm++) {
              let d2 = d1 * uniforms.channelMul + dm;
              let xValue = getDy(batch, idyR, idyC, d2);
              let wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
    `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:a}=e,{strides:i,dilations:o,pad:l,dimRoundingMode:u,filterShape:c}=r,d=mr(s.shape,c,i,o,l,u,!0),h=new N6e(d),m=[{type:"int32",data:[d.strideHeight,d.strideWidth]},{type:"int32",data:[d.padInfo.top,d.padInfo.left]},{type:"int32",data:[d.filterHeight,d.filterWidth]},{type:"int32",data:[d.outHeight]},{type:"int32",data:[d.outWidth]},{type:"int32",data:[d.inHeight]},{type:"int32",data:[d.inWidth]},{type:"int32",data:[d.batchSize]},{type:"int32",data:[d.outChannels/d.inChannels]}];return n.runWebGPUProgram(h,[s,a],"float32",m)}const I6e={kernelName:pk,backendName:"webgpu",kernelFunc:$6e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E6e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:a}=e,{strides:i,dilations:o,pad:l,dimRoundingMode:u,inputShape:c}=r,d=mr(c,a.shape,i,o,l,u,!0),h=new T6e(d),m=[{type:"int32",data:[d.strideHeight,d.strideWidth]},{type:"int32",data:[d.filterHeight-1-d.padInfo.top,d.filterWidth-1-d.padInfo.left]},{type:"int32",data:[d.filterHeight,d.filterWidth]},{type:"int32",data:[d.outHeight]},{type:"int32",data:[d.outWidth]},{type:"int32",data:[d.outChannels/d.inChannels]}];return n.runWebGPUProgram(h,[s,a],s.dtype,m)}const A6e={kernelName:mk,backendName:"webgpu",kernelFunc:E6e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class R6e{constructor(e){this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[e,e],this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="diag"}getUserCode(){return`
      ${rt("index")} {
        if (index < uniforms.size) {
          let coords = getOutputCoords();
          let value = select(0.0, getX(coords[0]), coords[0] == coords[1]);
          setOutputAtIndex(index, value);
        }
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O6e(t){const{inputs:e,backend:n}=t,{x:r}=e,s=[...r.shape,...r.shape],a=ye(r.shape),i=vt({inputs:{x:r},backend:n,attrs:{shape:[a]}}),o=new R6e(a),l=n.runWebGPUProgram(o,[i],i.dtype),u=vt({inputs:{x:l},backend:n,attrs:{shape:s}});return n.disposeData(i.dataId),n.disposeData(l.dataId),u}const _6e={kernelName:gk,backendName:"webgpu",kernelFunc:O6e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D6e{constructor(e){this.variableNames=["x","w"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.outShape,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="dilation2d"}getUserCode(){return`
       ${rt("index")} {
         if (index < uniforms.size) {
           let neg_infinity = -3.4e38;
           let coords = getOutputCoords();
           let batch = coords.x;
           let d1 = coords.w;
           let outTopLeftCorner = coords.yz * uniforms.strides - uniforms.pads;
           let hBeg = outTopLeftCorner.x;
           let wBeg = outTopLeftCorner.y;

           var curVal = neg_infinity;
           for (var h = 0; h < uniforms.filterDims[0]; h = h + 1) {
             let hIn = hBeg + h * uniforms.dilations[0];

             if (hIn >= 0 && hIn < uniforms.xShape[1]) {
               for (var w = 0; w < uniforms.filterDims[1]; w = w + 1) {
                 let wIn = wBeg + w * uniforms.dilations[1];

                 if (wIn >= 0 && wIn < uniforms.xShape[2]) {
                   let val = getX(batch, hIn, wIn, d1) + getW(h, w, d1);
                   if (val > curVal) {
                     curVal = val;
                   }
                 }
               }
             }
           }

           setOutputAtIndex(index, curVal);
         }
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a}=e,{strides:i,pad:o,dilations:l}=r,u=Hd(s.shape,a.shape,i,o,"NHWC",l),c=[u.padInfo.top,u.padInfo.left],d=[{type:"int32",data:[u.filterHeight,u.filterWidth]},{type:"int32",data:[...c]},{type:"int32",data:[u.strideHeight,u.strideWidth]},{type:"int32",data:[u.dilationHeight,u.dilationWidth]}],h=new D6e(u);return n.runWebGPUProgram(h,[s,a],s.dtype,d)}const M6e={kernelName:tv,backendName:"webgpu",kernelFunc:P6e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j6e{constructor(e,n){if(this.variableNames=["x","w","dy"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>, dySize: i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=e.inShape,this.dispatchLayout=ht(e.outShape),this.dispatch=st(this.dispatchLayout,e.outShape,this.workgroupSize),n!=="float32"&&n!=="int32")throw new Error(`Dilation2DBackpropInput only supports float32 and int32
          types, does not support ${n} type.`);this.type=n,this.shaderKey="dilation2DBackpropInput"}getUserCode(){return`
       ${rt("index")} {
         if (index < uniforms.dySize) {
           let coords = getDyCoordsFromIndex(index);
           let b = coords[0];
           let r = coords[1];
           let c = coords[2];
           let d = coords[3];

           let dyCorner = vec2<i32>(r, c) * uniforms.strides - uniforms.pads;
           var curVal = -3.4e38;  // neg_infinity
           var xRMax = 0;
           var xCMax = 0;

           // In the case of multiple argmax branches, we only back-propagate
           // along the last branch, i.e., the one with largest value of
           // 'wR * uniforms.filterDims[1] + wC', similarly to the max-pooling
           // backward routines.
           for (var wR = 0; wR < uniforms.filterDims[0]; wR++) {
             let xR = dyCorner.x + wR * uniforms.dilations[0];

             if (xR >= 0 && xR < uniforms.xShape[1]) {
               for (var wC = 0; wC < uniforms.filterDims[1]; wC++) {
                 let xC = dyCorner.y + wC * uniforms.dilations[1];

                 if (xC >= 0 && xC < uniforms.xShape[2]) {
                   let val = getX(b, xR, xC, d) + getW(wR, wC, d);
                   if (val > curVal) {
                     curVal = val;
                     xRMax = xR;
                     xCMax = xC;
                   }
                 }
               }
             }
           }

           let flatIndexIn = d + uniforms.xShape[3] *
               (xCMax + uniforms.xShape[2] * (xRMax + uniforms.xShape[1] * b));
           let value = getDy(b, r, c, d);
           ${Zd("&result[flatIndexIn]","value",this.type)}
         }
       }
     `}}class L6e{constructor(e,n,r){if(this.variableNames=["x","w","dy"],this.uniforms="filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>, dySize: i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=e.filterShape,this.dispatchLayout=ht(e.outShape),this.dispatch=st(this.dispatchLayout,e.outShape,this.workgroupSize),r!=="float32"&&r!=="int32")throw new Error(`Dilation2DBackpropFilter only supports float32 and int32
          types, does not support ${r} type.`);this.type=r,this.shaderKey="dilation2DBackpropFilter"}getUserCode(){return`
       ${rt("index")} {
         if (index < uniforms.dySize) {
           let coords = getDyCoordsFromIndex(index);
           let b = coords[0];
           let r = coords[1];
           let c = coords[2];
           let d = coords[3];

           let dyCorner = vec2<i32>(r, c) * uniforms.strides - uniforms.pads;
           var curVal = -3.4e38;  // neg_infinity
           var wRMax = 0;
           var wCMax = 0;

           // In the case of multiple argmax branches, we only back-propagate
           // along the last branch, i.e., the one with largest value of
           // 'wR * uniforms.filterDims[1] + wC', similarly to the max-pooling
           // backward routines.
           for (var wR = 0; wR < uniforms.filterDims[0]; wR++) {
             let xR = dyCorner.x + wR * uniforms.dilations[0];

             if (xR >= 0 && xR < uniforms.xShape[1]) {
               for (var wC = 0; wC < uniforms.filterDims[1]; wC++) {
                 let xC = dyCorner.y + wC * uniforms.dilations[1];

                 if (xC >= 0 && xC < uniforms.xShape[2]) {
                   let val = getX(b, xR, xC, d) + getW(wR, wC, d);
                   if (val > curVal) {
                     curVal = val;
                     wRMax = wR;
                     wCMax = wC;
                   }
                 }
               }
             }
           }

           let flatIndexIn = d + uniforms.wShape[2] * (wCMax + wRMax * uniforms.wShape[1]);
           let value = getDy(b, r, c, d);
           ${Zd("&result[flatIndexIn]","value",this.type)}
         }
       }
     `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a,dy:i}=e,{strides:o,pad:l,dilations:u}=r,c=Hd(s.shape,a.shape,o,l,"NHWC",u),d=a.dtype,h=new L6e(c,a.shape,d),m=[{type:"int32",data:[c.filterHeight,c.filterWidth]},{type:"int32",data:[c.padInfo.top,c.padInfo.left]},{type:"int32",data:[c.strideHeight,c.strideWidth]},{type:"int32",data:[c.dilationHeight,c.dilationWidth]},{type:"int32",data:[ye(c.outShape)]}],g=oi({backend:n,attrs:{shape:a.shape,value:0,dtype:d}});return n.runWebGPUProgram(h,[s,a,i],d,m,g)}const z6e={kernelName:t2,backendName:"webgpu",kernelFunc:F6e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a,dy:i}=e,{strides:o,pad:l,dilations:u}=r,c=Hd(s.shape,a.shape,o,l,"NHWC",u),d=s.dtype,h=new j6e(c,d),m=[{type:"int32",data:[c.filterHeight,c.filterWidth]},{type:"int32",data:[c.padInfo.top,c.padInfo.left]},{type:"int32",data:[c.strideHeight,c.strideWidth]},{type:"int32",data:[c.dilationHeight,c.dilationWidth]},{type:"int32",data:[ye(c.outShape)]}],g=oi({backend:n,attrs:{shape:c.inShape,value:0,dtype:d}});return n.runWebGPUProgram(h,[s,a,i],d,m,g)}const U6e={kernelName:e2,backendName:"webgpu",kernelFunc:B6e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class V6e{constructor(e,n,r){this.variableNames=["Image"],this.uniforms="alpha: f32,",this.workgroupSize=[64,1,1],this.pixelsOpType=Lm.DRAW,this.size=!0,this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.type=n,this.textureFormat=r,this.shaderKey=`draw_${n}_${r}`}getUserCode(){let e;const n=this.type==="float32"?"value":"value / 255.0";return e=`
      if (uniforms.numChannels == 1) {
        rgba[0] = ${n};
        rgba[1] = ${n};
        rgba[2] = ${n};
      } else {
        rgba[d] = ${n};
      }`,`
       @group(0) @binding(0) var outImage : texture_storage_2d<${this.textureFormat}, write>;
       ${rt("index")} {
         if (index < uniforms.size) {
           var rgba = vec4<f32>(0.0, 0.0, 0.0, uniforms.alpha);
           for (var d = 0; d < uniforms.numChannels; d = d + 1) {
             let value = f32(inBuf[index * uniforms.numChannels + d]);
             ${e}
           }
           rgba.x = rgba.x * rgba.w;
           rgba.y = rgba.y * rgba.w;
           rgba.z = rgba.z * rgba.w;
           let coords = getCoordsFromIndex(index);
           textureStore(outImage, vec2<i32>(coords.yx), rgba);
         }
       }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use backend file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W6e(t){const{inputs:e,backend:n,attrs:r}=t,{image:s}=e,{canvas:a,options:i}=r,[o,l]=s.shape.slice(0,2),{imageOptions:u}=i||{},c=(u==null?void 0:u.alpha)||1,d=n.device.features.has("bgra8unorm-storage")?"bgra8unorm":"rgba8unorm",h=[o,l],m=new V6e(h,s.dtype,d);a.width=l,a.height=o;const g="webgpu";let y=a.getContext(g),b;y||(b=new OffscreenCanvas(l,o),y=b.getContext(g));const w=s.shape.length===3?s.shape[2]:1;y.configure({device:n.device,format:d,usage:GPUTextureUsage.STORAGE_BINDING,alphaMode:"premultiplied"});const C="int32",k=n.makeTensorInfo(h,C),T=n.tensorMap.get(k.dataId);T.resource=y.getCurrentTexture(),T.external=!0;const N=[{type:"uint32",data:[w]},{type:"float32",data:[c]}];if(n.runWebGPUProgram(m,[s],C,N,k),b){const I=a.getContext("2d");if(!I)throw new Error("Please make sure this canvas has only been used for 2d or webgpu context!");I.drawImage(b,0,0)}return n.disposeData(k.dataId),s}const G6e={kernelName:GM,backendName:"webgpu",kernelFunc:W6e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fre=Bs({opType:Ft.MUL,cpuKernelImpl:YUe,supportsComplex:!0}),H6e={kernelName:Gg,backendName:"webgpu",kernelFunc:fre};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hre(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r;return Yh(s,a,i,"sum",n)}const q6e={kernelName:Dv,backendName:"webgpu",kernelFunc:hre};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K6e(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,a=e,{allDims:i,summedDims:o,idDims:l}=jN(s,a.length);FN(i.length,l,a);const{path:u,steps:c}=zN(o,l),d=c.length;let h=null,m=i.length;const g=[];for(let y=0;y<d;++y){for(const b of c[y]){const{permutationIndices:w,expandDims:C}=LN(m,l[b]);let k;BN(w)?k=a[b]:(k=Eu({inputs:{x:a[b]},backend:n,attrs:{perm:w}}),g.push(k));const T=k.shape.slice();for(let N=0;N<C.length;++N)T.splice(C[N],0,1);Xt(k.shape,T)||(k=vt({inputs:{x:k},backend:n,attrs:{shape:T}}),g.push(k)),h===null?h=k:(h=fre({inputs:{a:k,b:h},backend:n}),g.push(h))}y<d-1&&(u[y]>=0&&(h=hre({inputs:{x:h},backend:n,attrs:{axis:u[y]-(i.length-m),keepDims:!1}}),g.push(h)),m--)}for(const y of g)y!==h&&n.disposeData(y.dataId);return h}const X6e={kernelName:yk,backendName:"webgpu",kernelFunc:K6e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y6e=Cn({opType:tt.ELU}),Q6e={kernelName:Eg,backendName:"webgpu",kernelFunc:Y6e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z6e=t=>{const{inputs:e,backend:n}=t,{dy:r,y:s}=e,a=new E2(Ft.ELU_DER,r.shape,s.shape);return n.runWebGPUProgram(a,[r,s],r.dtype)},J6e={kernelName:bk,backendName:"webgpu",kernelFunc:Z6e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eGe=Bs({opType:Ft.EQUAL,dtype:"bool",cpuKernelImpl:PUe}),tGe={kernelName:nv,backendName:"webgpu",kernelFunc:eGe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nGe=Cn({opType:tt.ERF}),rGe={kernelName:Ag,backendName:"webgpu",kernelFunc:nGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sGe=Cn({opType:tt.EXP,cpuKernelImpl:MUe,dtype:"float32"}),aGe={kernelName:Rg,backendName:"webgpu",kernelFunc:sGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PD(t){const{inputs:e,attrs:n,backend:r}=t,{dim:s}=n,{input:a}=e,i=a.shape.length,o=a.shape.slice();let l=s;return s<0&&(X(-(i+1)<=s,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+s+1),o.splice(l,0,1),vt({inputs:{x:a},backend:r,attrs:{shape:o}})}const iGe={kernelName:rv,backendName:"webgpu",kernelFunc:PD};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oGe=Cn({opType:tt.EXPM1,cpuKernelImpl:jUe}),lGe={kernelName:Og,backendName:"webgpu",kernelFunc:oGe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yW{constructor(e,n){this.variableNames=["real","imag"],this.outputShape=[],this.uniforms="exponentMultiplier : f32, denominator: f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=n,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.component=e,this.shaderKey=`fft_${e}`}getUserCode(){return`
    fn unaryOpComplex(real: f32, expR: f32, imag: f32, expI: f32) -> f32 {
      ${this.component==="real"?"return real * expR - imag * expI;":"return real * expI + imag * expR;"}
    }

    fn mulMatDFT(batch: i32, index: i32) -> f32 {
      let indexRatio = f32(index) / f32(uniforms.realShape[1]);
      let exponentMultiplierTimesIndexRatio =
          uniforms.exponentMultiplier * indexRatio;

      var result = 0.0;

      for (var i = 0; i < uniforms.realShape[1]; i = i + 1) {
        // x = (-2|2 * PI / N) * index * i;
        let x = exponentMultiplierTimesIndexRatio * f32(i);
        let expR = cos(x);
        let expI = sin(x);
        let real = getReal(batch, i);
        let imag = getImag(batch, i);

        result = result +
            unaryOpComplex(real, expR, imag, expI) / uniforms.denominator;
      }

      return result;
    }

    ${rt("index")} {
      if (index < uniforms.size) {
        let coords = getOutputCoords();
        setOutputAtIndex(index, mulMatDFT(coords[0], coords[1]));
      }
    }
  `}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pre(t,e,n){const r=n.tensorMap.get(t.dataId),s=ye(t.shape),a=t.shape[t.shape.length-1],i=s/a,o=[],l=vt({inputs:{x:t},backend:n,attrs:{shape:[i,a]}});o.push(l);const u=l.shape,c=new yW("real",u),d=new yW("imag",u),h=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:u},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:u}],m=e?2*Math.PI:-2*Math.PI,g=e?u[1]:1,y=[{type:"float32",data:[m]},{type:"float32",data:[g]}],b=n.runWebGPUProgram(c,h,"float32",y);o.push(b);const w=n.runWebGPUProgram(d,h,"float32",y);o.push(w);const C=Xh({inputs:{real:b,imag:w},backend:n});o.push(C);const k=vt({inputs:{x:C},backend:n,attrs:{shape:t.shape}});return o.forEach(T=>n.disposeData(T.dataId)),k}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uGe(t){const{inputs:e,backend:n}=t,{input:r}=e;return pre(r,!1,n)}const cGe={kernelName:xk,backendName:"webgpu",kernelFunc:uGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dGe{constructor(e){this.outputShape=[],this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="flipLeftRight"}getUserCode(){return`
      ${rt("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let coordX = uniforms.xShape[2] - coords[2] - 1;
          let outputValue = getX(coords[0], coords[1], coordX, coords[3]);
          setOutputAtIndex(index, outputValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fGe={kernelName:wk,backendName:"webgpu",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,s=new dGe(n.shape);return r.runWebGPUProgram(s,[n],n.dtype)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hGe=Cn({opType:tt.FLOOR,cpuKernelImpl:LUe}),pGe={kernelName:_g,backendName:"webgpu",kernelFunc:hGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mGe=Bs({opType:Ft.FLOOR_DIV,cpuKernelImpl:FUe,dtype:"int32"}),gGe={kernelName:Dg,backendName:"webgpu",kernelFunc:mGe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yGe{constructor(e,n,r=!1){this.pixelsOpType=Lm.FROM_PIXELS,this.outputShape=[0],this.variableNames=[],this.workgroupSize=[256,1,1],this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize,[n,1,1]),this.importVideo=r,this.shaderKey=`fromPixels_${this.importVideo}`}getUserCode(){const e=this.importVideo?"textureLoad(src, vec2<i32>(coords.yx));":"textureLoad(src, vec2<i32>(coords.yx), 0)";return`
      @binding(1) @group(0) var src: ${this.importVideo?"texture_external":"texture_2d<f32>"};
      ${rt("index")} {
        let flatIndex = index * uniforms.numChannels;
        if (flatIndex < uniforms.size) {
          let coords = getCoordsFromIndex(flatIndex);
          let values = ${e};
          for (var i = 0; i < uniforms.numChannels; i = i + 1) {
            result[flatIndex + i] = i32(floor(255.0 * values[i]));
          }
        }
      }
  `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use backend file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bGe={kernelName:n2,backendName:"webgpu",kernelFunc:xGe};let zp,tA=ve().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function xGe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:s}=e;const{numChannels:a}=r;if(s==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");const i=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,o=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,l=typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas,u=typeof ImageBitmap<"u"&&s instanceof ImageBitmap,[c,d]=i?[s.videoWidth,s.videoHeight]:[s.width,s.height],h=[d,c,a],m=ve().getBool("WEBGPU_IMPORT_EXTERNAL_TEXTURE")&&i,g=i||o;if(u||l||g){let C;if(m)C=n.device.importExternalTexture({source:s});else{if(g){const z=ve().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(zp==null||z!==tA)&&(tA=z,zp=document.createElement("canvas").getContext("2d",{willReadFrequently:tA})),zp.canvas.width=c,zp.canvas.height=d,zp.drawImage(s,0,0,c,d),s=zp.canvas}const R=GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING,F=n.textureManager.acquireTexture(h[1],h[0],"rgba8unorm",R);n.queue.copyExternalImageToTexture({source:s},{texture:F},[h[1],h[0]]),C=F}const k=ye(h),T=$t(h),N=new yGe(h,a,m),I=[{type:"uint32",data:[k]},{type:"uint32",data:[a]},{type:"uint32",data:[...T]}],A=n.makeTensorInfo([d,c],"int32"),D=n.tensorMap.get(A.dataId);D.resource=C;const P=n.runWebGPUProgram(N,[A],"int32",I);return n.disposeData(A.dataId),P}const y=s.data;let b=y;if(a!=null&&a!==4){b=new Uint8Array(s.width*s.height*a);const C=y.length;let k=0;for(let T=0;T<C;T++)T%4<a&&(b[k++]=y[T])}const w=n.makeTensorInfo(h,"int32",new Int32Array(b));return n.uploadToGPU(w.dataId),w}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vGe{constructor(e,n,r,s,a){this.uniforms="varianceEpsilon : f32,",this.workgroupSize=[128,1,1],this.size=!0,this.variableNames=["x","mean","variance"],_t(e,n),_t(e,r),this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),s!=null&&(_t(e,s),this.variableNames.push("offset")),a!=null&&(_t(e,a),this.variableNames.push("scale")),this.offsetShape=s,this.scaleShape=a,this.shaderKey="batchNorm"}getUserCode(){let e="0.0";this.offsetShape!=null&&(e="getOffsetByOutputIndex(index)");let n="1.0";return this.scaleShape!=null&&(n="getScaleByOutputIndex(index)"),`
      ${rt("index")} {
        if (index < uniforms.size)
        {
          let xValue = getXByOutputIndex(index);
          let meanValue = getMeanByOutputIndex(index);
          let varianValue = getVarianceByOutputIndex(index);
          let offsetValue = ${e};
          let scaleValue = ${n};
          let inv = scaleValue * inverseSqrt(varianValue + f32(uniforms.varianceEpsilon));
          setOutputAtIndex(index,dot(vec3<f32>(xValue, -meanValue, offsetValue), vec3<f32>(inv, inv, 1.0)));
        }
      }
  `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wGe={kernelName:sv,backendName:"webgpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r,scale:s,offset:a,mean:i,variance:o}=t,{varianceEpsilon:l}=e,u=n,c=[r,i,o];let d=null;a!=null&&(d=a.shape,c.push(a));let h=null;s!=null&&(h=s.shape,c.push(s));const m=new vGe(r.shape,i.shape,o.shape,d,h),g=[{type:"float32",data:[l]}];return u.runWebGPUProgram(m,c,r.dtype,g)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a,bias:i,preluActivationWeights:o}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h,activation:m,leakyreluAlpha:g}=r,y=Pi(c),b=mr(s.shape,a.shape,l,d,u,h,!1,y);return lre({x:s,filter:a,convInfo:b,backend:n,bias:i,preluActivationWeights:o,leakyreluAlpha:g,activation:m})}const CGe={kernelName:$b,backendName:"webgpu",kernelFunc:SGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:a,bias:i,preluActivationWeights:o}=e,{strides:l,pad:u,dilations:c,dimRoundingMode:d,activation:h,leakyreluAlpha:m}=r;let g=c;g==null&&(g=[1,1]),X(Es(l,g),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${g}'`);const y=mr(s.shape,a.shape,l,g,u,d,!0),b=[s,a],w=i!=null,C=o!=null;w&&b.push(i),C&&b.push(o);const k=[{type:"int32",data:[y.padInfo.top,y.padInfo.left]},{type:"int32",data:[y.inHeight,y.inWidth]}];let T;return y.outHeight>4&&y.outWidth>4&&y.strideWidth<=2&&y.inChannels===y.outChannels&&y.dilationHeight===1&&y.dilationWidth===1&&y.inChannels%4===0?(T=new cre(y,w,h,C),k.push({type:"int32",data:[T.virtualWidth]})):(T=new dre(y,w,h,C),k.push({type:"int32",data:[y.filterHeight]},{type:"int32",data:[y.filterWidth]},{type:"int32",data:[y.strideHeight,y.strideWidth]},{type:"int32",data:[y.dilationHeight,y.dilationWidth]})),h==="leakyrelu"&&(k.push({type:"float32",data:[m]}),T.uniforms+=" alpha : f32,"),n.runWebGPUProgram(T,b,"float32",k)}const NGe={kernelName:Ib,backendName:"webgpu",kernelFunc:kGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TGe{constructor(e,n){this.variableNames=["A","indices"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=n,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey=`gathernd_${e}`,this.sliceDim=e,this.uniforms=`sliceDim : i32, strides : ${ts(e)},`}getUserCode(){let e;return this.sliceDim>1?e="uniforms.strides[j]":e="uniforms.strides",`
      ${rt("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          var flattenIndex = 0;
          for (var j = 0; j < uniforms.sliceDim; j = j + 1) {
            let indexTemp = i32(round(getIndices(coords[0], j)));
            let strideNum = ${e};
            flattenIndex = flattenIndex + indexTemp * strideNum;
          }

          setOutputAtIndex(index, getA(flattenIndex, coords[1]));
        }
      }
      `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ge(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,a=s.shape,i=a[a.length-1],o=ye(r.shape),[l,u,c,d]=SN(r,s),h=vt({inputs:{x:s},backend:n,attrs:{shape:[u,i]}}),m=vt({inputs:{x:r},backend:n,attrs:{shape:[ye(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const C=n.readSync(s.dataId),k=n.bufferSync(r),T=zUe(C,k,r.dtype,u,i,c,d,r.shape,o);return n.makeTensorInfo(l,r.dtype,T.values)}const g=new TGe(i,[u,c]),y=[{type:"int32",data:[i]},{type:"int32",data:d}],b=n.runWebGPUProgram(g,[m,h],m.dtype,y),w=vt({inputs:{x:b},backend:n,attrs:{shape:l}});return n.disposeData(h.dataId),n.disposeData(m.dataId),n.disposeData(b.dataId),w}const IGe={kernelName:Sk,backendName:"webgpu",kernelFunc:$Ge};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EGe{constructor(e,n){this.variableNames=["A","indices"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.slice(),this.aShape=e,this.outputShape=n,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="gather"}getUserCode(){const e=AGe(this.aShape);return`
      ${rt("index")} {
        if (index < uniforms.size) {
          let resRC = getCoordsFromIndex(index);
          let indexZ = i32(getIndices(resRC.x, resRC.z));
          let inBounds = select(0.0, 1.0, indexZ >= 0 && indexZ < uniforms.aShape[2]);
          setOutputAtIndex(index, inBounds * getA(${e}));
        }
      }
    `}}function AGe(t){const e=["resRC.x","resRC.y","resRC.z","resRC.w"],n=[];for(let r=0;r<t.length;r++)r===2?n.push("indexZ"):n.push(`${e[r]}`);return n.join()}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mre(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:a}=e,{axis:i,batchDims:o}=r,l=Gt(i,s.shape)[0],u=VN(s,a,l,o),c=ye(a.shape),d=[],h=vt({inputs:{x:s},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),m=vt({inputs:{x:a},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});d.push(h),d.push(m);const g=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([s,a])){const k=n.tensorMap.get(m.dataId).values,T=Wt(m.shape,m.dtype,k),I=n.tensorMap.get(h.dataId).values,A=Wt(h.shape,h.dtype,I),D=BUe(A,T,g);return d.forEach(P=>n.disposeData(P.dataId)),n.makeTensorInfo(u.outputShape,D.dtype,D.values)}const y=new EGe(h.shape,g),b=n.runWebGPUProgram(y,[h,m],h.dtype);d.push(b);const w=vt({inputs:{x:b},backend:n,attrs:{shape:u.outputShape}});return d.forEach(C=>n.disposeData(C.dataId)),w}const RGe={kernelName:av,backendName:"webgpu",kernelFunc:mre};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OGe=Bs({opType:Ft.GREATER,cpuKernelImpl:VUe,dtype:"bool"}),_Ge={kernelName:iv,backendName:"webgpu",kernelFunc:OGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DGe=Bs({opType:Ft.GREATER_EQUAL,dtype:"bool",cpuKernelImpl:UUe}),PGe={kernelName:Pg,backendName:"webgpu",kernelFunc:DGe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MGe(t){const{inputs:e,backend:n}=t,{input:r}=e;return pre(r,!0,n)}const jGe={kernelName:Ck,backendName:"webgpu",kernelFunc:MGe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LGe=Cn({opType:tt.IS_FINITE,dtype:"bool"}),FGe={kernelName:jg,backendName:"webgpu",kernelFunc:LGe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zGe=Cn({opType:tt.IS_INF,dtype:"bool"}),BGe={kernelName:Lg,backendName:"webgpu",kernelFunc:zGe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UGe=Cn({opType:tt.IS_NAN,dtype:"bool"}),VGe={kernelName:Fg,backendName:"webgpu",kernelFunc:UGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WGe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:a}=r,i=[{type:"float32",data:[a]}],o=new Ty(s.shape,tt.LEAKYRELU,"alpha : f32,");return n.runWebGPUProgram(o,[s],"float32",i)}const GGe={kernelName:ov,backendName:"webgpu",kernelFunc:WGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HGe=Bs({opType:Ft.LESS,dtype:"bool",cpuKernelImpl:GUe}),qGe={kernelName:lv,backendName:"webgpu",kernelFunc:HGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KGe=Bs({opType:Ft.LESS_EQUAL,dtype:"bool",cpuKernelImpl:WUe}),XGe={kernelName:uv,backendName:"webgpu",kernelFunc:KGe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YGe{constructor(e){this.variableNames=[],this.outputShape=[],this.uniforms="start : f32, step : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[e],this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="linSpace"}getUserCode(){return`
      ${rt("index")} {
        if (index < uniforms.size) {
          setOutputAtIndex(index, uniforms.start + f32(index) * uniforms.step);
        }
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QGe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:a}=n,i=(s-r)/(a-1),o=new YGe(a),l=[{type:"float32",data:[r]},{type:"float32",data:[i]}];return e.runWebGPUProgram(o,[],"float32",l)}const ZGe={kernelName:Nk,backendName:"webgpu",kernelFunc:QGe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JGe=Cn({opType:tt.LOG,cpuKernelImpl:HUe}),eHe={kernelName:zg,backendName:"webgpu",kernelFunc:JGe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tHe=Cn({opType:tt.LOG1P}),nHe={kernelName:Bg,backendName:"webgpu",kernelFunc:tHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rHe=Bs({opType:Ft.LOGICAL_AND,dtype:"bool"}),sHe={kernelName:cv,backendName:"webgpu",kernelFunc:rHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aHe=Cn({opType:tt.LOGICAL_NOT}),iHe={kernelName:dv,backendName:"webgpu",kernelFunc:aHe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oHe=Bs({opType:Ft.LOGICAL_OR}),lHe={kernelName:fv,backendName:"webgpu",kernelFunc:oHe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gre=`
  var powValue = 0.0;
  let basis = uniforms.bias + uniforms.alpha * sum;
  if (uniforms.beta == 0.5) {
    powValue = inverseSqrt(basis);
  } else if (uniforms.beta == 1.0) {
    powValue = 1.0 / basis;
  } else {
    powValue = exp(log(basis) * (-uniforms.beta));
  }
`;class uHe{constructor(e){this.outputShape=[],this.variableNames=["x"],this.uniforms="radius : i32, bias : f32, alpha : f32, beta : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="lrn"}getUserCode(){return`
    ${rt("index")} {
      if (index < uniforms.size) {
        let coords = getOutputCoords();
        let b = coords[0];
        let r = coords[1];
        let c = coords[2];
        let d = coords[3];

        let x = getX(b, r, c, d);
        var sum = 0.0;
        for (var i = -uniforms.radius; i <= uniforms.radius; i = i + 1) {
          let idx = d + i;
          if (idx >= 0 && idx < uniforms.xShape[3]) {
            let z = getX(b, r, c, idx);
            sum = sum + z * z;
          }
        }
        ${gre}

        setOutputAtIndex(index, x * powValue);
      }
    }
  `}}class cHe{constructor(e,n){this.outputShape=[],this.variableNames=["x"],this.uniforms="radius : i32, bias : f32, alpha : f32, beta : f32,",this.workgroupSize=[256,1,1],this.maxAllowRadius=16,X(n<=this.maxAllowRadius,()=>`Radius must be less than or equal to ${this.maxAllowRadius}, current radius is ${n}`),this.outputShape=e,this.elementsPerWorkgroup=this.workgroupSize[0]-2*this.maxAllowRadius,this.dispatchLayout={x:[3],y:[2],z:[0,1]},this.dispatch=st(this.dispatchLayout,this.outputShape,[this.elementsPerWorkgroup,this.workgroupSize[1],this.workgroupSize[2]]),this.shaderKey="lrn_shared"}getUserCode(){return`
    var <workgroup>lrnSub: array<f32, ${this.workgroupSize[0]}>;
    const elementsPerWorkgroup = ${this.elementsPerWorkgroup};
    const maxAllowRadius = ${this.maxAllowRadius};

    ${rt()} {
      let localDepth = i32(localId.x);
      let workgroupDepth = i32(workgroupId.x) * elementsPerWorkgroup;
      let xDepth = workgroupDepth + localDepth - maxAllowRadius;
      let b = i32(globalId.z) / uniforms.xShape[1];
      let r = i32(globalId.z) - b * uniforms.xShape[1];
      let c = i32(globalId.y);
      let d = workgroupDepth + localDepth;

      var x = 0.0;
      if (xDepth >= 0 && xDepth < uniforms.xShape[3]) {
        x = getX(b, r, c, xDepth);
      }
      lrnSub[localDepth] = x;
      workgroupBarrier();

      if (localDepth < elementsPerWorkgroup && d < uniforms.outShape[3]) {
        var sum = 0.0;
        let index = localDepth + maxAllowRadius;
        for (var i = -uniforms.radius; i <= uniforms.radius; i = i + 1) {
          let z = lrnSub[index + i];
          sum = sum + z * z;
        }
        ${gre}

        setOutputAtCoords(b, r, c, d, lrnSub[index] * powValue);
      }
    } `}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:a,bias:i,alpha:o,beta:l}=r;let u;a>16?u=new uHe(s.shape):u=new cHe(s.shape,a);const c=[{type:"int32",data:[a]},{type:"float32",data:[i]},{type:"float32",data:[o]},{type:"float32",data:[l]}];return n.runWebGPUProgram(u,[s],s.dtype,c)}const fHe={kernelName:hv,backendName:"webgpu",kernelFunc:dHe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hHe{constructor(e){this.outputShape=[],this.variableNames=["inputImage","outputImage","dy"],this.uniforms="depthRadius : i32, bias : f32, alpha : f32, beta : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="lrn_grad"}getUserCode(){return`
    ${rt("index")} {
      if (index < uniforms.size) {
        let coords = getOutputCoords();
        let b = coords[0];
        let r = coords[1];
        let c = coords[2];

        let MIN_DEPTH_BEGIN = 0;
        let MAX_DEPTH_END = uniforms.outShape[3];
        var result = 0.0;
        for (var d = MIN_DEPTH_BEGIN; d < MAX_DEPTH_END; d++) {
          let depthBegin = max(MIN_DEPTH_BEGIN, d - uniforms.depthRadius);
          let depthEnd = min(MAX_DEPTH_END, d + uniforms.depthRadius + 1);

          var norm = 0.0;
          for (var k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; k++) {
            if (k < depthBegin) {
              continue;
            } else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            } else {
              break;
            }
          }

          norm = uniforms.alpha * norm + uniforms.bias;

          for (var k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; k++) {
            if (k < depthBegin) {
              continue;
            } else if (k >= depthBegin && k < depthEnd) {
              var dyi = -2.0 * uniforms.alpha * uniforms.beta
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d) / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * uniforms.beta);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            } else {
              break;
            }
          }
        }

        setOutputAtIndex(index, result);
      }
    }
  `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,y:a,dy:i}=e,{depthRadius:o,bias:l,alpha:u,beta:c}=r,d=new hHe(s.shape),h=[{type:"int32",data:[o]},{type:"float32",data:[l]},{type:"float32",data:[u]},{type:"float32",data:[c]}];return n.runWebGPUProgram(d,[s,a,i],s.dtype,h)}const mHe={kernelName:Tk,backendName:"webgpu",kernelFunc:pHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gHe=Bs({opType:Ft.MAX,cpuKernelImpl:KUe}),yHe={kernelName:Ug,backendName:"webgpu",kernelFunc:gHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:a,strides:i,pad:o,dimRoundingMode:l}=r,c=ga(s.shape,a,i,1,o,l);return sre(s,c,"max",n)}const xHe={kernelName:mv,backendName:"webgpu",kernelFunc:bHe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:a,strides:i,pad:o,dataFormat:l,dimRoundingMode:u}=r,c=[1,1,1],d=go(s.shape,a,i,c,o,u,l),h=new F4(d,"max"),m=[{type:"int32",data:[d.strideDepth,d.strideHeight,d.strideWidth]},{type:"int32",data:[d.padInfo.front,d.padInfo.top,d.padInfo.left]},{type:"int32",data:[d.inDepth,d.inHeight,d.inWidth]},{type:"int32",data:[d.effectiveFilterDepth,d.effectiveFilterHeight,d.effectiveFilterWidth]}];return n.runWebGPUProgram(h,[s],s.dtype,m)}const wHe={kernelName:gv,backendName:"webgpu",kernelFunc:vHe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SHe{constructor(e){this.variableNames=["dy","maxPos"],this.uniforms=`strides : vec2<i32>, pads : vec2<i32>, dilations : vec2<i32>, filterDims : vec2<i32>,
       outHeight : i32, outWidth : i32`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.inShape,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="maxPool2DBackprop"}getUserCode(){return`
      ${rt("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let batch = coords[0];
        let d = coords[3];

        let dyRCCorner = vec2<i32>(coords.yz) - uniforms.pads;
        let dyRCorner = dyRCCorner.x;
        let dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        var dotProd = 0.0;
        let lastIndex = uniforms.filterDims[0] * uniforms.filterDims[1] - 1;
        for (var wR = 0; wR < uniforms.filterDims[0]; wR += uniforms.dilations[0]) {
          let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[0]);

          if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {
            continue;
          }
          let idyR = i32(dyR);

          for (var wC = 0; wC < uniforms.filterDims[1]; wC += uniforms.dilations[1]) {
            let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[1]);

            if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {
              continue;
            }
            let idyC = i32(dyC);

            let dyValue = getDy(batch, idyR, idyC, d);
            let maxPosValue = lastIndex - i32(getMaxPos(batch, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            let curPosValue = wR * uniforms.filterDims[1] + wC;
            let mask = select(0.0, 1.0, maxPosValue == curPosValue);
            dotProd += dyValue * mask;
          }
        }
        setOutputAtIndex(index, dotProd);
      }
    }
    `}}class CHe{constructor(e){this.variableNames=["dy","maxPos"],this.uniforms=`strides : vec3<i32>, pads : vec3<i32>, filterDims : vec3<i32>,
      outDepth : i32, outHeight : i32, outWidth : i32`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e.inShape,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="maxPool3DBackprop"}getUserCode(){return`
      ${rt("index")} {
      if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
        let batch = coords.x;
        let ch = coords.u;

        let dyCorner = vec3<i32>(coords.y, coords.z, coords.w) - uniforms.pads;
        let dyDCorner = dyCorner.x;
        let dyRCorner = dyCorner.y;
        let dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        var dotProd = 0.0;
        let lastIndex = uniforms.filterDims[0] * uniforms.filterDims[1] * uniforms.filterDims[2] - 1;

        for (var wD = 0; wD < uniforms.filterDims[0]; wD++) {
          let dyD = f32(dyDCorner + wD) / f32(uniforms.strides[0]);

          if (dyD < 0.0 || dyD >= f32(uniforms.outDepth) || fract(dyD) > 0.0) {
            continue;
          }
          let idyD = i32(dyD);

          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {
            let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[1]);

            if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {
              continue;
            }
            let idyR = i32(dyR);

            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {
              let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[2]);

              if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {
                continue;
              }
              let idyC = i32(dyC);

              let dyValue = getDy(batch, idyD, idyR, idyC, ch);
              let maxPosValue = lastIndex - i32(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              let curPosValue = wD * uniforms.filterDims[1] * uniforms.filterDims[2] + wR * uniforms.filterDims[2] + wC;
              let mask = select(0.0, 1.0, maxPosValue == curPosValue);
              dotProd += dyValue * mask;
            }
          }
        }

        setOutputAtIndex(index, dotProd);
      }
    }
    `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kHe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:a}=e,i=a,{filterSize:o,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],h=go(i.shape,o,l,d,u,c),m=new F4(h,"max",!0);let g=[{type:"int32",data:[h.strideDepth,h.strideHeight,h.strideWidth]},{type:"int32",data:[h.padInfo.front,h.padInfo.top,h.padInfo.left]},{type:"int32",data:[h.inDepth,h.inHeight,h.inWidth]},{type:"int32",data:[h.effectiveFilterDepth,h.effectiveFilterHeight,h.effectiveFilterWidth]}];const y=n.runWebGPUProgram(m,[i],"int32",g),b=new CHe(h);g=[{type:"int32",data:[h.strideDepth,h.strideHeight,h.strideWidth]},{type:"int32",data:[h.effectiveFilterDepth-1-h.padInfo.front,h.effectiveFilterHeight-1-h.padInfo.top,h.effectiveFilterWidth-1-h.padInfo.left]},{type:"int32",data:[h.effectiveFilterDepth,h.effectiveFilterHeight,h.effectiveFilterWidth]},{type:"int32",data:[h.outDepth]},{type:"int32",data:[h.outHeight]},{type:"int32",data:[h.outWidth]}];const w=n.runWebGPUProgram(b,[s,y],i.dtype,g);return n.disposeData(y.dataId),w}const NHe={kernelName:Ik,backendName:"webgpu",kernelFunc:kHe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function THe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:a,output:i}=e,o=a;Zne([a,i],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,h=ga(o.shape,l,u,1,c,d),m=new Gb(h,"max",!0);let g=[{type:"int32",data:[h.strideHeight,h.strideWidth]},{type:"int32",data:[h.padInfo.top,h.padInfo.left]},{type:"int32",data:[h.dilationHeight,h.dilationWidth]},{type:"int32",data:[h.inHeight,h.inWidth]},{type:"int32",data:[h.effectiveFilterHeight,h.effectiveFilterWidth]}];const y=n.runWebGPUProgram(m,[o],"int32",g),b=new SHe(h);g=[{type:"int32",data:[h.strideHeight,h.strideWidth]},{type:"int32",data:[h.effectiveFilterHeight-1-h.padInfo.top,h.effectiveFilterWidth-1-h.padInfo.left]},{type:"int32",data:[h.dilationHeight,h.dilationWidth]},{type:"int32",data:[h.effectiveFilterHeight,h.effectiveFilterWidth]},{type:"int32",data:[h.outHeight]},{type:"int32",data:[h.outWidth]}];const w=n.runWebGPUProgram(b,[s,y],o.dtype,g);return n.disposeData(y.dataId),w}const $He={kernelName:$k,backendName:"webgpu",kernelFunc:THe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IHe(t){const{inputs:e,backend:n,attrs:r}=t,{filterSize:s,strides:a,pad:i,includeBatchInIndex:o}=r,{x:l}=e;X(l.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${l.shape.length}.`);const u=[1,1];X(Es(a,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);const c=ga(l.shape,s,a,u,i),d=[{type:"int32",data:[c.strideHeight,c.strideWidth]},{type:"int32",data:[c.padInfo.top,c.padInfo.left]},{type:"int32",data:[c.dilationHeight,c.dilationWidth]},{type:"int32",data:[c.inHeight,c.inWidth]},{type:"int32",data:[c.effectiveFilterHeight,c.effectiveFilterWidth]}];let h=new Gb(c,"max",!1);const m=n.runWebGPUProgram(h,[l],l.dtype,d);h=new Gb(c,"max",!0,!0,o);const g=n.runWebGPUProgram(h,[l],"int32",d);return[m,g]}const EHe={kernelName:Ek,backendName:"webgpu",kernelFunc:IHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r;return Yh(s,a,i,"min",n)}const RHe={kernelName:bv,backendName:"webgpu",kernelFunc:AHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OHe=Bs({opType:Ft.MIN,cpuKernelImpl:XUe}),_He={kernelName:Vg,backendName:"webgpu",kernelFunc:OHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DHe{constructor(e,n,r){this.uniforms="",this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=n.map((s,a)=>s[0]+e[a]+s[1]),this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.xShape=e,n.map((s,a)=>{this.uniforms+=` pad${a} : vec2<i32>,`}),this.offset=r==="reflect"?0:1,this.shaderKey=`mirrorPad_${r}`}getUserCode(){const e=this.xShape.length,n=this.xShape.map((u,c)=>`uniforms.pad${c}[0]`).join(","),r=this.xShape.map((u,c)=>`uniforms.pad${c}[0] + uniforms.xShape${e>1?`[${c}]`:""}`).join(","),s=e===1?"start":"start[i]",a=e===1?"end":"end[i]",i=e===1?"outC":"outC[i]",o=ts(e),l=e>1?["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,e):"coords";return`
      ${rt("index")} {
        if (index < uniforms.size) {
          let start = ${o}(${n});
          let end = ${o}(${r});
          var outC = getCoordsFromIndex(index);
          for (var i = 0; i < ${e}; i = i + 1) {
            if (${i} < ${s}) {
              ${i} = ${s} * 2 - ${i} - ${this.offset};
            } else if(${i} >= ${a}) {
              ${i} = (${a} - 1) * 2 - ${i} + ${this.offset};
            }
          }
          let coords = outC - start;
          setOutputAtIndex(index, getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PHe={kernelName:xv,backendName:"webgpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{paddings:s,mode:a}=e,i=n,o=s.map(c=>({type:"int32",data:[c[0],c[1]]})),l=new DHe(r.shape,s,a);return i.runWebGPUProgram(l,[r],r.dtype,o)}};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MHe=Bs({opType:Ft.MOD}),jHe={kernelName:Wg,backendName:"webgpu",kernelFunc:MHe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LHe{constructor(e,n){this.variableNames=["probs"],this.outputShape=[],this.uniforms="seed : f32, numOutcomes: i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[e,n],this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="multinomial"}getUserCode(){return`
    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    fn random (seed : f32, resultUV : vec2<f32>) -> f32 {
      let HASHSCALE1 = 443.8975;
      let p = resultUV * seed;
      var p3  = fract(vec3<f32>(p.xyx) * HASHSCALE1);
      p3 = p3 + dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${rt("index")} {
      if (index < uniforms.size) {
        let coords = getOutputCoords();
        let batch = coords[0];

        let resUV = vec2<f32>(f32(coords[1]) / f32(uniforms.outShape[1]),
            f32(coords[0]) / f32(uniforms.outShape[0]));
        let r = random(uniforms.seed, resUV);
        var cdf = 0.0;
        for (var i = 0; i < uniforms.numOutcomes - 1; i = i + 1) {
          cdf = cdf + getProbs(batch, i);

          if (r < cdf) {
            setOutputAtIndexI32(index, i);
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutputAtIndexI32(index, uniforms.numOutcomes - 1);
      }
    }
  `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FHe{constructor(e){this.variableNames=["logits"],this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=[this.outputShape[0],1,1],this.outputShape[1]>=4096?this.workgroupSize=[256,1,1]:this.workgroupSize=[64,1,1],this.shaderKey="softmax"}getUserCode(){return`
    var<workgroup> buf : array<f32, ${this.workgroupSize[0]}>;
    var<workgroup> rowMaxShared : f32;
    var<workgroup> rowSumShared : f32;
    const blockSize = ${this.workgroupSize[0]};
    ${rt("index")} {
      let row = index / blockSize;
      let tid = i32(localId.x);
      let cols = uniforms.outShape[1];

      var threadMax = -3.402823e+38f;
      for (var col = tid; col < cols; col += blockSize) {
        let value = getLogits(row, col);
        threadMax = max(threadMax, value);
      }
      if (tid < cols) {
        buf[tid] = threadMax;
      }
      workgroupBarrier();

      var reduceSize = min(cols, blockSize);
      for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {
        reduceSize = currSize + (reduceSize & 1);
        if (tid < currSize) {
          buf[tid] = max(buf[tid], buf[tid + reduceSize]);
        }
        workgroupBarrier();
      }

      if (tid == 0) {
        rowMaxShared = buf[0];
      }
      workgroupBarrier();

      var threadSum = 0.0;
      for (var col = tid; col < cols; col += blockSize) {
        let subExp = exp(getLogits(row, col) - rowMaxShared);
        threadSum += subExp;
      }
      buf[tid] = threadSum;
      workgroupBarrier();

      for (var currSize = blockSize >> 1;  currSize > 0; currSize = currSize >> 1) {
        if (tid < currSize) {
          buf[tid] = buf[tid] + buf[tid + currSize];
        }
        workgroupBarrier();
      }

      if (tid == 0) {
        rowSumShared = buf[0];
      }
      workgroupBarrier();

      for (var col = tid; col < cols; col += blockSize) {
        let value = exp(getLogits(row, col) - rowMaxShared) / rowSumShared;
        setOutputAtCoords(row, col, value);
      }
  }
    `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yre(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:a}=r,i=vt({inputs:{x:s},backend:n,attrs:{shape:[ye(s.shape)/s.shape[a],s.shape[a]]}}),o=new FHe(i.shape),l=n.runWebGPUProgram(o,[i],s.dtype),u=vt({inputs:{x:l},backend:n,attrs:{shape:s.shape}});return n.disposeData(i.dataId),n.disposeData(l.dataId),u}const zHe={kernelName:jv,backendName:"webgpu",kernelFunc:yre};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BHe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:a,seed:i,normalized:o}=r,l=o?s:yre({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),u=l.shape[0],c=l.shape[1],d=new LHe(u,a),h=[{type:"float32",data:[i]},{type:"int32",data:[c]}],m=n.runWebGPUProgram(d,[l],"int32",h);return o||n.disposeData(l.dataId),m}const UHe={kernelName:Ak,backendName:"webgpu",kernelFunc:BHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VHe(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const a=n.tensorMap.get(r.dataId),[i,o]=QUe(a.values,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,i)}const s=new Ty(r.shape,tt.NEG);return n.runWebGPUProgram(s,[r],r.dtype)}const WHe={kernelName:vv,backendName:"webgpu",kernelFunc:VHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GHe(t){console.warn("tf.nonMaxSuppression() in webgpu locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l}=r,u=n.readSync(s.dataId),c=n.readSync(a.dataId),{selectedIndices:d}=vN(u,c,i,o,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const HHe={kernelName:Rk,backendName:"webgpu",kernelFunc:GHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qHe(t){console.warn("tf.nonMaxSuppression() in webgpu locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:a}=e,{maxOutputSize:i,iouThreshold:o,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(s.dataId),d=n.readSync(a.dataId),h=i,m=o,g=l,y=u,{selectedIndices:b,selectedScores:w}=wN(c,d,h,m,g,y);return[n.makeTensorInfo([b.length],"int32",new Int32Array(b)),n.makeTensorInfo([w.length],"float32",new Float32Array(w))]}const KHe={kernelName:Ok,backendName:"webgpu",kernelFunc:qHe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XHe{constructor(e,n){this.variableNames=["x"],this.uniforms="onValue : f32, offValue : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[e,n],this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="onehot"}getUserCode(){return`
      ${rt("index")} {
        if(index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          setOutputAtIndex(index, mix(uniforms.offValue, uniforms.onValue,
                                      f32(i32(round(getX(coords.x))) == coords.y)));
        }
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YHe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:a,depth:i,onValue:o,offValue:l}=r,u=ye(s.shape),c=new XHe(u,i),d=vt({inputs:{x:s},backend:n,attrs:{shape:[u]}}),h=[{type:"float32",data:[o]},{type:"float32",data:[l]}],m=n.runWebGPUProgram(c,[d],a,h);n.disposeData(d.dataId);const g=[...s.shape,i],y=vt({inputs:{x:m},backend:n,attrs:{shape:g}});return n.disposeData(m.dataId),y}const QHe={kernelName:Cv,backendName:"webgpu",kernelFunc:YHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R2(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const s=d1({inputs:{input:r},backend:n}),a=R2({inputs:{x:s},backend:n}),i=cT({inputs:{input:r},backend:n}),o=R2({inputs:{x:i},backend:n}),l=Xh({inputs:{real:a,imag:o},backend:n});return n.disposeData(s.dataId),n.disposeData(a.dataId),n.disposeData(i.dataId),n.disposeData(o.dataId),l}else return oi({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const ZHe={kernelName:zv,backendName:"webgpu",kernelFunc:R2};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bre(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=d1({inputs:{input:r},backend:n}),a=bre({inputs:{x:s},backend:n}),i=cT({inputs:{input:r},backend:n}),o=R2({inputs:{x:i},backend:n}),l=Xh({inputs:{real:a,imag:o},backend:n});return n.disposeData(s.dataId),n.disposeData(a.dataId),n.disposeData(i.dataId),n.disposeData(o.dataId),l}else return oi({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const JHe={kernelName:Sv,backendName:"webgpu",kernelFunc:bre};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e8e(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return PD({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const a=e[0].shape,i=e[0].dtype;e.forEach(c=>{di(a,c.shape,"All tensors passed to stack must have matching shapes"),X(i===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const o=[],l=e.map(c=>{const d=PD({inputs:{input:c},backend:n,attrs:{dim:s}});return o.push(d),d}),u=ore({inputs:l,backend:n,attrs:{axis:s}});return o.forEach(c=>n.disposeData(c.dataId)),u}const t8e={kernelName:kv,backendName:"webgpu",kernelFunc:e8e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xre(t,e=!1){const n=t.length,r=ts(n),s=t.map((d,h)=>`uniforms.pad${h}[0]`).join(","),a=t.map((d,h)=>`uniforms.pad${h}[0] + uniforms.xShape${n>1?`[${h}]`:""}`).join(","),i=n>1?`${r}(${s})`:`${s}`,o=n>1?`${r}(${a})`:`${a}`,l=n>1?"any(paddedCoords < start)":"paddedCoords < start",u=n>1?"any(paddedCoords >= end)":"paddedCoords >= end",c=n>1?["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,n):"coords";return`
        let start = ${i};
        let end = ${o};
        if (${l} || ${u}) {
          setOutputAtIndex(index, ${e?0:"uniforms.constantValue"});
        } else {
          let coords = paddedCoords - start;
          setOutputAtIndex(index, getX(${c}));
        }
  `}class n8e{constructor(e,n){this.variableNames=["x"],this.uniforms="constantValue : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=n.map((r,s)=>r[0]+e[s]+r[1]),this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),n.map((r,s)=>{this.uniforms+=` pad${s} : vec2<i32>,`}),this.xShape=e,this.shaderKey="pad"}getUserCode(){return`
      ${rt("index")} {
        if (index < uniforms.size) {
          let paddedCoords = getCoordsFromIndex(index);
          ${xre(this.xShape)}
        }
      }
    `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r8e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:a,constantValue:i}=r;if(a.every(u=>Xt(u,[0,0])))return _i({inputs:{x:s},backend:n});if(ye(s.shape)===0){const u=a.map((c,d)=>c[0]+s.shape[d]+c[1]);return oi({backend:n,attrs:{shape:u,value:i,dtype:s.dtype}})}const o=[{type:"float32",data:[i]}];a.map(u=>o.push({type:"int32",data:[u[0],u[1]]}));const l=new n8e(s.shape,a);return n.runWebGPUProgram(l,[s],s.dtype,o)},s8e={kernelName:Nv,backendName:"webgpu",kernelFunc:r8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a8e=Bs({opType:Ft.POW}),i8e={kernelName:Hg,backendName:"webgpu",kernelFunc:a8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o8e(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e,a=new E2(Ft.PRELU,r.shape,s.shape);return n.runWebGPUProgram(a,[r,s],"float32")}const l8e={kernelName:Tv,backendName:"webgpu",kernelFunc:o8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:a,keepDims:i}=r;return Yh(s,a,i,"prod",n)}const c8e={kernelName:$v,backendName:"webgpu",kernelFunc:u8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d8e=t=>{const{backend:e,attrs:n}=t,{start:r,stop:s,step:a,dtype:i}=n,o=eVe(r,s,a,i);return e.makeTensorInfo([o.length],i,o)},f8e={kernelName:_k,backendName:"webgpu",kernelFunc:d8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h8e=Bs({opType:Ft.DIV}),p8e={kernelName:Ig,backendName:"webgpu",kernelFunc:h8e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m8e=Cn({opType:tt.RECIPROCAL}),g8e={kernelName:qg,backendName:"webgpu",kernelFunc:m8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y8e=Cn({opType:tt.RELU}),b8e={kernelName:Kg,backendName:"webgpu",kernelFunc:y8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x8e=Cn({opType:tt.RELU6}),v8e={kernelName:Xg,backendName:"webgpu",kernelFunc:x8e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w8e{constructor(e,n,r){this.variableNames=["x"],this.uniforms="adjustHeightWidth : vec2<f32>, halfPixelCenters : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[e[0],n,r,e[3]],this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="resizeBilinear"}getUserCode(){return`
      ${rt("index")} {
        if (index < uniforms.size) {
        let coords = getCoordsFromIndex(index);
          let b = coords[0];
          let d = coords[3];
          let rc = coords.yz;

          let effectiveInSize = vec2<f32>(
            f32(uniforms.xShape.y) - uniforms.adjustHeightWidth[0],
            f32(uniforms.xShape.z) - uniforms.adjustHeightWidth[1]);

          let effectiveOutSize = vec2<f32>(
            f32(uniforms.outShape.y) - uniforms.adjustHeightWidth[0],
            f32(uniforms.outShape.z) - uniforms.adjustHeightWidth[1]);

          let effectiveInputOverOutputRatioRC =
              effectiveInSize / effectiveOutSize;

          // Fractional source index
          let sourceFracIndexRC =
            (vec2<f32>(rc) + vec2<f32>(uniforms.halfPixelCenters)) *
            effectiveInputOverOutputRatioRC - vec2<f32>(uniforms.halfPixelCenters);

          // Compute the four integer indices.
          let sourceFloorRC = vec2<i32>(sourceFracIndexRC);
          let sourceCeilRC = vec2<i32>(
            min(vec2<f32>(uniforms.xShape.yz) - vec2<f32>(1.0), ceil(sourceFracIndexRC)));

          let topLeft = getX(b, sourceFloorRC.x, sourceFloorRC.y, d);
          let bottomLeft = getX(b, sourceCeilRC.x, sourceFloorRC.y, d);
          let topRight = getX(b, sourceFloorRC.x, sourceCeilRC.y, d);
          let bottomRight = getX(b, sourceCeilRC.x, sourceCeilRC.y, d);

          let fracRC = sourceFracIndexRC - vec2<f32>(sourceFloorRC);

          let top = topLeft + (topRight - topLeft) * fracRC.y;
          let bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
          let newValue = top + (bottom - top) * fracRC.x;

          setOutputAtIndex(index, newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S8e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:a,size:i,halfPixelCenters:o}=r,[l,u]=i,c=a&&l>1?1:0,d=a&&u>1?1:0,m=[{type:"float32",data:[c,d]},{type:"float32",data:[o?.5:0]}],g=new w8e(s.shape,l,u);return n.runWebGPUProgram(g,[s],"float32",m)}const C8e={kernelName:Av,backendName:"webgpu",kernelFunc:S8e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class k8e{constructor(e,n){this.variableNames=["dy"],this.uniforms=`effectiveXSize : vec2<i32>, effectiveYSize : vec2<i32>, heightScale : f32, widthScale : f32,
       invHeightScale : f32, invWidthScale : f32, winHeight : i32, winWidth : i32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.alignCorners=n,this.shaderKey=`resizeBilinearBackprop_${n}`}getUserCode(){return`
      ${rt("index")} {
        if (index < uniforms.size) {
          let coords = getOutputCoords();
          let b = coords[0];
          let d = coords[3];
          let r = coords[1];
          let c = coords[2];

          var accumulator = 0.0;

          // Compute bounds for where in dy we will look
          let startRLerp = floor(f32(r) * uniforms.invHeightScale);
          let startDyR = i32(startRLerp - f32(uniforms.winHeight / 2));

          let startCLerp = floor(f32(c) * uniforms.invWidthScale);
          let startDyC = i32(startCLerp - f32(uniforms.winWidth / 2));

          // Loop over dy
          for (var dyROffset = 0; dyROffset < uniforms.winHeight; dyROffset++) {
            let dyR = startDyR + dyROffset;

            // Guard against the window exceeding the bounds of dy
            if (dyR < 0 || dyR >= uniforms.dyShape[1]) {
              continue;
            }

            for (var dyCOffset = 0; dyCOffset < uniforms.winWidth; dyCOffset++) {
              let dyC = startDyC + dyCOffset;

              // Guard against the window exceeding the bounds of dy
              if (dyC < 0 || dyC >= uniforms.dyShape[2]) {
                continue;
              }

              let dxR = f32(dyR) * uniforms.heightScale;
              let topDxRIndex = i32(floor(dxR));
              let bottomDxRIndex = i32(min(ceil(dxR), f32(uniforms.outShape[1] - 1)));
              let dxRLerp = dxR - f32(topDxRIndex);
              let inverseDxRLerp = 1.0 - dxRLerp;

              let dxC = f32(dyC) * uniforms.widthScale;
              let leftDxCIndex = i32(floor(dxC));
              let rightDxCIndex = i32(min(ceil(dxC), f32(uniforms.outShape[2] - 1)));
              let dxCLerp = dxC - f32(leftDxCIndex);
              let inverseDxCLerp = 1.0 - dxCLerp;

              if (r == topDxRIndex && c == leftDxCIndex) {
                // topLeft
                accumulator +=
                  getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
              }

              if (r == topDxRIndex && c == rightDxCIndex) {
                // topRight
                accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
              }

              if (r == bottomDxRIndex && c == leftDxCIndex) {
                // bottomLeft
                accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
              }

              if (r == bottomDxRIndex && c == rightDxCIndex) {
                // bottomRight
                accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
              }
            }
          }
          // End loop over dy

          setOutputAtIndex(index, accumulator);
        }
      }
    `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N8e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:a}=e,{alignCorners:i}=r,[,o,l]=s.shape,[,u,c]=a.shape,d=[i&&u>1?o-1:o,i&&c>1?l-1:l],h=[i&&u>1?u-1:u,i&&c>1?c-1:c],m=d[0]/h[0],g=d[1]/h[1],y=1/m,b=1/g,w=Math.ceil(y)*2+2,C=Math.ceil(b)*2+2,k=new k8e(s.shape,i),T=[{type:"int32",data:d},{type:"int32",data:h},{type:"float32",data:[m]},{type:"float32",data:[g]},{type:"float32",data:[y]},{type:"float32",data:[b]},{type:"int32",data:[w]},{type:"int32",data:[C]}];return n.runWebGPUProgram(k,[a],a.dtype,T)}const T8e={kernelName:Mk,backendName:"webgpu",kernelFunc:N8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $8e{constructor(e,n,r,s){this.variableNames=["x"],this.uniforms="adjustHeightWidth : vec2<f32>, roundBase : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=[e[0],n,r,e[3]],this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.halfPixelCenters=s,this.shaderKey=`resizeNearest_${s}`}getUserCode(){let e;return this.halfPixelCenters?e="max((vec2<f32>(rc) + vec2<f32>(0.5)) * effectiveInputOverOutputRatioRC, vec2<f32>(0.0))":e="vec2<f32>(rc) * effectiveInputOverOutputRatioRC",`
      ${rt("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let b = coords[0];
          let d = coords[3];
          let rc = coords.yz;

          let effectiveInSize = vec2<f32>(
            f32(uniforms.xShape.y) - uniforms.adjustHeightWidth[0],
            f32(uniforms.xShape.z) - uniforms.adjustHeightWidth[1]);

          let effectiveOutSize = vec2<f32>(
            f32(uniforms.outShape.y) - uniforms.adjustHeightWidth[0],
            f32(uniforms.outShape.z) - uniforms.adjustHeightWidth[1]);

          let effectiveInputOverOutputRatioRC =
              effectiveInSize / effectiveOutSize;

          // Fractional source index
          let sourceFracIndexRC = ${e};

          // Compute the coordinators of nearest neighbor point.
          let inputShapeRC = vec2<f32>(f32(uniforms.xShape.y), f32(uniforms.xShape.z));
          let sourceNearestRC = vec2<i32>(
            min(inputShapeRC - 1.0, floor(sourceFracIndexRC + uniforms.roundBase)));
          let newValue = getX(b, sourceNearestRC.x, sourceNearestRC.y, d);

          setOutputAtIndex(index, newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I8e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:a,halfPixelCenters:i,size:o}=r,[l,u]=o,c=a&&l>1?1:0,d=a&&u>1?1:0,m=[{type:"float32",data:[c,d]},{type:"float32",data:[a?.5:0]}],g=new $8e(s.shape,l,u,i);return n.runWebGPUProgram(g,[s],s.dtype,m)}const E8e={kernelName:Ev,backendName:"webgpu",kernelFunc:I8e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class A8e{constructor(e,n){this.variableNames=["dy"],this.uniforms=`effectiveXSize : vec2<i32>, effectiveYSize : vec2<i32>, invHeightScale : f32, invWidthScale : f32,
       winHeight : i32, winWidth : i32,`,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.alignCorners=n,this.shaderKey=`resizeNearestNeigborBackprop_${n}`}getUserCode(){return`
      ${rt("index")} {
        if (index < uniforms.size) {
          let coords = getOutputCoords();
          let b = coords[0];
          let d = coords[3];
          let r = coords[1];
          let c = coords[2];

          var accumulator = 0.0;

          // Compute bounds for where in dy we will look
          let startRLerp = floor(f32(r) * uniforms.invHeightScale);
          let startDyR = i32(floor(startRLerp - f32(uniforms.winHeight / 2)));

          let startCLerp = floor(f32(c) * uniforms.invWidthScale);
          let startDyC = i32(floor(startCLerp - f32(uniforms.winWidth / 2)));

          // Loop over dy
          for (var dyROffset = 0; dyROffset < uniforms.winHeight; dyROffset++) {
            let dyR = startDyR + dyROffset;

            // Guard against the window exceeding the bounds of dy
            if (dyR < 0 || dyR >= uniforms.dyShape[1]) {
              continue;
            }

            for (var dyCOffset = 0; dyCOffset < uniforms.winWidth; dyCOffset++) {
              let dyC = startDyC + dyCOffset;

              // Guard against the window exceeding the bounds of dy
              if (dyC < 0 || dyC >= uniforms.dyShape[2]) {
                continue;
              }

              let sourceFracRow = f32(uniforms.effectiveXSize[0]) *
                  (f32(dyR) / f32(uniforms.effectiveYSize[0]));

              let sourceFracCol = f32(uniforms.effectiveXSize[1]) *
                  (f32(dyC) / f32(uniforms.effectiveYSize[1]));

              let sourceNearestRow =
                  i32(min(f32(uniforms.outShape[1] - 1),
                  ${this.alignCorners?"floor(sourceFracRow + 0.5)":"floor(sourceFracRow)"}));

              let sourceNearestCol =
                  i32(min(f32(uniforms.outShape[2] - 1),
                  ${this.alignCorners?"floor(sourceFracCol + 0.5)":"floor(sourceFracCol)"}));

              if (r == sourceNearestRow && c == sourceNearestCol) {
                accumulator += getDy(b, dyR, dyC, d);
              }
            }
          }
          // End loop over dy

          setOutputAtIndex(index, accumulator);
        }
      }
    `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R8e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:a}=e,{alignCorners:i}=r,[,o,l]=s.shape,[,u,c]=a.shape,d=[i&&u>1?o-1:o,i&&c>1?l-1:l],h=[i&&u>1?u-1:u,i&&c>1?c-1:c],m=d[0]/h[0],g=d[1]/h[1],y=1/m,b=1/g,w=Math.ceil(y)*2+2,C=Math.ceil(b)*2+2,k=new A8e(s.shape,i),T=[{type:"int32",data:d},{type:"int32",data:h},{type:"float32",data:[y]},{type:"float32",data:[b]},{type:"int32",data:[w]},{type:"int32",data:[C]}];return n.runWebGPUProgram(k,[a],a.dtype,T)}const O8e={kernelName:Pk,backendName:"webgpu",kernelFunc:R8e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _8e{constructor(e){this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms=" axis : vec4<i32>,",this.shaderKey="reverse"}getUserCode(){return`
      
      // Using uniform variables as judging conditions, so the function has
      // coherent execution within all threads.
      fn getReverseCoords(coords : vec4<i32>) -> vec4<i32> {
        var reverseCoords = coords;
        if (uniforms.axis[0] == 1) {
          reverseCoords[0] = uniforms.xShape[0] - coords[0] - 1;
        }
        if (uniforms.axis[1] == 1) {
          reverseCoords[1] = uniforms.xShape[1] - coords[1] - 1;
        }
        if (uniforms.axis[2] == 1) {
          reverseCoords[2] = uniforms.xShape[2] - coords[2] - 1;
        }
        if (uniforms.axis[3] == 1) {
          reverseCoords[3] = uniforms.xShape[3] - coords[3] - 1;
        }

        return reverseCoords;
      }
    
      ${rt("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let reverseCoords = getReverseCoords(coords);
          setOutputAtIndex(index, getX(reverseCoords[0],
              reverseCoords[1], reverseCoords[2], reverseCoords[3]));
        }
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:a}=r,i=s.shape.length;if(i===0)return _i({inputs:{x:s},backend:n});const o=s.shape,l=[1,1,1,1];o.forEach((b,w)=>{const C=w+4-i;l[C]=b});const u=Gt(a,s.shape),c=[0,0,0,0];u.forEach(b=>{const w=b+4-i;c[w]=1});const d=[{type:"int32",data:c}],h=vt({inputs:{x:s},backend:n,attrs:{shape:l}}),m=new _8e(l),g=n.runWebGPUProgram(m,[h],h.dtype,d);n.disposeData(h.dataId);const y=vt({inputs:{x:g},backend:n,attrs:{shape:o}});return n.disposeData(g.dataId),y}const P8e={kernelName:Rv,backendName:"webgpu",kernelFunc:D8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class M8e{constructor(e,n){this.outputShape=[],this.variableNames=["x"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms=`centerX : f32, centerY : f32, sinRadians : f32,
          cosRadians : f32,`,this.shaderKey="rotate",this.outputShape=e,typeof n=="number"?(this.uniforms+=" fillValue : f32,",this.fillSnippet="var outputValue = uniforms.fillValue;",this.shaderKey+="_float"):(this.uniforms+=" fillValue : vec3<f32>,",this.fillSnippet="var outputValue = uniforms.fillValue[coords[3]];",this.shaderKey+="_vec3")}getUserCode(){return`
        ${rt("index")} {
          if (index < uniforms.size) {
            let coords = getCoordsFromIndex(index);
            let coordXFloat = (f32(coords[2]) - uniforms.centerX) *
                uniforms.cosRadians - (f32(coords[1]) - uniforms.centerY) *
                uniforms.sinRadians;
            let coordYFloat = (f32(coords[2]) - uniforms.centerX) *
                uniforms.sinRadians + (f32(coords[1]) - uniforms.centerY) *
                uniforms.cosRadians;
            let coordX = i32(round(coordXFloat + uniforms.centerX));
            let coordY = i32(round(coordYFloat + uniforms.centerY));
            ${this.fillSnippet}
            if(coordX >= 0 && coordX < uniforms.xShape[2] && coordY >= 0 &&
                coordY < uniforms.xShape[1]) {
              outputValue = getX(coords[0], coordY, coordX, coords[3]);
            }
            setOutputAtIndex(index, outputValue);
          }
        }
      `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j8e={kernelName:Xk,backendName:"webgpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:a,center:i}=e,o=n,l=new M8e(r.shape,a),[u,c]=IN(i,r.shape[1],r.shape[2]),d=[{type:"float32",data:[u]},{type:"float32",data:[c]},{type:"float32",data:[Math.sin(s)]},{type:"float32",data:[Math.cos(s)]}];return typeof a=="number"?d.push({type:"float32",data:[Number.parseFloat(a.toFixed(2))]}):d.push({type:"float32",data:a}),o.runWebGPUProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L8e=Cn({opType:tt.ROUND}),F8e={kernelName:Yg,backendName:"webgpu",kernelFunc:L8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z8e=Cn({opType:tt.RSQRT,cpuKernelImpl:tVe}),B8e={kernelName:Qg,backendName:"webgpu",kernelFunc:z8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pb{constructor(e,n,r,s,a,i,o,l=!0){this.variableNames=["updates","indices"],this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=i,this.type=o,this.sumDupeIndices=l,this.dispatchLayout=ht(e),this.dispatch=st(this.dispatchLayout,e,this.workgroupSize),this.sliceDimGreaterThanOne=n>1,this.shaderKey=`scatter_${r}_${s}_${this.sliceDimGreaterThanOne}_${o}_${l}_${a.length}`;const u=ts(a.length);this.uniforms=`sliceDim : i32, strides: ${u}, updatesSize: i32,`,this.updatesRank=s,this.indicesRank=r}getUserCode(){let e="";this.indicesRank===1?e="coords[0]":this.indicesRank===2&&(e="coords[0], j");const n=`getIndices(${e})`,r=this.sliceDimGreaterThanOne?"uniforms.strides[j]":"uniforms.strides";let s="",a="";this.dispatchLayout.x.length===1?(s="flattenedIndex",a=`
      fn getUpdatesCoordsFromFlatIndex(index : i32) -> i32 {
        return index;
      }
      `):this.dispatchLayout.x.length===2&&(s="vec2<i32>(flattenedIndex, coords[1])",a=`
      fn getUpdatesCoordsFromFlatIndex(index : i32) -> vec2<i32> {
        // N.B. |updates| could be a scalar tensor, conceptually representing a
        // 2D tensor with all values equal to that. By design, its size must be
        // the same as |outShape[1]| in one dimension, and |indicesShape[0]|
        // gives the other.
        let sliceSize = uniforms.outShape[1];
        let d0 = index / sliceSize;
        let d1 = index - d0 * sliceSize;
        return vec2<i32>(d0, d1);
      }
      `);const o=`getUpdates(${Array.from({length:this.updatesRank},(u,c)=>`coords[${c}]`).join(", ")})`;return`
    ${a}
      ${rt("index")} {
        if (index < uniforms.updatesSize) {
          let coords = getUpdatesCoordsFromFlatIndex(index);
          var flattenedIndex = 0;
          for (var j = 0; j < uniforms.sliceDim; j = j + 1) {
            let indexInside = i32(round(${n}));
            flattenedIndex = flattenedIndex + indexInside * ${r};
          }
          let updateValue =
              ${Wf(this.type)}(${o});
          let flatIndex = getOutputIndexFromCoords(${s});

          ${this.sumDupeIndices?Zd("&result[flatIndex]","updateValue",this.type):"atomicStore(&result[flatIndex], bitcast<i32>(updateValue));"}
        }
      }`}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U8e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:a}=e,{shape:i}=r,{sliceRank:o,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Fu(a,s,i),h=[d/u,u];if(d===0)return n.makeTensorInfo(i,s.dtype);const m=vt({inputs:{x:s},backend:n,attrs:{shape:[l,o]}}),g=vt({inputs:{x:a},backend:n,attrs:{shape:[l,u]}}),y=g.dtype,b=oi({backend:n,attrs:{shape:h,value:0,dtype:y}}),w=ye(g.shape),C=[{type:"int32",data:[o]},{type:"int32",data:c},{type:"int32",data:[w]}],k=new pb(g.shape,o,m.shape.length,g.shape.length,c,h,y),T=n.runWebGPUProgram(k,[g,m],y,C,b),N=vt({inputs:{x:T},backend:n,attrs:{shape:i}});return n.disposeData(m.dataId),n.disposeData(g.dataId),n.disposeData(T.dataId),N}const V8e={kernelName:jk,backendName:"webgpu",kernelFunc:U8e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class W8e{constructor(e,n){this.outputShape=[],this.variableNames=["sortedSequence","values"],this.uniforms="numInputs : i32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.side=n,this.shaderKey=`search_sorted_${n}`}getUserCode(){return`
      fn findBound(batch: i32, value: f32) -> i32 {
        var left = i32(0);
        var right = uniforms.numInputs;
        while (left < right) {
          var mid = (left + right) / 2;
          if (getSortedSequence(batch, mid) ${this.side==="left"?"<":"<="} value) {
            left = mid + 1;
          } else {
            right = mid;
          }
        }
        return right;
      }

      ${rt("index")} {
        if (index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let value = getValuesByOutputIndex(index);
          setOutputAtIndexI32(index, findBound(coords[0], value));
        }
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G8e(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:a}=e,{side:i}=r,o=new W8e([a.shape[0],a.shape[1]],i),l=[{type:"int32",data:[s.shape[1]]}];return n.runWebGPUProgram(o,[s,a],"int32",l)}const H8e={kernelName:Fk,backendName:"webgpu",kernelFunc:G8e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q8e{constructor(e,n,r){this.variableNames=["c","a","b"],this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=n,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.cRank=e,this.rank=r,this.shaderKey="select"}getUserCode(){let e,n;if(this.rank>4)throw Error(`Where for rank ${this.rank} is not yet supported`);if(this.rank===1)n="resRC",e="resRC";else{const s=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],i=[];for(let o=0;o<this.outputShape.length;o++)i.push(`${s[o]}`),o<this.cRank&&a.push(`${s[o]}`);e=a.join(),n=i.join()}return`
      ${rt("index")} {
        if (index < uniforms.size) {
          let resRC = getCoordsFromIndex(index);
          let cVal = getC(${e});
          if (cVal >= 1.0) {
            setOutputAtIndex(index, getA(${n}));
          } else {
            setOutputAtIndex(index, getB(${n}));
          }
        }
      }
    `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K8e(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:a}=e,i=new q8e(r.shape.length,s.shape,s.shape.length);return n.runWebGPUProgram(i,[r,s,a],zs(s.dtype,a.dtype))}const X8e={kernelName:Ov,backendName:"webgpu",kernelFunc:K8e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y8e=Cn({opType:tt.SELU}),Q8e={kernelName:Zg,backendName:"webgpu",kernelFunc:Y8e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z8e=Cn({opType:tt.SIGMOID}),J8e={kernelName:ny,backendName:"webgpu",kernelFunc:Z8e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eqe=Cn({opType:tt.SIGN}),tqe={kernelName:ty,backendName:"webgpu",kernelFunc:eqe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nqe=Cn({opType:tt.SIN}),rqe={kernelName:Jg,backendName:"webgpu",kernelFunc:nqe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sqe=Cn({opType:tt.SINH}),aqe={kernelName:ey,backendName:"webgpu",kernelFunc:sqe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iqe=Cn({opType:tt.SOFTPLUS}),oqe={kernelName:ry,backendName:"webgpu",kernelFunc:iqe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lqe{constructor(e,n,r,s,a,i){this.variableNames=["x"],this.outputShape=[],this.uniforms="",this.workgroupSize=[64,1,1],this.size=!0;const o=new Array(s.length);for(let l=0;l<o.length;l++)o[l]=s[a[l]];this.outputShape=o,this.newDim=a,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.xShape=e,this.paddedXShape=n,this.uniforms+=`reshapedPaddedXShape : ${ts(s.length)}, paddedXShapeStrides : ${ts(i)}, `,r.map((l,u)=>{this.uniforms+=` pad${u} : vec2<i32>,`}),this.shaderKey=`spaceToBatchND_${a}`}getUserCode(){const e=ts(this.outputShape.length),n=ere(this.newDim);return`
      ${FS(this.paddedXShape,"PaddedX")}
      ${rt("index")} {
        if(index < uniforms.size) {
          let coords = getCoordsFromIndex(index);
          let switchedIndex = getIndexFromCoords${this.outputShape.length}D(${e}(${n}), uniforms.reshapedPaddedXShape);
          let paddedCoords = getPaddedXCoordsFromIndex(switchedIndex);
          ${xre(this.xShape,!0)}
        }
      }
    `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uqe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:a,paddings:i}=r;X(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGPU backend not implemented yet");const o=a.reduce((C,k)=>C*k),l=[[0,0]];l.push(...i);for(let C=1+a.length;C<s.shape.length;++C)l.push([0,0]);const u=l.map((C,k)=>C[0]+s.shape[k]+C[1]),c=Fh(u,a,o,!1),d=zh(c.length,a.length,!1),h=Bh(u,a,o,!1),m=$t(u),g=new lqe(s.shape,u,l,c,d,m.length),y=[{type:"int32",data:c},{type:"int32",data:m}];l.map(C=>y.push({type:"int32",data:[C[0],C[1]]}));const b=n.runWebGPUProgram(g,[s],s.dtype,y),w=vt({inputs:{x:b},backend:n,attrs:{shape:h}});return n.disposeData(b.dataId),w},cqe={kernelName:Pv,backendName:"webgpu",kernelFunc:uqe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dqe{constructor(e,n,r){this.variableNames=["input","indices","segmentIds"],this.outputShape=[],this.uniforms="segmentSize : i32, sparseSize : i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=e,this.type=r,this.dispatchLayout=ht([n]),this.dispatch=st(this.dispatchLayout,[n],this.workgroupSize),this.shaderKey="sparseSegmentSum"}getUserCode(){return`
    ${rt("index")} {
      if (index < uniforms.sparseSize) {
        let indexInSegmentIds = index / uniforms.segmentSize;
        let indexInSegment = index % uniforms.segmentSize;
        let indexInInput = indices[indexInSegmentIds];
        let segmentId = segmentIds[indexInSegmentIds];

        let value = input[indexInInput * uniforms.segmentSize + indexInSegment];
        let outIndex = segmentId * uniforms.segmentSize + indexInSegment;
        ${Zd("&result[outIndex]","value",this.type)}
      }
    }
  `}}class fqe{constructor(e,n){this.variableNames=["segmentIds"],this.outputShape=[],this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=[e],this.dispatchLayout=ht(n),this.dispatch=st(this.dispatchLayout,n,this.workgroupSize),this.shaderKey="sparseSegmentIdCountProgram"}getUserCode(){return`
    ${rt("index")} {
      if (index < uniforms.segmentIdsShape) {
        let segmentId = segmentIds[index];
        ${Zd("&result[segmentId]","1","int32")}
      }
    }
  `}}class hqe{constructor(e,n){this.variableNames=["segmentSum","sameSegmentIdCount"],this.outputShape=[],this.uniforms="segmentSize : i32",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.type=n,this.dispatchLayout=ht(e),this.dispatch=st(this.dispatchLayout,e,this.workgroupSize),this.shaderKey="sparseSegmentMean"}getUserCode(){return`
    ${rt("index")} {
      if (index < uniforms.size) {
        let segmentId = index / uniforms.segmentSize;
        let count = sameSegmentIdCount[segmentId];
        if (count != 0) {
          ${this.type==="float32"?"setOutputAtIndex(index, segmentSum[index] / f32(count));":"setOutputAtIndexI32(index, segmentSum[index] / count);"}
        }
      }
    }
  `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vre(t,e,n,r=!1,s){const i=ye(t.shape)/t.shape[0],o=t.dtype,l=ye(e.shape),u=s.readSync(n.dataId),d=l>0?u[l-1]+1:0;let h;const m=t.shape.slice();m[0]=d;const g=l*i,y=oi({backend:s,attrs:{shape:m,value:0,dtype:o}});h=new dqe(m,g,o);let b=[{type:"int32",data:[i]},{type:"int32",data:[g]}];const w=s.runWebGPUProgram(h,[t,e,n],o,b,y);if(r)return w;const C=oi({backend:s,attrs:{shape:[d],value:0,dtype:"int32"}});h=new fqe(d,n.shape);const k=s.runWebGPUProgram(h,[n],"int32",null,C),T=oi({backend:s,attrs:{shape:m,value:0,dtype:o}});h=new hqe(m,o),b=[{type:"int32",data:[i]}];const N=s.runWebGPUProgram(h,[w,k],o,b,T);return s.disposeData(w.dataId),s.disposeData(k.dataId),N}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pqe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:a}=e;return vre(r,s,a,!1,n)}const mqe={kernelName:zk,backendName:"webgpu",kernelFunc:pqe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gqe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:a}=e;return vre(r,s,a,!0,n)}const yqe={kernelName:Bk,backendName:"webgpu",kernelFunc:gqe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bqe{constructor(e,n){this.variableNames=["A"],this.workgroupSize=[64,1,1],this.size=!0;const r=new Array(e.length);for(let s=0;s<r.length;s++)r[s]=e[s]*n[s];this.outputShape=r,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.rank=this.outputShape.length,this.shaderKey="tile"}getUserCode(){const e=xqe(this.rank,"uniforms.");return`
      ${rt("index")} {
        if (index < uniforms.size) {
          let resRC = getCoordsFromIndex(index);
          setOutputAtIndex(index, getA(${e}));
        }
      }
    `}}function xqe(t,e=""){if(t>=5)throw Error(`Tile for rank ${t} is not yet supported`);if(t===1)return`(resRC % ${e}aShape)`;const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<t;s++)r.push(`(${n[s]} % ${e}aShape[${s}])`);return r.join()}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z4(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:a}=r;if(n.shouldExecuteOnCPU([s])||s.dtype==="string"||s.shape.length>=5){const l=n.readSync(s.dataId),u=s.dtype==="string"?l.map(h=>Ml(h)):l,c=Wt(s.shape,s.dtype,u),d=lVe(c,a);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const i=new bqe(s.shape,a);return n.runWebGPUProgram(i,[s],s.dtype)}const vqe={kernelName:uy,backendName:"webgpu",kernelFunc:z4};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wqe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:a,defaultValue:i}=e,{outputShape:o}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:h}=Fu(a,s,o),m=!1;if(a.dtype==="string"){const D=n.bufferSync(s),P=n.bufferSync(a),R=Ml(n.readSync(i.dataId)[0]),O=nVe(D,P,o,h,c,u,l,d,R,m);return n.makeTensorInfo(o,O.dtype,O.values)}const g=[h/c,c],y=vt({inputs:{x:s},backend:n,attrs:{shape:[u,l]}}),b=a.shape.length?vt({inputs:{x:a},backend:n,attrs:{shape:[u,c]}}):_i({inputs:{x:a},backend:n}),w=b.dtype,C=n.makeTensorInfo([],w,Js(1,w)),k=vt({inputs:{x:i},backend:n,attrs:{shape:Array(g.length).fill(1)}}),T=z4({inputs:{x:k},backend:n,attrs:{reps:g}}),N=ye([u,c]),I=[{type:"int32",data:[l]},{type:"int32",data:d},{type:"int32",data:[N]}];switch(u){case 0:break;case 1:{const D=new pb([u,c],l,y.shape.length,b.shape.length,d,g,w,m);n.runWebGPUProgram(D,[b,y],w,I,T)}break;default:{const D=new pb([u,c],l,y.shape.length,C.shape.length,d,g,w,m);n.runWebGPUProgram(D,[C,y],w,I,T)}{const D=new pb([u,c],l,y.shape.length,b.shape.length,d,g,w);n.runWebGPUProgram(D,[b,y],w,I,T)}}const A=vt({inputs:{x:T},backend:n,attrs:{shape:o}});return n.disposeData(y.dataId),n.disposeData(b.dataId),n.disposeData(k.dataId),n.disposeData(C.dataId),n.disposeData(T.dataId),A}const Sqe={kernelName:Uk,backendName:"webgpu",kernelFunc:wqe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:a,axis:i}=r,o=Gt(i,s.shape)[0],l=UN(s,a,o),u=s.shape.length,c=new Array(u).fill(0),d=s.shape.slice();return l.map(h=>{const m=[...d];m[o]=h;const g=$y({inputs:{x:s},backend:n,attrs:{begin:c,size:m}});return c[o]+=h,g})}const kqe={kernelName:Mv,backendName:"webgpu",kernelFunc:Cqe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nqe=Cn({opType:tt.SQRT}),Tqe={kernelName:sy,backendName:"webgpu",kernelFunc:Nqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $qe={kernelName:Vk,backendName:"webgpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e,s=new Ty(n.shape,tt.SQUARE);return r.runWebGPUProgram(s,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iqe=Bs({opType:Ft.SQUARED_DIFFERENCE}),Eqe={kernelName:ay,backendName:"webgpu",kernelFunc:Iqe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aqe({inputs:t,attrs:e,backend:n}){const{x:r}=t,s=new Ty(r.shape,tt.STEP,"stepAlpha : f32,"),a=[{type:"float32",data:[e.alpha]}];return n.runWebGPUProgram(s,[r],r.dtype,a)}const Rqe={kernelName:cy,backendName:"webgpu",kernelFunc:Aqe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Oqe{constructor(e){this.variableNames=["x"],this.workPerThread=1,this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize,[this.workPerThread,1,1]);const n=ts(this.outputShape.length);this.uniforms=`begin : ${n},  strides : ${n}, `,this.shaderKey="stridedSlice"}getUserCode(){const e=this.outputShape.length;let n="";if(e===1)n="coords * uniforms.strides + uniforms.begin";else{let s=0;n=this.outputShape.map((a,i)=>(s++,this.outputShape.length===1?`coords * uniforms.strides[${i}] + uniforms.begin[${i}]`:`coords[${s-1}] * uniforms.strides[${i}] + uniforms.begin[${i}]`)).join(",")}return`
       ${rt("index")} {
         if (index < uniforms.size) {
           let coords = getCoordsFromIndex(index);
           setOutputAtIndex(index, getX(${n}));
         }
       }
     `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _qe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:a,end:i,strides:o,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:h}=r,{finalShapeSparse:m,finalShape:g,isIdentity:y,sliceDim0:b,isSimpleSlice:w,begin:C,end:k,strides:T}=NN(s.shape,a,i,o,l,u,c,d,h);let N;if(y)N=vt({inputs:{x:s},backend:n,attrs:{shape:g}});else if(b||w){X(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const I=kN(C,k,T),A=$y({inputs:{x:s},backend:n,attrs:{begin:C,size:I}});N=vt({inputs:{x:A},backend:n,attrs:{shape:g}}),n.disposeData(A.dataId)}else if(n.shouldExecuteOnCPU([s])){const A=n.readSync(s.dataId),D=Wt(s.shape,s.dtype,A),P=aVe(m,D,T,C);N=n.makeTensorInfo(g,s.dtype,P.values)}else{const A=new Oqe(m),D=[{type:"int32",data:C},{type:"int32",data:T}],P=n.runWebGPUProgram(A,[s],s.dtype,D);N=vt({inputs:{x:P},backend:n,attrs:{shape:g}}),n.disposeData(P.dataId)}return N}const Dqe={kernelName:Gk,backendName:"webgpu",kernelFunc:_qe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pqe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:a,leftPad:i,rightPad:o,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=e,h=n.readSync(c.dataId),m=n.readSync(d.dataId),[g,y]=iVe(h,m,s,a,i,o,l,u);return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(d.shape,"int32",y)]}const Mqe={kernelName:Hk,backendName:"webgpu",kernelFunc:Pqe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jqe=Bs({opType:Ft.SUB,cpuKernelImpl:oVe,supportsComplex:!0}),Lqe={kernelName:iy,backendName:"webgpu",kernelFunc:jqe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fqe=Cn({opType:tt.TAN}),zqe={kernelName:oy,backendName:"webgpu",kernelFunc:Fqe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bqe=Cn({opType:tt.TANH}),Uqe={kernelName:ly,backendName:"webgpu",kernelFunc:Bqe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vqe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:s,indices:a,updates:i}=e,{sliceRank:o,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Fu(i,a,s.shape),h=[d/u,u];if(d===0)return n.makeTensorInfo(s.shape,a.dtype);const m=[],g=vt({inputs:{x:a},backend:n,attrs:{shape:[l,o]}});m.push(g);const y=vt({inputs:{x:i},backend:n,attrs:{shape:[l,u]}});m.push(y);const b=vt({inputs:{x:s},backend:n,attrs:{shape:h}});m.push(b);const w=z4({inputs:{x:b},backend:n,attrs:{reps:Array(h.length).fill(1)}}),C=new pb([l,u],o,g.shape.length,y.shape.length,c,h,s.dtype,!1),k=ye([l,u]),T=[{type:"int32",data:[o]},{type:"int32",data:c},{type:"int32",data:[k]}],N=n.runWebGPUProgram(C,[y,g],b.dtype,T,w);m.push(N);const I=vt({inputs:{x:N},backend:n,attrs:{shape:s.shape}});return m.forEach(A=>n.disposeData(A.dataId)),I}const Wqe={kernelName:Lk,backendName:"webgpu",kernelFunc:Vqe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gqe{constructor(e){this.variableNames=["x","indices"],this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms=`inputSize : i32, firstPass : i32, negativeInf : f32,
        dir : i32, inc : i32,`,this.shaderKey="swap"}getUserCode(){return`
        ${rt("index")} {
          if (index < uniforms.size) {
            let outC = getCoordsFromIndex(index);
            let batch = outC[0];
            let elemIdx = outC[1];
            // We compare elements pair-wise within a group of size 2 * inc.
            // The comparing rule for each group alternates between ascending
            // and descending. Within each group, we compare each pair at
            // positions i and i+inc. To decide whether an element at position i
            // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
            // inc, it is in the first half of the group, we denote it as x0,
            // otherwise we denote it as x1.
            // For example, as shown in the Bitonic top K paper referenced
            // above, Figure5(a) shows that element[1] is in the second half of
            // the group when group size is 2, but it is in the first half of
            // the group when group size is 4.
            let isFirstInPair = elemIdx % (2 * uniforms.inc) < uniforms.inc;
            var i = 0;
            if (isFirstInPair) {
              i = elemIdx;
            } else {
              i = elemIdx - uniforms.inc;
            }

            var i0 = 0;
            if (uniforms.firstPass == 1) {
              i0 = i;
            } else {
              i0 = i32(getIndices(batch, i));
            }

            var i1 = 0;
            if (uniforms.firstPass == 1) {
              i1 = i + uniforms.inc;
            } else {
              i1 = i32(getIndices(batch, i + uniforms.inc));
            }

            var x0 = f32(0.0);
            var x1 = f32(0.0);
            if (i0 < uniforms.inputSize) {
              x0 = getX(batch, i0);
            } else {
              x0 = uniforms.negativeInf;
            }
            if (i1 < uniforms.inputSize) {
              x1 = getX(batch, i1);
            } else {
              x1 = uniforms.negativeInf;
            }

            let reverse = elemIdx % (2 * uniforms.dir) >= uniforms.dir;
            let isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
            if (reverse == isGreater) {
              // Elements in opposite order of direction
              let iTemp = i0;
              i0 = i1;
              i1 = iTemp;
            }
            if (isFirstInPair) {
              setOutputAtIndex(index, f32(i0));
            } else {
              setOutputAtIndex(index, f32(i1));
            }
          }
        }
      `}}class Hqe{constructor(e){this.variableNames=["x","indices"],this.workgroupSize=[256,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.uniforms="inputSize : i32, firstPass : i32, k : i32,",this.shaderKey="merge"}getUserCode(){return`
        ${rt("index")} {
          if (index < uniforms.size) {
            let outC = getCoordsFromIndex(index);
            let batch = outC[0];
            let elemIdx = outC[1];
            // The output size is half of the previous size.
            // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _
            // (k=4), we only need to output the indices at positions |, the
            // indices at positions _ can be thrown away, see Figure5(b) After
            // Phase 2 (Merge phase) in the Bitonic Top K paper referenced
            // above.
            // For example, the paper shows we only need to output the orange
            // bars. The output sequence should look like this | | | | | | | |.
            // Because the sequence is halved, to map the output index back to
            // the previous sequence to find the corresponding value, we need
            // to double the index. When we double the index, we basically
            // interpolate a position, so 2i looks like
            // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k
            // position of each 2k positions by - elemIdx % k. E.g. for output
            // at index 4,5,6,7, we want to get the corresponding element at
            // original index 8,9,10,11, for output at index 8,9,10,11,
            // we want to get the corresponding element at original index
            // 16,17,18,19, so on and so forth.

            var i = 0;
            if (elemIdx < uniforms.k) {
              i = elemIdx;
            } else {
              i = elemIdx * 2 - elemIdx % uniforms.k;
            }
            var i0 = 0;
            if (uniforms.firstPass == 1) {
              i0 = i;
            } else {
              i0 = i32(getIndices(batch, i));
            }
            var i1 = 0;
            if (uniforms.firstPass == 1) {
              i1 = i + uniforms.k;
            } else {
              i1 = i32(getIndices(batch, i + uniforms.k));
            }

            let x0 = getX(batch, i0);
            var x1 = f32(0.0);
            if (i1 < uniforms.inputSize) {
              x1 = getX(batch, i1);
            } else {
              x1 = x0;
            }

            if (x0 >= x1) {
              setOutputAtIndex(index, f32(i0));
            } else {
              setOutputAtIndex(index, f32(i1));
            }
          }
        }
      `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bp(t,e){e!==null&&t.disposeData(e.dataId)}function bW(t){let e=1;for(;e<t;)e*=2;return e}function qqe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:a,sorted:i}=r,o=s.shape,l=o[o.length-1];if(n.shouldExecuteOnCPU([s])){const N=n.readSync(s.dataId),[I,A]=uVe(N,o,s.dtype,a,i);return[n.makeTensorInfo(I.shape,I.dtype,I.values),n.makeTensorInfo(A.shape,A.dtype,A.values)]}if(a===0)return o[o.length-1]=0,[n.makeTensorInfo(o,s.dtype,[]),n.makeTensorInfo(o,"int32",[])];if(l===1)return[s,oi({attrs:{shape:o,dtype:"int32",value:0},backend:n})];const c=ye(o)/l,d=vt({inputs:{x:s},attrs:{shape:[c,l]},backend:n}),h=bW(a),m=bW(l);let g=null;const y=()=>g===null?[d,d]:[d,g],b=(N,I,A)=>{const D=y(),P=new Gqe(A),O=[{type:"int32",data:[l]},{type:"int32",data:[g===null?1:0]},{type:"float32",data:[Number.NEGATIVE_INFINITY]},{type:"int32",data:[N]},{type:"int32",data:[I]}],F=g;g=n.runWebGPUProgram(P,D,"int32",O),Bp(n,F)};for(let N=1;N<h;N*=2){const I=N*2;for(let A=N;A>=1;A/=2)b(I,A,[c,m])}for(let N=m;N>h;N/=2){const I=y(),A=new Hqe([c,N/2]),P=[{type:"int32",data:[l]},{type:"int32",data:[g===null?1:0]},{type:"int32",data:[h]}],R=g;g=n.runWebGPUProgram(A,I,"int32",P),Bp(n,R);const O=h/2,F=O*2;for(let z=O;z>=1;z/=2)b(F,z,g.shape)}let w=g;g=$y({inputs:{x:g},backend:n,attrs:{begin:0,size:[c,a]}}),Bp(n,w);let C=mre({inputs:{x:d,indices:g},backend:n,attrs:{axis:1,batchDims:1}});Bp(n,d);const k=o.slice(0,-1);k.push(a),w=g,g=vt({inputs:{x:g},attrs:{shape:k},backend:n}),Bp(n,w);const T=C;return C=vt({inputs:{x:C},attrs:{shape:k},backend:n}),Bp(n,T),[C,g]}const Kqe={kernelName:qk,backendName:"webgpu",kernelFunc:qqe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xqe{constructor(e){this.variableNames=["Image","Transforms"],this.uniforms="interpolationModeId : i32, fillModeId : i32, fillValue : f32,",this.workgroupSize=[64,1,1],this.size=!0,this.outputShape=e,this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="transform"}getUserCode(){return`
          fn mapCoord(outCoord : f32, len : f32) -> f32{
            var inCoord = outCoord;
            if(uniforms.fillModeId == 2) {
              if (inCoord < 0.0) {
                if (len <= 1.0) {
                  inCoord = 0.0;
                } else {
                  let sz2 = 2.0 * len;
                  if (inCoord < sz2) {
                    inCoord = sz2 * f32(i32(f32(-inCoord / sz2))) +
                    inCoord;
                  }
                  if (inCoord < -len) {
                    inCoord = inCoord + sz2;
                  } else {
                    inCoord = -inCoord - 1.0;
                  }
                }
              } else if (inCoord > len - 1.0) {
                if (len <= 1.0) {
                  inCoord = 0.0;
                } else {
                  let sz2 = 2.0 * len;
                  inCoord = inCoord - sz2 * f32(i32(f32(inCoord / sz2)));
                  if (inCoord >= len) {
                    inCoord = sz2 - inCoord - 1.0;
                  }
                }
              }
              return clamp(inCoord, 0.0, len - 1.0);
            } else if (uniforms.fillModeId == 3) {
              if (inCoord < 0.0) {
                if (len <= 1.0) {
                  inCoord = 0.0;
                } else {
                  let sz = len - 1.0;
                  inCoord = inCoord + len * (f32(i32(f32(-inCoord / sz))) + 1.0);
                }
              } else if (inCoord > len - 1.0) {
                if (len <= 1.0) {
                  inCoord = 0.0;
                } else {
                  let sz = len - 1.0;
                  inCoord = inCoord - len * f32(i32(f32(inCoord / sz)));
                }
              }
              return clamp(inCoord, 0.0, len - 1.0);
            } else if (uniforms.fillModeId == 4) {
              return clamp(outCoord, 0.0, len - 1.0);
            }
            return outCoord;
          }
          fn readWithFillValue(batch : i32, coordY : i32, coordX : i32,
            channel : i32) -> f32 {
            var outputValue : f32;
            if (0 <= coordY && coordY < uniforms.imageShape[1] && 0 <= coordX && coordX < uniforms.imageShape[2]) {
                outputValue = getImage(batch, coordY, coordX, channel);
            } else {
              outputValue = uniforms.fillValue;
            }
            return outputValue;
          }

          ${rt("index")} {
            if (index < uniforms.size) {
              let coords = getCoordsFromIndex(index);
              var outputValue : f32;
              let batch = coords[0];
              let x = coords[2];
              let y = coords[1];
              let channel = coords[3];
              let xf = f32(x);
              let yf = f32(y);
              let a1 = getTransforms(batch, 0);
              let a2 = getTransforms(batch, 1);
              let a3 = getTransforms(batch, 2);
              let b1 = getTransforms(batch, 3);
              let b2 = getTransforms(batch, 4);
              let b3 = getTransforms(batch, 5);
              let c1 = getTransforms(batch, 6);
              let c2 = getTransforms(batch, 7);
              let projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = uniforms.fillValue;
              } else {
                let inX = (a1 * xf + a2 * yf + a3) / projection;
                let inY = (b1 * xf + b2 * yf + b3) / projection;
                let mapX = mapCoord(inX, f32(uniforms.imageShape[2]));
                let mapY = mapCoord(inY, f32(uniforms.imageShape[1]));

                if (uniforms.interpolationModeId == 1) {
                  let coordY = i32(round(mapY));
                  let coordX = i32(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  let yFloor = floor(mapY);
                  let xFloor = floor(mapX);
                  let yCeil = yFloor + 1.0;
                  let xCeil = xFloor + 1.0;
                  let valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, i32(yFloor), i32(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, i32(yFloor), i32(xCeil), channel);
                  let valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, i32(yCeil), i32(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, i32(yCeil), i32(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutputAtIndex(index, outputValue);
            }
          }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yqe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,transforms:a}=e,{interpolation:i,fillMode:o,fillValue:l,outputShape:u}=r,[c,d,h,m]=s.shape,[g,y]=u??[d,h],b=[c,g,y,m],w=new Xqe(b),C=i==="nearest"?1:2;let k;switch(o){case"constant":k=1;break;case"reflect":k=2;break;case"wrap":k=3;break;case"nearest":k=4;break;default:k=1;break}const T=[{type:"int32",data:[C]},{type:"int32",data:[k]},{type:"float32",data:[l]}];return n.runWebGPUProgram(w,[s,a],"float32",T)}const Qqe={kernelName:Kk,backendName:"webgpu",kernelFunc:Yqe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zqe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:a}=r;a<0&&(a+=s.shape.length);const i=s,o=i.shape.length,l=s.shape[a],u=new Array(o-1);let c=0;for(let y=0;y<o;y++)y!==a&&(u[c++]=i.shape[y]);const d=[],h=new Array(o).fill(0),m=i.shape.slice();m[a]=1;const g=new Array(l);for(let y=0;y<g.length;y++){h[a]=y;const b=$y({inputs:{x:i},backend:n,attrs:{begin:h,size:m}}),w=vt({inputs:{x:b},backend:n,attrs:{shape:u}});g[y]=w,d.push(b)}return d.forEach(y=>n.disposeData(y.dataId)),g}const Jqe={kernelName:Lv,backendName:"webgpu",kernelFunc:Zqe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e7e{constructor(e,n,r){if(this.outputShape=[],this.variableNames=["x","segmentIds"],this.uniforms="numSegments : i32, xSize: i32,",this.workgroupSize=[64,1,1],this.atomic=!0,this.outputShape=n,this.dispatchLayout=ht(e),this.dispatch=st(this.dispatchLayout,e,this.workgroupSize),r!=="float32"&&r!=="int32")throw new Error(`UnsortedSegmentSum only supports float32 and int32
              types, does not support ${r} type.`);this.type=r,this.shaderKey="unsortedSegmentSum"}getUserCode(){return`
    ${rt("index")} {
      if (index < uniforms.xSize) {
        let coords = getXCoordsFromIndex(index);
        let b = coords[0];
        let inCol = coords[1];

        let segmentId = i32(getSegmentIds(inCol));
        if (segmentId >= 0) {
          let flatIndex = b * uniforms.numSegments + segmentId % uniforms.numSegments;
          let value = getX(b, inCol);

          ${Zd("&result[flatIndex]","value",this.type)}
        }
      }
    }
  `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:a}=e,{numSegments:i}=r,o=s.shape.length,l=[];let u=0;const c=Yn([u],o);let d=s;c!=null&&(d=Eu({inputs:{x:s},backend:n,attrs:{perm:c}}),l.push(d),u=gr(1,o)[0]);const h=Xj(d.shape,u,i),m=ye([d.shape[u]]),g=vt({inputs:{x:d},backend:n,attrs:{shape:[-1,m]}});l.push(g);const y=s.dtype,b=[g.shape[0],i],w=oi({backend:n,attrs:{shape:b,value:0,dtype:y}}),C=new e7e(g.shape,b,y),k=[{type:"int32",data:[i]},{type:"int32",data:[ye(g.shape)]}],T=n.runWebGPUProgram(C,[g,a],y,k,w),N=vt({inputs:{x:T},backend:n,attrs:{shape:h}});l.push(T);let I=N;if(c!=null){l.push(N);const A=ju(c);I=Eu({inputs:{x:I},backend:n,attrs:{perm:A}})}return l.forEach(A=>n.disposeData(A.dataId)),I}const n7e={kernelName:Fv,backendName:"webgpu",kernelFunc:t7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r7e=[IUe,fVe,pVe,gVe,bVe,wVe,IVe,AVe,OVe,DVe,MVe,LVe,zVe,UVe,WVe,XVe,QVe,tWe,rWe,aWe,cWe,pWe,yWe,wWe,CWe,$We,AUe,AWe,DWe,UWe,KWe,ZWe,t6e,r6e,a6e,o6e,u6e,f6e,p6e,g6e,b6e,w6e,I6e,A6e,k6e,_6e,M6e,z6e,U6e,G6e,X6e,Q6e,J6e,tGe,rGe,aGe,iGe,lGe,cGe,NUe,fGe,bGe,pGe,gGe,wGe,CGe,NGe,IGe,RGe,_Ge,PGe,EUe,jGe,OWe,FGe,BGe,VGe,GGe,qGe,XGe,ZGe,nHe,eHe,sHe,iHe,lHe,fHe,mHe,HVe,yHe,xHe,$He,wHe,NHe,EHe,qVe,RHe,_He,PHe,jHe,UHe,H6e,WHe,HHe,KHe,bWe,QHe,JHe,t8e,s8e,i8e,l8e,c8e,f8e,xWe,p8e,g8e,b8e,v8e,TUe,C8e,T8e,E8e,O8e,P8e,j8e,F8e,B8e,V8e,H8e,X8e,Q8e,J8e,tqe,rqe,aqe,lWe,Rqe,Dqe,Mqe,zHe,oqe,cqe,mqe,yqe,Sqe,kqe,Tqe,$qe,Eqe,Lqe,q6e,zqe,Uqe,Wqe,vqe,Kqe,Qqe,kVe,Jqe,n7e,ZHe];for(const t of r7e)tj(t);/**
    * @license
    * Copyright 2023 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */var wre=function(t,e){return(wre=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])})(t,e)};function Sre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}wre(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var or=function(){return(or=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)};function gn(t,e,n,r){return new(n||(n=Promise))(function(s,a){function i(u){try{l(r.next(u))}catch(c){a(c)}}function o(u){try{l(r.throw(u))}catch(c){a(c)}}function l(u){var c;u.done?s(u.value):(c=u.value,c instanceof n?c:new n(function(d){d(c)})).then(i,o)}l((r=r.apply(t,[])).next())})}function yn(t,e){var n,r,s,a,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(l){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(s=2&c[0]?r.return:c[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,c[1])).done)return s;switch(r=0,s&&(c=[2&c[0],s.value]),c[0]){case 0:case 1:s=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(s=i.trys,!((s=s.length>0&&s[s.length-1])||c[0]!==6&&c[0]!==2)){i=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){i.label=c[1];break}if(c[0]===6&&i.label<s[1]){i.label=s[1],s=c;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(c);break}s[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(d){c=[6,d],r=0}finally{n=s=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}function Kf(t,e,n){if(n||arguments.length===2)for(var r,s=0,a=e.length;s<a;s++)!r&&s in e||(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return t.concat(r||Array.prototype.slice.call(e))}var Au=["nose","left_eye","right_eye","left_ear","right_ear","left_shoulder","right_shoulder","left_elbow","right_elbow","left_wrist","right_wrist","left_hip","right_hip","left_knee","right_knee","left_ankle","right_ankle"],qb=["nose","left_eye_inner","left_eye","left_eye_outer","right_eye_inner","right_eye","right_eye_outer","left_ear","right_ear","mouth_left","mouth_right","left_shoulder","right_shoulder","left_elbow","right_elbow","left_wrist","right_wrist","left_pinky","right_pinky","left_index","right_index","left_thumb","right_thumb","left_hip","right_hip","left_knee","right_knee","left_ankle","right_ankle","left_heel","right_heel","left_foot_index","right_foot_index"];function O2(t){return t instanceof SVGAnimatedLength?t.baseVal.value:t}function Cre(t){return gn(this,void 0,void 0,function(){var e,n;return yn(this,function(r){switch(r.label){case 0:return e=document.createElement("canvas"),t instanceof Pn?[4,Wj(t,e)]:[3,2];case 1:return r.sent(),[3,3];case 2:e.width=O2(t.width),e.height=O2(t.height),n=e.getContext("2d"),t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0),r.label=3;case 3:return[2,e]}})})}function kre(t){return gn(this,void 0,void 0,function(){var e,n,r,s,a,i;return yn(this,function(o){switch(o.label){case 0:return t instanceof Pn?(e=t.shape.slice(0,2),n=e[0],r=e[1],s=ImageData.bind,[4,Wj(t)]):[3,2];case 1:return[2,new(s.apply(ImageData,[void 0,o.sent(),r,n]))];case 2:return a=document.createElement("canvas"),i=a.getContext("2d"),a.width=O2(t.width),a.height=O2(t.height),i.drawImage(t,0,0),[2,i.getImageData(0,0,a.width,a.height)]}})})}function s7e(t){return gn(this,void 0,void 0,function(){var e,n;return yn(this,function(r){switch(r.label){case 0:return t instanceof SVGImageElement||t instanceof OffscreenCanvas?[4,Cre(t)]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n=t,r.label=3;case 3:return e=n,[2,qQ(e,4)]}})})}function Nre(t){if(t<0||t>=256)throw new Error("Mask value must be in range [0, 255] but got ".concat(t));if(!Number.isInteger(t))throw new Error("Mask value must be an integer but got ".concat(t))}var B0={runtime:"mediapipe",enableSmoothing:!0,enableSegmentation:!1,smoothSegmentation:!0,modelType:"full"},a7e=function(){function t(e){this.mask=e}return t.prototype.toCanvasImageSource=function(){return gn(this,void 0,void 0,function(){return yn(this,function(e){return[2,this.mask]})})},t.prototype.toImageData=function(){return gn(this,void 0,void 0,function(){return yn(this,function(e){return[2,kre(this.mask)]})})},t.prototype.toTensor=function(){return gn(this,void 0,void 0,function(){return yn(this,function(e){return[2,s7e(this.mask)]})})},t.prototype.getUnderlyingType=function(){return"canvasimagesource"},t}();function i7e(t){return Nre(t),"person"}var o7e=function(){function t(e){var n,r=this;switch(this.width=0,this.height=0,this.selfieMode=!1,this.poseSolution=new TBe.Pose({locateFile:function(s,a){if(e.solutionPath){var i=e.solutionPath.replace(/\/+$/,"");return"".concat(i,"/").concat(s)}return"".concat(a,"/").concat(s)}}),e.modelType){case"lite":n=0;break;case"heavy":n=2;break;case"full":default:n=1}this.poseSolution.setOptions({modelComplexity:n,smoothLandmarks:e.enableSmoothing,enableSegmentation:e.enableSegmentation,smoothSegmentation:e.smoothSegmentation,selfieMode:this.selfieMode}),this.poseSolution.onResults(function(s){if(r.height=s.image.height,r.width=s.image.width,s.poseLandmarks==null)r.poses=[];else{var a=r.translateOutput(s.poseLandmarks,s.poseWorldLandmarks);s.segmentationMask&&(a.segmentation={maskValueToLabel:i7e,mask:new a7e(s.segmentationMask)}),r.poses=[a]}})}return t.prototype.translateOutput=function(e,n){var r=this,s={keypoints:e.map(function(a,i){return{x:a.x*r.width,y:a.y*r.height,z:a.z,score:a.visibility,name:qb[i]}})};return n!=null&&(s.keypoints3D=n.map(function(a,i){return{x:a.x,y:a.y,z:a.z,score:a.visibility,name:qb[i]}})),s},t.prototype.estimatePoses=function(e,n,r){return gn(this,void 0,void 0,function(){var s,a;return yn(this,function(i){switch(i.label){case 0:return n&&n.flipHorizontal&&n.flipHorizontal!==this.selfieMode&&(this.selfieMode=n.flipHorizontal,this.poseSolution.setOptions({selfieMode:this.selfieMode})),e instanceof Pn?(a=ImageData.bind,[4,Wj(e)]):[3,2];case 1:return s=new(a.apply(ImageData,[void 0,i.sent(),e.shape[1],e.shape[0]])),[3,3];case 2:s=e,i.label=3;case 3:return e=s,[4,this.poseSolution.send({image:e},r)];case 4:return i.sent(),[2,this.poses]}})})},t.prototype.dispose=function(){this.poseSolution.close()},t.prototype.reset=function(){this.poseSolution.reset()},t.prototype.initialize=function(){return this.poseSolution.initialize()},t}();function l7e(t){return gn(this,void 0,void 0,function(){var e,n;return yn(this,function(r){switch(r.label){case 0:return e=function(s){if(s==null)return or({},B0);var a=or({},s);return a.runtime="mediapipe",a.enableSegmentation==null&&(a.enableSegmentation=B0.enableSegmentation),a.enableSmoothing==null&&(a.enableSmoothing=B0.enableSmoothing),a.smoothSegmentation==null&&(a.smoothSegmentation=B0.smoothSegmentation),a.modelType==null&&(a.modelType=B0.modelType),a}(t),[4,(n=new o7e(e)).initialize()];case 1:return r.sent(),[2,n]}})})}function Fm(t){return t instanceof Pn?{height:t.shape[0],width:t.shape[1]}:{height:t.height,width:t.width}}function Tre(t){return t-2*Math.PI*Math.floor((t+Math.PI)/(2*Math.PI))}function B4(t){return t instanceof Pn?t:qQ(t)}function $re(t,e,n){return MD(n,"inputResolution"),[1/n.width*t[0][0]*e.width,1/n.height*t[0][1]*e.width,t[0][3]*e.width,1/n.width*t[1][0]*e.height,1/n.height*t[1][1]*e.height,t[1][3]*e.height,0,0]}function MD(t,e){X(t.width!==0,function(){return"".concat(e," width cannot be 0.")}),X(t.height!==0,function(){return"".concat(e," height cannot be 0.")})}function nA(t,e,n){var r=n.rotationVectorStartKeypointIndex,s=n.rotationVectorEndKeypointIndex,a=t.locationData,i=a.relativeKeypoints[r].x*e.width,o=a.relativeKeypoints[r].y*e.height,l=a.relativeKeypoints[s].x*e.width,u=a.relativeKeypoints[s].y*e.height,c=2*Math.sqrt((l-i)*(l-i)+(u-o)*(u-o)),d=function(h,m,g){var y,b=h.locationData,w=g.rotationVectorStartKeypointIndex,C=g.rotationVectorEndKeypointIndex;y=g.rotationVectorTargetAngle?g.rotationVectorTargetAngle:Math.PI*g.rotationVectorTargetAngleDegree/180;var k=b.relativeKeypoints[w].x*m.width,T=b.relativeKeypoints[w].y*m.height,N=b.relativeKeypoints[C].x*m.width,I=b.relativeKeypoints[C].y*m.height;return Tre(y-Math.atan2(-(I-T),N-k))}(t,e,n);return{xCenter:i/e.width,yCenter:o/e.height,width:c/e.width,height:c/e.height,rotation:d}}function Ire(t){if(t.length!==16)throw new Error("Array length must be 16 but got ".concat(t.length));return[[t[0],t[1],t[2],t[3]],[t[4],t[5],t[6],t[7]],[t[8],t[9],t[10],t[11]],[t[12],t[13],t[14],t[15]]]}function rA(t,e,n,r,s,a,i){return t[e][s]*(t[n][a]*t[r][i]-t[n][i]*t[r][a])}function $a(t,e,n){var r=(e+1)%4,s=(e+2)%4,a=(e+3)%4,i=(n+1)%4,o=(n+2)%4,l=(n+3)%4;return rA(t,r,s,a,i,o,l)+rA(t,s,a,r,i,o,l)+rA(t,a,r,s,i,o,l)}function xW(t,e,n){n===void 0&&(n={ignoreRotation:!1});for(var r=[],s=0,a=t;s<a.length;s++){var i=a[s],o=i.x-.5,l=i.y-.5,u=n.ignoreRotation?0:e.rotation,c=Math.cos(u)*o-Math.sin(u)*l,d=Math.sin(u)*o+Math.cos(u)*l;c=c*e.width+e.xCenter,d=d*e.height+e.yCenter;var h=i.z*e.width,m=or({},i);m.x=c,m.y=d,m.z=h,r.push(m)}return r}function Ere(t,e){var n=function(r,s,a,i){var o=s-r,l=i-a,u=l/o;return{scale:u,offset:a-r*u}}(0,255,e[0],e[1]);return be(function(){return je(ie(t,n.scale),n.offset)})}function jD(t,e,n){var r,s,a,i,o,l,u,c,d,h,m,g,y,b,w=e.outputTensorSize,C=e.keepAspectRatio,k=e.borderMode,T=e.outputTensorFloatRange,N=Fm(t),I=function(P,R){return R?{xCenter:R.xCenter*P.width,yCenter:R.yCenter*P.height,width:R.width*P.width,height:R.height*P.height,rotation:R.rotation}:{xCenter:.5*P.width,yCenter:.5*P.height,width:P.width,height:P.height,rotation:0}}(N,n),A=function(P,R,O){if(O===void 0&&(O=!1),!O)return{top:0,left:0,right:0,bottom:0};var F=R.height,z=R.width;MD(R,"targetSize"),MD(P,"roi");var V,W,j=F/z,q=P.height/P.width,Y=0,Q=0;return j>q?(V=P.width,W=P.width*j,Q=(1-q/j)/2):(V=P.height/j,W=P.height,Y=(1-j/q)/2),P.width=V,P.height=W,{top:Q,left:Y,right:Y,bottom:Q}}(I,w,C),D=(r=I,s=N.width,a=N.height,i=!1,o=r.width,l=r.height,u=i?-1:1,c=Math.cos(r.rotation),d=Math.sin(r.rotation),h=r.xCenter,m=r.yCenter,g=1/s,y=1/a,(b=new Array(16))[0]=o*c*u*g,b[1]=-l*d*g,b[2]=0,b[3]=(-.5*o*c*u+.5*l*d+h)*g,b[4]=o*d*u*y,b[5]=l*c*y,b[6]=0,b[7]=(-.5*l*c-.5*o*d*u+m)*y,b[8]=0,b[9]=0,b[10]=o*g,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,Ire(b));return{imageTensor:be(function(){var P=B4(t),R=Zo($re(D,N,w),[1,8]),O=k==="zero"?"constant":"nearest",F=ja.transform(cs(nt(P,"float32")),R,"bilinear",O,0,[w.height,w.width]);return T!=null?Ere(F,T):F}),padding:A,transformationMatrix:D}}function vW(t,e,n,r){return r===1?.5*(t+e):t+(e-t)*n/(r-1)}function u7e(t){return be(function(){var e=function(s){return be(function(){return[zt(s,[0,0,0],[1,-1,1]),zt(s,[0,0,1],[1,-1,-1])]})}(t),n=e[0],r=e[1];return{boxes:$n(r),logits:$n(n)}})}function Are(t){return t!=null&&t.currentTime!=null}function wW(t){for(var e={locationData:{relativeKeypoints:[]}},n=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,i=0;i<t.length;++i){var o=t[i];n=Math.min(n,o.x),r=Math.max(r,o.x),s=Math.min(s,o.y),a=Math.max(a,o.y),e.locationData.relativeKeypoints.push({x:o.x,y:o.y})}return e.locationData.relativeBoundingBox={xMin:n,yMin:s,xMax:r,yMax:a,width:r-n,height:a-s},e}function c7e(t,e,n,r){return gn(this,void 0,void 0,function(){var s,a,i,o,l;return yn(this,function(u){switch(u.label){case 0:return t.sort(function(c,d){return Math.max.apply(Math,d.score)-Math.max.apply(Math,c.score)}),s=Zo(t.map(function(c){return[c.locationData.relativeBoundingBox.yMin,c.locationData.relativeBoundingBox.xMin,c.locationData.relativeBoundingBox.yMax,c.locationData.relativeBoundingBox.xMax]})),a=fs(t.map(function(c){return c.score[0]})),[4,ja.nonMaxSuppressionAsync(s,a,e,n)];case 1:return[4,(i=u.sent()).array()];case 2:return o=u.sent(),l=t.filter(function(c,d){return o.indexOf(d)>-1}),Rt([s,a,i]),[2,l]}})})}function Rre(t,e){return t.map(function(n){var r=or(or({},n),{x:n.x*e.width,y:n.y*e.height});return n.z!=null&&(r.z=n.z*e.width),r})}function d7e(t,e,n){return gn(this,void 0,void 0,function(){var r,s,a,i,o,l,u,c,d,h,m,g,y,b,w,C,k,T,N,I,A,D,P,R;return yn(this,function(O){switch(O.label){case 0:if(r=$n(e,[0]),s=r.shape,a=s[0],i=s[1],o=s[2],t.length!==o)throw new Error("Expected heatmap to have same number of channels as the number of landmarks. But got landmarks length: "+"".concat(t.length,", heatmap length: ").concat(o));return l=[],[4,r.buffer()];case 1:for(u=O.sent(),c=0;c<t.length;c++)if(d=t[c],h=or({},d),l.push(h),m=Math.trunc(h.x*i),g=Math.trunc(h.y*a),!(m<0||m>=i||g<0||m>=a)){for(y=Math.trunc((n.kernelSize-1)/2),b=Math.max(0,m-y),w=Math.min(i,m+y+1),C=Math.max(0,g-y),k=Math.min(a,g+y+1),T=0,N=0,I=0,A=0,D=C;D<k;++D)for(P=b;P<w;++P)R=u.get(D,P,c),T+=R,A=Math.max(A,R),N+=P*R,I+=D*R;A>=n.minConfidenceToRefine&&T>0&&(h.x=N/i/T,h.y=I/a/T)}return r.dispose(),[2,l]}})})}function SW(t,e){var n=e.left,r=e.top,s=e.left+e.right,a=e.top+e.bottom;return t.map(function(i){return or(or({},i),{x:(i.x-n)/(1-s),y:(i.y-r)/(1-a),z:i.z/(1-s)})})}function f7e(t,e,n){return Eb()==="webgl"?function(r,s,a){var i=a.combineWithPreviousRatio.toFixed(2),o={variableNames:["prevMask","newMask"],outputShape:r.shape,userCode:`
  void main() {
      ivec2 coords = getOutputCoords();
      int height = coords[0];
      int width = coords[1];

      float prevMaskValue = getPrevMask(height, width);
      float newMaskValue = getNewMask(height, width);

      /*
      * Assume p := newMaskValue
      * H(p) := 1 + (p * log(p) + (1-p) * log(1-p)) / log(2)
      * uncertainty alpha(p) =
      *   Clamp(1 - (1 - H(p)) * (1 - H(p)), 0, 1) [squaring the
      * uncertainty]
      *
      * The following polynomial approximates uncertainty alpha as a
      * function of (p + 0.5):
      */
      const float c1 = 5.68842;
      const float c2 = -0.748699;
      const float c3 = -57.8051;
      const float c4 = 291.309;
      const float c5 = -624.717;
      float t = newMaskValue - 0.5;
      float x = t * t;

      float uncertainty =
        1.0 - min(1.0, x * (c1 + x * (c2 + x * (c3 + x * (c4 + x * c5)))));

      float outputValue = newMaskValue + (prevMaskValue - newMaskValue) *
                             (uncertainty * `.concat(i,`);

      setOutput(outputValue);
    }
`)},l=mh();return be(function(){var u=l.compileAndRun(o,[r,s]);return Aa().makeTensorFromDataId(u.dataId,u.shape,u.dtype)})}(t,e,n):be(function(){var r=ft(e,.5),s=Kn(r),a=ft(1,Dd(1,ie(s,je(5.68842,ie(s,je(-.748699,ie(s,je(-57.8051,ie(s,je(291.309,ie(s,-624.717)))))))))));return je(e,ie(ft(t,e),ie(a,n.combineWithPreviousRatio)))})}function h7e(t,e,n){return gn(this,void 0,void 0,function(){var r,s,a,i,o;return yn(this,function(l){switch(l.label){case 0:return r=t[0],s=t[1],a=function(u,c,d){return be(function(){var h,m,g,y;d.reverseOutputOrder?(m=$n(zt(u,[0,d.boxCoordOffset+0],[-1,1])),h=$n(zt(u,[0,d.boxCoordOffset+1],[-1,1])),y=$n(zt(u,[0,d.boxCoordOffset+2],[-1,1])),g=$n(zt(u,[0,d.boxCoordOffset+3],[-1,1]))):(h=$n(zt(u,[0,d.boxCoordOffset+0],[-1,1])),m=$n(zt(u,[0,d.boxCoordOffset+1],[-1,1])),g=$n(zt(u,[0,d.boxCoordOffset+2],[-1,1])),y=$n(zt(u,[0,d.boxCoordOffset+3],[-1,1]))),m=je(ie(dt(m,d.xScale),c.w),c.x),h=je(ie(dt(h,d.yScale),c.h),c.y),d.applyExponentialOnBoxSize?(g=ie(La(dt(g,d.hScale)),c.h),y=ie(La(dt(y,d.wScale)),c.w)):(g=ie(dt(g,d.hScale),c.h),y=ie(dt(y,d.wScale),c.h));var b=ft(h,dt(g,2)),w=ft(m,dt(y,2)),C=je(h,dt(g,2)),k=je(m,dt(y,2)),T=Rr([ce(b,[d.numBoxes,1]),ce(w,[d.numBoxes,1]),ce(C,[d.numBoxes,1]),ce(k,[d.numBoxes,1])],1);if(d.numKeypoints)for(var N=0;N<d.numKeypoints;++N){var I=d.keypointCoordOffset+N*d.numValuesPerKeypoint,A=void 0,D=void 0;d.reverseOutputOrder?(A=$n(zt(u,[0,I],[-1,1])),D=$n(zt(u,[0,I+1],[-1,1]))):(D=$n(zt(u,[0,I],[-1,1])),A=$n(zt(u,[0,I+1],[-1,1])));var P=je(ie(dt(A,d.xScale),c.w),c.x),R=je(ie(dt(D,d.yScale),c.h),c.y);T=Rr([T,ce(P,[d.numBoxes,1]),ce(R,[d.numBoxes,1])],1)}return T})}(s,e,n),i=be(function(){var u=r;return n.sigmoidScore?(n.scoreClippingThresh!=null&&(u=ui(r,-n.scoreClippingThresh,n.scoreClippingThresh)),u=io(u)):u}),[4,p7e(a,i,n)];case 1:return o=l.sent(),Rt([a,i]),[2,o]}})})}function p7e(t,e,n){return gn(this,void 0,void 0,function(){var r,s,a,i,o,l,u,c,d,h,m,g;return yn(this,function(y){switch(y.label){case 0:return r=[],[4,t.data()];case 1:return s=y.sent(),[4,e.data()];case 2:for(a=y.sent(),i=0;i<n.numBoxes;++i)if(!(n.minScoreThresh!=null&&a[i]<n.minScoreThresh||(o=i*n.numCoords,l=m7e(s[o+0],s[o+1],s[o+2],s[o+3],a[i],n.flipVertically,i),(u=l.locationData.relativeBoundingBox).width<0||u.height<0))){if(n.numKeypoints>0)for((c=l.locationData).relativeKeypoints=[],d=n.numKeypoints*n.numValuesPerKeypoint,h=0;h<d;h+=n.numValuesPerKeypoint)m=o+n.keypointCoordOffset+h,g={x:s[m+0],y:n.flipVertically?1-s[m+1]:s[m+1]},c.relativeKeypoints.push(g);r.push(l)}return[2,r]}})})}function m7e(t,e,n,r,s,a,i){return{score:[s],ind:i,locationData:{relativeBoundingBox:{xMin:e,yMin:a?1-n:t,xMax:r,yMax:a?1-t:n,width:r-e,height:n-t}}}}function g7e(t,e){return t==="none"?e:function(n){return 1/(1+Math.exp(-n))}(e)}function CW(t,e,n,r){return gn(this,void 0,void 0,function(){var s,a,i,o,l,u,c,d;return yn(this,function(h){switch(h.label){case 0:return n=n||e.flipHorizontally||!1,r=r||e.flipVertically||!1,s=t.size,a=s/e.numLandmarks,[4,t.data()];case 1:for(i=h.sent(),o=[],l=0;l<e.numLandmarks;++l)u=l*a,(d={x:0,y:0}).x=n?e.inputImageWidth-i[u]:i[u],a>1&&(d.y=r?e.inputImageHeight-i[u+1]:i[u+1]),a>2&&(d.z=i[u+2]),a>3&&(d.score=g7e(e.visibilityActivation,i[u+3])),o.push(d);for(c=0;c<o.length;++c)(d=o[c]).x=d.x/e.inputImageWidth,d.y=d.y/e.inputImageHeight,d.z=d.z/e.inputImageWidth/(e.normalizeZ||1);return[2,o]}})})}function kW(t,e,n){var r=t.width,s=t.height,a=t.rotation;if(n.rotation==null&&n.rotationDegree==null||(a=function(u,c){return c.rotation!=null?u+=c.rotation:c.rotationDegree!=null&&(u+=Math.PI*c.rotationDegree/180),Tre(u)}(a,n)),a===0)t.xCenter=t.xCenter+r*n.shiftX,t.yCenter=t.yCenter+s*n.shiftY;else{var i=(e.width*r*n.shiftX*Math.cos(a)-e.height*s*n.shiftY*Math.sin(a))/e.width,o=(e.width*r*n.shiftX*Math.sin(a)+e.height*s*n.shiftY*Math.cos(a))/e.height;t.xCenter=t.xCenter+i,t.yCenter=t.yCenter+o}{var l=Math.max(r*e.width,s*e.height);r=l/e.width,s=l/e.height}return t.width=r*n.scaleX,t.height=s*n.scaleY,t}function y7e(t,e){return t.map(function(n){var r=or(or({},n),{x:n.x/e.width,y:n.y/e.height});return n.z!=null&&(n.z=n.z/e.width),r})}var vd=function(){function t(e){this.alpha=e,this.initialized=!1}return t.prototype.apply=function(e,n){var r;return this.initialized?r=n==null?this.storedValue+this.alpha*(e-this.storedValue):this.storedValue+this.alpha*n*Math.asinh((e-this.storedValue)/n):(r=e,this.initialized=!0),this.rawValue=e,this.storedValue=r,r},t.prototype.applyWithAlpha=function(e,n,r){return this.alpha=n,this.apply(e,r)},t.prototype.hasLastRawValue=function(){return this.initialized},t.prototype.lastRawValue=function(){return this.rawValue},t.prototype.reset=function(){this.initialized=!1},t}(),sA=function(){function t(e){this.frequency=e.frequency,this.minCutOff=e.minCutOff,this.beta=e.beta,this.thresholdCutOff=e.thresholdCutOff,this.thresholdBeta=e.thresholdBeta,this.derivateCutOff=e.derivateCutOff,this.x=new vd(this.getAlpha(this.minCutOff)),this.dx=new vd(this.getAlpha(this.derivateCutOff)),this.lastTimestamp=0}return t.prototype.apply=function(e,n,r){if(e==null)return e;var s=Math.trunc(n);if(this.lastTimestamp>=s)return e;this.lastTimestamp!==0&&s!==0&&(this.frequency=1/(1e-6*(s-this.lastTimestamp))),this.lastTimestamp=s;var a=this.x.hasLastRawValue()?(e-this.x.lastRawValue())*r*this.frequency:0,i=this.dx.applyWithAlpha(a,this.getAlpha(this.derivateCutOff)),o=this.minCutOff+this.beta*Math.abs(i),l=this.thresholdCutOff!=null?this.thresholdCutOff+this.thresholdBeta*Math.abs(i):null;return this.x.applyWithAlpha(e,this.getAlpha(o),l)},t.prototype.getAlpha=function(e){return 1/(1+this.frequency/(2*Math.PI*e))},t}(),LD=function(){function t(e){this.config=e}return t.prototype.apply=function(e,n,r){var s=this;if(e==null)return this.reset(),null;this.initializeFiltersIfEmpty(e);var a=1;if(!this.config.disableValueScaling){if(r<this.config.minAllowedObjectScale)return Kf([],e,!0);a=1/r}return e.map(function(i,o){var l=or(or({},i),{x:s.xFilters[o].apply(i.x,n,a),y:s.yFilters[o].apply(i.y,n,a)});return i.z!=null&&(l.z=s.zFilters[o].apply(i.z,n,a)),l})},t.prototype.reset=function(){this.xFilters=null,this.yFilters=null,this.zFilters=null},t.prototype.initializeFiltersIfEmpty=function(e){var n=this;this.xFilters!=null&&this.xFilters.length===e.length||(this.xFilters=e.map(function(r){return new sA(n.config)}),this.yFilters=e.map(function(r){return new sA(n.config)}),this.zFilters=e.map(function(r){return new sA(n.config)}))},t}(),aA=function(){function t(e){this.config=e,this.window=[],this.lowPassFilter=new vd(1),this.lastValue=0,this.lastValueScale=1,this.lastTimestamp=-1}return t.prototype.apply=function(e,n,r){if(e==null)return e;var s,a=Math.trunc(n);if(this.lastTimestamp>=a)return e;if(this.lastTimestamp===-1)s=1;else{for(var i=e*r-this.lastValue*this.lastValueScale,o=a-this.lastTimestamp,l=i,u=o,c=(1+this.window.length)*(1e6/30),d=0,h=this.window;d<h.length;d++){var m=h[d];if(u+m.duration>c)break;l+=m.distance,u+=m.duration}var g=l/(1e-6*u);s=1-1/(1+this.config.velocityScale*Math.abs(g)),this.window.unshift({distance:i,duration:o}),this.window.length>this.config.windowSize&&this.window.pop()}return this.lastValue=e,this.lastValueScale=r,this.lastTimestamp=a,this.lowPassFilter.applyWithAlpha(e,s)},t}(),b7e=function(){function t(e){this.config=e}return t.prototype.apply=function(e,n,r){var s=this;if(e==null)return this.reset(),null;var a=1;if(!this.config.disableValueScaling){if(r<this.config.minAllowedObjectScale)return Kf([],e,!0);a=1/r}return this.initializeFiltersIfEmpty(e),e.map(function(i,o){var l=or(or({},i),{x:s.xFilters[o].apply(i.x,n,a),y:s.yFilters[o].apply(i.y,n,a)});return i.z!=null&&(l.z=s.zFilters[o].apply(i.z,n,a)),l})},t.prototype.reset=function(){this.xFilters=null,this.yFilters=null,this.zFilters=null},t.prototype.initializeFiltersIfEmpty=function(e){var n=this;this.xFilters!=null&&this.xFilters.length===e.length||(this.xFilters=e.map(function(r){return new aA(n.config)}),this.yFilters=e.map(function(r){return new aA(n.config)}),this.zFilters=e.map(function(r){return new aA(n.config)}))},t}(),iA=function(){function t(e){if(e.velocityFilter!=null)this.keypointsFilter=new b7e(e.velocityFilter);else{if(e.oneEuroFilter==null)throw new Error("Either configure velocityFilter or oneEuroFilter, but got "+"".concat(e,"."));this.keypointsFilter=new LD(e.oneEuroFilter)}}return t.prototype.apply=function(e,n,r,s,a){if(s===void 0&&(s=!1),e==null)return this.keypointsFilter.reset(),null;var i=a!=null?function(u,c){return(u.width*c.width+u.height*c.height)/2}(a,r):1,o=s?Rre(e,r):e,l=this.keypointsFilter.apply(o,n,i);return s?y7e(l,r):l},t}(),NW=function(){function t(e){this.alpha=e.alpha}return t.prototype.apply=function(e){var n=this;if(e==null)return this.visibilityFilters=null,null;this.visibilityFilters!=null&&this.visibilityFilters.length===e.length||(this.visibilityFilters=e.map(function(o){return new vd(n.alpha)}));for(var r=[],s=0;s<e.length;++s){var a=e[s],i=or({},a);i.score=this.visibilityFilters[s].apply(a.score),r.push(i)}return r},t}(),x7e={interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:5,minScale:.1484375,maxScale:.75,inputSizeHeight:224,inputSizeWidth:224,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,32,32,32],aspectRatios:[1],fixedAnchorSize:!0},Up={runtime:"tfjs",modelType:"full",enableSmoothing:!0,enableSegmentation:!1,smoothSegmentation:!0,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/detector/1",landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/full/2"},v7e={maxPoses:1,flipHorizontal:!1},w7e={applyExponentialOnBoxSize:!1,flipVertically:!1,numBoxes:2254,numCoords:12,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:4,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:224,yScale:224,hScale:224,wScale:224,minScoreThresh:.5},S7e=.3,TW={shiftX:0,shiftY:0,scaleX:1.25,scaleY:1.25},C7e={outputTensorSize:{width:224,height:224},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},k7e={outputTensorSize:{width:256,height:256},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},N7e={numLandmarks:39,inputImageWidth:256,inputImageHeight:256,visibilityActivation:"sigmoid",flipHorizontally:!1,flipVertically:!1},T7e={numLandmarks:39,inputImageWidth:1,inputImageHeight:1,visibilityActivation:"sigmoid",flipHorizontally:!1,flipVertically:!1},$7e={kernelSize:7,minConfidenceToRefine:.5},$W={alpha:.1},I7e={oneEuroFilter:{frequency:30,minCutOff:.05,beta:80,derivateCutOff:1,minAllowedObjectScale:1e-6}},E7e={oneEuroFilter:{frequency:30,minCutOff:.01,beta:10,derivateCutOff:1,minAllowedObjectScale:1e-6}},A7e={oneEuroFilter:{frequency:30,minCutOff:.1,beta:40,derivateCutOff:1,minAllowedObjectScale:1e-6,disableValueScaling:!0}},R7e={activation:"none"},O7e={combineWithPreviousRatio:.7},_7e=function(){function t(e){this.mask=e}return t.prototype.toCanvasImageSource=function(){return gn(this,void 0,void 0,function(){return yn(this,function(e){return[2,Cre(this.mask)]})})},t.prototype.toImageData=function(){return gn(this,void 0,void 0,function(){return yn(this,function(e){return[2,kre(this.mask)]})})},t.prototype.toTensor=function(){return gn(this,void 0,void 0,function(){return yn(this,function(e){return[2,this.mask]})})},t.prototype.getUnderlyingType=function(){return"tensor"},t}();function D7e(t){return Nre(t),"person"}var P7e=function(){function t(e,n,r,s,a,i){this.detectorModel=e,this.landmarkModel=n,this.enableSmoothing=r,this.enableSegmentation=s,this.smoothSegmentation=a,this.modelType=i,this.regionOfInterest=null,this.prevFilteredSegmentationMask=null,this.anchors=function(d){d.reduceBoxesInLowestLayer==null&&(d.reduceBoxesInLowestLayer=!1),d.interpolatedScaleAspectRatio==null&&(d.interpolatedScaleAspectRatio=1),d.fixedAnchorSize==null&&(d.fixedAnchorSize=!1);for(var h=[],m=0;m<d.numLayers;){for(var g=[],y=[],b=[],w=[],C=m;C<d.strides.length&&d.strides[C]===d.strides[m];){var k=vW(d.minScale,d.maxScale,C,d.strides.length);if(C===0&&d.reduceBoxesInLowestLayer)b.push(1),b.push(2),b.push(.5),w.push(.1),w.push(k),w.push(k);else{for(var T=0;T<d.aspectRatios.length;++T)b.push(d.aspectRatios[T]),w.push(k);if(d.interpolatedScaleAspectRatio>0){var N=C===d.strides.length-1?1:vW(d.minScale,d.maxScale,C+1,d.strides.length);w.push(Math.sqrt(k*N)),b.push(d.interpolatedScaleAspectRatio)}}C++}for(var I=0;I<b.length;++I){var A=Math.sqrt(b[I]);g.push(w[I]/A),y.push(w[I]*A)}var D=0,P=0;if(d.featureMapHeight.length>0)D=d.featureMapHeight[m],P=d.featureMapWidth[m];else{var R=d.strides[m];D=Math.ceil(d.inputSizeHeight/R),P=Math.ceil(d.inputSizeWidth/R)}for(var O=0;O<D;++O)for(var F=0;F<P;++F)for(var z=0;z<g.length;++z){var V={xCenter:(F+d.anchorOffsetX)/P,yCenter:(O+d.anchorOffsetY)/D,width:0,height:0};d.fixedAnchorSize?(V.width=1,V.height=1):(V.width=y[z],V.height=g[z]),h.push(V)}m=C}return h}(x7e);var o=fs(this.anchors.map(function(d){return d.width})),l=fs(this.anchors.map(function(d){return d.height})),u=fs(this.anchors.map(function(d){return d.xCenter})),c=fs(this.anchors.map(function(d){return d.yCenter}));this.anchorTensor={x:u,y:c,w:o,h:l},this.prevFilteredSegmentationMask=this.enableSegmentation?Zo([],[0,0]):null}return t.prototype.estimatePoses=function(e,n,r){return gn(this,void 0,void 0,function(){var s,a,i,o,l,u,c,d,h,m,g,y,b,w,C,k,T,N,I,A,D,P,R;return yn(this,function(O){switch(O.label){case 0:return s=function(F){var z;if((z=F==null?v7e:or({},F)).maxPoses==null&&(z.maxPoses=1),z.maxPoses<=0)throw new Error("Invalid maxPoses ".concat(z.maxPoses,". Should be > 0."));if(z.maxPoses>1)throw new Error("Multi-pose detection is not implemented yet. Please set maxPoses to 1.");return z}(n),e==null?(this.reset(),[2,[]]):(this.maxPoses=s.maxPoses,this.timestamp=r!=null?1e3*r:Are(e)?1e6*e.currentTime:null,a=Fm(e),i=be(function(){return nt(B4(e),"float32")}),(o=this.regionOfInterest)!=null?[3,2]:[4,this.detectPose(i)]);case 1:if((l=O.sent()).length===0)return this.reset(),i.dispose(),[2,[]];u=l[0],o=this.poseDetectionToRoi(u,a),O.label=2;case 2:return[4,this.poseLandmarksByRoi(o,i)];case 3:return c=O.sent(),i.dispose(),c==null?(this.reset(),[2,[]]):(d=c.landmarks,h=c.auxiliaryLandmarks,m=c.poseScore,g=c.worldLandmarks,y=c.segmentationMask,b=this.poseLandmarkFiltering(d,h,g,a),w=b.actualLandmarksFiltered,C=b.auxiliaryLandmarksFiltered,k=b.actualWorldLandmarksFiltered,T=this.poseLandmarksToRoi(C,a),this.regionOfInterest=T,N=this.smoothSegmentation&&y!=null?this.poseSegmentationFiltering(y):y,(I=w!=null?Rre(w,a):null)!=null&&I.forEach(function(F,z){F.name=qb[z]}),(A=k)!=null&&A.forEach(function(F,z){F.name=qb[z]}),D={score:m,keypoints:I,keypoints3D:A},N!==null&&(P=be(function(){var F=cs(N,2),z=Ll(F,[[0,0],[0,0],[0,1]]);return xj(z,[[0,0],[0,0],[0,2]],"symmetric")}),this.smoothSegmentation||Rt(N),R={maskValueToLabel:D7e,mask:new _7e(P)},D.segmentation=R),[2,[D]])}})})},t.prototype.poseSegmentationFiltering=function(e){var n=this.prevFilteredSegmentationMask;return n.size===0?this.prevFilteredSegmentationMask=e:(this.prevFilteredSegmentationMask=f7e(n,e,O7e),Rt(e)),Rt(n),this.prevFilteredSegmentationMask},t.prototype.dispose=function(){this.detectorModel.dispose(),this.landmarkModel.dispose(),Rt([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h,this.prevFilteredSegmentationMask])},t.prototype.reset=function(){this.regionOfInterest=null,this.enableSegmentation&&(Rt(this.prevFilteredSegmentationMask),this.prevFilteredSegmentationMask=Zo([],[0,0])),this.visibilitySmoothingFilterActual=null,this.visibilitySmoothingFilterAuxiliary=null,this.landmarksSmoothingFilterActual=null,this.landmarksSmoothingFilterAuxiliary=null},t.prototype.detectPose=function(e){return gn(this,void 0,void 0,function(){var n,r,s,a,i,o,l,u,c,d;return yn(this,function(h){switch(h.label){case 0:return n=jD(e,C7e),r=n.imageTensor,s=n.padding,a=this.detectorModel.predict(r),i=u7e(a),o=i.boxes,[4,h7e([l=i.logits,o],this.anchorTensor,w7e)];case 1:return(u=h.sent()).length===0?(Rt([r,a,l,o]),[2,u]):[4,c7e(u,this.maxPoses,S7e)];case 2:return c=h.sent(),d=function(m,g){m===void 0&&(m=[]);for(var y=g.left,b=g.top,w=g.left+g.right,C=g.top+g.bottom,k=0;k<m.length;k++){var T=m[k],N=T.locationData.relativeBoundingBox,I=(N.xMin-y)/(1-w),A=(N.yMin-b)/(1-C),D=N.width/(1-w),P=N.height/(1-C);N.xMin=I,N.yMin=A,N.width=D,N.height=P,N.xMax=I+D,N.yMax=A+P;var R=T.locationData.relativeKeypoints;R&&R.forEach(function(O){var F=(O.x-y)/(1-w),z=(O.y-b)/(1-C);O.x=F,O.y=z})}return m}(c,s),Rt([r,a,l,o]),[2,d]}})})},t.prototype.poseDetectionToRoi=function(e,n){return kW(nA(e,n,{rotationVectorEndKeypointIndex:1,rotationVectorStartKeypointIndex:0,rotationVectorTargetAngleDegree:90}),n,TW)},t.prototype.poseLandmarksByRoi=function(e,n){return gn(this,void 0,void 0,function(){var r,s,a,i,o,l,u,c,d,h,m,g,y,b;return yn(this,function(w){switch(w.label){case 0:if(r=Fm(n),s=jD(n,k7e,e),a=s.imageTensor,i=s.padding,o=s.transformationMatrix,this.modelType!=="lite"&&this.modelType!=="full"&&this.modelType!=="heavy")throw new Error("Model type must be one of lite, full or heavy,"+"but got ".concat(this.modelType));return l=["ld_3d","output_poseflag","activation_heatmap","world_3d"],this.enableSegmentation&&l.push("activation_segmentation"),u=this.landmarkModel.execute(a,l),[4,this.tensorsToPoseLandmarksAndSegmentation(u)];case 1:return(c=w.sent())==null?(Rt(u),Rt(a),[2,null]):(d=c.landmarks,h=c.auxiliaryLandmarks,m=c.poseScore,g=c.worldLandmarks,y=c.segmentationMask,[4,this.poseLandmarksAndSegmentationInverseProjection(r,e,i,o,d,h,g,y)]);case 2:return b=w.sent(),Rt(u),Rt(a),[2,or({poseScore:m},b)]}})})},t.prototype.poseLandmarksAndSegmentationInverseProjection=function(e,n,r,s,a,i,o,l){return gn(this,void 0,void 0,function(){var u,c,d,h,m,g;return yn(this,function(y){return u=SW(a,r),c=SW(i,r),d=xW(u,n),h=xW(c,n),m=function(b,w){for(var C=[],k=0,T=b;k<T.length;k++){var N=T[k],I=N.x,A=N.y,D=w.rotation,P=Math.cos(D)*I-Math.sin(D)*A,R=Math.sin(D)*I+Math.cos(D)*A,O=or({},N);O.x=P,O.y=R,C.push(O)}return C}(o,n),g=null,this.enableSegmentation&&(g=be(function(){var b=l.shape,w=b[0],C=b[1],k=function(I){var A=Ire(new Array(16).fill(0));A[0][0]=$a(I,0,0),A[1][0]=-$a(I,0,1),A[2][0]=$a(I,0,2),A[3][0]=-$a(I,0,3),A[0][2]=$a(I,2,0),A[1][2]=-$a(I,2,1),A[2][2]=$a(I,2,2),A[3][2]=-$a(I,2,3),A[0][1]=-$a(I,1,0),A[1][1]=$a(I,1,1),A[2][1]=-$a(I,1,2),A[3][1]=$a(I,1,3),A[0][3]=-$a(I,3,0),A[1][3]=$a(I,3,1),A[2][3]=-$a(I,3,2),A[3][3]=$a(I,3,3);for(var D=I[0][0]*A[0][0]+I[1][0]*A[0][1]+I[2][0]*A[0][2]+I[3][0]*A[0][3],P=0;P<A.length;P++)for(var R=0;R<A.length;R++)A[P][R]/=D;return A}(s),T=Zo($re(k,{width:C,height:w},e),[1,8]),N=[1,w,C,1];return $n(ja.transform(ce(l,N),T,"bilinear","constant",0,[e.height,e.width]),[0,3])}),Rt(l)),[2,{landmarks:d,auxiliaryLandmarks:h,worldLandmarks:m,segmentationMask:g}]})})},t.prototype.tensorsToPoseLandmarksAndSegmentation=function(e){return gn(this,void 0,void 0,function(){var n,r,s,a,i,o,l,u,c,d,h,m,g;return yn(this,function(y){switch(y.label){case 0:return n=e[0],r=e[1],s=e[2],a=e[3],i=this.enableSegmentation?e[4]:null,[4,r.data()];case 1:return(o=y.sent()[0])<.5?[2,null]:[4,CW(n,N7e)];case 2:return[4,d7e(y.sent(),s,$7e)];case 3:return l=y.sent(),u=l.slice(0,33),c=l.slice(33,35),[4,CW(a,T7e)];case 4:return d=y.sent(),h=d.slice(0,33),m=function(b,w,C){for(var k=[],T=0;T<b.length;T++){var N=or({},w[T]);N.score=b[T].score,k.push(N)}return k}(u,h),g=this.enableSegmentation?function(b,w,C){return be(function(){var k=$n(b,[0]),T=k.shape[2];if(T===1){var N=k;switch(w.activation){case"none":break;case"sigmoid":N=io(N);break;case"softmax":throw new Error("Softmax activation requires two channels.");default:throw new Error("Activation not supported (".concat(w.activation,")"))}var I=N;return $n(I,[2])}throw new Error("Unsupported number of tensor channels ".concat(T))})}(i,R7e):null,[2,{landmarks:u,auxiliaryLandmarks:c,poseScore:o,worldLandmarks:m,segmentationMask:g}]}})})},t.prototype.poseLandmarksToRoi=function(e,n){return kW(nA(wW(e),n,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:1,rotationVectorTargetAngleDegree:90}),n,TW)},t.prototype.poseLandmarkFiltering=function(e,n,r,s){var a,i,o;if(this.timestamp!=null&&this.enableSmoothing){var l=nA(wW(n),s,{rotationVectorEndKeypointIndex:0,rotationVectorStartKeypointIndex:1,rotationVectorTargetAngleDegree:90});this.visibilitySmoothingFilterActual==null&&(this.visibilitySmoothingFilterActual=new NW($W)),a=this.visibilitySmoothingFilterActual.apply(e),this.visibilitySmoothingFilterAuxiliary==null&&(this.visibilitySmoothingFilterAuxiliary=new NW($W)),i=this.visibilitySmoothingFilterAuxiliary.apply(n),o=this.visibilitySmoothingFilterActual.apply(r),this.landmarksSmoothingFilterActual==null&&(this.landmarksSmoothingFilterActual=new iA(I7e)),a=this.landmarksSmoothingFilterActual.apply(a,this.timestamp,s,!0,l),this.landmarksSmoothingFilterAuxiliary==null&&(this.landmarksSmoothingFilterAuxiliary=new iA(E7e)),i=this.landmarksSmoothingFilterAuxiliary.apply(i,this.timestamp,s,!0,l),this.worldLandmarksSmoothingFilterActual==null&&(this.worldLandmarksSmoothingFilterActual=new iA(A7e)),o=this.worldLandmarksSmoothingFilterActual.apply(r,this.timestamp)}else a=e,i=n,o=r;return{actualLandmarksFiltered:a,auxiliaryLandmarksFiltered:i,actualWorldLandmarksFiltered:o}},t}();function M7e(t){return gn(this,void 0,void 0,function(){var e,n,r,s,a,i;return yn(this,function(o){switch(o.label){case 0:return e=function(l){var u=or({},l??Up);if(u.enableSmoothing==null&&(u.enableSmoothing=Up.enableSmoothing),u.enableSegmentation==null&&(u.enableSegmentation=Up.enableSegmentation),u.smoothSegmentation==null&&(u.smoothSegmentation=Up.smoothSegmentation),u.modelType==null&&(u.modelType=Up.modelType),u.detectorModelUrl==null&&(u.detectorModelUrl=Up.detectorModelUrl),u.landmarkModelUrl==null)switch(u.modelType){case"lite":u.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/lite/2";break;case"heavy":u.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/heavy/2";break;case"full":default:u.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/blazepose_3d/landmark/full/2"}return u}(t),n=typeof e.detectorModelUrl=="string"&&e.detectorModelUrl.indexOf("https://tfhub.dev")>-1,r=typeof e.landmarkModelUrl=="string"&&e.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,Promise.all([Om(e.detectorModelUrl,{fromTFHub:n}),Om(e.landmarkModelUrl,{fromTFHub:r})])];case 1:return s=o.sent(),a=s[0],i=s[1],[2,new P7e(a,i,e.enableSmoothing,e.enableSegmentation,e.smoothSegmentation,e.modelType)]}})})}var ah,wu,Ore=function(){function t(e){(function(n){if(n.maxTracks<1)throw new Error("Must specify 'maxTracks' to be at least 1, but "+"encountered ".concat(n.maxTracks));if(n.maxAge<=0)throw new Error("Must specify 'maxAge' to be positive, but "+"encountered ".concat(n.maxAge));if(n.keypointTrackerParams!==void 0){if(n.keypointTrackerParams.keypointConfidenceThreshold<0||n.keypointTrackerParams.keypointConfidenceThreshold>1)throw new Error("Must specify 'keypointConfidenceThreshold' to be in the range [0, 1], but encountered "+"".concat(n.keypointTrackerParams.keypointConfidenceThreshold));if(n.keypointTrackerParams.minNumberOfKeypoints<1)throw new Error("Must specify 'minNumberOfKeypoints' to be at least 1, but "+"encountered ".concat(n.keypointTrackerParams.minNumberOfKeypoints));for(var r=0,s=n.keypointTrackerParams.keypointFalloff;r<s.length;r++){var a=s[r];if(a<=0)throw new Error("Must specify each keypoint falloff parameterto be positive "+"but encountered ".concat(a))}}})(e),this.tracks=[],this.maxTracks=e.maxTracks,this.maxAge=1e3*e.maxAge,this.minSimilarity=e.minSimilarity,this.nextID=1}return t.prototype.apply=function(e,n){this.filterOldTracks(n);var r=this.computeSimilarity(e);return this.assignTracks(e,r,n),this.updateTracks(n),e},t.prototype.getTracks=function(){return this.tracks.slice()},t.prototype.getTrackIDs=function(){return new Set(this.tracks.map(function(e){return e.id}))},t.prototype.filterOldTracks=function(e){var n=this;this.tracks=this.tracks.filter(function(r){return e-r.lastTimestamp<=n.maxAge})},t.prototype.assignTracks=function(e,n,r){for(var s=Array.from(Array(n[0].length).keys()),a=[],i=0,o=Array.from(Array(e.length).keys());i<o.length;i++){var l=o[i];if(s.length!==0){for(var u=-1,c=-1,d=0,h=s;d<h.length;d++){var m=h[d],g=n[l][m];g>=this.minSimilarity&&g>c&&(u=m,c=g)}if(u>=0){var y=this.tracks[u];y=Object.assign(y,this.createTrack(e[l],r,y.id)),e[l].id=y.id;var b=s.indexOf(u);s.splice(b,1)}else a.push(l)}else a.push(l)}for(var w=0,C=a;w<C.length;w++){l=C[w];var k=this.createTrack(e[l],r);this.tracks.push(k),e[l].id=k.id}},t.prototype.updateTracks=function(e){this.tracks.sort(function(n,r){return r.lastTimestamp-n.lastTimestamp}),this.tracks=this.tracks.slice(0,this.maxTracks)},t.prototype.createTrack=function(e,n,r){var s={id:r||this.nextTrackID(),lastTimestamp:n,keypoints:Kf([],e.keypoints,!0).map(function(a){return or({},a)})};return e.box!==void 0&&(s.box=or({},e.box)),s},t.prototype.nextTrackID=function(){var e=this.nextID;return this.nextID+=1,e},t.prototype.remove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.tracks=this.tracks.filter(function(r){return!e.includes(r.id)})},t.prototype.reset=function(){this.tracks=[]},t}(),j7e=function(t){function e(n){return t.call(this,n)||this}return Sre(e,t),e.prototype.computeSimilarity=function(n){var r=this;return n.length===0||this.tracks.length===0?[[]]:n.map(function(s){return r.tracks.map(function(a){return r.iou(s,a)})})},e.prototype.iou=function(n,r){var s=Math.max(n.box.xMin,r.box.xMin),a=Math.max(n.box.yMin,r.box.yMin),i=Math.min(n.box.xMax,r.box.xMax),o=Math.min(n.box.yMax,r.box.yMax);if(s>=i||a>=o)return 0;var l=(i-s)*(o-a);return l/(n.box.width*n.box.height+r.box.width*r.box.height-l)},e}(Ore),L7e=function(t){function e(n){var r=t.call(this,n)||this;return r.keypointThreshold=n.keypointTrackerParams.keypointConfidenceThreshold,r.keypointFalloff=n.keypointTrackerParams.keypointFalloff,r.minNumKeyoints=n.keypointTrackerParams.minNumberOfKeypoints,r}return Sre(e,t),e.prototype.computeSimilarity=function(n){if(n.length===0||this.tracks.length===0)return[[]];for(var r=[],s=0,a=n;s<a.length;s++){for(var i=a[s],o=[],l=0,u=this.tracks;l<u.length;l++){var c=u[l];o.push(this.oks(i,c))}r.push(o)}return r},e.prototype.oks=function(n,r){for(var s=this.area(r.keypoints)+1e-6,a=0,i=0,o=0;o<n.keypoints.length;++o){var l=n.keypoints[o],u=r.keypoints[o];if(!(l.score<this.keypointThreshold||u.score<this.keypointThreshold)){i+=1;var c=Math.pow(l.x-u.x,2)+Math.pow(l.y-u.y,2),d=2*this.keypointFalloff[o];a+=Math.exp(-1*c/(2*s*Math.pow(d,2)))}}return i<this.minNumKeyoints?0:a/i},e.prototype.area=function(n){var r=this,s=n.filter(function(l){return l.score>r.keypointThreshold}),a=Math.min.apply(Math,Kf([1],s.map(function(l){return l.x}),!1)),i=Math.max.apply(Math,Kf([0],s.map(function(l){return l.x}),!1)),o=Math.min.apply(Math,Kf([1],s.map(function(l){return l.y}),!1));return(i-a)*(Math.max.apply(Math,Kf([0],s.map(function(l){return l.y}),!1))-o)},e}(Ore);function F7e(t){switch(t){case wu.BlazePose:return qb.reduce(function(e,n,r){return e[n]=r,e},{});case wu.PoseNet:case wu.MoveNet:return Au.reduce(function(e,n,r){return e[n]=r,e},{});default:throw new Error("Model ".concat(t," is not supported."))}}(function(t){t.Keypoint="keypoint",t.BoundingBox="boundingBox"})(ah||(ah={})),function(t){t.MoveNet="MoveNet",t.BlazePose="BlazePose",t.PoseNet="PoseNet"}(wu||(wu={}));var IW=["SinglePose.Lightning","SinglePose.Thunder","MultiPose.Lightning"],_re={modelType:"SinglePose.Lightning",enableSmoothing:!0},EW={},AW={frequency:30,minCutOff:2.5,beta:300,derivateCutOff:2.5,thresholdCutOff:.5,thresholdBeta:5,disableValueScaling:!0},oA={maxTracks:18,maxAge:1e3,minSimilarity:.2,keypointTrackerParams:{keypointConfidenceThreshold:.3,keypointFalloff:[.026,.025,.025,.035,.035,.079,.079,.072,.072,.062,.062,.107,.107,.087,.087,.089,.089],minNumberOfKeypoints:4}},RW={maxTracks:18,maxAge:1e3,minSimilarity:.15,trackerParams:{}};function z7e(t,e,n,r){for(var s={},a=0,i=Au;a<i.length;a++){var o=i[a];s[o]=[e[n[o]].y*r.height,e[n[o]].x*r.width]}if(function(C,k){return(C[k.left_hip].score>.2||C[k.right_hip].score>.2)&&(C[k.left_shoulder].score>.2||C[k.right_shoulder].score>.2)}(e,n)){var l=(s.left_hip[0]+s.right_hip[0])/2,u=(s.left_hip[1]+s.right_hip[1])/2,c=function(C,k,T,N,I){for(var A=["left_shoulder","right_shoulder","left_hip","right_hip"],D=0,P=0,R=0;R<A.length;R++)(W=Math.abs(N-T[A[R]][0]))>D&&(D=W),(j=Math.abs(I-T[A[R]][1]))>P&&(P=j);for(var O=0,F=0,z=0,V=Object.keys(T);z<V.length;z++){var W,j,q=V[z];C[k[q]].score<.2||((W=Math.abs(N-T[q][0]))>O&&(O=W),(j=Math.abs(I-T[q][1]))>F&&(F=j))}return[D,P,O,F]}(e,n,s,l,u),d=c[0],h=c[1],m=c[2],g=c[3],y=Math.max(1.9*h,1.9*d,1.2*m,1.2*g),b=[l-(y=Math.min(y,Math.max(u,r.width-u,l,r.height-l))),u-y];if(y>Math.max(r.width,r.height)/2)return FD(t==null,r);var w=2*y;return{yMin:b[0]/r.height,xMin:b[1]/r.width,yMax:(b[0]+w)/r.height,xMax:(b[1]+w)/r.width,height:(b[0]+w)/r.height-b[0]/r.height,width:(b[1]+w)/r.width-b[1]/r.width}}return FD(t==null,r)}function FD(t,e){var n,r,s,a;return t?e.width>e.height?(n=1,r=e.height/e.width,s=0,a=(e.width/2-e.height/2)/e.width):(n=e.width/e.height,r=1,s=(e.height/2-e.width/2)/e.height,a=0):e.width>e.height?(n=e.width/e.height,r=1,s=(e.height/2-e.width/2)/e.height,a=0):(n=1,r=e.height/e.width,s=0,a=(e.width/2-e.height/2)/e.width),{yMin:s,xMin:a,yMax:s+n,xMax:a+r,height:n,width:r}}function B7e(t){var e,n=t==null?_re:or({},t);if(n.modelType==null)n.modelType="SinglePose.Lightning";else if(IW.indexOf(n.modelType)<0)throw new Error("Invalid architecture ".concat(n.modelType,". ")+"Should be one of ".concat(IW));if(n.enableSmoothing==null&&(n.enableSmoothing=!0),n.minPoseScore!=null&&(n.minPoseScore<0||n.minPoseScore>1))throw new Error("minPoseScore should be between 0.0 and 1.0");if(n.multiPoseMaxDimension!=null&&(n.multiPoseMaxDimension%32!=0||n.multiPoseMaxDimension<32))throw new Error("multiPoseMaxDimension must be a multiple of 32 and higher than 0");if(n.modelType==="MultiPose.Lightning"&&n.enableTracking==null&&(n.enableTracking=!0),n.modelType==="MultiPose.Lightning"&&n.enableTracking===!0)if(n.trackerType==null&&(n.trackerType=ah.BoundingBox),n.trackerType===ah.Keypoint)n.trackerConfig!=null?n.trackerConfig=function(r){var s=OW(oA,r);return s.keypointTrackerParams=or({},oA.keypointTrackerParams),r.keypointTrackerParams!=null&&(r.keypointTrackerParams.keypointConfidenceThreshold!=null&&(s.keypointTrackerParams.keypointConfidenceThreshold=r.keypointTrackerParams.keypointConfidenceThreshold),r.keypointTrackerParams.keypointFalloff!=null&&(s.keypointTrackerParams.keypointFalloff=r.keypointTrackerParams.keypointFalloff),r.keypointTrackerParams.minNumberOfKeypoints!=null&&(s.keypointTrackerParams.minNumberOfKeypoints=r.keypointTrackerParams.minNumberOfKeypoints)),s}(n.trackerConfig):n.trackerConfig=oA;else{if(n.trackerType!==ah.BoundingBox)throw new Error("Tracker type not supported by MoveNet");n.trackerConfig!=null?n.trackerConfig=(e=n.trackerConfig,OW(RW,e)):n.trackerConfig=RW}return n}function OW(t,e){var n={maxTracks:t.maxTracks,maxAge:t.maxAge,minSimilarity:t.minSimilarity};return e.maxTracks!=null&&(n.maxTracks=e.maxTracks),e.maxAge!=null&&(n.maxAge=e.maxAge),e.minSimilarity!=null&&(n.minSimilarity=e.minSimilarity),n}var U7e=function(){function t(e,n){this.moveNetModel=e,this.modelInputResolution={height:0,width:0},this.keypointIndexByName=F7e(wu.MoveNet),n.modelType==="SinglePose.Lightning"?(this.modelInputResolution.width=192,this.modelInputResolution.height=192):n.modelType==="SinglePose.Thunder"&&(this.modelInputResolution.width=256,this.modelInputResolution.height=256),this.multiPoseModel=n.modelType==="MultiPose.Lightning",this.multiPoseModel||(this.keypointFilter=new LD(AW),this.cropRegionFilterYMin=new vd(.9),this.cropRegionFilterXMin=new vd(.9),this.cropRegionFilterYMax=new vd(.9),this.cropRegionFilterXMax=new vd(.9)),this.enableSmoothing=n.enableSmoothing,n.minPoseScore?this.minPoseScore=n.minPoseScore:this.minPoseScore=.25,n.multiPoseMaxDimension?this.multiPoseMaxDimension=n.multiPoseMaxDimension:this.multiPoseMaxDimension=256,this.enableTracking=n.enableTracking,this.multiPoseModel&&this.enableTracking&&(n.trackerType===ah.Keypoint?this.tracker=new L7e(n.trackerConfig):n.trackerType===ah.BoundingBox&&(this.tracker=new j7e(n.trackerConfig)),this.enableSmoothing&&(this.keypointFilterMap=new Map))}return t.prototype.runSinglePersonPoseModel=function(e){return gn(this,void 0,void 0,function(){var n,r,s,a,i;return yn(this,function(o){switch(o.label){case 0:if((n=this.moveNetModel.execute(e)).shape.length!==4||n.shape[0]!==1||n.shape[1]!==1||n.shape[2]!==17||n.shape[3]!==3)throw n.dispose(),new Error("Unexpected output shape from model: [".concat(n.shape,"]"));return Eb()==="webgpu"?[3,1]:(r=n.dataSync(),[3,3]);case 1:return[4,n.data()];case 2:r=o.sent(),o.label=3;case 3:for(n.dispose(),s={keypoints:[],score:0},a=0,i=0;i<17;++i)s.keypoints[i]={y:r[3*i],x:r[3*i+1],score:r[3*i+2]},s.keypoints[i].score>.2&&(++a,s.score+=s.keypoints[i].score);return a>0&&(s.score/=a),[2,s]}})})},t.prototype.runMultiPersonPoseModel=function(e){return gn(this,void 0,void 0,function(){var n,r,s,a,i,o,l,u;return yn(this,function(c){switch(c.label){case 0:if((n=this.moveNetModel.execute(e)).shape.length!==3||n.shape[0]!==1||n.shape[2]!==56)throw n.dispose(),new Error("Unexpected output shape from model: [".concat(n.shape,"]"));return Eb()==="webgpu"?[3,1]:(r=n.dataSync(),[3,3]);case 1:return[4,n.data()];case 2:r=c.sent(),c.label=3;case 3:for(n.dispose(),s=[],a=r.length/56,i=0;i<a;++i)for(s[i]={keypoints:[]},o=56*i+51,s[i].box={yMin:r[o],xMin:r[o+1],yMax:r[o+2],xMax:r[o+3],width:r[o+3]-r[o+1],height:r[o+2]-r[o]},l=56*i+55,s[i].score=r[l],s[i].keypoints=[],u=0;u<17;++u)s[i].keypoints[u]={y:r[56*i+3*u],x:r[56*i+3*u+1],score:r[56*i+3*u+2]};return[2,s]}})})},t.prototype.estimatePoses=function(e,n,r){return n===void 0&&(n=EW),gn(this,void 0,void 0,function(){var s,a,i,o,l,u;return yn(this,function(c){switch(c.label){case 0:return n=function(d){return d==null?EW:or({},d)}(n),e==null?(this.reset(),[2,[]]):(r==null?Are(e)&&(r=1e6*e.currentTime):r*=1e3,s=B4(e),a=Fm(s),i=cs(s,0),e instanceof Pn||s.dispose(),o=[],this.multiPoseModel?[3,2]:[4,this.estimateSinglePose(i,a,r)]);case 1:return o=c.sent(),[3,4];case 2:return[4,this.estimateMultiplePoses(i,a,r)];case 3:o=c.sent(),c.label=4;case 4:for(l=0;l<o.length;++l)for(u=0;u<o[l].keypoints.length;++u)o[l].keypoints[u].name=Au[u],o[l].keypoints[u].y*=a.height,o[l].keypoints[u].x*=a.width;return[2,o]}})})},t.prototype.estimateSinglePose=function(e,n,r){return gn(this,void 0,void 0,function(){var s,a,i,o,l=this;return yn(this,function(u){switch(u.label){case 0:return this.cropRegion||(this.cropRegion=FD(this.cropRegion==null,n)),s=be(function(){var c=Zo([[l.cropRegion.yMin,l.cropRegion.xMin,l.cropRegion.yMax,l.cropRegion.xMax]]),d=es([1],"int32"),h=[l.modelInputResolution.height,l.modelInputResolution.width];return nt(ja.cropAndResize(e,c,d,h,"bilinear",0),"int32")}),e.dispose(),[4,this.runSinglePersonPoseModel(s)];case 1:if(a=u.sent(),s.dispose(),a.score<this.minPoseScore)return this.reset(),[2,[]];for(i=0;i<a.keypoints.length;++i)a.keypoints[i].y=this.cropRegion.yMin+a.keypoints[i].y*this.cropRegion.height,a.keypoints[i].x=this.cropRegion.xMin+a.keypoints[i].x*this.cropRegion.width;return r!=null&&this.enableSmoothing&&(a.keypoints=this.keypointFilter.apply(a.keypoints,r,1)),o=z7e(this.cropRegion,a.keypoints,this.keypointIndexByName,n),this.cropRegion=this.filterCropRegion(o),[2,[a]]}})})},t.prototype.estimateMultiplePoses=function(e,n,r){return gn(this,void 0,void 0,function(){var s,a,i,o,l,u,c,d,h,m,g,y=this;return yn(this,function(b){switch(b.label){case 0:return n.width>n.height?(a=this.multiPoseMaxDimension,i=Math.round(this.multiPoseMaxDimension*n.height/n.width),s=ja.resizeBilinear(e,[i,a]),l=a,u=32*Math.ceil(i/32),o=Ll(s,[[0,0],[0,u-i],[0,0],[0,0]])):(a=Math.round(this.multiPoseMaxDimension*n.width/n.height),i=this.multiPoseMaxDimension,s=ja.resizeBilinear(e,[i,a]),l=32*Math.ceil(a/32),u=i,o=Ll(s,[[0,0],[0,0],[0,l-a],[0,0]])),s.dispose(),e.dispose(),c=nt(o,"int32"),o.dispose(),[4,this.runMultiPersonPoseModel(c)];case 1:for(d=b.sent(),c.dispose(),d=d.filter(function(w){return w.score>=y.minPoseScore}),m=0;m<d.length;++m)for(h=0;h<d[m].keypoints.length;++h)d[m].keypoints[h].y*=u/i,d[m].keypoints[h].x*=l/a;if(this.enableTracking&&(this.tracker.apply(d,r),this.enableSmoothing)){for(m=0;m<d.length;++m)this.keypointFilterMap.has(d[m].id)||this.keypointFilterMap.set(d[m].id,new LD(AW)),d[m].keypoints=this.keypointFilterMap.get(d[m].id).apply(d[m].keypoints,r,1);g=this.tracker.getTrackIDs(),this.keypointFilterMap.forEach(function(w,C){g.has(C)||y.keypointFilterMap.delete(C)})}return[2,d]}})})},t.prototype.filterCropRegion=function(e){if(e){var n=this.cropRegionFilterYMin.apply(e.yMin),r=this.cropRegionFilterXMin.apply(e.xMin),s=this.cropRegionFilterYMax.apply(e.yMax),a=this.cropRegionFilterXMax.apply(e.xMax);return{yMin:n,xMin:r,yMax:s,xMax:a,height:s-n,width:a-r}}return this.cropRegionFilterYMin.reset(),this.cropRegionFilterXMin.reset(),this.cropRegionFilterYMax.reset(),this.cropRegionFilterXMax.reset(),null},t.prototype.dispose=function(){this.moveNetModel.dispose()},t.prototype.reset=function(){this.cropRegion=null,this.resetFilters()},t.prototype.resetFilters=function(){this.keypointFilter.reset(),this.cropRegionFilterYMin.reset(),this.cropRegionFilterXMin.reset(),this.cropRegionFilterYMax.reset(),this.cropRegionFilterXMax.reset()},t}();function V7e(t){return t===void 0&&(t=_re),gn(this,void 0,void 0,function(){var e,n,r,s;return yn(this,function(a){switch(a.label){case 0:return e=B7e(t),r=!0,e.modelUrl?(r=typeof e.modelUrl=="string"&&e.modelUrl.indexOf("https://tfhub.dev")>-1,[4,Om(e.modelUrl,{fromTFHub:r})]):[3,2];case 1:return n=a.sent(),[3,4];case 2:return s=void 0,e.modelType==="SinglePose.Lightning"?s="https://tfhub.dev/google/tfjs-model/movenet/singlepose/lightning/4":e.modelType==="SinglePose.Thunder"?s="https://tfhub.dev/google/tfjs-model/movenet/singlepose/thunder/4":e.modelType==="MultiPose.Lightning"&&(s="https://tfhub.dev/google/tfjs-model/movenet/multipose/lightning/1"),[4,Om(s,{fromTFHub:r})];case 3:n=a.sent(),a.label=4;case 4:return Eb()==="webgl"&&ve().set("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",0),[2,new U7e(n,e)]}})})}var _W={architecture:"MobileNetV1",outputStride:16,multiplier:.75,inputResolution:{height:257,width:257}},DW=["MobileNetV1","ResNet50"],PW={MobileNetV1:[8,16],ResNet50:[16]},W7e=[8,16,32],MW={MobileNetV1:[.5,.75,1],ResNet50:[1]},jW=[1,2,4],LW={maxPoses:1,flipHorizontal:!1},G7e={maxPoses:5,flipHorizontal:!1,scoreThreshold:.5,nmsRadius:20},H7e=[-123.15,-115.9,-103.06];function lA(t){return Math.floor(t/2)}var q7e=function(){function t(e,n){this.priorityQueue=new Array(e),this.numberOfElements=-1,this.getElementValue=n}return t.prototype.enqueue=function(e){this.priorityQueue[++this.numberOfElements]=e,this.swim(this.numberOfElements)},t.prototype.dequeue=function(){var e=this.priorityQueue[0];return this.exchange(0,this.numberOfElements--),this.sink(0),this.priorityQueue[this.numberOfElements+1]=null,e},t.prototype.empty=function(){return this.numberOfElements===-1},t.prototype.size=function(){return this.numberOfElements+1},t.prototype.all=function(){return this.priorityQueue.slice(0,this.numberOfElements+1)},t.prototype.max=function(){return this.priorityQueue[0]},t.prototype.swim=function(e){for(;e>0&&this.less(lA(e),e);)this.exchange(e,lA(e)),e=lA(e)},t.prototype.sink=function(e){for(;2*e<=this.numberOfElements;){var n=2*e;if(n<this.numberOfElements&&this.less(n,n+1)&&n++,!this.less(e,n))break;this.exchange(e,n),e=n}},t.prototype.getValueAt=function(e){return this.getElementValue(this.priorityQueue[e])},t.prototype.less=function(e,n){return this.getValueAt(e)<this.getValueAt(n)},t.prototype.exchange=function(e,n){var r=this.priorityQueue[e];this.priorityQueue[e]=this.priorityQueue[n],this.priorityQueue[n]=r},t}();function K7e(t,e,n,r,s,a){for(var i=a.shape,o=i[0],l=i[1],u=!0,c=Math.max(n-s,0),d=Math.min(n+s+1,o),h=c;h<d;++h){for(var m=Math.max(r-s,0),g=Math.min(r+s+1,l),y=m;y<g;++y)if(a.get(h,y,t)>e){u=!1;break}if(!u)break}return u}function X7e(t){return gn(this,void 0,void 0,function(){return yn(this,function(e){return[2,Promise.all(t.map(function(n){return n.buffer()}))]})})}function Dre(t,e,n,r){return{y:r.get(t,e,n),x:r.get(t,e,n+17)}}function Pre(t,e,n){var r=Dre(t.heatmapY,t.heatmapX,t.id,n),s=r.y,a=r.x;return{x:t.heatmapX*e+a,y:t.heatmapY*e+s}}function Mre(t,e,n,r){var s=n.x,a=n.y;return t.some(function(i){var o,l,u,c,d,h,m=i.keypoints;return o=a,l=s,u=m[r].y,c=m[r].x,(d=u-o)*d+(h=c-l)*h<=e})}var FW=Au.reduce(function(t,e,n){return t[e]=n,t},{}),jre=[["nose","left_eye"],["left_eye","left_ear"],["nose","right_eye"],["right_eye","right_ear"],["nose","left_shoulder"],["left_shoulder","left_elbow"],["left_elbow","left_wrist"],["left_shoulder","left_hip"],["left_hip","left_knee"],["left_knee","left_ankle"],["nose","right_shoulder"],["right_shoulder","right_elbow"],["right_elbow","right_wrist"],["right_shoulder","right_hip"],["right_hip","right_knee"],["right_knee","right_ankle"]].map(function(t){var e=t[0],n=t[1];return[FW[e],FW[n]]}),uA=jre.map(function(t){return t[1]}),zW=jre.map(function(t){return t[0]});function BW(t,e,n){return t<e?e:t>n?n:t}function cA(t,e,n,r){return{y:BW(Math.round(t.y/e),0,n-1),x:BW(Math.round(t.x/e),0,r-1)}}function UW(t,e){return{x:t.x+e.x,y:t.y+e.y}}function VW(t,e,n,r,s,a,i,o){o===void 0&&(o=2);for(var l=r.shape,u=l[0],c=l[1],d={y:e.y,x:e.x},h=UW(d,function(C,k,T){var N=T.shape[2]/2;return{y:T.get(k.y,k.x,C),x:T.get(k.y,k.x,N+C)}}(t,cA(d,a,u,c),i)),m=0;m<o;m++){var g=cA(h,a,u,c),y=Dre(g.y,g.x,n,s);h=UW({x:g.x*a,y:g.y*a},{x:y.x,y:y.y})}var b=cA(h,a,u,c),w=r.get(b.y,b.x,n);return{y:h.y,x:h.x,name:Au[n],score:w}}function Y7e(t,e,n,r,s,a){var i=e.shape[2],o=uA.length,l=new Array(i),u=t.part,c=t.score,d=Pre(u,r,n);l[u.id]={score:c,name:Au[u.id],y:d.y,x:d.x};for(var h=o-1;h>=0;--h){var m=uA[h],g=zW[h];l[m]&&!l[g]&&(l[g]=VW(h,l[m],g,e,n,r,a))}for(h=0;h<o;++h)m=zW[h],g=uA[h],l[m]&&!l[g]&&(l[g]=VW(h,l[m],g,e,n,r,s));return l}function Q7e(t,e,n){return n.reduce(function(r,s,a){var i=s.y,o=s.x,l=s.score;return Mre(t,e,{y:i,x:o},a)||(r+=l),r},0)/n.length}function Z7e(t,e,n,r,s,a,i,o){return i===void 0&&(i=.5),o===void 0&&(o=20),gn(this,void 0,void 0,function(){var l,u,c,d,h,m,g,y,b,w,C,k;return yn(this,function(T){switch(T.label){case 0:return[4,X7e([t,e,n,r])];case 1:for(l=T.sent(),u=l[0],c=l[1],d=l[2],h=l[3],m=[],g=function(N,I,A){for(var D=A.shape,P=D[0],R=D[1],O=D[2],F=new q7e(P*R*O,function(q){return q.score}),z=0;z<P;++z)for(var V=0;V<R;++V)for(var W=0;W<O;++W){var j=A.get(z,V,W);j<N||K7e(W,j,z,V,I,A)&&F.enqueue({score:j,part:{heatmapY:z,heatmapX:V,id:W}})}return F}(i,1,u),y=o*o;m.length<a&&!g.empty();)b=g.dequeue(),w=Pre(b.part,s,c),Mre(m,y,w,b.part.id)||(C=Y7e(b,u,c,s,d,h),k=Q7e(m,y,C),m.push({keypoints:C,score:k}));return[2,m]}})})}function Lre(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];switch(e.length){case 0:t="fn main() ";break;case 1:t="fn main(".concat(e[0]," : i32)");break;default:throw Error("Unreachable")}return t}var J7e=function(){function t(e){this.variableNames=["A","B"],this.size=!0,this.workgroupSize=[32,1,1],this.outputShape=[e[0],1],this.dispatchLayout=ht(this.outputShape),this.dispatch=st(this.dispatchLayout,this.outputShape,this.workgroupSize),this.shaderKey="getpointsConfidenceOp"}return t.prototype.getUserCode=function(){return`
        `.concat(Lre("index"),` {
          if (index < uniforms.size) {
            let y = B[index * 2];
            let x = B[index * 2 + 1];
            let outIndex = y * uniforms.aShape.x * uniforms.aShape.z + x * uniforms.aShape.z + index;
            result[index] = A[outIndex];
          }
        }
        `)},t}();function e9e(t,e){if(mh()instanceof Ny)return function(n,r){var s=mh(),a=new J7e(r.shape),i=s.runWebGPUProgram(a,[n,r],"float32");return Aa().makeTensorFromTensorInfo(i)}(t,e);throw new Error("getPointsConfidenceWebGPU is not supported in this backend!")}var t9e=function(){function t(e){if(this.variableNames=["A","B"],this.size=!0,this.supportedLastDimension=2,e.length!==2||e[1]!==this.supportedLastDimension)throw new Error("GetOffsetVectorsProgram only supports shape of [x, ".concat(this.supportedLastDimension,"], but current shape is ").concat(e));this.workgroupSize=[32,1,1],this.outputShape=e;var n=[e[0],1];this.dispatchLayout=ht(n),this.dispatch=st(this.dispatchLayout,n,this.workgroupSize),this.shaderKey="GetOffsetVectors"}return t.prototype.getUserCode=function(){return`
    fn getOffsetPoint(y: i32, x: i32, index: i32) -> vec2<i32> {
      let outIndexY = y * uniforms.bShape.x * uniforms.bShape.y + x * uniforms.bShape.y + index;
      let outIndexX = outIndexY + uniforms.bShape.z;
      let outY = i32(B[outIndexY]);
      let outX = i32(B[outIndexX]);
      return vec2<i32>(outY, outX);
    }

    `.concat(Lre("index"),` {
      if (index < uniforms.size) {
        let indexY = index * `).concat(this.supportedLastDimension,`;
        let indexX = indexY + 1;
        let heatmapY = A[indexY];
        let heatmapX = A[indexX];
        let out = getOffsetPoint(i32(heatmapY), i32(heatmapX), index);
        result[indexY] = f32(out[0]);
        result[indexX] = f32(out[1]);
      }
    }
    `)},t}();function n9e(t,e){if(mh()instanceof Ny)return function(n,r){var s=mh(),a=new t9e(n.shape),i=s.runWebGPUProgram(a,[n,r],"float32");return Aa().makeTensorFromTensorInfo(i)}(t,e);throw new Error("getOffsetVectorsGPU is not supported in this backend!")}function Fre(t){var e=t.shape,n=e[0],r=e[1],s=e[2];return be(function(){var a,i,o=ce(t,[n*r,s]),l=bh(o,0),u=cs(dt(l,It(r,"int32")),1),c=cs((a=l,i=r,be(function(){var d=dt(a,It(i,"int32"));return ft(a,ie(d,It(i,"int32")))})),1);return Rr([u,c],1)})}function r9e(t,e,n){return be(function(){var r=function(s,a){for(var i=[],o=0;o<Au.length;o++){var l=s.get(o,0).valueOf(),u=s.get(o,1).valueOf(),c=s9e(l,u,o,a),d=c.x,h=c.y;i.push(h),i.push(d)}return Zo(i,[Au.length,2])}(t,n);return je(nt(ie(t.toTensor(),It(e,"int32")),"float32"),r)})}function s9e(t,e,n,r){return{y:r.get(t,e,n),x:r.get(t,e,n+Au.length)}}function a9e(t,e,n){return gn(this,void 0,void 0,function(){var r,s,a,i,o,l,u,c,d,h;return yn(this,function(m){switch(m.label){case 0:return r=0,s=Fre(t),[4,Promise.all([t.buffer(),e.buffer(),s.buffer()])];case 1:return a=m.sent(),i=a[0],o=a[1],l=a[2],[4,(u=r9e(l,n,o)).buffer()];case 2:return c=m.sent(),d=Array.from(function(g,y){for(var b=y.shape[0],w=new Float32Array(b),C=0;C<b;C++){var k=y.get(C,0),T=y.get(C,1);w[C]=g.get(k,T,C)}return w}(i,l)),h=d.map(function(g,y){return r+=g,{y:c.get(y,0),x:c.get(y,1),score:g,name:Au[y]}}),s.dispose(),u.dispose(),[2,{keypoints:h,score:r/h.length}]}})})}function i9e(t,e,n){return gn(this,void 0,void 0,function(){var r,s,a;return yn(this,function(i){return r=Fre(t),s=function(o,l,u){return be(function(){var c=n9e(o,u);return je(nt(ie(o,It(l,"int32")),"float32"),c)})}(r,n,e),a=e9e(t,r),[2,[s,a]]})})}function WW(t,e){return(t-1)%e==0}var GW="https://storage.googleapis.com/tfjs-models/savedmodel/posenet/mobilenet/",HW="https://storage.googleapis.com/tfjs-models/savedmodel/posenet/resnet50/";function qW(t,e){return function(n,r){return(n-1)%r==0}(t,e)?t:Math.floor(t/e)*e+1}var KW=function(){function t(e,n){this.posenetModel=e;var r=this.posenetModel.inputs[0].shape;X(r[1]===-1&&r[2]===-1,function(){return"Input shape [".concat(r[1],", ").concat(r[2],"] ")+"must both be equal to or -1"});var s,a,i=(s=n.inputResolution,a=n.outputStride,{height:qW(s.height,a),width:qW(s.width,a)});(function(o){X(W7e.indexOf(o)>=0,function(){return"outputStride of ".concat(o," is invalid. ")+"It must be either 8 or 16."})})(n.outputStride),function(o,l){X(WW(o.height,l),function(){return"height of ".concat(o.height," is invalid for output stride ")+"".concat(l,".")}),X(WW(o.width,l),function(){return"width of ".concat(o.width," is invalid for output stride ")+"".concat(l,".")})}(i,n.outputStride),this.inputResolution=i,this.outputStride=n.outputStride,this.architecture=n.architecture}return t.prototype.estimatePoses=function(e,n){return n===void 0&&(n=LW),gn(this,void 0,void 0,function(){return yn(this,function(r){return[2,this.estimatePosesGPU(e,n,!1)]})})},t.prototype.estimatePosesGPU=function(e,n,r){return n===void 0&&(n=LW),r===void 0&&(r=!1),gn(this,void 0,void 0,function(){var s,a,i,o,l,u,c,d,h,m,g,y,b,w,C,k,T,N;return yn(this,function(I){switch(I.label){case 0:return s=function(A){var D=A;if(D.maxPoses==null&&(D.maxPoses=1),D.maxPoses<=0)throw new Error("Invalid maxPoses ".concat(D.maxPoses,". Should be > 0."));if(D.maxPoses>1){if((D=or(or({},G7e),D)).scoreThreshold<0||D.scoreThreshold>1)throw new Error("Invalid scoreThreshold ".concat(D.scoreThreshold,". ")+"Should be in range [0.0, 1.0]");if(D.nmsRadius<=0)throw new Error("Invalid nmsRadius ".concat(D.nmsRadius,"."))}return D}(n),e==null?[2,r?[[],[]]:[]]:(this.maxPoses=s.maxPoses,a=jD(e,{outputTensorSize:this.inputResolution,keepAspectRatio:!0,borderMode:"replicate"}),i=a.imageTensor,o=a.padding,l=this.architecture==="ResNet50"?je(i,H7e):Ere(i,[-1,1]),u=this.posenetModel.predict(l),this.architecture==="ResNet50"?(c=$n(u[2],[0]),d=$n(u[3],[0]),h=$n(u[0],[0]),m=$n(u[1],[0])):(c=$n(u[0],[0]),d=$n(u[1],[0]),h=$n(u[2],[0]),m=$n(u[3],[0])),g=io(d),this.maxPoses!==1?[3,5]:r?[4,i9e(g,c,this.outputStride)]:[3,2]);case 1:return b=I.sent(),C=b[0],w=b[1],y=[C,w],[3,4];case 2:return[4,a9e(g,c,this.outputStride)];case 3:C=I.sent(),y=[C],I.label=4;case 4:return[3,7];case 5:if(r)throw new Error("GPU renderer only supports single pose!");return[4,Z7e(g,c,h,m,this.outputStride,this.maxPoses,s.scoreThreshold,s.nmsRadius)];case 6:y=I.sent(),I.label=7;case 7:if(r){if(s.flipHorizontal===!0)throw new Error("flipHorizontal is not supported!");k=this.getCanvasInfo(Fm(e),this.inputResolution,o)}else N=Fm(e),T=function(A,D,P,R){var O=D.height,F=D.width,z=O/(P.height*(1-R.top-R.bottom)),V=F/(P.width*(1-R.left-R.right)),W=-R.top*P.height,j=-R.left*P.width;if(V===1&&z===1&&W===0&&j===0)return A;for(var q=0,Y=A;q<Y.length;q++)for(var Q=0,H=Y[q].keypoints;Q<H.length;Q++){var ee=H[Q];ee.x=(ee.x+j)*V,ee.y=(ee.y+W)*z}return A}(y,N,this.inputResolution,o),s.flipHorizontal&&(T=function(A,D){for(var P=0,R=A;P<R.length;P++)for(var O=0,F=R[P].keypoints;O<F.length;O++){var z=F[O];z.x=D.width-1-z.x}return A}(T,N));return i.dispose(),l.dispose(),Rt(u),c.dispose(),d.dispose(),h.dispose(),m.dispose(),g.dispose(),[2,r?[y,k]:T]}})})},t.prototype.getCanvasInfo=function(e,n,r){var s=e.height,a=e.width,i=s/(n.height*(1-r.top-r.bottom)),o=a/(n.width*(1-r.left-r.right)),l=-r.top*n.height;return[-r.left*n.width,l,o,i,e.width,e.height]},t.prototype.dispose=function(){this.posenetModel.dispose()},t.prototype.reset=function(){},t}();function o9e(t){return t===void 0&&(t=_W),gn(this,void 0,void 0,function(){var e,n,r,s,a;return yn(this,function(i){switch(i.label){case 0:return(e=function(c){var d=c||_W;if(d.architecture==null&&(d.architecture="MobileNetV1"),DW.indexOf(d.architecture)<0)throw new Error("Invalid architecture ".concat(d.architecture,". ")+"Should be one of ".concat(DW));if(d.inputResolution==null&&(d.inputResolution={height:257,width:257}),d.outputStride==null&&(d.outputStride=16),PW[d.architecture].indexOf(d.outputStride)<0)throw new Error("Invalid outputStride ".concat(d.outputStride,". ")+"Should be one of ".concat(PW[d.architecture]," ")+"for architecture ".concat(d.architecture,"."));if(d.multiplier==null&&(d.multiplier=1),MW[d.architecture].indexOf(d.multiplier)<0)throw new Error("Invalid multiplier ".concat(d.multiplier,". ")+"Should be one of ".concat(MW[d.architecture]," ")+"for architecture ".concat(d.architecture,"."));if(d.quantBytes==null&&(d.quantBytes=4),jW.indexOf(d.quantBytes)<0)throw new Error("Invalid quantBytes ".concat(d.quantBytes,". ")+"Should be one of ".concat(jW," ")+"for architecture ".concat(d.architecture,"."));if(d.architecture==="MobileNetV1"&&d.outputStride===32&&d.multiplier!==1)throw new Error("When using an output stride of 32, you must select 1 as the multiplier.");return d}(t)).architecture!=="ResNet50"?[3,2]:(o=e.outputStride,l=e.quantBytes,u="model-stride".concat(o,".json"),n=l===4?HW+"float/"+u:HW+"quant".concat(l,"/")+u,[4,Om(e.modelUrl||n)]);case 1:return r=i.sent(),[2,new KW(r,e)];case 2:return s=function(c,d,h){var m={1:"100",.75:"075",.5:"050"},g="model-stride".concat(c,".json");return h===4?GW+"float/".concat(m[d],"/")+g:GW+"quant".concat(h,"/").concat(m[d],"/")+g}(e.outputStride,e.multiplier,e.quantBytes),[4,Om(e.modelUrl||s)];case 3:return a=i.sent(),[2,new KW(a,e)]}var o,l,u})})}function l9e(t,e){return gn(this,void 0,void 0,function(){var n,r;return yn(this,function(s){switch(t){case wu.PoseNet:return[2,o9e(e)];case wu.BlazePose:if(r=void 0,(n=e)!=null){if(n.runtime==="tfjs")return[2,M7e(e)];if(n.runtime==="mediapipe")return[2,l7e(e)];r=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' "+"or 'mediapipe', but got ".concat(r));case wu.MoveNet:return[2,V7e(e)];default:throw new Error("".concat(t," is not a supported model name."))}})})}var u9e={modelType:{SINGLEPOSE_LIGHTNING:"SinglePose.Lightning"}};const c9e={chest:[{name:"Bench Press",caloriesPerMin:7},{name:"Incline Bench",caloriesPerMin:7},{name:"Chest Fly",caloriesPerMin:6},{name:"Push-up",caloriesPerMin:7},{name:"Cable Crossover",caloriesPerMin:6},{name:"Dips",caloriesPerMin:8}],back:[{name:"Pull-up",caloriesPerMin:8},{name:"Lat Pulldown",caloriesPerMin:7},{name:"Bent Over Row",caloriesPerMin:6.5},{name:"T-Bar Row",caloriesPerMin:6.5},{name:"Face Pull",caloriesPerMin:5},{name:"Deadlift",caloriesPerMin:9}],legs:[{name:"Squat",caloriesPerMin:8.5},{name:"Leg Press",caloriesPerMin:7},{name:"Lunges",caloriesPerMin:6.5},{name:"Leg Extension",caloriesPerMin:5},{name:"Leg Curl",caloriesPerMin:5},{name:"Calf Raise",caloriesPerMin:4}],shoulders:[{name:"Shoulder Press",caloriesPerMin:6},{name:"Lateral Raise",caloriesPerMin:4},{name:"Front Raise",caloriesPerMin:4},{name:"Upright Row",caloriesPerMin:5},{name:"Reverse Fly",caloriesPerMin:4}],arms:[{name:"Bicep Curl",caloriesPerMin:3.5},{name:"Tricep Extension",caloriesPerMin:3.5},{name:"Hammer Curl",caloriesPerMin:3.5},{name:"Skull Crusher",caloriesPerMin:4},{name:"Preacher Curl",caloriesPerMin:3.5}],core:[{name:"Plank",caloriesPerMin:4},{name:"Russian Twist",caloriesPerMin:4},{name:"Sit-up",caloriesPerMin:4},{name:"Leg Raise",caloriesPerMin:4},{name:"Mountain Climber",caloriesPerMin:5}],cardio:[{name:"Running",caloriesPerMin:10},{name:"Cycling",caloriesPerMin:8},{name:"Jumping Rope",caloriesPerMin:12},{name:"Rowing",caloriesPerMin:9},{name:"Stair Climber",caloriesPerMin:8},{name:"Elliptical",caloriesPerMin:7}]},dA=Object.values(c9e).flat(),XW=["Running","Cycling","Jumping Rope","Rowing","Stair Climber","Elliptical"],YW={Squat:{points:[6,5,12,11,14,13,16,15],connections:[[6,12],[5,11],[12,14],[14,16],[11,13],[13,15],[12,11],[14,13],[16,15]]},"Push-up":{points:[5,6,7,8,9,10],connections:[[5,7],[7,9],[6,8],[8,10],[5,6],[9,10]]},"Bench Press":{points:[5,6,7,8,9,10],connections:[[5,7],[7,9],[6,8],[8,10],[5,6],[9,10]]},"Incline Bench":{points:[5,6,7,8,9,10],connections:[[5,7],[7,9],[6,8],[8,10],[5,6],[9,10]]},"Chest Fly":{points:[5,6,7,8,9,10],connections:[[5,7],[7,9],[6,8],[8,10],[5,6],[9,10]]},"Cable Crossover":{points:[5,6,7,8,9,10],connections:[[5,7],[7,9],[6,8],[8,10],[5,6],[9,10]]},Dips:{points:[5,6,7,8,9,10],connections:[[5,7],[7,9],[6,8],[8,10],[5,6],[9,10]]},"Pull-up":{points:[5,6,7,8,9,10],connections:[[5,7],[7,9],[6,8],[8,10],[5,6],[9,10]]},"Lat Pulldown":{points:[5,6,7,8,9,10],connections:[[5,7],[7,9],[6,8],[8,10],[5,6],[9,10]]},"Bent Over Row":{points:[5,6,7,8,9,10,11,12],connections:[[5,7],[7,9],[6,8],[8,10],[5,6],[9,10],[11,12]]},"T-Bar Row":{points:[5,6,7,8,9,10,11,12],connections:[[5,7],[7,9],[6,8],[8,10],[5,6],[9,10],[11,12]]},"Face Pull":{points:[5,6,7,8,9,10],connections:[[5,7],[7,9],[6,8],[8,10],[5,6],[9,10]]},Deadlift:{points:[5,6,11,12,13,14,15,16],connections:[[5,11],[6,12],[11,13],[13,15],[12,14],[14,16],[11,12],[13,14],[15,16]]},"Leg Press":{points:[11,12,13,14,15,16],connections:[[11,13],[13,15],[12,14],[14,16],[11,12],[13,14],[15,16]]},Lunges:{points:[5,6,11,12,13,14,15,16],connections:[[5,11],[6,12],[11,13],[13,15],[12,14],[14,16],[11,12],[13,14],[15,16]]},"Leg Extension":{points:[11,13,15],connections:[[11,13],[13,15]]},"Leg Curl":{points:[11,13,15],connections:[[11,13],[13,15]]},"Calf Raise":{points:[11,13,15,12,14,16],connections:[[11,13],[13,15],[12,14],[14,16]]},"Shoulder Press":{points:[5,6,7,8,9,10],connections:[[5,7],[7,9],[6,8],[8,10],[5,6],[9,10]]},"Lateral Raise":{points:[5,6,7,8,9,10],connections:[[5,7],[7,9],[6,8],[8,10],[5,6],[9,10]]},"Front Raise":{points:[5,6,7,8,9,10],connections:[[5,7],[7,9],[6,8],[8,10],[5,6],[9,10]]},"Upright Row":{points:[5,6,7,8,9,10],connections:[[5,7],[7,9],[6,8],[8,10],[5,6],[9,10]]},"Reverse Fly":{points:[5,6,7,8,9,10],connections:[[5,7],[7,9],[6,8],[8,10],[5,6],[9,10]]},"Bicep Curl":{points:[5,7,9,6,8,10],connections:[[5,7],[7,9],[6,8],[8,10]]},"Tricep Extension":{points:[5,7,9,6,8,10],connections:[[5,7],[7,9],[6,8],[8,10]]},"Hammer Curl":{points:[5,7,9,6,8,10],connections:[[5,7],[7,9],[6,8],[8,10]]},"Skull Crusher":{points:[5,7,9,6,8,10],connections:[[5,7],[7,9],[6,8],[8,10]]},"Preacher Curl":{points:[5,7,9,6,8,10],connections:[[5,7],[7,9],[6,8],[8,10]]},Plank:{points:[5,6,11,12,15,16],connections:[[5,11],[6,12],[11,15],[12,16],[5,6],[11,12],[15,16]]},"Russian Twist":{points:[5,6,11,12],connections:[[5,11],[6,12],[5,6],[11,12]]},"Sit-up":{points:[5,6,11,12],connections:[[5,11],[6,12],[5,6],[11,12]]},"Leg Raise":{points:[11,12,15,16],connections:[[11,15],[12,16],[11,12],[15,16]]},"Mountain Climber":{points:[5,6,11,12,13,14,15,16],connections:[[5,11],[6,12],[11,13],[13,15],[12,14],[14,16],[11,12],[13,14],[15,16]]},Running:{points:[5,6,7,8,9,10,11,12,13,14,15,16],connections:[[5,7],[7,9],[6,8],[8,10],[5,6],[9,10],[11,13],[13,15],[12,14],[14,16],[11,12],[13,14],[15,16]]},Cycling:{points:[5,6,7,8,9,10,11,12,13,14,15,16],connections:[[5,7],[7,9],[6,8],[8,10],[5,6],[9,10],[11,13],[13,15],[12,14],[14,16],[11,12],[13,14],[15,16]]},"Jumping Rope":{points:[5,6,7,8,9,10],connections:[[5,7],[7,9],[6,8],[8,10],[5,6],[9,10]]},Rowing:{points:[5,6,7,8,9,10,11,12],connections:[[5,7],[7,9],[6,8],[8,10],[5,6],[9,10],[11,12]]},"Stair Climber":{points:[5,6,7,8,9,10,11,12,13,14,15,16],connections:[[5,7],[7,9],[6,8],[8,10],[5,6],[9,10],[11,13],[13,15],[12,14],[14,16],[11,12],[13,14],[15,16]]},Elliptical:{points:[5,6,7,8,9,10,11,12,13,14,15,16],connections:[[5,7],[7,9],[6,8],[8,10],[5,6],[9,10],[11,13],[13,15],[12,14],[14,16],[11,12],[13,14],[15,16]]},default:{points:Array.from({length:17},(t,e)=>e),connections:[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[11,12],[12,13],[13,14],[14,15],[15,16]]}};function us(t,e,n){const r={x:e.x-t.x,y:e.y-t.y},s={x:e.x-n.x,y:e.y-n.y},a=r.x*s.x+r.y*s.y,i=Math.sqrt(r.x*r.x+r.y*r.y),o=Math.sqrt(s.x*s.x+s.y*s.y),l=a/(i*o);return Math.acos(l)*(180/Math.PI)}const d9e={Squat:t=>{const e=us(t[12],t[14],t[16]),n=us(t[11],t[13],t[15]),r=(t[11].y+t[12].y)/2,s=(t[5].y+t[6].y)/2;let a=0;return e>60&&e<120&&(a+=.5),n>60&&n<120&&(a+=.5),r>s&&(a+=.5),Math.round(a/1.5*100)},"Push-up":t=>{const e=us(t[5],t[7],t[9]),n=us(t[6],t[8],t[10]),r=t[5].y,s=t[6].y,a=t[11].y,i=t[12].y,o=t[15].y,l=t[16].y;let u=0;return e>40&&e<160&&(u+=.5),n>40&&n<160&&(u+=.5),Math.abs(r-a)<.08&&Math.abs(a-o)<.08&&(u+=.5),Math.abs(s-i)<.08&&Math.abs(i-l)<.08&&(u+=.5),Math.round(u/2*100)},"Bicep Curl":t=>{const e=us(t[5],t[7],t[9]),n=us(t[6],t[8],t[10]);let r=0;return e<70&&(r+=.5),n<70&&(r+=.5),Math.round(r*100)},"Tricep Extension":t=>{const e=us(t[5],t[7],t[9]),n=us(t[6],t[8],t[10]);let r=0;return e>150&&(r+=.5),n>150&&(r+=.5),Math.round(r*100)},"Shoulder Press":t=>{const e=us(t[5],t[7],t[9]),n=us(t[6],t[8],t[10]),r=t[9].y,s=t[10].y,a=(t[0].y+t[1].y)/2;let i=0;return e>100&&(i+=.5),n>100&&(i+=.5),r<a&&s<a&&(i+=.5),Math.round(i/1.5*100)},"Lateral Raise":t=>{const e=t[5].y,n=t[6].y,r=t[9].y,s=t[10].y;let a=0;return Math.abs(e-r)<.08&&(a+=.5),Math.abs(n-s)<.08&&(a+=.5),Math.round(a*100)},Plank:t=>{const e=(t[11].y+t[12].y)/2,n=(t[5].y+t[6].y)/2,r=(t[15].y+t[16].y)/2,s=Math.abs(n-e),a=Math.abs(e-r);return s<.08&&a<.08?100:70},Deadlift:t=>{const e=us(t[11],t[5],t[6]),n=us(t[11],t[13],t[15]),r=us(t[12],t[14],t[16]);let s=0;return e>60&&e<140&&(s+=.5),n>60&&r>60&&(s+=.5),Math.round(s*100)},"Sit-up":t=>{const e=(t[11].y+t[12].y)/2;return(t[5].y+t[6].y)/2<e?100:70},Lunges:t=>{const e=us(t[11],t[13],t[15]),n=us(t[12],t[14],t[16]);let r=0;return e>60&&e<120&&(r+=.5),n>160&&(r+=.5),Math.round(r*100)},"Bench Press":t=>{const e=us(t[5],t[7],t[9]),n=us(t[6],t[8],t[10]);let r=0;return e>70&&e<120&&(r+=.5),n>70&&n<120&&(r+=.5),Math.round(r*100)},"Pull-up":t=>{const e=us(t[5],t[7],t[9]),n=us(t[6],t[8],t[10]),r=t[0].y,s=t[9].y,a=t[10].y;let i=0;return e>60&&n>60&&(i+=.5),r<s&&r<a&&(i+=.5),Math.round(i*100)},"Leg Raise":t=>{const e=t[11].y,n=t[12].y,r=t[15].y,s=t[16].y;let a=0;return r<e&&(a+=.5),s<n&&(a+=.5),Math.round(a*100)},"Mountain Climber":t=>{const e=us(t[11],t[13],t[15]),n=us(t[12],t[14],t[16]);return e<90||n<90?100:70},"Russian Twist":t=>{const e=t[5].x,n=t[6].x,r=t[11].x,s=t[12].x;return Math.abs(e-r)>.1&&Math.abs(n-s)>.1?100:70}},f9e=()=>{const t=L.useRef(null),e=L.useRef(null),[n,r]=L.useState(dA[0].name),[s,a]=L.useState(!1),[i,o]=L.useState(0),[l,u]=L.useState(0),[c,d]=L.useState(null),[h,m]=L.useState(null),[g,y]=L.useState(!1),[b,w]=L.useState(!1),C=L.useRef(null),k=L.useRef(null),[T,N]=L.useState(""),I=async()=>{w(!0),N("");try{const z=await navigator.mediaDevices.getUserMedia({video:!0});t.current.srcObject=z,y(!0),C.current=await l9e(wu.MoveNet,{modelType:u9e.modelType.SINGLEPOSE_LIGHTNING,enableSmoothing:!0}),t.current.width=640,t.current.height=480,e.current.width=640,e.current.height=480;const V=async()=>{if(!t.current||t.current.readyState!==4){k.current=requestAnimationFrame(V);return}const W=await C.current.estimatePoses(t.current);if(W&&W[0]&&W[0].keypoints){m(W[0].keypoints),D(W[0].keypoints);const j=d9e[n];j?d(j(W[0].keypoints)):XW.includes(n)?d(null):d(0)}else m(null),P();k.current=requestAnimationFrame(V)};V()}catch(z){console.error("Kamera açılırken hata:",z);let V="Kamera izni verilmedi veya bir hata oluştu. ";z.name==="NotAllowedError"?V+="Kamera erişimine izin verilmedi. Lütfen tarayıcı ayarlarından kameraya izin verin.":z.name==="NotFoundError"?V+="Kamera bulunamadı. Lütfen bir kamera bağlayın.":z.name==="NotReadableError"?V+="Kamera başka bir uygulama tarafından kullanılıyor olabilir.":z.name==="OverconstrainedError"?V+="Kamera donanım gereksinimleri karşılanamıyor.":z.message&&(V+=z.message),N(V),y(!1)}w(!1)},A=()=>{k.current&&cancelAnimationFrame(k.current),C.current&&C.current.dispose(),t.current&&t.current.srcObject&&(t.current.srcObject.getTracks().forEach(z=>z.stop()),t.current.srcObject=null),y(!1),m(null),P()},D=z=>{const V=e.current.getContext("2d");V.clearRect(0,0,e.current.width,e.current.height);const W=YW[n]||YW.default;W.connections.forEach(([j,q])=>{const Y=z[j],Q=z[q];Y&&Q&&Y.score>.3&&Q.score>.3&&(V.beginPath(),V.moveTo(Y.x,Y.y),V.lineTo(Q.x,Q.y),V.strokeStyle="#00FF00",V.lineWidth=4,V.stroke())}),W.points.forEach(j=>{const q=z[j];q&&q.score>.3&&(V.beginPath(),V.arc(q.x,q.y,6,0,2*Math.PI),V.fillStyle="#FF0000",V.fill())})},P=()=>{if(!e.current)return;e.current.getContext("2d").clearRect(0,0,e.current.width,e.current.height)};L.useEffect(()=>{let z=null;return s?z=setInterval(()=>{if(o(V=>V+1),n&&c>=70){const V=dA.find(W=>W.name===n);V&&u(W=>W+V.caloriesPerMin/60)}},1e3):clearInterval(z),()=>clearInterval(z)},[s,n,c]);const R=z=>{n!==z&&(r(z),a(!1),o(0),u(0),d(null),m(null),P())},O=async()=>{s?(a(!1),A()):(g||await I(),a(!0))},F=z=>{const V=Math.floor(z/60),W=z%60;return`${V.toString().padStart(2,"0")}:${W.toString().padStart(2,"0")}`};return L.useEffect(()=>()=>{A()},[]),v.jsxs("div",{className:"pt-4 pb-20 md:pb-6 px-4",children:[T&&v.jsx("div",{className:"mb-4 w-full flex justify-center",children:v.jsxs("div",{className:"bg-red-700 bg-opacity-90 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-4 max-w-xl w-full relative",children:[v.jsx("span",{className:"font-semibold",children:T}),v.jsx("button",{onClick:()=>N(""),className:"absolute right-3 top-1 text-white text-xl font-bold hover:text-yellow-300",children:"×"})]})}),v.jsx("div",{className:"w-full",children:v.jsxs("div",{className:"flex flex-col items-start mb-8",children:[v.jsxs(Vt,{to:"/dashboard",className:"flex items-center text-yellow-500 hover:text-yellow-400 font-semibold text-lg transition duration-200 mb-2",children:[v.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Panele Dön"]}),v.jsx("h1",{className:"text-3xl font-bold text-yellow-500 mb-1 text-left",children:"Hareket Algılama"}),v.jsx("p",{className:"text-gray-400 text-left",children:"Kameranızı açın ve hareketlerinizi gerçek zamanlı olarak analiz edin."})]})}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg rounded-xl shadow-lg p-6 border border-gray-800 lg:col-span-1",children:[v.jsx("h3",{className:"text-xl font-semibold text-gray-100 mb-4",children:"Egzersiz Seçimi"}),v.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2",children:dA.map(z=>v.jsx("div",{className:`p-3 rounded-lg ${n===z.name?"bg-yellow-900 bg-opacity-30 border-yellow-700":"bg-gray-800 bg-opacity-50 border-gray-700"} border cursor-pointer transition-all duration-200`,onClick:()=>R(z.name),children:v.jsx("div",{className:"flex justify-between items-center mb-1",children:v.jsx("h4",{className:"font-medium text-gray-200",children:z.name})})},z.name))})]}),v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg rounded-xl shadow-lg p-6 border border-gray-800 lg:col-span-2",children:[v.jsxs("div",{className:"mb-4 text-gray-300 flex justify-between items-center",children:[v.jsx("span",{children:"Canlı Kamera ve Hareket Algılama"}),n&&v.jsx("button",{onClick:O,className:`px-4 py-2 rounded-lg font-medium transition-colors ${s?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,disabled:b,children:s?"Durdur":b?"Kamera Açılıyor...":"Başlat"})]}),v.jsxs("div",{className:"relative bg-black rounded-lg w-full aspect-video flex items-center justify-center text-gray-500",children:[v.jsx("video",{ref:t,className:"absolute top-0 left-0 w-full h-full",autoPlay:!0,playsInline:!0,muted:!0,width:640,height:480,style:{display:g?"block":"none"}}),v.jsx("canvas",{ref:e,className:"absolute top-0 left-0 w-full h-full",width:640,height:480,style:{display:g?"block":"none"}}),!g&&v.jsx("span",{className:"z-10",children:"Kamera kapalı"}),n&&g&&h&&v.jsx("div",{className:"absolute top-4 right-4 bg-black bg-opacity-70 rounded-lg p-3 text-center z-20",children:XW.includes(n)?v.jsx("div",{className:"text-lg font-bold text-green-400 mt-1",children:"Aktif"}):v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"relative h-2 w-32 bg-gray-700 rounded-full overflow-hidden",children:v.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-yellow-600 to-green-500 rounded-full",style:{width:`${c??0}%`}})}),v.jsxs("div",{className:"text-lg font-bold text-yellow-500 mt-1",children:["%",Math.round(c??0)]})]})})]}),n&&v.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[v.jsxs("div",{className:"bg-gray-800 bg-opacity-70 rounded-lg p-4 flex items-center",children:[v.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 flex items-center justify-center mr-3",children:v.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),v.jsxs("div",{children:[v.jsx("div",{className:"text-sm text-gray-400",children:"Süre"}),v.jsx("div",{className:"text-xl font-bold text-white",children:F(i)})]})]}),v.jsxs("div",{className:"bg-gray-800 bg-opacity-70 rounded-lg p-4 flex items-center",children:[v.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 flex items-center justify-center mr-3",children:v.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),v.jsxs("div",{children:[v.jsx("div",{className:"text-sm text-gray-400",children:"Yakılan Kalori"}),v.jsxs("div",{className:"text-xl font-bold text-white",children:[l.toFixed(1)," kcal"]})]})]})]})]})]}),v.jsxs("div",{className:"mt-6 bg-gray-900 bg-opacity-60 backdrop-blur-lg rounded-xl shadow-lg p-6 border border-gray-800",children:[v.jsx("h3",{className:"text-xl font-semibold text-gray-100 mb-4",children:"Kullanım Talimatları"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-gray-300",children:[v.jsxs("div",{className:"bg-gray-800 bg-opacity-50 rounded-lg p-4",children:[v.jsxs("div",{className:"flex items-center mb-2",children:[v.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-900 flex items-center justify-center text-yellow-500 mr-2",children:"1"}),v.jsx("h4",{className:"font-medium",children:"Egzersiz Seç"})]}),v.jsx("p",{className:"text-sm text-gray-400",children:"Listeden yapmak istediğiniz egzersizi seçin."})]}),v.jsxs("div",{className:"bg-gray-800 bg-opacity-50 rounded-lg p-4",children:[v.jsxs("div",{className:"flex items-center mb-2",children:[v.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-900 flex items-center justify-center text-yellow-500 mr-2",children:"2"}),v.jsx("h4",{className:"font-medium",children:"Başlat'a Tıkla"})]}),v.jsx("p",{className:"text-sm text-gray-400",children:"Hazır olduğunuzda başlat düğmesine basarak egzersizi başlatın."})]}),v.jsxs("div",{className:"bg-gray-800 bg-opacity-50 rounded-lg p-4",children:[v.jsxs("div",{className:"flex items-center mb-2",children:[v.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-900 flex items-center justify-center text-yellow-500 mr-2",children:"3"}),v.jsx("h4",{className:"font-medium",children:"Hareketi Tamamla"})]}),v.jsx("p",{className:"text-sm text-gray-400",children:"Doğruluk oranını takip ederek hareketi doğru şekilde tamamlayın."})]})]})]})]})},h9e=()=>{const[t,e]=L.useState([]),[n,r]=L.useState(!0),[s,a]=L.useState(null);L.useEffect(()=>{(async()=>{try{const u={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}},c=await Ze.get("http://localhost:5000/api/friends",u);e(c.data)}catch(l){console.error("Arkadaş listesi alınamadı:",l),a("Arkadaş listesi yüklenemedi")}finally{r(!1)}})()},[]);const i=async o=>{try{const u={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}};await Ze.delete(`http://localhost:5000/api/friends/${o}`,u),e(t.filter(c=>c._id!==o))}catch(l){console.error("Arkadaş silinemedi:",l),a("Arkadaş silme işlemi başarısız oldu")}};return n?v.jsx("div",{className:"text-yellow-500 text-center my-10",children:"Arkadaşlar yükleniyor..."}):v.jsxs("div",{className:"pt-4 pb-20 md:pb-6 px-4",children:[v.jsxs(Vt,{to:"/dashboard",className:"mb-6 flex items-center text-yellow-500 hover:text-yellow-400 transition duration-200",children:[v.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Panele Dön"]}),v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg rounded-xl shadow-lg p-6 border border-gray-800",children:[v.jsx("h2",{className:"text-2xl font-bold mb-6 text-yellow-500",children:"Arkadaşlarım"}),s&&v.jsx("div",{className:"bg-red-900 bg-opacity-60 text-red-200 p-3 rounded-lg mb-4",children:s}),t.length===0?v.jsxs("div",{className:"text-gray-400 text-center py-8",children:[v.jsx("p",{children:"Henüz arkadaşınız bulunmuyor."}),v.jsx(Vt,{to:"/find-friends",className:"mt-3 px-4 py-2 bg-yellow-500 text-black font-medium rounded-lg hover:bg-yellow-400 transition duration-300 inline-block",children:"Arkadaş Bul"})]}):v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(o=>{var l,u,c,d;return v.jsxs("div",{className:"bg-gray-800 bg-opacity-50 rounded-lg p-4 border border-gray-700 flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 mr-3 flex items-center justify-center overflow-hidden",children:(l=o.profile)!=null&&l.photoUrl?v.jsx("img",{src:o.profile.photoUrl.startsWith("http")?o.profile.photoUrl:`http://localhost:5000${o.profile.photoUrl}`,alt:((u=o.profile)==null?void 0:u.fullName)||o.fullName,className:"w-full h-full object-cover"}):v.jsx("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-gray-200 font-medium",children:((c=o.profile)==null?void 0:c.fullName)||o.fullName}),v.jsx("p",{className:"text-gray-400 text-sm",children:(d=o.profile)!=null&&d.goalType?p9e(o.profile.goalType):"Hedef belirtilmemiş"})]})]}),v.jsxs("div",{className:"flex space-x-2",children:[v.jsx(Vt,{to:`/profile/${o._id}`,className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:v.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),v.jsx("button",{onClick:()=>i(o._id),className:"p-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:v.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},o._id)})})]})]})},p9e=t=>({fat_loss:"Yağ Yakma",muscle_gain:"Kas Kütlesi Kazanma",maintenance:"Mevcut Formu Koruma",endurance:"Dayanıklılık Artırma"})[t]||"Belirlenmemiş",zre=6048e5,m9e=864e5,QW=Symbol.for("constructDateFrom");function Ru(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&QW in t?t[QW](e):t instanceof Date?new t.constructor(e):new Date(e)}function ol(t,e){return Ru(e||t,t)}function g9e(t,e,n){const r=ol(t,n==null?void 0:n.in);if(isNaN(e))return Ru(t,NaN);if(!e)return r;const s=r.getDate(),a=Ru(t,r.getTime());a.setMonth(r.getMonth()+e+1,0);const i=a.getDate();return s>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),s),r)}let y9e={};function dT(){return y9e}function Kb(t,e){var o,l,u,c;const n=dT(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((c=(u=n.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??0,s=ol(t,e==null?void 0:e.in),a=s.getDay(),i=(a<r?7:0)+a-r;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function _2(t,e){return Kb(t,{...e,weekStartsOn:1})}function Bre(t,e){const n=ol(t,e==null?void 0:e.in),r=n.getFullYear(),s=Ru(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=_2(s),i=Ru(n,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=_2(i);return n.getTime()>=a.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function ZW(t){const e=ol(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function b9e(t,...e){const n=Ru.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function JW(t,e){const n=ol(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function x9e(t,e,n){const[r,s]=b9e(n==null?void 0:n.in,t,e),a=JW(r),i=JW(s),o=+a-ZW(a),l=+i-ZW(i);return Math.round((o-l)/m9e)}function v9e(t,e){const n=Bre(t,e),r=Ru(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),_2(r)}function w9e(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function S9e(t){return!(!w9e(t)&&typeof t!="number"||isNaN(+ol(t)))}function C9e(t,e){const n=ol(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const k9e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},N9e=(t,e,n)=>{let r;const s=k9e[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function gm(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const T9e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},$9e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},I9e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},E9e={date:gm({formats:T9e,defaultWidth:"full"}),time:gm({formats:$9e,defaultWidth:"full"}),dateTime:gm({formats:I9e,defaultWidth:"full"})},A9e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},R9e=(t,e,n,r)=>A9e[t];function hu(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):i;s=t.formattingValues[o]||t.formattingValues[i]}else{const i=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[o]||t.values[i]}const a=t.argumentCallback?t.argumentCallback(e):e;return s[a]}}const O9e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},_9e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},D9e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},P9e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},M9e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},j9e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},L9e=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},F9e={ordinalNumber:L9e,era:hu({values:O9e,defaultWidth:"wide"}),quarter:hu({values:_9e,defaultWidth:"wide",argumentCallback:t=>t-1}),month:hu({values:D9e,defaultWidth:"wide"}),day:hu({values:P9e,defaultWidth:"wide"}),dayPeriod:hu({values:M9e,defaultWidth:"wide",formattingValues:j9e,defaultFormattingWidth:"wide"})};function pu(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;const i=a[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?B9e(o,d=>d.test(i)):z9e(o,d=>d.test(i));let u;u=t.valueCallback?t.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const c=e.slice(i.length);return{value:u,rest:c}}}function z9e(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function B9e(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Ure(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],a=e.match(t.parsePattern);if(!a)return null;let i=t.valueCallback?t.valueCallback(a[0]):a[0];i=n.valueCallback?n.valueCallback(i):i;const o=e.slice(s.length);return{value:i,rest:o}}}const U9e=/^(\d+)(th|st|nd|rd)?/i,V9e=/\d+/i,W9e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},G9e={any:[/^b/i,/^(a|c)/i]},H9e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},q9e={any:[/1/i,/2/i,/3/i,/4/i]},K9e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},X9e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Y9e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Q9e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Z9e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},J9e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},eKe={ordinalNumber:Ure({matchPattern:U9e,parsePattern:V9e,valueCallback:t=>parseInt(t,10)}),era:pu({matchPatterns:W9e,defaultMatchWidth:"wide",parsePatterns:G9e,defaultParseWidth:"any"}),quarter:pu({matchPatterns:H9e,defaultMatchWidth:"wide",parsePatterns:q9e,defaultParseWidth:"any",valueCallback:t=>t+1}),month:pu({matchPatterns:K9e,defaultMatchWidth:"wide",parsePatterns:X9e,defaultParseWidth:"any"}),day:pu({matchPatterns:Y9e,defaultMatchWidth:"wide",parsePatterns:Q9e,defaultParseWidth:"any"}),dayPeriod:pu({matchPatterns:Z9e,defaultMatchWidth:"any",parsePatterns:J9e,defaultParseWidth:"any"})},tKe={code:"en-US",formatDistance:N9e,formatLong:E9e,formatRelative:R9e,localize:F9e,match:eKe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function nKe(t,e){const n=ol(t,e==null?void 0:e.in);return x9e(n,C9e(n))+1}function rKe(t,e){const n=ol(t,e==null?void 0:e.in),r=+_2(n)-+v9e(n);return Math.round(r/zre)+1}function Vre(t,e){var c,d,h,m;const n=ol(t,e==null?void 0:e.in),r=n.getFullYear(),s=dT(),a=(e==null?void 0:e.firstWeekContainsDate)??((d=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(h=s.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,i=Ru((e==null?void 0:e.in)||t,0);i.setFullYear(r+1,0,a),i.setHours(0,0,0,0);const o=Kb(i,e),l=Ru((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,a),l.setHours(0,0,0,0);const u=Kb(l,e);return+n>=+o?r+1:+n>=+u?r:r-1}function sKe(t,e){var o,l,u,c;const n=dT(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((c=(u=n.locale)==null?void 0:u.options)==null?void 0:c.firstWeekContainsDate)??1,s=Vre(t,e),a=Ru((e==null?void 0:e.in)||t,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),Kb(a,e)}function aKe(t,e){const n=ol(t,e==null?void 0:e.in),r=+Kb(n,e)-+sKe(n,e);return Math.round(r/zre)+1}function qn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const fd={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return qn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):qn(n+1,2)},d(t,e){return qn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return qn(t.getHours()%12||12,e.length)},H(t,e){return qn(t.getHours(),e.length)},m(t,e){return qn(t.getMinutes(),e.length)},s(t,e){return qn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return qn(s,e.length)}},Vp={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},e6={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return fd.y(t,e)},Y:function(t,e,n,r){const s=Vre(t,r),a=s>0?s:1-s;if(e==="YY"){const i=a%100;return qn(i,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):qn(a,e.length)},R:function(t,e){const n=Bre(t);return qn(n,e.length)},u:function(t,e){const n=t.getFullYear();return qn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return qn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return qn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return fd.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return qn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=aKe(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):qn(s,e.length)},I:function(t,e,n){const r=rKe(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):qn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):fd.d(t,e)},D:function(t,e,n){const r=nKe(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):qn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return qn(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return qn(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return qn(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Vp.noon:r===0?s=Vp.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Vp.evening:r>=12?s=Vp.afternoon:r>=4?s=Vp.morning:s=Vp.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return fd.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):fd.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):qn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):qn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):fd.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):fd.s(t,e)},S:function(t,e){return fd.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return n6(r);case"XXXX":case"XX":return Pf(r);case"XXXXX":case"XXX":default:return Pf(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return n6(r);case"xxxx":case"xx":return Pf(r);case"xxxxx":case"xxx":default:return Pf(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+t6(r,":");case"OOOO":default:return"GMT"+Pf(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+t6(r,":");case"zzzz":default:return"GMT"+Pf(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return qn(r,e.length)},T:function(t,e,n){return qn(+t,e.length)}};function t6(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),a=r%60;return a===0?n+String(s):n+String(s)+e+qn(a,2)}function n6(t,e){return t%60===0?(t>0?"-":"+")+qn(Math.abs(t)/60,2):Pf(t,e)}function Pf(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=qn(Math.trunc(r/60),2),a=qn(r%60,2);return n+s+e+a}const r6=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Wre=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},iKe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return r6(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",r6(r,e)).replace("{{time}}",Wre(s,e))},oKe={p:Wre,P:iKe},lKe=/^D+$/,uKe=/^Y+$/,cKe=["D","DD","YY","YYYY"];function dKe(t){return lKe.test(t)}function fKe(t){return uKe.test(t)}function hKe(t,e,n){const r=pKe(t,e,n);if(console.warn(r),cKe.includes(t))throw new RangeError(r)}function pKe(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const mKe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,gKe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yKe=/^'([^]*?)'?$/,bKe=/''/g,xKe=/[a-zA-Z]/;function vKe(t,e,n){var c,d,h,m,g,y,b,w;const r=dT(),s=(n==null?void 0:n.locale)??r.locale??tKe,a=(n==null?void 0:n.firstWeekContainsDate)??((d=(c=n==null?void 0:n.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(h=r.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,i=(n==null?void 0:n.weekStartsOn)??((y=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:y.weekStartsOn)??r.weekStartsOn??((w=(b=r.locale)==null?void 0:b.options)==null?void 0:w.weekStartsOn)??0,o=ol(t,n==null?void 0:n.in);if(!S9e(o))throw new RangeError("Invalid time value");let l=e.match(gKe).map(C=>{const k=C[0];if(k==="p"||k==="P"){const T=oKe[k];return T(C,s.formatLong)}return C}).join("").match(mKe).map(C=>{if(C==="''")return{isToken:!1,value:"'"};const k=C[0];if(k==="'")return{isToken:!1,value:wKe(C)};if(e6[k])return{isToken:!0,value:C};if(k.match(xKe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+k+"`");return{isToken:!1,value:C}});s.localize.preprocessor&&(l=s.localize.preprocessor(o,l));const u={firstWeekContainsDate:a,weekStartsOn:i,locale:s};return l.map(C=>{if(!C.isToken)return C.value;const k=C.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&fKe(k)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&dKe(k))&&hKe(k,e,String(t));const T=e6[k[0]];return T(o,k,s.localize,u)}).join("")}function wKe(t){const e=t.match(yKe);return e?e[1].replace(bKe,"'"):t}function tS(t,e,n){return g9e(t,-e,n)}const SKe={lessThanXSeconds:{one:"bir saniyeden az",other:"{{count}} saniyeden az"},xSeconds:{one:"1 saniye",other:"{{count}} saniye"},halfAMinute:"yarım dakika",lessThanXMinutes:{one:"bir dakikadan az",other:"{{count}} dakikadan az"},xMinutes:{one:"1 dakika",other:"{{count}} dakika"},aboutXHours:{one:"yaklaşık 1 saat",other:"yaklaşık {{count}} saat"},xHours:{one:"1 saat",other:"{{count}} saat"},xDays:{one:"1 gün",other:"{{count}} gün"},aboutXWeeks:{one:"yaklaşık 1 hafta",other:"yaklaşık {{count}} hafta"},xWeeks:{one:"1 hafta",other:"{{count}} hafta"},aboutXMonths:{one:"yaklaşık 1 ay",other:"yaklaşık {{count}} ay"},xMonths:{one:"1 ay",other:"{{count}} ay"},aboutXYears:{one:"yaklaşık 1 yıl",other:"yaklaşık {{count}} yıl"},xYears:{one:"1 yıl",other:"{{count}} yıl"},overXYears:{one:"1 yıldan fazla",other:"{{count}} yıldan fazla"},almostXYears:{one:"neredeyse 1 yıl",other:"neredeyse {{count}} yıl"}},CKe=(t,e,n)=>{let r;const s=SKe[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?r+" sonra":r+" önce":r},kKe={full:"d MMMM y EEEE",long:"d MMMM y",medium:"d MMM y",short:"dd.MM.yyyy"},NKe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},TKe={full:"{{date}} 'saat' {{time}}",long:"{{date}} 'saat' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$Ke={date:gm({formats:kKe,defaultWidth:"full"}),time:gm({formats:NKe,defaultWidth:"full"}),dateTime:gm({formats:TKe,defaultWidth:"full"})},IKe={lastWeek:"'geçen hafta' eeee 'saat' p",yesterday:"'dün saat' p",today:"'bugün saat' p",tomorrow:"'yarın saat' p",nextWeek:"eeee 'saat' p",other:"P"},EKe=(t,e,n,r)=>IKe[t],AKe={narrow:["MÖ","MS"],abbreviated:["MÖ","MS"],wide:["Milattan Önce","Milattan Sonra"]},RKe={narrow:["1","2","3","4"],abbreviated:["1Ç","2Ç","3Ç","4Ç"],wide:["İlk çeyrek","İkinci Çeyrek","Üçüncü çeyrek","Son çeyrek"]},OKe={narrow:["O","Ş","M","N","M","H","T","A","E","E","K","A"],abbreviated:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],wide:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"]},_Ke={narrow:["P","P","S","Ç","P","C","C"],short:["Pz","Pt","Sa","Ça","Pe","Cu","Ct"],abbreviated:["Paz","Pzt","Sal","Çar","Per","Cum","Cts"],wide:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"]},DKe={narrow:{am:"öö",pm:"ös",midnight:"gy",noon:"ö",morning:"sa",afternoon:"ös",evening:"ak",night:"ge"},abbreviated:{am:"ÖÖ",pm:"ÖS",midnight:"gece yarısı",noon:"öğle",morning:"sabah",afternoon:"öğleden sonra",evening:"akşam",night:"gece"},wide:{am:"Ö.Ö.",pm:"Ö.S.",midnight:"gece yarısı",noon:"öğle",morning:"sabah",afternoon:"öğleden sonra",evening:"akşam",night:"gece"}},PKe={narrow:{am:"öö",pm:"ös",midnight:"gy",noon:"ö",morning:"sa",afternoon:"ös",evening:"ak",night:"ge"},abbreviated:{am:"ÖÖ",pm:"ÖS",midnight:"gece yarısı",noon:"öğlen",morning:"sabahleyin",afternoon:"öğleden sonra",evening:"akşamleyin",night:"geceleyin"},wide:{am:"ö.ö.",pm:"ö.s.",midnight:"gece yarısı",noon:"öğlen",morning:"sabahleyin",afternoon:"öğleden sonra",evening:"akşamleyin",night:"geceleyin"}},MKe=(t,e)=>Number(t)+".",jKe={ordinalNumber:MKe,era:hu({values:AKe,defaultWidth:"wide"}),quarter:hu({values:RKe,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:hu({values:OKe,defaultWidth:"wide"}),day:hu({values:_Ke,defaultWidth:"wide"}),dayPeriod:hu({values:DKe,defaultWidth:"wide",formattingValues:PKe,defaultFormattingWidth:"wide"})},LKe=/^(\d+)(\.)?/i,FKe=/\d+/i,zKe={narrow:/^(mö|ms)/i,abbreviated:/^(mö|ms)/i,wide:/^(milattan önce|milattan sonra)/i},BKe={any:[/(^mö|^milattan önce)/i,/(^ms|^milattan sonra)/i]},UKe={narrow:/^[1234]/i,abbreviated:/^[1234]ç/i,wide:/^((i|İ)lk|(i|İ)kinci|üçüncü|son) çeyrek/i},VKe={any:[/1/i,/2/i,/3/i,/4/i],abbreviated:[/1ç/i,/2ç/i,/3ç/i,/4ç/i],wide:[/^(i|İ)lk çeyrek/i,/(i|İ)kinci çeyrek/i,/üçüncü çeyrek/i,/son çeyrek/i]},WKe={narrow:/^[oşmnhtaek]/i,abbreviated:/^(oca|şub|mar|nis|may|haz|tem|ağu|eyl|eki|kas|ara)/i,wide:/^(ocak|şubat|mart|nisan|mayıs|haziran|temmuz|ağustos|eylül|ekim|kasım|aralık)/i},GKe={narrow:[/^o/i,/^ş/i,/^m/i,/^n/i,/^m/i,/^h/i,/^t/i,/^a/i,/^e/i,/^e/i,/^k/i,/^a/i],any:[/^o/i,/^ş/i,/^mar/i,/^n/i,/^may/i,/^h/i,/^t/i,/^ağ/i,/^ey/i,/^ek/i,/^k/i,/^ar/i]},HKe={narrow:/^[psçc]/i,short:/^(pz|pt|sa|ça|pe|cu|ct)/i,abbreviated:/^(paz|pzt|sal|çar|per|cum|cts)/i,wide:/^(pazar(?!tesi)|pazartesi|salı|çarşamba|perşembe|cuma(?!rtesi)|cumartesi)/i},qKe={narrow:[/^p/i,/^p/i,/^s/i,/^ç/i,/^p/i,/^c/i,/^c/i],any:[/^pz/i,/^pt/i,/^sa/i,/^ça/i,/^pe/i,/^cu/i,/^ct/i],wide:[/^pazar(?!tesi)/i,/^pazartesi/i,/^salı/i,/^çarşamba/i,/^perşembe/i,/^cuma(?!rtesi)/i,/^cumartesi/i]},KKe={narrow:/^(öö|ös|gy|ö|sa|ös|ak|ge)/i,any:/^(ö\.?\s?[ös]\.?|öğleden sonra|gece yarısı|öğle|(sabah|öğ|akşam|gece)(leyin))/i},XKe={any:{am:/^ö\.?ö\.?/i,pm:/^ö\.?s\.?/i,midnight:/^(gy|gece yarısı)/i,noon:/^öğ/i,morning:/^sa/i,afternoon:/^öğleden sonra/i,evening:/^ak/i,night:/^ge/i}},YKe={ordinalNumber:Ure({matchPattern:LKe,parsePattern:FKe,valueCallback:function(t){return parseInt(t,10)}}),era:pu({matchPatterns:zKe,defaultMatchWidth:"wide",parsePatterns:BKe,defaultParseWidth:"any"}),quarter:pu({matchPatterns:UKe,defaultMatchWidth:"wide",parsePatterns:VKe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:pu({matchPatterns:WKe,defaultMatchWidth:"wide",parsePatterns:GKe,defaultParseWidth:"any"}),day:pu({matchPatterns:HKe,defaultMatchWidth:"wide",parsePatterns:qKe,defaultParseWidth:"any"}),dayPeriod:pu({matchPatterns:KKe,defaultMatchWidth:"any",parsePatterns:XKe,defaultParseWidth:"any"})},QKe={code:"tr",formatDistance:CKe,formatLong:$Ke,formatRelative:EKe,localize:jKe,match:YKe,options:{weekStartsOn:1,firstWeekContainsDate:1}};function Gre(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=Gre(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function mt(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=Gre(t))&&(r&&(r+=" "),r+=e);return r}var fA,s6;function ji(){if(s6)return fA;s6=1;var t=Array.isArray;return fA=t,fA}var hA,a6;function Hre(){if(a6)return hA;a6=1;var t=typeof im=="object"&&im&&im.Object===Object&&im;return hA=t,hA}var pA,i6;function Bu(){if(i6)return pA;i6=1;var t=Hre(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return pA=n,pA}var mA,o6;function f1(){if(o6)return mA;o6=1;var t=Bu(),e=t.Symbol;return mA=e,mA}var gA,l6;function ZKe(){if(l6)return gA;l6=1;var t=f1(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,s=t?t.toStringTag:void 0;function a(i){var o=n.call(i,s),l=i[s];try{i[s]=void 0;var u=!0}catch{}var c=r.call(i);return u&&(o?i[s]=l:delete i[s]),c}return gA=a,gA}var yA,u6;function JKe(){if(u6)return yA;u6=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return yA=n,yA}var bA,c6;function Fc(){if(c6)return bA;c6=1;var t=f1(),e=ZKe(),n=JKe(),r="[object Null]",s="[object Undefined]",a=t?t.toStringTag:void 0;function i(o){return o==null?o===void 0?s:r:a&&a in Object(o)?e(o):n(o)}return bA=i,bA}var xA,d6;function zc(){if(d6)return xA;d6=1;function t(e){return e!=null&&typeof e=="object"}return xA=t,xA}var vA,f6;function Iy(){if(f6)return vA;f6=1;var t=Fc(),e=zc(),n="[object Symbol]";function r(s){return typeof s=="symbol"||e(s)&&t(s)==n}return vA=r,vA}var wA,h6;function U4(){if(h6)return wA;h6=1;var t=ji(),e=Iy(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function s(a,i){if(t(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||e(a)?!0:r.test(a)||!n.test(a)||i!=null&&a in Object(i)}return wA=s,wA}var SA,p6;function Jd(){if(p6)return SA;p6=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return SA=t,SA}var CA,m6;function V4(){if(m6)return CA;m6=1;var t=Fc(),e=Jd(),n="[object AsyncFunction]",r="[object Function]",s="[object GeneratorFunction]",a="[object Proxy]";function i(o){if(!e(o))return!1;var l=t(o);return l==r||l==s||l==n||l==a}return CA=i,CA}var kA,g6;function eXe(){if(g6)return kA;g6=1;var t=Bu(),e=t["__core-js_shared__"];return kA=e,kA}var NA,y6;function tXe(){if(y6)return NA;y6=1;var t=eXe(),e=function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!e&&e in r}return NA=n,NA}var TA,b6;function qre(){if(b6)return TA;b6=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return TA=n,TA}var $A,x6;function nXe(){if(x6)return $A;x6=1;var t=V4(),e=tXe(),n=Jd(),r=qre(),s=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,i=Function.prototype,o=Object.prototype,l=i.toString,u=o.hasOwnProperty,c=RegExp("^"+l.call(u).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(h){if(!n(h)||e(h))return!1;var m=t(h)?c:a;return m.test(r(h))}return $A=d,$A}var IA,v6;function rXe(){if(v6)return IA;v6=1;function t(e,n){return e==null?void 0:e[n]}return IA=t,IA}var EA,w6;function Qh(){if(w6)return EA;w6=1;var t=nXe(),e=rXe();function n(r,s){var a=e(r,s);return t(a)?a:void 0}return EA=n,EA}var AA,S6;function fT(){if(S6)return AA;S6=1;var t=Qh(),e=t(Object,"create");return AA=e,AA}var RA,C6;function sXe(){if(C6)return RA;C6=1;var t=fT();function e(){this.__data__=t?t(null):{},this.size=0}return RA=e,RA}var OA,k6;function aXe(){if(k6)return OA;k6=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return OA=t,OA}var _A,N6;function iXe(){if(N6)return _A;N6=1;var t=fT(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function s(a){var i=this.__data__;if(t){var o=i[a];return o===e?void 0:o}return r.call(i,a)?i[a]:void 0}return _A=s,_A}var DA,T6;function oXe(){if(T6)return DA;T6=1;var t=fT(),e=Object.prototype,n=e.hasOwnProperty;function r(s){var a=this.__data__;return t?a[s]!==void 0:n.call(a,s)}return DA=r,DA}var PA,$6;function lXe(){if($6)return PA;$6=1;var t=fT(),e="__lodash_hash_undefined__";function n(r,s){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=t&&s===void 0?e:s,this}return PA=n,PA}var MA,I6;function uXe(){if(I6)return MA;I6=1;var t=sXe(),e=aXe(),n=iXe(),r=oXe(),s=lXe();function a(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var u=i[o];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=s,MA=a,MA}var jA,E6;function cXe(){if(E6)return jA;E6=1;function t(){this.__data__=[],this.size=0}return jA=t,jA}var LA,A6;function W4(){if(A6)return LA;A6=1;function t(e,n){return e===n||e!==e&&n!==n}return LA=t,LA}var FA,R6;function hT(){if(R6)return FA;R6=1;var t=W4();function e(n,r){for(var s=n.length;s--;)if(t(n[s][0],r))return s;return-1}return FA=e,FA}var zA,O6;function dXe(){if(O6)return zA;O6=1;var t=hT(),e=Array.prototype,n=e.splice;function r(s){var a=this.__data__,i=t(a,s);if(i<0)return!1;var o=a.length-1;return i==o?a.pop():n.call(a,i,1),--this.size,!0}return zA=r,zA}var BA,_6;function fXe(){if(_6)return BA;_6=1;var t=hT();function e(n){var r=this.__data__,s=t(r,n);return s<0?void 0:r[s][1]}return BA=e,BA}var UA,D6;function hXe(){if(D6)return UA;D6=1;var t=hT();function e(n){return t(this.__data__,n)>-1}return UA=e,UA}var VA,P6;function pXe(){if(P6)return VA;P6=1;var t=hT();function e(n,r){var s=this.__data__,a=t(s,n);return a<0?(++this.size,s.push([n,r])):s[a][1]=r,this}return VA=e,VA}var WA,M6;function pT(){if(M6)return WA;M6=1;var t=cXe(),e=dXe(),n=fXe(),r=hXe(),s=pXe();function a(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var u=i[o];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=s,WA=a,WA}var GA,j6;function G4(){if(j6)return GA;j6=1;var t=Qh(),e=Bu(),n=t(e,"Map");return GA=n,GA}var HA,L6;function mXe(){if(L6)return HA;L6=1;var t=uXe(),e=pT(),n=G4();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return HA=r,HA}var qA,F6;function gXe(){if(F6)return qA;F6=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return qA=t,qA}var KA,z6;function mT(){if(z6)return KA;z6=1;var t=gXe();function e(n,r){var s=n.__data__;return t(r)?s[typeof r=="string"?"string":"hash"]:s.map}return KA=e,KA}var XA,B6;function yXe(){if(B6)return XA;B6=1;var t=mT();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return XA=e,XA}var YA,U6;function bXe(){if(U6)return YA;U6=1;var t=mT();function e(n){return t(this,n).get(n)}return YA=e,YA}var QA,V6;function xXe(){if(V6)return QA;V6=1;var t=mT();function e(n){return t(this,n).has(n)}return QA=e,QA}var ZA,W6;function vXe(){if(W6)return ZA;W6=1;var t=mT();function e(n,r){var s=t(this,n),a=s.size;return s.set(n,r),this.size+=s.size==a?0:1,this}return ZA=e,ZA}var JA,G6;function H4(){if(G6)return JA;G6=1;var t=mXe(),e=yXe(),n=bXe(),r=xXe(),s=vXe();function a(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var u=i[o];this.set(u[0],u[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=s,JA=a,JA}var eR,H6;function Kre(){if(H6)return eR;H6=1;var t=H4(),e="Expected a function";function n(r,s){if(typeof r!="function"||s!=null&&typeof s!="function")throw new TypeError(e);var a=function(){var i=arguments,o=s?s.apply(this,i):i[0],l=a.cache;if(l.has(o))return l.get(o);var u=r.apply(this,i);return a.cache=l.set(o,u)||l,u};return a.cache=new(n.Cache||t),a}return n.Cache=t,eR=n,eR}var tR,q6;function wXe(){if(q6)return tR;q6=1;var t=Kre(),e=500;function n(r){var s=t(r,function(i){return a.size===e&&a.clear(),i}),a=s.cache;return s}return tR=n,tR}var nR,K6;function SXe(){if(K6)return nR;K6=1;var t=wXe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(e,function(i,o,l,u){a.push(l?u.replace(n,"$1"):o||i)}),a});return nR=r,nR}var rR,X6;function q4(){if(X6)return rR;X6=1;function t(e,n){for(var r=-1,s=e==null?0:e.length,a=Array(s);++r<s;)a[r]=n(e[r],r,e);return a}return rR=t,rR}var sR,Y6;function CXe(){if(Y6)return sR;Y6=1;var t=f1(),e=q4(),n=ji(),r=Iy(),s=t?t.prototype:void 0,a=s?s.toString:void 0;function i(o){if(typeof o=="string")return o;if(n(o))return e(o,i)+"";if(r(o))return a?a.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return sR=i,sR}var aR,Q6;function Xre(){if(Q6)return aR;Q6=1;var t=CXe();function e(n){return n==null?"":t(n)}return aR=e,aR}var iR,Z6;function Yre(){if(Z6)return iR;Z6=1;var t=ji(),e=U4(),n=SXe(),r=Xre();function s(a,i){return t(a)?a:e(a,i)?[a]:n(r(a))}return iR=s,iR}var oR,J6;function gT(){if(J6)return oR;J6=1;var t=Iy();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return oR=e,oR}var lR,eG;function K4(){if(eG)return lR;eG=1;var t=Yre(),e=gT();function n(r,s){s=t(s,r);for(var a=0,i=s.length;r!=null&&a<i;)r=r[e(s[a++])];return a&&a==i?r:void 0}return lR=n,lR}var uR,tG;function Qre(){if(tG)return uR;tG=1;var t=K4();function e(n,r,s){var a=n==null?void 0:t(n,r);return a===void 0?s:a}return uR=e,uR}var kXe=Qre();const Jo=Un(kXe);var cR,nG;function NXe(){if(nG)return cR;nG=1;function t(e){return e==null}return cR=t,cR}var TXe=NXe();const xn=Un(TXe);var dR,rG;function $Xe(){if(rG)return dR;rG=1;var t=Fc(),e=ji(),n=zc(),r="[object String]";function s(a){return typeof a=="string"||!e(a)&&n(a)&&t(a)==r}return dR=s,dR}var IXe=$Xe();const h1=Un(IXe);var EXe=V4();const on=Un(EXe);var AXe=Jd();const Ey=Un(AXe);var fR={exports:{}},Ln={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sG;function RXe(){if(sG)return Ln;sG=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),i=Symbol.for("react.context"),o=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),g;g=Symbol.for("react.module.reference");function y(b){if(typeof b=="object"&&b!==null){var w=b.$$typeof;switch(w){case t:switch(b=b.type,b){case n:case s:case r:case u:case c:return b;default:switch(b=b&&b.$$typeof,b){case o:case i:case l:case h:case d:case a:return b;default:return w}}case e:return w}}}return Ln.ContextConsumer=i,Ln.ContextProvider=a,Ln.Element=t,Ln.ForwardRef=l,Ln.Fragment=n,Ln.Lazy=h,Ln.Memo=d,Ln.Portal=e,Ln.Profiler=s,Ln.StrictMode=r,Ln.Suspense=u,Ln.SuspenseList=c,Ln.isAsyncMode=function(){return!1},Ln.isConcurrentMode=function(){return!1},Ln.isContextConsumer=function(b){return y(b)===i},Ln.isContextProvider=function(b){return y(b)===a},Ln.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===t},Ln.isForwardRef=function(b){return y(b)===l},Ln.isFragment=function(b){return y(b)===n},Ln.isLazy=function(b){return y(b)===h},Ln.isMemo=function(b){return y(b)===d},Ln.isPortal=function(b){return y(b)===e},Ln.isProfiler=function(b){return y(b)===s},Ln.isStrictMode=function(b){return y(b)===r},Ln.isSuspense=function(b){return y(b)===u},Ln.isSuspenseList=function(b){return y(b)===c},Ln.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===n||b===s||b===r||b===u||b===c||b===m||typeof b=="object"&&b!==null&&(b.$$typeof===h||b.$$typeof===d||b.$$typeof===a||b.$$typeof===i||b.$$typeof===l||b.$$typeof===g||b.getModuleId!==void 0)},Ln.typeOf=y,Ln}var aG;function OXe(){return aG||(aG=1,fR.exports=RXe()),fR.exports}var _Xe=OXe(),hR,iG;function Zre(){if(iG)return hR;iG=1;var t=Fc(),e=zc(),n="[object Number]";function r(s){return typeof s=="number"||e(s)&&t(s)==n}return hR=r,hR}var pR,oG;function DXe(){if(oG)return pR;oG=1;var t=Zre();function e(n){return t(n)&&n!=+n}return pR=e,pR}var PXe=DXe();const p1=Un(PXe);var MXe=Zre();const jXe=Un(MXe);var _l=function(e){return e===0?0:e>0?1:-1},Xf=function(e){return h1(e)&&e.indexOf("%")===e.length-1},ut=function(e){return jXe(e)&&!p1(e)},Fs=function(e){return ut(e)||h1(e)},LXe=0,m1=function(e){var n=++LXe;return"".concat(e||"").concat(n)},$h=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ut(e)&&!h1(e))return r;var a;if(Xf(e)){var i=e.indexOf("%");a=n*parseFloat(e.slice(0,i))/100}else a=+e;return p1(a)&&(a=r),s&&a>n&&(a=n),a},gd=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},FXe=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},s=0;s<n;s++)if(!r[e[s]])r[e[s]]=!0;else return!0;return!1},Al=function(e,n){return ut(e)&&ut(n)?function(r){return e+r*(n-e)}:function(){return n}};function D2(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Jo(r,e))===n})}function ym(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function zD(t){"@babel/helpers - typeof";return zD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zD(t)}var zXe=["viewBox","children"],BXe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],lG=["points","pathLength"],mR={svg:zXe,polygon:lG,polyline:lG},X4=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],P2=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(L.isValidElement(e)&&(r=e.props),!Ey(r))return null;var s={};return Object.keys(r).forEach(function(a){X4.includes(a)&&(s[a]=n||function(i){return r[a](r,i)})}),s},UXe=function(e,n,r){return function(s){return e(n,r,s),null}},M2=function(e,n,r){if(!Ey(e)||zD(e)!=="object")return null;var s=null;return Object.keys(e).forEach(function(a){var i=e[a];X4.includes(a)&&typeof i=="function"&&(s||(s={}),s[a]=UXe(i,n,r))}),s},VXe=["children"],WXe=["children"];function uG(t,e){if(t==null)return{};var n=GXe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function GXe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function BD(t){"@babel/helpers - typeof";return BD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BD(t)}var cG={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},wc=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},dG=null,gR=null,Y4=function t(e){if(e===dG&&Array.isArray(gR))return gR;var n=[];return L.Children.forEach(e,function(r){xn(r)||(_Xe.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),gR=n,dG=e,n};function el(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(s){return wc(s)}):r=[wc(e)],Y4(t).forEach(function(s){var a=Jo(s,"type.displayName")||Jo(s,"type.name");r.indexOf(a)!==-1&&n.push(s)}),n}function eo(t,e){var n=el(t,e);return n&&n[0]}var fG=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,s=n.height;return!(!ut(r)||r<=0||!ut(s)||s<=0)},HXe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],qXe=function(e){return e&&e.type&&h1(e.type)&&HXe.indexOf(e.type)>=0},KXe=function(e){return e&&BD(e)==="object"&&"clipDot"in e},XXe=function(e,n,r,s){var a,i=(a=mR==null?void 0:mR[s])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!on(e)&&(s&&i.includes(n)||BXe.includes(n))||r&&X4.includes(n)},wn=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(L.isValidElement(e)&&(s=e.props),!Ey(s))return null;var a={};return Object.keys(s).forEach(function(i){var o;XXe((o=s)===null||o===void 0?void 0:o[i],i,n,r)&&(a[i]=s[i])}),a},UD=function t(e,n){if(e===n)return!0;var r=L.Children.count(e);if(r!==L.Children.count(n))return!1;if(r===0)return!0;if(r===1)return hG(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var s=0;s<r;s++){var a=e[s],i=n[s];if(Array.isArray(a)||Array.isArray(i)){if(!t(a,i))return!1}else if(!hG(a,i))return!1}return!0},hG=function(e,n){if(xn(e)&&xn(n))return!0;if(!xn(e)&&!xn(n)){var r=e.props||{},s=r.children,a=uG(r,VXe),i=n.props||{},o=i.children,l=uG(i,WXe);return s&&o?ym(a,l)&&UD(s,o):!s&&!o?ym(a,l):!1}return!1},pG=function(e,n){var r=[],s={};return Y4(e).forEach(function(a,i){if(qXe(a))r.push(a);else if(a){var o=wc(a.type),l=n[o]||{},u=l.handler,c=l.once;if(u&&(!c||!s[o])){var d=u(a,o,i);r.push(d),s[o]=!0}}}),r},YXe=function(e){var n=e&&e.type;return n&&cG[n]?cG[n]:null},QXe=function(e,n){return Y4(n).indexOf(e)},ZXe=["children","width","height","viewBox","className","style","title","desc"];function VD(){return VD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VD.apply(this,arguments)}function JXe(t,e){if(t==null)return{};var n=eYe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function eYe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function WD(t){var e=t.children,n=t.width,r=t.height,s=t.viewBox,a=t.className,i=t.style,o=t.title,l=t.desc,u=JXe(t,ZXe),c=s||{width:n,height:r,x:0,y:0},d=mt("recharts-surface",a);return pe.createElement("svg",VD({},wn(u,!0,"svg"),{className:d,width:n,height:r,style:i,viewBox:"".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height)}),pe.createElement("title",null,o),pe.createElement("desc",null,l),e)}var tYe=["children","className"];function GD(){return GD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GD.apply(this,arguments)}function nYe(t,e){if(t==null)return{};var n=rYe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rYe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var ds=pe.forwardRef(function(t,e){var n=t.children,r=t.className,s=nYe(t,tYe),a=mt("recharts-layer",r);return pe.createElement("g",GD({className:a},wn(s,!0),{ref:e}),n)}),Sc=function(e,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a]},yR,mG;function sYe(){if(mG)return yR;mG=1;function t(e,n,r){var s=-1,a=e.length;n<0&&(n=-n>a?0:a+n),r=r>a?a:r,r<0&&(r+=a),a=n>r?0:r-n>>>0,n>>>=0;for(var i=Array(a);++s<a;)i[s]=e[s+n];return i}return yR=t,yR}var bR,gG;function aYe(){if(gG)return bR;gG=1;var t=sYe();function e(n,r,s){var a=n.length;return s=s===void 0?a:s,!r&&s>=a?n:t(n,r,s)}return bR=e,bR}var xR,yG;function Jre(){if(yG)return xR;yG=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",s=e+n+r,a="\\ufe0e\\ufe0f",i="\\u200d",o=RegExp("["+i+t+s+a+"]");function l(u){return o.test(u)}return xR=l,xR}var vR,bG;function iYe(){if(bG)return vR;bG=1;function t(e){return e.split("")}return vR=t,vR}var wR,xG;function oYe(){if(xG)return wR;xG=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",s=e+n+r,a="\\ufe0e\\ufe0f",i="["+t+"]",o="["+s+"]",l="\\ud83c[\\udffb-\\udfff]",u="(?:"+o+"|"+l+")",c="[^"+t+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",g=u+"?",y="["+a+"]?",b="(?:"+m+"(?:"+[c,d,h].join("|")+")"+y+g+")*",w=y+g+b,C="(?:"+[c+o+"?",o,d,h,i].join("|")+")",k=RegExp(l+"(?="+l+")|"+C+w,"g");function T(N){return N.match(k)||[]}return wR=T,wR}var SR,vG;function lYe(){if(vG)return SR;vG=1;var t=iYe(),e=Jre(),n=oYe();function r(s){return e(s)?n(s):t(s)}return SR=r,SR}var CR,wG;function uYe(){if(wG)return CR;wG=1;var t=aYe(),e=Jre(),n=lYe(),r=Xre();function s(a){return function(i){i=r(i);var o=e(i)?n(i):void 0,l=o?o[0]:i.charAt(0),u=o?t(o,1).join(""):i.slice(1);return l[a]()+u}}return CR=s,CR}var kR,SG;function cYe(){if(SG)return kR;SG=1;var t=uYe(),e=t("toUpperCase");return kR=e,kR}var dYe=cYe();const yT=Un(dYe);function xr(t){return function(){return t}}const ese=Math.cos,j2=Math.sin,Xl=Math.sqrt,L2=Math.PI,bT=2*L2,HD=Math.PI,qD=2*HD,Mf=1e-6,fYe=qD-Mf;function tse(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function hYe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return tse;const n=10**e;return function(r){this._+=r[0];for(let s=1,a=r.length;s<a;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}class pYe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?tse:hYe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,s){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(e,n,r,s,a,i){this._append`C${+e},${+n},${+r},${+s},${this._x1=+a},${this._y1=+i}`}arcTo(e,n,r,s,a){if(e=+e,n=+n,r=+r,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let i=this._x1,o=this._y1,l=r-e,u=s-n,c=i-e,d=o-n,h=c*c+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>Mf)if(!(Math.abs(d*l-u*c)>Mf)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let m=r-i,g=s-o,y=l*l+u*u,b=m*m+g*g,w=Math.sqrt(y),C=Math.sqrt(h),k=a*Math.tan((HD-Math.acos((y+h-b)/(2*w*C)))/2),T=k/C,N=k/w;Math.abs(T-1)>Mf&&this._append`L${e+T*c},${n+T*d}`,this._append`A${a},${a},0,0,${+(d*m>c*g)},${this._x1=e+N*l},${this._y1=n+N*u}`}}arc(e,n,r,s,a,i){if(e=+e,n=+n,r=+r,i=!!i,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(s),l=r*Math.sin(s),u=e+o,c=n+l,d=1^i,h=i?s-a:a-s;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Mf||Math.abs(this._y1-c)>Mf)&&this._append`L${u},${c}`,r&&(h<0&&(h=h%qD+qD),h>fYe?this._append`A${r},${r},0,1,${d},${e-o},${n-l}A${r},${r},0,1,${d},${this._x1=u},${this._y1=c}`:h>Mf&&this._append`A${r},${r},0,${+(h>=HD)},${d},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function Q4(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new pYe(e)}function Z4(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function nse(t){this._context=t}nse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function xT(t){return new nse(t)}function rse(t){return t[0]}function sse(t){return t[1]}function ase(t,e){var n=xr(!0),r=null,s=xT,a=null,i=Q4(o);t=typeof t=="function"?t:t===void 0?rse:xr(t),e=typeof e=="function"?e:e===void 0?sse:xr(e);function o(l){var u,c=(l=Z4(l)).length,d,h=!1,m;for(r==null&&(a=s(m=i())),u=0;u<=c;++u)!(u<c&&n(d=l[u],u,l))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(d,u,l),+e(d,u,l));if(m)return a=null,m+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:xr(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:xr(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:xr(!!l),o):n},o.curve=function(l){return arguments.length?(s=l,r!=null&&(a=s(r)),o):s},o.context=function(l){return arguments.length?(l==null?r=a=null:a=s(r=l),o):r},o}function nS(t,e,n){var r=null,s=xr(!0),a=null,i=xT,o=null,l=Q4(u);t=typeof t=="function"?t:t===void 0?rse:xr(+t),e=typeof e=="function"?e:xr(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?sse:xr(+n);function u(d){var h,m,g,y=(d=Z4(d)).length,b,w=!1,C,k=new Array(y),T=new Array(y);for(a==null&&(o=i(C=l())),h=0;h<=y;++h){if(!(h<y&&s(b=d[h],h,d))===w)if(w=!w)m=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=h-1;g>=m;--g)o.point(k[g],T[g]);o.lineEnd(),o.areaEnd()}w&&(k[h]=+t(b,h,d),T[h]=+e(b,h,d),o.point(r?+r(b,h,d):k[h],n?+n(b,h,d):T[h]))}if(C)return o=null,C+""||null}function c(){return ase().defined(s).curve(i).context(a)}return u.x=function(d){return arguments.length?(t=typeof d=="function"?d:xr(+d),r=null,u):t},u.x0=function(d){return arguments.length?(t=typeof d=="function"?d:xr(+d),u):t},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:xr(+d),u):r},u.y=function(d){return arguments.length?(e=typeof d=="function"?d:xr(+d),n=null,u):e},u.y0=function(d){return arguments.length?(e=typeof d=="function"?d:xr(+d),u):e},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:xr(+d),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(d){return arguments.length?(s=typeof d=="function"?d:xr(!!d),u):s},u.curve=function(d){return arguments.length?(i=d,a!=null&&(o=i(a)),u):i},u.context=function(d){return arguments.length?(d==null?a=o=null:o=i(a=d),u):a},u}class ise{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function mYe(t){return new ise(t,!0)}function gYe(t){return new ise(t,!1)}const J4={draw(t,e){const n=Xl(e/L2);t.moveTo(n,0),t.arc(0,0,n,0,bT)}},yYe={draw(t,e){const n=Xl(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},ose=Xl(1/3),bYe=ose*2,xYe={draw(t,e){const n=Xl(e/bYe),r=n*ose;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},vYe={draw(t,e){const n=Xl(e),r=-n/2;t.rect(r,r,n,n)}},wYe=.8908130915292852,lse=j2(L2/10)/j2(7*L2/10),SYe=j2(bT/10)*lse,CYe=-ese(bT/10)*lse,kYe={draw(t,e){const n=Xl(e*wYe),r=SYe*n,s=CYe*n;t.moveTo(0,-n),t.lineTo(r,s);for(let a=1;a<5;++a){const i=bT*a/5,o=ese(i),l=j2(i);t.lineTo(l*n,-o*n),t.lineTo(o*r-l*s,l*r+o*s)}t.closePath()}},NR=Xl(3),NYe={draw(t,e){const n=-Xl(e/(NR*3));t.moveTo(0,n*2),t.lineTo(-NR*n,-n),t.lineTo(NR*n,-n),t.closePath()}},Mo=-.5,jo=Xl(3)/2,KD=1/Xl(12),TYe=(KD/2+1)*3,$Ye={draw(t,e){const n=Xl(e/TYe),r=n/2,s=n*KD,a=r,i=n*KD+n,o=-a,l=i;t.moveTo(r,s),t.lineTo(a,i),t.lineTo(o,l),t.lineTo(Mo*r-jo*s,jo*r+Mo*s),t.lineTo(Mo*a-jo*i,jo*a+Mo*i),t.lineTo(Mo*o-jo*l,jo*o+Mo*l),t.lineTo(Mo*r+jo*s,Mo*s-jo*r),t.lineTo(Mo*a+jo*i,Mo*i-jo*a),t.lineTo(Mo*o+jo*l,Mo*l-jo*o),t.closePath()}};function IYe(t,e){let n=null,r=Q4(s);t=typeof t=="function"?t:xr(t||J4),e=typeof e=="function"?e:xr(e===void 0?64:+e);function s(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return s.type=function(a){return arguments.length?(t=typeof a=="function"?a:xr(a),s):t},s.size=function(a){return arguments.length?(e=typeof a=="function"?a:xr(+a),s):e},s.context=function(a){return arguments.length?(n=a??null,s):n},s}function F2(){}function z2(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function use(t){this._context=t}use.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:z2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:z2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function EYe(t){return new use(t)}function cse(t){this._context=t}cse.prototype={areaStart:F2,areaEnd:F2,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:z2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function AYe(t){return new cse(t)}function dse(t){this._context=t}dse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:z2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function RYe(t){return new dse(t)}function fse(t){this._context=t}fse.prototype={areaStart:F2,areaEnd:F2,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function OYe(t){return new fse(t)}function CG(t){return t<0?-1:1}function kG(t,e,n){var r=t._x1-t._x0,s=e-t._x1,a=(t._y1-t._y0)/(r||s<0&&-0),i=(n-t._y1)/(s||r<0&&-0),o=(a*s+i*r)/(r+s);return(CG(a)+CG(i))*Math.min(Math.abs(a),Math.abs(i),.5*Math.abs(o))||0}function NG(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function TR(t,e,n){var r=t._x0,s=t._y0,a=t._x1,i=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,s+o*e,a-o,i-o*n,a,i)}function B2(t){this._context=t}B2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:TR(this,this._t0,NG(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,TR(this,NG(this,n=kG(this,t,e)),n);break;default:TR(this,this._t0,n=kG(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function hse(t){this._context=new pse(t)}(hse.prototype=Object.create(B2.prototype)).point=function(t,e){B2.prototype.point.call(this,e,t)};function pse(t){this._context=t}pse.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,s,a){this._context.bezierCurveTo(e,t,r,n,a,s)}};function _Ye(t){return new B2(t)}function DYe(t){return new hse(t)}function mse(t){this._context=t}mse.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=TG(t),s=TG(e),a=0,i=1;i<n;++a,++i)this._context.bezierCurveTo(r[0][a],s[0][a],r[1][a],s[1][a],t[i],e[i]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function TG(t){var e,n=t.length-1,r,s=new Array(n),a=new Array(n),i=new Array(n);for(s[0]=0,a[0]=2,i[0]=t[0]+2*t[1],e=1;e<n-1;++e)s[e]=1,a[e]=4,i[e]=4*t[e]+2*t[e+1];for(s[n-1]=2,a[n-1]=7,i[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=s[e]/a[e-1],a[e]-=r,i[e]-=r*i[e-1];for(s[n-1]=i[n-1]/a[n-1],e=n-2;e>=0;--e)s[e]=(i[e]-s[e+1])/a[e];for(a[n-1]=(t[n]+s[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-s[e+1];return[s,a]}function PYe(t){return new mse(t)}function vT(t,e){this._context=t,this._t=e}vT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function MYe(t){return new vT(t,.5)}function jYe(t){return new vT(t,0)}function LYe(t){return new vT(t,1)}function zm(t,e){if((i=t.length)>1)for(var n=1,r,s,a=t[e[0]],i,o=a.length;n<i;++n)for(s=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function XD(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function FYe(t,e){return t[e]}function zYe(t){const e=[];return e.key=t,e}function BYe(){var t=xr([]),e=XD,n=zm,r=FYe;function s(a){var i=Array.from(t.apply(this,arguments),zYe),o,l=i.length,u=-1,c;for(const d of a)for(o=0,++u;o<l;++o)(i[o][u]=[0,+r(d,i[o].key,u,a)]).data=d;for(o=0,c=Z4(e(i));o<l;++o)i[c[o]].index=o;return n(i,c),i}return s.keys=function(a){return arguments.length?(t=typeof a=="function"?a:xr(Array.from(a)),s):t},s.value=function(a){return arguments.length?(r=typeof a=="function"?a:xr(+a),s):r},s.order=function(a){return arguments.length?(e=a==null?XD:typeof a=="function"?a:xr(Array.from(a)),s):e},s.offset=function(a){return arguments.length?(n=a??zm,s):n},s}function UYe(t,e){if((r=t.length)>0){for(var n,r,s=0,a=t[0].length,i;s<a;++s){for(i=n=0;n<r;++n)i+=t[n][s][1]||0;if(i)for(n=0;n<r;++n)t[n][s][1]/=i}zm(t,e)}}function VYe(t,e){if((s=t.length)>0){for(var n=0,r=t[e[0]],s,a=r.length;n<a;++n){for(var i=0,o=0;i<s;++i)o+=t[i][n][1]||0;r[n][1]+=r[n][0]=-o/2}zm(t,e)}}function WYe(t,e){if(!(!((i=t.length)>0)||!((a=(s=t[e[0]]).length)>0))){for(var n=0,r=1,s,a,i;r<a;++r){for(var o=0,l=0,u=0;o<i;++o){for(var c=t[e[o]],d=c[r][1]||0,h=c[r-1][1]||0,m=(d-h)/2,g=0;g<o;++g){var y=t[e[g]],b=y[r][1]||0,w=y[r-1][1]||0;m+=b-w}l+=d,u+=m*d}s[r-1][1]+=s[r-1][0]=n,l&&(n-=u/l)}s[r-1][1]+=s[r-1][0]=n,zm(t,e)}}function Xb(t){"@babel/helpers - typeof";return Xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xb(t)}var GYe=["type","size","sizeType"];function YD(){return YD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YD.apply(this,arguments)}function $G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function IG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$G(Object(n),!0).forEach(function(r){HYe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$G(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HYe(t,e,n){return e=qYe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qYe(t){var e=KYe(t,"string");return Xb(e)=="symbol"?e:e+""}function KYe(t,e){if(Xb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XYe(t,e){if(t==null)return{};var n=YYe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function YYe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var gse={symbolCircle:J4,symbolCross:yYe,symbolDiamond:xYe,symbolSquare:vYe,symbolStar:kYe,symbolTriangle:NYe,symbolWye:$Ye},QYe=Math.PI/180,ZYe=function(e){var n="symbol".concat(yT(e));return gse[n]||J4},JYe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*QYe;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},eQe=function(e,n){gse["symbol".concat(yT(e))]=n},eL=function(e){var n=e.type,r=n===void 0?"circle":n,s=e.size,a=s===void 0?64:s,i=e.sizeType,o=i===void 0?"area":i,l=XYe(e,GYe),u=IG(IG({},l),{},{type:r,size:a,sizeType:o}),c=function(){var b=ZYe(r),w=IYe().type(b).size(JYe(a,o,r));return w()},d=u.className,h=u.cx,m=u.cy,g=wn(u,!0);return h===+h&&m===+m&&a===+a?pe.createElement("path",YD({},g,{className:mt("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(m,")"),d:c()})):null};eL.registerSymbol=eQe;function Bm(t){"@babel/helpers - typeof";return Bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bm(t)}function QD(){return QD=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},QD.apply(this,arguments)}function EG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function tQe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EG(Object(n),!0).forEach(function(r){Yb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nQe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rQe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bse(r.key),r)}}function sQe(t,e,n){return e&&rQe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function aQe(t,e,n){return e=U2(e),iQe(t,yse()?Reflect.construct(e,n||[],U2(t).constructor):e.apply(t,n))}function iQe(t,e){if(e&&(Bm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oQe(t)}function oQe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yse=function(){return!!t})()}function U2(t){return U2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},U2(t)}function lQe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZD(t,e)}function ZD(t,e){return ZD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},ZD(t,e)}function Yb(t,e,n){return e=bse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bse(t){var e=uQe(t,"string");return Bm(e)=="symbol"?e:e+""}function uQe(t,e){if(Bm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Cl=32,tL=function(t){function e(){return nQe(this,e),aQe(this,e,arguments)}return lQe(e,t),sQe(e,[{key:"renderIcon",value:function(r){var s=this.props.inactiveColor,a=Cl/2,i=Cl/6,o=Cl/3,l=r.inactive?s:r.color;if(r.type==="plainline")return pe.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:Cl,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return pe.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(Cl,"M").concat(2*o,",").concat(a,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return pe.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Cl/8,"h").concat(Cl,"v").concat(Cl*3/4,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(pe.isValidElement(r.legendIcon)){var u=tQe({},r);return delete u.legendIcon,pe.cloneElement(r.legendIcon,u)}return pe.createElement(eL,{fill:l,cx:a,cy:a,size:Cl,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,s=this.props,a=s.payload,i=s.iconSize,o=s.layout,l=s.formatter,u=s.inactiveColor,c={x:0,y:0,width:Cl,height:Cl},d={display:o==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(m,g){var y=m.formatter||l,b=mt(Yb(Yb({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",m.inactive));if(m.type==="none")return null;var w=on(m.value)?null:m.value;Sc(!on(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var C=m.inactive?u:m.color;return pe.createElement("li",QD({className:b,style:d,key:"legend-item-".concat(g)},M2(r.props,m,g)),pe.createElement(WD,{width:i,height:i,viewBox:c,style:h},r.renderIcon(m)),pe.createElement("span",{className:"recharts-legend-item-text",style:{color:C}},y?y(w,m,g):w))})}},{key:"render",value:function(){var r=this.props,s=r.payload,a=r.layout,i=r.align;if(!s||!s.length)return null;var o={padding:0,margin:0,textAlign:a==="horizontal"?i:"left"};return pe.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(L.PureComponent);Yb(tL,"displayName","Legend");Yb(tL,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var $R,AG;function cQe(){if(AG)return $R;AG=1;var t=pT();function e(){this.__data__=new t,this.size=0}return $R=e,$R}var IR,RG;function dQe(){if(RG)return IR;RG=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return IR=t,IR}var ER,OG;function fQe(){if(OG)return ER;OG=1;function t(e){return this.__data__.get(e)}return ER=t,ER}var AR,_G;function hQe(){if(_G)return AR;_G=1;function t(e){return this.__data__.has(e)}return AR=t,AR}var RR,DG;function pQe(){if(DG)return RR;DG=1;var t=pT(),e=G4(),n=H4(),r=200;function s(a,i){var o=this.__data__;if(o instanceof t){var l=o.__data__;if(!e||l.length<r-1)return l.push([a,i]),this.size=++o.size,this;o=this.__data__=new n(l)}return o.set(a,i),this.size=o.size,this}return RR=s,RR}var OR,PG;function xse(){if(PG)return OR;PG=1;var t=pT(),e=cQe(),n=dQe(),r=fQe(),s=hQe(),a=pQe();function i(o){var l=this.__data__=new t(o);this.size=l.size}return i.prototype.clear=e,i.prototype.delete=n,i.prototype.get=r,i.prototype.has=s,i.prototype.set=a,OR=i,OR}var _R,MG;function mQe(){if(MG)return _R;MG=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return _R=e,_R}var DR,jG;function gQe(){if(jG)return DR;jG=1;function t(e){return this.__data__.has(e)}return DR=t,DR}var PR,LG;function vse(){if(LG)return PR;LG=1;var t=H4(),e=mQe(),n=gQe();function r(s){var a=-1,i=s==null?0:s.length;for(this.__data__=new t;++a<i;)this.add(s[a])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,PR=r,PR}var MR,FG;function wse(){if(FG)return MR;FG=1;function t(e,n){for(var r=-1,s=e==null?0:e.length;++r<s;)if(n(e[r],r,e))return!0;return!1}return MR=t,MR}var jR,zG;function Sse(){if(zG)return jR;zG=1;function t(e,n){return e.has(n)}return jR=t,jR}var LR,BG;function Cse(){if(BG)return LR;BG=1;var t=vse(),e=wse(),n=Sse(),r=1,s=2;function a(i,o,l,u,c,d){var h=l&r,m=i.length,g=o.length;if(m!=g&&!(h&&g>m))return!1;var y=d.get(i),b=d.get(o);if(y&&b)return y==o&&b==i;var w=-1,C=!0,k=l&s?new t:void 0;for(d.set(i,o),d.set(o,i);++w<m;){var T=i[w],N=o[w];if(u)var I=h?u(N,T,w,o,i,d):u(T,N,w,i,o,d);if(I!==void 0){if(I)continue;C=!1;break}if(k){if(!e(o,function(A,D){if(!n(k,D)&&(T===A||c(T,A,l,u,d)))return k.push(D)})){C=!1;break}}else if(!(T===N||c(T,N,l,u,d))){C=!1;break}}return d.delete(i),d.delete(o),C}return LR=a,LR}var FR,UG;function yQe(){if(UG)return FR;UG=1;var t=Bu(),e=t.Uint8Array;return FR=e,FR}var zR,VG;function bQe(){if(VG)return zR;VG=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(s,a){r[++n]=[a,s]}),r}return zR=t,zR}var BR,WG;function nL(){if(WG)return BR;WG=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(s){r[++n]=s}),r}return BR=t,BR}var UR,GG;function xQe(){if(GG)return UR;GG=1;var t=f1(),e=yQe(),n=W4(),r=Cse(),s=bQe(),a=nL(),i=1,o=2,l="[object Boolean]",u="[object Date]",c="[object Error]",d="[object Map]",h="[object Number]",m="[object RegExp]",g="[object Set]",y="[object String]",b="[object Symbol]",w="[object ArrayBuffer]",C="[object DataView]",k=t?t.prototype:void 0,T=k?k.valueOf:void 0;function N(I,A,D,P,R,O,F){switch(D){case C:if(I.byteLength!=A.byteLength||I.byteOffset!=A.byteOffset)return!1;I=I.buffer,A=A.buffer;case w:return!(I.byteLength!=A.byteLength||!O(new e(I),new e(A)));case l:case u:case h:return n(+I,+A);case c:return I.name==A.name&&I.message==A.message;case m:case y:return I==A+"";case d:var z=s;case g:var V=P&i;if(z||(z=a),I.size!=A.size&&!V)return!1;var W=F.get(I);if(W)return W==A;P|=o,F.set(I,A);var j=r(z(I),z(A),P,R,O,F);return F.delete(I),j;case b:if(T)return T.call(I)==T.call(A)}return!1}return UR=N,UR}var VR,HG;function kse(){if(HG)return VR;HG=1;function t(e,n){for(var r=-1,s=n.length,a=e.length;++r<s;)e[a+r]=n[r];return e}return VR=t,VR}var WR,qG;function vQe(){if(qG)return WR;qG=1;var t=kse(),e=ji();function n(r,s,a){var i=s(r);return e(r)?i:t(i,a(r))}return WR=n,WR}var GR,KG;function wQe(){if(KG)return GR;KG=1;function t(e,n){for(var r=-1,s=e==null?0:e.length,a=0,i=[];++r<s;){var o=e[r];n(o,r,e)&&(i[a++]=o)}return i}return GR=t,GR}var HR,XG;function SQe(){if(XG)return HR;XG=1;function t(){return[]}return HR=t,HR}var qR,YG;function CQe(){if(YG)return qR;YG=1;var t=wQe(),e=SQe(),n=Object.prototype,r=n.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(i){return i==null?[]:(i=Object(i),t(s(i),function(o){return r.call(i,o)}))}:e;return qR=a,qR}var KR,QG;function kQe(){if(QG)return KR;QG=1;function t(e,n){for(var r=-1,s=Array(e);++r<e;)s[r]=n(r);return s}return KR=t,KR}var XR,ZG;function NQe(){if(ZG)return XR;ZG=1;var t=Fc(),e=zc(),n="[object Arguments]";function r(s){return e(s)&&t(s)==n}return XR=r,XR}var YR,JG;function rL(){if(JG)return YR;JG=1;var t=NQe(),e=zc(),n=Object.prototype,r=n.hasOwnProperty,s=n.propertyIsEnumerable,a=t(function(){return arguments}())?t:function(i){return e(i)&&r.call(i,"callee")&&!s.call(i,"callee")};return YR=a,YR}var ob={exports:{}},QR,eH;function TQe(){if(eH)return QR;eH=1;function t(){return!1}return QR=t,QR}ob.exports;var tH;function Nse(){return tH||(tH=1,function(t,e){var n=Bu(),r=TQe(),s=e&&!e.nodeType&&e,a=s&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===s,o=i?n.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||r;t.exports=u}(ob,ob.exports)),ob.exports}var ZR,nH;function sL(){if(nH)return ZR;nH=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,s){var a=typeof r;return s=s??t,!!s&&(a=="number"||a!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<s}return ZR=n,ZR}var JR,rH;function aL(){if(rH)return JR;rH=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return JR=e,JR}var eO,sH;function $Qe(){if(sH)return eO;sH=1;var t=Fc(),e=aL(),n=zc(),r="[object Arguments]",s="[object Array]",a="[object Boolean]",i="[object Date]",o="[object Error]",l="[object Function]",u="[object Map]",c="[object Number]",d="[object Object]",h="[object RegExp]",m="[object Set]",g="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",w="[object DataView]",C="[object Float32Array]",k="[object Float64Array]",T="[object Int8Array]",N="[object Int16Array]",I="[object Int32Array]",A="[object Uint8Array]",D="[object Uint8ClampedArray]",P="[object Uint16Array]",R="[object Uint32Array]",O={};O[C]=O[k]=O[T]=O[N]=O[I]=O[A]=O[D]=O[P]=O[R]=!0,O[r]=O[s]=O[b]=O[a]=O[w]=O[i]=O[o]=O[l]=O[u]=O[c]=O[d]=O[h]=O[m]=O[g]=O[y]=!1;function F(z){return n(z)&&e(z.length)&&!!O[t(z)]}return eO=F,eO}var tO,aH;function Tse(){if(aH)return tO;aH=1;function t(e){return function(n){return e(n)}}return tO=t,tO}var lb={exports:{}};lb.exports;var iH;function IQe(){return iH||(iH=1,function(t,e){var n=Hre(),r=e&&!e.nodeType&&e,s=r&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===r,i=a&&n.process,o=function(){try{var l=s&&s.require&&s.require("util").types;return l||i&&i.binding&&i.binding("util")}catch{}}();t.exports=o}(lb,lb.exports)),lb.exports}var nO,oH;function $se(){if(oH)return nO;oH=1;var t=$Qe(),e=Tse(),n=IQe(),r=n&&n.isTypedArray,s=r?e(r):t;return nO=s,nO}var rO,lH;function EQe(){if(lH)return rO;lH=1;var t=kQe(),e=rL(),n=ji(),r=Nse(),s=sL(),a=$se(),i=Object.prototype,o=i.hasOwnProperty;function l(u,c){var d=n(u),h=!d&&e(u),m=!d&&!h&&r(u),g=!d&&!h&&!m&&a(u),y=d||h||m||g,b=y?t(u.length,String):[],w=b.length;for(var C in u)(c||o.call(u,C))&&!(y&&(C=="length"||m&&(C=="offset"||C=="parent")||g&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||s(C,w)))&&b.push(C);return b}return rO=l,rO}var sO,uH;function AQe(){if(uH)return sO;uH=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,s=typeof r=="function"&&r.prototype||t;return n===s}return sO=e,sO}var aO,cH;function Ise(){if(cH)return aO;cH=1;function t(e,n){return function(r){return e(n(r))}}return aO=t,aO}var iO,dH;function RQe(){if(dH)return iO;dH=1;var t=Ise(),e=t(Object.keys,Object);return iO=e,iO}var oO,fH;function OQe(){if(fH)return oO;fH=1;var t=AQe(),e=RQe(),n=Object.prototype,r=n.hasOwnProperty;function s(a){if(!t(a))return e(a);var i=[];for(var o in Object(a))r.call(a,o)&&o!="constructor"&&i.push(o);return i}return oO=s,oO}var lO,hH;function g1(){if(hH)return lO;hH=1;var t=V4(),e=aL();function n(r){return r!=null&&e(r.length)&&!t(r)}return lO=n,lO}var uO,pH;function wT(){if(pH)return uO;pH=1;var t=EQe(),e=OQe(),n=g1();function r(s){return n(s)?t(s):e(s)}return uO=r,uO}var cO,mH;function _Qe(){if(mH)return cO;mH=1;var t=vQe(),e=CQe(),n=wT();function r(s){return t(s,n,e)}return cO=r,cO}var dO,gH;function DQe(){if(gH)return dO;gH=1;var t=_Qe(),e=1,n=Object.prototype,r=n.hasOwnProperty;function s(a,i,o,l,u,c){var d=o&e,h=t(a),m=h.length,g=t(i),y=g.length;if(m!=y&&!d)return!1;for(var b=m;b--;){var w=h[b];if(!(d?w in i:r.call(i,w)))return!1}var C=c.get(a),k=c.get(i);if(C&&k)return C==i&&k==a;var T=!0;c.set(a,i),c.set(i,a);for(var N=d;++b<m;){w=h[b];var I=a[w],A=i[w];if(l)var D=d?l(A,I,w,i,a,c):l(I,A,w,a,i,c);if(!(D===void 0?I===A||u(I,A,o,l,c):D)){T=!1;break}N||(N=w=="constructor")}if(T&&!N){var P=a.constructor,R=i.constructor;P!=R&&"constructor"in a&&"constructor"in i&&!(typeof P=="function"&&P instanceof P&&typeof R=="function"&&R instanceof R)&&(T=!1)}return c.delete(a),c.delete(i),T}return dO=s,dO}var fO,yH;function PQe(){if(yH)return fO;yH=1;var t=Qh(),e=Bu(),n=t(e,"DataView");return fO=n,fO}var hO,bH;function MQe(){if(bH)return hO;bH=1;var t=Qh(),e=Bu(),n=t(e,"Promise");return hO=n,hO}var pO,xH;function Ese(){if(xH)return pO;xH=1;var t=Qh(),e=Bu(),n=t(e,"Set");return pO=n,pO}var mO,vH;function jQe(){if(vH)return mO;vH=1;var t=Qh(),e=Bu(),n=t(e,"WeakMap");return mO=n,mO}var gO,wH;function LQe(){if(wH)return gO;wH=1;var t=PQe(),e=G4(),n=MQe(),r=Ese(),s=jQe(),a=Fc(),i=qre(),o="[object Map]",l="[object Object]",u="[object Promise]",c="[object Set]",d="[object WeakMap]",h="[object DataView]",m=i(t),g=i(e),y=i(n),b=i(r),w=i(s),C=a;return(t&&C(new t(new ArrayBuffer(1)))!=h||e&&C(new e)!=o||n&&C(n.resolve())!=u||r&&C(new r)!=c||s&&C(new s)!=d)&&(C=function(k){var T=a(k),N=T==l?k.constructor:void 0,I=N?i(N):"";if(I)switch(I){case m:return h;case g:return o;case y:return u;case b:return c;case w:return d}return T}),gO=C,gO}var yO,SH;function FQe(){if(SH)return yO;SH=1;var t=xse(),e=Cse(),n=xQe(),r=DQe(),s=LQe(),a=ji(),i=Nse(),o=$se(),l=1,u="[object Arguments]",c="[object Array]",d="[object Object]",h=Object.prototype,m=h.hasOwnProperty;function g(y,b,w,C,k,T){var N=a(y),I=a(b),A=N?c:s(y),D=I?c:s(b);A=A==u?d:A,D=D==u?d:D;var P=A==d,R=D==d,O=A==D;if(O&&i(y)){if(!i(b))return!1;N=!0,P=!1}if(O&&!P)return T||(T=new t),N||o(y)?e(y,b,w,C,k,T):n(y,b,A,w,C,k,T);if(!(w&l)){var F=P&&m.call(y,"__wrapped__"),z=R&&m.call(b,"__wrapped__");if(F||z){var V=F?y.value():y,W=z?b.value():b;return T||(T=new t),k(V,W,w,C,T)}}return O?(T||(T=new t),r(y,b,w,C,k,T)):!1}return yO=g,yO}var bO,CH;function iL(){if(CH)return bO;CH=1;var t=FQe(),e=zc();function n(r,s,a,i,o){return r===s?!0:r==null||s==null||!e(r)&&!e(s)?r!==r&&s!==s:t(r,s,a,i,n,o)}return bO=n,bO}var xO,kH;function zQe(){if(kH)return xO;kH=1;var t=xse(),e=iL(),n=1,r=2;function s(a,i,o,l){var u=o.length,c=u,d=!l;if(a==null)return!c;for(a=Object(a);u--;){var h=o[u];if(d&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++u<c;){h=o[u];var m=h[0],g=a[m],y=h[1];if(d&&h[2]){if(g===void 0&&!(m in a))return!1}else{var b=new t;if(l)var w=l(g,y,m,a,i,b);if(!(w===void 0?e(y,g,n|r,l,b):w))return!1}}return!0}return xO=s,xO}var vO,NH;function Ase(){if(NH)return vO;NH=1;var t=Jd();function e(n){return n===n&&!t(n)}return vO=e,vO}var wO,TH;function BQe(){if(TH)return wO;TH=1;var t=Ase(),e=wT();function n(r){for(var s=e(r),a=s.length;a--;){var i=s[a],o=r[i];s[a]=[i,o,t(o)]}return s}return wO=n,wO}var SO,$H;function Rse(){if($H)return SO;$H=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return SO=t,SO}var CO,IH;function UQe(){if(IH)return CO;IH=1;var t=zQe(),e=BQe(),n=Rse();function r(s){var a=e(s);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(i){return i===s||t(i,s,a)}}return CO=r,CO}var kO,EH;function VQe(){if(EH)return kO;EH=1;function t(e,n){return e!=null&&n in Object(e)}return kO=t,kO}var NO,AH;function WQe(){if(AH)return NO;AH=1;var t=Yre(),e=rL(),n=ji(),r=sL(),s=aL(),a=gT();function i(o,l,u){l=t(l,o);for(var c=-1,d=l.length,h=!1;++c<d;){var m=a(l[c]);if(!(h=o!=null&&u(o,m)))break;o=o[m]}return h||++c!=d?h:(d=o==null?0:o.length,!!d&&s(d)&&r(m,d)&&(n(o)||e(o)))}return NO=i,NO}var TO,RH;function GQe(){if(RH)return TO;RH=1;var t=VQe(),e=WQe();function n(r,s){return r!=null&&e(r,s,t)}return TO=n,TO}var $O,OH;function HQe(){if(OH)return $O;OH=1;var t=iL(),e=Qre(),n=GQe(),r=U4(),s=Ase(),a=Rse(),i=gT(),o=1,l=2;function u(c,d){return r(c)&&s(d)?a(i(c),d):function(h){var m=e(h,c);return m===void 0&&m===d?n(h,c):t(d,m,o|l)}}return $O=u,$O}var IO,_H;function Ay(){if(_H)return IO;_H=1;function t(e){return e}return IO=t,IO}var EO,DH;function qQe(){if(DH)return EO;DH=1;function t(e){return function(n){return n==null?void 0:n[e]}}return EO=t,EO}var AO,PH;function KQe(){if(PH)return AO;PH=1;var t=K4();function e(n){return function(r){return t(r,n)}}return AO=e,AO}var RO,MH;function XQe(){if(MH)return RO;MH=1;var t=qQe(),e=KQe(),n=U4(),r=gT();function s(a){return n(a)?t(r(a)):e(a)}return RO=s,RO}var OO,jH;function ef(){if(jH)return OO;jH=1;var t=UQe(),e=HQe(),n=Ay(),r=ji(),s=XQe();function a(i){return typeof i=="function"?i:i==null?n:typeof i=="object"?r(i)?e(i[0],i[1]):t(i):s(i)}return OO=a,OO}var _O,LH;function Ose(){if(LH)return _O;LH=1;function t(e,n,r,s){for(var a=e.length,i=r+(s?1:-1);s?i--:++i<a;)if(n(e[i],i,e))return i;return-1}return _O=t,_O}var DO,FH;function YQe(){if(FH)return DO;FH=1;function t(e){return e!==e}return DO=t,DO}var PO,zH;function QQe(){if(zH)return PO;zH=1;function t(e,n,r){for(var s=r-1,a=e.length;++s<a;)if(e[s]===n)return s;return-1}return PO=t,PO}var MO,BH;function ZQe(){if(BH)return MO;BH=1;var t=Ose(),e=YQe(),n=QQe();function r(s,a,i){return a===a?n(s,a,i):t(s,e,i)}return MO=r,MO}var jO,UH;function JQe(){if(UH)return jO;UH=1;var t=ZQe();function e(n,r){var s=n==null?0:n.length;return!!s&&t(n,r,0)>-1}return jO=e,jO}var LO,VH;function eZe(){if(VH)return LO;VH=1;function t(e,n,r){for(var s=-1,a=e==null?0:e.length;++s<a;)if(r(n,e[s]))return!0;return!1}return LO=t,LO}var FO,WH;function tZe(){if(WH)return FO;WH=1;function t(){}return FO=t,FO}var zO,GH;function nZe(){if(GH)return zO;GH=1;var t=Ese(),e=tZe(),n=nL(),r=1/0,s=t&&1/n(new t([,-0]))[1]==r?function(a){return new t(a)}:e;return zO=s,zO}var BO,HH;function rZe(){if(HH)return BO;HH=1;var t=vse(),e=JQe(),n=eZe(),r=Sse(),s=nZe(),a=nL(),i=200;function o(l,u,c){var d=-1,h=e,m=l.length,g=!0,y=[],b=y;if(c)g=!1,h=n;else if(m>=i){var w=u?null:s(l);if(w)return a(w);g=!1,h=r,b=new t}else b=u?[]:y;e:for(;++d<m;){var C=l[d],k=u?u(C):C;if(C=c||C!==0?C:0,g&&k===k){for(var T=b.length;T--;)if(b[T]===k)continue e;u&&b.push(k),y.push(C)}else h(b,k,c)||(b!==y&&b.push(k),y.push(C))}return y}return BO=o,BO}var UO,qH;function sZe(){if(qH)return UO;qH=1;var t=ef(),e=rZe();function n(r,s){return r&&r.length?e(r,t(s,2)):[]}return UO=n,UO}var aZe=sZe();const KH=Un(aZe);function _se(t,e,n){return e===!0?KH(t,n):on(e)?KH(t,e):t}function Um(t){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Um(t)}var iZe=["ref"];function XH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function sc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XH(Object(n),!0).forEach(function(r){ST(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oZe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YH(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pse(r.key),r)}}function lZe(t,e,n){return e&&YH(t.prototype,e),n&&YH(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function uZe(t,e,n){return e=V2(e),cZe(t,Dse()?Reflect.construct(e,n||[],V2(t).constructor):e.apply(t,n))}function cZe(t,e){if(e&&(Um(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dZe(t)}function dZe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dse=function(){return!!t})()}function V2(t){return V2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},V2(t)}function fZe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JD(t,e)}function JD(t,e){return JD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},JD(t,e)}function ST(t,e,n){return e=Pse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pse(t){var e=hZe(t,"string");return Um(e)=="symbol"?e:e+""}function hZe(t,e){if(Um(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Um(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function pZe(t,e){if(t==null)return{};var n=mZe(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function mZe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function gZe(t){return t.value}function yZe(t,e){if(pe.isValidElement(t))return pe.cloneElement(t,e);if(typeof t=="function")return pe.createElement(t,e);e.ref;var n=pZe(e,iZe);return pe.createElement(tL,n)}var QH=1,Cc=function(t){function e(){var n;oZe(this,e);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=uZe(this,e,[].concat(s)),ST(n,"lastBoundingBox",{width:-1,height:-1}),n}return fZe(e,t),lZe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>QH||Math.abs(s.height-this.lastBoundingBox.height)>QH)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,r&&r(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?sc({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var s=this.props,a=s.layout,i=s.align,o=s.verticalAlign,l=s.margin,u=s.chartWidth,c=s.chartHeight,d,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(i==="center"&&a==="vertical"){var m=this.getBBoxSnapshot();d={left:((u||0)-m.width)/2}}else d=i==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var g=this.getBBoxSnapshot();h={top:((c||0)-g.height)/2}}else h=o==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return sc(sc({},d),h)}},{key:"render",value:function(){var r=this,s=this.props,a=s.content,i=s.width,o=s.height,l=s.wrapperStyle,u=s.payloadUniqBy,c=s.payload,d=sc(sc({position:"absolute",width:i||"auto",height:o||"auto"},this.getDefaultPosition(l)),l);return pe.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(m){r.wrapperNode=m}},yZe(a,sc(sc({},this.props),{},{payload:_se(c,u,gZe)})))}}],[{key:"getWithHeight",value:function(r,s){var a=sc(sc({},this.defaultProps),r.props),i=a.layout;return i==="vertical"&&ut(r.props.height)?{height:r.props.height}:i==="horizontal"?{width:r.props.width||s}:null}}])}(L.PureComponent);ST(Cc,"displayName","Legend");ST(Cc,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var VO,ZH;function bZe(){if(ZH)return VO;ZH=1;var t=f1(),e=rL(),n=ji(),r=t?t.isConcatSpreadable:void 0;function s(a){return n(a)||e(a)||!!(r&&a&&a[r])}return VO=s,VO}var WO,JH;function Mse(){if(JH)return WO;JH=1;var t=kse(),e=bZe();function n(r,s,a,i,o){var l=-1,u=r.length;for(a||(a=e),o||(o=[]);++l<u;){var c=r[l];s>0&&a(c)?s>1?n(c,s-1,a,i,o):t(o,c):i||(o[o.length]=c)}return o}return WO=n,WO}var GO,e8;function xZe(){if(e8)return GO;e8=1;function t(e){return function(n,r,s){for(var a=-1,i=Object(n),o=s(n),l=o.length;l--;){var u=o[e?l:++a];if(r(i[u],u,i)===!1)break}return n}}return GO=t,GO}var HO,t8;function vZe(){if(t8)return HO;t8=1;var t=xZe(),e=t();return HO=e,HO}var qO,n8;function jse(){if(n8)return qO;n8=1;var t=vZe(),e=wT();function n(r,s){return r&&t(r,s,e)}return qO=n,qO}var KO,r8;function wZe(){if(r8)return KO;r8=1;var t=g1();function e(n,r){return function(s,a){if(s==null)return s;if(!t(s))return n(s,a);for(var i=s.length,o=r?i:-1,l=Object(s);(r?o--:++o<i)&&a(l[o],o,l)!==!1;);return s}}return KO=e,KO}var XO,s8;function oL(){if(s8)return XO;s8=1;var t=jse(),e=wZe(),n=e(t);return XO=n,XO}var YO,a8;function Lse(){if(a8)return YO;a8=1;var t=oL(),e=g1();function n(r,s){var a=-1,i=e(r)?Array(r.length):[];return t(r,function(o,l,u){i[++a]=s(o,l,u)}),i}return YO=n,YO}var QO,i8;function SZe(){if(i8)return QO;i8=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return QO=t,QO}var ZO,o8;function CZe(){if(o8)return ZO;o8=1;var t=Iy();function e(n,r){if(n!==r){var s=n!==void 0,a=n===null,i=n===n,o=t(n),l=r!==void 0,u=r===null,c=r===r,d=t(r);if(!u&&!d&&!o&&n>r||o&&l&&c&&!u&&!d||a&&l&&c||!s&&c||!i)return 1;if(!a&&!o&&!d&&n<r||d&&s&&i&&!a&&!o||u&&s&&i||!l&&i||!c)return-1}return 0}return ZO=e,ZO}var JO,l8;function kZe(){if(l8)return JO;l8=1;var t=CZe();function e(n,r,s){for(var a=-1,i=n.criteria,o=r.criteria,l=i.length,u=s.length;++a<l;){var c=t(i[a],o[a]);if(c){if(a>=u)return c;var d=s[a];return c*(d=="desc"?-1:1)}}return n.index-r.index}return JO=e,JO}var e_,u8;function NZe(){if(u8)return e_;u8=1;var t=q4(),e=K4(),n=ef(),r=Lse(),s=SZe(),a=Tse(),i=kZe(),o=Ay(),l=ji();function u(c,d,h){d.length?d=t(d,function(y){return l(y)?function(b){return e(b,y.length===1?y[0]:y)}:y}):d=[o];var m=-1;d=t(d,a(n));var g=r(c,function(y,b,w){var C=t(d,function(k){return k(y)});return{criteria:C,index:++m,value:y}});return s(g,function(y,b){return i(y,b,h)})}return e_=u,e_}var t_,c8;function TZe(){if(c8)return t_;c8=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return t_=t,t_}var n_,d8;function $Ze(){if(d8)return n_;d8=1;var t=TZe(),e=Math.max;function n(r,s,a){return s=e(s===void 0?r.length-1:s,0),function(){for(var i=arguments,o=-1,l=e(i.length-s,0),u=Array(l);++o<l;)u[o]=i[s+o];o=-1;for(var c=Array(s+1);++o<s;)c[o]=i[o];return c[s]=a(u),t(r,this,c)}}return n_=n,n_}var r_,f8;function IZe(){if(f8)return r_;f8=1;function t(e){return function(){return e}}return r_=t,r_}var s_,h8;function Fse(){if(h8)return s_;h8=1;var t=Qh(),e=function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}}();return s_=e,s_}var a_,p8;function EZe(){if(p8)return a_;p8=1;var t=IZe(),e=Fse(),n=Ay(),r=e?function(s,a){return e(s,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:n;return a_=r,a_}var i_,m8;function AZe(){if(m8)return i_;m8=1;var t=800,e=16,n=Date.now;function r(s){var a=0,i=0;return function(){var o=n(),l=e-(o-i);if(i=o,l>0){if(++a>=t)return arguments[0]}else a=0;return s.apply(void 0,arguments)}}return i_=r,i_}var o_,g8;function RZe(){if(g8)return o_;g8=1;var t=EZe(),e=AZe(),n=e(t);return o_=n,o_}var l_,y8;function OZe(){if(y8)return l_;y8=1;var t=Ay(),e=$Ze(),n=RZe();function r(s,a){return n(e(s,a,t),s+"")}return l_=r,l_}var u_,b8;function CT(){if(b8)return u_;b8=1;var t=W4(),e=g1(),n=sL(),r=Jd();function s(a,i,o){if(!r(o))return!1;var l=typeof i;return(l=="number"?e(o)&&n(i,o.length):l=="string"&&i in o)?t(o[i],a):!1}return u_=s,u_}var c_,x8;function _Ze(){if(x8)return c_;x8=1;var t=Mse(),e=NZe(),n=OZe(),r=CT(),s=n(function(a,i){if(a==null)return[];var o=i.length;return o>1&&r(a,i[0],i[1])?i=[]:o>2&&r(i[0],i[1],i[2])&&(i=[i[0]]),e(a,t(i,1),[])});return c_=s,c_}var DZe=_Ze();const lL=Un(DZe);function Qb(t){"@babel/helpers - typeof";return Qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qb(t)}function eP(){return eP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eP.apply(this,arguments)}function PZe(t,e){return FZe(t)||LZe(t,e)||jZe(t,e)||MZe()}function MZe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jZe(t,e){if(t){if(typeof t=="string")return v8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v8(t,e)}}function v8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function LZe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,i,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function FZe(t){if(Array.isArray(t))return t}function w8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function d_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w8(Object(n),!0).forEach(function(r){zZe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zZe(t,e,n){return e=BZe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BZe(t){var e=UZe(t,"string");return Qb(e)=="symbol"?e:e+""}function UZe(t,e){if(Qb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VZe(t){return Array.isArray(t)&&Fs(t[0])&&Fs(t[1])?t.join(" ~ "):t}var WZe=function(e){var n=e.separator,r=n===void 0?" : ":n,s=e.contentStyle,a=s===void 0?{}:s,i=e.itemStyle,o=i===void 0?{}:i,l=e.labelStyle,u=l===void 0?{}:l,c=e.payload,d=e.formatter,h=e.itemSorter,m=e.wrapperClassName,g=e.labelClassName,y=e.label,b=e.labelFormatter,w=e.accessibilityLayer,C=w===void 0?!1:w,k=function(){if(c&&c.length){var F={padding:0,margin:0},z=(h?lL(c,h):c).map(function(V,W){if(V.type==="none")return null;var j=d_({display:"block",paddingTop:4,paddingBottom:4,color:V.color||"#000"},o),q=V.formatter||d||VZe,Y=V.value,Q=V.name,H=Y,ee=Q;if(q&&H!=null&&ee!=null){var te=q(Y,Q,V,W,c);if(Array.isArray(te)){var ne=PZe(te,2);H=ne[0],ee=ne[1]}else H=te}return pe.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(W),style:j},Fs(ee)?pe.createElement("span",{className:"recharts-tooltip-item-name"},ee):null,Fs(ee)?pe.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,pe.createElement("span",{className:"recharts-tooltip-item-value"},H),pe.createElement("span",{className:"recharts-tooltip-item-unit"},V.unit||""))});return pe.createElement("ul",{className:"recharts-tooltip-item-list",style:F},z)}return null},T=d_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),N=d_({margin:0},u),I=!xn(y),A=I?y:"",D=mt("recharts-default-tooltip",m),P=mt("recharts-tooltip-label",g);I&&b&&c!==void 0&&c!==null&&(A=b(y,c));var R=C?{role:"status","aria-live":"assertive"}:{};return pe.createElement("div",eP({className:D,style:T},R),pe.createElement("p",{className:P,style:N},pe.isValidElement(A)?A:"".concat(A)),k())};function Zb(t){"@babel/helpers - typeof";return Zb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zb(t)}function rS(t,e,n){return e=GZe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GZe(t){var e=HZe(t,"string");return Zb(e)=="symbol"?e:e+""}function HZe(t,e){if(Zb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var U0="recharts-tooltip-wrapper",qZe={visibility:"hidden"};function KZe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return mt(U0,rS(rS(rS(rS({},"".concat(U0,"-right"),ut(n)&&e&&ut(e.x)&&n>=e.x),"".concat(U0,"-left"),ut(n)&&e&&ut(e.x)&&n<e.x),"".concat(U0,"-bottom"),ut(r)&&e&&ut(e.y)&&r>=e.y),"".concat(U0,"-top"),ut(r)&&e&&ut(e.y)&&r<e.y))}function S8(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,s=t.offsetTopLeft,a=t.position,i=t.reverseDirection,o=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(a&&ut(a[r]))return a[r];var c=n[r]-o-s,d=n[r]+s;if(e[r])return i[r]?c:d;if(i[r]){var h=c,m=l[r];return h<m?Math.max(d,l[r]):Math.max(c,l[r])}var g=d+o,y=l[r]+u;return g>y?Math.max(c,l[r]):Math.max(d,l[r])}function XZe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function YZe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,s=t.position,a=t.reverseDirection,i=t.tooltipBox,o=t.useTranslate3d,l=t.viewBox,u,c,d;return i.height>0&&i.width>0&&n?(c=S8({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:s,reverseDirection:a,tooltipDimension:i.width,viewBox:l,viewBoxDimension:l.width}),d=S8({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:s,reverseDirection:a,tooltipDimension:i.height,viewBox:l,viewBoxDimension:l.height}),u=XZe({translateX:c,translateY:d,useTranslate3d:o})):u=qZe,{cssProperties:u,cssClasses:KZe({translateX:c,translateY:d,coordinate:n})}}function Vm(t){"@babel/helpers - typeof";return Vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vm(t)}function C8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function k8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C8(Object(n),!0).forEach(function(r){nP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QZe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZZe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bse(r.key),r)}}function JZe(t,e,n){return e&&ZZe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function eJe(t,e,n){return e=W2(e),tJe(t,zse()?Reflect.construct(e,n||[],W2(t).constructor):e.apply(t,n))}function tJe(t,e){if(e&&(Vm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nJe(t)}function nJe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zse(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zse=function(){return!!t})()}function W2(t){return W2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},W2(t)}function rJe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tP(t,e)}function tP(t,e){return tP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},tP(t,e)}function nP(t,e,n){return e=Bse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bse(t){var e=sJe(t,"string");return Vm(e)=="symbol"?e:e+""}function sJe(t,e){if(Vm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var N8=1,aJe=function(t){function e(){var n;QZe(this,e);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=eJe(this,e,[].concat(s)),nP(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),nP(n,"handleKeyDown",function(i){if(i.key==="Escape"){var o,l,u,c;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&o!==void 0?o:0,y:(u=(c=n.props.coordinate)===null||c===void 0?void 0:c.y)!==null&&u!==void 0?u:0}})}}),n}return rJe(e,t),JZe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>N8||Math.abs(r.height-this.state.lastBoundingBox.height)>N8)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,s=this.props,a=s.active,i=s.allowEscapeViewBox,o=s.animationDuration,l=s.animationEasing,u=s.children,c=s.coordinate,d=s.hasPayload,h=s.isAnimationActive,m=s.offset,g=s.position,y=s.reverseDirection,b=s.useTranslate3d,w=s.viewBox,C=s.wrapperStyle,k=YZe({allowEscapeViewBox:i,coordinate:c,offsetTopLeft:m,position:g,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:w}),T=k.cssClasses,N=k.cssProperties,I=k8(k8({transition:h&&a?"transform ".concat(o,"ms ").concat(l):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&d?"visible":"hidden",position:"absolute",top:0,left:0},C);return pe.createElement("div",{tabIndex:-1,className:T,style:I,ref:function(D){r.wrapperNode=D}},u)}}])}(L.PureComponent),iJe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ry={isSsr:iJe()};function Wm(t){"@babel/helpers - typeof";return Wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wm(t)}function T8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function $8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T8(Object(n),!0).forEach(function(r){uL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oJe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lJe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vse(r.key),r)}}function uJe(t,e,n){return e&&lJe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cJe(t,e,n){return e=G2(e),dJe(t,Use()?Reflect.construct(e,n||[],G2(t).constructor):e.apply(t,n))}function dJe(t,e){if(e&&(Wm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fJe(t)}function fJe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Use(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Use=function(){return!!t})()}function G2(t){return G2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},G2(t)}function hJe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rP(t,e)}function rP(t,e){return rP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},rP(t,e)}function uL(t,e,n){return e=Vse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vse(t){var e=pJe(t,"string");return Wm(e)=="symbol"?e:e+""}function pJe(t,e){if(Wm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function mJe(t){return t.dataKey}function gJe(t,e){return pe.isValidElement(t)?pe.cloneElement(t,e):typeof t=="function"?pe.createElement(t,e):pe.createElement(WZe,e)}var zo=function(t){function e(){return oJe(this,e),cJe(this,e,arguments)}return hJe(e,t),uJe(e,[{key:"render",value:function(){var r=this,s=this.props,a=s.active,i=s.allowEscapeViewBox,o=s.animationDuration,l=s.animationEasing,u=s.content,c=s.coordinate,d=s.filterNull,h=s.isAnimationActive,m=s.offset,g=s.payload,y=s.payloadUniqBy,b=s.position,w=s.reverseDirection,C=s.useTranslate3d,k=s.viewBox,T=s.wrapperStyle,N=g??[];d&&N.length&&(N=_se(g.filter(function(A){return A.value!=null&&(A.hide!==!0||r.props.includeHidden)}),y,mJe));var I=N.length>0;return pe.createElement(aJe,{allowEscapeViewBox:i,animationDuration:o,animationEasing:l,isAnimationActive:h,active:a,coordinate:c,hasPayload:I,offset:m,position:b,reverseDirection:w,useTranslate3d:C,viewBox:k,wrapperStyle:T},gJe(u,$8($8({},this.props),{},{payload:N})))}}])}(L.PureComponent);uL(zo,"displayName","Tooltip");uL(zo,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ry.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var f_,I8;function yJe(){if(I8)return f_;I8=1;var t=Bu(),e=function(){return t.Date.now()};return f_=e,f_}var h_,E8;function bJe(){if(E8)return h_;E8=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return h_=e,h_}var p_,A8;function xJe(){if(A8)return p_;A8=1;var t=bJe(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return p_=n,p_}var m_,R8;function Wse(){if(R8)return m_;R8=1;var t=xJe(),e=Jd(),n=Iy(),r=NaN,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,o=parseInt;function l(u){if(typeof u=="number")return u;if(n(u))return r;if(e(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=e(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=t(u);var d=a.test(u);return d||i.test(u)?o(u.slice(2),d?2:8):s.test(u)?r:+u}return m_=l,m_}var g_,O8;function vJe(){if(O8)return g_;O8=1;var t=Jd(),e=yJe(),n=Wse(),r="Expected a function",s=Math.max,a=Math.min;function i(o,l,u){var c,d,h,m,g,y,b=0,w=!1,C=!1,k=!0;if(typeof o!="function")throw new TypeError(r);l=n(l)||0,t(u)&&(w=!!u.leading,C="maxWait"in u,h=C?s(n(u.maxWait)||0,l):h,k="trailing"in u?!!u.trailing:k);function T(z){var V=c,W=d;return c=d=void 0,b=z,m=o.apply(W,V),m}function N(z){return b=z,g=setTimeout(D,l),w?T(z):m}function I(z){var V=z-y,W=z-b,j=l-V;return C?a(j,h-W):j}function A(z){var V=z-y,W=z-b;return y===void 0||V>=l||V<0||C&&W>=h}function D(){var z=e();if(A(z))return P(z);g=setTimeout(D,I(z))}function P(z){return g=void 0,k&&c?T(z):(c=d=void 0,m)}function R(){g!==void 0&&clearTimeout(g),b=0,c=y=d=g=void 0}function O(){return g===void 0?m:P(e())}function F(){var z=e(),V=A(z);if(c=arguments,d=this,y=z,V){if(g===void 0)return N(y);if(C)return clearTimeout(g),g=setTimeout(D,l),T(y)}return g===void 0&&(g=setTimeout(D,l)),m}return F.cancel=R,F.flush=O,F}return g_=i,g_}var y_,_8;function wJe(){if(_8)return y_;_8=1;var t=vJe(),e=Jd(),n="Expected a function";function r(s,a,i){var o=!0,l=!0;if(typeof s!="function")throw new TypeError(n);return e(i)&&(o="leading"in i?!!i.leading:o,l="trailing"in i?!!i.trailing:l),t(s,a,{leading:o,maxWait:a,trailing:l})}return y_=r,y_}var SJe=wJe();const Gse=Un(SJe);function Jb(t){"@babel/helpers - typeof";return Jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jb(t)}function D8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function sS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D8(Object(n),!0).forEach(function(r){CJe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CJe(t,e,n){return e=kJe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kJe(t){var e=NJe(t,"string");return Jb(e)=="symbol"?e:e+""}function NJe(t,e){if(Jb(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jb(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TJe(t,e){return AJe(t)||EJe(t,e)||IJe(t,e)||$Je()}function $Je(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IJe(t,e){if(t){if(typeof t=="string")return P8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P8(t,e)}}function P8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function EJe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,i,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function AJe(t){if(Array.isArray(t))return t}var b_=L.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,s=r===void 0?{width:-1,height:-1}:r,a=t.width,i=a===void 0?"100%":a,o=t.height,l=o===void 0?"100%":o,u=t.minWidth,c=u===void 0?0:u,d=t.minHeight,h=t.maxHeight,m=t.children,g=t.debounce,y=g===void 0?0:g,b=t.id,w=t.className,C=t.onResize,k=t.style,T=k===void 0?{}:k,N=L.useRef(null),I=L.useRef();I.current=C,L.useImperativeHandle(e,function(){return Object.defineProperty(N.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),N.current},configurable:!0})});var A=L.useState({containerWidth:s.width,containerHeight:s.height}),D=TJe(A,2),P=D[0],R=D[1],O=L.useCallback(function(z,V){R(function(W){var j=Math.round(z),q=Math.round(V);return W.containerWidth===j&&W.containerHeight===q?W:{containerWidth:j,containerHeight:q}})},[]);L.useEffect(function(){var z=function(Q){var H,ee=Q[0].contentRect,te=ee.width,ne=ee.height;O(te,ne),(H=I.current)===null||H===void 0||H.call(I,te,ne)};y>0&&(z=Gse(z,y,{trailing:!0,leading:!1}));var V=new ResizeObserver(z),W=N.current.getBoundingClientRect(),j=W.width,q=W.height;return O(j,q),V.observe(N.current),function(){V.disconnect()}},[O,y]);var F=L.useMemo(function(){var z=P.containerWidth,V=P.containerHeight;if(z<0||V<0)return null;Sc(Xf(i)||Xf(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,l),Sc(!n||n>0,"The aspect(%s) must be greater than zero.",n);var W=Xf(i)?z:i,j=Xf(l)?V:l;n&&n>0&&(W?j=W/n:j&&(W=j*n),h&&j>h&&(j=h)),Sc(W>0||j>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,W,j,i,l,c,d,n);var q=!Array.isArray(m)&&wc(m.type).endsWith("Chart");return pe.Children.map(m,function(Y){return pe.isValidElement(Y)?L.cloneElement(Y,sS({width:W,height:j},q?{style:sS({height:"100%",width:"100%",maxHeight:j,maxWidth:W},Y.props.style)}:{})):Y})},[n,m,l,h,d,c,P,i]);return pe.createElement("div",{id:b?"".concat(b):void 0,className:mt("recharts-responsive-container",w),style:sS(sS({},T),{},{width:i,height:l,minWidth:c,minHeight:d,maxHeight:h}),ref:N},F)}),Hse=function(e){return null};Hse.displayName="Cell";function ex(t){"@babel/helpers - typeof";return ex=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ex(t)}function M8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function sP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M8(Object(n),!0).forEach(function(r){RJe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M8(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RJe(t,e,n){return e=OJe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OJe(t){var e=_Je(t,"string");return ex(e)=="symbol"?e:e+""}function _Je(t,e){if(ex(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ex(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wp={widthCache:{},cacheCount:0},DJe=2e3,PJe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},j8="recharts_measurement_span";function MJe(t){var e=sP({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var mb=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Ry.isSsr)return{width:0,height:0};var r=MJe(n),s=JSON.stringify({text:e,copyStyle:r});if(Wp.widthCache[s])return Wp.widthCache[s];try{var a=document.getElementById(j8);a||(a=document.createElement("span"),a.setAttribute("id",j8),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var i=sP(sP({},PJe),r);Object.assign(a.style,i),a.textContent="".concat(e);var o=a.getBoundingClientRect(),l={width:o.width,height:o.height};return Wp.widthCache[s]=l,++Wp.cacheCount>DJe&&(Wp.cacheCount=0,Wp.widthCache={}),l}catch{return{width:0,height:0}}},jJe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function tx(t){"@babel/helpers - typeof";return tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tx(t)}function H2(t,e){return BJe(t)||zJe(t,e)||FJe(t,e)||LJe()}function LJe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FJe(t,e){if(t){if(typeof t=="string")return L8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L8(t,e)}}function L8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zJe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,i,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function BJe(t){if(Array.isArray(t))return t}function UJe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F8(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,WJe(r.key),r)}}function VJe(t,e,n){return e&&F8(t.prototype,e),n&&F8(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function WJe(t){var e=GJe(t,"string");return tx(e)=="symbol"?e:e+""}function GJe(t,e){if(tx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var z8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,B8=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,HJe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,qJe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,qse={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},KJe=Object.keys(qse),om="NaN";function XJe(t,e){return t*qse[e]}var aS=function(){function t(e,n){UJe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!HJe.test(n)&&(this.num=NaN,this.unit=""),KJe.includes(n)&&(this.num=XJe(e,n),this.unit="px")}return VJe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,s=(r=qJe.exec(n))!==null&&r!==void 0?r:[],a=H2(s,3),i=a[1],o=a[2];return new t(parseFloat(i),o??"")}}])}();function Kse(t){if(t.includes(om))return om;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=z8.exec(e))!==null&&n!==void 0?n:[],s=H2(r,4),a=s[1],i=s[2],o=s[3],l=aS.parse(a??""),u=aS.parse(o??""),c=i==="*"?l.multiply(u):l.divide(u);if(c.isNaN())return om;e=e.replace(z8,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,h=(d=B8.exec(e))!==null&&d!==void 0?d:[],m=H2(h,4),g=m[1],y=m[2],b=m[3],w=aS.parse(g??""),C=aS.parse(b??""),k=y==="+"?w.add(C):w.subtract(C);if(k.isNaN())return om;e=e.replace(B8,k.toString())}return e}var U8=/\(([^()]*)\)/;function YJe(t){for(var e=t;e.includes("(");){var n=U8.exec(e),r=H2(n,2),s=r[1];e=e.replace(U8,Kse(s))}return e}function QJe(t){var e=t.replace(/\s+/g,"");return e=YJe(e),e=Kse(e),e}function ZJe(t){try{return QJe(t)}catch{return om}}function x_(t){var e=ZJe(t.slice(5,-1));return e===om?"":e}var JJe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],eet=["dx","dy","angle","className","breakAll"];function aP(){return aP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aP.apply(this,arguments)}function V8(t,e){if(t==null)return{};var n=tet(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tet(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function W8(t,e){return aet(t)||set(t,e)||ret(t,e)||net()}function net(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ret(t,e){if(t){if(typeof t=="string")return G8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G8(t,e)}}function G8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function set(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,i,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function aet(t){if(Array.isArray(t))return t}var Xse=/[ \f\n\r\t\v\u2028\u2029]+/,Yse=function(e){var n=e.children,r=e.breakAll,s=e.style;try{var a=[];xn(n)||(r?a=n.toString().split(""):a=n.toString().split(Xse));var i=a.map(function(l){return{word:l,width:mb(l,s).width}}),o=r?0:mb(" ",s).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},iet=function(e,n,r,s,a){var i=e.maxLines,o=e.children,l=e.style,u=e.breakAll,c=ut(i),d=o,h=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return W.reduce(function(j,q){var Y=q.word,Q=q.width,H=j[j.length-1];if(H&&(s==null||a||H.width+Q+r<Number(s)))H.words.push(Y),H.width+=Q+r;else{var ee={words:[Y],width:Q};j.push(ee)}return j},[])},m=h(n),g=function(W){return W.reduce(function(j,q){return j.width>q.width?j:q})};if(!c)return m;for(var y="…",b=function(W){var j=d.slice(0,W),q=Yse({breakAll:u,style:l,children:j+y}).wordsWithComputedWidth,Y=h(q),Q=Y.length>i||g(Y).width>Number(s);return[Q,Y]},w=0,C=d.length-1,k=0,T;w<=C&&k<=d.length-1;){var N=Math.floor((w+C)/2),I=N-1,A=b(I),D=W8(A,2),P=D[0],R=D[1],O=b(N),F=W8(O,1),z=F[0];if(!P&&!z&&(w=N+1),P&&z&&(C=N-1),!P&&z){T=R;break}k++}return T||m},H8=function(e){var n=xn(e)?[]:e.toString().split(Xse);return[{words:n}]},oet=function(e){var n=e.width,r=e.scaleToFit,s=e.children,a=e.style,i=e.breakAll,o=e.maxLines;if((n||r)&&!Ry.isSsr){var l,u,c=Yse({breakAll:i,children:s,style:a});if(c){var d=c.wordsWithComputedWidth,h=c.spaceWidth;l=d,u=h}else return H8(s);return iet({breakAll:i,children:s,maxLines:o,style:a},l,u,n,r)}return H8(s)},q8="#808080",q2=function(e){var n=e.x,r=n===void 0?0:n,s=e.y,a=s===void 0?0:s,i=e.lineHeight,o=i===void 0?"1em":i,l=e.capHeight,u=l===void 0?"0.71em":l,c=e.scaleToFit,d=c===void 0?!1:c,h=e.textAnchor,m=h===void 0?"start":h,g=e.verticalAnchor,y=g===void 0?"end":g,b=e.fill,w=b===void 0?q8:b,C=V8(e,JJe),k=L.useMemo(function(){return oet({breakAll:C.breakAll,children:C.children,maxLines:C.maxLines,scaleToFit:d,style:C.style,width:C.width})},[C.breakAll,C.children,C.maxLines,d,C.style,C.width]),T=C.dx,N=C.dy,I=C.angle,A=C.className,D=C.breakAll,P=V8(C,eet);if(!Fs(r)||!Fs(a))return null;var R=r+(ut(T)?T:0),O=a+(ut(N)?N:0),F;switch(y){case"start":F=x_("calc(".concat(u,")"));break;case"middle":F=x_("calc(".concat((k.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:F=x_("calc(".concat(k.length-1," * -").concat(o,")"));break}var z=[];if(d){var V=k[0].width,W=C.width;z.push("scale(".concat((ut(W)?W/V:1)/V,")"))}return I&&z.push("rotate(".concat(I,", ").concat(R,", ").concat(O,")")),z.length&&(P.transform=z.join(" ")),pe.createElement("text",aP({},wn(P,!0),{x:R,y:O,className:mt("recharts-text",A),textAnchor:m,fill:w.includes("url")?q8:w}),k.map(function(j,q){var Y=j.words.join(D?"":" ");return pe.createElement("tspan",{x:R,dy:q===0?F:o,key:"".concat(Y,"-").concat(q)},Y)}))};function Nd(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function uet(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function cL(t){let e,n,r;t.length!==2?(e=Nd,n=(o,l)=>Nd(t(o),l),r=(o,l)=>t(o)-l):(e=t===Nd||t===uet?t:cet,n=t,r=t);function s(o,l,u=0,c=o.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(o[d],l)<0?u=d+1:c=d}while(u<c)}return u}function a(o,l,u=0,c=o.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(o[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function i(o,l,u=0,c=o.length){const d=s(o,l,u,c-1);return d>u&&r(o[d-1],l)>-r(o[d],l)?d-1:d}return{left:s,center:i,right:a}}function cet(){return 0}function Qse(t){return t===null?NaN:+t}function*det(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const fet=cL(Nd),y1=fet.right;cL(Qse).center;class K8 extends Map{constructor(e,n=met){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,s]of e)this.set(r,s)}get(e){return super.get(X8(this,e))}has(e){return super.has(X8(this,e))}set(e,n){return super.set(het(this,e),n)}delete(e){return super.delete(pet(this,e))}}function X8({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function het({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function pet({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function met(t){return t!==null&&typeof t=="object"?t.valueOf():t}function get(t=Nd){if(t===Nd)return Zse;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function Zse(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const yet=Math.sqrt(50),bet=Math.sqrt(10),xet=Math.sqrt(2);function K2(t,e,n){const r=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(r)),a=r/Math.pow(10,s),i=a>=yet?10:a>=bet?5:a>=xet?2:1;let o,l,u;return s<0?(u=Math.pow(10,-s)/i,o=Math.round(t*u),l=Math.round(e*u),o/u<t&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,s)*i,o=Math.round(t/u),l=Math.round(e/u),o*u<t&&++o,l*u>e&&--l),l<o&&.5<=n&&n<2?K2(t,e,n*2):[o,l,u]}function iP(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[s,a,i]=r?K2(e,t,n):K2(t,e,n);if(!(a>=s))return[];const o=a-s+1,l=new Array(o);if(r)if(i<0)for(let u=0;u<o;++u)l[u]=(a-u)/-i;else for(let u=0;u<o;++u)l[u]=(a-u)*i;else if(i<0)for(let u=0;u<o;++u)l[u]=(s+u)/-i;else for(let u=0;u<o;++u)l[u]=(s+u)*i;return l}function oP(t,e,n){return e=+e,t=+t,n=+n,K2(t,e,n)[2]}function lP(t,e,n){e=+e,t=+t,n=+n;const r=e<t,s=r?oP(e,t,n):oP(t,e,n);return(r?-1:1)*(s<0?1/-s:s)}function Y8(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function Q8(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function Jse(t,e,n=0,r=1/0,s){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(s=s===void 0?Zse:get(s);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1),m=Math.max(n,Math.floor(e-u*d/l+h)),g=Math.min(r,Math.floor(e+(l-u)*d/l+h));Jse(t,e,m,g,s)}const a=t[e];let i=n,o=r;for(V0(t,n,e),s(t[r],a)>0&&V0(t,n,r);i<o;){for(V0(t,i,o),++i,--o;s(t[i],a)<0;)++i;for(;s(t[o],a)>0;)--o}s(t[n],a)===0?V0(t,n,o):(++o,V0(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function V0(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function vet(t,e,n){if(t=Float64Array.from(det(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Q8(t);if(e>=1)return Y8(t);var r,s=(r-1)*e,a=Math.floor(s),i=Y8(Jse(t,a).subarray(0,a+1)),o=Q8(t.subarray(a+1));return i+(o-i)*(s-a)}}function wet(t,e,n=Qse){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,s=(r-1)*e,a=Math.floor(s),i=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return i+(o-i)*(s-a)}}function Cet(t,e,n){t=+t,e=+e,n=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(s);++r<s;)a[r]=t+r*n;return a}function ll(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Bc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const uP=Symbol("implicit");function dL(){var t=new K8,e=[],n=[],r=uP;function s(a){let i=t.get(a);if(i===void 0){if(r!==uP)return r;t.set(a,i=e.push(a)-1)}return n[i%n.length]}return s.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new K8;for(const i of a)t.has(i)||t.set(i,e.push(i)-1);return s},s.range=function(a){return arguments.length?(n=Array.from(a),s):n.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return dL(e,n).unknown(r)},ll.apply(s,arguments),s}function nx(){var t=dL().unknown(void 0),e=t.domain,n=t.range,r=0,s=1,a,i,o=!1,l=0,u=0,c=.5;delete t.unknown;function d(){var h=e().length,m=s<r,g=m?s:r,y=m?r:s;a=(y-g)/Math.max(1,h-l+u*2),o&&(a=Math.floor(a)),g+=(y-g-a*(h-l))*c,i=a*(1-l),o&&(g=Math.round(g),i=Math.round(i));var b=Cet(h).map(function(w){return g+a*w});return n(m?b.reverse():b)}return t.domain=function(h){return arguments.length?(e(h),d()):e()},t.range=function(h){return arguments.length?([r,s]=h,r=+r,s=+s,d()):[r,s]},t.rangeRound=function(h){return[r,s]=h,r=+r,s=+s,o=!0,d()},t.bandwidth=function(){return i},t.step=function(){return a},t.round=function(h){return arguments.length?(o=!!h,d()):o},t.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),d()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},t.paddingOuter=function(h){return arguments.length?(u=+h,d()):u},t.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),d()):c},t.copy=function(){return nx(e(),[r,s]).round(o).paddingInner(l).paddingOuter(u).align(c)},ll.apply(d(),arguments)}function eae(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return eae(e())},t}function gb(){return eae(nx.apply(null,arguments).paddingInner(1))}function fL(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function tae(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function b1(){}var rx=.7,X2=1/rx,bm="\\s*([+-]?\\d+)\\s*",sx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Su="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ket=/^#([0-9a-f]{3,8})$/,Net=new RegExp(`^rgb\\(${bm},${bm},${bm}\\)$`),Tet=new RegExp(`^rgb\\(${Su},${Su},${Su}\\)$`),$et=new RegExp(`^rgba\\(${bm},${bm},${bm},${sx}\\)$`),Iet=new RegExp(`^rgba\\(${Su},${Su},${Su},${sx}\\)$`),Eet=new RegExp(`^hsl\\(${sx},${Su},${Su}\\)$`),Aet=new RegExp(`^hsla\\(${sx},${Su},${Su},${sx}\\)$`),Z8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fL(b1,ax,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:J8,formatHex:J8,formatHex8:Ret,formatHsl:Oet,formatRgb:eq,toString:eq});function J8(){return this.rgb().formatHex()}function Ret(){return this.rgb().formatHex8()}function Oet(){return nae(this).formatHsl()}function eq(){return this.rgb().formatRgb()}function ax(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ket.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?tq(e):n===3?new $i(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?iS(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?iS(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Net.exec(t))?new $i(e[1],e[2],e[3],1):(e=Tet.exec(t))?new $i(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=$et.exec(t))?iS(e[1],e[2],e[3],e[4]):(e=Iet.exec(t))?iS(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Eet.exec(t))?sq(e[1],e[2]/100,e[3]/100,1):(e=Aet.exec(t))?sq(e[1],e[2]/100,e[3]/100,e[4]):Z8.hasOwnProperty(t)?tq(Z8[t]):t==="transparent"?new $i(NaN,NaN,NaN,0):null}function tq(t){return new $i(t>>16&255,t>>8&255,t&255,1)}function iS(t,e,n,r){return r<=0&&(t=e=n=NaN),new $i(t,e,n,r)}function _et(t){return t instanceof b1||(t=ax(t)),t?(t=t.rgb(),new $i(t.r,t.g,t.b,t.opacity)):new $i}function cP(t,e,n,r){return arguments.length===1?_et(t):new $i(t,e,n,r??1)}function $i(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}fL($i,cP,tae(b1,{brighter(t){return t=t==null?X2:Math.pow(X2,t),new $i(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?rx:Math.pow(rx,t),new $i(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new $i(ih(this.r),ih(this.g),ih(this.b),Y2(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:nq,formatHex:nq,formatHex8:Det,formatRgb:rq,toString:rq}));function nq(){return`#${Yf(this.r)}${Yf(this.g)}${Yf(this.b)}`}function Det(){return`#${Yf(this.r)}${Yf(this.g)}${Yf(this.b)}${Yf((isNaN(this.opacity)?1:this.opacity)*255)}`}function rq(){const t=Y2(this.opacity);return`${t===1?"rgb(":"rgba("}${ih(this.r)}, ${ih(this.g)}, ${ih(this.b)}${t===1?")":`, ${t})`}`}function Y2(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ih(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Yf(t){return t=ih(t),(t<16?"0":"")+t.toString(16)}function sq(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ol(t,e,n,r)}function nae(t){if(t instanceof Ol)return new Ol(t.h,t.s,t.l,t.opacity);if(t instanceof b1||(t=ax(t)),!t)return new Ol;if(t instanceof Ol)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),a=Math.max(e,n,r),i=NaN,o=a-s,l=(a+s)/2;return o?(e===a?i=(n-r)/o+(n<r)*6:n===a?i=(r-e)/o+2:i=(e-n)/o+4,o/=l<.5?a+s:2-a-s,i*=60):o=l>0&&l<1?0:i,new Ol(i,o,l,t.opacity)}function Pet(t,e,n,r){return arguments.length===1?nae(t):new Ol(t,e,n,r??1)}function Ol(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}fL(Ol,Pet,tae(b1,{brighter(t){return t=t==null?X2:Math.pow(X2,t),new Ol(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?rx:Math.pow(rx,t),new Ol(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new $i(v_(t>=240?t-240:t+120,s,r),v_(t,s,r),v_(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new Ol(aq(this.h),oS(this.s),oS(this.l),Y2(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Y2(this.opacity);return`${t===1?"hsl(":"hsla("}${aq(this.h)}, ${oS(this.s)*100}%, ${oS(this.l)*100}%${t===1?")":`, ${t})`}`}}));function aq(t){return t=(t||0)%360,t<0?t+360:t}function oS(t){return Math.max(0,Math.min(1,t||0))}function v_(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const hL=t=>()=>t;function Met(t,e){return function(n){return t+n*e}}function jet(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Let(t){return(t=+t)==1?rae:function(e,n){return n-e?jet(e,n,t):hL(isNaN(e)?n:e)}}function rae(t,e){var n=e-t;return n?Met(t,n):hL(isNaN(t)?e:t)}const iq=function t(e){var n=Let(e);function r(s,a){var i=n((s=cP(s)).r,(a=cP(a)).r),o=n(s.g,a.g),l=n(s.b,a.b),u=rae(s.opacity,a.opacity);return function(c){return s.r=i(c),s.g=o(c),s.b=l(c),s.opacity=u(c),s+""}}return r.gamma=t,r}(1);function Fet(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),s;return function(a){for(s=0;s<n;++s)r[s]=t[s]*(1-a)+e[s]*a;return r}}function zet(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Bet(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,s=new Array(r),a=new Array(n),i;for(i=0;i<r;++i)s[i]=Oy(t[i],e[i]);for(;i<n;++i)a[i]=e[i];return function(o){for(i=0;i<r;++i)a[i]=s[i](o);return a}}function Uet(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Q2(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Vet(t,e){var n={},r={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=Oy(t[s],e[s]):r[s]=e[s];return function(a){for(s in n)r[s]=n[s](a);return r}}var dP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,w_=new RegExp(dP.source,"g");function Wet(t){return function(){return t}}function Get(t){return function(e){return t(e)+""}}function Het(t,e){var n=dP.lastIndex=w_.lastIndex=0,r,s,a,i=-1,o=[],l=[];for(t=t+"",e=e+"";(r=dP.exec(t))&&(s=w_.exec(e));)(a=s.index)>n&&(a=e.slice(n,a),o[i]?o[i]+=a:o[++i]=a),(r=r[0])===(s=s[0])?o[i]?o[i]+=s:o[++i]=s:(o[++i]=null,l.push({i,x:Q2(r,s)})),n=w_.lastIndex;return n<e.length&&(a=e.slice(n),o[i]?o[i]+=a:o[++i]=a),o.length<2?l[0]?Get(l[0].x):Wet(e):(e=l.length,function(u){for(var c=0,d;c<e;++c)o[(d=l[c]).i]=d.x(u);return o.join("")})}function Oy(t,e){var n=typeof e,r;return e==null||n==="boolean"?hL(e):(n==="number"?Q2:n==="string"?(r=ax(e))?(e=r,iq):Het:e instanceof ax?iq:e instanceof Date?Uet:zet(e)?Fet:Array.isArray(e)?Bet:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Vet:Q2)(t,e)}function pL(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function qet(t,e){e===void 0&&(e=t,t=Oy);for(var n=0,r=e.length-1,s=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(s,s=e[++n]);return function(i){var o=Math.max(0,Math.min(r-1,Math.floor(i*=r)));return a[o](i-o)}}function Ket(t){return function(){return t}}function Z2(t){return+t}var oq=[0,1];function ai(t){return t}function fP(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Ket(isNaN(e)?NaN:.5)}function Xet(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Yet(t,e,n){var r=t[0],s=t[1],a=e[0],i=e[1];return s<r?(r=fP(s,r),a=n(i,a)):(r=fP(r,s),a=n(a,i)),function(o){return a(r(o))}}function Qet(t,e,n){var r=Math.min(t.length,e.length)-1,s=new Array(r),a=new Array(r),i=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<r;)s[i]=fP(t[i],t[i+1]),a[i]=n(e[i],e[i+1]);return function(o){var l=y1(t,o,1,r)-1;return a[l](s[l](o))}}function x1(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function kT(){var t=oq,e=oq,n=Oy,r,s,a,i=ai,o,l,u;function c(){var h=Math.min(t.length,e.length);return i!==ai&&(i=Xet(t[0],t[h-1])),o=h>2?Qet:Yet,l=u=null,d}function d(h){return h==null||isNaN(h=+h)?a:(l||(l=o(t.map(r),e,n)))(r(i(h)))}return d.invert=function(h){return i(s((u||(u=o(e,t.map(r),Q2)))(h)))},d.domain=function(h){return arguments.length?(t=Array.from(h,Z2),c()):t.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),n=pL,c()},d.clamp=function(h){return arguments.length?(i=h?!0:ai,c()):i!==ai},d.interpolate=function(h){return arguments.length?(n=h,c()):n},d.unknown=function(h){return arguments.length?(a=h,d):a},function(h,m){return r=h,s=m,c()}}function mL(){return kT()(ai,ai)}function Zet(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function J2(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Gm(t){return t=J2(Math.abs(t)),t?t[1]:NaN}function Jet(t,e){return function(n,r){for(var s=n.length,a=[],i=0,o=t[0],l=0;s>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),a.push(n.substring(s-=o,s+o)),!((l+=o+1)>r));)o=t[i=(i+1)%t.length];return a.reverse().join(e)}}function ett(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var ttt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ix(t){if(!(e=ttt.exec(t)))throw new Error("invalid format: "+t);var e;return new gL({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ix.prototype=gL.prototype;function gL(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}gL.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ntt(t){e:for(var e=t.length,n=1,r=-1,s;n<e;++n)switch(t[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(s+1):t}var sae;function rtt(t,e){var n=J2(t,e);if(!n)return t+"";var r=n[0],s=n[1],a=s-(sae=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,i=r.length;return a===i?r:a>i?r+new Array(a-i+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+J2(t,Math.max(0,e+a-1))[0]}function lq(t,e){var n=J2(t,e);if(!n)return t+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const uq={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Zet,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>lq(t*100,e),r:lq,s:rtt,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function cq(t){return t}var dq=Array.prototype.map,fq=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function stt(t){var e=t.grouping===void 0||t.thousands===void 0?cq:Jet(dq.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?cq:ett(dq.call(t.numerals,String)),i=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(d){d=ix(d);var h=d.fill,m=d.align,g=d.sign,y=d.symbol,b=d.zero,w=d.width,C=d.comma,k=d.precision,T=d.trim,N=d.type;N==="n"?(C=!0,N="g"):uq[N]||(k===void 0&&(k=12),T=!0,N="g"),(b||h==="0"&&m==="=")&&(b=!0,h="0",m="=");var I=y==="$"?n:y==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",A=y==="$"?r:/[%p]/.test(N)?i:"",D=uq[N],P=/[defgprs%]/.test(N);k=k===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function R(O){var F=I,z=A,V,W,j;if(N==="c")z=D(O)+z,O="";else{O=+O;var q=O<0||1/O<0;if(O=isNaN(O)?l:D(Math.abs(O),k),T&&(O=ntt(O)),q&&+O==0&&g!=="+"&&(q=!1),F=(q?g==="("?g:o:g==="-"||g==="("?"":g)+F,z=(N==="s"?fq[8+sae/3]:"")+z+(q&&g==="("?")":""),P){for(V=-1,W=O.length;++V<W;)if(j=O.charCodeAt(V),48>j||j>57){z=(j===46?s+O.slice(V+1):O.slice(V))+z,O=O.slice(0,V);break}}}C&&!b&&(O=e(O,1/0));var Y=F.length+O.length+z.length,Q=Y<w?new Array(w-Y+1).join(h):"";switch(C&&b&&(O=e(Q+O,Q.length?w-z.length:1/0),Q=""),m){case"<":O=F+O+z+Q;break;case"=":O=F+Q+O+z;break;case"^":O=Q.slice(0,Y=Q.length>>1)+F+O+z+Q.slice(Y);break;default:O=Q+F+O+z;break}return a(O)}return R.toString=function(){return d+""},R}function c(d,h){var m=u((d=ix(d),d.type="f",d)),g=Math.max(-8,Math.min(8,Math.floor(Gm(h)/3)))*3,y=Math.pow(10,-g),b=fq[8+g/3];return function(w){return m(y*w)+b}}return{format:u,formatPrefix:c}}var lS,yL,aae;att({thousands:",",grouping:[3],currency:["$",""]});function att(t){return lS=stt(t),yL=lS.format,aae=lS.formatPrefix,lS}function itt(t){return Math.max(0,-Gm(Math.abs(t)))}function ott(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Gm(e)/3)))*3-Gm(Math.abs(t)))}function ltt(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Gm(e)-Gm(t))+1}function iae(t,e,n,r){var s=lP(t,e,n),a;switch(r=ix(r??",f"),r.type){case"s":{var i=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=ott(s,i))&&(r.precision=a),aae(r,i)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=ltt(s,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=itt(s))&&(r.precision=a-(r.type==="%")*2);break}}return yL(r)}function tf(t){var e=t.domain;return t.ticks=function(n){var r=e();return iP(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var s=e();return iae(s[0],s[s.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),s=0,a=r.length-1,i=r[s],o=r[a],l,u,c=10;for(o<i&&(u=i,i=o,o=u,u=s,s=a,a=u);c-- >0;){if(u=oP(i,o,n),u===l)return r[s]=i,r[a]=o,e(r);if(u>0)i=Math.floor(i/u)*u,o=Math.ceil(o/u)*u;else if(u<0)i=Math.ceil(i*u)/u,o=Math.floor(o*u)/u;else break;l=u}return t},t}function eC(){var t=mL();return t.copy=function(){return x1(t,eC())},ll.apply(t,arguments),tf(t)}function oae(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Z2),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return oae(t).unknown(e)},t=arguments.length?Array.from(t,Z2):[0,1],tf(n)}function lae(t,e){t=t.slice();var n=0,r=t.length-1,s=t[n],a=t[r],i;return a<s&&(i=n,n=r,r=i,i=s,s=a,a=i),t[n]=e.floor(s),t[r]=e.ceil(a),t}function hq(t){return Math.log(t)}function pq(t){return Math.exp(t)}function utt(t){return-Math.log(-t)}function ctt(t){return-Math.exp(-t)}function dtt(t){return isFinite(t)?+("1e"+t):t<0?0:t}function ftt(t){return t===10?dtt:t===Math.E?Math.exp:e=>Math.pow(t,e)}function htt(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function mq(t){return(e,n)=>-t(-e,n)}function bL(t){const e=t(hq,pq),n=e.domain;let r=10,s,a;function i(){return s=htt(r),a=ftt(r),n()[0]<0?(s=mq(s),a=mq(a),t(utt,ctt)):t(hq,pq),e}return e.base=function(o){return arguments.length?(r=+o,i()):r},e.domain=function(o){return arguments.length?(n(o),i()):n()},e.ticks=o=>{const l=n();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let h=s(u),m=s(c),g,y;const b=o==null?10:+o;let w=[];if(!(r%1)&&m-h<b){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<r;++g)if(y=h<0?g/a(-h):g*a(h),!(y<u)){if(y>c)break;w.push(y)}}else for(;h<=m;++h)for(g=r-1;g>=1;--g)if(y=h>0?g/a(-h):g*a(h),!(y<u)){if(y>c)break;w.push(y)}w.length*2<b&&(w=iP(u,c,b))}else w=iP(h,m,Math.min(m-h,b)).map(a);return d?w.reverse():w},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=ix(l)).precision==null&&(l.trim=!0),l=yL(l)),o===1/0)return l;const u=Math.max(1,r*o/e.ticks().length);return c=>{let d=c/a(Math.round(s(c)));return d*r<r-.5&&(d*=r),d<=u?l(c):""}},e.nice=()=>n(lae(n(),{floor:o=>a(Math.floor(s(o))),ceil:o=>a(Math.ceil(s(o)))})),e}function uae(){const t=bL(kT()).domain([1,10]);return t.copy=()=>x1(t,uae()).base(t.base()),ll.apply(t,arguments),t}function gq(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function yq(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function xL(t){var e=1,n=t(gq(e),yq(e));return n.constant=function(r){return arguments.length?t(gq(e=+r),yq(e)):e},tf(n)}function cae(){var t=xL(kT());return t.copy=function(){return x1(t,cae()).constant(t.constant())},ll.apply(t,arguments)}function bq(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function ptt(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function mtt(t){return t<0?-t*t:t*t}function vL(t){var e=t(ai,ai),n=1;function r(){return n===1?t(ai,ai):n===.5?t(ptt,mtt):t(bq(n),bq(1/n))}return e.exponent=function(s){return arguments.length?(n=+s,r()):n},tf(e)}function wL(){var t=vL(kT());return t.copy=function(){return x1(t,wL()).exponent(t.exponent())},ll.apply(t,arguments),t}function gtt(){return wL.apply(null,arguments).exponent(.5)}function xq(t){return Math.sign(t)*t*t}function ytt(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function dae(){var t=mL(),e=[0,1],n=!1,r;function s(a){var i=ytt(t(a));return isNaN(i)?r:n?Math.round(i):i}return s.invert=function(a){return t.invert(xq(a))},s.domain=function(a){return arguments.length?(t.domain(a),s):t.domain()},s.range=function(a){return arguments.length?(t.range((e=Array.from(a,Z2)).map(xq)),s):e.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(n=!!a,s):n},s.clamp=function(a){return arguments.length?(t.clamp(a),s):t.clamp()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return dae(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},ll.apply(s,arguments),tf(s)}function fae(){var t=[],e=[],n=[],r;function s(){var i=0,o=Math.max(1,e.length);for(n=new Array(o-1);++i<o;)n[i-1]=wet(t,i/o);return a}function a(i){return i==null||isNaN(i=+i)?r:e[y1(n,i)]}return a.invertExtent=function(i){var o=e.indexOf(i);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let o of i)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Nd),s()},a.range=function(i){return arguments.length?(e=Array.from(i),s()):e.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return fae().domain(t).range(e).unknown(r)},ll.apply(a,arguments)}function hae(){var t=0,e=1,n=1,r=[.5],s=[0,1],a;function i(l){return l!=null&&l<=l?s[y1(r,l,0,n)]:a}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return i}return i.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},i.range=function(l){return arguments.length?(n=(s=Array.from(l)).length-1,o()):s.slice()},i.invertExtent=function(l){var u=s.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},i.unknown=function(l){return arguments.length&&(a=l),i},i.thresholds=function(){return r.slice()},i.copy=function(){return hae().domain([t,e]).range(s).unknown(a)},ll.apply(tf(i),arguments)}function pae(){var t=[.5],e=[0,1],n,r=1;function s(a){return a!=null&&a<=a?e[y1(t,a,0,r)]:n}return s.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(a){var i=e.indexOf(a);return[t[i-1],t[i]]},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return pae().domain(t).range(e).unknown(n)},ll.apply(s,arguments)}const S_=new Date,C_=new Date;function Us(t,e,n,r){function s(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(t(a=new Date(+a)),a),s.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),s.round=a=>{const i=s(a),o=s.ceil(a);return a-i<o-a?i:o},s.offset=(a,i)=>(e(a=new Date(+a),i==null?1:Math.floor(i)),a),s.range=(a,i,o)=>{const l=[];if(a=s.ceil(a),o=o==null?1:Math.floor(o),!(a<i)||!(o>0))return l;let u;do l.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<i);return l},s.filter=a=>Us(i=>{if(i>=i)for(;t(i),!a(i);)i.setTime(i-1)},(i,o)=>{if(i>=i)if(o<0)for(;++o<=0;)for(;e(i,-1),!a(i););else for(;--o>=0;)for(;e(i,1),!a(i););}),n&&(s.count=(a,i)=>(S_.setTime(+a),C_.setTime(+i),t(S_),t(C_),Math.floor(n(S_,C_))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(r?i=>r(i)%a===0:i=>s.count(0,i)%a===0):s)),s}const tC=Us(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);tC.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Us(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):tC);tC.range;const dc=1e3,Ko=dc*60,fc=Ko*60,Ac=fc*24,SL=Ac*7,vq=Ac*30,k_=Ac*365,Qf=Us(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*dc)},(t,e)=>(e-t)/dc,t=>t.getUTCSeconds());Qf.range;const CL=Us(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*dc)},(t,e)=>{t.setTime(+t+e*Ko)},(t,e)=>(e-t)/Ko,t=>t.getMinutes());CL.range;const kL=Us(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ko)},(t,e)=>(e-t)/Ko,t=>t.getUTCMinutes());kL.range;const NL=Us(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*dc-t.getMinutes()*Ko)},(t,e)=>{t.setTime(+t+e*fc)},(t,e)=>(e-t)/fc,t=>t.getHours());NL.range;const TL=Us(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*fc)},(t,e)=>(e-t)/fc,t=>t.getUTCHours());TL.range;const v1=Us(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ko)/Ac,t=>t.getDate()-1);v1.range;const NT=Us(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ac,t=>t.getUTCDate()-1);NT.range;const mae=Us(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ac,t=>Math.floor(t/Ac));mae.range;function Zh(t){return Us(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ko)/SL)}const TT=Zh(0),nC=Zh(1),btt=Zh(2),xtt=Zh(3),Hm=Zh(4),vtt=Zh(5),wtt=Zh(6);TT.range;nC.range;btt.range;xtt.range;Hm.range;vtt.range;wtt.range;function Jh(t){return Us(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/SL)}const $T=Jh(0),rC=Jh(1),Stt=Jh(2),Ctt=Jh(3),qm=Jh(4),ktt=Jh(5),Ntt=Jh(6);$T.range;rC.range;Stt.range;Ctt.range;qm.range;ktt.range;Ntt.range;const $L=Us(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());$L.range;const IL=Us(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());IL.range;const Rc=Us(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Rc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Us(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Rc.range;const Oc=Us(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Oc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Us(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Oc.range;function gae(t,e,n,r,s,a){const i=[[Qf,1,dc],[Qf,5,5*dc],[Qf,15,15*dc],[Qf,30,30*dc],[a,1,Ko],[a,5,5*Ko],[a,15,15*Ko],[a,30,30*Ko],[s,1,fc],[s,3,3*fc],[s,6,6*fc],[s,12,12*fc],[r,1,Ac],[r,2,2*Ac],[n,1,SL],[e,1,vq],[e,3,3*vq],[t,1,k_]];function o(u,c,d){const h=c<u;h&&([u,c]=[c,u]);const m=d&&typeof d.range=="function"?d:l(u,c,d),g=m?m.range(u,+c+1):[];return h?g.reverse():g}function l(u,c,d){const h=Math.abs(c-u)/d,m=cL(([,,b])=>b).right(i,h);if(m===i.length)return t.every(lP(u/k_,c/k_,d));if(m===0)return tC.every(Math.max(lP(u,c,d),1));const[g,y]=i[h/i[m-1][2]<i[m][2]/h?m-1:m];return g.every(y)}return[o,l]}const[Ttt,$tt]=gae(Oc,IL,$T,mae,TL,kL),[Itt,Ett]=gae(Rc,$L,TT,v1,NL,CL);function N_(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function T_(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function W0(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Att(t){var e=t.dateTime,n=t.date,r=t.time,s=t.periods,a=t.days,i=t.shortDays,o=t.months,l=t.shortMonths,u=G0(s),c=H0(s),d=G0(a),h=H0(a),m=G0(i),g=H0(i),y=G0(o),b=H0(o),w=G0(l),C=H0(l),k={a:q,A:Y,b:Q,B:H,c:null,d:Tq,e:Tq,f:Jtt,g:unt,G:dnt,H:Ytt,I:Qtt,j:Ztt,L:yae,m:ent,M:tnt,p:ee,q:te,Q:Eq,s:Aq,S:nnt,u:rnt,U:snt,V:ant,w:int,W:ont,x:null,X:null,y:lnt,Y:cnt,Z:fnt,"%":Iq},T={a:ne,A:he,b:Se,B:Ie,c:null,d:$q,e:$q,f:gnt,g:Tnt,G:Int,H:hnt,I:pnt,j:mnt,L:xae,m:ynt,M:bnt,p:Qe,q:Ve,Q:Eq,s:Aq,S:xnt,u:vnt,U:wnt,V:Snt,w:Cnt,W:knt,x:null,X:null,y:Nnt,Y:$nt,Z:Ent,"%":Iq},N={a:R,A:O,b:F,B:z,c:V,d:kq,e:kq,f:Htt,g:Cq,G:Sq,H:Nq,I:Nq,j:Utt,L:Gtt,m:Btt,M:Vtt,p:P,q:ztt,Q:Ktt,s:Xtt,S:Wtt,u:Ptt,U:Mtt,V:jtt,w:Dtt,W:Ltt,x:W,X:j,y:Cq,Y:Sq,Z:Ftt,"%":qtt};k.x=I(n,k),k.X=I(r,k),k.c=I(e,k),T.x=I(n,T),T.X=I(r,T),T.c=I(e,T);function I($e,We){return function(ze){var ke=[],et=-1,Je=0,Re=$e.length,Ke,xe,De;for(ze instanceof Date||(ze=new Date(+ze));++et<Re;)$e.charCodeAt(et)===37&&(ke.push($e.slice(Je,et)),(xe=wq[Ke=$e.charAt(++et)])!=null?Ke=$e.charAt(++et):xe=Ke==="e"?" ":"0",(De=We[Ke])&&(Ke=De(ze,xe)),ke.push(Ke),Je=et+1);return ke.push($e.slice(Je,et)),ke.join("")}}function A($e,We){return function(ze){var ke=W0(1900,void 0,1),et=D(ke,$e,ze+="",0),Je,Re;if(et!=ze.length)return null;if("Q"in ke)return new Date(ke.Q);if("s"in ke)return new Date(ke.s*1e3+("L"in ke?ke.L:0));if(We&&!("Z"in ke)&&(ke.Z=0),"p"in ke&&(ke.H=ke.H%12+ke.p*12),ke.m===void 0&&(ke.m="q"in ke?ke.q:0),"V"in ke){if(ke.V<1||ke.V>53)return null;"w"in ke||(ke.w=1),"Z"in ke?(Je=T_(W0(ke.y,0,1)),Re=Je.getUTCDay(),Je=Re>4||Re===0?rC.ceil(Je):rC(Je),Je=NT.offset(Je,(ke.V-1)*7),ke.y=Je.getUTCFullYear(),ke.m=Je.getUTCMonth(),ke.d=Je.getUTCDate()+(ke.w+6)%7):(Je=N_(W0(ke.y,0,1)),Re=Je.getDay(),Je=Re>4||Re===0?nC.ceil(Je):nC(Je),Je=v1.offset(Je,(ke.V-1)*7),ke.y=Je.getFullYear(),ke.m=Je.getMonth(),ke.d=Je.getDate()+(ke.w+6)%7)}else("W"in ke||"U"in ke)&&("w"in ke||(ke.w="u"in ke?ke.u%7:"W"in ke?1:0),Re="Z"in ke?T_(W0(ke.y,0,1)).getUTCDay():N_(W0(ke.y,0,1)).getDay(),ke.m=0,ke.d="W"in ke?(ke.w+6)%7+ke.W*7-(Re+5)%7:ke.w+ke.U*7-(Re+6)%7);return"Z"in ke?(ke.H+=ke.Z/100|0,ke.M+=ke.Z%100,T_(ke)):N_(ke)}}function D($e,We,ze,ke){for(var et=0,Je=We.length,Re=ze.length,Ke,xe;et<Je;){if(ke>=Re)return-1;if(Ke=We.charCodeAt(et++),Ke===37){if(Ke=We.charAt(et++),xe=N[Ke in wq?We.charAt(et++):Ke],!xe||(ke=xe($e,ze,ke))<0)return-1}else if(Ke!=ze.charCodeAt(ke++))return-1}return ke}function P($e,We,ze){var ke=u.exec(We.slice(ze));return ke?($e.p=c.get(ke[0].toLowerCase()),ze+ke[0].length):-1}function R($e,We,ze){var ke=m.exec(We.slice(ze));return ke?($e.w=g.get(ke[0].toLowerCase()),ze+ke[0].length):-1}function O($e,We,ze){var ke=d.exec(We.slice(ze));return ke?($e.w=h.get(ke[0].toLowerCase()),ze+ke[0].length):-1}function F($e,We,ze){var ke=w.exec(We.slice(ze));return ke?($e.m=C.get(ke[0].toLowerCase()),ze+ke[0].length):-1}function z($e,We,ze){var ke=y.exec(We.slice(ze));return ke?($e.m=b.get(ke[0].toLowerCase()),ze+ke[0].length):-1}function V($e,We,ze){return D($e,e,We,ze)}function W($e,We,ze){return D($e,n,We,ze)}function j($e,We,ze){return D($e,r,We,ze)}function q($e){return i[$e.getDay()]}function Y($e){return a[$e.getDay()]}function Q($e){return l[$e.getMonth()]}function H($e){return o[$e.getMonth()]}function ee($e){return s[+($e.getHours()>=12)]}function te($e){return 1+~~($e.getMonth()/3)}function ne($e){return i[$e.getUTCDay()]}function he($e){return a[$e.getUTCDay()]}function Se($e){return l[$e.getUTCMonth()]}function Ie($e){return o[$e.getUTCMonth()]}function Qe($e){return s[+($e.getUTCHours()>=12)]}function Ve($e){return 1+~~($e.getUTCMonth()/3)}return{format:function($e){var We=I($e+="",k);return We.toString=function(){return $e},We},parse:function($e){var We=A($e+="",!1);return We.toString=function(){return $e},We},utcFormat:function($e){var We=I($e+="",T);return We.toString=function(){return $e},We},utcParse:function($e){var We=A($e+="",!0);return We.toString=function(){return $e},We}}}var wq={"-":"",_:" ",0:"0"},ra=/^\s*\d+/,Rtt=/^%/,Ott=/[\\^$*+?|[\]().{}]/g;function En(t,e,n){var r=t<0?"-":"",s=(r?-t:t)+"",a=s.length;return r+(a<n?new Array(n-a+1).join(e)+s:s)}function _tt(t){return t.replace(Ott,"\\$&")}function G0(t){return new RegExp("^(?:"+t.map(_tt).join("|")+")","i")}function H0(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Dtt(t,e,n){var r=ra.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Ptt(t,e,n){var r=ra.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Mtt(t,e,n){var r=ra.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function jtt(t,e,n){var r=ra.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Ltt(t,e,n){var r=ra.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Sq(t,e,n){var r=ra.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Cq(t,e,n){var r=ra.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ftt(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function ztt(t,e,n){var r=ra.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Btt(t,e,n){var r=ra.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function kq(t,e,n){var r=ra.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Utt(t,e,n){var r=ra.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Nq(t,e,n){var r=ra.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Vtt(t,e,n){var r=ra.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Wtt(t,e,n){var r=ra.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Gtt(t,e,n){var r=ra.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Htt(t,e,n){var r=ra.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function qtt(t,e,n){var r=Rtt.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Ktt(t,e,n){var r=ra.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Xtt(t,e,n){var r=ra.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Tq(t,e){return En(t.getDate(),e,2)}function Ytt(t,e){return En(t.getHours(),e,2)}function Qtt(t,e){return En(t.getHours()%12||12,e,2)}function Ztt(t,e){return En(1+v1.count(Rc(t),t),e,3)}function yae(t,e){return En(t.getMilliseconds(),e,3)}function Jtt(t,e){return yae(t,e)+"000"}function ent(t,e){return En(t.getMonth()+1,e,2)}function tnt(t,e){return En(t.getMinutes(),e,2)}function nnt(t,e){return En(t.getSeconds(),e,2)}function rnt(t){var e=t.getDay();return e===0?7:e}function snt(t,e){return En(TT.count(Rc(t)-1,t),e,2)}function bae(t){var e=t.getDay();return e>=4||e===0?Hm(t):Hm.ceil(t)}function ant(t,e){return t=bae(t),En(Hm.count(Rc(t),t)+(Rc(t).getDay()===4),e,2)}function int(t){return t.getDay()}function ont(t,e){return En(nC.count(Rc(t)-1,t),e,2)}function lnt(t,e){return En(t.getFullYear()%100,e,2)}function unt(t,e){return t=bae(t),En(t.getFullYear()%100,e,2)}function cnt(t,e){return En(t.getFullYear()%1e4,e,4)}function dnt(t,e){var n=t.getDay();return t=n>=4||n===0?Hm(t):Hm.ceil(t),En(t.getFullYear()%1e4,e,4)}function fnt(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+En(e/60|0,"0",2)+En(e%60,"0",2)}function $q(t,e){return En(t.getUTCDate(),e,2)}function hnt(t,e){return En(t.getUTCHours(),e,2)}function pnt(t,e){return En(t.getUTCHours()%12||12,e,2)}function mnt(t,e){return En(1+NT.count(Oc(t),t),e,3)}function xae(t,e){return En(t.getUTCMilliseconds(),e,3)}function gnt(t,e){return xae(t,e)+"000"}function ynt(t,e){return En(t.getUTCMonth()+1,e,2)}function bnt(t,e){return En(t.getUTCMinutes(),e,2)}function xnt(t,e){return En(t.getUTCSeconds(),e,2)}function vnt(t){var e=t.getUTCDay();return e===0?7:e}function wnt(t,e){return En($T.count(Oc(t)-1,t),e,2)}function vae(t){var e=t.getUTCDay();return e>=4||e===0?qm(t):qm.ceil(t)}function Snt(t,e){return t=vae(t),En(qm.count(Oc(t),t)+(Oc(t).getUTCDay()===4),e,2)}function Cnt(t){return t.getUTCDay()}function knt(t,e){return En(rC.count(Oc(t)-1,t),e,2)}function Nnt(t,e){return En(t.getUTCFullYear()%100,e,2)}function Tnt(t,e){return t=vae(t),En(t.getUTCFullYear()%100,e,2)}function $nt(t,e){return En(t.getUTCFullYear()%1e4,e,4)}function Int(t,e){var n=t.getUTCDay();return t=n>=4||n===0?qm(t):qm.ceil(t),En(t.getUTCFullYear()%1e4,e,4)}function Ent(){return"+0000"}function Iq(){return"%"}function Eq(t){return+t}function Aq(t){return Math.floor(+t/1e3)}var Gp,wae,Sae;Ant({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ant(t){return Gp=Att(t),wae=Gp.format,Gp.parse,Sae=Gp.utcFormat,Gp.utcParse,Gp}function Rnt(t){return new Date(t)}function Ont(t){return t instanceof Date?+t:+new Date(+t)}function EL(t,e,n,r,s,a,i,o,l,u){var c=mL(),d=c.invert,h=c.domain,m=u(".%L"),g=u(":%S"),y=u("%I:%M"),b=u("%I %p"),w=u("%a %d"),C=u("%b %d"),k=u("%B"),T=u("%Y");function N(I){return(l(I)<I?m:o(I)<I?g:i(I)<I?y:a(I)<I?b:r(I)<I?s(I)<I?w:C:n(I)<I?k:T)(I)}return c.invert=function(I){return new Date(d(I))},c.domain=function(I){return arguments.length?h(Array.from(I,Ont)):h().map(Rnt)},c.ticks=function(I){var A=h();return t(A[0],A[A.length-1],I??10)},c.tickFormat=function(I,A){return A==null?N:u(A)},c.nice=function(I){var A=h();return(!I||typeof I.range!="function")&&(I=e(A[0],A[A.length-1],I??10)),I?h(lae(A,I)):c},c.copy=function(){return x1(c,EL(t,e,n,r,s,a,i,o,l,u))},c}function _nt(){return ll.apply(EL(Itt,Ett,Rc,$L,TT,v1,NL,CL,Qf,wae).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Dnt(){return ll.apply(EL(Ttt,$tt,Oc,IL,$T,NT,TL,kL,Qf,Sae).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function IT(){var t=0,e=1,n,r,s,a,i=ai,o=!1,l;function u(d){return d==null||isNaN(d=+d)?l:i(s===0?.5:(d=(a(d)-n)*s,o?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([t,e]=d,n=a(t=+t),r=a(e=+e),s=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(d){return arguments.length?(o=!!d,u):o},u.interpolator=function(d){return arguments.length?(i=d,u):i};function c(d){return function(h){var m,g;return arguments.length?([m,g]=h,i=d(m,g),u):[i(0),i(1)]}}return u.range=c(Oy),u.rangeRound=c(pL),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return a=d,n=d(t),r=d(e),s=n===r?0:1/(r-n),u}}function nf(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Cae(){var t=tf(IT()(ai));return t.copy=function(){return nf(t,Cae())},Bc.apply(t,arguments)}function kae(){var t=bL(IT()).domain([1,10]);return t.copy=function(){return nf(t,kae()).base(t.base())},Bc.apply(t,arguments)}function Nae(){var t=xL(IT());return t.copy=function(){return nf(t,Nae()).constant(t.constant())},Bc.apply(t,arguments)}function AL(){var t=vL(IT());return t.copy=function(){return nf(t,AL()).exponent(t.exponent())},Bc.apply(t,arguments)}function Pnt(){return AL.apply(null,arguments).exponent(.5)}function Tae(){var t=[],e=ai;function n(r){if(r!=null&&!isNaN(r=+r))return e((y1(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let s of r)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Nd),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,s)=>e(s/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(s,a)=>vet(t,a/r))},n.copy=function(){return Tae(e).domain(t)},Bc.apply(n,arguments)}function ET(){var t=0,e=.5,n=1,r=1,s,a,i,o,l,u=ai,c,d=!1,h;function m(y){return isNaN(y=+y)?h:(y=.5+((y=+c(y))-a)*(r*y<r*a?o:l),u(d?Math.max(0,Math.min(1,y)):y))}m.domain=function(y){return arguments.length?([t,e,n]=y,s=c(t=+t),a=c(e=+e),i=c(n=+n),o=s===a?0:.5/(a-s),l=a===i?0:.5/(i-a),r=a<s?-1:1,m):[t,e,n]},m.clamp=function(y){return arguments.length?(d=!!y,m):d},m.interpolator=function(y){return arguments.length?(u=y,m):u};function g(y){return function(b){var w,C,k;return arguments.length?([w,C,k]=b,u=qet(y,[w,C,k]),m):[u(0),u(.5),u(1)]}}return m.range=g(Oy),m.rangeRound=g(pL),m.unknown=function(y){return arguments.length?(h=y,m):h},function(y){return c=y,s=y(t),a=y(e),i=y(n),o=s===a?0:.5/(a-s),l=a===i?0:.5/(i-a),r=a<s?-1:1,m}}function $ae(){var t=tf(ET()(ai));return t.copy=function(){return nf(t,$ae())},Bc.apply(t,arguments)}function Iae(){var t=bL(ET()).domain([.1,1,10]);return t.copy=function(){return nf(t,Iae()).base(t.base())},Bc.apply(t,arguments)}function Eae(){var t=xL(ET());return t.copy=function(){return nf(t,Eae()).constant(t.constant())},Bc.apply(t,arguments)}function RL(){var t=vL(ET());return t.copy=function(){return nf(t,RL()).exponent(t.exponent())},Bc.apply(t,arguments)}function Mnt(){return RL.apply(null,arguments).exponent(.5)}const Rq=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:nx,scaleDiverging:$ae,scaleDivergingLog:Iae,scaleDivergingPow:RL,scaleDivergingSqrt:Mnt,scaleDivergingSymlog:Eae,scaleIdentity:oae,scaleImplicit:uP,scaleLinear:eC,scaleLog:uae,scaleOrdinal:dL,scalePoint:gb,scalePow:wL,scaleQuantile:fae,scaleQuantize:hae,scaleRadial:dae,scaleSequential:Cae,scaleSequentialLog:kae,scaleSequentialPow:AL,scaleSequentialQuantile:Tae,scaleSequentialSqrt:Pnt,scaleSequentialSymlog:Nae,scaleSqrt:gtt,scaleSymlog:cae,scaleThreshold:pae,scaleTime:_nt,scaleUtc:Dnt,tickFormat:iae},Symbol.toStringTag,{value:"Module"}));var $_,Oq;function Aae(){if(Oq)return $_;Oq=1;var t=Iy();function e(n,r,s){for(var a=-1,i=n.length;++a<i;){var o=n[a],l=r(o);if(l!=null&&(u===void 0?l===l&&!t(l):s(l,u)))var u=l,c=o}return c}return $_=e,$_}var I_,_q;function jnt(){if(_q)return I_;_q=1;function t(e,n){return e>n}return I_=t,I_}var E_,Dq;function Lnt(){if(Dq)return E_;Dq=1;var t=Aae(),e=jnt(),n=Ay();function r(s){return s&&s.length?t(s,n,e):void 0}return E_=r,E_}var Fnt=Lnt();const AT=Un(Fnt);var A_,Pq;function znt(){if(Pq)return A_;Pq=1;function t(e,n){return e<n}return A_=t,A_}var R_,Mq;function Bnt(){if(Mq)return R_;Mq=1;var t=Aae(),e=znt(),n=Ay();function r(s){return s&&s.length?t(s,n,e):void 0}return R_=r,R_}var Unt=Bnt();const RT=Un(Unt);var O_,jq;function Vnt(){if(jq)return O_;jq=1;var t=q4(),e=ef(),n=Lse(),r=ji();function s(a,i){var o=r(a)?t:n;return o(a,e(i,3))}return O_=s,O_}var __,Lq;function Wnt(){if(Lq)return __;Lq=1;var t=Mse(),e=Vnt();function n(r,s){return t(e(r,s),1)}return __=n,__}var Gnt=Wnt();const Hnt=Un(Gnt);var D_,Fq;function qnt(){if(Fq)return D_;Fq=1;var t=iL();function e(n,r){return t(n,r)}return D_=e,D_}var Knt=qnt();const OT=Un(Knt);var _y=1e9,Xnt={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},_L,Ar=!0,sl="[DecimalError] ",oh=sl+"Invalid argument: ",OL=sl+"Exponent out of range: ",Dy=Math.floor,jf=Math.pow,Ynt=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,no,Ys=1e7,Sr=7,Rae=9007199254740991,sC=Dy(Rae/Sr),xt={};xt.absoluteValue=xt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};xt.comparedTo=xt.cmp=function(t){var e,n,r,s,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,s=t.d.length,e=0,n=r<s?r:s;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===s?0:r>s^a.s<0?1:-1};xt.decimalPlaces=xt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Sr;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};xt.dividedBy=xt.div=function(t){return kc(this,new this.constructor(t))};xt.dividedToIntegerBy=xt.idiv=function(t){var e=this,n=e.constructor;return hr(kc(e,new n(t),0,1),n.precision)};xt.equals=xt.eq=function(t){return!this.cmp(t)};xt.exponent=function(){return Ts(this)};xt.greaterThan=xt.gt=function(t){return this.cmp(t)>0};xt.greaterThanOrEqualTo=xt.gte=function(t){return this.cmp(t)>=0};xt.isInteger=xt.isint=function(){return this.e>this.d.length-2};xt.isNegative=xt.isneg=function(){return this.s<0};xt.isPositive=xt.ispos=function(){return this.s>0};xt.isZero=function(){return this.s===0};xt.lessThan=xt.lt=function(t){return this.cmp(t)<0};xt.lessThanOrEqualTo=xt.lte=function(t){return this.cmp(t)<1};xt.logarithm=xt.log=function(t){var e,n=this,r=n.constructor,s=r.precision,a=s+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(no))throw Error(sl+"NaN");if(n.s<1)throw Error(sl+(n.s?"NaN":"-Infinity"));return n.eq(no)?new r(0):(Ar=!1,e=kc(ox(n,a),ox(t,a),a),Ar=!0,hr(e,s))};xt.minus=xt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Dae(e,t):Oae(e,(t.s=-t.s,t))};xt.modulo=xt.mod=function(t){var e,n=this,r=n.constructor,s=r.precision;if(t=new r(t),!t.s)throw Error(sl+"NaN");return n.s?(Ar=!1,e=kc(n,t,0,1).times(t),Ar=!0,n.minus(e)):hr(new r(n),s)};xt.naturalExponential=xt.exp=function(){return _ae(this)};xt.naturalLogarithm=xt.ln=function(){return ox(this)};xt.negated=xt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};xt.plus=xt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Oae(e,t):Dae(e,(t.s=-t.s,t))};xt.precision=xt.sd=function(t){var e,n,r,s=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(oh+t);if(e=Ts(s)+1,r=s.d.length-1,n=r*Sr+1,r=s.d[r],r){for(;r%10==0;r/=10)n--;for(r=s.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};xt.squareRoot=xt.sqrt=function(){var t,e,n,r,s,a,i,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(sl+"NaN")}for(t=Ts(o),Ar=!1,s=Math.sqrt(+o),s==0||s==1/0?(e=yu(o.d),(e.length+t)%2==0&&(e+="0"),s=Math.sqrt(e),t=Dy((t+1)/2)-(t<0||t%2),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(s.toString()),n=l.precision,s=i=n+3;;)if(a=r,r=a.plus(kc(o,a,i+2)).times(.5),yu(a.d).slice(0,i)===(e=yu(r.d)).slice(0,i)){if(e=e.slice(i-3,i+1),s==i&&e=="4999"){if(hr(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;i+=4}return Ar=!0,hr(r,n)};xt.times=xt.mul=function(t){var e,n,r,s,a,i,o,l,u,c=this,d=c.constructor,h=c.d,m=(t=new d(t)).d;if(!c.s||!t.s)return new d(0);for(t.s*=c.s,n=c.e+t.e,l=h.length,u=m.length,l<u&&(a=h,h=m,m=a,i=l,l=u,u=i),a=[],i=l+u,r=i;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,s=l+r;s>r;)o=a[s]+m[r]*h[s-r-1]+e,a[s--]=o%Ys|0,e=o/Ys|0;a[s]=(a[s]+e)%Ys|0}for(;!a[--i];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,Ar?hr(t,d.precision):t};xt.toDecimalPlaces=xt.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Ou(t,0,_y),e===void 0?e=r.rounding:Ou(e,0,8),hr(n,t+Ts(n)+1,e))};xt.toExponential=function(t,e){var n,r=this,s=r.constructor;return t===void 0?n=Ih(r,!0):(Ou(t,0,_y),e===void 0?e=s.rounding:Ou(e,0,8),r=hr(new s(r),t+1,e),n=Ih(r,!0,t+1)),n};xt.toFixed=function(t,e){var n,r,s=this,a=s.constructor;return t===void 0?Ih(s):(Ou(t,0,_y),e===void 0?e=a.rounding:Ou(e,0,8),r=hr(new a(s),t+Ts(s)+1,e),n=Ih(r.abs(),!1,t+Ts(r)+1),s.isneg()&&!s.isZero()?"-"+n:n)};xt.toInteger=xt.toint=function(){var t=this,e=t.constructor;return hr(new e(t),Ts(t)+1,e.rounding)};xt.toNumber=function(){return+this};xt.toPower=xt.pow=function(t){var e,n,r,s,a,i,o=this,l=o.constructor,u=12,c=+(t=new l(t));if(!t.s)return new l(no);if(o=new l(o),!o.s){if(t.s<1)throw Error(sl+"Infinity");return o}if(o.eq(no))return o;if(r=l.precision,t.eq(no))return hr(o,r);if(e=t.e,n=t.d.length-1,i=e>=n,a=o.s,i){if((n=c<0?-c:c)<=Rae){for(s=new l(no),e=Math.ceil(r/Sr+4),Ar=!1;n%2&&(s=s.times(o),Bq(s.d,e)),n=Dy(n/2),n!==0;)o=o.times(o),Bq(o.d,e);return Ar=!0,t.s<0?new l(no).div(s):hr(s,r)}}else if(a<0)throw Error(sl+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,Ar=!1,s=t.times(ox(o,r+u)),Ar=!0,s=_ae(s),s.s=a,s};xt.toPrecision=function(t,e){var n,r,s=this,a=s.constructor;return t===void 0?(n=Ts(s),r=Ih(s,n<=a.toExpNeg||n>=a.toExpPos)):(Ou(t,1,_y),e===void 0?e=a.rounding:Ou(e,0,8),s=hr(new a(s),t,e),n=Ts(s),r=Ih(s,t<=n||n<=a.toExpNeg,t)),r};xt.toSignificantDigits=xt.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Ou(t,1,_y),e===void 0?e=r.rounding:Ou(e,0,8)),hr(new r(n),t,e)};xt.toString=xt.valueOf=xt.val=xt.toJSON=xt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ts(t),n=t.constructor;return Ih(t,e<=n.toExpNeg||e>=n.toExpPos)};function Oae(t,e){var n,r,s,a,i,o,l,u,c=t.constructor,d=c.precision;if(!t.s||!e.s)return e.s||(e=new c(t)),Ar?hr(e,d):e;if(l=t.d,u=e.d,i=t.e,s=e.e,l=l.slice(),a=i-s,a){for(a<0?(r=l,a=-a,o=u.length):(r=u,s=i,o=l.length),i=Math.ceil(d/Sr),o=i>o?i+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=l.length,a=u.length,o-a<0&&(a=o,r=u,u=l,l=r),n=0;a;)n=(l[--a]=l[a]+u[a]+n)/Ys|0,l[a]%=Ys;for(n&&(l.unshift(n),++s),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=s,Ar?hr(e,d):e}function Ou(t,e,n){if(t!==~~t||t<e||t>n)throw Error(oh+t)}function yu(t){var e,n,r,s=t.length-1,a="",i=t[0];if(s>0){for(a+=i,e=1;e<s;e++)r=t[e]+"",n=Sr-r.length,n&&(a+=md(n)),a+=r;i=t[e],r=i+"",n=Sr-r.length,n&&(a+=md(n))}else if(i===0)return"0";for(;i%10===0;)i/=10;return a+i}var kc=function(){function t(r,s){var a,i=0,o=r.length;for(r=r.slice();o--;)a=r[o]*s+i,r[o]=a%Ys|0,i=a/Ys|0;return i&&r.unshift(i),r}function e(r,s,a,i){var o,l;if(a!=i)l=a>i?1:-1;else for(o=l=0;o<a;o++)if(r[o]!=s[o]){l=r[o]>s[o]?1:-1;break}return l}function n(r,s,a){for(var i=0;a--;)r[a]-=i,i=r[a]<s[a]?1:0,r[a]=i*Ys+r[a]-s[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,a,i){var o,l,u,c,d,h,m,g,y,b,w,C,k,T,N,I,A,D,P=r.constructor,R=r.s==s.s?1:-1,O=r.d,F=s.d;if(!r.s)return new P(r);if(!s.s)throw Error(sl+"Division by zero");for(l=r.e-s.e,A=F.length,N=O.length,m=new P(R),g=m.d=[],u=0;F[u]==(O[u]||0);)++u;if(F[u]>(O[u]||0)&&--l,a==null?C=a=P.precision:i?C=a+(Ts(r)-Ts(s))+1:C=a,C<0)return new P(0);if(C=C/Sr+2|0,u=0,A==1)for(c=0,F=F[0],C++;(u<N||c)&&C--;u++)k=c*Ys+(O[u]||0),g[u]=k/F|0,c=k%F|0;else{for(c=Ys/(F[0]+1)|0,c>1&&(F=t(F,c),O=t(O,c),A=F.length,N=O.length),T=A,y=O.slice(0,A),b=y.length;b<A;)y[b++]=0;D=F.slice(),D.unshift(0),I=F[0],F[1]>=Ys/2&&++I;do c=0,o=e(F,y,A,b),o<0?(w=y[0],A!=b&&(w=w*Ys+(y[1]||0)),c=w/I|0,c>1?(c>=Ys&&(c=Ys-1),d=t(F,c),h=d.length,b=y.length,o=e(d,y,h,b),o==1&&(c--,n(d,A<h?D:F,h))):(c==0&&(o=c=1),d=F.slice()),h=d.length,h<b&&d.unshift(0),n(y,d,b),o==-1&&(b=y.length,o=e(F,y,A,b),o<1&&(c++,n(y,A<b?D:F,b))),b=y.length):o===0&&(c++,y=[0]),g[u++]=c,o&&y[0]?y[b++]=O[T]||0:(y=[O[T]],b=1);while((T++<N||y[0]!==void 0)&&C--)}return g[0]||g.shift(),m.e=l,hr(m,i?a+Ts(m)+1:a)}}();function _ae(t,e){var n,r,s,a,i,o,l=0,u=0,c=t.constructor,d=c.precision;if(Ts(t)>16)throw Error(OL+Ts(t));if(!t.s)return new c(no);for(Ar=!1,o=d,i=new c(.03125);t.abs().gte(.1);)t=t.times(i),u+=5;for(r=Math.log(jf(2,u))/Math.LN10*2+5|0,o+=r,n=s=a=new c(no),c.precision=o;;){if(s=hr(s.times(t),o),n=n.times(++l),i=a.plus(kc(s,n,o)),yu(i.d).slice(0,o)===yu(a.d).slice(0,o)){for(;u--;)a=hr(a.times(a),o);return c.precision=d,e==null?(Ar=!0,hr(a,d)):a}a=i}}function Ts(t){for(var e=t.e*Sr,n=t.d[0];n>=10;n/=10)e++;return e}function P_(t,e,n){if(e>t.LN10.sd())throw Ar=!0,n&&(t.precision=n),Error(sl+"LN10 precision limit exceeded");return hr(new t(t.LN10),e)}function md(t){for(var e="";t--;)e+="0";return e}function ox(t,e){var n,r,s,a,i,o,l,u,c,d=1,h=10,m=t,g=m.d,y=m.constructor,b=y.precision;if(m.s<1)throw Error(sl+(m.s?"NaN":"-Infinity"));if(m.eq(no))return new y(0);if(e==null?(Ar=!1,u=b):u=e,m.eq(10))return e==null&&(Ar=!0),P_(y,u);if(u+=h,y.precision=u,n=yu(g),r=n.charAt(0),a=Ts(m),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(t),n=yu(m.d),r=n.charAt(0),d++;a=Ts(m),r>1?(m=new y("0."+n),a++):m=new y(r+"."+n.slice(1))}else return l=P_(y,u+2,b).times(a+""),m=ox(new y(r+"."+n.slice(1)),u-h).plus(l),y.precision=b,e==null?(Ar=!0,hr(m,b)):m;for(o=i=m=kc(m.minus(no),m.plus(no),u),c=hr(m.times(m),u),s=3;;){if(i=hr(i.times(c),u),l=o.plus(kc(i,new y(s),u)),yu(l.d).slice(0,u)===yu(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(P_(y,u+2,b).times(a+""))),o=kc(o,new y(d),u),y.precision=b,e==null?(Ar=!0,hr(o,b)):o;o=l,s+=2}}function zq(t,e){var n,r,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(s=e.length;e.charCodeAt(s-1)===48;)--s;if(e=e.slice(r,s),e){if(s-=r,n=n-r-1,t.e=Dy(n/Sr),t.d=[],r=(n+1)%Sr,n<0&&(r+=Sr),r<s){for(r&&t.d.push(+e.slice(0,r)),s-=Sr;r<s;)t.d.push(+e.slice(r,r+=Sr));e=e.slice(r),r=Sr-e.length}else r-=s;for(;r--;)e+="0";if(t.d.push(+e),Ar&&(t.e>sC||t.e<-sC))throw Error(OL+n)}else t.s=0,t.e=0,t.d=[0];return t}function hr(t,e,n){var r,s,a,i,o,l,u,c,d=t.d;for(i=1,a=d[0];a>=10;a/=10)i++;if(r=e-i,r<0)r+=Sr,s=e,u=d[c=0];else{if(c=Math.ceil((r+1)/Sr),a=d.length,c>=a)return t;for(u=a=d[c],i=1;a>=10;a/=10)i++;r%=Sr,s=r-Sr+i}if(n!==void 0&&(a=jf(10,i-s-1),o=u/a%10|0,l=e<0||d[c+1]!==void 0||u%a,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?s>0?u/jf(10,i-s):0:d[c-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(a=Ts(t),d.length=1,e=e-a-1,d[0]=jf(10,(Sr-e%Sr)%Sr),t.e=Dy(-e/Sr)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=c,a=1,c--):(d.length=c+1,a=jf(10,Sr-r),d[c]=s>0?(u/jf(10,i-s)%jf(10,s)|0)*a:0),l)for(;;)if(c==0){(d[0]+=a)==Ys&&(d[0]=1,++t.e);break}else{if(d[c]+=a,d[c]!=Ys)break;d[c--]=0,a=1}for(r=d.length;d[--r]===0;)d.pop();if(Ar&&(t.e>sC||t.e<-sC))throw Error(OL+Ts(t));return t}function Dae(t,e){var n,r,s,a,i,o,l,u,c,d,h=t.constructor,m=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),Ar?hr(e,m):e;if(l=t.d,d=e.d,r=e.e,u=t.e,l=l.slice(),i=u-r,i){for(c=i<0,c?(n=l,i=-i,o=d.length):(n=d,r=u,o=l.length),s=Math.max(Math.ceil(m/Sr),o)+2,i>s&&(i=s,n.length=1),n.reverse(),s=i;s--;)n.push(0);n.reverse()}else{for(s=l.length,o=d.length,c=s<o,c&&(o=s),s=0;s<o;s++)if(l[s]!=d[s]){c=l[s]<d[s];break}i=0}for(c&&(n=l,l=d,d=n,e.s=-e.s),o=l.length,s=d.length-o;s>0;--s)l[o++]=0;for(s=d.length;s>i;){if(l[--s]<d[s]){for(a=s;a&&l[--a]===0;)l[a]=Ys-1;--l[a],l[s]+=Ys}l[s]-=d[s]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,Ar?hr(e,m):e):new h(0)}function Ih(t,e,n){var r,s=Ts(t),a=yu(t.d),i=a.length;return e?(n&&(r=n-i)>0?a=a.charAt(0)+"."+a.slice(1)+md(r):i>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+md(-s-1)+a,n&&(r=n-i)>0&&(a+=md(r))):s>=i?(a+=md(s+1-i),n&&(r=n-s-1)>0&&(a=a+"."+md(r))):((r=s+1)<i&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-i)>0&&(s+1===i&&(a+="."),a+=md(r))),t.s<0?"-"+a:a}function Bq(t,e){if(t.length>e)return t.length=e,!0}function Pae(t){var e,n,r;function s(a){var i=this;if(!(i instanceof s))return new s(a);if(i.constructor=s,a instanceof s){i.s=a.s,i.e=a.e,i.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(oh+a);if(a>0)i.s=1;else if(a<0)a=-a,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(a===~~a&&a<1e7){i.e=0,i.d=[a];return}return zq(i,a.toString())}else if(typeof a!="string")throw Error(oh+a);if(a.charCodeAt(0)===45?(a=a.slice(1),i.s=-1):i.s=1,Ynt.test(a))zq(i,a);else throw Error(oh+a)}if(s.prototype=xt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=Pae,s.config=s.set=Qnt,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return s.config(t),s}function Qnt(t){if(!t||typeof t!="object")throw Error(sl+"Object expected");var e,n,r,s=["precision",1,_y,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<s.length;e+=3)if((r=t[n=s[e]])!==void 0)if(Dy(r)===r&&r>=s[e+1]&&r<=s[e+2])this[n]=r;else throw Error(oh+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(oh+n+": "+r);return this}var _L=Pae(Xnt);no=new _L(1);const ar=_L;function Znt(t){return nrt(t)||trt(t)||ert(t)||Jnt()}function Jnt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ert(t,e){if(t){if(typeof t=="string")return hP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hP(t,e)}}function trt(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function nrt(t){if(Array.isArray(t))return hP(t)}function hP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var rrt=function(e){return e},Mae={},jae=function(e){return e===Mae},Uq=function(e){return function n(){return arguments.length===0||arguments.length===1&&jae(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},srt=function t(e,n){return e===1?n:Uq(function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];var i=s.filter(function(o){return o!==Mae}).length;return i>=e?n.apply(void 0,s):t(e-i,Uq(function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];var c=s.map(function(d){return jae(d)?l.shift():d});return n.apply(void 0,Znt(c).concat(l))}))})},_T=function(e){return srt(e.length,e)},pP=function(e,n){for(var r=[],s=e;s<n;++s)r[s-e]=s;return r},art=_T(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),irt=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return rrt;var s=n.reverse(),a=s[0],i=s.slice(1);return function(){return i.reduce(function(o,l){return l(o)},a.apply(void 0,arguments))}},mP=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},Lae=function(e){var n=null,r=null;return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n&&a.every(function(o,l){return o===n[l]})||(n=a,r=e.apply(void 0,a)),r}};function ort(t){var e;return t===0?e=1:e=Math.floor(new ar(t).abs().log(10).toNumber())+1,e}function lrt(t,e,n){for(var r=new ar(t),s=0,a=[];r.lt(e)&&s<1e5;)a.push(r.toNumber()),r=r.add(n),s++;return a}var urt=_T(function(t,e,n){var r=+t,s=+e;return r+n*(s-r)}),crt=_T(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),drt=_T(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const DT={rangeStep:lrt,getDigitCount:ort,interpolateNumber:urt,uninterpolateNumber:crt,uninterpolateTruncation:drt};function gP(t){return prt(t)||hrt(t)||Fae(t)||frt()}function frt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hrt(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function prt(t){if(Array.isArray(t))return yP(t)}function lx(t,e){return yrt(t)||grt(t,e)||Fae(t,e)||mrt()}function mrt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fae(t,e){if(t){if(typeof t=="string")return yP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yP(t,e)}}function yP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function grt(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,s=!1,a=void 0;try{for(var i=t[Symbol.iterator](),o;!(r=(o=i.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(l){s=!0,a=l}finally{try{!r&&i.return!=null&&i.return()}finally{if(s)throw a}}return n}}function yrt(t){if(Array.isArray(t))return t}function zae(t){var e=lx(t,2),n=e[0],r=e[1],s=n,a=r;return n>r&&(s=r,a=n),[s,a]}function Bae(t,e,n){if(t.lte(0))return new ar(0);var r=DT.getDigitCount(t.toNumber()),s=new ar(10).pow(r),a=t.div(s),i=r!==1?.05:.1,o=new ar(Math.ceil(a.div(i).toNumber())).add(n).mul(i),l=o.mul(s);return e?l:new ar(Math.ceil(l))}function brt(t,e,n){var r=1,s=new ar(t);if(!s.isint()&&n){var a=Math.abs(t);a<1?(r=new ar(10).pow(DT.getDigitCount(t)-1),s=new ar(Math.floor(s.div(r).toNumber())).mul(r)):a>1&&(s=new ar(Math.floor(t)))}else t===0?s=new ar(Math.floor((e-1)/2)):n||(s=new ar(Math.floor(t)));var i=Math.floor((e-1)/2),o=irt(art(function(l){return s.add(new ar(l-i).mul(r)).toNumber()}),pP);return o(0,e)}function Uae(t,e,n,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new ar(0),tickMin:new ar(0),tickMax:new ar(0)};var a=Bae(new ar(e).sub(t).div(n-1),r,s),i;t<=0&&e>=0?i=new ar(0):(i=new ar(t).add(e).div(2),i=i.sub(new ar(i).mod(a)));var o=Math.ceil(i.sub(t).div(a).toNumber()),l=Math.ceil(new ar(e).sub(i).div(a).toNumber()),u=o+l+1;return u>n?Uae(t,e,n,r,s+1):(u<n&&(l=e>0?l+(n-u):l,o=e>0?o:o+(n-u)),{step:a,tickMin:i.sub(new ar(o).mul(a)),tickMax:i.add(new ar(l).mul(a))})}function xrt(t){var e=lx(t,2),n=e[0],r=e[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(s,2),o=zae([n,r]),l=lx(o,2),u=l[0],c=l[1];if(u===-1/0||c===1/0){var d=c===1/0?[u].concat(gP(pP(0,s-1).map(function(){return 1/0}))):[].concat(gP(pP(0,s-1).map(function(){return-1/0})),[c]);return n>r?mP(d):d}if(u===c)return brt(u,s,a);var h=Uae(u,c,i,a),m=h.step,g=h.tickMin,y=h.tickMax,b=DT.rangeStep(g,y.add(new ar(.1).mul(m)),m);return n>r?mP(b):b}function vrt(t,e){var n=lx(t,2),r=n[0],s=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=zae([r,s]),o=lx(i,2),l=o[0],u=o[1];if(l===-1/0||u===1/0)return[r,s];if(l===u)return[l];var c=Math.max(e,2),d=Bae(new ar(u).sub(l).div(c-1),a,0),h=[].concat(gP(DT.rangeStep(new ar(l),new ar(u).sub(new ar(.99).mul(d)),d)),[u]);return r>s?mP(h):h}var wrt=Lae(xrt),Srt=Lae(vrt),Crt="Invariant failed";function Eh(t,e){throw new Error(Crt)}var krt=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Km(t){"@babel/helpers - typeof";return Km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Km(t)}function aC(){return aC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aC.apply(this,arguments)}function Nrt(t,e){return Ert(t)||Irt(t,e)||$rt(t,e)||Trt()}function Trt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $rt(t,e){if(t){if(typeof t=="string")return Vq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vq(t,e)}}function Vq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Irt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,i,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function Ert(t){if(Array.isArray(t))return t}function Art(t,e){if(t==null)return{};var n=Rrt(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Rrt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ort(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gae(r.key),r)}}function Drt(t,e,n){return e&&_rt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Prt(t,e,n){return e=iC(e),Mrt(t,Vae()?Reflect.construct(e,n||[],iC(t).constructor):e.apply(t,n))}function Mrt(t,e){if(e&&(Km(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jrt(t)}function jrt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vae(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vae=function(){return!!t})()}function iC(t){return iC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},iC(t)}function Lrt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bP(t,e)}function bP(t,e){return bP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},bP(t,e)}function Wae(t,e,n){return e=Gae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gae(t){var e=Frt(t,"string");return Km(e)=="symbol"?e:e+""}function Frt(t,e){if(Km(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Km(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var w1=function(t){function e(){return Ort(this,e),Prt(this,e,arguments)}return Lrt(e,t),Drt(e,[{key:"render",value:function(){var r=this.props,s=r.offset,a=r.layout,i=r.width,o=r.dataKey,l=r.data,u=r.dataPointFormatter,c=r.xAxis,d=r.yAxis,h=Art(r,krt),m=wn(h,!1);this.props.direction==="x"&&c.type!=="number"&&Eh();var g=l.map(function(y){var b=u(y,o),w=b.x,C=b.y,k=b.value,T=b.errorVal;if(!T)return null;var N=[],I,A;if(Array.isArray(T)){var D=Nrt(T,2);I=D[0],A=D[1]}else I=A=T;if(a==="vertical"){var P=c.scale,R=C+s,O=R+i,F=R-i,z=P(k-I),V=P(k+A);N.push({x1:V,y1:O,x2:V,y2:F}),N.push({x1:z,y1:R,x2:V,y2:R}),N.push({x1:z,y1:O,x2:z,y2:F})}else if(a==="horizontal"){var W=d.scale,j=w+s,q=j-i,Y=j+i,Q=W(k-I),H=W(k+A);N.push({x1:q,y1:H,x2:Y,y2:H}),N.push({x1:j,y1:Q,x2:j,y2:H}),N.push({x1:q,y1:Q,x2:Y,y2:Q})}return pe.createElement(ds,aC({className:"recharts-errorBar",key:"bar-".concat(N.map(function(ee){return"".concat(ee.x1,"-").concat(ee.x2,"-").concat(ee.y1,"-").concat(ee.y2)}))},m),N.map(function(ee){return pe.createElement("line",aC({},ee,{key:"line-".concat(ee.x1,"-").concat(ee.x2,"-").concat(ee.y1,"-").concat(ee.y2)}))}))});return pe.createElement(ds,{className:"recharts-errorBars"},g)}}])}(pe.Component);Wae(w1,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Wae(w1,"displayName","ErrorBar");function ux(t){"@babel/helpers - typeof";return ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ux(t)}function Wq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Af(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wq(Object(n),!0).forEach(function(r){zrt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zrt(t,e,n){return e=Brt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Brt(t){var e=Urt(t,"string");return ux(e)=="symbol"?e:e+""}function Urt(t,e){if(ux(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ux(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hae=function(e){var n=e.children,r=e.formattedGraphicalItems,s=e.legendWidth,a=e.legendContent,i=eo(n,Cc);if(!i)return null;var o=Cc.defaultProps,l=o!==void 0?Af(Af({},o),i.props):{},u;return i.props&&i.props.payload?u=i.props&&i.props.payload:a==="children"?u=(r||[]).reduce(function(c,d){var h=d.item,m=d.props,g=m.sectors||m.data||[];return c.concat(g.map(function(y){return{type:i.props.iconType||h.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):u=(r||[]).map(function(c){var d=c.item,h=d.type.defaultProps,m=h!==void 0?Af(Af({},h),d.props):{},g=m.dataKey,y=m.name,b=m.legendType,w=m.hide;return{inactive:w,dataKey:g,type:l.iconType||b||"square",color:DL(d),value:y||g,payload:m}}),Af(Af(Af({},l),Cc.getWithHeight(i,s)),{},{payload:u,item:i})};function cx(t){"@babel/helpers - typeof";return cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cx(t)}function Gq(t){return Hrt(t)||Grt(t)||Wrt(t)||Vrt()}function Vrt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wrt(t,e){if(t){if(typeof t=="string")return xP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xP(t,e)}}function Grt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Hrt(t){if(Array.isArray(t))return xP(t)}function xP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Jr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Hq(Object(n),!0).forEach(function(r){xm(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xm(t,e,n){return e=qrt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qrt(t){var e=Krt(t,"string");return cx(e)=="symbol"?e:e+""}function Krt(t,e){if(cx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function po(t,e,n){return xn(t)||xn(e)?n:Fs(e)?Jo(t,e,n):on(e)?e(t):n}function yb(t,e,n,r){var s=Hnt(t,function(o){return po(o,e)});if(n==="number"){var a=s.filter(function(o){return ut(o)||parseFloat(o)});return a.length?[RT(a),AT(a)]:[1/0,-1/0]}var i=r?s.filter(function(o){return!xn(o)}):s;return i.map(function(o){return Fs(o)||o instanceof Date?o:""})}var Xrt=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,i=-1,o=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,u=0;u<o;u++){var c=u>0?s[u-1].coordinate:s[o-1].coordinate,d=s[u].coordinate,h=u>=o-1?s[0].coordinate:s[u+1].coordinate,m=void 0;if(_l(d-c)!==_l(h-d)){var g=[];if(_l(h-d)===_l(l[1]-l[0])){m=h;var y=d+l[1]-l[0];g[0]=Math.min(y,(y+c)/2),g[1]=Math.max(y,(y+c)/2)}else{m=c;var b=h+l[1]-l[0];g[0]=Math.min(d,(b+d)/2),g[1]=Math.max(d,(b+d)/2)}var w=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(e>w[0]&&e<=w[1]||e>=g[0]&&e<=g[1]){i=s[u].index;break}}else{var C=Math.min(c,h),k=Math.max(c,h);if(e>(C+d)/2&&e<=(k+d)/2){i=s[u].index;break}}}else for(var T=0;T<o;T++)if(T===0&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T>0&&T<o-1&&e>(r[T].coordinate+r[T-1].coordinate)/2&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T===o-1&&e>(r[T].coordinate+r[T-1].coordinate)/2){i=r[T].index;break}return i},DL=function(e){var n,r=e,s=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Jr(Jr({},e.type.defaultProps),e.props):e.props,i=a.stroke,o=a.fill,l;switch(s){case"Line":l=i;break;case"Area":case"Radar":l=i&&i!=="none"?i:o;break;default:l=o;break}return l},Yrt=function(e){var n=e.barSize,r=e.totalSize,s=e.stackGroups,a=s===void 0?{}:s;if(!a)return{};for(var i={},o=Object.keys(a),l=0,u=o.length;l<u;l++)for(var c=a[o[l]].stackGroups,d=Object.keys(c),h=0,m=d.length;h<m;h++){var g=c[d[h]],y=g.items,b=g.cateAxisId,w=y.filter(function(A){return wc(A.type).indexOf("Bar")>=0});if(w&&w.length){var C=w[0].type.defaultProps,k=C!==void 0?Jr(Jr({},C),w[0].props):w[0].props,T=k.barSize,N=k[b];i[N]||(i[N]=[]);var I=xn(T)?n:T;i[N].push({item:w[0],stackList:w.slice(1),barSize:xn(I)?void 0:$h(I,r,0)})}}return i},Qrt=function(e){var n=e.barGap,r=e.barCategoryGap,s=e.bandSize,a=e.sizeList,i=a===void 0?[]:a,o=e.maxBarSize,l=i.length;if(l<1)return null;var u=$h(n,s,0,!0),c,d=[];if(i[0].barSize===+i[0].barSize){var h=!1,m=s/l,g=i.reduce(function(T,N){return T+N.barSize||0},0);g+=(l-1)*u,g>=s&&(g-=(l-1)*u,u=0),g>=s&&m>0&&(h=!0,m*=.9,g=l*m);var y=(s-g)/2>>0,b={offset:y-u,size:0};c=i.reduce(function(T,N){var I={item:N.item,position:{offset:b.offset+b.size+u,size:h?m:N.barSize}},A=[].concat(Gq(T),[I]);return b=A[A.length-1].position,N.stackList&&N.stackList.length&&N.stackList.forEach(function(D){A.push({item:D,position:b})}),A},d)}else{var w=$h(r,s,0,!0);s-2*w-(l-1)*u<=0&&(u=0);var C=(s-2*w-(l-1)*u)/l;C>1&&(C>>=0);var k=o===+o?Math.min(C,o):C;c=i.reduce(function(T,N,I){var A=[].concat(Gq(T),[{item:N.item,position:{offset:w+(C+u)*I+(C-k)/2,size:k}}]);return N.stackList&&N.stackList.length&&N.stackList.forEach(function(D){A.push({item:D,position:A[A.length-1].position})}),A},d)}return c},Zrt=function(e,n,r,s){var a=r.children,i=r.width,o=r.margin,l=i-(o.left||0)-(o.right||0),u=Hae({children:a,legendWidth:l});if(u){var c=s||{},d=c.width,h=c.height,m=u.align,g=u.verticalAlign,y=u.layout;if((y==="vertical"||y==="horizontal"&&g==="middle")&&m!=="center"&&ut(e[m]))return Jr(Jr({},e),{},xm({},m,e[m]+(d||0)));if((y==="horizontal"||y==="vertical"&&m==="center")&&g!=="middle"&&ut(e[g]))return Jr(Jr({},e),{},xm({},g,e[g]+(h||0)))}return e},Jrt=function(e,n,r){return xn(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},qae=function(e,n,r,s,a){var i=n.props.children,o=el(i,w1).filter(function(u){return Jrt(s,a,u.props.direction)});if(o&&o.length){var l=o.map(function(u){return u.props.dataKey});return e.reduce(function(u,c){var d=po(c,r);if(xn(d))return u;var h=Array.isArray(d)?[RT(d),AT(d)]:[d,d],m=l.reduce(function(g,y){var b=po(c,y,0),w=h[0]-Math.abs(Array.isArray(b)?b[0]:b),C=h[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(w,g[0]),Math.max(C,g[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},est=function(e,n,r,s,a){var i=n.map(function(o){return qae(e,o,r,a,s)}).filter(function(o){return!xn(o)});return i&&i.length?i.reduce(function(o,l){return[Math.min(o[0],l[0]),Math.max(o[1],l[1])]},[1/0,-1/0]):null},Kae=function(e,n,r,s,a){var i=n.map(function(l){var u=l.props.dataKey;return r==="number"&&u&&qae(e,l,u,s)||yb(e,u,r,a)});if(r==="number")return i.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var o={};return i.reduce(function(l,u){for(var c=0,d=u.length;c<d;c++)o[u[c]]||(o[u[c]]=!0,l.push(u[c]));return l},[])},Xae=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},Yae=function(e,n,r,s){if(s)return e.map(function(l){return l.coordinate});var a,i,o=e.map(function(l){return l.coordinate===n&&(a=!0),l.coordinate===r&&(i=!0),l.coordinate});return a||o.push(n),i||o.push(r),o},hc=function(e,n,r){if(!e)return null;var s=e.scale,a=e.duplicateDomain,i=e.type,o=e.range,l=e.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(n||r)&&i==="category"&&s.bandwidth?s.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?_l(o[0]-o[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var c=(e.ticks||e.niceTicks).map(function(d){var h=a?a.indexOf(d):d;return{coordinate:s(h)+u,value:d,offset:u}});return c.filter(function(d){return!p1(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,h){return{coordinate:s(d)+u,value:d,index:h,offset:u}}):s.ticks&&!r?s.ticks(e.tickCount).map(function(d){return{coordinate:s(d)+u,value:d,offset:u}}):s.domain().map(function(d,h){return{coordinate:s(d)+u,value:a?a[d]:d,index:h,offset:u}})},M_=new WeakMap,uS=function(e,n){if(typeof n!="function")return e;M_.has(e)||M_.set(e,new WeakMap);var r=M_.get(e);if(r.has(n))return r.get(n);var s=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,s),s},tst=function(e,n,r){var s=e.scale,a=e.type,i=e.layout,o=e.axisType;if(s==="auto")return i==="radial"&&o==="radiusAxis"?{scale:nx(),realScaleType:"band"}:i==="radial"&&o==="angleAxis"?{scale:eC(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:gb(),realScaleType:"point"}:a==="category"?{scale:nx(),realScaleType:"band"}:{scale:eC(),realScaleType:"linear"};if(h1(s)){var l="scale".concat(yT(s));return{scale:(Rq[l]||gb)(),realScaleType:Rq[l]?l:"point"}}return on(s)?{scale:s}:{scale:gb(),realScaleType:"point"}},qq=1e-4,nst=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,s=e.range(),a=Math.min(s[0],s[1])-qq,i=Math.max(s[0],s[1])+qq,o=e(n[0]),l=e(n[r-1]);(o<a||o>i||l<a||l>i)&&e.domain([n[0],n[r-1]])}},rst=function(e,n){if(!e)return null;for(var r=0,s=e.length;r<s;r++)if(e[r].item===n)return e[r].position;return null},sst=function(e,n){if(!n||n.length!==2||!ut(n[0])||!ut(n[1]))return e;var r=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!ut(e[0])||e[0]<r)&&(a[0]=r),(!ut(e[1])||e[1]>s)&&(a[1]=s),a[0]>s&&(a[0]=s),a[1]<r&&(a[1]=r),a},ast=function(e){var n=e.length;if(!(n<=0))for(var r=0,s=e[0].length;r<s;++r)for(var a=0,i=0,o=0;o<n;++o){var l=p1(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+l,i=e[o][r][1])}},ist=function(e){var n=e.length;if(!(n<=0))for(var r=0,s=e[0].length;r<s;++r)for(var a=0,i=0;i<n;++i){var o=p1(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},ost={sign:ast,expand:UYe,none:zm,silhouette:VYe,wiggle:WYe,positive:ist},lst=function(e,n,r){var s=n.map(function(o){return o.props.dataKey}),a=ost[r],i=BYe().keys(s).value(function(o,l){return+po(o,l,0)}).order(XD).offset(a);return i(e)},ust=function(e,n,r,s,a,i){if(!e)return null;var o=i?n.reverse():n,l={},u=o.reduce(function(d,h){var m,g=(m=h.type)!==null&&m!==void 0&&m.defaultProps?Jr(Jr({},h.type.defaultProps),h.props):h.props,y=g.stackId,b=g.hide;if(b)return d;var w=g[r],C=d[w]||{hasStack:!1,stackGroups:{}};if(Fs(y)){var k=C.stackGroups[y]||{numericAxisId:r,cateAxisId:s,items:[]};k.items.push(h),C.hasStack=!0,C.stackGroups[y]=k}else C.stackGroups[m1("_stackId_")]={numericAxisId:r,cateAxisId:s,items:[h]};return Jr(Jr({},d),{},xm({},w,C))},l),c={};return Object.keys(u).reduce(function(d,h){var m=u[h];if(m.hasStack){var g={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(y,b){var w=m.stackGroups[b];return Jr(Jr({},y),{},xm({},b,{numericAxisId:r,cateAxisId:s,items:w.items,stackedData:lst(e,w.items,a)}))},g)}return Jr(Jr({},d),{},xm({},h,m))},c)},cst=function(e,n){var r=n.realScaleType,s=n.type,a=n.tickCount,i=n.originalDomain,o=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&s==="number"&&i&&(i[0]==="auto"||i[1]==="auto")){var u=e.domain();if(!u.length)return null;var c=wrt(u,a,o);return e.domain([RT(c),AT(c)]),{niceTicks:c}}if(a&&s==="number"){var d=e.domain(),h=Srt(d,a,o);return{niceTicks:h}}return null};function Kq(t){var e=t.axis,n=t.ticks,r=t.bandSize,s=t.entry,a=t.index,i=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!xn(s[e.dataKey])){var o=D2(n,"value",s[e.dataKey]);if(o)return o.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var l=po(s,xn(i)?e.dataKey:i);return xn(l)?null:e.scale(l)}var Xq=function(e){var n=e.axis,r=e.ticks,s=e.offset,a=e.bandSize,i=e.entry,o=e.index;if(n.type==="category")return r[o]?r[o].coordinate+s:null;var l=po(i,n.dataKey,n.domain[o]);return xn(l)?null:n.scale(l)-a/2+s},dst=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var s=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return s<=0&&a>=0?0:a<0?a:s}return r[0]},fst=function(e,n){var r,s=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Jr(Jr({},e.type.defaultProps),e.props):e.props,a=s.stackId;if(Fs(a)){var i=n[a];if(i){var o=i.items.indexOf(e);return o>=0?i.stackedData[o]:null}}return null},hst=function(e){return e.reduce(function(n,r){return[RT(r.concat([n[0]]).filter(ut)),AT(r.concat([n[1]]).filter(ut))]},[1/0,-1/0])},Qae=function(e,n,r){return Object.keys(e).reduce(function(s,a){var i=e[a],o=i.stackedData,l=o.reduce(function(u,c){var d=hst(c.slice(n,r+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],s[0]),Math.max(l[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},Yq=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Qq=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,vP=function(e,n,r){if(on(e))return e(n,r);if(!Array.isArray(e))return n;var s=[];if(ut(e[0]))s[0]=r?e[0]:Math.min(e[0],n[0]);else if(Yq.test(e[0])){var a=+Yq.exec(e[0])[1];s[0]=n[0]-a}else on(e[0])?s[0]=e[0](n[0]):s[0]=n[0];if(ut(e[1]))s[1]=r?e[1]:Math.max(e[1],n[1]);else if(Qq.test(e[1])){var i=+Qq.exec(e[1])[1];s[1]=n[1]+i}else on(e[1])?s[1]=e[1](n[1]):s[1]=n[1];return s},oC=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!r||s>0)return s}if(e&&n&&n.length>=2){for(var a=lL(n,function(d){return d.coordinate}),i=1/0,o=1,l=a.length;o<l;o++){var u=a[o],c=a[o-1];i=Math.min((u.coordinate||0)-(c.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0},Zq=function(e,n,r){return!e||!e.length||OT(e,Jo(r,"type.defaultProps.domain"))?n:e},Zae=function(e,n){var r=e.type.defaultProps?Jr(Jr({},e.type.defaultProps),e.props):e.props,s=r.dataKey,a=r.name,i=r.unit,o=r.formatter,l=r.tooltipType,u=r.chartType,c=r.hide;return Jr(Jr({},wn(e,!1)),{},{dataKey:s,unit:i,formatter:o,name:a||s,color:DL(e),value:po(n,s),type:l,payload:n,chartType:u,hide:c})};function dx(t){"@babel/helpers - typeof";return dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dx(t)}function Jq(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function e7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jq(Object(n),!0).forEach(function(r){pst(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jq(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pst(t,e,n){return e=mst(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mst(t){var e=gst(t,"string");return dx(e)=="symbol"?e:e+""}function gst(t,e){if(dx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(dx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lC=Math.PI/180,yst=function(e){return e*180/Math.PI},pa=function(e,n,r,s){return{x:e+Math.cos(-lC*s)*r,y:n+Math.sin(-lC*s)*r}},bst=function(e,n){var r=e.x,s=e.y,a=n.x,i=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(s-i,2))},xst=function(e,n){var r=e.x,s=e.y,a=n.cx,i=n.cy,o=bst({x:r,y:s},{x:a,y:i});if(o<=0)return{radius:o};var l=(r-a)/o,u=Math.acos(l);return s>i&&(u=2*Math.PI-u),{radius:o,angle:yst(u),angleInRadian:u}},vst=function(e){var n=e.startAngle,r=e.endAngle,s=Math.floor(n/360),a=Math.floor(r/360),i=Math.min(s,a);return{startAngle:n-i*360,endAngle:r-i*360}},wst=function(e,n){var r=n.startAngle,s=n.endAngle,a=Math.floor(r/360),i=Math.floor(s/360),o=Math.min(a,i);return e+o*360},t7=function(e,n){var r=e.x,s=e.y,a=xst({x:r,y:s},n),i=a.radius,o=a.angle,l=n.innerRadius,u=n.outerRadius;if(i<l||i>u)return!1;if(i===0)return!0;var c=vst(n),d=c.startAngle,h=c.endAngle,m=o,g;if(d<=h){for(;m>h;)m-=360;for(;m<d;)m+=360;g=m>=d&&m<=h}else{for(;m>d;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=d}return g?e7(e7({},n),{},{radius:i,angle:wst(m,n)}):null};function fx(t){"@babel/helpers - typeof";return fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fx(t)}var Sst=["offset"];function Cst(t){return $st(t)||Tst(t)||Nst(t)||kst()}function kst(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nst(t,e){if(t){if(typeof t=="string")return wP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wP(t,e)}}function Tst(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $st(t){if(Array.isArray(t))return wP(t)}function wP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ist(t,e){if(t==null)return{};var n=Est(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Est(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function n7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ps(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n7(Object(n),!0).forEach(function(r){Ast(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ast(t,e,n){return e=Rst(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rst(t){var e=Ost(t,"string");return fx(e)=="symbol"?e:e+""}function Ost(t,e){if(fx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(fx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hx(){return hx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hx.apply(this,arguments)}var _st=function(e){var n=e.value,r=e.formatter,s=xn(e.children)?n:e.children;return on(r)?r(s):s},Dst=function(e,n){var r=_l(n-e),s=Math.min(Math.abs(n-e),360);return r*s},Pst=function(e,n,r){var s=e.position,a=e.viewBox,i=e.offset,o=e.className,l=a,u=l.cx,c=l.cy,d=l.innerRadius,h=l.outerRadius,m=l.startAngle,g=l.endAngle,y=l.clockWise,b=(d+h)/2,w=Dst(m,g),C=w>=0?1:-1,k,T;s==="insideStart"?(k=m+C*i,T=y):s==="insideEnd"?(k=g-C*i,T=!y):s==="end"&&(k=g+C*i,T=y),T=w<=0?T:!T;var N=pa(u,c,b,k),I=pa(u,c,b,k+(T?1:-1)*359),A="M".concat(N.x,",").concat(N.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(T?0:1,`,
    `).concat(I.x,",").concat(I.y),D=xn(e.id)?m1("recharts-radial-line-"):e.id;return pe.createElement("text",hx({},r,{dominantBaseline:"central",className:mt("recharts-radial-bar-label",o)}),pe.createElement("defs",null,pe.createElement("path",{id:D,d:A})),pe.createElement("textPath",{xlinkHref:"#".concat(D)},n))},Mst=function(e){var n=e.viewBox,r=e.offset,s=e.position,a=n,i=a.cx,o=a.cy,l=a.innerRadius,u=a.outerRadius,c=a.startAngle,d=a.endAngle,h=(c+d)/2;if(s==="outside"){var m=pa(i,o,u+r,h),g=m.x,y=m.y;return{x:g,y,textAnchor:g>=i?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:i,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:i,y:o,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:i,y:o,textAnchor:"middle",verticalAnchor:"end"};var b=(l+u)/2,w=pa(i,o,b,h),C=w.x,k=w.y;return{x:C,y:k,textAnchor:"middle",verticalAnchor:"middle"}},jst=function(e){var n=e.viewBox,r=e.parentViewBox,s=e.offset,a=e.position,i=n,o=i.x,l=i.y,u=i.width,c=i.height,d=c>=0?1:-1,h=d*s,m=d>0?"end":"start",g=d>0?"start":"end",y=u>=0?1:-1,b=y*s,w=y>0?"end":"start",C=y>0?"start":"end";if(a==="top"){var k={x:o+u/2,y:l-d*s,textAnchor:"middle",verticalAnchor:m};return Ps(Ps({},k),r?{height:Math.max(l-r.y,0),width:u}:{})}if(a==="bottom"){var T={x:o+u/2,y:l+c+h,textAnchor:"middle",verticalAnchor:g};return Ps(Ps({},T),r?{height:Math.max(r.y+r.height-(l+c),0),width:u}:{})}if(a==="left"){var N={x:o-b,y:l+c/2,textAnchor:w,verticalAnchor:"middle"};return Ps(Ps({},N),r?{width:Math.max(N.x-r.x,0),height:c}:{})}if(a==="right"){var I={x:o+u+b,y:l+c/2,textAnchor:C,verticalAnchor:"middle"};return Ps(Ps({},I),r?{width:Math.max(r.x+r.width-I.x,0),height:c}:{})}var A=r?{width:u,height:c}:{};return a==="insideLeft"?Ps({x:o+b,y:l+c/2,textAnchor:C,verticalAnchor:"middle"},A):a==="insideRight"?Ps({x:o+u-b,y:l+c/2,textAnchor:w,verticalAnchor:"middle"},A):a==="insideTop"?Ps({x:o+u/2,y:l+h,textAnchor:"middle",verticalAnchor:g},A):a==="insideBottom"?Ps({x:o+u/2,y:l+c-h,textAnchor:"middle",verticalAnchor:m},A):a==="insideTopLeft"?Ps({x:o+b,y:l+h,textAnchor:C,verticalAnchor:g},A):a==="insideTopRight"?Ps({x:o+u-b,y:l+h,textAnchor:w,verticalAnchor:g},A):a==="insideBottomLeft"?Ps({x:o+b,y:l+c-h,textAnchor:C,verticalAnchor:m},A):a==="insideBottomRight"?Ps({x:o+u-b,y:l+c-h,textAnchor:w,verticalAnchor:m},A):Ey(a)&&(ut(a.x)||Xf(a.x))&&(ut(a.y)||Xf(a.y))?Ps({x:o+$h(a.x,u),y:l+$h(a.y,c),textAnchor:"end",verticalAnchor:"end"},A):Ps({x:o+u/2,y:l+c/2,textAnchor:"middle",verticalAnchor:"middle"},A)},Lst=function(e){return"cx"in e&&ut(e.cx)};function _a(t){var e=t.offset,n=e===void 0?5:e,r=Ist(t,Sst),s=Ps({offset:n},r),a=s.viewBox,i=s.position,o=s.value,l=s.children,u=s.content,c=s.className,d=c===void 0?"":c,h=s.textBreakAll;if(!a||xn(o)&&xn(l)&&!L.isValidElement(u)&&!on(u))return null;if(L.isValidElement(u))return L.cloneElement(u,s);var m;if(on(u)){if(m=L.createElement(u,s),L.isValidElement(m))return m}else m=_st(s);var g=Lst(a),y=wn(s,!0);if(g&&(i==="insideStart"||i==="insideEnd"||i==="end"))return Pst(s,m,y);var b=g?Mst(s):jst(s);return pe.createElement(q2,hx({className:mt("recharts-label",d)},y,b,{breakAll:h}),m)}_a.displayName="Label";var Jae=function(e){var n=e.cx,r=e.cy,s=e.angle,a=e.startAngle,i=e.endAngle,o=e.r,l=e.radius,u=e.innerRadius,c=e.outerRadius,d=e.x,h=e.y,m=e.top,g=e.left,y=e.width,b=e.height,w=e.clockWise,C=e.labelViewBox;if(C)return C;if(ut(y)&&ut(b)){if(ut(d)&&ut(h))return{x:d,y:h,width:y,height:b};if(ut(m)&&ut(g))return{x:m,y:g,width:y,height:b}}return ut(d)&&ut(h)?{x:d,y:h,width:0,height:0}:ut(n)&&ut(r)?{cx:n,cy:r,startAngle:a||s||0,endAngle:i||s||0,innerRadius:u||0,outerRadius:c||l||o||0,clockWise:w}:e.viewBox?e.viewBox:{}},Fst=function(e,n){return e?e===!0?pe.createElement(_a,{key:"label-implicit",viewBox:n}):Fs(e)?pe.createElement(_a,{key:"label-implicit",viewBox:n,value:e}):L.isValidElement(e)?e.type===_a?L.cloneElement(e,{key:"label-implicit",viewBox:n}):pe.createElement(_a,{key:"label-implicit",content:e,viewBox:n}):on(e)?pe.createElement(_a,{key:"label-implicit",content:e,viewBox:n}):Ey(e)?pe.createElement(_a,hx({viewBox:n},e,{key:"label-implicit"})):null:null},zst=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var s=e.children,a=Jae(e),i=el(s,_a).map(function(l,u){return L.cloneElement(l,{viewBox:n||a,key:"label-".concat(u)})});if(!r)return i;var o=Fst(e.label,n||a);return[o].concat(Cst(i))};_a.parseViewBox=Jae;_a.renderCallByParent=zst;var j_,r7;function Bst(){if(r7)return j_;r7=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return j_=t,j_}var Ust=Bst();const Vst=Un(Ust);function px(t){"@babel/helpers - typeof";return px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},px(t)}var Wst=["valueAccessor"],Gst=["data","dataKey","clockWise","id","textBreakAll"];function Hst(t){return Yst(t)||Xst(t)||Kst(t)||qst()}function qst(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kst(t,e){if(t){if(typeof t=="string")return SP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SP(t,e)}}function Xst(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Yst(t){if(Array.isArray(t))return SP(t)}function SP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uC(){return uC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uC.apply(this,arguments)}function s7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function a7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s7(Object(n),!0).forEach(function(r){Qst(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qst(t,e,n){return e=Zst(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zst(t){var e=Jst(t,"string");return px(e)=="symbol"?e:e+""}function Jst(t,e){if(px(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(px(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function i7(t,e){if(t==null)return{};var n=eat(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function eat(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var tat=function(e){return Array.isArray(e.value)?Vst(e.value):e.value};function Td(t){var e=t.valueAccessor,n=e===void 0?tat:e,r=i7(t,Wst),s=r.data,a=r.dataKey,i=r.clockWise,o=r.id,l=r.textBreakAll,u=i7(r,Gst);return!s||!s.length?null:pe.createElement(ds,{className:"recharts-label-list"},s.map(function(c,d){var h=xn(a)?n(c,d):po(c&&c.payload,a),m=xn(o)?{}:{id:"".concat(o,"-").concat(d)};return pe.createElement(_a,uC({},wn(c,!0),u,m,{parentViewBox:c.parentViewBox,value:h,textBreakAll:l,viewBox:_a.parseViewBox(xn(i)?c:a7(a7({},c),{},{clockWise:i})),key:"label-".concat(d),index:d}))}))}Td.displayName="LabelList";function nat(t,e){return t?t===!0?pe.createElement(Td,{key:"labelList-implicit",data:e}):pe.isValidElement(t)||on(t)?pe.createElement(Td,{key:"labelList-implicit",data:e,content:t}):Ey(t)?pe.createElement(Td,uC({data:e},t,{key:"labelList-implicit"})):null:null}function rat(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,s=el(r,Td).map(function(i,o){return L.cloneElement(i,{data:e,key:"labelList-".concat(o)})});if(!n)return s;var a=nat(t.label,e);return[a].concat(Hst(s))}Td.renderCallByParent=rat;function mx(t){"@babel/helpers - typeof";return mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mx(t)}function CP(){return CP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},CP.apply(this,arguments)}function o7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function l7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o7(Object(n),!0).forEach(function(r){sat(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sat(t,e,n){return e=aat(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aat(t){var e=iat(t,"string");return mx(e)=="symbol"?e:e+""}function iat(t,e){if(mx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var oat=function(e,n){var r=_l(n-e),s=Math.min(Math.abs(n-e),359.999);return r*s},cS=function(e){var n=e.cx,r=e.cy,s=e.radius,a=e.angle,i=e.sign,o=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,c=l*(o?1:-1)+s,d=Math.asin(l/c)/lC,h=u?a:a+i*d,m=pa(n,r,c,h),g=pa(n,r,s,h),y=u?a-i*d:a,b=pa(n,r,c*Math.cos(d*lC),y);return{center:m,circleTangency:g,lineTangency:b,theta:d}},eie=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,a=e.outerRadius,i=e.startAngle,o=e.endAngle,l=oat(i,o),u=i+l,c=pa(n,r,a,i),d=pa(n,r,a,u),h="M ".concat(c.x,",").concat(c.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(s>0){var m=pa(n,r,s,i),g=pa(n,r,s,u);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},lat=function(e){var n=e.cx,r=e.cy,s=e.innerRadius,a=e.outerRadius,i=e.cornerRadius,o=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,c=e.endAngle,d=_l(c-u),h=cS({cx:n,cy:r,radius:a,angle:u,sign:d,cornerRadius:i,cornerIsExternal:l}),m=h.circleTangency,g=h.lineTangency,y=h.theta,b=cS({cx:n,cy:r,radius:a,angle:c,sign:-d,cornerRadius:i,cornerIsExternal:l}),w=b.circleTangency,C=b.lineTangency,k=b.theta,T=l?Math.abs(u-c):Math.abs(u-c)-y-k;if(T<0)return o?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):eie({cx:n,cy:r,innerRadius:s,outerRadius:a,startAngle:u,endAngle:c});var N="M ".concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(T>180),",").concat(+(d<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(C.x,",").concat(C.y,`
  `);if(s>0){var I=cS({cx:n,cy:r,radius:s,angle:u,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),A=I.circleTangency,D=I.lineTangency,P=I.theta,R=cS({cx:n,cy:r,radius:s,angle:c,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),O=R.circleTangency,F=R.lineTangency,z=R.theta,V=l?Math.abs(u-c):Math.abs(u-c)-P-z;if(V<0&&i===0)return"".concat(N,"L").concat(n,",").concat(r,"Z");N+="L".concat(F.x,",").concat(F.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(V>180),",").concat(+(d>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(d<0),",").concat(D.x,",").concat(D.y,"Z")}else N+="L".concat(n,",").concat(r,"Z");return N},uat={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},tie=function(e){var n=l7(l7({},uat),e),r=n.cx,s=n.cy,a=n.innerRadius,i=n.outerRadius,o=n.cornerRadius,l=n.forceCornerRadius,u=n.cornerIsExternal,c=n.startAngle,d=n.endAngle,h=n.className;if(i<a||c===d)return null;var m=mt("recharts-sector",h),g=i-a,y=$h(o,g,0,!0),b;return y>0&&Math.abs(c-d)<360?b=lat({cx:r,cy:s,innerRadius:a,outerRadius:i,cornerRadius:Math.min(y,g/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:c,endAngle:d}):b=eie({cx:r,cy:s,innerRadius:a,outerRadius:i,startAngle:c,endAngle:d}),pe.createElement("path",CP({},wn(n,!0),{className:m,d:b,role:"img"}))};function gx(t){"@babel/helpers - typeof";return gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gx(t)}function kP(){return kP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kP.apply(this,arguments)}function u7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function c7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u7(Object(n),!0).forEach(function(r){cat(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cat(t,e,n){return e=dat(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dat(t){var e=fat(t,"string");return gx(e)=="symbol"?e:e+""}function fat(t,e){if(gx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var d7={curveBasisClosed:AYe,curveBasisOpen:RYe,curveBasis:EYe,curveBumpX:mYe,curveBumpY:gYe,curveLinearClosed:OYe,curveLinear:xT,curveMonotoneX:_Ye,curveMonotoneY:DYe,curveNatural:PYe,curveStep:MYe,curveStepAfter:LYe,curveStepBefore:jYe},dS=function(e){return e.x===+e.x&&e.y===+e.y},q0=function(e){return e.x},K0=function(e){return e.y},hat=function(e,n){if(on(e))return e;var r="curve".concat(yT(e));return(r==="curveMonotone"||r==="curveBump")&&n?d7["".concat(r).concat(n==="vertical"?"Y":"X")]:d7[r]||xT},pat=function(e){var n=e.type,r=n===void 0?"linear":n,s=e.points,a=s===void 0?[]:s,i=e.baseLine,o=e.layout,l=e.connectNulls,u=l===void 0?!1:l,c=hat(r,o),d=u?a.filter(function(y){return dS(y)}):a,h;if(Array.isArray(i)){var m=u?i.filter(function(y){return dS(y)}):i,g=d.map(function(y,b){return c7(c7({},y),{},{base:m[b]})});return o==="vertical"?h=nS().y(K0).x1(q0).x0(function(y){return y.base.x}):h=nS().x(q0).y1(K0).y0(function(y){return y.base.y}),h.defined(dS).curve(c),h(g)}return o==="vertical"&&ut(i)?h=nS().y(K0).x1(q0).x0(i):ut(i)?h=nS().x(q0).y1(K0).y0(i):h=ase().x(q0).y(K0),h.defined(dS).curve(c),h(d)},NP=function(e){var n=e.className,r=e.points,s=e.path,a=e.pathRef;if((!r||!r.length)&&!s)return null;var i=r&&r.length?pat(e):s;return pe.createElement("path",kP({},wn(e,!1),P2(e),{className:mt("recharts-curve",n),d:i,ref:a}))},L_={exports:{}},F_,f7;function mat(){if(f7)return F_;f7=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return F_=t,F_}var z_,h7;function gat(){if(h7)return z_;h7=1;var t=mat();function e(){}function n(){}return n.resetWarningCache=e,z_=function(){function r(i,o,l,u,c,d){if(d!==t){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}r.isRequired=r;function s(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},z_}var p7;function yat(){return p7||(p7=1,L_.exports=gat()()),L_.exports}var bat=yat();const Fn=Un(bat);var xat=Object.getOwnPropertyNames,vat=Object.getOwnPropertySymbols,wat=Object.prototype.hasOwnProperty;function m7(t,e){return function(r,s,a){return t(r,s,a)&&e(r,s,a)}}function fS(t){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,s);var a=s.cache,i=a.get(n),o=a.get(r);if(i&&o)return i===r&&o===n;a.set(n,r),a.set(r,n);var l=t(n,r,s);return a.delete(n),a.delete(r),l}}function g7(t){return xat(t).concat(vat(t))}var Sat=Object.hasOwn||function(t,e){return wat.call(t,e)};function ep(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var Cat="__v",kat="__o",Nat="_owner",y7=Object.getOwnPropertyDescriptor,b7=Object.keys;function Tat(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function $at(t,e){return ep(t.getTime(),e.getTime())}function Iat(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Eat(t,e){return t===e}function x7(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),a=t.entries(),i,o,l=0;(i=a.next())&&!i.done;){for(var u=e.entries(),c=!1,d=0;(o=u.next())&&!o.done;){if(s[d]){d++;continue}var h=i.value,m=o.value;if(n.equals(h[0],m[0],l,d,t,e,n)&&n.equals(h[1],m[1],h[0],m[0],t,e,n)){c=s[d]=!0;break}d++}if(!c)return!1;l++}return!0}var Aat=ep;function Rat(t,e,n){var r=b7(t),s=r.length;if(b7(e).length!==s)return!1;for(;s-- >0;)if(!nie(t,e,n,r[s]))return!1;return!0}function X0(t,e,n){var r=g7(t),s=r.length;if(g7(e).length!==s)return!1;for(var a,i,o;s-- >0;)if(a=r[s],!nie(t,e,n,a)||(i=y7(t,a),o=y7(e,a),(i||o)&&(!i||!o||i.configurable!==o.configurable||i.enumerable!==o.enumerable||i.writable!==o.writable)))return!1;return!0}function Oat(t,e){return ep(t.valueOf(),e.valueOf())}function _at(t,e){return t.source===e.source&&t.flags===e.flags}function v7(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var s=new Array(r),a=t.values(),i,o;(i=a.next())&&!i.done;){for(var l=e.values(),u=!1,c=0;(o=l.next())&&!o.done;){if(!s[c]&&n.equals(i.value,o.value,i.value,o.value,t,e,n)){u=s[c]=!0;break}c++}if(!u)return!1}return!0}function Dat(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function Pat(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function nie(t,e,n,r){return(r===Nat||r===kat||r===Cat)&&(t.$$typeof||e.$$typeof)?!0:Sat(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var Mat="[object Arguments]",jat="[object Boolean]",Lat="[object Date]",Fat="[object Error]",zat="[object Map]",Bat="[object Number]",Uat="[object Object]",Vat="[object RegExp]",Wat="[object Set]",Gat="[object String]",Hat="[object URL]",qat=Array.isArray,w7=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,S7=Object.assign,Kat=Object.prototype.toString.call.bind(Object.prototype.toString);function Xat(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,s=t.areFunctionsEqual,a=t.areMapsEqual,i=t.areNumbersEqual,o=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,c=t.areSetsEqual,d=t.areTypedArraysEqual,h=t.areUrlsEqual;return function(g,y,b){if(g===y)return!0;if(g==null||y==null)return!1;var w=typeof g;if(w!==typeof y)return!1;if(w!=="object")return w==="number"?i(g,y,b):w==="function"?s(g,y,b):!1;var C=g.constructor;if(C!==y.constructor)return!1;if(C===Object)return o(g,y,b);if(qat(g))return e(g,y,b);if(w7!=null&&w7(g))return d(g,y,b);if(C===Date)return n(g,y,b);if(C===RegExp)return u(g,y,b);if(C===Map)return a(g,y,b);if(C===Set)return c(g,y,b);var k=Kat(g);return k===Lat?n(g,y,b):k===Vat?u(g,y,b):k===zat?a(g,y,b):k===Wat?c(g,y,b):k===Uat?typeof g.then!="function"&&typeof y.then!="function"&&o(g,y,b):k===Hat?h(g,y,b):k===Fat?r(g,y,b):k===Mat?o(g,y,b):k===jat||k===Bat||k===Gat?l(g,y,b):!1}}function Yat(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,s={areArraysEqual:r?X0:Tat,areDatesEqual:$at,areErrorsEqual:Iat,areFunctionsEqual:Eat,areMapsEqual:r?m7(x7,X0):x7,areNumbersEqual:Aat,areObjectsEqual:r?X0:Rat,arePrimitiveWrappersEqual:Oat,areRegExpsEqual:_at,areSetsEqual:r?m7(v7,X0):v7,areTypedArraysEqual:r?X0:Dat,areUrlsEqual:Pat};if(n&&(s=S7({},s,n(s))),e){var a=fS(s.areArraysEqual),i=fS(s.areMapsEqual),o=fS(s.areObjectsEqual),l=fS(s.areSetsEqual);s=S7({},s,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return s}function Qat(t){return function(e,n,r,s,a,i,o){return t(e,n,o)}}function Zat(t){var e=t.circular,n=t.comparator,r=t.createState,s=t.equals,a=t.strict;if(r)return function(l,u){var c=r(),d=c.cache,h=d===void 0?e?new WeakMap:void 0:d,m=c.meta;return n(l,u,{cache:h,equals:s,meta:m,strict:a})};if(e)return function(l,u){return n(l,u,{cache:new WeakMap,equals:s,meta:void 0,strict:a})};var i={cache:void 0,equals:s,meta:void 0,strict:a};return function(l,u){return n(l,u,i)}}var Jat=rf();rf({strict:!0});rf({circular:!0});rf({circular:!0,strict:!0});rf({createInternalComparator:function(){return ep}});rf({strict:!0,createInternalComparator:function(){return ep}});rf({circular:!0,createInternalComparator:function(){return ep}});rf({circular:!0,createInternalComparator:function(){return ep},strict:!0});function rf(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,s=t.createState,a=t.strict,i=a===void 0?!1:a,o=Yat(t),l=Xat(o),u=r?r(l):Qat(l);return Zat({circular:n,comparator:l,createState:s,equals:u,strict:i})}function eit(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function C7(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function s(a){n<0&&(n=a),a-n>e?(t(a),n=-1):eit(s)};requestAnimationFrame(r)}function TP(t){"@babel/helpers - typeof";return TP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TP(t)}function tit(t){return ait(t)||sit(t)||rit(t)||nit()}function nit(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rit(t,e){if(t){if(typeof t=="string")return k7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k7(t,e)}}function k7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sit(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ait(t){if(Array.isArray(t))return t}function iit(){var t={},e=function(){return null},n=!1,r=function s(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var i=a,o=tit(i),l=o[0],u=o.slice(1);if(typeof l=="number"){C7(s.bind(null,u),l);return}s(l),C7(s.bind(null,u));return}TP(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function yx(t){"@babel/helpers - typeof";return yx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yx(t)}function N7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function T7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N7(Object(n),!0).forEach(function(r){rie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rie(t,e,n){return e=oit(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oit(t){var e=lit(t,"string");return yx(e)==="symbol"?e:String(e)}function lit(t,e){if(yx(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yx(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uit=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,s){return r.filter(function(a){return s.includes(a)})})},cit=function(e){return e},dit=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},bb=function(e,n){return Object.keys(n).reduce(function(r,s){return T7(T7({},r),{},rie({},s,e(s,n[s])))},{})},$7=function(e,n,r){return e.map(function(s){return"".concat(dit(s)," ").concat(n,"ms ").concat(r)}).join(",")};function fit(t,e){return mit(t)||pit(t,e)||sie(t,e)||hit()}function hit(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pit(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,i,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function mit(t){if(Array.isArray(t))return t}function git(t){return xit(t)||bit(t)||sie(t)||yit()}function yit(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sie(t,e){if(t){if(typeof t=="string")return $P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $P(t,e)}}function bit(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xit(t){if(Array.isArray(t))return $P(t)}function $P(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var cC=1e-4,aie=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},iie=function(e,n){return e.map(function(r,s){return r*Math.pow(n,s)}).reduce(function(r,s){return r+s})},I7=function(e,n){return function(r){var s=aie(e,n);return iie(s,r)}},vit=function(e,n){return function(r){var s=aie(e,n),a=[].concat(git(s.map(function(i,o){return i*o}).slice(1)),[0]);return iie(a,r)}},E7=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n[0],a=n[1],i=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":s=0,a=0,i=1,o=1;break;case"ease":s=.25,a=.1,i=.25,o=1;break;case"ease-in":s=.42,a=0,i=1,o=1;break;case"ease-out":s=.42,a=0,i=.58,o=1;break;case"ease-in-out":s=0,a=0,i=.58,o=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),c=fit(u,4);s=c[0],a=c[1],i=c[2],o=c[3]}}}var d=I7(s,i),h=I7(a,o),m=vit(s,i),g=function(w){return w>1?1:w<0?0:w},y=function(w){for(var C=w>1?1:w,k=C,T=0;T<8;++T){var N=d(k)-C,I=m(k);if(Math.abs(N-C)<cC||I<cC)return h(k);k=g(k-N/I)}return h(k)};return y.isStepper=!1,y},wit=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,s=e.damping,a=s===void 0?8:s,i=e.dt,o=i===void 0?17:i,l=function(c,d,h){var m=-(c-d)*r,g=h*a,y=h+(m-g)*o/1e3,b=h*o/1e3+c;return Math.abs(b-d)<cC&&Math.abs(y)<cC?[d,0]:[b,y]};return l.isStepper=!0,l.dt=o,l},Sit=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var s=n[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return E7(s);case"spring":return wit();default:if(s.split("(")[0]==="cubic-bezier")return E7(s)}return typeof s=="function"?s:null};function bx(t){"@babel/helpers - typeof";return bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bx(t)}function A7(t){return Nit(t)||kit(t)||oie(t)||Cit()}function Cit(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kit(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Nit(t){if(Array.isArray(t))return EP(t)}function R7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function fa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R7(Object(n),!0).forEach(function(r){IP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IP(t,e,n){return e=Tit(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tit(t){var e=$it(t,"string");return bx(e)==="symbol"?e:String(e)}function $it(t,e){if(bx(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bx(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Iit(t,e){return Rit(t)||Ait(t,e)||oie(t,e)||Eit()}function Eit(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oie(t,e){if(t){if(typeof t=="string")return EP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EP(t,e)}}function EP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ait(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,i,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function Rit(t){if(Array.isArray(t))return t}var dC=function(e,n,r){return e+(n-e)*r},AP=function(e){var n=e.from,r=e.to;return n!==r},Oit=function t(e,n,r){var s=bb(function(a,i){if(AP(i)){var o=e(i.from,i.to,i.velocity),l=Iit(o,2),u=l[0],c=l[1];return fa(fa({},i),{},{from:u,velocity:c})}return i},n);return r<1?bb(function(a,i){return AP(i)?fa(fa({},i),{},{velocity:dC(i.velocity,s[a].velocity,r),from:dC(i.from,s[a].from,r)}):i},n):t(e,s,r-1)};const _it=function(t,e,n,r,s){var a=uit(t,e),i=a.reduce(function(b,w){return fa(fa({},b),{},IP({},w,[t[w],e[w]]))},{}),o=a.reduce(function(b,w){return fa(fa({},b),{},IP({},w,{from:t[w],velocity:0,to:e[w]}))},{}),l=-1,u,c,d=function(){return null},h=function(){return bb(function(w,C){return C.from},o)},m=function(){return!Object.values(o).filter(AP).length},g=function(w){u||(u=w);var C=w-u,k=C/n.dt;o=Oit(n,o,k),s(fa(fa(fa({},t),e),h())),u=w,m()||(l=requestAnimationFrame(d))},y=function(w){c||(c=w);var C=(w-c)/r,k=bb(function(N,I){return dC.apply(void 0,A7(I).concat([n(C)]))},i);if(s(fa(fa(fa({},t),e),k)),C<1)l=requestAnimationFrame(d);else{var T=bb(function(N,I){return dC.apply(void 0,A7(I).concat([n(1)]))},i);s(fa(fa(fa({},t),e),T))}};return d=n.isStepper?g:y,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function Xm(t){"@babel/helpers - typeof";return Xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xm(t)}var Dit=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Pit(t,e){if(t==null)return{};var n=Mit(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Mit(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function B_(t){return zit(t)||Fit(t)||Lit(t)||jit()}function jit(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lit(t,e){if(t){if(typeof t=="string")return RP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RP(t,e)}}function Fit(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zit(t){if(Array.isArray(t))return RP(t)}function RP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function O7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function kl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O7(Object(n),!0).forEach(function(r){ub(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ub(t,e,n){return e=lie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bit(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uit(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lie(r.key),r)}}function Vit(t,e,n){return e&&Uit(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lie(t){var e=Wit(t,"string");return Xm(e)==="symbol"?e:String(e)}function Wit(t,e){if(Xm(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Git(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OP(t,e)}function OP(t,e){return OP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},OP(t,e)}function Hit(t){var e=qit();return function(){var r=fC(t),s;if(e){var a=fC(this).constructor;s=Reflect.construct(r,arguments,a)}else s=r.apply(this,arguments);return _P(this,s)}}function _P(t,e){if(e&&(Xm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DP(t)}function DP(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qit(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fC(t){return fC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fC(t)}var _c=function(t){Git(n,t);var e=Hit(n);function n(r,s){var a;Bit(this,n),a=e.call(this,r,s);var i=a.props,o=i.isActive,l=i.attributeName,u=i.from,c=i.to,d=i.steps,h=i.children,m=i.duration;if(a.handleStyleChange=a.handleStyleChange.bind(DP(a)),a.changeStyle=a.changeStyle.bind(DP(a)),!o||m<=0)return a.state={style:{}},typeof h=="function"&&(a.state={style:c}),_P(a);if(d&&d.length)a.state={style:d[0].style};else if(u){if(typeof h=="function")return a.state={style:u},_P(a);a.state={style:l?ub({},l,u):u}}else a.state={style:{}};return a}return Vit(n,[{key:"componentDidMount",value:function(){var s=this.props,a=s.isActive,i=s.canBegin;this.mounted=!0,!(!a||!i)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var a=this.props,i=a.isActive,o=a.canBegin,l=a.attributeName,u=a.shouldReAnimate,c=a.to,d=a.from,h=this.state.style;if(o){if(!i){var m={style:l?ub({},l,c):c};this.state&&h&&(l&&h[l]!==c||!l&&h!==c)&&this.setState(m);return}if(!(Jat(s.to,c)&&s.canBegin&&s.isActive)){var g=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=g||u?d:s.to;if(this.state&&h){var b={style:l?ub({},l,y):y};(l&&h[l]!==y||!l&&h!==y)&&this.setState(b)}this.runAnimation(kl(kl({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var a=this,i=s.from,o=s.to,l=s.duration,u=s.easing,c=s.begin,d=s.onAnimationEnd,h=s.onAnimationStart,m=_it(i,o,Sit(u),l,this.changeStyle),g=function(){a.stopJSAnimation=m()};this.manager.start([h,c,g,l,d])}},{key:"runStepAnimation",value:function(s){var a=this,i=s.steps,o=s.begin,l=s.onAnimationStart,u=i[0],c=u.style,d=u.duration,h=d===void 0?0:d,m=function(y,b,w){if(w===0)return y;var C=b.duration,k=b.easing,T=k===void 0?"ease":k,N=b.style,I=b.properties,A=b.onAnimationEnd,D=w>0?i[w-1]:b,P=I||Object.keys(N);if(typeof T=="function"||T==="spring")return[].concat(B_(y),[a.runJSAnimation.bind(a,{from:D.style,to:N,duration:C,easing:T}),C]);var R=$7(P,C,T),O=kl(kl(kl({},D.style),N),{},{transition:R});return[].concat(B_(y),[O,C,A]).filter(cit)};return this.manager.start([l].concat(B_(i.reduce(m,[c,Math.max(h,o)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=iit());var a=s.begin,i=s.duration,o=s.attributeName,l=s.to,u=s.easing,c=s.onAnimationStart,d=s.onAnimationEnd,h=s.steps,m=s.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(s);return}if(h.length>1){this.runStepAnimation(s);return}var y=o?ub({},o,l):l,b=$7(Object.keys(y),i,u);g.start([c,a,kl(kl({},y),{},{transition:b}),i,d])}},{key:"render",value:function(){var s=this.props,a=s.children;s.begin;var i=s.duration;s.attributeName,s.easing;var o=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var l=Pit(s,Dit),u=L.Children.count(a),c=this.state.style;if(typeof a=="function")return a(c);if(!o||u===0||i<=0)return a;var d=function(m){var g=m.props,y=g.style,b=y===void 0?{}:y,w=g.className,C=L.cloneElement(m,kl(kl({},l),{},{style:kl(kl({},b),c),className:w}));return C};return u===1?d(L.Children.only(a)):pe.createElement("div",null,L.Children.map(a,function(h){return d(h)}))}}]),n}(L.PureComponent);_c.displayName="Animate";_c.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};_c.propTypes={from:Fn.oneOfType([Fn.object,Fn.string]),to:Fn.oneOfType([Fn.object,Fn.string]),attributeName:Fn.string,duration:Fn.number,begin:Fn.number,easing:Fn.oneOfType([Fn.string,Fn.func]),steps:Fn.arrayOf(Fn.shape({duration:Fn.number.isRequired,style:Fn.object.isRequired,easing:Fn.oneOfType([Fn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Fn.func]),properties:Fn.arrayOf("string"),onAnimationEnd:Fn.func})),children:Fn.oneOfType([Fn.node,Fn.func]),isActive:Fn.bool,canBegin:Fn.bool,onAnimationEnd:Fn.func,shouldReAnimate:Fn.bool,onAnimationStart:Fn.func,onAnimationReStart:Fn.func};function hC(){return hC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hC.apply(null,arguments)}function uie(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function PP(t,e){return PP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},PP(t,e)}function cie(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,PP(t,e)}const _7={disabled:!1},pC=pe.createContext(null);var Kit=function(e){return e.scrollTop},cb="unmounted",Lf="exited",Ff="entering",sm="entered",MP="exiting",Uc=function(t){cie(e,t);function e(r,s){var a;a=t.call(this,r,s)||this;var i=s,o=i&&!i.isMounting?r.enter:r.appear,l;return a.appearStatus=null,r.in?o?(l=Lf,a.appearStatus=Ff):l=sm:r.unmountOnExit||r.mountOnEnter?l=cb:l=Lf,a.state={status:l},a.nextCallback=null,a}e.getDerivedStateFromProps=function(s,a){var i=s.in;return i&&a.status===cb?{status:Lf}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var a=null;if(s!==this.props){var i=this.state.status;this.props.in?i!==Ff&&i!==sm&&(a=Ff):(i===Ff||i===sm)&&(a=MP)}this.updateStatus(!1,a)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,a,i,o;return a=i=o=s,s!=null&&typeof s!="number"&&(a=s.exit,i=s.enter,o=s.appear!==void 0?s.appear:i),{exit:a,enter:i,appear:o}},n.updateStatus=function(s,a){if(s===void 0&&(s=!1),a!==null)if(this.cancelNextCallback(),a===Ff){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:Fw.findDOMNode(this);i&&Kit(i)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Lf&&this.setState({status:cb})},n.performEnter=function(s){var a=this,i=this.props.enter,o=this.context?this.context.isMounting:s,l=this.props.nodeRef?[o]:[Fw.findDOMNode(this),o],u=l[0],c=l[1],d=this.getTimeouts(),h=o?d.appear:d.enter;if(!s&&!i||_7.disabled){this.safeSetState({status:sm},function(){a.props.onEntered(u)});return}this.props.onEnter(u,c),this.safeSetState({status:Ff},function(){a.props.onEntering(u,c),a.onTransitionEnd(h,function(){a.safeSetState({status:sm},function(){a.props.onEntered(u,c)})})})},n.performExit=function(){var s=this,a=this.props.exit,i=this.getTimeouts(),o=this.props.nodeRef?void 0:Fw.findDOMNode(this);if(!a||_7.disabled){this.safeSetState({status:Lf},function(){s.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:MP},function(){s.props.onExiting(o),s.onTransitionEnd(i.exit,function(){s.safeSetState({status:Lf},function(){s.props.onExited(o)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,a){a=this.setNextCallback(a),this.setState(s,a)},n.setNextCallback=function(s){var a=this,i=!0;return this.nextCallback=function(o){i&&(i=!1,a.nextCallback=null,s(o))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},n.onTransitionEnd=function(s,a){this.setNextCallback(a);var i=this.props.nodeRef?this.props.nodeRef.current:Fw.findDOMNode(this),o=s==null&&!this.props.addEndListener;if(!i||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],u=l[0],c=l[1];this.props.addEndListener(u,c)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===cb)return null;var a=this.props,i=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var o=uie(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return pe.createElement(pC.Provider,{value:null},typeof i=="function"?i(s,o):pe.cloneElement(pe.Children.only(i),o))},e}(pe.Component);Uc.contextType=pC;Uc.propTypes={};function Hp(){}Uc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Hp,onEntering:Hp,onEntered:Hp,onExit:Hp,onExiting:Hp,onExited:Hp};Uc.UNMOUNTED=cb;Uc.EXITED=Lf;Uc.ENTERING=Ff;Uc.ENTERED=sm;Uc.EXITING=MP;function Xit(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PL(t,e){var n=function(a){return e&&L.isValidElement(a)?e(a):a},r=Object.create(null);return t&&L.Children.map(t,function(s){return s}).forEach(function(s){r[s.key]=n(s)}),r}function Yit(t,e){t=t||{},e=e||{};function n(c){return c in e?e[c]:t[c]}var r=Object.create(null),s=[];for(var a in t)a in e?s.length&&(r[a]=s,s=[]):s.push(a);var i,o={};for(var l in e){if(r[l])for(i=0;i<r[l].length;i++){var u=r[l][i];o[r[l][i]]=n(u)}o[l]=n(l)}for(i=0;i<s.length;i++)o[s[i]]=n(s[i]);return o}function Zf(t,e,n){return n[e]!=null?n[e]:t.props[e]}function Qit(t,e){return PL(t.children,function(n){return L.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:Zf(n,"appear",t),enter:Zf(n,"enter",t),exit:Zf(n,"exit",t)})})}function Zit(t,e,n){var r=PL(t.children),s=Yit(e,r);return Object.keys(s).forEach(function(a){var i=s[a];if(L.isValidElement(i)){var o=a in e,l=a in r,u=e[a],c=L.isValidElement(u)&&!u.props.in;l&&(!o||c)?s[a]=L.cloneElement(i,{onExited:n.bind(null,i),in:!0,exit:Zf(i,"exit",t),enter:Zf(i,"enter",t)}):!l&&o&&!c?s[a]=L.cloneElement(i,{in:!1}):l&&o&&L.isValidElement(u)&&(s[a]=L.cloneElement(i,{onExited:n.bind(null,i),in:u.props.in,exit:Zf(i,"exit",t),enter:Zf(i,"enter",t)}))}}),s}var Jit=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},eot={component:"div",childFactory:function(e){return e}},ML=function(t){cie(e,t);function e(r,s){var a;a=t.call(this,r,s)||this;var i=a.handleExited.bind(Xit(a));return a.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},a}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,a){var i=a.children,o=a.handleExited,l=a.firstRender;return{children:l?Qit(s,o):Zit(s,i,o),firstRender:!1}},n.handleExited=function(s,a){var i=PL(this.props.children);s.key in i||(s.props.onExited&&s.props.onExited(a),this.mounted&&this.setState(function(o){var l=hC({},o.children);return delete l[s.key],{children:l}}))},n.render=function(){var s=this.props,a=s.component,i=s.childFactory,o=uie(s,["component","childFactory"]),l=this.state.contextValue,u=Jit(this.state.children).map(i);return delete o.appear,delete o.enter,delete o.exit,a===null?pe.createElement(pC.Provider,{value:l},u):pe.createElement(pC.Provider,{value:l},pe.createElement(a,o,u))},e}(pe.Component);ML.propTypes={};ML.defaultProps=eot;function xx(t){"@babel/helpers - typeof";return xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xx(t)}function mC(){return mC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mC.apply(this,arguments)}function tot(t,e){return aot(t)||sot(t,e)||rot(t,e)||not()}function not(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rot(t,e){if(t){if(typeof t=="string")return D7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D7(t,e)}}function D7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sot(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,i,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function aot(t){if(Array.isArray(t))return t}function P7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function M7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P7(Object(n),!0).forEach(function(r){iot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iot(t,e,n){return e=oot(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oot(t){var e=lot(t,"string");return xx(e)=="symbol"?e:e+""}function lot(t,e){if(xx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var j7=function(e,n,r,s,a){var i=Math.min(Math.abs(r)/2,Math.abs(s)/2),o=s>=0?1:-1,l=r>=0?1:-1,u=s>=0&&r>=0||s<0&&r<0?1:0,c;if(i>0&&a instanceof Array){for(var d=[0,0,0,0],h=0,m=4;h<m;h++)d[h]=a[h]>i?i:a[h];c="M".concat(e,",").concat(n+o*d[0]),d[0]>0&&(c+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(e+l*d[0],",").concat(n)),c+="L ".concat(e+r-l*d[1],",").concat(n),d[1]>0&&(c+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+o*d[1])),c+="L ".concat(e+r,",").concat(n+s-o*d[2]),d[2]>0&&(c+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(e+r-l*d[2],",").concat(n+s)),c+="L ".concat(e+l*d[3],",").concat(n+s),d[3]>0&&(c+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+s-o*d[3])),c+="Z"}else if(i>0&&a===+a&&a>0){var g=Math.min(i,a);c="M ".concat(e,",").concat(n+o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+l*g,",").concat(n,`
            L `).concat(e+r-l*g,",").concat(n,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+r,",").concat(n+o*g,`
            L `).concat(e+r,",").concat(n+s-o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+r-l*g,",").concat(n+s,`
            L `).concat(e+l*g,",").concat(n+s,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e,",").concat(n+s-o*g," Z")}else c="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(s," h ").concat(-r," Z");return c},uot=function(e,n){if(!e||!n)return!1;var r=e.x,s=e.y,a=n.x,i=n.y,o=n.width,l=n.height;if(Math.abs(o)>0&&Math.abs(l)>0){var u=Math.min(a,a+o),c=Math.max(a,a+o),d=Math.min(i,i+l),h=Math.max(i,i+l);return r>=u&&r<=c&&s>=d&&s<=h}return!1},cot={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},jL=function(e){var n=M7(M7({},cot),e),r=L.useRef(),s=L.useState(-1),a=tot(s,2),i=a[0],o=a[1];L.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var T=r.current.getTotalLength();T&&o(T)}catch{}},[]);var l=n.x,u=n.y,c=n.width,d=n.height,h=n.radius,m=n.className,g=n.animationEasing,y=n.animationDuration,b=n.animationBegin,w=n.isAnimationActive,C=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||d!==+d||c===0||d===0)return null;var k=mt("recharts-rectangle",m);return C?pe.createElement(_c,{canBegin:i>0,from:{width:c,height:d,x:l,y:u},to:{width:c,height:d,x:l,y:u},duration:y,animationEasing:g,isActive:C},function(T){var N=T.width,I=T.height,A=T.x,D=T.y;return pe.createElement(_c,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:y,isActive:w,easing:g},pe.createElement("path",mC({},wn(n,!0),{className:k,d:j7(A,D,N,I,h),ref:r})))}):pe.createElement("path",mC({},wn(n,!0),{className:k,d:j7(l,u,c,d,h)}))};function jP(){return jP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jP.apply(this,arguments)}var LL=function(e){var n=e.cx,r=e.cy,s=e.r,a=e.className,i=mt("recharts-dot",a);return n===+n&&r===+r&&s===+s?pe.createElement("circle",jP({},wn(e,!1),P2(e),{className:i,cx:n,cy:r,r:s})):null};function vx(t){"@babel/helpers - typeof";return vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vx(t)}var dot=["x","y","top","left","width","height","className"];function LP(){return LP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LP.apply(this,arguments)}function L7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function fot(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L7(Object(n),!0).forEach(function(r){hot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hot(t,e,n){return e=pot(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pot(t){var e=mot(t,"string");return vx(e)=="symbol"?e:e+""}function mot(t,e){if(vx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function got(t,e){if(t==null)return{};var n=yot(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yot(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var bot=function(e,n,r,s,a,i){return"M".concat(e,",").concat(a,"v").concat(s,"M").concat(i,",").concat(n,"h").concat(r)},xot=function(e){var n=e.x,r=n===void 0?0:n,s=e.y,a=s===void 0?0:s,i=e.top,o=i===void 0?0:i,l=e.left,u=l===void 0?0:l,c=e.width,d=c===void 0?0:c,h=e.height,m=h===void 0?0:h,g=e.className,y=got(e,dot),b=fot({x:r,y:a,top:o,left:u,width:d,height:m},y);return!ut(r)||!ut(a)||!ut(d)||!ut(m)||!ut(o)||!ut(u)?null:pe.createElement("path",LP({},wn(b,!0),{className:mt("recharts-cross",g),d:bot(r,a,d,m,o,u)}))},U_,F7;function vot(){if(F7)return U_;F7=1;var t=Ise(),e=t(Object.getPrototypeOf,Object);return U_=e,U_}var V_,z7;function wot(){if(z7)return V_;z7=1;var t=Fc(),e=vot(),n=zc(),r="[object Object]",s=Function.prototype,a=Object.prototype,i=s.toString,o=a.hasOwnProperty,l=i.call(Object);function u(c){if(!n(c)||t(c)!=r)return!1;var d=e(c);if(d===null)return!0;var h=o.call(d,"constructor")&&d.constructor;return typeof h=="function"&&h instanceof h&&i.call(h)==l}return V_=u,V_}var Sot=wot();const Cot=Un(Sot);var W_,B7;function kot(){if(B7)return W_;B7=1;var t=Fc(),e=zc(),n="[object Boolean]";function r(s){return s===!0||s===!1||e(s)&&t(s)==n}return W_=r,W_}var Not=kot();const Tot=Un(Not);function wx(t){"@babel/helpers - typeof";return wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wx(t)}function gC(){return gC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gC.apply(this,arguments)}function $ot(t,e){return Rot(t)||Aot(t,e)||Eot(t,e)||Iot()}function Iot(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eot(t,e){if(t){if(typeof t=="string")return U7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U7(t,e)}}function U7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Aot(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,i,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function Rot(t){if(Array.isArray(t))return t}function V7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function W7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V7(Object(n),!0).forEach(function(r){Oot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Oot(t,e,n){return e=_ot(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _ot(t){var e=Dot(t,"string");return wx(e)=="symbol"?e:e+""}function Dot(t,e){if(wx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var G7=function(e,n,r,s,a){var i=r-s,o;return o="M ".concat(e,",").concat(n),o+="L ".concat(e+r,",").concat(n),o+="L ".concat(e+r-i/2,",").concat(n+a),o+="L ".concat(e+r-i/2-s,",").concat(n+a),o+="L ".concat(e,",").concat(n," Z"),o},Pot={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Mot=function(e){var n=W7(W7({},Pot),e),r=L.useRef(),s=L.useState(-1),a=$ot(s,2),i=a[0],o=a[1];L.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var k=r.current.getTotalLength();k&&o(k)}catch{}},[]);var l=n.x,u=n.y,c=n.upperWidth,d=n.lowerWidth,h=n.height,m=n.className,g=n.animationEasing,y=n.animationDuration,b=n.animationBegin,w=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||d!==+d||h!==+h||c===0&&d===0||h===0)return null;var C=mt("recharts-trapezoid",m);return w?pe.createElement(_c,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:u},to:{upperWidth:c,lowerWidth:d,height:h,x:l,y:u},duration:y,animationEasing:g,isActive:w},function(k){var T=k.upperWidth,N=k.lowerWidth,I=k.height,A=k.x,D=k.y;return pe.createElement(_c,{canBegin:i>0,from:"0px ".concat(i===-1?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:y,easing:g},pe.createElement("path",gC({},wn(n,!0),{className:C,d:G7(A,D,T,N,I),ref:r})))}):pe.createElement("g",null,pe.createElement("path",gC({},wn(n,!0),{className:C,d:G7(l,u,c,d,h)})))},jot=["option","shapeType","propTransformer","activeClassName","isActive"];function Sx(t){"@babel/helpers - typeof";return Sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sx(t)}function Lot(t,e){if(t==null)return{};var n=Fot(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Fot(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function H7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function yC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H7(Object(n),!0).forEach(function(r){zot(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zot(t,e,n){return e=Bot(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bot(t){var e=Uot(t,"string");return Sx(e)=="symbol"?e:e+""}function Uot(t,e){if(Sx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vot(t,e){return yC(yC({},e),t)}function Wot(t,e){return t==="symbols"}function q7(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return pe.createElement(jL,n);case"trapezoid":return pe.createElement(Mot,n);case"sector":return pe.createElement(tie,n);case"symbols":if(Wot(e))return pe.createElement(eL,n);break;default:return null}}function Got(t){return L.isValidElement(t)?t.props:t}function Hot(t){var e=t.option,n=t.shapeType,r=t.propTransformer,s=r===void 0?Vot:r,a=t.activeClassName,i=a===void 0?"recharts-active-shape":a,o=t.isActive,l=Lot(t,jot),u;if(L.isValidElement(e))u=L.cloneElement(e,yC(yC({},l),Got(e)));else if(on(e))u=e(l);else if(Cot(e)&&!Tot(e)){var c=s(e,l);u=pe.createElement(q7,{shapeType:n,elementProps:c})}else{var d=l;u=pe.createElement(q7,{shapeType:n,elementProps:d})}return o?pe.createElement(ds,{className:i},u):u}function PT(t,e){return e!=null&&"trapezoids"in t.props}function MT(t,e){return e!=null&&"sectors"in t.props}function Cx(t,e){return e!=null&&"points"in t.props}function qot(t,e){var n,r,s=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return s&&a}function Kot(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function Xot(t,e){var n=t.x===e.x,r=t.y===e.y,s=t.z===e.z;return n&&r&&s}function Yot(t,e){var n;return PT(t,e)?n=qot:MT(t,e)?n=Kot:Cx(t,e)&&(n=Xot),n}function Qot(t,e){var n;return PT(t,e)?n="trapezoids":MT(t,e)?n="sectors":Cx(t,e)&&(n="points"),n}function Zot(t,e){if(PT(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(MT(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Cx(t,e)?e.payload:{}}function Jot(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,s=Qot(n,e),a=Zot(n,e),i=r.filter(function(l,u){var c=OT(a,l),d=n.props[s].filter(function(g){var y=Yot(n,e);return y(g,e)}),h=n.props[s].indexOf(d[d.length-1]),m=u===h;return c&&m}),o=r.indexOf(i[i.length-1]);return o}var G_,K7;function elt(){if(K7)return G_;K7=1;var t=Math.ceil,e=Math.max;function n(r,s,a,i){for(var o=-1,l=e(t((s-r)/(a||1)),0),u=Array(l);l--;)u[i?l:++o]=r,r+=a;return u}return G_=n,G_}var H_,X7;function die(){if(X7)return H_;X7=1;var t=Wse(),e=1/0,n=17976931348623157e292;function r(s){if(!s)return s===0?s:0;if(s=t(s),s===e||s===-1/0){var a=s<0?-1:1;return a*n}return s===s?s:0}return H_=r,H_}var q_,Y7;function tlt(){if(Y7)return q_;Y7=1;var t=elt(),e=CT(),n=die();function r(s){return function(a,i,o){return o&&typeof o!="number"&&e(a,i,o)&&(i=o=void 0),a=n(a),i===void 0?(i=a,a=0):i=n(i),o=o===void 0?a<i?1:-1:n(o),t(a,i,o,s)}}return q_=r,q_}var K_,Q7;function nlt(){if(Q7)return K_;Q7=1;var t=tlt(),e=t();return K_=e,K_}var rlt=nlt();const bC=Un(rlt);function kx(t){"@babel/helpers - typeof";return kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kx(t)}function Z7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function J7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z7(Object(n),!0).forEach(function(r){fie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fie(t,e,n){return e=slt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function slt(t){var e=alt(t,"string");return kx(e)=="symbol"?e:e+""}function alt(t,e){if(kx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ilt=["Webkit","Moz","O","ms"],olt=function(e,n){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),s=ilt.reduce(function(a,i){return J7(J7({},a),{},fie({},i+r,n))},{});return s[e]=n,s};function Ym(t){"@babel/helpers - typeof";return Ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ym(t)}function xC(){return xC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xC.apply(this,arguments)}function e9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function X_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e9(Object(n),!0).forEach(function(r){Ji(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function llt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function t9(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pie(r.key),r)}}function ult(t,e,n){return e&&t9(t.prototype,e),n&&t9(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function clt(t,e,n){return e=vC(e),dlt(t,hie()?Reflect.construct(e,n||[],vC(t).constructor):e.apply(t,n))}function dlt(t,e){if(e&&(Ym(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return flt(t)}function flt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hie=function(){return!!t})()}function vC(t){return vC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vC(t)}function hlt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FP(t,e)}function FP(t,e){return FP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},FP(t,e)}function Ji(t,e,n){return e=pie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pie(t){var e=plt(t,"string");return Ym(e)=="symbol"?e:e+""}function plt(t,e){if(Ym(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ym(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var mlt=function(e){var n=e.data,r=e.startIndex,s=e.endIndex,a=e.x,i=e.width,o=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,u=gb().domain(bC(0,l)).range([a,a+i-o]),c=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(s),scale:u,scaleValues:c}},n9=function(e){return e.changedTouches&&!!e.changedTouches.length},Qm=function(t){function e(n){var r;return llt(this,e),r=clt(this,e,[n]),Ji(r,"handleDrag",function(s){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(s):r.state.isSlideMoving&&r.handleSlideDrag(s)}),Ji(r,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&r.handleDrag(s.changedTouches[0])}),Ji(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=r.props,a=s.endIndex,i=s.onDragEnd,o=s.startIndex;i==null||i({endIndex:a,startIndex:o})}),r.detachDragEndListener()}),Ji(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Ji(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Ji(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Ji(r,"handleSlideDragStart",function(s){var a=n9(s)?s.changedTouches[0]:s;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return hlt(e,t),ult(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var s=r.startX,a=r.endX,i=this.state.scaleValues,o=this.props,l=o.gap,u=o.data,c=u.length-1,d=Math.min(s,a),h=Math.max(s,a),m=e.getIndexInRange(i,d),g=e.getIndexInRange(i,h);return{startIndex:m-m%l,endIndex:g===c?c:g-g%l}}},{key:"getTextOfTick",value:function(r){var s=this.props,a=s.data,i=s.tickFormatter,o=s.dataKey,l=po(a[r],o,r);return on(i)?i(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var s=this.state,a=s.slideMoveStartX,i=s.startX,o=s.endX,l=this.props,u=l.x,c=l.width,d=l.travellerWidth,h=l.startIndex,m=l.endIndex,g=l.onChange,y=r.pageX-a;y>0?y=Math.min(y,u+c-d-o,u+c-d-i):y<0&&(y=Math.max(y,u-i,u-o));var b=this.getIndex({startX:i+y,endX:o+y});(b.startIndex!==h||b.endIndex!==m)&&g&&g(b),this.setState({startX:i+y,endX:o+y,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,s){var a=n9(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var s=this.state,a=s.brushMoveStartX,i=s.movingTravellerId,o=s.endX,l=s.startX,u=this.state[i],c=this.props,d=c.x,h=c.width,m=c.travellerWidth,g=c.onChange,y=c.gap,b=c.data,w={startX:this.state.startX,endX:this.state.endX},C=r.pageX-a;C>0?C=Math.min(C,d+h-m-u):C<0&&(C=Math.max(C,d-u)),w[i]=u+C;var k=this.getIndex(w),T=k.startIndex,N=k.endIndex,I=function(){var D=b.length-1;return i==="startX"&&(o>l?T%y===0:N%y===0)||o<l&&N===D||i==="endX"&&(o>l?N%y===0:T%y===0)||o>l&&N===D};this.setState(Ji(Ji({},i,u+C),"brushMoveStartX",r.pageX),function(){g&&I()&&g(k)})}},{key:"handleTravellerMoveKeyboard",value:function(r,s){var a=this,i=this.state,o=i.scaleValues,l=i.startX,u=i.endX,c=this.state[s],d=o.indexOf(c);if(d!==-1){var h=d+r;if(!(h===-1||h>=o.length)){var m=o[h];s==="startX"&&m>=u||s==="endX"&&m<=l||this.setState(Ji({},s,m),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,s=r.x,a=r.y,i=r.width,o=r.height,l=r.fill,u=r.stroke;return pe.createElement("rect",{stroke:u,fill:l,x:s,y:a,width:i,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,s=r.x,a=r.y,i=r.width,o=r.height,l=r.data,u=r.children,c=r.padding,d=L.Children.only(u);return d?pe.cloneElement(d,{x:s,y:a,width:i,height:o,margin:c,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,s){var a,i,o=this,l=this.props,u=l.y,c=l.travellerWidth,d=l.height,h=l.traveller,m=l.ariaLabel,g=l.data,y=l.startIndex,b=l.endIndex,w=Math.max(r,this.props.x),C=X_(X_({},wn(this.props,!1)),{},{x:w,y:u,width:c,height:d}),k=m||"Min value: ".concat((a=g[y])===null||a===void 0?void 0:a.name,", Max value: ").concat((i=g[b])===null||i===void 0?void 0:i.name);return pe.createElement(ds,{tabIndex:0,role:"slider","aria-label":k,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(N){["ArrowLeft","ArrowRight"].includes(N.key)&&(N.preventDefault(),N.stopPropagation(),o.handleTravellerMoveKeyboard(N.key==="ArrowRight"?1:-1,s))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,C))}},{key:"renderSlide",value:function(r,s){var a=this.props,i=a.y,o=a.height,l=a.stroke,u=a.travellerWidth,c=Math.min(r,s)+u,d=Math.max(Math.abs(s-r)-u,0);return pe.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:c,y:i,width:d,height:o})}},{key:"renderText",value:function(){var r=this.props,s=r.startIndex,a=r.endIndex,i=r.y,o=r.height,l=r.travellerWidth,u=r.stroke,c=this.state,d=c.startX,h=c.endX,m=5,g={pointerEvents:"none",fill:u};return pe.createElement(ds,{className:"recharts-brush-texts"},pe.createElement(q2,xC({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-m,y:i+o/2},g),this.getTextOfTick(s)),pe.createElement(q2,xC({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+l+m,y:i+o/2},g),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,s=r.data,a=r.className,i=r.children,o=r.x,l=r.y,u=r.width,c=r.height,d=r.alwaysShowText,h=this.state,m=h.startX,g=h.endX,y=h.isTextActive,b=h.isSlideMoving,w=h.isTravellerMoving,C=h.isTravellerFocused;if(!s||!s.length||!ut(o)||!ut(l)||!ut(u)||!ut(c)||u<=0||c<=0)return null;var k=mt("recharts-brush",a),T=pe.Children.count(i)===1,N=olt("userSelect","none");return pe.createElement(ds,{className:k,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:N},this.renderBackground(),T&&this.renderPanorama(),this.renderSlide(m,g),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(g,"endX"),(y||b||w||C||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var s=r.x,a=r.y,i=r.width,o=r.height,l=r.stroke,u=Math.floor(a+o/2)-1;return pe.createElement(pe.Fragment,null,pe.createElement("rect",{x:s,y:a,width:i,height:o,fill:l,stroke:"none"}),pe.createElement("line",{x1:s+1,y1:u,x2:s+i-1,y2:u,fill:"none",stroke:"#fff"}),pe.createElement("line",{x1:s+1,y1:u+2,x2:s+i-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,s){var a;return pe.isValidElement(r)?a=pe.cloneElement(r,s):on(r)?a=r(s):a=e.renderDefaultTraveller(s),a}},{key:"getDerivedStateFromProps",value:function(r,s){var a=r.data,i=r.width,o=r.x,l=r.travellerWidth,u=r.updateId,c=r.startIndex,d=r.endIndex;if(a!==s.prevData||u!==s.prevUpdateId)return X_({prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:o,prevWidth:i},a&&a.length?mlt({data:a,width:i,x:o,travellerWidth:l,startIndex:c,endIndex:d}):{scale:null,scaleValues:null});if(s.scale&&(i!==s.prevWidth||o!==s.prevX||l!==s.prevTravellerWidth)){s.scale.range([o,o+i-l]);var h=s.scale.domain().map(function(m){return s.scale(m)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:o,prevWidth:i,startX:s.scale(r.startIndex),endX:s.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,s){for(var a=r.length,i=0,o=a-1;o-i>1;){var l=Math.floor((i+o)/2);r[l]>s?o=l:i=l}return s>=r[o]?o:i}}])}(L.PureComponent);Ji(Qm,"displayName","Brush");Ji(Qm,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Y_,r9;function glt(){if(r9)return Y_;r9=1;var t=oL();function e(n,r){var s;return t(n,function(a,i,o){return s=r(a,i,o),!s}),!!s}return Y_=e,Y_}var Q_,s9;function ylt(){if(s9)return Q_;s9=1;var t=wse(),e=ef(),n=glt(),r=ji(),s=CT();function a(i,o,l){var u=r(i)?t:n;return l&&s(i,o,l)&&(o=void 0),u(i,e(o,3))}return Q_=a,Q_}var blt=ylt();const xlt=Un(blt);var Cu=function(e,n){var r=e.alwaysShow,s=e.ifOverflow;return r&&(s="extendDomain"),s===n},Z_,a9;function vlt(){if(a9)return Z_;a9=1;var t=Fse();function e(n,r,s){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:s,writable:!0}):n[r]=s}return Z_=e,Z_}var J_,i9;function wlt(){if(i9)return J_;i9=1;var t=vlt(),e=jse(),n=ef();function r(s,a){var i={};return a=n(a,3),e(s,function(o,l,u){t(i,l,a(o,l,u))}),i}return J_=r,J_}var Slt=wlt();const Clt=Un(Slt);var e3,o9;function klt(){if(o9)return e3;o9=1;function t(e,n){for(var r=-1,s=e==null?0:e.length;++r<s;)if(!n(e[r],r,e))return!1;return!0}return e3=t,e3}var t3,l9;function Nlt(){if(l9)return t3;l9=1;var t=oL();function e(n,r){var s=!0;return t(n,function(a,i,o){return s=!!r(a,i,o),s}),s}return t3=e,t3}var n3,u9;function Tlt(){if(u9)return n3;u9=1;var t=klt(),e=Nlt(),n=ef(),r=ji(),s=CT();function a(i,o,l){var u=r(i)?t:e;return l&&s(i,o,l)&&(o=void 0),u(i,n(o,3))}return n3=a,n3}var $lt=Tlt();const mie=Un($lt);var Ilt=["x","y"];function Nx(t){"@babel/helpers - typeof";return Nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nx(t)}function zP(){return zP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zP.apply(this,arguments)}function c9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Y0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c9(Object(n),!0).forEach(function(r){Elt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Elt(t,e,n){return e=Alt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Alt(t){var e=Rlt(t,"string");return Nx(e)=="symbol"?e:e+""}function Rlt(t,e){if(Nx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Nx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Olt(t,e){if(t==null)return{};var n=_lt(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _lt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Dlt(t,e){var n=t.x,r=t.y,s=Olt(t,Ilt),a="".concat(n),i=parseInt(a,10),o="".concat(r),l=parseInt(o,10),u="".concat(e.height||s.height),c=parseInt(u,10),d="".concat(e.width||s.width),h=parseInt(d,10);return Y0(Y0(Y0(Y0(Y0({},e),s),i?{x:i}:{}),l?{y:l}:{}),{},{height:c,width:h,name:e.name,radius:e.radius})}function d9(t){return pe.createElement(Hot,zP({shapeType:"rectangle",propTransformer:Dlt,activeClassName:"recharts-active-bar"},t))}var Plt=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,s){if(typeof e=="number")return e;var a=typeof r=="number";return a?e(r,s):(a||Eh(),n)}},Mlt=["value","background"],gie;function Zm(t){"@babel/helpers - typeof";return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zm(t)}function jlt(t,e){if(t==null)return{};var n=Llt(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Llt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function wC(){return wC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wC.apply(this,arguments)}function f9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function bs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f9(Object(n),!0).forEach(function(r){wd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Flt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h9(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bie(r.key),r)}}function zlt(t,e,n){return e&&h9(t.prototype,e),n&&h9(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Blt(t,e,n){return e=SC(e),Ult(t,yie()?Reflect.construct(e,n||[],SC(t).constructor):e.apply(t,n))}function Ult(t,e){if(e&&(Zm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vlt(t)}function Vlt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yie=function(){return!!t})()}function SC(t){return SC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},SC(t)}function Wlt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BP(t,e)}function BP(t,e){return BP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},BP(t,e)}function wd(t,e,n){return e=bie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bie(t){var e=Glt(t,"string");return Zm(e)=="symbol"?e:e+""}function Glt(t,e){if(Zm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var S1=function(t){function e(){var n;Flt(this,e);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=Blt(this,e,[].concat(s)),wd(n,"state",{isAnimationFinished:!1}),wd(n,"id",m1("recharts-bar-")),wd(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),i&&i()}),wd(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),i&&i()}),n}return Wlt(e,t),zlt(e,[{key:"renderRectanglesStatically",value:function(r){var s=this,a=this.props,i=a.shape,o=a.dataKey,l=a.activeIndex,u=a.activeBar,c=wn(this.props,!1);return r&&r.map(function(d,h){var m=h===l,g=m?u:i,y=bs(bs(bs({},c),d),{},{isActive:m,option:g,index:h,dataKey:o,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return pe.createElement(ds,wC({className:"recharts-bar-rectangle"},M2(s.props,d,h),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(h)}),pe.createElement(d9,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,s=this.props,a=s.data,i=s.layout,o=s.isAnimationActive,l=s.animationBegin,u=s.animationDuration,c=s.animationEasing,d=s.animationId,h=this.state.prevData;return pe.createElement(_c,{begin:l,duration:u,isActive:o,easing:c,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var g=m.t,y=a.map(function(b,w){var C=h&&h[w];if(C){var k=Al(C.x,b.x),T=Al(C.y,b.y),N=Al(C.width,b.width),I=Al(C.height,b.height);return bs(bs({},b),{},{x:k(g),y:T(g),width:N(g),height:I(g)})}if(i==="horizontal"){var A=Al(0,b.height),D=A(g);return bs(bs({},b),{},{y:b.y+b.height-D,height:D})}var P=Al(0,b.width),R=P(g);return bs(bs({},b),{},{width:R})});return pe.createElement(ds,null,r.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var r=this.props,s=r.data,a=r.isAnimationActive,i=this.state.prevData;return a&&s&&s.length&&(!i||!OT(i,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var r=this,s=this.props,a=s.data,i=s.dataKey,o=s.activeIndex,l=wn(this.props.background,!1);return a.map(function(u,c){u.value;var d=u.background,h=jlt(u,Mlt);if(!d)return null;var m=bs(bs(bs(bs(bs({},h),{},{fill:"#eee"},d),l),M2(r.props,u,c)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:i,index:c,className:"recharts-bar-background-rectangle"});return pe.createElement(d9,wC({key:"background-bar-".concat(c),option:r.props.background,isActive:c===o},m))})}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.data,o=a.xAxis,l=a.yAxis,u=a.layout,c=a.children,d=el(c,w1);if(!d)return null;var h=u==="vertical"?i[0].height/2:i[0].width/2,m=function(b,w){var C=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:C,errorVal:po(b,w)}},g={clipPath:r?"url(#clipPath-".concat(s,")"):null};return pe.createElement(ds,g,d.map(function(y){return pe.cloneElement(y,{key:"error-bar-".concat(s,"-").concat(y.props.dataKey),data:i,xAxis:o,yAxis:l,layout:u,offset:h,dataPointFormatter:m})}))}},{key:"render",value:function(){var r=this.props,s=r.hide,a=r.data,i=r.className,o=r.xAxis,l=r.yAxis,u=r.left,c=r.top,d=r.width,h=r.height,m=r.isAnimationActive,g=r.background,y=r.id;if(s||!a||!a.length)return null;var b=this.state.isAnimationFinished,w=mt("recharts-bar",i),C=o&&o.allowDataOverflow,k=l&&l.allowDataOverflow,T=C||k,N=xn(y)?this.id:y;return pe.createElement(ds,{className:w},C||k?pe.createElement("defs",null,pe.createElement("clipPath",{id:"clipPath-".concat(N)},pe.createElement("rect",{x:C?u:u-d/2,y:k?c:c-h/2,width:C?d:d*2,height:k?h:h*2}))):null,pe.createElement(ds,{className:"recharts-bar-rectangles",clipPath:T?"url(#clipPath-".concat(N,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(T,N),(!m||b)&&Td.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:s.curData}:r.data!==s.curData?{curData:r.data}:null}}])}(L.PureComponent);gie=S1;wd(S1,"displayName","Bar");wd(S1,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ry.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});wd(S1,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,s=t.bandSize,a=t.xAxis,i=t.yAxis,o=t.xAxisTicks,l=t.yAxisTicks,u=t.stackedData,c=t.dataStartIndex,d=t.displayedData,h=t.offset,m=rst(r,n);if(!m)return null;var g=e.layout,y=n.type.defaultProps,b=y!==void 0?bs(bs({},y),n.props):n.props,w=b.dataKey,C=b.children,k=b.minPointSize,T=g==="horizontal"?i:a,N=u?T.scale.domain():null,I=dst({numericAxis:T}),A=el(C,Hse),D=d.map(function(P,R){var O,F,z,V,W,j;u?O=sst(u[c+R],N):(O=po(P,w),Array.isArray(O)||(O=[I,O]));var q=Plt(k,gie.defaultProps.minPointSize)(O[1],R);if(g==="horizontal"){var Y,Q=[i.scale(O[0]),i.scale(O[1])],H=Q[0],ee=Q[1];F=Xq({axis:a,ticks:o,bandSize:s,offset:m.offset,entry:P,index:R}),z=(Y=ee??H)!==null&&Y!==void 0?Y:void 0,V=m.size;var te=H-ee;if(W=Number.isNaN(te)?0:te,j={x:F,y:i.y,width:V,height:i.height},Math.abs(q)>0&&Math.abs(W)<Math.abs(q)){var ne=_l(W||q)*(Math.abs(q)-Math.abs(W));z-=ne,W+=ne}}else{var he=[a.scale(O[0]),a.scale(O[1])],Se=he[0],Ie=he[1];if(F=Se,z=Xq({axis:i,ticks:l,bandSize:s,offset:m.offset,entry:P,index:R}),V=Ie-Se,W=m.size,j={x:a.x,y:z,width:a.width,height:W},Math.abs(q)>0&&Math.abs(V)<Math.abs(q)){var Qe=_l(V||q)*(Math.abs(q)-Math.abs(V));V+=Qe}}return bs(bs(bs({},P),{},{x:F,y:z,width:V,height:W,value:u?O:O[1],payload:P,background:j},A&&A[R]&&A[R].props),{},{tooltipPayload:[Zae(n,P)],tooltipPosition:{x:F+V/2,y:z+W/2}})});return bs({data:D,layout:g},h)});function Tx(t){"@babel/helpers - typeof";return Tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tx(t)}function Hlt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p9(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xie(r.key),r)}}function qlt(t,e,n){return e&&p9(t.prototype,e),n&&p9(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Tl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m9(Object(n),!0).forEach(function(r){jT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jT(t,e,n){return e=xie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xie(t){var e=Klt(t,"string");return Tx(e)=="symbol"?e:e+""}function Klt(t,e){if(Tx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xlt=function(e,n,r,s,a){var i=e.width,o=e.height,l=e.layout,u=e.children,c=Object.keys(n),d={left:r.left,leftMirror:r.left,right:i-r.right,rightMirror:i-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},h=!!eo(u,S1);return c.reduce(function(m,g){var y=n[g],b=y.orientation,w=y.domain,C=y.padding,k=C===void 0?{}:C,T=y.mirror,N=y.reversed,I="".concat(b).concat(T?"Mirror":""),A,D,P,R,O;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var F=w[1]-w[0],z=1/0,V=y.categoricalDomain.sort();if(V.forEach(function(he,Se){Se>0&&(z=Math.min((he||0)-(V[Se-1]||0),z))}),Number.isFinite(z)){var W=z/F,j=y.layout==="vertical"?r.height:r.width;if(y.padding==="gap"&&(A=W*j/2),y.padding==="no-gap"){var q=$h(e.barCategoryGap,W*j),Y=W*j/2;A=Y-q-(Y-q)/j*q}}}s==="xAxis"?D=[r.left+(k.left||0)+(A||0),r.left+r.width-(k.right||0)-(A||0)]:s==="yAxis"?D=l==="horizontal"?[r.top+r.height-(k.bottom||0),r.top+(k.top||0)]:[r.top+(k.top||0)+(A||0),r.top+r.height-(k.bottom||0)-(A||0)]:D=y.range,N&&(D=[D[1],D[0]]);var Q=tst(y,a,h),H=Q.scale,ee=Q.realScaleType;H.domain(w).range(D),nst(H);var te=cst(H,Tl(Tl({},y),{},{realScaleType:ee}));s==="xAxis"?(O=b==="top"&&!T||b==="bottom"&&T,P=r.left,R=d[I]-O*y.height):s==="yAxis"&&(O=b==="left"&&!T||b==="right"&&T,P=d[I]-O*y.width,R=r.top);var ne=Tl(Tl(Tl({},y),te),{},{realScaleType:ee,x:P,y:R,scale:H,width:s==="xAxis"?r.width:y.width,height:s==="yAxis"?r.height:y.height});return ne.bandSize=oC(ne,te),!y.hide&&s==="xAxis"?d[I]+=(O?-1:1)*ne.height:y.hide||(d[I]+=(O?-1:1)*ne.width),Tl(Tl({},m),{},jT({},g,ne))},{})},vie=function(e,n){var r=e.x,s=e.y,a=n.x,i=n.y;return{x:Math.min(r,a),y:Math.min(s,i),width:Math.abs(a-r),height:Math.abs(i-s)}},Ylt=function(e){var n=e.x1,r=e.y1,s=e.x2,a=e.y2;return vie({x:n,y:r},{x:s,y:a})},wie=function(){function t(e){Hlt(this,t),this.scale=e}return qlt(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+i}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(s){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),s=r[0],a=r[r.length-1];return s<=a?n>=s&&n<=a:n>=a&&n<=s}}],[{key:"create",value:function(n){return new t(n)}}])}();jT(wie,"EPS",1e-4);var FL=function(e){var n=Object.keys(e).reduce(function(r,s){return Tl(Tl({},r),{},jT({},s,wie.create(e[s])))},{});return Tl(Tl({},n),{},{apply:function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.bandAware,o=a.position;return Clt(s,function(l,u){return n[u].apply(l,{bandAware:i,position:o})})},isInRange:function(s){return mie(s,function(a,i){return n[i].isInRange(a)})}})};function Qlt(t){return(t%180+180)%180}var Zlt=function(e){var n=e.width,r=e.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Qlt(s),i=a*Math.PI/180,o=Math.atan(r/n),l=i>o&&i<Math.PI-o?r/Math.sin(i):n/Math.cos(i);return Math.abs(l)},r3,g9;function Jlt(){if(g9)return r3;g9=1;var t=ef(),e=g1(),n=wT();function r(s){return function(a,i,o){var l=Object(a);if(!e(a)){var u=t(i,3);a=n(a),i=function(d){return u(l[d],d,l)}}var c=s(a,i,o);return c>-1?l[u?a[c]:c]:void 0}}return r3=r,r3}var s3,y9;function eut(){if(y9)return s3;y9=1;var t=die();function e(n){var r=t(n),s=r%1;return r===r?s?r-s:r:0}return s3=e,s3}var a3,b9;function tut(){if(b9)return a3;b9=1;var t=Ose(),e=ef(),n=eut(),r=Math.max;function s(a,i,o){var l=a==null?0:a.length;if(!l)return-1;var u=o==null?0:n(o);return u<0&&(u=r(l+u,0)),t(a,e(i,3),u)}return a3=s,a3}var i3,x9;function nut(){if(x9)return i3;x9=1;var t=Jlt(),e=tut(),n=t(e);return i3=n,i3}var rut=nut();const sut=Un(rut);var aut=Kre();const iut=Un(aut);var out=iut(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),zL=L.createContext(void 0),BL=L.createContext(void 0),Sie=L.createContext(void 0),Cie=L.createContext({}),kie=L.createContext(void 0),Nie=L.createContext(0),Tie=L.createContext(0),v9=function(e){var n=e.state,r=n.xAxisMap,s=n.yAxisMap,a=n.offset,i=e.clipPathId,o=e.children,l=e.width,u=e.height,c=out(a);return pe.createElement(zL.Provider,{value:r},pe.createElement(BL.Provider,{value:s},pe.createElement(Cie.Provider,{value:a},pe.createElement(Sie.Provider,{value:c},pe.createElement(kie.Provider,{value:i},pe.createElement(Nie.Provider,{value:u},pe.createElement(Tie.Provider,{value:l},o)))))))},lut=function(){return L.useContext(kie)},$ie=function(e){var n=L.useContext(zL);n==null&&Eh();var r=n[e];return r==null&&Eh(),r},uut=function(){var e=L.useContext(zL);return gd(e)},cut=function(){var e=L.useContext(BL),n=sut(e,function(r){return mie(r.domain,Number.isFinite)});return n||gd(e)},Iie=function(e){var n=L.useContext(BL);n==null&&Eh();var r=n[e];return r==null&&Eh(),r},dut=function(){var e=L.useContext(Sie);return e},fut=function(){return L.useContext(Cie)},UL=function(){return L.useContext(Tie)},VL=function(){return L.useContext(Nie)};function Jm(t){"@babel/helpers - typeof";return Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jm(t)}function hut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function put(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Aie(r.key),r)}}function mut(t,e,n){return e&&put(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gut(t,e,n){return e=CC(e),yut(t,Eie()?Reflect.construct(e,n||[],CC(t).constructor):e.apply(t,n))}function yut(t,e){if(e&&(Jm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return but(t)}function but(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Eie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Eie=function(){return!!t})()}function CC(t){return CC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},CC(t)}function xut(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UP(t,e)}function UP(t,e){return UP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},UP(t,e)}function w9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function S9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w9(Object(n),!0).forEach(function(r){WL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WL(t,e,n){return e=Aie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aie(t){var e=vut(t,"string");return Jm(e)=="symbol"?e:e+""}function vut(t,e){if(Jm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function wut(t,e){return Nut(t)||kut(t,e)||Cut(t,e)||Sut()}function Sut(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cut(t,e){if(t){if(typeof t=="string")return C9(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C9(t,e)}}function C9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kut(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,i,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function Nut(t){if(Array.isArray(t))return t}function VP(){return VP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VP.apply(this,arguments)}var Tut=function(e,n){var r;return pe.isValidElement(e)?r=pe.cloneElement(e,n):on(e)?r=e(n):r=pe.createElement("line",VP({},n,{className:"recharts-reference-line-line"})),r},$ut=function(e,n,r,s,a,i,o,l,u){var c=a.x,d=a.y,h=a.width,m=a.height;if(r){var g=u.y,y=e.y.apply(g,{position:i});if(Cu(u,"discard")&&!e.y.isInRange(y))return null;var b=[{x:c+h,y},{x:c,y}];return l==="left"?b.reverse():b}if(n){var w=u.x,C=e.x.apply(w,{position:i});if(Cu(u,"discard")&&!e.x.isInRange(C))return null;var k=[{x:C,y:d+m},{x:C,y:d}];return o==="top"?k.reverse():k}if(s){var T=u.segment,N=T.map(function(I){return e.apply(I,{position:i})});return Cu(u,"discard")&&xlt(N,function(I){return!e.isInRange(I)})?null:N}return null};function Iut(t){var e=t.x,n=t.y,r=t.segment,s=t.xAxisId,a=t.yAxisId,i=t.shape,o=t.className,l=t.alwaysShow,u=lut(),c=$ie(s),d=Iie(a),h=dut();if(!u||!h)return null;Sc(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=FL({x:c.scale,y:d.scale}),g=Fs(e),y=Fs(n),b=r&&r.length===2,w=$ut(m,g,y,b,h,t.position,c.orientation,d.orientation,t);if(!w)return null;var C=wut(w,2),k=C[0],T=k.x,N=k.y,I=C[1],A=I.x,D=I.y,P=Cu(t,"hidden")?"url(#".concat(u,")"):void 0,R=S9(S9({clipPath:P},wn(t,!0)),{},{x1:T,y1:N,x2:A,y2:D});return pe.createElement(ds,{className:mt("recharts-reference-line",o)},Tut(i,R),_a.renderCallByParent(t,Ylt({x1:T,y1:N,x2:A,y2:D})))}var GL=function(t){function e(){return hut(this,e),gut(this,e,arguments)}return xut(e,t),mut(e,[{key:"render",value:function(){return pe.createElement(Iut,this.props)}}])}(pe.Component);WL(GL,"displayName","ReferenceLine");WL(GL,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function WP(){return WP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WP.apply(this,arguments)}function eg(t){"@babel/helpers - typeof";return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eg(t)}function k9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function N9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k9(Object(n),!0).forEach(function(r){LT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Aut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Oie(r.key),r)}}function Rut(t,e,n){return e&&Aut(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Out(t,e,n){return e=kC(e),_ut(t,Rie()?Reflect.construct(e,n||[],kC(t).constructor):e.apply(t,n))}function _ut(t,e){if(e&&(eg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dut(t)}function Dut(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rie=function(){return!!t})()}function kC(t){return kC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kC(t)}function Put(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GP(t,e)}function GP(t,e){return GP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},GP(t,e)}function LT(t,e,n){return e=Oie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oie(t){var e=Mut(t,"string");return eg(e)=="symbol"?e:e+""}function Mut(t,e){if(eg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(eg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var jut=function(e){var n=e.x,r=e.y,s=e.xAxis,a=e.yAxis,i=FL({x:s.scale,y:a.scale}),o=i.apply({x:n,y:r},{bandAware:!0});return Cu(e,"discard")&&!i.isInRange(o)?null:o},FT=function(t){function e(){return Eut(this,e),Out(this,e,arguments)}return Put(e,t),Rut(e,[{key:"render",value:function(){var r=this.props,s=r.x,a=r.y,i=r.r,o=r.alwaysShow,l=r.clipPathId,u=Fs(s),c=Fs(a);if(Sc(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!c)return null;var d=jut(this.props);if(!d)return null;var h=d.x,m=d.y,g=this.props,y=g.shape,b=g.className,w=Cu(this.props,"hidden")?"url(#".concat(l,")"):void 0,C=N9(N9({clipPath:w},wn(this.props,!0)),{},{cx:h,cy:m});return pe.createElement(ds,{className:mt("recharts-reference-dot",b)},e.renderDot(y,C),_a.renderCallByParent(this.props,{x:h-i,y:m-i,width:2*i,height:2*i}))}}])}(pe.Component);LT(FT,"displayName","ReferenceDot");LT(FT,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});LT(FT,"renderDot",function(t,e){var n;return pe.isValidElement(t)?n=pe.cloneElement(t,e):on(t)?n=t(e):n=pe.createElement(LL,WP({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function HP(){return HP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HP.apply(this,arguments)}function tg(t){"@babel/helpers - typeof";return tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tg(t)}function T9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function $9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T9(Object(n),!0).forEach(function(r){zT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Die(r.key),r)}}function zut(t,e,n){return e&&Fut(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function But(t,e,n){return e=NC(e),Uut(t,_ie()?Reflect.construct(e,n||[],NC(t).constructor):e.apply(t,n))}function Uut(t,e){if(e&&(tg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vut(t)}function Vut(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _ie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_ie=function(){return!!t})()}function NC(t){return NC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},NC(t)}function Wut(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qP(t,e)}function qP(t,e){return qP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},qP(t,e)}function zT(t,e,n){return e=Die(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Die(t){var e=Gut(t,"string");return tg(e)=="symbol"?e:e+""}function Gut(t,e){if(tg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Hut=function(e,n,r,s,a){var i=a.x1,o=a.x2,l=a.y1,u=a.y2,c=a.xAxis,d=a.yAxis;if(!c||!d)return null;var h=FL({x:c.scale,y:d.scale}),m={x:e?h.x.apply(i,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(l,{position:"start"}):h.y.rangeMin},g={x:n?h.x.apply(o,{position:"end"}):h.x.rangeMax,y:s?h.y.apply(u,{position:"end"}):h.y.rangeMax};return Cu(a,"discard")&&(!h.isInRange(m)||!h.isInRange(g))?null:vie(m,g)},BT=function(t){function e(){return Lut(this,e),But(this,e,arguments)}return Wut(e,t),zut(e,[{key:"render",value:function(){var r=this.props,s=r.x1,a=r.x2,i=r.y1,o=r.y2,l=r.className,u=r.alwaysShow,c=r.clipPathId;Sc(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=Fs(s),h=Fs(a),m=Fs(i),g=Fs(o),y=this.props.shape;if(!d&&!h&&!m&&!g&&!y)return null;var b=Hut(d,h,m,g,this.props);if(!b&&!y)return null;var w=Cu(this.props,"hidden")?"url(#".concat(c,")"):void 0;return pe.createElement(ds,{className:mt("recharts-reference-area",l)},e.renderRect(y,$9($9({clipPath:w},wn(this.props,!0)),b)),_a.renderCallByParent(this.props,b))}}])}(pe.Component);zT(BT,"displayName","ReferenceArea");zT(BT,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});zT(BT,"renderRect",function(t,e){var n;return pe.isValidElement(t)?n=pe.cloneElement(t,e):on(t)?n=t(e):n=pe.createElement(jL,HP({},e,{className:"recharts-reference-area-rect"})),n});function Pie(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],s=0;s<t.length;s+=e)r.push(t[s]);return r}function qut(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Zlt(r,n)}function Kut(t,e,n){var r=n==="width",s=t.x,a=t.y,i=t.width,o=t.height;return e===1?{start:r?s:a,end:r?s+i:a+o}:{start:r?s+i:a+o,end:r?s:a}}function TC(t,e,n,r,s){if(t*e<t*r||t*e>t*s)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-s)<=0}function Xut(t,e){return Pie(t,e+1)}function Yut(t,e,n,r,s){for(var a=(r||[]).slice(),i=e.start,o=e.end,l=0,u=1,c=i,d=function(){var g=r==null?void 0:r[l];if(g===void 0)return{v:Pie(r,u)};var y=l,b,w=function(){return b===void 0&&(b=n(g,y)),b},C=g.coordinate,k=l===0||TC(t,C,w,c,o);k||(l=0,c=i,u+=1),k&&(c=C+t*(w()/2+s),l+=u)},h;u<=a.length;)if(h=d(),h)return h.v;return[]}function $x(t){"@babel/helpers - typeof";return $x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$x(t)}function I9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ea(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I9(Object(n),!0).forEach(function(r){Qut(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qut(t,e,n){return e=Zut(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zut(t){var e=Jut(t,"string");return $x(e)=="symbol"?e:e+""}function Jut(t,e){if($x(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($x(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ect(t,e,n,r,s){for(var a=(r||[]).slice(),i=a.length,o=e.start,l=e.end,u=function(h){var m=a[h],g,y=function(){return g===void 0&&(g=n(m,h)),g};if(h===i-1){var b=t*(m.coordinate+t*y()/2-l);a[h]=m=Ea(Ea({},m),{},{tickCoord:b>0?m.coordinate-b*t:m.coordinate})}else a[h]=m=Ea(Ea({},m),{},{tickCoord:m.coordinate});var w=TC(t,m.tickCoord,y,o,l);w&&(l=m.tickCoord-t*(y()/2+s),a[h]=Ea(Ea({},m),{},{isShow:!0}))},c=i-1;c>=0;c--)u(c);return a}function tct(t,e,n,r,s,a){var i=(r||[]).slice(),o=i.length,l=e.start,u=e.end;if(a){var c=r[o-1],d=n(c,o-1),h=t*(c.coordinate+t*d/2-u);i[o-1]=c=Ea(Ea({},c),{},{tickCoord:h>0?c.coordinate-h*t:c.coordinate});var m=TC(t,c.tickCoord,function(){return d},l,u);m&&(u=c.tickCoord-t*(d/2+s),i[o-1]=Ea(Ea({},c),{},{isShow:!0}))}for(var g=a?o-1:o,y=function(C){var k=i[C],T,N=function(){return T===void 0&&(T=n(k,C)),T};if(C===0){var I=t*(k.coordinate-t*N()/2-l);i[C]=k=Ea(Ea({},k),{},{tickCoord:I<0?k.coordinate-I*t:k.coordinate})}else i[C]=k=Ea(Ea({},k),{},{tickCoord:k.coordinate});var A=TC(t,k.tickCoord,N,l,u);A&&(l=k.tickCoord+t*(N()/2+s),i[C]=Ea(Ea({},k),{},{isShow:!0}))},b=0;b<g;b++)y(b);return i}function HL(t,e,n){var r=t.tick,s=t.ticks,a=t.viewBox,i=t.minTickGap,o=t.orientation,l=t.interval,u=t.tickFormatter,c=t.unit,d=t.angle;if(!s||!s.length||!r)return[];if(ut(l)||Ry.isSsr)return Xut(s,typeof l=="number"&&ut(l)?l:0);var h=[],m=o==="top"||o==="bottom"?"width":"height",g=c&&m==="width"?mb(c,{fontSize:e,letterSpacing:n}):{width:0,height:0},y=function(k,T){var N=on(u)?u(k.value,T):k.value;return m==="width"?qut(mb(N,{fontSize:e,letterSpacing:n}),g,d):mb(N,{fontSize:e,letterSpacing:n})[m]},b=s.length>=2?_l(s[1].coordinate-s[0].coordinate):1,w=Kut(a,b,m);return l==="equidistantPreserveStart"?Yut(b,w,y,s,i):(l==="preserveStart"||l==="preserveStartEnd"?h=tct(b,w,y,s,i,l==="preserveStartEnd"):h=ect(b,w,y,s,i),h.filter(function(C){return C.isShow}))}var nct=["viewBox"],rct=["viewBox"],sct=["ticks"];function ng(t){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ng(t)}function lm(){return lm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lm.apply(this,arguments)}function E9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ei(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E9(Object(n),!0).forEach(function(r){qL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function o3(t,e){if(t==null)return{};var n=act(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function act(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ict(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A9(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jie(r.key),r)}}function oct(t,e,n){return e&&A9(t.prototype,e),n&&A9(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function lct(t,e,n){return e=$C(e),uct(t,Mie()?Reflect.construct(e,n||[],$C(t).constructor):e.apply(t,n))}function uct(t,e){if(e&&(ng(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cct(t)}function cct(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mie=function(){return!!t})()}function $C(t){return $C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$C(t)}function dct(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KP(t,e)}function KP(t,e){return KP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},KP(t,e)}function qL(t,e,n){return e=jie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jie(t){var e=fct(t,"string");return ng(e)=="symbol"?e:e+""}function fct(t,e){if(ng(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ng(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Py=function(t){function e(n){var r;return ict(this,e),r=lct(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return dct(e,t),oct(e,[{key:"shouldComponentUpdate",value:function(r,s){var a=r.viewBox,i=o3(r,nct),o=this.props,l=o.viewBox,u=o3(o,rct);return!ym(a,l)||!ym(i,u)||!ym(s,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var s=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,u=s.orientation,c=s.tickSize,d=s.mirror,h=s.tickMargin,m,g,y,b,w,C,k=d?-1:1,T=r.tickSize||c,N=ut(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":m=g=r.coordinate,b=i+ +!d*l,y=b-k*T,C=y-k*h,w=N;break;case"left":y=b=r.coordinate,g=a+ +!d*o,m=g-k*T,w=m-k*h,C=N;break;case"right":y=b=r.coordinate,g=a+ +d*o,m=g+k*T,w=m+k*h,C=N;break;default:m=g=r.coordinate,b=i+ +d*l,y=b+k*T,C=y+k*h,w=N;break}return{line:{x1:m,y1:y,x2:g,y2:b},tick:{x:w,y:C}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,s=r.orientation,a=r.mirror,i;switch(s){case"left":i=a?"start":"end";break;case"right":i=a?"end":"start";break;default:i="middle";break}return i}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,s=r.orientation,a=r.mirror,i="end";switch(s){case"left":case"right":i="middle";break;case"top":i=a?"start":"end";break;default:i=a?"end":"start";break}return i}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.x,a=r.y,i=r.width,o=r.height,l=r.orientation,u=r.mirror,c=r.axisLine,d=ei(ei(ei({},wn(this.props,!1)),wn(c,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!u||l==="bottom"&&u);d=ei(ei({},d),{},{x1:s,y1:a+h*o,x2:s+i,y2:a+h*o})}else{var m=+(l==="left"&&!u||l==="right"&&u);d=ei(ei({},d),{},{x1:s+m*i,y1:a,x2:s+m*i,y2:a+o})}return pe.createElement("line",lm({},d,{className:mt("recharts-cartesian-axis-line",Jo(c,"className"))}))}},{key:"renderTicks",value:function(r,s,a){var i=this,o=this.props,l=o.tickLine,u=o.stroke,c=o.tick,d=o.tickFormatter,h=o.unit,m=HL(ei(ei({},this.props),{},{ticks:r}),s,a),g=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),b=wn(this.props,!1),w=wn(c,!1),C=ei(ei({},b),{},{fill:"none"},wn(l,!1)),k=m.map(function(T,N){var I=i.getTickLineCoord(T),A=I.line,D=I.tick,P=ei(ei(ei(ei({textAnchor:g,verticalAnchor:y},b),{},{stroke:"none",fill:u},w),D),{},{index:N,payload:T,visibleTicksCount:m.length,tickFormatter:d});return pe.createElement(ds,lm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(T.value,"-").concat(T.coordinate,"-").concat(T.tickCoord)},M2(i.props,T,N)),l&&pe.createElement("line",lm({},C,A,{className:mt("recharts-cartesian-axis-tick-line",Jo(l,"className"))})),c&&e.renderTickItem(c,P,"".concat(on(d)?d(T.value,N):T.value).concat(h||"")))});return pe.createElement("g",{className:"recharts-cartesian-axis-ticks"},k)}},{key:"render",value:function(){var r=this,s=this.props,a=s.axisLine,i=s.width,o=s.height,l=s.ticksGenerator,u=s.className,c=s.hide;if(c)return null;var d=this.props,h=d.ticks,m=o3(d,sct),g=h;return on(l)&&(g=h&&h.length>0?l(this.props):l(m)),i<=0||o<=0||!g||!g.length?null:pe.createElement(ds,{className:mt("recharts-cartesian-axis",u),ref:function(b){r.layerReference=b}},a&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),_a.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,s,a){var i;return pe.isValidElement(r)?i=pe.cloneElement(r,s):on(r)?i=r(s):i=pe.createElement(q2,lm({},s,{className:"recharts-cartesian-axis-tick-value"}),a),i}}])}(L.Component);qL(Py,"displayName","CartesianAxis");qL(Py,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var hct=["x1","y1","x2","y2","key"],pct=["offset"];function Ah(t){"@babel/helpers - typeof";return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ah(t)}function R9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Da(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R9(Object(n),!0).forEach(function(r){mct(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mct(t,e,n){return e=gct(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gct(t){var e=yct(t,"string");return Ah(e)=="symbol"?e:e+""}function yct(t,e){if(Ah(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ah(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jf(){return Jf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jf.apply(this,arguments)}function O9(t,e){if(t==null)return{};var n=bct(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bct(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var xct=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,s=e.x,a=e.y,i=e.width,o=e.height,l=e.ry;return pe.createElement("rect",{x:s,y:a,ry:l,width:i,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Lie(t,e){var n;if(pe.isValidElement(t))n=pe.cloneElement(t,e);else if(on(t))n=t(e);else{var r=e.x1,s=e.y1,a=e.x2,i=e.y2,o=e.key,l=O9(e,hct),u=wn(l,!1);u.offset;var c=O9(u,pct);n=pe.createElement("line",Jf({},c,{x1:r,y1:s,x2:a,y2:i,fill:"none",key:o}))}return n}function vct(t){var e=t.x,n=t.width,r=t.horizontal,s=r===void 0?!0:r,a=t.horizontalPoints;if(!s||!a||!a.length)return null;var i=a.map(function(o,l){var u=Da(Da({},t),{},{x1:e,y1:o,x2:e+n,y2:o,key:"line-".concat(l),index:l});return Lie(s,u)});return pe.createElement("g",{className:"recharts-cartesian-grid-horizontal"},i)}function wct(t){var e=t.y,n=t.height,r=t.vertical,s=r===void 0?!0:r,a=t.verticalPoints;if(!s||!a||!a.length)return null;var i=a.map(function(o,l){var u=Da(Da({},t),{},{x1:o,y1:e,x2:o,y2:e+n,key:"line-".concat(l),index:l});return Lie(s,u)});return pe.createElement("g",{className:"recharts-cartesian-grid-vertical"},i)}function Sct(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,s=t.y,a=t.width,i=t.height,o=t.horizontalPoints,l=t.horizontal,u=l===void 0?!0:l;if(!u||!e||!e.length)return null;var c=o.map(function(h){return Math.round(h+s-s)}).sort(function(h,m){return h-m});s!==c[0]&&c.unshift(0);var d=c.map(function(h,m){var g=!c[m+1],y=g?s+i-h:c[m+1]-h;if(y<=0)return null;var b=m%e.length;return pe.createElement("rect",{key:"react-".concat(m),y:h,x:r,height:y,width:a,stroke:"none",fill:e[b],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return pe.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Cct(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,s=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var c=u.map(function(h){return Math.round(h+a-a)}).sort(function(h,m){return h-m});a!==c[0]&&c.unshift(0);var d=c.map(function(h,m){var g=!c[m+1],y=g?a+o-h:c[m+1]-h;if(y<=0)return null;var b=m%r.length;return pe.createElement("rect",{key:"react-".concat(m),x:h,y:i,width:y,height:l,stroke:"none",fill:r[b],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return pe.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var kct=function(e,n){var r=e.xAxis,s=e.width,a=e.height,i=e.offset;return Yae(HL(Da(Da(Da({},Py.defaultProps),r),{},{ticks:hc(r,!0),viewBox:{x:0,y:0,width:s,height:a}})),i.left,i.left+i.width,n)},Nct=function(e,n){var r=e.yAxis,s=e.width,a=e.height,i=e.offset;return Yae(HL(Da(Da(Da({},Py.defaultProps),r),{},{ticks:hc(r,!0),viewBox:{x:0,y:0,width:s,height:a}})),i.top,i.top+i.height,n)},qp={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function zS(t){var e,n,r,s,a,i,o=UL(),l=VL(),u=fut(),c=Da(Da({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:qp.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:qp.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:qp.horizontal,horizontalFill:(s=t.horizontalFill)!==null&&s!==void 0?s:qp.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:qp.vertical,verticalFill:(i=t.verticalFill)!==null&&i!==void 0?i:qp.verticalFill,x:ut(t.x)?t.x:u.left,y:ut(t.y)?t.y:u.top,width:ut(t.width)?t.width:u.width,height:ut(t.height)?t.height:u.height}),d=c.x,h=c.y,m=c.width,g=c.height,y=c.syncWithTicks,b=c.horizontalValues,w=c.verticalValues,C=uut(),k=cut();if(!ut(m)||m<=0||!ut(g)||g<=0||!ut(d)||d!==+d||!ut(h)||h!==+h)return null;var T=c.verticalCoordinatesGenerator||kct,N=c.horizontalCoordinatesGenerator||Nct,I=c.horizontalPoints,A=c.verticalPoints;if((!I||!I.length)&&on(N)){var D=b&&b.length,P=N({yAxis:k?Da(Da({},k),{},{ticks:D?b:k.ticks}):void 0,width:o,height:l,offset:u},D?!0:y);Sc(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Ah(P),"]")),Array.isArray(P)&&(I=P)}if((!A||!A.length)&&on(T)){var R=w&&w.length,O=T({xAxis:C?Da(Da({},C),{},{ticks:R?w:C.ticks}):void 0,width:o,height:l,offset:u},R?!0:y);Sc(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Ah(O),"]")),Array.isArray(O)&&(A=O)}return pe.createElement("g",{className:"recharts-cartesian-grid"},pe.createElement(xct,{fill:c.fill,fillOpacity:c.fillOpacity,x:c.x,y:c.y,width:c.width,height:c.height,ry:c.ry}),pe.createElement(vct,Jf({},c,{offset:u,horizontalPoints:I,xAxis:C,yAxis:k})),pe.createElement(wct,Jf({},c,{offset:u,verticalPoints:A,xAxis:C,yAxis:k})),pe.createElement(Sct,Jf({},c,{horizontalPoints:I})),pe.createElement(Cct,Jf({},c,{verticalPoints:A})))}zS.displayName="CartesianGrid";var Tct=["type","layout","connectNulls","ref"],$ct=["key"];function rg(t){"@babel/helpers - typeof";return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rg(t)}function _9(t,e){if(t==null)return{};var n=Ict(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ict(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function xb(){return xb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xb.apply(this,arguments)}function D9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Zi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D9(Object(n),!0).forEach(function(r){$l(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kp(t){return Oct(t)||Rct(t)||Act(t)||Ect()}function Ect(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Act(t,e){if(t){if(typeof t=="string")return XP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XP(t,e)}}function Rct(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Oct(t){if(Array.isArray(t))return XP(t)}function XP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _ct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P9(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zie(r.key),r)}}function Dct(t,e,n){return e&&P9(t.prototype,e),n&&P9(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pct(t,e,n){return e=IC(e),Mct(t,Fie()?Reflect.construct(e,n||[],IC(t).constructor):e.apply(t,n))}function Mct(t,e){if(e&&(rg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jct(t)}function jct(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Fie=function(){return!!t})()}function IC(t){return IC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},IC(t)}function Lct(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YP(t,e)}function YP(t,e){return YP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},YP(t,e)}function $l(t,e,n){return e=zie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zie(t){var e=Fct(t,"string");return rg(e)=="symbol"?e:e+""}function Fct(t,e){if(rg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var lh=function(t){function e(){var n;_ct(this,e);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=Pct(this,e,[].concat(s)),$l(n,"state",{isAnimationFinished:!0,totalLength:0}),$l(n,"generateSimpleStrokeDasharray",function(i,o){return"".concat(o,"px ").concat(i-o,"px")}),$l(n,"getStrokeDasharray",function(i,o,l){var u=l.reduce(function(w,C){return w+C});if(!u)return n.generateSimpleStrokeDasharray(o,i);for(var c=Math.floor(i/u),d=i%u,h=o-i,m=[],g=0,y=0;g<l.length;y+=l[g],++g)if(y+l[g]>d){m=[].concat(Kp(l.slice(0,g)),[d-y]);break}var b=m.length%2===0?[0,h]:[h];return[].concat(Kp(e.repeat(l,c)),Kp(m),b).map(function(w){return"".concat(w,"px")}).join(", ")}),$l(n,"id",m1("recharts-line-")),$l(n,"pathRef",function(i){n.mainCurve=i}),$l(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),$l(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return Lct(e,t),Dct(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.points,o=a.xAxis,l=a.yAxis,u=a.layout,c=a.children,d=el(c,w1);if(!d)return null;var h=function(y,b){return{x:y.x,y:y.y,value:y.value,errorVal:po(y.payload,b)}},m={clipPath:r?"url(#clipPath-".concat(s,")"):null};return pe.createElement(ds,m,d.map(function(g){return pe.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:i,xAxis:o,yAxis:l,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(r,s,a){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var o=this.props,l=o.dot,u=o.points,c=o.dataKey,d=wn(this.props,!1),h=wn(l,!0),m=u.map(function(y,b){var w=Zi(Zi(Zi({key:"dot-".concat(b),r:3},d),h),{},{index:b,cx:y.x,cy:y.y,value:y.value,dataKey:c,payload:y.payload,points:u});return e.renderDotItem(l,w)}),g={clipPath:r?"url(#clipPath-".concat(s?"":"dots-").concat(a,")"):null};return pe.createElement(ds,xb({className:"recharts-line-dots",key:"dots"},g),m)}},{key:"renderCurveStatically",value:function(r,s,a,i){var o=this.props,l=o.type,u=o.layout,c=o.connectNulls;o.ref;var d=_9(o,Tct),h=Zi(Zi(Zi({},wn(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(a,")"):null,points:r},i),{},{type:l,layout:u,connectNulls:c});return pe.createElement(NP,xb({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,s){var a=this,i=this.props,o=i.points,l=i.strokeDasharray,u=i.isAnimationActive,c=i.animationBegin,d=i.animationDuration,h=i.animationEasing,m=i.animationId,g=i.animateNewValues,y=i.width,b=i.height,w=this.state,C=w.prevPoints,k=w.totalLength;return pe.createElement(_c,{begin:c,duration:d,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(T){var N=T.t;if(C){var I=C.length/o.length,A=o.map(function(F,z){var V=Math.floor(z*I);if(C[V]){var W=C[V],j=Al(W.x,F.x),q=Al(W.y,F.y);return Zi(Zi({},F),{},{x:j(N),y:q(N)})}if(g){var Y=Al(y*2,F.x),Q=Al(b/2,F.y);return Zi(Zi({},F),{},{x:Y(N),y:Q(N)})}return Zi(Zi({},F),{},{x:F.x,y:F.y})});return a.renderCurveStatically(A,r,s)}var D=Al(0,k),P=D(N),R;if(l){var O="".concat(l).split(/[,\s]+/gim).map(function(F){return parseFloat(F)});R=a.getStrokeDasharray(P,k,O)}else R=a.generateSimpleStrokeDasharray(k,P);return a.renderCurveStatically(o,r,s,{strokeDasharray:R})})}},{key:"renderCurve",value:function(r,s){var a=this.props,i=a.points,o=a.isAnimationActive,l=this.state,u=l.prevPoints,c=l.totalLength;return o&&i&&i.length&&(!u&&c>0||!OT(u,i))?this.renderCurveWithAnimation(r,s):this.renderCurveStatically(i,r,s)}},{key:"render",value:function(){var r,s=this.props,a=s.hide,i=s.dot,o=s.points,l=s.className,u=s.xAxis,c=s.yAxis,d=s.top,h=s.left,m=s.width,g=s.height,y=s.isAnimationActive,b=s.id;if(a||!o||!o.length)return null;var w=this.state.isAnimationFinished,C=o.length===1,k=mt("recharts-line",l),T=u&&u.allowDataOverflow,N=c&&c.allowDataOverflow,I=T||N,A=xn(b)?this.id:b,D=(r=wn(i,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},P=D.r,R=P===void 0?3:P,O=D.strokeWidth,F=O===void 0?2:O,z=KXe(i)?i:{},V=z.clipDot,W=V===void 0?!0:V,j=R*2+F;return pe.createElement(ds,{className:k},T||N?pe.createElement("defs",null,pe.createElement("clipPath",{id:"clipPath-".concat(A)},pe.createElement("rect",{x:T?h:h-m/2,y:N?d:d-g/2,width:T?m:m*2,height:N?g:g*2})),!W&&pe.createElement("clipPath",{id:"clipPath-dots-".concat(A)},pe.createElement("rect",{x:h-j/2,y:d-j/2,width:m+j,height:g+j}))):null,!C&&this.renderCurve(I,A),this.renderErrorBar(I,A),(C||i)&&this.renderDots(I,W,A),(!y||w)&&Td.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:s.curPoints}:r.points!==s.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,s){for(var a=r.length%2!==0?[].concat(Kp(r),[0]):r,i=[],o=0;o<s;++o)i=[].concat(Kp(i),Kp(a));return i}},{key:"renderDotItem",value:function(r,s){var a;if(pe.isValidElement(r))a=pe.cloneElement(r,s);else if(on(r))a=r(s);else{var i=s.key,o=_9(s,$ct),l=mt("recharts-line-dot",typeof r!="boolean"?r.className:"");a=pe.createElement(LL,xb({key:i},o,{className:l}))}return a}}])}(L.PureComponent);$l(lh,"displayName","Line");$l(lh,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ry.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});$l(lh,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,s=t.xAxisTicks,a=t.yAxisTicks,i=t.dataKey,o=t.bandSize,l=t.displayedData,u=t.offset,c=e.layout,d=l.map(function(h,m){var g=po(h,i);return c==="horizontal"?{x:Kq({axis:n,ticks:s,bandSize:o,entry:h,index:m}),y:xn(g)?null:r.scale(g),value:g,payload:h}:{x:xn(g)?null:n.scale(g),y:Kq({axis:r,ticks:a,bandSize:o,entry:h,index:m}),value:g,payload:h}});return Zi({points:d,layout:c},u)});function sg(t){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sg(t)}function zct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vie(r.key),r)}}function Uct(t,e,n){return e&&Bct(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vct(t,e,n){return e=EC(e),Wct(t,Bie()?Reflect.construct(e,n||[],EC(t).constructor):e.apply(t,n))}function Wct(t,e){if(e&&(sg(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gct(t)}function Gct(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bie=function(){return!!t})()}function EC(t){return EC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},EC(t)}function Hct(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QP(t,e)}function QP(t,e){return QP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},QP(t,e)}function Uie(t,e,n){return e=Vie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vie(t){var e=qct(t,"string");return sg(e)=="symbol"?e:e+""}function qct(t,e){if(sg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function ZP(){return ZP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZP.apply(this,arguments)}function Kct(t){var e=t.xAxisId,n=UL(),r=VL(),s=$ie(e);return s==null?null:pe.createElement(Py,ZP({},s,{className:mt("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(i){return hc(i,!0)}}))}var vm=function(t){function e(){return zct(this,e),Vct(this,e,arguments)}return Hct(e,t),Uct(e,[{key:"render",value:function(){return pe.createElement(Kct,this.props)}}])}(pe.Component);Uie(vm,"displayName","XAxis");Uie(vm,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function ag(t){"@babel/helpers - typeof";return ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ag(t)}function Xct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Hie(r.key),r)}}function Qct(t,e,n){return e&&Yct(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Zct(t,e,n){return e=AC(e),Jct(t,Wie()?Reflect.construct(e,n||[],AC(t).constructor):e.apply(t,n))}function Jct(t,e){if(e&&(ag(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return edt(t)}function edt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wie=function(){return!!t})()}function AC(t){return AC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},AC(t)}function tdt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JP(t,e)}function JP(t,e){return JP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},JP(t,e)}function Gie(t,e,n){return e=Hie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hie(t){var e=ndt(t,"string");return ag(e)=="symbol"?e:e+""}function ndt(t,e){if(ag(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ag(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function eM(){return eM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eM.apply(this,arguments)}var rdt=function(e){var n=e.yAxisId,r=UL(),s=VL(),a=Iie(n);return a==null?null:pe.createElement(Py,eM({},a,{className:mt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(o){return hc(o,!0)}}))},wm=function(t){function e(){return Xct(this,e),Zct(this,e,arguments)}return tdt(e,t),Qct(e,[{key:"render",value:function(){return pe.createElement(rdt,this.props)}}])}(pe.Component);Gie(wm,"displayName","YAxis");Gie(wm,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function M9(t){return odt(t)||idt(t)||adt(t)||sdt()}function sdt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function adt(t,e){if(t){if(typeof t=="string")return tM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tM(t,e)}}function idt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function odt(t){if(Array.isArray(t))return tM(t)}function tM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var nM=function(e,n,r,s,a){var i=el(e,GL),o=el(e,FT),l=[].concat(M9(i),M9(o)),u=el(e,BT),c="".concat(s,"Id"),d=s[0],h=n;if(l.length&&(h=l.reduce(function(y,b){if(b.props[c]===r&&Cu(b.props,"extendDomain")&&ut(b.props[d])){var w=b.props[d];return[Math.min(y[0],w),Math.max(y[1],w)]}return y},h)),u.length){var m="".concat(d,"1"),g="".concat(d,"2");h=u.reduce(function(y,b){if(b.props[c]===r&&Cu(b.props,"extendDomain")&&ut(b.props[m])&&ut(b.props[g])){var w=b.props[m],C=b.props[g];return[Math.min(y[0],w,C),Math.max(y[1],w,C)]}return y},h)}return a&&a.length&&(h=a.reduce(function(y,b){return ut(b)?[Math.min(y[0],b),Math.max(y[1],b)]:y},h)),h},l3={exports:{}},j9;function ldt(){return j9||(j9=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function a(l,u,c,d,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var m=new s(c,d||l,h),g=n?n+u:u;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],m]:l._events[g].push(m):(l._events[g]=m,l._eventsCount++),l}function i(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],c,d;if(this._eventsCount===0)return u;for(d in c=this._events)e.call(c,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},o.prototype.listeners=function(u){var c=n?n+u:u,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,m=d.length,g=new Array(m);h<m;h++)g[h]=d[h].fn;return g},o.prototype.listenerCount=function(u){var c=n?n+u:u,d=this._events[c];return d?d.fn?1:d.length:0},o.prototype.emit=function(u,c,d,h,m,g){var y=n?n+u:u;if(!this._events[y])return!1;var b=this._events[y],w=arguments.length,C,k;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),w){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,c),!0;case 3:return b.fn.call(b.context,c,d),!0;case 4:return b.fn.call(b.context,c,d,h),!0;case 5:return b.fn.call(b.context,c,d,h,m),!0;case 6:return b.fn.call(b.context,c,d,h,m,g),!0}for(k=1,C=new Array(w-1);k<w;k++)C[k-1]=arguments[k];b.fn.apply(b.context,C)}else{var T=b.length,N;for(k=0;k<T;k++)switch(b[k].once&&this.removeListener(u,b[k].fn,void 0,!0),w){case 1:b[k].fn.call(b[k].context);break;case 2:b[k].fn.call(b[k].context,c);break;case 3:b[k].fn.call(b[k].context,c,d);break;case 4:b[k].fn.call(b[k].context,c,d,h);break;default:if(!C)for(N=1,C=new Array(w-1);N<w;N++)C[N-1]=arguments[N];b[k].fn.apply(b[k].context,C)}}return!0},o.prototype.on=function(u,c,d){return a(this,u,c,d,!1)},o.prototype.once=function(u,c,d){return a(this,u,c,d,!0)},o.prototype.removeListener=function(u,c,d,h){var m=n?n+u:u;if(!this._events[m])return this;if(!c)return i(this,m),this;var g=this._events[m];if(g.fn)g.fn===c&&(!h||g.once)&&(!d||g.context===d)&&i(this,m);else{for(var y=0,b=[],w=g.length;y<w;y++)(g[y].fn!==c||h&&!g[y].once||d&&g[y].context!==d)&&b.push(g[y]);b.length?this._events[m]=b.length===1?b[0]:b:i(this,m)}return this},o.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&i(this,c)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o}(l3)),l3.exports}var udt=ldt();const cdt=Un(udt);var u3=new cdt,c3="recharts.syncMouseEvents";function Ix(t){"@babel/helpers - typeof";return Ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ix(t)}function ddt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fdt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qie(r.key),r)}}function hdt(t,e,n){return e&&fdt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function d3(t,e,n){return e=qie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qie(t){var e=pdt(t,"string");return Ix(e)=="symbol"?e:e+""}function pdt(t,e){if(Ix(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ix(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var mdt=function(){function t(){ddt(this,t),d3(this,"activeIndex",0),d3(this,"coordinateList",[]),d3(this,"layout","horizontal")}return hdt(t,[{key:"setDetails",value:function(n){var r,s=n.coordinateList,a=s===void 0?null:s,i=n.container,o=i===void 0?null:i,l=n.layout,u=l===void 0?null:l,c=n.offset,d=c===void 0?null:c,h=n.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),a=s.x,i=s.y,o=s.height,l=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,c=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=a+l+u,h=i+this.offset.top+o/2+c;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])}();function gdt(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],s=t==null?void 0:t[1];if(r&&s&&ut(r)&&ut(s))return!0}return!1}function ydt(t,e,n,r){var s=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-s:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-s,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function Kie(t){var e=t.cx,n=t.cy,r=t.radius,s=t.startAngle,a=t.endAngle,i=pa(e,n,r,s),o=pa(e,n,r,a);return{points:[i,o],cx:e,cy:n,radius:r,startAngle:s,endAngle:a}}function bdt(t,e,n){var r,s,a,i;if(t==="horizontal")r=e.x,a=r,s=n.top,i=n.top+n.height;else if(t==="vertical")s=e.y,i=s,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,l=e.cy,u=e.innerRadius,c=e.outerRadius,d=e.angle,h=pa(o,l,u,d),m=pa(o,l,c,d);r=h.x,s=h.y,a=m.x,i=m.y}else return Kie(e);return[{x:r,y:s},{x:a,y:i}]}function Ex(t){"@babel/helpers - typeof";return Ex=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ex(t)}function L9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function hS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L9(Object(n),!0).forEach(function(r){xdt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xdt(t,e,n){return e=vdt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vdt(t){var e=wdt(t,"string");return Ex(e)=="symbol"?e:e+""}function wdt(t,e){if(Ex(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ex(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sdt(t){var e,n,r=t.element,s=t.tooltipEventType,a=t.isActive,i=t.activeCoordinate,o=t.activePayload,l=t.offset,u=t.activeTooltipIndex,c=t.tooltipAxisBandSize,d=t.layout,h=t.chartName,m=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!m||!a||!i||h!=="ScatterChart"&&s!=="axis")return null;var g,y=NP;if(h==="ScatterChart")g=i,y=xot;else if(h==="BarChart")g=ydt(d,i,l,c),y=jL;else if(d==="radial"){var b=Kie(i),w=b.cx,C=b.cy,k=b.radius,T=b.startAngle,N=b.endAngle;g={cx:w,cy:C,startAngle:T,endAngle:N,innerRadius:k,outerRadius:k},y=tie}else g={points:bdt(d,i,l)},y=NP;var I=hS(hS(hS(hS({stroke:"#ccc",pointerEvents:"none"},l),g),wn(m,!1)),{},{payload:o,payloadIndex:u,className:mt("recharts-tooltip-cursor",m.className)});return L.isValidElement(m)?L.cloneElement(m,I):L.createElement(y,I)}var Cdt=["item"],kdt=["children","className","width","height","style","compact","title","desc"];function ig(t){"@babel/helpers - typeof";return ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ig(t)}function um(){return um=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},um.apply(this,arguments)}function F9(t,e){return $dt(t)||Tdt(t,e)||Yie(t,e)||Ndt()}function Ndt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tdt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,s,a,i,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(c){u=!0,s=c}finally{try{if(!l&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw s}}return o}}function $dt(t){if(Array.isArray(t))return t}function z9(t,e){if(t==null)return{};var n=Idt(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Idt(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Edt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Adt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Qie(r.key),r)}}function Rdt(t,e,n){return e&&Adt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Odt(t,e,n){return e=RC(e),_dt(t,Xie()?Reflect.construct(e,n||[],RC(t).constructor):e.apply(t,n))}function _dt(t,e){if(e&&(ig(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ddt(t)}function Ddt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xie=function(){return!!t})()}function RC(t){return RC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},RC(t)}function Pdt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rM(t,e)}function rM(t,e){return rM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},rM(t,e)}function og(t){return Ldt(t)||jdt(t)||Yie(t)||Mdt()}function Mdt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yie(t,e){if(t){if(typeof t=="string")return sM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sM(t,e)}}function jdt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ldt(t){if(Array.isArray(t))return sM(t)}function sM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function B9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Me(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B9(Object(n),!0).forEach(function(r){Lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lt(t,e,n){return e=Qie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qie(t){var e=Fdt(t,"string");return ig(e)=="symbol"?e:e+""}function Fdt(t,e){if(ig(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ig(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zdt={xAxis:["bottom","top"],yAxis:["left","right"]},Bdt={width:"100%",height:"100%"},Zie={x:0,y:0};function pS(t){return t}var Udt=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},Vdt=function(e,n,r,s){var a=n.find(function(c){return c&&c.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:s.y};if(e==="vertical")return{x:s.x,y:a.coordinate};if(e==="centric"){var i=a.coordinate,o=s.radius;return Me(Me(Me({},s),pa(s.cx,s.cy,o,i)),{},{angle:i,radius:o})}var l=a.coordinate,u=s.angle;return Me(Me(Me({},s),pa(s.cx,s.cy,l,u)),{},{angle:u,radius:l})}return Zie},UT=function(e,n){var r=n.graphicalItems,s=n.dataStartIndex,a=n.dataEndIndex,i=(r??[]).reduce(function(o,l){var u=l.props.data;return u&&u.length?[].concat(og(o),og(u)):o},[]);return i.length>0?i:e&&e.length&&ut(s)&&ut(a)?e.slice(s,a+1):[]};function Jie(t){return t==="number"?[0,"auto"]:void 0}var aM=function(e,n,r,s){var a=e.graphicalItems,i=e.tooltipAxis,o=UT(n,e);return r<0||!a||!a.length||r>=o.length?null:a.reduce(function(l,u){var c,d=(c=u.props.data)!==null&&c!==void 0?c:n;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(i.dataKey&&!i.allowDuplicatedCategory){var m=d===void 0?o:d;h=D2(m,i.dataKey,s)}else h=d&&d[r]||o[r];return h?[].concat(og(l),[Zae(u,h)]):l},[])},U9=function(e,n,r,s){var a=s||{x:e.chartX,y:e.chartY},i=Udt(a,r),o=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,c=Xrt(i,o,u,l);if(c>=0&&u){var d=u[c]&&u[c].value,h=aM(e,n,c,d),m=Vdt(r,o,c,a);return{activeTooltipIndex:c,activeLabel:d,activePayload:h,activeCoordinate:m}}return null},Wdt=function(e,n){var r=n.axes,s=n.graphicalItems,a=n.axisType,i=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,d=e.children,h=e.stackOffset,m=Xae(c,a);return r.reduce(function(g,y){var b,w=y.type.defaultProps!==void 0?Me(Me({},y.type.defaultProps),y.props):y.props,C=w.type,k=w.dataKey,T=w.allowDataOverflow,N=w.allowDuplicatedCategory,I=w.scale,A=w.ticks,D=w.includeHidden,P=w[i];if(g[P])return g;var R=UT(e.data,{graphicalItems:s.filter(function(te){var ne,he=i in te.props?te.props[i]:(ne=te.type.defaultProps)===null||ne===void 0?void 0:ne[i];return he===P}),dataStartIndex:l,dataEndIndex:u}),O=R.length,F,z,V;gdt(w.domain,T,C)&&(F=vP(w.domain,null,T),m&&(C==="number"||I!=="auto")&&(V=yb(R,k,"category")));var W=Jie(C);if(!F||F.length===0){var j,q=(j=w.domain)!==null&&j!==void 0?j:W;if(k){if(F=yb(R,k,C),C==="category"&&m){var Y=FXe(F);N&&Y?(z=F,F=bC(0,O)):N||(F=Zq(q,F,y).reduce(function(te,ne){return te.indexOf(ne)>=0?te:[].concat(og(te),[ne])},[]))}else if(C==="category")N?F=F.filter(function(te){return te!==""&&!xn(te)}):F=Zq(q,F,y).reduce(function(te,ne){return te.indexOf(ne)>=0||ne===""||xn(ne)?te:[].concat(og(te),[ne])},[]);else if(C==="number"){var Q=est(R,s.filter(function(te){var ne,he,Se=i in te.props?te.props[i]:(ne=te.type.defaultProps)===null||ne===void 0?void 0:ne[i],Ie="hide"in te.props?te.props.hide:(he=te.type.defaultProps)===null||he===void 0?void 0:he.hide;return Se===P&&(D||!Ie)}),k,a,c);Q&&(F=Q)}m&&(C==="number"||I!=="auto")&&(V=yb(R,k,"category"))}else m?F=bC(0,O):o&&o[P]&&o[P].hasStack&&C==="number"?F=h==="expand"?[0,1]:Qae(o[P].stackGroups,l,u):F=Kae(R,s.filter(function(te){var ne=i in te.props?te.props[i]:te.type.defaultProps[i],he="hide"in te.props?te.props.hide:te.type.defaultProps.hide;return ne===P&&(D||!he)}),C,c,!0);if(C==="number")F=nM(d,F,P,a,A),q&&(F=vP(q,F,T));else if(C==="category"&&q){var H=q,ee=F.every(function(te){return H.indexOf(te)>=0});ee&&(F=H)}}return Me(Me({},g),{},Lt({},P,Me(Me({},w),{},{axisType:a,domain:F,categoricalDomain:V,duplicateDomain:z,originalDomain:(b=w.domain)!==null&&b!==void 0?b:W,isCategorical:m,layout:c})))},{})},Gdt=function(e,n){var r=n.graphicalItems,s=n.Axis,a=n.axisType,i=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,d=e.children,h=UT(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),m=h.length,g=Xae(c,a),y=-1;return r.reduce(function(b,w){var C=w.type.defaultProps!==void 0?Me(Me({},w.type.defaultProps),w.props):w.props,k=C[i],T=Jie("number");if(!b[k]){y++;var N;return g?N=bC(0,m):o&&o[k]&&o[k].hasStack?(N=Qae(o[k].stackGroups,l,u),N=nM(d,N,k,a)):(N=vP(T,Kae(h,r.filter(function(I){var A,D,P=i in I.props?I.props[i]:(A=I.type.defaultProps)===null||A===void 0?void 0:A[i],R="hide"in I.props?I.props.hide:(D=I.type.defaultProps)===null||D===void 0?void 0:D.hide;return P===k&&!R}),"number",c),s.defaultProps.allowDataOverflow),N=nM(d,N,k,a)),Me(Me({},b),{},Lt({},k,Me(Me({axisType:a},s.defaultProps),{},{hide:!0,orientation:Jo(zdt,"".concat(a,".").concat(y%2),null),domain:N,originalDomain:T,isCategorical:g,layout:c})))}return b},{})},Hdt=function(e,n){var r=n.axisType,s=r===void 0?"xAxis":r,a=n.AxisComp,i=n.graphicalItems,o=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.children,d="".concat(s,"Id"),h=el(c,a),m={};return h&&h.length?m=Wdt(e,{axes:h,graphicalItems:i,axisType:s,axisIdKey:d,stackGroups:o,dataStartIndex:l,dataEndIndex:u}):i&&i.length&&(m=Gdt(e,{Axis:a,graphicalItems:i,axisType:s,axisIdKey:d,stackGroups:o,dataStartIndex:l,dataEndIndex:u})),m},qdt=function(e){var n=gd(e),r=hc(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:lL(r,function(s){return s.coordinate}),tooltipAxis:n,tooltipAxisBandSize:oC(n,r)}},V9=function(e){var n=e.children,r=e.defaultShowTooltip,s=eo(n,Qm),a=0,i=0;return e.data&&e.data.length!==0&&(i=e.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(a=s.props.startIndex),s.props.endIndex>=0&&(i=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:i,activeTooltipIndex:-1,isTooltipActive:!!r}},Kdt=function(e){return!e||!e.length?!1:e.some(function(n){var r=wc(n&&n.type);return r&&r.indexOf("Bar")>=0})},W9=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Xdt=function(e,n){var r=e.props,s=e.graphicalItems,a=e.xAxisMap,i=a===void 0?{}:a,o=e.yAxisMap,l=o===void 0?{}:o,u=r.width,c=r.height,d=r.children,h=r.margin||{},m=eo(d,Qm),g=eo(d,Cc),y=Object.keys(l).reduce(function(N,I){var A=l[I],D=A.orientation;return!A.mirror&&!A.hide?Me(Me({},N),{},Lt({},D,N[D]+A.width)):N},{left:h.left||0,right:h.right||0}),b=Object.keys(i).reduce(function(N,I){var A=i[I],D=A.orientation;return!A.mirror&&!A.hide?Me(Me({},N),{},Lt({},D,Jo(N,"".concat(D))+A.height)):N},{top:h.top||0,bottom:h.bottom||0}),w=Me(Me({},b),y),C=w.bottom;m&&(w.bottom+=m.props.height||Qm.defaultProps.height),g&&n&&(w=Zrt(w,s,r,n));var k=u-w.left-w.right,T=c-w.top-w.bottom;return Me(Me({brushBottom:C},w),{},{width:Math.max(k,0),height:Math.max(T,0)})},Ydt=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},Qdt=function(e){var n=e.chartName,r=e.GraphicalChild,s=e.defaultTooltipEventType,a=s===void 0?"axis":s,i=e.validateTooltipEventTypes,o=i===void 0?["axis"]:i,l=e.axisComponents,u=e.legendContent,c=e.formatAxisMap,d=e.defaultProps,h=function(w,C){var k=C.graphicalItems,T=C.stackGroups,N=C.offset,I=C.updateId,A=C.dataStartIndex,D=C.dataEndIndex,P=w.barSize,R=w.layout,O=w.barGap,F=w.barCategoryGap,z=w.maxBarSize,V=W9(R),W=V.numericAxisName,j=V.cateAxisName,q=Kdt(k),Y=[];return k.forEach(function(Q,H){var ee=UT(w.data,{graphicalItems:[Q],dataStartIndex:A,dataEndIndex:D}),te=Q.type.defaultProps!==void 0?Me(Me({},Q.type.defaultProps),Q.props):Q.props,ne=te.dataKey,he=te.maxBarSize,Se=te["".concat(W,"Id")],Ie=te["".concat(j,"Id")],Qe={},Ve=l.reduce(function(Nt,Be){var Tt=C["".concat(Be.axisType,"Map")],Ot=te["".concat(Be.axisType,"Id")];Tt&&Tt[Ot]||Be.axisType==="zAxis"||Eh();var Wn=Tt[Ot];return Me(Me({},Nt),{},Lt(Lt({},Be.axisType,Wn),"".concat(Be.axisType,"Ticks"),hc(Wn)))},Qe),$e=Ve[j],We=Ve["".concat(j,"Ticks")],ze=T&&T[Se]&&T[Se].hasStack&&fst(Q,T[Se].stackGroups),ke=wc(Q.type).indexOf("Bar")>=0,et=oC($e,We),Je=[],Re=q&&Yrt({barSize:P,stackGroups:T,totalSize:Ydt(Ve,j)});if(ke){var Ke,xe,De=xn(he)?z:he,at=(Ke=(xe=oC($e,We,!0))!==null&&xe!==void 0?xe:De)!==null&&Ke!==void 0?Ke:0;Je=Qrt({barGap:O,barCategoryGap:F,bandSize:at!==et?at:et,sizeList:Re[Ie],maxBarSize:De}),at!==et&&(Je=Je.map(function(Nt){return Me(Me({},Nt),{},{position:Me(Me({},Nt.position),{},{offset:Nt.position.offset-at/2})})}))}var Xe=Q&&Q.type&&Q.type.getComposedData;Xe&&Y.push({props:Me(Me({},Xe(Me(Me({},Ve),{},{displayedData:ee,props:w,dataKey:ne,item:Q,bandSize:et,barPosition:Je,offset:N,stackedData:ze,layout:R,dataStartIndex:A,dataEndIndex:D}))),{},Lt(Lt(Lt({key:Q.key||"item-".concat(H)},W,Ve[W]),j,Ve[j]),"animationId",I)),childIndex:QXe(Q,w.children),item:Q})}),Y},m=function(w,C){var k=w.props,T=w.dataStartIndex,N=w.dataEndIndex,I=w.updateId;if(!fG({props:k}))return null;var A=k.children,D=k.layout,P=k.stackOffset,R=k.data,O=k.reverseStackOrder,F=W9(D),z=F.numericAxisName,V=F.cateAxisName,W=el(A,r),j=ust(R,W,"".concat(z,"Id"),"".concat(V,"Id"),P,O),q=l.reduce(function(te,ne){var he="".concat(ne.axisType,"Map");return Me(Me({},te),{},Lt({},he,Hdt(k,Me(Me({},ne),{},{graphicalItems:W,stackGroups:ne.axisType===z&&j,dataStartIndex:T,dataEndIndex:N}))))},{}),Y=Xdt(Me(Me({},q),{},{props:k,graphicalItems:W}),C==null?void 0:C.legendBBox);Object.keys(q).forEach(function(te){q[te]=c(k,q[te],Y,te.replace("Map",""),n)});var Q=q["".concat(V,"Map")],H=qdt(Q),ee=h(k,Me(Me({},q),{},{dataStartIndex:T,dataEndIndex:N,updateId:I,graphicalItems:W,stackGroups:j,offset:Y}));return Me(Me({formattedGraphicalItems:ee,graphicalItems:W,offset:Y,stackGroups:j},H),q)},g=function(b){function w(C){var k,T,N;return Edt(this,w),N=Odt(this,w,[C]),Lt(N,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Lt(N,"accessibilityManager",new mdt),Lt(N,"handleLegendBBoxUpdate",function(I){if(I){var A=N.state,D=A.dataStartIndex,P=A.dataEndIndex,R=A.updateId;N.setState(Me({legendBBox:I},m({props:N.props,dataStartIndex:D,dataEndIndex:P,updateId:R},Me(Me({},N.state),{},{legendBBox:I}))))}}),Lt(N,"handleReceiveSyncEvent",function(I,A,D){if(N.props.syncId===I){if(D===N.eventEmitterSymbol&&typeof N.props.syncMethod!="function")return;N.applySyncEvent(A)}}),Lt(N,"handleBrushChange",function(I){var A=I.startIndex,D=I.endIndex;if(A!==N.state.dataStartIndex||D!==N.state.dataEndIndex){var P=N.state.updateId;N.setState(function(){return Me({dataStartIndex:A,dataEndIndex:D},m({props:N.props,dataStartIndex:A,dataEndIndex:D,updateId:P},N.state))}),N.triggerSyncEvent({dataStartIndex:A,dataEndIndex:D})}}),Lt(N,"handleMouseEnter",function(I){var A=N.getMouseInfo(I);if(A){var D=Me(Me({},A),{},{isTooltipActive:!0});N.setState(D),N.triggerSyncEvent(D);var P=N.props.onMouseEnter;on(P)&&P(D,I)}}),Lt(N,"triggeredAfterMouseMove",function(I){var A=N.getMouseInfo(I),D=A?Me(Me({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};N.setState(D),N.triggerSyncEvent(D);var P=N.props.onMouseMove;on(P)&&P(D,I)}),Lt(N,"handleItemMouseEnter",function(I){N.setState(function(){return{isTooltipActive:!0,activeItem:I,activePayload:I.tooltipPayload,activeCoordinate:I.tooltipPosition||{x:I.cx,y:I.cy}}})}),Lt(N,"handleItemMouseLeave",function(){N.setState(function(){return{isTooltipActive:!1}})}),Lt(N,"handleMouseMove",function(I){I.persist(),N.throttleTriggeredAfterMouseMove(I)}),Lt(N,"handleMouseLeave",function(I){N.throttleTriggeredAfterMouseMove.cancel();var A={isTooltipActive:!1};N.setState(A),N.triggerSyncEvent(A);var D=N.props.onMouseLeave;on(D)&&D(A,I)}),Lt(N,"handleOuterEvent",function(I){var A=YXe(I),D=Jo(N.props,"".concat(A));if(A&&on(D)){var P,R;/.*touch.*/i.test(A)?R=N.getMouseInfo(I.changedTouches[0]):R=N.getMouseInfo(I),D((P=R)!==null&&P!==void 0?P:{},I)}}),Lt(N,"handleClick",function(I){var A=N.getMouseInfo(I);if(A){var D=Me(Me({},A),{},{isTooltipActive:!0});N.setState(D),N.triggerSyncEvent(D);var P=N.props.onClick;on(P)&&P(D,I)}}),Lt(N,"handleMouseDown",function(I){var A=N.props.onMouseDown;if(on(A)){var D=N.getMouseInfo(I);A(D,I)}}),Lt(N,"handleMouseUp",function(I){var A=N.props.onMouseUp;if(on(A)){var D=N.getMouseInfo(I);A(D,I)}}),Lt(N,"handleTouchMove",function(I){I.changedTouches!=null&&I.changedTouches.length>0&&N.throttleTriggeredAfterMouseMove(I.changedTouches[0])}),Lt(N,"handleTouchStart",function(I){I.changedTouches!=null&&I.changedTouches.length>0&&N.handleMouseDown(I.changedTouches[0])}),Lt(N,"handleTouchEnd",function(I){I.changedTouches!=null&&I.changedTouches.length>0&&N.handleMouseUp(I.changedTouches[0])}),Lt(N,"handleDoubleClick",function(I){var A=N.props.onDoubleClick;if(on(A)){var D=N.getMouseInfo(I);A(D,I)}}),Lt(N,"handleContextMenu",function(I){var A=N.props.onContextMenu;if(on(A)){var D=N.getMouseInfo(I);A(D,I)}}),Lt(N,"triggerSyncEvent",function(I){N.props.syncId!==void 0&&u3.emit(c3,N.props.syncId,I,N.eventEmitterSymbol)}),Lt(N,"applySyncEvent",function(I){var A=N.props,D=A.layout,P=A.syncMethod,R=N.state.updateId,O=I.dataStartIndex,F=I.dataEndIndex;if(I.dataStartIndex!==void 0||I.dataEndIndex!==void 0)N.setState(Me({dataStartIndex:O,dataEndIndex:F},m({props:N.props,dataStartIndex:O,dataEndIndex:F,updateId:R},N.state)));else if(I.activeTooltipIndex!==void 0){var z=I.chartX,V=I.chartY,W=I.activeTooltipIndex,j=N.state,q=j.offset,Y=j.tooltipTicks;if(!q)return;if(typeof P=="function")W=P(Y,I);else if(P==="value"){W=-1;for(var Q=0;Q<Y.length;Q++)if(Y[Q].value===I.activeLabel){W=Q;break}}var H=Me(Me({},q),{},{x:q.left,y:q.top}),ee=Math.min(z,H.x+H.width),te=Math.min(V,H.y+H.height),ne=Y[W]&&Y[W].value,he=aM(N.state,N.props.data,W),Se=Y[W]?{x:D==="horizontal"?Y[W].coordinate:ee,y:D==="horizontal"?te:Y[W].coordinate}:Zie;N.setState(Me(Me({},I),{},{activeLabel:ne,activeCoordinate:Se,activePayload:he,activeTooltipIndex:W}))}else N.setState(I)}),Lt(N,"renderCursor",function(I){var A,D=N.state,P=D.isTooltipActive,R=D.activeCoordinate,O=D.activePayload,F=D.offset,z=D.activeTooltipIndex,V=D.tooltipAxisBandSize,W=N.getTooltipEventType(),j=(A=I.props.active)!==null&&A!==void 0?A:P,q=N.props.layout,Y=I.key||"_recharts-cursor";return pe.createElement(Sdt,{key:Y,activeCoordinate:R,activePayload:O,activeTooltipIndex:z,chartName:n,element:I,isActive:j,layout:q,offset:F,tooltipAxisBandSize:V,tooltipEventType:W})}),Lt(N,"renderPolarAxis",function(I,A,D){var P=Jo(I,"type.axisType"),R=Jo(N.state,"".concat(P,"Map")),O=I.type.defaultProps,F=O!==void 0?Me(Me({},O),I.props):I.props,z=R&&R[F["".concat(P,"Id")]];return L.cloneElement(I,Me(Me({},z),{},{className:mt(P,z.className),key:I.key||"".concat(A,"-").concat(D),ticks:hc(z,!0)}))}),Lt(N,"renderPolarGrid",function(I){var A=I.props,D=A.radialLines,P=A.polarAngles,R=A.polarRadius,O=N.state,F=O.radiusAxisMap,z=O.angleAxisMap,V=gd(F),W=gd(z),j=W.cx,q=W.cy,Y=W.innerRadius,Q=W.outerRadius;return L.cloneElement(I,{polarAngles:Array.isArray(P)?P:hc(W,!0).map(function(H){return H.coordinate}),polarRadius:Array.isArray(R)?R:hc(V,!0).map(function(H){return H.coordinate}),cx:j,cy:q,innerRadius:Y,outerRadius:Q,key:I.key||"polar-grid",radialLines:D})}),Lt(N,"renderLegend",function(){var I=N.state.formattedGraphicalItems,A=N.props,D=A.children,P=A.width,R=A.height,O=N.props.margin||{},F=P-(O.left||0)-(O.right||0),z=Hae({children:D,formattedGraphicalItems:I,legendWidth:F,legendContent:u});if(!z)return null;var V=z.item,W=z9(z,Cdt);return L.cloneElement(V,Me(Me({},W),{},{chartWidth:P,chartHeight:R,margin:O,onBBoxUpdate:N.handleLegendBBoxUpdate}))}),Lt(N,"renderTooltip",function(){var I,A=N.props,D=A.children,P=A.accessibilityLayer,R=eo(D,zo);if(!R)return null;var O=N.state,F=O.isTooltipActive,z=O.activeCoordinate,V=O.activePayload,W=O.activeLabel,j=O.offset,q=(I=R.props.active)!==null&&I!==void 0?I:F;return L.cloneElement(R,{viewBox:Me(Me({},j),{},{x:j.left,y:j.top}),active:q,label:W,payload:q?V:[],coordinate:z,accessibilityLayer:P})}),Lt(N,"renderBrush",function(I){var A=N.props,D=A.margin,P=A.data,R=N.state,O=R.offset,F=R.dataStartIndex,z=R.dataEndIndex,V=R.updateId;return L.cloneElement(I,{key:I.key||"_recharts-brush",onChange:uS(N.handleBrushChange,I.props.onChange),data:P,x:ut(I.props.x)?I.props.x:O.left,y:ut(I.props.y)?I.props.y:O.top+O.height+O.brushBottom-(D.bottom||0),width:ut(I.props.width)?I.props.width:O.width,startIndex:F,endIndex:z,updateId:"brush-".concat(V)})}),Lt(N,"renderReferenceElement",function(I,A,D){if(!I)return null;var P=N,R=P.clipPathId,O=N.state,F=O.xAxisMap,z=O.yAxisMap,V=O.offset,W=I.type.defaultProps||{},j=I.props,q=j.xAxisId,Y=q===void 0?W.xAxisId:q,Q=j.yAxisId,H=Q===void 0?W.yAxisId:Q;return L.cloneElement(I,{key:I.key||"".concat(A,"-").concat(D),xAxis:F[Y],yAxis:z[H],viewBox:{x:V.left,y:V.top,width:V.width,height:V.height},clipPathId:R})}),Lt(N,"renderActivePoints",function(I){var A=I.item,D=I.activePoint,P=I.basePoint,R=I.childIndex,O=I.isRange,F=[],z=A.props.key,V=A.item.type.defaultProps!==void 0?Me(Me({},A.item.type.defaultProps),A.item.props):A.item.props,W=V.activeDot,j=V.dataKey,q=Me(Me({index:R,dataKey:j,cx:D.x,cy:D.y,r:4,fill:DL(A.item),strokeWidth:2,stroke:"#fff",payload:D.payload,value:D.value},wn(W,!1)),P2(W));return F.push(w.renderActiveDot(W,q,"".concat(z,"-activePoint-").concat(R))),P?F.push(w.renderActiveDot(W,Me(Me({},q),{},{cx:P.x,cy:P.y}),"".concat(z,"-basePoint-").concat(R))):O&&F.push(null),F}),Lt(N,"renderGraphicChild",function(I,A,D){var P=N.filterFormatItem(I,A,D);if(!P)return null;var R=N.getTooltipEventType(),O=N.state,F=O.isTooltipActive,z=O.tooltipAxis,V=O.activeTooltipIndex,W=O.activeLabel,j=N.props.children,q=eo(j,zo),Y=P.props,Q=Y.points,H=Y.isRange,ee=Y.baseLine,te=P.item.type.defaultProps!==void 0?Me(Me({},P.item.type.defaultProps),P.item.props):P.item.props,ne=te.activeDot,he=te.hide,Se=te.activeBar,Ie=te.activeShape,Qe=!!(!he&&F&&q&&(ne||Se||Ie)),Ve={};R!=="axis"&&q&&q.props.trigger==="click"?Ve={onClick:uS(N.handleItemMouseEnter,I.props.onClick)}:R!=="axis"&&(Ve={onMouseLeave:uS(N.handleItemMouseLeave,I.props.onMouseLeave),onMouseEnter:uS(N.handleItemMouseEnter,I.props.onMouseEnter)});var $e=L.cloneElement(I,Me(Me({},P.props),Ve));function We(Be){return typeof z.dataKey=="function"?z.dataKey(Be.payload):null}if(Qe)if(V>=0){var ze,ke;if(z.dataKey&&!z.allowDuplicatedCategory){var et=typeof z.dataKey=="function"?We:"payload.".concat(z.dataKey.toString());ze=D2(Q,et,W),ke=H&&ee&&D2(ee,et,W)}else ze=Q==null?void 0:Q[V],ke=H&&ee&&ee[V];if(Ie||Se){var Je=I.props.activeIndex!==void 0?I.props.activeIndex:V;return[L.cloneElement(I,Me(Me(Me({},P.props),Ve),{},{activeIndex:Je})),null,null]}if(!xn(ze))return[$e].concat(og(N.renderActivePoints({item:P,activePoint:ze,basePoint:ke,childIndex:V,isRange:H})))}else{var Re,Ke=(Re=N.getItemByXY(N.state.activeCoordinate))!==null&&Re!==void 0?Re:{graphicalItem:$e},xe=Ke.graphicalItem,De=xe.item,at=De===void 0?I:De,Xe=xe.childIndex,Nt=Me(Me(Me({},P.props),Ve),{},{activeIndex:Xe});return[L.cloneElement(at,Nt),null,null]}return H?[$e,null,null]:[$e,null]}),Lt(N,"renderCustomized",function(I,A,D){return L.cloneElement(I,Me(Me({key:"recharts-customized-".concat(D)},N.props),N.state))}),Lt(N,"renderMap",{CartesianGrid:{handler:pS,once:!0},ReferenceArea:{handler:N.renderReferenceElement},ReferenceLine:{handler:pS},ReferenceDot:{handler:N.renderReferenceElement},XAxis:{handler:pS},YAxis:{handler:pS},Brush:{handler:N.renderBrush,once:!0},Bar:{handler:N.renderGraphicChild},Line:{handler:N.renderGraphicChild},Area:{handler:N.renderGraphicChild},Radar:{handler:N.renderGraphicChild},RadialBar:{handler:N.renderGraphicChild},Scatter:{handler:N.renderGraphicChild},Pie:{handler:N.renderGraphicChild},Funnel:{handler:N.renderGraphicChild},Tooltip:{handler:N.renderCursor,once:!0},PolarGrid:{handler:N.renderPolarGrid,once:!0},PolarAngleAxis:{handler:N.renderPolarAxis},PolarRadiusAxis:{handler:N.renderPolarAxis},Customized:{handler:N.renderCustomized}}),N.clipPathId="".concat((k=C.id)!==null&&k!==void 0?k:m1("recharts"),"-clip"),N.throttleTriggeredAfterMouseMove=Gse(N.triggeredAfterMouseMove,(T=C.throttleDelay)!==null&&T!==void 0?T:1e3/60),N.state={},N}return Pdt(w,b),Rdt(w,[{key:"componentDidMount",value:function(){var k,T;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var k=this.props,T=k.children,N=k.data,I=k.height,A=k.layout,D=eo(T,zo);if(D){var P=D.props.defaultIndex;if(!(typeof P!="number"||P<0||P>this.state.tooltipTicks.length-1)){var R=this.state.tooltipTicks[P]&&this.state.tooltipTicks[P].value,O=aM(this.state,N,P,R),F=this.state.tooltipTicks[P].coordinate,z=(this.state.offset.top+I)/2,V=A==="horizontal",W=V?{x:F,y:z}:{y:F,x:z},j=this.state.formattedGraphicalItems.find(function(Y){var Q=Y.item;return Q.type.name==="Scatter"});j&&(W=Me(Me({},W),j.props.points[P].tooltipPosition),O=j.props.points[P].tooltipPayload);var q={activeTooltipIndex:P,isTooltipActive:!0,activeLabel:R,activePayload:O,activeCoordinate:W};this.setState(q),this.renderCursor(D),this.accessibilityManager.setIndex(P)}}}},{key:"getSnapshotBeforeUpdate",value:function(k,T){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==T.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==k.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==k.margin){var N,I;this.accessibilityManager.setDetails({offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(I=this.props.margin.top)!==null&&I!==void 0?I:0}})}return null}},{key:"componentDidUpdate",value:function(k){UD([eo(k.children,zo)],[eo(this.props.children,zo)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var k=eo(this.props.children,zo);if(k&&typeof k.props.shared=="boolean"){var T=k.props.shared?"axis":"item";return o.indexOf(T)>=0?T:a}return a}},{key:"getMouseInfo",value:function(k){if(!this.container)return null;var T=this.container,N=T.getBoundingClientRect(),I=jJe(N),A={chartX:Math.round(k.pageX-I.left),chartY:Math.round(k.pageY-I.top)},D=N.width/T.offsetWidth||1,P=this.inRange(A.chartX,A.chartY,D);if(!P)return null;var R=this.state,O=R.xAxisMap,F=R.yAxisMap,z=this.getTooltipEventType(),V=U9(this.state,this.props.data,this.props.layout,P);if(z!=="axis"&&O&&F){var W=gd(O).scale,j=gd(F).scale,q=W&&W.invert?W.invert(A.chartX):null,Y=j&&j.invert?j.invert(A.chartY):null;return Me(Me({},A),{},{xValue:q,yValue:Y},V)}return V?Me(Me({},A),V):null}},{key:"inRange",value:function(k,T){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,I=this.props.layout,A=k/N,D=T/N;if(I==="horizontal"||I==="vertical"){var P=this.state.offset,R=A>=P.left&&A<=P.left+P.width&&D>=P.top&&D<=P.top+P.height;return R?{x:A,y:D}:null}var O=this.state,F=O.angleAxisMap,z=O.radiusAxisMap;if(F&&z){var V=gd(F);return t7({x:A,y:D},V)}return null}},{key:"parseEventsOfWrapper",value:function(){var k=this.props.children,T=this.getTooltipEventType(),N=eo(k,zo),I={};N&&T==="axis"&&(N.props.trigger==="click"?I={onClick:this.handleClick}:I={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var A=P2(this.props,this.handleOuterEvent);return Me(Me({},A),I)}},{key:"addListener",value:function(){u3.on(c3,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){u3.removeListener(c3,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(k,T,N){for(var I=this.state.formattedGraphicalItems,A=0,D=I.length;A<D;A++){var P=I[A];if(P.item===k||P.props.key===k.key||T===wc(P.item.type)&&N===P.childIndex)return P}return null}},{key:"renderClipPath",value:function(){var k=this.clipPathId,T=this.state.offset,N=T.left,I=T.top,A=T.height,D=T.width;return pe.createElement("defs",null,pe.createElement("clipPath",{id:k},pe.createElement("rect",{x:N,y:I,height:A,width:D})))}},{key:"getXScales",value:function(){var k=this.state.xAxisMap;return k?Object.entries(k).reduce(function(T,N){var I=F9(N,2),A=I[0],D=I[1];return Me(Me({},T),{},Lt({},A,D.scale))},{}):null}},{key:"getYScales",value:function(){var k=this.state.yAxisMap;return k?Object.entries(k).reduce(function(T,N){var I=F9(N,2),A=I[0],D=I[1];return Me(Me({},T),{},Lt({},A,D.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(k){var T;return(T=this.state.xAxisMap)===null||T===void 0||(T=T[k])===null||T===void 0?void 0:T.scale}},{key:"getYScaleByAxisId",value:function(k){var T;return(T=this.state.yAxisMap)===null||T===void 0||(T=T[k])===null||T===void 0?void 0:T.scale}},{key:"getItemByXY",value:function(k){var T=this.state,N=T.formattedGraphicalItems,I=T.activeItem;if(N&&N.length)for(var A=0,D=N.length;A<D;A++){var P=N[A],R=P.props,O=P.item,F=O.type.defaultProps!==void 0?Me(Me({},O.type.defaultProps),O.props):O.props,z=wc(O.type);if(z==="Bar"){var V=(R.data||[]).find(function(Y){return uot(k,Y)});if(V)return{graphicalItem:P,payload:V}}else if(z==="RadialBar"){var W=(R.data||[]).find(function(Y){return t7(k,Y)});if(W)return{graphicalItem:P,payload:W}}else if(PT(P,I)||MT(P,I)||Cx(P,I)){var j=Jot({graphicalItem:P,activeTooltipItem:I,itemData:F.data}),q=F.activeIndex===void 0?j:F.activeIndex;return{graphicalItem:Me(Me({},P),{},{childIndex:q}),payload:Cx(P,I)?F.data[j]:P.props.data[j]}}}return null}},{key:"render",value:function(){var k=this;if(!fG(this))return null;var T=this.props,N=T.children,I=T.className,A=T.width,D=T.height,P=T.style,R=T.compact,O=T.title,F=T.desc,z=z9(T,kdt),V=wn(z,!1);if(R)return pe.createElement(v9,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},pe.createElement(WD,um({},V,{width:A,height:D,title:O,desc:F}),this.renderClipPath(),pG(N,this.renderMap)));if(this.props.accessibilityLayer){var W,j;V.tabIndex=(W=this.props.tabIndex)!==null&&W!==void 0?W:0,V.role=(j=this.props.role)!==null&&j!==void 0?j:"application",V.onKeyDown=function(Y){k.accessibilityManager.keyboardEvent(Y)},V.onFocus=function(){k.accessibilityManager.focus()}}var q=this.parseEventsOfWrapper();return pe.createElement(v9,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},pe.createElement("div",um({className:mt("recharts-wrapper",I),style:Me({position:"relative",cursor:"default",width:A,height:D},P)},q,{ref:function(Q){k.container=Q}}),pe.createElement(WD,um({},V,{width:A,height:D,title:O,desc:F,style:Bdt}),this.renderClipPath(),pG(N,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(L.Component);Lt(g,"displayName",n),Lt(g,"defaultProps",Me({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),Lt(g,"getDerivedStateFromProps",function(b,w){var C=b.dataKey,k=b.data,T=b.children,N=b.width,I=b.height,A=b.layout,D=b.stackOffset,P=b.margin,R=w.dataStartIndex,O=w.dataEndIndex;if(w.updateId===void 0){var F=V9(b);return Me(Me(Me({},F),{},{updateId:0},m(Me(Me({props:b},F),{},{updateId:0}),w)),{},{prevDataKey:C,prevData:k,prevWidth:N,prevHeight:I,prevLayout:A,prevStackOffset:D,prevMargin:P,prevChildren:T})}if(C!==w.prevDataKey||k!==w.prevData||N!==w.prevWidth||I!==w.prevHeight||A!==w.prevLayout||D!==w.prevStackOffset||!ym(P,w.prevMargin)){var z=V9(b),V={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},W=Me(Me({},U9(w,k,A)),{},{updateId:w.updateId+1}),j=Me(Me(Me({},z),V),W);return Me(Me(Me({},j),m(Me({props:b},j),w)),{},{prevDataKey:C,prevData:k,prevWidth:N,prevHeight:I,prevLayout:A,prevStackOffset:D,prevMargin:P,prevChildren:T})}if(!UD(T,w.prevChildren)){var q,Y,Q,H,ee=eo(T,Qm),te=ee&&(q=(Y=ee.props)===null||Y===void 0?void 0:Y.startIndex)!==null&&q!==void 0?q:R,ne=ee&&(Q=(H=ee.props)===null||H===void 0?void 0:H.endIndex)!==null&&Q!==void 0?Q:O,he=te!==R||ne!==O,Se=!xn(k),Ie=Se&&!he?w.updateId:w.updateId+1;return Me(Me({updateId:Ie},m(Me(Me({props:b},w),{},{updateId:Ie,dataStartIndex:te,dataEndIndex:ne}),w)),{},{prevChildren:T,dataStartIndex:te,dataEndIndex:ne})}return null}),Lt(g,"renderActiveDot",function(b,w,C){var k;return L.isValidElement(b)?k=L.cloneElement(b,w):on(b)?k=b(w):k=pe.createElement(LL,w),pe.createElement(ds,{className:"recharts-active-dot",key:C},k)});var y=L.forwardRef(function(w,C){return pe.createElement(g,um({},w,{ref:C}))});return y.displayName=g.displayName,y},f3=Qdt({chartName:"LineChart",GraphicalChild:lh,axisComponents:[{axisType:"xAxis",AxisComp:vm},{axisType:"yAxis",AxisComp:wm}],formatAxisMap:Xlt});const Ax={black:"#000",white:"#fff"},Xp={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Yp={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Qp={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Zp={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Jp={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},Q0={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Zdt={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Rh(t,...e){const n=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${t}; visit ${n} for the full message.`}const KL="$$material";function Jdt(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function eft(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var tft=function(){function t(n){var r=this;this._insertTag=function(s){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,a),r.tags.push(s)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(eft(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var a=Jdt(s);try{a.insertRule(r,a.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Ia="-ms-",OC="-moz-",_n="-webkit-",eoe="comm",XL="rule",YL="decl",nft="@import",toe="@keyframes",rft="@layer",sft=Math.abs,VT=String.fromCharCode,aft=Object.assign;function ift(t,e){return ha(t,0)^45?(((e<<2^ha(t,0))<<2^ha(t,1))<<2^ha(t,2))<<2^ha(t,3):0}function noe(t){return t.trim()}function oft(t,e){return(t=e.exec(t))?t[0]:t}function Dn(t,e,n){return t.replace(e,n)}function iM(t,e){return t.indexOf(e)}function ha(t,e){return t.charCodeAt(e)|0}function Rx(t,e,n){return t.slice(e,n)}function du(t){return t.length}function QL(t){return t.length}function mS(t,e){return e.push(t),t}function lft(t,e){return t.map(e).join("")}var WT=1,lg=1,roe=0,Di=0,vs=0,My="";function GT(t,e,n,r,s,a,i){return{value:t,root:e,parent:n,type:r,props:s,children:a,line:WT,column:lg,length:i,return:""}}function Z0(t,e){return aft(GT("",null,null,"",null,null,0),t,{length:-t.length},e)}function uft(){return vs}function cft(){return vs=Di>0?ha(My,--Di):0,lg--,vs===10&&(lg=1,WT--),vs}function oo(){return vs=Di<roe?ha(My,Di++):0,lg++,vs===10&&(lg=1,WT++),vs}function ku(){return ha(My,Di)}function BS(){return Di}function C1(t,e){return Rx(My,t,e)}function Ox(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function soe(t){return WT=lg=1,roe=du(My=t),Di=0,[]}function aoe(t){return My="",t}function US(t){return noe(C1(Di-1,oM(t===91?t+2:t===40?t+1:t)))}function dft(t){for(;(vs=ku())&&vs<33;)oo();return Ox(t)>2||Ox(vs)>3?"":" "}function fft(t,e){for(;--e&&oo()&&!(vs<48||vs>102||vs>57&&vs<65||vs>70&&vs<97););return C1(t,BS()+(e<6&&ku()==32&&oo()==32))}function oM(t){for(;oo();)switch(vs){case t:return Di;case 34:case 39:t!==34&&t!==39&&oM(vs);break;case 40:t===41&&oM(t);break;case 92:oo();break}return Di}function hft(t,e){for(;oo()&&t+vs!==57;)if(t+vs===84&&ku()===47)break;return"/*"+C1(e,Di-1)+"*"+VT(t===47?t:oo())}function pft(t){for(;!Ox(ku());)oo();return C1(t,Di)}function mft(t){return aoe(VS("",null,null,null,[""],t=soe(t),0,[0],t))}function VS(t,e,n,r,s,a,i,o,l){for(var u=0,c=0,d=i,h=0,m=0,g=0,y=1,b=1,w=1,C=0,k="",T=s,N=a,I=r,A=k;b;)switch(g=C,C=oo()){case 40:if(g!=108&&ha(A,d-1)==58){iM(A+=Dn(US(C),"&","&\f"),"&\f")!=-1&&(w=-1);break}case 34:case 39:case 91:A+=US(C);break;case 9:case 10:case 13:case 32:A+=dft(g);break;case 92:A+=fft(BS()-1,7);continue;case 47:switch(ku()){case 42:case 47:mS(gft(hft(oo(),BS()),e,n),l);break;default:A+="/"}break;case 123*y:o[u++]=du(A)*w;case 125*y:case 59:case 0:switch(C){case 0:case 125:b=0;case 59+c:w==-1&&(A=Dn(A,/\f/g,"")),m>0&&du(A)-d&&mS(m>32?H9(A+";",r,n,d-1):H9(Dn(A," ","")+";",r,n,d-2),l);break;case 59:A+=";";default:if(mS(I=G9(A,e,n,u,c,s,o,k,T=[],N=[],d),a),C===123)if(c===0)VS(A,e,I,I,T,a,d,o,N);else switch(h===99&&ha(A,3)===110?100:h){case 100:case 108:case 109:case 115:VS(t,I,I,r&&mS(G9(t,I,I,0,0,s,o,k,s,T=[],d),N),s,N,d,o,r?T:N);break;default:VS(A,I,I,I,[""],N,0,o,N)}}u=c=m=0,y=w=1,k=A="",d=i;break;case 58:d=1+du(A),m=g;default:if(y<1){if(C==123)--y;else if(C==125&&y++==0&&cft()==125)continue}switch(A+=VT(C),C*y){case 38:w=c>0?1:(A+="\f",-1);break;case 44:o[u++]=(du(A)-1)*w,w=1;break;case 64:ku()===45&&(A+=US(oo())),h=ku(),c=d=du(k=A+=pft(BS())),C++;break;case 45:g===45&&du(A)==2&&(y=0)}}return a}function G9(t,e,n,r,s,a,i,o,l,u,c){for(var d=s-1,h=s===0?a:[""],m=QL(h),g=0,y=0,b=0;g<r;++g)for(var w=0,C=Rx(t,d+1,d=sft(y=i[g])),k=t;w<m;++w)(k=noe(y>0?h[w]+" "+C:Dn(C,/&\f/g,h[w])))&&(l[b++]=k);return GT(t,e,n,s===0?XL:o,l,u,c)}function gft(t,e,n){return GT(t,e,n,eoe,VT(uft()),Rx(t,2,-2),0)}function H9(t,e,n,r){return GT(t,e,n,YL,Rx(t,0,r),Rx(t,r+1,-1),r)}function Sm(t,e){for(var n="",r=QL(t),s=0;s<r;s++)n+=e(t[s],s,t,e)||"";return n}function yft(t,e,n,r){switch(t.type){case rft:if(t.children.length)break;case nft:case YL:return t.return=t.return||t.value;case eoe:return"";case toe:return t.return=t.value+"{"+Sm(t.children,r)+"}";case XL:t.value=t.props.join(",")}return du(n=Sm(t.children,r))?t.return=t.value+"{"+n+"}":""}function bft(t){var e=QL(t);return function(n,r,s,a){for(var i="",o=0;o<e;o++)i+=t[o](n,r,s,a)||"";return i}}function xft(t){return function(e){e.root||(e=e.return)&&t(e)}}function ioe(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var vft=function(e,n,r){for(var s=0,a=0;s=a,a=ku(),s===38&&a===12&&(n[r]=1),!Ox(a);)oo();return C1(e,Di)},wft=function(e,n){var r=-1,s=44;do switch(Ox(s)){case 0:s===38&&ku()===12&&(n[r]=1),e[r]+=vft(Di-1,n,r);break;case 2:e[r]+=US(s);break;case 4:if(s===44){e[++r]=ku()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=VT(s)}while(s=oo());return e},Sft=function(e,n){return aoe(wft(soe(e),n))},q9=new WeakMap,Cft=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,s=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!q9.get(r))&&!s){q9.set(e,!0);for(var a=[],i=Sft(n,a),o=r.props,l=0,u=0;l<i.length;l++)for(var c=0;c<o.length;c++,u++)e.props[u]=a[l]?i[l].replace(/&\f/g,o[c]):o[c]+" "+i[l]}}},kft=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function ooe(t,e){switch(ift(t,e)){case 5103:return _n+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return _n+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return _n+t+OC+t+Ia+t+t;case 6828:case 4268:return _n+t+Ia+t+t;case 6165:return _n+t+Ia+"flex-"+t+t;case 5187:return _n+t+Dn(t,/(\w+).+(:[^]+)/,_n+"box-$1$2"+Ia+"flex-$1$2")+t;case 5443:return _n+t+Ia+"flex-item-"+Dn(t,/flex-|-self/,"")+t;case 4675:return _n+t+Ia+"flex-line-pack"+Dn(t,/align-content|flex-|-self/,"")+t;case 5548:return _n+t+Ia+Dn(t,"shrink","negative")+t;case 5292:return _n+t+Ia+Dn(t,"basis","preferred-size")+t;case 6060:return _n+"box-"+Dn(t,"-grow","")+_n+t+Ia+Dn(t,"grow","positive")+t;case 4554:return _n+Dn(t,/([^-])(transform)/g,"$1"+_n+"$2")+t;case 6187:return Dn(Dn(Dn(t,/(zoom-|grab)/,_n+"$1"),/(image-set)/,_n+"$1"),t,"")+t;case 5495:case 3959:return Dn(t,/(image-set\([^]*)/,_n+"$1$`$1");case 4968:return Dn(Dn(t,/(.+:)(flex-)?(.*)/,_n+"box-pack:$3"+Ia+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+_n+t+t;case 4095:case 3583:case 4068:case 2532:return Dn(t,/(.+)-inline(.+)/,_n+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(du(t)-1-e>6)switch(ha(t,e+1)){case 109:if(ha(t,e+4)!==45)break;case 102:return Dn(t,/(.+:)(.+)-([^]+)/,"$1"+_n+"$2-$3$1"+OC+(ha(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~iM(t,"stretch")?ooe(Dn(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(ha(t,e+1)!==115)break;case 6444:switch(ha(t,du(t)-3-(~iM(t,"!important")&&10))){case 107:return Dn(t,":",":"+_n)+t;case 101:return Dn(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+_n+(ha(t,14)===45?"inline-":"")+"box$3$1"+_n+"$2$3$1"+Ia+"$2box$3")+t}break;case 5936:switch(ha(t,e+11)){case 114:return _n+t+Ia+Dn(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return _n+t+Ia+Dn(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return _n+t+Ia+Dn(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return _n+t+Ia+t+t}return t}var Nft=function(e,n,r,s){if(e.length>-1&&!e.return)switch(e.type){case YL:e.return=ooe(e.value,e.length);break;case toe:return Sm([Z0(e,{value:Dn(e.value,"@","@"+_n)})],s);case XL:if(e.length)return lft(e.props,function(a){switch(oft(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Sm([Z0(e,{props:[Dn(a,/:(read-\w+)/,":"+OC+"$1")]})],s);case"::placeholder":return Sm([Z0(e,{props:[Dn(a,/:(plac\w+)/,":"+_n+"input-$1")]}),Z0(e,{props:[Dn(a,/:(plac\w+)/,":"+OC+"$1")]}),Z0(e,{props:[Dn(a,/:(plac\w+)/,Ia+"input-$1")]})],s)}return""})}},Tft=[Nft],$ft=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){var b=y.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var s=e.stylisPlugins||Tft,a={},i,o=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(y){for(var b=y.getAttribute("data-emotion").split(" "),w=1;w<b.length;w++)a[b[w]]=!0;o.push(y)});var l,u=[Cft,kft];{var c,d=[yft,xft(function(y){c.insert(y)})],h=bft(u.concat(s,d)),m=function(b){return Sm(mft(b),h)};l=function(b,w,C,k){c=C,m(b?b+"{"+w.styles+"}":w.styles),k&&(g.inserted[w.name]=!0)}}var g={key:n,sheet:new tft({key:n,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:l};return g.sheet.hydrate(o),g},h3={exports:{}},zn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K9;function Ift(){if(K9)return zn;K9=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,s=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,i=t?Symbol.for("react.provider"):60109,o=t?Symbol.for("react.context"):60110,l=t?Symbol.for("react.async_mode"):60111,u=t?Symbol.for("react.concurrent_mode"):60111,c=t?Symbol.for("react.forward_ref"):60112,d=t?Symbol.for("react.suspense"):60113,h=t?Symbol.for("react.suspense_list"):60120,m=t?Symbol.for("react.memo"):60115,g=t?Symbol.for("react.lazy"):60116,y=t?Symbol.for("react.block"):60121,b=t?Symbol.for("react.fundamental"):60117,w=t?Symbol.for("react.responder"):60118,C=t?Symbol.for("react.scope"):60119;function k(N){if(typeof N=="object"&&N!==null){var I=N.$$typeof;switch(I){case e:switch(N=N.type,N){case l:case u:case r:case a:case s:case d:return N;default:switch(N=N&&N.$$typeof,N){case o:case c:case g:case m:case i:return N;default:return I}}case n:return I}}}function T(N){return k(N)===u}return zn.AsyncMode=l,zn.ConcurrentMode=u,zn.ContextConsumer=o,zn.ContextProvider=i,zn.Element=e,zn.ForwardRef=c,zn.Fragment=r,zn.Lazy=g,zn.Memo=m,zn.Portal=n,zn.Profiler=a,zn.StrictMode=s,zn.Suspense=d,zn.isAsyncMode=function(N){return T(N)||k(N)===l},zn.isConcurrentMode=T,zn.isContextConsumer=function(N){return k(N)===o},zn.isContextProvider=function(N){return k(N)===i},zn.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===e},zn.isForwardRef=function(N){return k(N)===c},zn.isFragment=function(N){return k(N)===r},zn.isLazy=function(N){return k(N)===g},zn.isMemo=function(N){return k(N)===m},zn.isPortal=function(N){return k(N)===n},zn.isProfiler=function(N){return k(N)===a},zn.isStrictMode=function(N){return k(N)===s},zn.isSuspense=function(N){return k(N)===d},zn.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===r||N===u||N===a||N===s||N===d||N===h||typeof N=="object"&&N!==null&&(N.$$typeof===g||N.$$typeof===m||N.$$typeof===i||N.$$typeof===o||N.$$typeof===c||N.$$typeof===b||N.$$typeof===w||N.$$typeof===C||N.$$typeof===y)},zn.typeOf=k,zn}var X9;function Eft(){return X9||(X9=1,h3.exports=Ift()),h3.exports}var p3,Y9;function Aft(){if(Y9)return p3;Y9=1;var t=Eft(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[t.ForwardRef]=r,a[t.Memo]=s;function i(g){return t.isMemo(g)?s:a[g.$$typeof]||e}var o=Object.defineProperty,l=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,c=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,h=Object.prototype;function m(g,y,b){if(typeof y!="string"){if(h){var w=d(y);w&&w!==h&&m(g,w,b)}var C=l(y);u&&(C=C.concat(u(y)));for(var k=i(g),T=i(y),N=0;N<C.length;++N){var I=C[N];if(!n[I]&&!(b&&b[I])&&!(T&&T[I])&&!(k&&k[I])){var A=c(y,I);try{o(g,I,A)}catch{}}}}return g}return p3=m,p3}Aft();var Rft=!0;function loe(t,e,n){var r="";return n.split(" ").forEach(function(s){t[s]!==void 0?e.push(t[s]+";"):s&&(r+=s+" ")}),r}var ZL=function(e,n,r){var s=e.key+"-"+n.name;(r===!1||Rft===!1)&&e.registered[s]===void 0&&(e.registered[s]=n.styles)},uoe=function(e,n,r){ZL(e,n,r);var s=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var a=n;do e.insert(n===a?"."+s:"",a,e.sheet,!0),a=a.next;while(a!==void 0)}};function Oft(t){for(var e=0,n,r=0,s=t.length;s>=4;++r,s-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var _ft={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Dft=/[A-Z]|^ms/g,Pft=/_EMO_([^_]+?)_([^]*?)_EMO_/g,coe=function(e){return e.charCodeAt(1)===45},Q9=function(e){return e!=null&&typeof e!="boolean"},m3=ioe(function(t){return coe(t)?t:t.replace(Dft,"-$&").toLowerCase()}),Z9=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(Pft,function(r,s,a){return fu={name:s,styles:a,next:fu},s})}return _ft[e]!==1&&!coe(e)&&typeof n=="number"&&n!==0?n+"px":n};function _x(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var s=n;if(s.anim===1)return fu={name:s.name,styles:s.styles,next:fu},s.name;var a=n;if(a.styles!==void 0){var i=a.next;if(i!==void 0)for(;i!==void 0;)fu={name:i.name,styles:i.styles,next:fu},i=i.next;var o=a.styles+";";return o}return Mft(t,e,n)}case"function":{if(t!==void 0){var l=fu,u=n(t);return fu=l,_x(t,e,u)}break}}var c=n;if(e==null)return c;var d=e[c];return d!==void 0?d:c}function Mft(t,e,n){var r="";if(Array.isArray(n))for(var s=0;s<n.length;s++)r+=_x(t,e,n[s])+";";else for(var a in n){var i=n[a];if(typeof i!="object"){var o=i;e!=null&&e[o]!==void 0?r+=a+"{"+e[o]+"}":Q9(o)&&(r+=m3(a)+":"+Z9(a,o)+";")}else if(Array.isArray(i)&&typeof i[0]=="string"&&(e==null||e[i[0]]===void 0))for(var l=0;l<i.length;l++)Q9(i[l])&&(r+=m3(a)+":"+Z9(a,i[l])+";");else{var u=_x(t,e,i);switch(a){case"animation":case"animationName":{r+=m3(a)+":"+u+";";break}default:r+=a+"{"+u+"}"}}}return r}var J9=/label:\s*([^\s;{]+)\s*(;|$)/g,fu;function HT(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,s="";fu=void 0;var a=t[0];if(a==null||a.raw===void 0)r=!1,s+=_x(n,e,a);else{var i=a;s+=i[0]}for(var o=1;o<t.length;o++)if(s+=_x(n,e,t[o]),r){var l=a;s+=l[o]}J9.lastIndex=0;for(var u="",c;(c=J9.exec(s))!==null;)u+="-"+c[1];var d=Oft(s)+u;return{name:d,styles:s,next:fu}}var jft=function(e){return e()},Lft=C3.useInsertionEffect?C3.useInsertionEffect:!1,doe=Lft||jft,foe=L.createContext(typeof HTMLElement<"u"?$ft({key:"css"}):null);foe.Provider;var hoe=function(e){return L.forwardRef(function(n,r){var s=L.useContext(foe);return e(n,s,r)})},JL=L.createContext({}),eF={}.hasOwnProperty,lM="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Fft=function(e,n){var r={};for(var s in n)eF.call(n,s)&&(r[s]=n[s]);return r[lM]=e,r},zft=function(e){var n=e.cache,r=e.serialized,s=e.isStringTag;return ZL(n,r,s),doe(function(){return uoe(n,r,s)}),null},Bft=hoe(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var s=t[lM],a=[r],i="";typeof t.className=="string"?i=loe(e.registered,a,t.className):t.className!=null&&(i=t.className+" ");var o=HT(a,void 0,L.useContext(JL));i+=e.key+"-"+o.name;var l={};for(var u in t)eF.call(t,u)&&u!=="css"&&u!==lM&&(l[u]=t[u]);return l.className=i,n&&(l.ref=n),L.createElement(L.Fragment,null,L.createElement(zft,{cache:e,serialized:o,isStringTag:typeof s=="string"}),L.createElement(s,l))}),Uft=Bft,eK=function(e,n){var r=arguments;if(n==null||!eF.call(n,"css"))return L.createElement.apply(void 0,r);var s=r.length,a=new Array(s);a[0]=Uft,a[1]=Fft(e,n);for(var i=2;i<s;i++)a[i]=r[i];return L.createElement.apply(null,a)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(eK||(eK={}));function jy(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return HT(e)}function sf(){var t=jy.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Vft=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Wft=ioe(function(t){return Vft.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),Gft=Wft,Hft=function(e){return e!=="theme"},tK=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?Gft:Hft},nK=function(e,n,r){var s;if(n){var a=n.shouldForwardProp;s=e.__emotion_forwardProp&&a?function(i){return e.__emotion_forwardProp(i)&&a(i)}:a}return typeof s!="function"&&r&&(s=e.__emotion_forwardProp),s},qft=function(e){var n=e.cache,r=e.serialized,s=e.isStringTag;return ZL(n,r,s),doe(function(){return uoe(n,r,s)}),null},Kft=function t(e,n){var r=e.__emotion_real===e,s=r&&e.__emotion_base||e,a,i;n!==void 0&&(a=n.label,i=n.target);var o=nK(e,n,r),l=o||tK(s),u=!l("as");return function(){var c=arguments,d=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(a!==void 0&&d.push("label:"+a+";"),c[0]==null||c[0].raw===void 0)d.push.apply(d,c);else{var h=c[0];d.push(h[0]);for(var m=c.length,g=1;g<m;g++)d.push(c[g],h[g])}var y=hoe(function(b,w,C){var k=u&&b.as||s,T="",N=[],I=b;if(b.theme==null){I={};for(var A in b)I[A]=b[A];I.theme=L.useContext(JL)}typeof b.className=="string"?T=loe(w.registered,N,b.className):b.className!=null&&(T=b.className+" ");var D=HT(d.concat(N),w.registered,I);T+=w.key+"-"+D.name,i!==void 0&&(T+=" "+i);var P=u&&o===void 0?tK(k):l,R={};for(var O in b)u&&O==="as"||P(O)&&(R[O]=b[O]);return R.className=T,C&&(R.ref=C),L.createElement(L.Fragment,null,L.createElement(qft,{cache:w,serialized:D,isStringTag:typeof k=="string"}),L.createElement(k,R))});return y.displayName=a!==void 0?a:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",y.defaultProps=e.defaultProps,y.__emotion_real=y,y.__emotion_base=s,y.__emotion_styles=d,y.__emotion_forwardProp=o,Object.defineProperty(y,"toString",{value:function(){return"."+i}}),y.withComponent=function(b,w){var C=t(b,hC({},n,w,{shouldForwardProp:nK(y,w,!0)}));return C.apply(void 0,d)},y}},Xft=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],uM=Kft.bind(null);Xft.forEach(function(t){uM[t]=uM(t)});function poe(t,e){return uM(t,e)}function Yft(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const rK=[];function sK(t){return rK[0]=t,HT(rK)}var g3={exports:{}},sr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aK;function Qft(){if(aK)return sr;aK=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.for("react.view_transition"),m=Symbol.for("react.client.reference");function g(y){if(typeof y=="object"&&y!==null){var b=y.$$typeof;switch(b){case t:switch(y=y.type,y){case n:case s:case r:case l:case u:case h:return y;default:switch(y=y&&y.$$typeof,y){case i:case o:case d:case c:return y;case a:return y;default:return b}}case e:return b}}}return sr.ContextConsumer=a,sr.ContextProvider=i,sr.Element=t,sr.ForwardRef=o,sr.Fragment=n,sr.Lazy=d,sr.Memo=c,sr.Portal=e,sr.Profiler=s,sr.StrictMode=r,sr.Suspense=l,sr.SuspenseList=u,sr.isContextConsumer=function(y){return g(y)===a},sr.isContextProvider=function(y){return g(y)===i},sr.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===t},sr.isForwardRef=function(y){return g(y)===o},sr.isFragment=function(y){return g(y)===n},sr.isLazy=function(y){return g(y)===d},sr.isMemo=function(y){return g(y)===c},sr.isPortal=function(y){return g(y)===e},sr.isProfiler=function(y){return g(y)===s},sr.isStrictMode=function(y){return g(y)===r},sr.isSuspense=function(y){return g(y)===l},sr.isSuspenseList=function(y){return g(y)===u},sr.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===n||y===s||y===r||y===l||y===u||typeof y=="object"&&y!==null&&(y.$$typeof===d||y.$$typeof===c||y.$$typeof===i||y.$$typeof===a||y.$$typeof===o||y.$$typeof===m||y.getModuleId!==void 0)},sr.typeOf=g,sr}var iK;function Zft(){return iK||(iK=1,g3.exports=Qft()),g3.exports}var moe=Zft();function mu(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function goe(t){if(L.isValidElement(t)||moe.isValidElementType(t)||!mu(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=goe(t[n])}),e}function lo(t,e,n={clone:!0}){const r=n.clone?{...t}:t;return mu(t)&&mu(e)&&Object.keys(e).forEach(s=>{L.isValidElement(e[s])||moe.isValidElementType(e[s])?r[s]=e[s]:mu(e[s])&&Object.prototype.hasOwnProperty.call(t,s)&&mu(t[s])?r[s]=lo(t[s],e[s],n):n.clone?r[s]=mu(e[s])?goe(e[s]):e[s]:r[s]=e[s]}),r}const Jft=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function eht(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...s}=t,a=Jft(e),i=Object.keys(a);function o(h){return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n})`}function l(h){return`@media (max-width:${(typeof e[h]=="number"?e[h]:h)-r/100}${n})`}function u(h,m){const g=i.indexOf(m);return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n}) and (max-width:${(g!==-1&&typeof e[i[g]]=="number"?e[i[g]]:m)-r/100}${n})`}function c(h){return i.indexOf(h)+1<i.length?u(h,i[i.indexOf(h)+1]):o(h)}function d(h){const m=i.indexOf(h);return m===0?o(i[1]):m===i.length-1?l(i[m]):u(h,i[i.indexOf(h)+1]).replace("@media","@media not all and")}return{keys:i,values:a,up:o,down:l,between:u,only:c,not:d,unit:n,...s}}function tht(t,e){if(!t.containerQueries)return e;const n=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,s)=>{var i,o;const a=/min-width:\s*([0-9.]+)/;return+(((i=r.match(a))==null?void 0:i[1])||0)-+(((o=s.match(a))==null?void 0:o[1])||0)});return n.length?n.reduce((r,s)=>{const a=e[s];return delete r[s],r[s]=a,r},{...e}):e}function nht(t,e){return e==="@"||e.startsWith("@")&&(t.some(n=>e.startsWith(`@${n}`))||!!e.match(/^@\d/))}function rht(t,e){const n=e.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,s]=n,a=Number.isNaN(+r)?r||0:+r;return t.containerQueries(s).up(a)}function sht(t){const e=(a,i)=>a.replace("@media",i?`@container ${i}`:"@container");function n(a,i){a.up=(...o)=>e(t.breakpoints.up(...o),i),a.down=(...o)=>e(t.breakpoints.down(...o),i),a.between=(...o)=>e(t.breakpoints.between(...o),i),a.only=(...o)=>e(t.breakpoints.only(...o),i),a.not=(...o)=>{const l=e(t.breakpoints.not(...o),i);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const r={},s=a=>(n(r,a),r);return n(s),{...t,containerQueries:s}}const aht={borderRadius:4};function vb(t,e){return e?lo(t,e,{clone:!1}):t}const qT={xs:0,sm:600,md:900,lg:1200,xl:1536},oK={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${qT[t]}px)`},iht={containerQueries:t=>({up:e=>{let n=typeof e=="number"?e:qT[e]||e;return typeof n=="number"&&(n=`${n}px`),t?`@container ${t} (min-width:${n})`:`@container (min-width:${n})`}})};function Dc(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const a=r.breakpoints||oK;return e.reduce((i,o,l)=>(i[a.up(a.keys[l])]=n(e[l]),i),{})}if(typeof e=="object"){const a=r.breakpoints||oK;return Object.keys(e).reduce((i,o)=>{if(nht(a.keys,o)){const l=rht(r.containerQueries?r:iht,o);l&&(i[l]=n(e[o],o))}else if(Object.keys(a.values||qT).includes(o)){const l=a.up(o);i[l]=n(e[o],o)}else{const l=o;i[l]=e[l]}return i},{})}return n(e)}function oht(t={}){var n;return((n=t.keys)==null?void 0:n.reduce((r,s)=>{const a=t.up(s);return r[a]={},r},{}))||{}}function lht(t,e){return t.reduce((n,r)=>{const s=n[r];return(!s||Object.keys(s).length===0)&&delete n[r],n},e)}function bt(t){if(typeof t!="string")throw new Error(Rh(7));return t.charAt(0).toUpperCase()+t.slice(1)}function KT(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((s,a)=>s&&s[a]?s[a]:null,t);if(r!=null)return r}return e.split(".").reduce((r,s)=>r&&r[s]!=null?r[s]:null,t)}function _C(t,e,n,r=n){let s;return typeof t=="function"?s=t(n):Array.isArray(t)?s=t[n]||r:s=KT(t,n)||r,e&&(s=e(s,r,t)),s}function ps(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:s}=t,a=i=>{if(i[e]==null)return null;const o=i[e],l=i.theme,u=KT(l,r)||{};return Dc(i,o,d=>{let h=_C(u,s,d);return d===h&&typeof d=="string"&&(h=_C(u,s,`${e}${d==="default"?"":bt(d)}`,d)),n===!1?h:{[n]:h}})};return a.propTypes={},a.filterProps=[e],a}function uht(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const cht={m:"margin",p:"padding"},dht={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},lK={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},fht=uht(t=>{if(t.length>2)if(lK[t])t=lK[t];else return[t];const[e,n]=t.split(""),r=cht[e],s=dht[n]||"";return Array.isArray(s)?s.map(a=>r+a):[r+s]}),tF=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],nF=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...tF,...nF];function k1(t,e,n,r){const s=KT(t,e,!0)??n;return typeof s=="number"||typeof s=="string"?a=>typeof a=="string"?a:typeof s=="string"?s.startsWith("var(")&&a===0?0:s.startsWith("var(")&&a===1?s:`calc(${a} * ${s})`:s*a:Array.isArray(s)?a=>{if(typeof a=="string")return a;const i=Math.abs(a),o=s[i];return a>=0?o:typeof o=="number"?-o:typeof o=="string"&&o.startsWith("var(")?`calc(-1 * ${o})`:`-${o}`}:typeof s=="function"?s:()=>{}}function rF(t){return k1(t,"spacing",8)}function N1(t,e){return typeof e=="string"||e==null?e:t(e)}function hht(t,e){return n=>t.reduce((r,s)=>(r[s]=N1(e,n),r),{})}function pht(t,e,n,r){if(!e.includes(n))return null;const s=fht(n),a=hht(s,r),i=t[n];return Dc(t,i,a)}function yoe(t,e){const n=rF(t.theme);return Object.keys(t).map(r=>pht(t,e,r,n)).reduce(vb,{})}function Qr(t){return yoe(t,tF)}Qr.propTypes={};Qr.filterProps=tF;function Zr(t){return yoe(t,nF)}Zr.propTypes={};Zr.filterProps=nF;function boe(t=8,e=rF({spacing:t})){if(t.mui)return t;const n=(...r)=>(r.length===0?[1]:r).map(a=>{const i=e(a);return typeof i=="number"?`${i}px`:i}).join(" ");return n.mui=!0,n}function XT(...t){const e=t.reduce((r,s)=>(s.filterProps.forEach(a=>{r[a]=s}),r),{}),n=r=>Object.keys(r).reduce((s,a)=>e[a]?vb(s,e[a](r)):s,{});return n.propTypes={},n.filterProps=t.reduce((r,s)=>r.concat(s.filterProps),[]),n}function Uo(t){return typeof t!="number"?t:`${t}px solid`}function ul(t,e){return ps({prop:t,themeKey:"borders",transform:e})}const mht=ul("border",Uo),ght=ul("borderTop",Uo),yht=ul("borderRight",Uo),bht=ul("borderBottom",Uo),xht=ul("borderLeft",Uo),vht=ul("borderColor"),wht=ul("borderTopColor"),Sht=ul("borderRightColor"),Cht=ul("borderBottomColor"),kht=ul("borderLeftColor"),Nht=ul("outline",Uo),Tht=ul("outlineColor"),YT=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=k1(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:N1(e,r)});return Dc(t,t.borderRadius,n)}return null};YT.propTypes={};YT.filterProps=["borderRadius"];XT(mht,ght,yht,bht,xht,vht,wht,Sht,Cht,kht,YT,Nht,Tht);const QT=t=>{if(t.gap!==void 0&&t.gap!==null){const e=k1(t.theme,"spacing",8),n=r=>({gap:N1(e,r)});return Dc(t,t.gap,n)}return null};QT.propTypes={};QT.filterProps=["gap"];const ZT=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=k1(t.theme,"spacing",8),n=r=>({columnGap:N1(e,r)});return Dc(t,t.columnGap,n)}return null};ZT.propTypes={};ZT.filterProps=["columnGap"];const JT=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=k1(t.theme,"spacing",8),n=r=>({rowGap:N1(e,r)});return Dc(t,t.rowGap,n)}return null};JT.propTypes={};JT.filterProps=["rowGap"];const $ht=ps({prop:"gridColumn"}),Iht=ps({prop:"gridRow"}),Eht=ps({prop:"gridAutoFlow"}),Aht=ps({prop:"gridAutoColumns"}),Rht=ps({prop:"gridAutoRows"}),Oht=ps({prop:"gridTemplateColumns"}),_ht=ps({prop:"gridTemplateRows"}),Dht=ps({prop:"gridTemplateAreas"}),Pht=ps({prop:"gridArea"});XT(QT,ZT,JT,$ht,Iht,Eht,Aht,Rht,Oht,_ht,Dht,Pht);function Cm(t,e){return e==="grey"?e:t}const Mht=ps({prop:"color",themeKey:"palette",transform:Cm}),jht=ps({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Cm}),Lht=ps({prop:"backgroundColor",themeKey:"palette",transform:Cm});XT(Mht,jht,Lht);function ro(t){return t<=1&&t!==0?`${t*100}%`:t}const Fht=ps({prop:"width",transform:ro}),sF=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var s,a,i,o,l;const r=((i=(a=(s=t.theme)==null?void 0:s.breakpoints)==null?void 0:a.values)==null?void 0:i[n])||qT[n];return r?((l=(o=t.theme)==null?void 0:o.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:ro(n)}};return Dc(t,t.maxWidth,e)}return null};sF.filterProps=["maxWidth"];const zht=ps({prop:"minWidth",transform:ro}),Bht=ps({prop:"height",transform:ro}),Uht=ps({prop:"maxHeight",transform:ro}),Vht=ps({prop:"minHeight",transform:ro});ps({prop:"size",cssProperty:"width",transform:ro});ps({prop:"size",cssProperty:"height",transform:ro});const Wht=ps({prop:"boxSizing"});XT(Fht,sF,zht,Bht,Uht,Vht,Wht);const T1={border:{themeKey:"borders",transform:Uo},borderTop:{themeKey:"borders",transform:Uo},borderRight:{themeKey:"borders",transform:Uo},borderBottom:{themeKey:"borders",transform:Uo},borderLeft:{themeKey:"borders",transform:Uo},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Uo},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:YT},color:{themeKey:"palette",transform:Cm},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Cm},backgroundColor:{themeKey:"palette",transform:Cm},p:{style:Zr},pt:{style:Zr},pr:{style:Zr},pb:{style:Zr},pl:{style:Zr},px:{style:Zr},py:{style:Zr},padding:{style:Zr},paddingTop:{style:Zr},paddingRight:{style:Zr},paddingBottom:{style:Zr},paddingLeft:{style:Zr},paddingX:{style:Zr},paddingY:{style:Zr},paddingInline:{style:Zr},paddingInlineStart:{style:Zr},paddingInlineEnd:{style:Zr},paddingBlock:{style:Zr},paddingBlockStart:{style:Zr},paddingBlockEnd:{style:Zr},m:{style:Qr},mt:{style:Qr},mr:{style:Qr},mb:{style:Qr},ml:{style:Qr},mx:{style:Qr},my:{style:Qr},margin:{style:Qr},marginTop:{style:Qr},marginRight:{style:Qr},marginBottom:{style:Qr},marginLeft:{style:Qr},marginX:{style:Qr},marginY:{style:Qr},marginInline:{style:Qr},marginInlineStart:{style:Qr},marginInlineEnd:{style:Qr},marginBlock:{style:Qr},marginBlockStart:{style:Qr},marginBlockEnd:{style:Qr},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:QT},rowGap:{style:JT},columnGap:{style:ZT},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ro},maxWidth:{style:sF},minWidth:{transform:ro},height:{transform:ro},maxHeight:{transform:ro},minHeight:{transform:ro},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Ght(...t){const e=t.reduce((r,s)=>r.concat(Object.keys(s)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function Hht(t,e){return typeof t=="function"?t(e):t}function qht(){function t(n,r,s,a){const i={[n]:r,theme:s},o=a[n];if(!o)return{[n]:r};const{cssProperty:l=n,themeKey:u,transform:c,style:d}=o;if(r==null)return null;if(u==="typography"&&r==="inherit")return{[n]:r};const h=KT(s,u)||{};return d?d(i):Dc(i,r,g=>{let y=_C(h,c,g);return g===y&&typeof g=="string"&&(y=_C(h,c,`${n}${g==="default"?"":bt(g)}`,g)),l===!1?y:{[l]:y}})}function e(n){const{sx:r,theme:s={}}=n||{};if(!r)return null;const a=s.unstable_sxConfig??T1;function i(o){let l=o;if(typeof o=="function")l=o(s);else if(typeof o!="object")return o;if(!l)return null;const u=oht(s.breakpoints),c=Object.keys(u);let d=u;return Object.keys(l).forEach(h=>{const m=Hht(l[h],s);if(m!=null)if(typeof m=="object")if(a[h])d=vb(d,t(h,m,s,a));else{const g=Dc({theme:s},m,y=>({[h]:y}));Ght(g,m)?d[h]=e({sx:m,theme:s}):d=vb(d,g)}else d=vb(d,t(h,m,s,a))}),tht(s,lht(c,d))}return Array.isArray(r)?r.map(i):i(r)}return e}const Oh=qht();Oh.filterProps=["sx"];function Kht(t,e){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[t])||typeof n.getColorSchemeSelector!="function")return{};let s=n.getColorSchemeSelector(t);return s==="&"?e:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:e})}return n.palette.mode===t?e:{}}function e$(t={},...e){const{breakpoints:n={},palette:r={},spacing:s,shape:a={},...i}=t,o=eht(n),l=boe(s);let u=lo({breakpoints:o,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:l,shape:{...aht,...a}},i);return u=sht(u),u.applyStyles=Kht,u=e.reduce((c,d)=>lo(c,d),u),u.unstable_sxConfig={...T1,...i==null?void 0:i.unstable_sxConfig},u.unstable_sx=function(d){return Oh({sx:d,theme:this})},u}function Xht(t){return Object.keys(t).length===0}function Yht(t=null){const e=L.useContext(JL);return!e||Xht(e)?t:e}const Qht=e$();function t$(t=Qht){return Yht(t)}const Zht=t=>{var r;const e={systemProps:{},otherProps:{}},n=((r=t==null?void 0:t.theme)==null?void 0:r.unstable_sxConfig)??T1;return Object.keys(t).forEach(s=>{n[s]?e.systemProps[s]=t[s]:e.otherProps[s]=t[s]}),e};function aF(t){const{sx:e,...n}=t,{systemProps:r,otherProps:s}=Zht(n);let a;return Array.isArray(e)?a=[r,...e]:typeof e=="function"?a=(...i)=>{const o=e(...i);return mu(o)?{...r,...o}:r}:a={...r,...e},{...s,sx:a}}const uK=t=>t,Jht=()=>{let t=uK;return{configure(e){t=e},generate(e){return t(e)},reset(){t=uK}}},xoe=Jht();function ept(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:s}=t,a=poe("div",{shouldForwardProp:o=>o!=="theme"&&o!=="sx"&&o!=="as"})(Oh);return L.forwardRef(function(l,u){const c=t$(n),{className:d,component:h="div",...m}=aF(l);return v.jsx(a,{as:h,ref:u,className:mt(d,s?s(r):r),theme:e&&c[e]||c,...m})})}const tpt={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Or(t,e,n="Mui"){const r=tpt[e];return r?`${n}-${r}`:`${xoe.generate(t)}-${e}`}function _r(t,e,n="Mui"){const r={};return e.forEach(s=>{r[s]=Or(t,s,n)}),r}function voe(t){const{variants:e,...n}=t,r={variants:e,style:sK(n),isProcessed:!0};return r.style===n||e&&e.forEach(s=>{typeof s.style!="function"&&(s.style=sK(s.style))}),r}const npt=e$();function y3(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function rpt(t){return t?(e,n)=>n[t]:null}function spt(t,e,n){t.theme=ipt(t.theme)?n:t.theme[e]||t.theme}function WS(t,e){const n=typeof e=="function"?e(t):e;if(Array.isArray(n))return n.flatMap(r=>WS(t,r));if(Array.isArray(n==null?void 0:n.variants)){let r;if(n.isProcessed)r=n.style;else{const{variants:s,...a}=n;r=a}return woe(t,n.variants,[r])}return n!=null&&n.isProcessed?n.style:n}function woe(t,e,n=[]){var s;let r;e:for(let a=0;a<e.length;a+=1){const i=e[a];if(typeof i.props=="function"){if(r??(r={...t,...t.ownerState,ownerState:t.ownerState}),!i.props(r))continue}else for(const o in i.props)if(t[o]!==i.props[o]&&((s=t.ownerState)==null?void 0:s[o])!==i.props[o])continue e;typeof i.style=="function"?(r??(r={...t,...t.ownerState,ownerState:t.ownerState}),n.push(i.style(r))):n.push(i.style)}return n}function Soe(t={}){const{themeId:e,defaultTheme:n=npt,rootShouldForwardProp:r=y3,slotShouldForwardProp:s=y3}=t;function a(o){spt(o,e,n)}return(o,l={})=>{Yft(o,N=>N.filter(I=>I!==Oh));const{name:u,slot:c,skipVariantsResolver:d,skipSx:h,overridesResolver:m=rpt(lpt(c)),...g}=l,y=d!==void 0?d:c&&c!=="Root"&&c!=="root"||!1,b=h||!1;let w=y3;c==="Root"||c==="root"?w=r:c?w=s:opt(o)&&(w=void 0);const C=poe(o,{shouldForwardProp:w,label:apt(),...g}),k=N=>{if(typeof N=="function"&&N.__emotion_real!==N)return function(A){return WS(A,N)};if(mu(N)){const I=voe(N);return I.variants?function(D){return WS(D,I)}:I.style}return N},T=(...N)=>{const I=[],A=N.map(k),D=[];if(I.push(a),u&&m&&D.push(function(F){var j,q;const V=(q=(j=F.theme.components)==null?void 0:j[u])==null?void 0:q.styleOverrides;if(!V)return null;const W={};for(const Y in V)W[Y]=WS(F,V[Y]);return m(F,W)}),u&&!y&&D.push(function(F){var W,j;const z=F.theme,V=(j=(W=z==null?void 0:z.components)==null?void 0:W[u])==null?void 0:j.variants;return V?woe(F,V):null}),b||D.push(Oh),Array.isArray(A[0])){const O=A.shift(),F=new Array(I.length).fill(""),z=new Array(D.length).fill("");let V;V=[...F,...O,...z],V.raw=[...F,...O.raw,...z],I.unshift(V)}const P=[...I,...A,...D],R=C(...P);return o.muiName&&(R.muiName=o.muiName),R};return C.withConfig&&(T.withConfig=C.withConfig),T}}function apt(t,e){return void 0}function ipt(t){for(const e in t)return!1;return!0}function opt(t){return typeof t=="string"&&t.charCodeAt(0)>96}function lpt(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}const upt=Soe();function Dx(t,e){const n={...e};for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const s=r;if(s==="components"||s==="slots")n[s]={...t[s],...n[s]};else if(s==="componentsProps"||s==="slotProps"){const a=t[s],i=e[s];if(!i)n[s]=a||{};else if(!a)n[s]=i;else{n[s]={...i};for(const o in a)if(Object.prototype.hasOwnProperty.call(a,o)){const l=o;n[s][l]=Dx(a[l],i[l])}}}else n[s]===void 0&&(n[s]=t[s])}return n}function cpt(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:Dx(e.components[n].defaultProps,r)}function dpt({props:t,name:e,defaultTheme:n,themeId:r}){let s=t$(n);return r&&(s=s[r]||s),cpt({theme:s,name:e,props:t})}const DC=typeof window<"u"?L.useLayoutEffect:L.useEffect;function fpt(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}function iF(t,e=0,n=1){return fpt(t,e,n)}function hpt(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,s)=>s<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function zd(t){if(t.type)return t;if(t.charAt(0)==="#")return zd(hpt(t));const e=t.indexOf("("),n=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(Rh(9,t));let r=t.substring(e+1,t.length-1),s;if(n==="color"){if(r=r.split(" "),s=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(s))throw new Error(Rh(10,s))}else r=r.split(",");return r=r.map(a=>parseFloat(a)),{type:n,values:r,colorSpace:s}}const ppt=t=>{const e=zd(t);return e.values.slice(0,3).map((n,r)=>e.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},db=(t,e)=>{try{return ppt(t)}catch{return t}};function n$(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.includes("rgb")?r=r.map((s,a)=>a<3?parseInt(s,10):s):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function Coe(t){t=zd(t);const{values:e}=t,n=e[0],r=e[1]/100,s=e[2]/100,a=r*Math.min(s,1-s),i=(u,c=(u+n/30)%12)=>s-a*Math.max(Math.min(c-3,9-c,1),-1);let o="rgb";const l=[Math.round(i(0)*255),Math.round(i(8)*255),Math.round(i(4)*255)];return t.type==="hsla"&&(o+="a",l.push(e[3])),n$({type:o,values:l})}function cM(t){t=zd(t);let e=t.type==="hsl"||t.type==="hsla"?zd(Coe(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function mpt(t,e){const n=cM(t),r=cM(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function jr(t,e){return t=zd(t),e=iF(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,n$(t)}function gS(t,e,n){try{return jr(t,e)}catch{return t}}function r$(t,e){if(t=zd(t),e=iF(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]*=1-e;return n$(t)}function cr(t,e,n){try{return r$(t,e)}catch{return t}}function s$(t,e){if(t=zd(t),e=iF(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.includes("color"))for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return n$(t)}function dr(t,e,n){try{return s$(t,e)}catch{return t}}function gpt(t,e=.15){return cM(t)>.5?r$(t,e):s$(t,e)}function yS(t,e,n){try{return gpt(t,e)}catch{return t}}const ypt=L.createContext(),bpt=()=>L.useContext(ypt)??!1,xpt=L.createContext(void 0);function vpt(t){const{theme:e,name:n,props:r}=t;if(!e||!e.components||!e.components[n])return r;const s=e.components[n];return s.defaultProps?Dx(s.defaultProps,r):!s.styleOverrides&&!s.variants?Dx(s,r):r}function wpt({props:t,name:e}){const n=L.useContext(xpt);return vpt({props:t,name:e,theme:{components:n}})}const cK={theme:void 0};function Spt(t){let e,n;return function(s){let a=e;return(a===void 0||s.theme!==n)&&(cK.theme=s.theme,a=voe(t(cK)),e=a,n=s.theme),a}}function Cpt(t=""){function e(...r){if(!r.length)return"";const s=r[0];return typeof s=="string"&&!s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${s}${e(...r.slice(1))})`:`, ${s}`}return(r,...s)=>`var(--${t?`${t}-`:""}${r}${e(...s)})`}const dK=(t,e,n,r=[])=>{let s=t;e.forEach((a,i)=>{i===e.length-1?Array.isArray(s)?s[Number(a)]=n:s&&typeof s=="object"&&(s[a]=n):s&&typeof s=="object"&&(s[a]||(s[a]=r.includes(a)?[]:{}),s=s[a])})},kpt=(t,e,n)=>{function r(s,a=[],i=[]){Object.entries(s).forEach(([o,l])=>{(!n||n&&!n([...a,o]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?r(l,[...a,o],Array.isArray(l)?[...i,o]:i):e([...a,o],l,i))})}r(t)},Npt=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>t.includes(r))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function b3(t,e){const{prefix:n,shouldSkipGeneratingVar:r}=e||{},s={},a={},i={};return kpt(t,(o,l,u)=>{if((typeof l=="string"||typeof l=="number")&&(!r||!r(o,l))){const c=`--${n?`${n}-`:""}${o.join("-")}`,d=Npt(o,l);Object.assign(s,{[c]:d}),dK(a,o,`var(${c})`,u),dK(i,o,`var(${c}, ${d})`,u)}},o=>o[0]==="vars"),{css:s,vars:a,varsWithDefaults:i}}function Tpt(t,e={}){const{getSelector:n=b,disableCssColorScheme:r,colorSchemeSelector:s}=e,{colorSchemes:a={},components:i,defaultColorScheme:o="light",...l}=t,{vars:u,css:c,varsWithDefaults:d}=b3(l,e);let h=d;const m={},{[o]:g,...y}=a;if(Object.entries(y||{}).forEach(([k,T])=>{const{vars:N,css:I,varsWithDefaults:A}=b3(T,e);h=lo(h,A),m[k]={css:I,vars:N}}),g){const{css:k,vars:T,varsWithDefaults:N}=b3(g,e);h=lo(h,N),m[o]={css:k,vars:T}}function b(k,T){var I,A;let N=s;if(s==="class"&&(N=".%s"),s==="data"&&(N="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(N=`[${s}="%s"]`),k){if(N==="media")return t.defaultColorScheme===k?":root":{[`@media (prefers-color-scheme: ${((A=(I=a[k])==null?void 0:I.palette)==null?void 0:A.mode)||k})`]:{":root":T}};if(N)return t.defaultColorScheme===k?`:root, ${N.replace("%s",String(k))}`:N.replace("%s",String(k))}return":root"}return{vars:h,generateThemeVars:()=>{let k={...u};return Object.entries(m).forEach(([,{vars:T}])=>{k=lo(k,T)}),k},generateStyleSheets:()=>{var D,P;const k=[],T=t.defaultColorScheme||"light";function N(R,O){Object.keys(O).length&&k.push(typeof R=="string"?{[R]:{...O}}:R)}N(n(void 0,{...c}),c);const{[T]:I,...A}=m;if(I){const{css:R}=I,O=(P=(D=a[T])==null?void 0:D.palette)==null?void 0:P.mode,F=!r&&O?{colorScheme:O,...R}:{...R};N(n(T,{...F}),F)}return Object.entries(A).forEach(([R,{css:O}])=>{var V,W;const F=(W=(V=a[R])==null?void 0:V.palette)==null?void 0:W.mode,z=!r&&F?{colorScheme:F,...O}:{...O};N(n(R,{...z}),z)}),k}}}function $pt(t){return function(n){return t==="media"?`@media (prefers-color-scheme: ${n})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${n}"] &`:t==="class"?`.${n} &`:t==="data"?`[data-${n}] &`:`${t.replace("%s",n)} &`:"&"}}function Vr(t,e,n=void 0){const r={};for(const s in t){const a=t[s];let i="",o=!0;for(let l=0;l<a.length;l+=1){const u=a[l];u&&(i+=(o===!0?"":" ")+e(u),o=!1,n&&n[u]&&(i+=" "+n[u]))}r[s]=i}return r}function koe(t,e){var n,r,s;return L.isValidElement(t)&&e.indexOf(t.type.muiName??((s=(r=(n=t.type)==null?void 0:n._payload)==null?void 0:r.value)==null?void 0:s.muiName))!==-1}const Ipt=(t,e)=>t.filter(n=>e.includes(n)),Ly=(t,e,n)=>{const r=t.keys[0];Array.isArray(e)?e.forEach((s,a)=>{n((i,o)=>{a<=t.keys.length-1&&(a===0?Object.assign(i,o):i[t.up(t.keys[a])]=o)},s)}):e&&typeof e=="object"?(Object.keys(e).length>t.keys.length?t.keys:Ipt(t.keys,Object.keys(e))).forEach(a=>{if(t.keys.includes(a)){const i=e[a];i!==void 0&&n((o,l)=>{r===a?Object.assign(o,l):o[t.up(a)]=l},i)}}):(typeof e=="number"||typeof e=="string")&&n((s,a)=>{Object.assign(s,a)},e)};function PC(t){return`--Grid-${t}Spacing`}function a$(t){return`--Grid-parent-${t}Spacing`}const fK="--Grid-columns",km="--Grid-parent-columns",Ept=({theme:t,ownerState:e})=>{const n={};return Ly(t.breakpoints,e.size,(r,s)=>{let a={};s==="grow"&&(a={flexBasis:0,flexGrow:1,maxWidth:"100%"}),s==="auto"&&(a={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof s=="number"&&(a={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${s} / var(${km}) - (var(${km}) - ${s}) * (var(${a$("column")}) / var(${km})))`}),r(n,a)}),n},Apt=({theme:t,ownerState:e})=>{const n={};return Ly(t.breakpoints,e.offset,(r,s)=>{let a={};s==="auto"&&(a={marginLeft:"auto"}),typeof s=="number"&&(a={marginLeft:s===0?"0px":`calc(100% * ${s} / var(${km}) + var(${a$("column")}) * ${s} / var(${km}))`}),r(n,a)}),n},Rpt=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={[fK]:12};return Ly(t.breakpoints,e.columns,(r,s)=>{const a=s??12;r(n,{[fK]:a,"> *":{[km]:a}})}),n},Opt=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return Ly(t.breakpoints,e.rowSpacing,(r,s)=>{var i;const a=typeof s=="string"?s:(i=t.spacing)==null?void 0:i.call(t,s);r(n,{[PC("row")]:a,"> *":{[a$("row")]:a}})}),n},_pt=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return Ly(t.breakpoints,e.columnSpacing,(r,s)=>{var i;const a=typeof s=="string"?s:(i=t.spacing)==null?void 0:i.call(t,s);r(n,{[PC("column")]:a,"> *":{[a$("column")]:a}})}),n},Dpt=({theme:t,ownerState:e})=>{if(!e.container)return{};const n={};return Ly(t.breakpoints,e.direction,(r,s)=>{r(n,{flexDirection:s})}),n},Ppt=({ownerState:t})=>({minWidth:0,boxSizing:"border-box",...t.container&&{display:"flex",flexWrap:"wrap",...t.wrap&&t.wrap!=="wrap"&&{flexWrap:t.wrap},gap:`var(${PC("row")}) var(${PC("column")})`}}),Mpt=t=>{const e=[];return Object.entries(t).forEach(([n,r])=>{r!==!1&&r!==void 0&&e.push(`grid-${n}-${String(r)}`)}),e},jpt=(t,e="xs")=>{function n(r){return r===void 0?!1:typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number"&&r>0}if(n(t))return[`spacing-${e}-${String(t)}`];if(typeof t=="object"&&!Array.isArray(t)){const r=[];return Object.entries(t).forEach(([s,a])=>{n(a)&&r.push(`spacing-${s}-${String(a)}`)}),r}return[]},Lpt=t=>t===void 0?[]:typeof t=="object"?Object.entries(t).map(([e,n])=>`direction-${e}-${n}`):[`direction-xs-${String(t)}`];function Fpt(t,e){t.item!==void 0&&delete t.item,t.zeroMinWidth!==void 0&&delete t.zeroMinWidth,e.keys.forEach(n=>{t[n]!==void 0&&delete t[n]})}const zpt=e$(),Bpt=upt("div",{name:"MuiGrid",slot:"Root"});function Upt(t){return dpt({props:t,name:"MuiGrid",defaultTheme:zpt})}function Vpt(t={}){const{createStyledComponent:e=Bpt,useThemeProps:n=Upt,useTheme:r=t$,componentName:s="MuiGrid"}=t,a=(u,c)=>{const{container:d,direction:h,spacing:m,wrap:g,size:y}=u,b={root:["root",d&&"container",g!=="wrap"&&`wrap-xs-${String(g)}`,...Lpt(h),...Mpt(y),...d?jpt(m,c.breakpoints.keys[0]):[]]};return Vr(b,w=>Or(s,w),{})};function i(u,c,d=()=>!0){const h={};return u===null||(Array.isArray(u)?u.forEach((m,g)=>{m!==null&&d(m)&&c.keys[g]&&(h[c.keys[g]]=m)}):typeof u=="object"?Object.keys(u).forEach(m=>{const g=u[m];g!=null&&d(g)&&(h[m]=g)}):h[c.keys[0]]=u),h}const o=e(Rpt,_pt,Opt,Ept,Dpt,Ppt,Apt),l=L.forwardRef(function(c,d){const h=r(),m=n(c),g=aF(m);Fpt(g,h.breakpoints);const{className:y,children:b,columns:w=12,container:C=!1,component:k="div",direction:T="row",wrap:N="wrap",size:I={},offset:A={},spacing:D=0,rowSpacing:P=D,columnSpacing:R=D,unstable_level:O=0,...F}=g,z=i(I,h.breakpoints,ee=>ee!==!1),V=i(A,h.breakpoints),W=c.columns??(O?void 0:w),j=c.spacing??(O?void 0:D),q=c.rowSpacing??c.spacing??(O?void 0:P),Y=c.columnSpacing??c.spacing??(O?void 0:R),Q={...g,level:O,columns:W,container:C,direction:T,wrap:N,spacing:j,rowSpacing:q,columnSpacing:Y,size:z,offset:V},H=a(Q,h);return v.jsx(o,{ref:d,as:k,ownerState:Q,className:mt(H.root,y),...F,children:L.Children.map(b,ee=>{var te;return L.isValidElement(ee)&&koe(ee,["Grid"])&&C&&ee.props.container?L.cloneElement(ee,{unstable_level:((te=ee.props)==null?void 0:te.unstable_level)??O+1}):ee})})});return l.muiName="Grid",l}function Noe(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Ax.white,default:Ax.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const Wpt=Noe();function Toe(){return{text:{primary:Ax.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Ax.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const hK=Toe();function pK(t,e,n,r){const s=r.light||r,a=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=s$(t.main,s):e==="dark"&&(t.dark=r$(t.main,a)))}function Gpt(t="light"){return t==="dark"?{main:Qp[200],light:Qp[50],dark:Qp[400]}:{main:Qp[700],light:Qp[400],dark:Qp[800]}}function Hpt(t="light"){return t==="dark"?{main:Yp[200],light:Yp[50],dark:Yp[400]}:{main:Yp[500],light:Yp[300],dark:Yp[700]}}function qpt(t="light"){return t==="dark"?{main:Xp[500],light:Xp[300],dark:Xp[700]}:{main:Xp[700],light:Xp[400],dark:Xp[800]}}function Kpt(t="light"){return t==="dark"?{main:Zp[400],light:Zp[300],dark:Zp[700]}:{main:Zp[700],light:Zp[500],dark:Zp[900]}}function Xpt(t="light"){return t==="dark"?{main:Jp[400],light:Jp[300],dark:Jp[700]}:{main:Jp[800],light:Jp[500],dark:Jp[900]}}function Ypt(t="light"){return t==="dark"?{main:Q0[400],light:Q0[300],dark:Q0[700]}:{main:"#ed6c02",light:Q0[500],dark:Q0[900]}}function oF(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2,...s}=t,a=t.primary||Gpt(e),i=t.secondary||Hpt(e),o=t.error||qpt(e),l=t.info||Kpt(e),u=t.success||Xpt(e),c=t.warning||Ypt(e);function d(y){return mpt(y,hK.text.primary)>=n?hK.text.primary:Wpt.text.primary}const h=({color:y,name:b,mainShade:w=500,lightShade:C=300,darkShade:k=700})=>{if(y={...y},!y.main&&y[w]&&(y.main=y[w]),!y.hasOwnProperty("main"))throw new Error(Rh(11,b?` (${b})`:"",w));if(typeof y.main!="string")throw new Error(Rh(12,b?` (${b})`:"",JSON.stringify(y.main)));return pK(y,"light",C,r),pK(y,"dark",k,r),y.contrastText||(y.contrastText=d(y.main)),y};let m;return e==="light"?m=Noe():e==="dark"&&(m=Toe()),lo({common:{...Ax},mode:e,primary:h({color:a,name:"primary"}),secondary:h({color:i,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:o,name:"error"}),warning:h({color:c,name:"warning"}),info:h({color:l,name:"info"}),success:h({color:u,name:"success"}),grey:Zdt,contrastThreshold:n,getContrastText:d,augmentColor:h,tonalOffset:r,...m},s)}function Qpt(t){const e={};return Object.entries(t).forEach(r=>{const[s,a]=r;typeof a=="object"&&(e[s]=`${a.fontStyle?`${a.fontStyle} `:""}${a.fontVariant?`${a.fontVariant} `:""}${a.fontWeight?`${a.fontWeight} `:""}${a.fontStretch?`${a.fontStretch} `:""}${a.fontSize||""}${a.lineHeight?`/${a.lineHeight} `:""}${a.fontFamily||""}`)}),e}function Zpt(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function Jpt(t){return Math.round(t*1e5)/1e5}const mK={textTransform:"uppercase"},gK='"Roboto", "Helvetica", "Arial", sans-serif';function emt(t,e){const{fontFamily:n=gK,fontSize:r=14,fontWeightLight:s=300,fontWeightRegular:a=400,fontWeightMedium:i=500,fontWeightBold:o=700,htmlFontSize:l=16,allVariants:u,pxToRem:c,...d}=typeof e=="function"?e(t):e,h=r/14,m=c||(b=>`${b/l*h}rem`),g=(b,w,C,k,T)=>({fontFamily:n,fontWeight:b,fontSize:m(w),lineHeight:C,...n===gK?{letterSpacing:`${Jpt(k/w)}em`}:{},...T,...u}),y={h1:g(s,96,1.167,-1.5),h2:g(s,60,1.2,-.5),h3:g(a,48,1.167,0),h4:g(a,34,1.235,.25),h5:g(a,24,1.334,0),h6:g(i,20,1.6,.15),subtitle1:g(a,16,1.75,.15),subtitle2:g(i,14,1.57,.1),body1:g(a,16,1.5,.15),body2:g(a,14,1.43,.15),button:g(i,14,1.75,.4,mK),caption:g(a,12,1.66,.4),overline:g(a,12,2.66,1,mK),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return lo({htmlFontSize:l,pxToRem:m,fontFamily:n,fontSize:r,fontWeightLight:s,fontWeightRegular:a,fontWeightMedium:i,fontWeightBold:o,...y},d,{clone:!1})}const tmt=.2,nmt=.14,rmt=.12;function $r(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${tmt})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${nmt})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${rmt})`].join(",")}const smt=["none",$r(0,2,1,-1,0,1,1,0,0,1,3,0),$r(0,3,1,-2,0,2,2,0,0,1,5,0),$r(0,3,3,-2,0,3,4,0,0,1,8,0),$r(0,2,4,-1,0,4,5,0,0,1,10,0),$r(0,3,5,-1,0,5,8,0,0,1,14,0),$r(0,3,5,-1,0,6,10,0,0,1,18,0),$r(0,4,5,-2,0,7,10,1,0,2,16,1),$r(0,5,5,-3,0,8,10,1,0,3,14,2),$r(0,5,6,-3,0,9,12,1,0,3,16,2),$r(0,6,6,-3,0,10,14,1,0,4,18,3),$r(0,6,7,-4,0,11,15,1,0,4,20,3),$r(0,7,8,-4,0,12,17,2,0,5,22,4),$r(0,7,8,-4,0,13,19,2,0,5,24,4),$r(0,7,9,-4,0,14,21,2,0,5,26,4),$r(0,8,9,-5,0,15,22,2,0,6,28,5),$r(0,8,10,-5,0,16,24,2,0,6,30,5),$r(0,8,11,-5,0,17,26,2,0,6,32,5),$r(0,9,11,-5,0,18,28,2,0,7,34,6),$r(0,9,12,-6,0,19,29,2,0,7,36,6),$r(0,10,13,-6,0,20,31,3,0,8,38,7),$r(0,10,13,-6,0,21,33,3,0,8,40,7),$r(0,10,14,-6,0,22,35,3,0,8,42,7),$r(0,11,14,-7,0,23,36,3,0,9,44,8),$r(0,11,15,-7,0,24,38,3,0,9,46,8)],amt={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},imt={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function yK(t){return`${Math.round(t)}ms`}function omt(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function lmt(t){const e={...amt,...t.easing},n={...imt,...t.duration};return{getAutoHeightDuration:omt,create:(s=["all"],a={})=>{const{duration:i=n.standard,easing:o=e.easeInOut,delay:l=0,...u}=a;return(Array.isArray(s)?s:[s]).map(c=>`${c} ${typeof i=="string"?i:yK(i)} ${o} ${typeof l=="string"?l:yK(l)}`).join(",")},...t,easing:e,duration:n}}const umt={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function cmt(t){return mu(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function $oe(t={}){const e={...t};function n(r){const s=Object.entries(r);for(let a=0;a<s.length;a++){const[i,o]=s[a];!cmt(o)||i.startsWith("unstable_")?delete r[i]:mu(o)&&(r[i]={...o},n(r[i]))}}return n(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function dM(t={},...e){const{breakpoints:n,mixins:r={},spacing:s,palette:a={},transitions:i={},typography:o={},shape:l,...u}=t;if(t.vars&&t.generateThemeVars===void 0)throw new Error(Rh(20));const c=oF(a),d=e$(t);let h=lo(d,{mixins:Zpt(d.breakpoints,r),palette:c,shadows:smt.slice(),typography:emt(c,o),transitions:lmt(i),zIndex:{...umt}});return h=lo(h,u),h=e.reduce((m,g)=>lo(m,g),h),h.unstable_sxConfig={...T1,...u==null?void 0:u.unstable_sxConfig},h.unstable_sx=function(g){return Oh({sx:g,theme:this})},h.toRuntimeSource=$oe,h}function fM(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const dmt=[...Array(25)].map((t,e)=>{if(e===0)return"none";const n=fM(e);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function Ioe(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function Eoe(t){return t==="dark"?dmt:[]}function fmt(t){const{palette:e={mode:"light"},opacity:n,overlays:r,...s}=t,a=oF(e);return{palette:a,opacity:{...Ioe(a.mode),...n},overlays:r||Eoe(a.mode),...s}}function hmt(t){var e;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((e=t[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const pmt=t=>[...[...Array(25)].map((e,n)=>`--${t?`${t}-`:""}overlays-${n}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],mmt=t=>(e,n)=>{const r=t.rootSelector||":root",s=t.colorSchemeSelector;let a=s;if(s==="class"&&(a=".%s"),s==="data"&&(a="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(a=`[${s}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const i={};return pmt(t.cssVarPrefix).forEach(o=>{i[o]=n[o],delete n[o]}),a==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:i}}:a?{[a.replace("%s",e)]:i,[`${r}, ${a.replace("%s",e)}`]:n}:{[r]:{...n,...i}}}if(a&&a!=="media")return`${r}, ${a.replace("%s",String(e))}`}else if(e){if(a==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:n}};if(a)return a.replace("%s",String(e))}return r};function gmt(t,e){e.forEach(n=>{t[n]||(t[n]={})})}function Pe(t,e,n){!t[e]&&n&&(t[e]=n)}function fb(t){return typeof t!="string"||!t.startsWith("hsl")?t:Coe(t)}function ac(t,e){`${e}Channel`in t||(t[`${e}Channel`]=db(fb(t[e])))}function ymt(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const iu=t=>{try{return t()}catch{}},bmt=(t="mui")=>Cpt(t);function x3(t,e,n,r){if(!e)return;e=e===!0?{}:e;const s=r==="dark"?"dark":"light";if(!n){t[r]=fmt({...e,palette:{mode:s,...e==null?void 0:e.palette}});return}const{palette:a,...i}=dM({...n,palette:{mode:s,...e==null?void 0:e.palette}});return t[r]={...e,palette:a,opacity:{...Ioe(s),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||Eoe(s)},i}function xmt(t={},...e){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:s=!1,cssVarPrefix:a="mui",shouldSkipGeneratingVar:i=hmt,colorSchemeSelector:o=n.light&&n.dark?"media":void 0,rootSelector:l=":root",...u}=t,c=Object.keys(n)[0],d=r||(n.light&&c!=="light"?"light":c),h=bmt(a),{[d]:m,light:g,dark:y,...b}=n,w={...b};let C=m;if((d==="dark"&&!("dark"in n)||d==="light"&&!("light"in n))&&(C=!0),!C)throw new Error(Rh(21,d));const k=x3(w,C,u,d);g&&!w.light&&x3(w,g,void 0,"light"),y&&!w.dark&&x3(w,y,void 0,"dark");let T={defaultColorScheme:d,...k,cssVarPrefix:a,colorSchemeSelector:o,rootSelector:l,getCssVar:h,colorSchemes:w,font:{...Qpt(k.typography),...k.font},spacing:ymt(u.spacing)};Object.keys(T.colorSchemes).forEach(P=>{const R=T.colorSchemes[P].palette,O=F=>{const z=F.split("-"),V=z[1],W=z[2];return h(F,R[V][W])};if(R.mode==="light"&&(Pe(R.common,"background","#fff"),Pe(R.common,"onBackground","#000")),R.mode==="dark"&&(Pe(R.common,"background","#000"),Pe(R.common,"onBackground","#fff")),gmt(R,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),R.mode==="light"){Pe(R.Alert,"errorColor",cr(R.error.light,.6)),Pe(R.Alert,"infoColor",cr(R.info.light,.6)),Pe(R.Alert,"successColor",cr(R.success.light,.6)),Pe(R.Alert,"warningColor",cr(R.warning.light,.6)),Pe(R.Alert,"errorFilledBg",O("palette-error-main")),Pe(R.Alert,"infoFilledBg",O("palette-info-main")),Pe(R.Alert,"successFilledBg",O("palette-success-main")),Pe(R.Alert,"warningFilledBg",O("palette-warning-main")),Pe(R.Alert,"errorFilledColor",iu(()=>R.getContrastText(R.error.main))),Pe(R.Alert,"infoFilledColor",iu(()=>R.getContrastText(R.info.main))),Pe(R.Alert,"successFilledColor",iu(()=>R.getContrastText(R.success.main))),Pe(R.Alert,"warningFilledColor",iu(()=>R.getContrastText(R.warning.main))),Pe(R.Alert,"errorStandardBg",dr(R.error.light,.9)),Pe(R.Alert,"infoStandardBg",dr(R.info.light,.9)),Pe(R.Alert,"successStandardBg",dr(R.success.light,.9)),Pe(R.Alert,"warningStandardBg",dr(R.warning.light,.9)),Pe(R.Alert,"errorIconColor",O("palette-error-main")),Pe(R.Alert,"infoIconColor",O("palette-info-main")),Pe(R.Alert,"successIconColor",O("palette-success-main")),Pe(R.Alert,"warningIconColor",O("palette-warning-main")),Pe(R.AppBar,"defaultBg",O("palette-grey-100")),Pe(R.Avatar,"defaultBg",O("palette-grey-400")),Pe(R.Button,"inheritContainedBg",O("palette-grey-300")),Pe(R.Button,"inheritContainedHoverBg",O("palette-grey-A100")),Pe(R.Chip,"defaultBorder",O("palette-grey-400")),Pe(R.Chip,"defaultAvatarColor",O("palette-grey-700")),Pe(R.Chip,"defaultIconColor",O("palette-grey-700")),Pe(R.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Pe(R.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Pe(R.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Pe(R.LinearProgress,"primaryBg",dr(R.primary.main,.62)),Pe(R.LinearProgress,"secondaryBg",dr(R.secondary.main,.62)),Pe(R.LinearProgress,"errorBg",dr(R.error.main,.62)),Pe(R.LinearProgress,"infoBg",dr(R.info.main,.62)),Pe(R.LinearProgress,"successBg",dr(R.success.main,.62)),Pe(R.LinearProgress,"warningBg",dr(R.warning.main,.62)),Pe(R.Skeleton,"bg",`rgba(${O("palette-text-primaryChannel")} / 0.11)`),Pe(R.Slider,"primaryTrack",dr(R.primary.main,.62)),Pe(R.Slider,"secondaryTrack",dr(R.secondary.main,.62)),Pe(R.Slider,"errorTrack",dr(R.error.main,.62)),Pe(R.Slider,"infoTrack",dr(R.info.main,.62)),Pe(R.Slider,"successTrack",dr(R.success.main,.62)),Pe(R.Slider,"warningTrack",dr(R.warning.main,.62));const F=yS(R.background.default,.8);Pe(R.SnackbarContent,"bg",F),Pe(R.SnackbarContent,"color",iu(()=>R.getContrastText(F))),Pe(R.SpeedDialAction,"fabHoverBg",yS(R.background.paper,.15)),Pe(R.StepConnector,"border",O("palette-grey-400")),Pe(R.StepContent,"border",O("palette-grey-400")),Pe(R.Switch,"defaultColor",O("palette-common-white")),Pe(R.Switch,"defaultDisabledColor",O("palette-grey-100")),Pe(R.Switch,"primaryDisabledColor",dr(R.primary.main,.62)),Pe(R.Switch,"secondaryDisabledColor",dr(R.secondary.main,.62)),Pe(R.Switch,"errorDisabledColor",dr(R.error.main,.62)),Pe(R.Switch,"infoDisabledColor",dr(R.info.main,.62)),Pe(R.Switch,"successDisabledColor",dr(R.success.main,.62)),Pe(R.Switch,"warningDisabledColor",dr(R.warning.main,.62)),Pe(R.TableCell,"border",dr(gS(R.divider,1),.88)),Pe(R.Tooltip,"bg",gS(R.grey[700],.92))}if(R.mode==="dark"){Pe(R.Alert,"errorColor",dr(R.error.light,.6)),Pe(R.Alert,"infoColor",dr(R.info.light,.6)),Pe(R.Alert,"successColor",dr(R.success.light,.6)),Pe(R.Alert,"warningColor",dr(R.warning.light,.6)),Pe(R.Alert,"errorFilledBg",O("palette-error-dark")),Pe(R.Alert,"infoFilledBg",O("palette-info-dark")),Pe(R.Alert,"successFilledBg",O("palette-success-dark")),Pe(R.Alert,"warningFilledBg",O("palette-warning-dark")),Pe(R.Alert,"errorFilledColor",iu(()=>R.getContrastText(R.error.dark))),Pe(R.Alert,"infoFilledColor",iu(()=>R.getContrastText(R.info.dark))),Pe(R.Alert,"successFilledColor",iu(()=>R.getContrastText(R.success.dark))),Pe(R.Alert,"warningFilledColor",iu(()=>R.getContrastText(R.warning.dark))),Pe(R.Alert,"errorStandardBg",cr(R.error.light,.9)),Pe(R.Alert,"infoStandardBg",cr(R.info.light,.9)),Pe(R.Alert,"successStandardBg",cr(R.success.light,.9)),Pe(R.Alert,"warningStandardBg",cr(R.warning.light,.9)),Pe(R.Alert,"errorIconColor",O("palette-error-main")),Pe(R.Alert,"infoIconColor",O("palette-info-main")),Pe(R.Alert,"successIconColor",O("palette-success-main")),Pe(R.Alert,"warningIconColor",O("palette-warning-main")),Pe(R.AppBar,"defaultBg",O("palette-grey-900")),Pe(R.AppBar,"darkBg",O("palette-background-paper")),Pe(R.AppBar,"darkColor",O("palette-text-primary")),Pe(R.Avatar,"defaultBg",O("palette-grey-600")),Pe(R.Button,"inheritContainedBg",O("palette-grey-800")),Pe(R.Button,"inheritContainedHoverBg",O("palette-grey-700")),Pe(R.Chip,"defaultBorder",O("palette-grey-700")),Pe(R.Chip,"defaultAvatarColor",O("palette-grey-300")),Pe(R.Chip,"defaultIconColor",O("palette-grey-300")),Pe(R.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Pe(R.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Pe(R.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Pe(R.LinearProgress,"primaryBg",cr(R.primary.main,.5)),Pe(R.LinearProgress,"secondaryBg",cr(R.secondary.main,.5)),Pe(R.LinearProgress,"errorBg",cr(R.error.main,.5)),Pe(R.LinearProgress,"infoBg",cr(R.info.main,.5)),Pe(R.LinearProgress,"successBg",cr(R.success.main,.5)),Pe(R.LinearProgress,"warningBg",cr(R.warning.main,.5)),Pe(R.Skeleton,"bg",`rgba(${O("palette-text-primaryChannel")} / 0.13)`),Pe(R.Slider,"primaryTrack",cr(R.primary.main,.5)),Pe(R.Slider,"secondaryTrack",cr(R.secondary.main,.5)),Pe(R.Slider,"errorTrack",cr(R.error.main,.5)),Pe(R.Slider,"infoTrack",cr(R.info.main,.5)),Pe(R.Slider,"successTrack",cr(R.success.main,.5)),Pe(R.Slider,"warningTrack",cr(R.warning.main,.5));const F=yS(R.background.default,.98);Pe(R.SnackbarContent,"bg",F),Pe(R.SnackbarContent,"color",iu(()=>R.getContrastText(F))),Pe(R.SpeedDialAction,"fabHoverBg",yS(R.background.paper,.15)),Pe(R.StepConnector,"border",O("palette-grey-600")),Pe(R.StepContent,"border",O("palette-grey-600")),Pe(R.Switch,"defaultColor",O("palette-grey-300")),Pe(R.Switch,"defaultDisabledColor",O("palette-grey-600")),Pe(R.Switch,"primaryDisabledColor",cr(R.primary.main,.55)),Pe(R.Switch,"secondaryDisabledColor",cr(R.secondary.main,.55)),Pe(R.Switch,"errorDisabledColor",cr(R.error.main,.55)),Pe(R.Switch,"infoDisabledColor",cr(R.info.main,.55)),Pe(R.Switch,"successDisabledColor",cr(R.success.main,.55)),Pe(R.Switch,"warningDisabledColor",cr(R.warning.main,.55)),Pe(R.TableCell,"border",cr(gS(R.divider,1),.68)),Pe(R.Tooltip,"bg",gS(R.grey[700],.92))}ac(R.background,"default"),ac(R.background,"paper"),ac(R.common,"background"),ac(R.common,"onBackground"),ac(R,"divider"),Object.keys(R).forEach(F=>{const z=R[F];F!=="tonalOffset"&&z&&typeof z=="object"&&(z.main&&Pe(R[F],"mainChannel",db(fb(z.main))),z.light&&Pe(R[F],"lightChannel",db(fb(z.light))),z.dark&&Pe(R[F],"darkChannel",db(fb(z.dark))),z.contrastText&&Pe(R[F],"contrastTextChannel",db(fb(z.contrastText))),F==="text"&&(ac(R[F],"primary"),ac(R[F],"secondary")),F==="action"&&(z.active&&ac(R[F],"active"),z.selected&&ac(R[F],"selected")))})}),T=e.reduce((P,R)=>lo(P,R),T);const N={prefix:a,disableCssColorScheme:s,shouldSkipGeneratingVar:i,getSelector:mmt(T)},{vars:I,generateThemeVars:A,generateStyleSheets:D}=Tpt(T,N);return T.vars=I,Object.entries(T.colorSchemes[T.defaultColorScheme]).forEach(([P,R])=>{T[P]=R}),T.generateThemeVars=A,T.generateStyleSheets=D,T.generateSpacing=function(){return boe(u.spacing,rF(this))},T.getColorSchemeSelector=$pt(o),T.spacing=T.generateSpacing(),T.shouldSkipGeneratingVar=i,T.unstable_sxConfig={...T1,...u==null?void 0:u.unstable_sxConfig},T.unstable_sx=function(R){return Oh({sx:R,theme:this})},T.toRuntimeSource=$oe,T}function bK(t,e,n){t.colorSchemes&&n&&(t.colorSchemes[e]={...n!==!0&&n,palette:oF({...n===!0?{}:n.palette,mode:e})})}function Aoe(t={},...e){const{palette:n,cssVariables:r=!1,colorSchemes:s=n?void 0:{light:!0},defaultColorScheme:a=n==null?void 0:n.mode,...i}=t,o=a||"light",l=s==null?void 0:s[o],u={...s,...n?{[o]:{...typeof l!="boolean"&&l,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in t))return dM(t,...e);let c=n;"palette"in t||u[o]&&(u[o]!==!0?c=u[o].palette:o==="dark"&&(c={mode:"dark"}));const d=dM({...t,palette:c},...e);return d.defaultColorScheme=o,d.colorSchemes=u,d.palette.mode==="light"&&(d.colorSchemes.light={...u.light!==!0&&u.light,palette:d.palette},bK(d,"dark",u.dark)),d.palette.mode==="dark"&&(d.colorSchemes.dark={...u.dark!==!0&&u.dark,palette:d.palette},bK(d,"light",u.light)),d}return!n&&!("light"in u)&&o==="light"&&(u.light=!0),xmt({...i,colorSchemes:u,defaultColorScheme:o,...typeof r!="boolean"&&r},...e)}const Roe=Aoe();function i$(){const t=t$(Roe);return t[KL]||t}function vmt(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const lF=t=>vmt(t)&&t!=="classes",tn=Soe({themeId:KL,defaultTheme:Roe,rootShouldForwardProp:lF});function xK(...t){return t.reduce((e,n)=>n==null?e:function(...s){e.apply(this,s),n.apply(this,s)},()=>{})}function wmt(){return aF}const sa=Spt;function Dr(t){return wpt(t)}function Smt(t){return Or("MuiSvgIcon",t)}_r("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Cmt=t=>{const{color:e,fontSize:n,classes:r}=t,s={root:["root",e!=="inherit"&&`color${bt(e)}`,`fontSize${bt(n)}`]};return Vr(s,Smt,r)},kmt=tn("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${bt(n.color)}`],e[`fontSize${bt(n.fontSize)}`]]}})(sa(({theme:t})=>{var e,n,r,s,a,i,o,l,u,c,d,h,m,g;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(s=(e=t.transitions)==null?void 0:e.create)==null?void 0:s.call(e,"fill",{duration:(r=(n=(t.vars??t).transitions)==null?void 0:n.duration)==null?void 0:r.shorter}),variants:[{props:y=>!y.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((i=(a=t.typography)==null?void 0:a.pxToRem)==null?void 0:i.call(a,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((l=(o=t.typography)==null?void 0:o.pxToRem)==null?void 0:l.call(o,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((c=(u=t.typography)==null?void 0:u.pxToRem)==null?void 0:c.call(u,35))||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,y])=>y&&y.main).map(([y])=>{var b,w;return{props:{color:y},style:{color:(w=(b=(t.vars??t).palette)==null?void 0:b[y])==null?void 0:w.main}}}),{props:{color:"action"},style:{color:(h=(d=(t.vars??t).palette)==null?void 0:d.action)==null?void 0:h.active}},{props:{color:"disabled"},style:{color:(g=(m=(t.vars??t).palette)==null?void 0:m.action)==null?void 0:g.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),hM=L.forwardRef(function(e,n){const r=Dr({props:e,name:"MuiSvgIcon"}),{children:s,className:a,color:i="inherit",component:o="svg",fontSize:l="medium",htmlColor:u,inheritViewBox:c=!1,titleAccess:d,viewBox:h="0 0 24 24",...m}=r,g=L.isValidElement(s)&&s.type==="svg",y={...r,color:i,component:o,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:c,viewBox:h,hasSvgAsChild:g},b={};c||(b.viewBox=h);const w=Cmt(y);return v.jsxs(kmt,{as:o,className:mt(w.root,a),focusable:"false",color:u,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:n,...b,...m,...g&&s.props,ownerState:y,children:[g?s.props.children:s,d?v.jsx("title",{children:d}):null]})});hM.muiName="SvgIcon";function Nmt(t,e){function n(r,s){return v.jsx(hM,{"data-testid":void 0,ref:s,...r,children:t})}return n.muiName=hM.muiName,L.memo(L.forwardRef(n))}function _h(t){return t&&t.ownerDocument||document}function MC(t){return _h(t).defaultView||window}function vK(t,e){typeof t=="function"?t(e):t&&(t.current=e)}let wK=0;function Tmt(t){const[e,n]=L.useState(t),r=t||e;return L.useEffect(()=>{e==null&&(wK+=1,n(`mui-${wK}`))},[e]),r}const $mt={...C3},SK=$mt.useId;function Ooe(t){if(SK!==void 0){const e=SK();return t??e}return Tmt(t)}function Nm(t){const e=L.useRef(t);return DC(()=>{e.current=t}),L.useRef((...n)=>(0,e.current)(...n)).current}function _u(...t){const e=L.useRef(void 0),n=L.useCallback(r=>{const s=t.map(a=>{if(a==null)return null;if(typeof a=="function"){const i=a,o=i(r);return typeof o=="function"?o:()=>{i(null)}}return a.current=r,()=>{a.current=null}});return()=>{s.forEach(a=>a==null?void 0:a())}},t);return L.useMemo(()=>t.every(r=>r==null)?null:r=>{e.current&&(e.current(),e.current=void 0),r!=null&&(e.current=n(r))},t)}const CK={};function _oe(t,e){const n=L.useRef(CK);return n.current===CK&&(n.current=t(e)),n}const Imt=[];function Emt(t){L.useEffect(t,Imt)}class uF{constructor(){R0(this,"currentId",null);R0(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});R0(this,"disposeEffect",()=>this.clear)}static create(){return new uF}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}function Amt(){const t=_oe(uF.create).current;return Emt(t.disposeEffect),t}const Rmt=t=>t.scrollTop;function kK(t,e){const{timeout:n,easing:r,style:s={}}=t;return{duration:s.transitionDuration??(typeof n=="number"?n:n[e.mode]||0),easing:s.transitionTimingFunction??(typeof r=="object"?r[e.mode]:r),delay:s.transitionDelay}}function Omt(t){return Or("MuiPaper",t)}_r("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const _mt=t=>{const{square:e,elevation:n,variant:r,classes:s}=t,a={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return Vr(a,Omt,s)},Dmt=tn("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(sa(({theme:t})=>({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),cF=L.forwardRef(function(e,n){var m;const r=Dr({props:e,name:"MuiPaper"}),s=i$(),{className:a,component:i="div",elevation:o=1,square:l=!1,variant:u="elevation",...c}=r,d={...r,component:i,elevation:o,square:l,variant:u},h=_mt(d);return v.jsx(Dmt,{as:i,ownerState:d,className:mt(h.root,a),ref:n,...c,style:{...u==="elevation"&&{"--Paper-shadow":(s.vars||s).shadows[o],...s.vars&&{"--Paper-overlay":(m=s.vars.overlays)==null?void 0:m[o]},...!s.vars&&s.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${jr("#fff",fM(o))}, ${jr("#fff",fM(o))})`}},...c.style}})});function Pmt(t){return typeof t=="string"}function Mmt(t,e,n){return t===void 0||Pmt(t)?e:{...e,ownerState:{...e.ownerState,...n}}}function jmt(t,e,n){return typeof t=="function"?t(e,n):t}function Doe(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function NK(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function Lmt(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:s,className:a}=t;if(!e){const m=mt(n==null?void 0:n.className,a,s==null?void 0:s.className,r==null?void 0:r.className),g={...n==null?void 0:n.style,...s==null?void 0:s.style,...r==null?void 0:r.style},y={...n,...s,...r};return m.length>0&&(y.className=m),Object.keys(g).length>0&&(y.style=g),{props:y,internalRef:void 0}}const i=Doe({...s,...r}),o=NK(r),l=NK(s),u=e(i),c=mt(u==null?void 0:u.className,n==null?void 0:n.className,a,s==null?void 0:s.className,r==null?void 0:r.className),d={...u==null?void 0:u.style,...n==null?void 0:n.style,...s==null?void 0:s.style,...r==null?void 0:r.style},h={...u,...n,...l,...o};return c.length>0&&(h.className=c),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:u.ref}}function Wo(t,e){const{className:n,elementType:r,ownerState:s,externalForwardedProps:a,internalForwardedProps:i,shouldForwardComponentProp:o=!1,...l}=e,{component:u,slots:c={[t]:void 0},slotProps:d={[t]:void 0},...h}=a,m=c[t]||r,g=jmt(d[t],s),{props:{component:y,...b},internalRef:w}=Lmt({className:n,...l,externalForwardedProps:t==="root"?h:void 0,externalSlotProps:g}),C=_u(w,g==null?void 0:g.ref,e.ref),k=t==="root"?y||u:y,T=Mmt(m,{...t==="root"&&!u&&!c[t]&&i,...t!=="root"&&!c[t]&&i,...b,...k&&!o&&{as:k},...k&&o&&{component:k},ref:C},s);return[m,T]}function TK(t){try{return t.matches(":focus-visible")}catch{}return!1}class jC{constructor(){R0(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new jC}static use(){const e=_oe(jC.create).current,[n,r]=L.useState(!1);return e.shouldMount=n,e.setShouldMount=r,L.useEffect(e.mountEffect,[n]),e}mount(){return this.mounted||(this.mounted=zmt(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.start(...e)})}stop(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.stop(...e)})}pulsate(...e){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.pulsate(...e)})}}function Fmt(){return jC.use()}function zmt(){let t,e;const n=new Promise((r,s)=>{t=r,e=s});return n.resolve=t,n.reject=e,n}function Bmt(t){const{className:e,classes:n,pulsate:r=!1,rippleX:s,rippleY:a,rippleSize:i,in:o,onExited:l,timeout:u}=t,[c,d]=L.useState(!1),h=mt(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),m={width:i,height:i,top:-(i/2)+a,left:-(i/2)+s},g=mt(n.child,c&&n.childLeaving,r&&n.childPulsate);return!o&&!c&&d(!0),L.useEffect(()=>{if(!o&&l!=null){const y=setTimeout(l,u);return()=>{clearTimeout(y)}}},[l,o,u]),v.jsx("span",{className:h,style:m,children:v.jsx("span",{className:g})})}const Bo=_r("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),pM=550,Umt=80,Vmt=sf`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,Wmt=sf`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,Gmt=sf`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,Hmt=tn("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),qmt=tn(Bmt,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Bo.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${Vmt};
    animation-duration: ${pM}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  &.${Bo.ripplePulsate} {
    animation-duration: ${({theme:t})=>t.transitions.duration.shorter}ms;
  }

  & .${Bo.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Bo.childLeaving} {
    opacity: 0;
    animation-name: ${Wmt};
    animation-duration: ${pM}ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
  }

  & .${Bo.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${Gmt};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:t})=>t.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Kmt=L.forwardRef(function(e,n){const r=Dr({props:e,name:"MuiTouchRipple"}),{center:s=!1,classes:a={},className:i,...o}=r,[l,u]=L.useState([]),c=L.useRef(0),d=L.useRef(null);L.useEffect(()=>{d.current&&(d.current(),d.current=null)},[l]);const h=L.useRef(!1),m=Amt(),g=L.useRef(null),y=L.useRef(null),b=L.useCallback(T=>{const{pulsate:N,rippleX:I,rippleY:A,rippleSize:D,cb:P}=T;u(R=>[...R,v.jsx(qmt,{classes:{ripple:mt(a.ripple,Bo.ripple),rippleVisible:mt(a.rippleVisible,Bo.rippleVisible),ripplePulsate:mt(a.ripplePulsate,Bo.ripplePulsate),child:mt(a.child,Bo.child),childLeaving:mt(a.childLeaving,Bo.childLeaving),childPulsate:mt(a.childPulsate,Bo.childPulsate)},timeout:pM,pulsate:N,rippleX:I,rippleY:A,rippleSize:D},c.current)]),c.current+=1,d.current=P},[a]),w=L.useCallback((T={},N={},I=()=>{})=>{const{pulsate:A=!1,center:D=s||N.pulsate,fakeElement:P=!1}=N;if((T==null?void 0:T.type)==="mousedown"&&h.current){h.current=!1;return}(T==null?void 0:T.type)==="touchstart"&&(h.current=!0);const R=P?null:y.current,O=R?R.getBoundingClientRect():{width:0,height:0,left:0,top:0};let F,z,V;if(D||T===void 0||T.clientX===0&&T.clientY===0||!T.clientX&&!T.touches)F=Math.round(O.width/2),z=Math.round(O.height/2);else{const{clientX:W,clientY:j}=T.touches&&T.touches.length>0?T.touches[0]:T;F=Math.round(W-O.left),z=Math.round(j-O.top)}if(D)V=Math.sqrt((2*O.width**2+O.height**2)/3),V%2===0&&(V+=1);else{const W=Math.max(Math.abs((R?R.clientWidth:0)-F),F)*2+2,j=Math.max(Math.abs((R?R.clientHeight:0)-z),z)*2+2;V=Math.sqrt(W**2+j**2)}T!=null&&T.touches?g.current===null&&(g.current=()=>{b({pulsate:A,rippleX:F,rippleY:z,rippleSize:V,cb:I})},m.start(Umt,()=>{g.current&&(g.current(),g.current=null)})):b({pulsate:A,rippleX:F,rippleY:z,rippleSize:V,cb:I})},[s,b,m]),C=L.useCallback(()=>{w({},{pulsate:!0})},[w]),k=L.useCallback((T,N)=>{if(m.clear(),(T==null?void 0:T.type)==="touchend"&&g.current){g.current(),g.current=null,m.start(0,()=>{k(T,N)});return}g.current=null,u(I=>I.length>0?I.slice(1):I),d.current=N},[m]);return L.useImperativeHandle(n,()=>({pulsate:C,start:w,stop:k}),[C,w,k]),v.jsx(Hmt,{className:mt(Bo.root,a.root,i),ref:y,...o,children:v.jsx(ML,{component:null,exit:!0,children:l})})});function Xmt(t){return Or("MuiButtonBase",t)}const Ymt=_r("MuiButtonBase",["root","disabled","focusVisible"]),Qmt=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:s}=t,i=Vr({root:["root",e&&"disabled",n&&"focusVisible"]},Xmt,s);return n&&r&&(i.root+=` ${r}`),i},Zmt=tn("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Ymt.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),LC=L.forwardRef(function(e,n){const r=Dr({props:e,name:"MuiButtonBase"}),{action:s,centerRipple:a=!1,children:i,className:o,component:l="button",disabled:u=!1,disableRipple:c=!1,disableTouchRipple:d=!1,focusRipple:h=!1,focusVisibleClassName:m,LinkComponent:g="a",onBlur:y,onClick:b,onContextMenu:w,onDragLeave:C,onFocus:k,onFocusVisible:T,onKeyDown:N,onKeyUp:I,onMouseDown:A,onMouseLeave:D,onMouseUp:P,onTouchEnd:R,onTouchMove:O,onTouchStart:F,tabIndex:z=0,TouchRippleProps:V,touchRippleRef:W,type:j,...q}=r,Y=L.useRef(null),Q=Fmt(),H=_u(Q.ref,W),[ee,te]=L.useState(!1);u&&ee&&te(!1),L.useImperativeHandle(s,()=>({focusVisible:()=>{te(!0),Y.current.focus()}}),[]);const ne=Q.shouldMount&&!c&&!u;L.useEffect(()=>{ee&&h&&!c&&Q.pulsate()},[c,h,ee,Q]);const he=ic(Q,"start",A,d),Se=ic(Q,"stop",w,d),Ie=ic(Q,"stop",C,d),Qe=ic(Q,"stop",P,d),Ve=ic(Q,"stop",Be=>{ee&&Be.preventDefault(),D&&D(Be)},d),$e=ic(Q,"start",F,d),We=ic(Q,"stop",R,d),ze=ic(Q,"stop",O,d),ke=ic(Q,"stop",Be=>{TK(Be.target)||te(!1),y&&y(Be)},!1),et=Nm(Be=>{Y.current||(Y.current=Be.currentTarget),TK(Be.target)&&(te(!0),T&&T(Be)),k&&k(Be)}),Je=()=>{const Be=Y.current;return l&&l!=="button"&&!(Be.tagName==="A"&&Be.href)},Re=Nm(Be=>{h&&!Be.repeat&&ee&&Be.key===" "&&Q.stop(Be,()=>{Q.start(Be)}),Be.target===Be.currentTarget&&Je()&&Be.key===" "&&Be.preventDefault(),N&&N(Be),Be.target===Be.currentTarget&&Je()&&Be.key==="Enter"&&!u&&(Be.preventDefault(),b&&b(Be))}),Ke=Nm(Be=>{h&&Be.key===" "&&ee&&!Be.defaultPrevented&&Q.stop(Be,()=>{Q.pulsate(Be)}),I&&I(Be),b&&Be.target===Be.currentTarget&&Je()&&Be.key===" "&&!Be.defaultPrevented&&b(Be)});let xe=l;xe==="button"&&(q.href||q.to)&&(xe=g);const De={};xe==="button"?(De.type=j===void 0?"button":j,De.disabled=u):(!q.href&&!q.to&&(De.role="button"),u&&(De["aria-disabled"]=u));const at=_u(n,Y),Xe={...r,centerRipple:a,component:l,disabled:u,disableRipple:c,disableTouchRipple:d,focusRipple:h,tabIndex:z,focusVisible:ee},Nt=Qmt(Xe);return v.jsxs(Zmt,{as:xe,className:mt(Nt.root,o),ownerState:Xe,onBlur:ke,onClick:b,onContextMenu:Se,onFocus:et,onKeyDown:Re,onKeyUp:Ke,onMouseDown:he,onMouseLeave:Ve,onMouseUp:Qe,onDragLeave:Ie,onTouchEnd:We,onTouchMove:ze,onTouchStart:$e,ref:at,tabIndex:u?-1:z,type:j,...De,...q,children:[i,ne?v.jsx(Kmt,{ref:H,center:a,...V}):null]})});function ic(t,e,n,r=!1){return Nm(s=>(n&&n(s),r||t[e](s),!0))}function Jmt(t){return typeof t.main=="string"}function egt(t,e=[]){if(!Jmt(t))return!1;for(const n of e)if(!t.hasOwnProperty(n)||typeof t[n]!="string")return!1;return!0}function Xo(t=[]){return([,e])=>e&&egt(e,t)}function tgt(t){return Or("MuiCircularProgress",t)}_r("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const hd=44,mM=sf`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,gM=sf`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,ngt=typeof mM!="string"?jy`
        animation: ${mM} 1.4s linear infinite;
      `:null,rgt=typeof gM!="string"?jy`
        animation: ${gM} 1.4s ease-in-out infinite;
      `:null,sgt=t=>{const{classes:e,variant:n,color:r,disableShrink:s}=t,a={root:["root",n,`color${bt(r)}`],svg:["svg"],circle:["circle",`circle${bt(n)}`,s&&"circleDisableShrink"]};return Vr(a,tgt,e)},agt=tn("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${bt(n.color)}`]]}})(sa(({theme:t})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:ngt||{animation:`${mM} 1.4s linear infinite`}},...Object.entries(t.palette).filter(Xo()).map(([e])=>({props:{color:e},style:{color:(t.vars||t).palette[e].main}}))]}))),igt=tn("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),ogt=tn("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${bt(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(sa(({theme:t})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:rgt||{animation:`${gM} 1.4s ease-in-out infinite`}}]}))),lgt=L.forwardRef(function(e,n){const r=Dr({props:e,name:"MuiCircularProgress"}),{className:s,color:a="primary",disableShrink:i=!1,size:o=40,style:l,thickness:u=3.6,value:c=0,variant:d="indeterminate",...h}=r,m={...r,color:a,disableShrink:i,size:o,thickness:u,value:c,variant:d},g=sgt(m),y={},b={},w={};if(d==="determinate"){const C=2*Math.PI*((hd-u)/2);y.strokeDasharray=C.toFixed(3),w["aria-valuenow"]=Math.round(c),y.strokeDashoffset=`${((100-c)/100*C).toFixed(3)}px`,b.transform="rotate(-90deg)"}return v.jsx(agt,{className:mt(g.root,s),style:{width:o,height:o,...b,...l},ownerState:m,ref:n,role:"progressbar",...w,...h,children:v.jsx(igt,{className:g.svg,ownerState:m,viewBox:`${hd/2} ${hd/2} ${hd} ${hd}`,children:v.jsx(ogt,{className:g.circle,style:y,ownerState:m,cx:hd,cy:hd,r:(hd-u)/2,fill:"none",strokeWidth:u})})})});function ugt(t){return Or("MuiTypography",t)}const $K=_r("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),cgt={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},dgt=wmt(),fgt=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:s,variant:a,classes:i}=t,o={root:["root",a,t.align!=="inherit"&&`align${bt(e)}`,n&&"gutterBottom",r&&"noWrap",s&&"paragraph"]};return Vr(o,ugt,i)},hgt=tn("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${bt(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(sa(({theme:t})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter(([n,r])=>n!=="inherit"&&r&&typeof r=="object").map(([n,r])=>({props:{variant:n},style:r})),...Object.entries(t.palette).filter(Xo()).map(([n])=>({props:{color:n},style:{color:(t.vars||t).palette[n].main}})),...Object.entries(((e=t.palette)==null?void 0:e.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${bt(n)}`},style:{color:(t.vars||t).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),IK={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},pc=L.forwardRef(function(e,n){const{color:r,...s}=Dr({props:e,name:"MuiTypography"}),a=!cgt[r],i=dgt({...s,...a&&{color:r}}),{align:o="inherit",className:l,component:u,gutterBottom:c=!1,noWrap:d=!1,paragraph:h=!1,variant:m="body1",variantMapping:g=IK,...y}=i,b={...i,align:o,color:r,className:l,component:u,gutterBottom:c,noWrap:d,paragraph:h,variant:m,variantMapping:g},w=u||(h?"p":g[m]||IK[m])||"span",C=fgt(b);return v.jsx(hgt,{as:w,ref:n,className:mt(C.root,l),...y,ownerState:b,style:{...o!=="inherit"&&{"--Typography-textAlign":o},...y.style}})});function dF(t){var e;return parseInt(L.version,10)>=19?((e=t==null?void 0:t.props)==null?void 0:e.ref)||null:(t==null?void 0:t.ref)||null}function pgt(t){return typeof t=="function"?t():t}const mgt=L.forwardRef(function(e,n){const{children:r,container:s,disablePortal:a=!1}=e,[i,o]=L.useState(null),l=_u(L.isValidElement(r)?dF(r):null,n);if(DC(()=>{a||o(pgt(s)||document.body)},[s,a]),DC(()=>{if(i&&!a)return vK(n,i),()=>{vK(n,null)}},[n,i,a]),a){if(L.isValidElement(r)){const u={ref:l};return L.cloneElement(r,u)}return r}return i&&bX.createPortal(r,i)}),ggt=Nmt(v.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}));function ygt(t){return Or("MuiChip",t)}const pn=_r("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),bgt=t=>{const{classes:e,disabled:n,size:r,color:s,iconColor:a,onDelete:i,clickable:o,variant:l}=t,u={root:["root",l,n&&"disabled",`size${bt(r)}`,`color${bt(s)}`,o&&"clickable",o&&`clickableColor${bt(s)}`,i&&"deletable",i&&`deletableColor${bt(s)}`,`${l}${bt(s)}`],label:["label",`label${bt(r)}`],avatar:["avatar",`avatar${bt(r)}`,`avatarColor${bt(s)}`],icon:["icon",`icon${bt(r)}`,`iconColor${bt(a)}`],deleteIcon:["deleteIcon",`deleteIcon${bt(r)}`,`deleteIconColor${bt(s)}`,`deleteIcon${bt(l)}Color${bt(s)}`]};return Vr(u,ygt,e)},xgt=tn("div",{name:"MuiChip",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{color:r,iconColor:s,clickable:a,onDelete:i,size:o,variant:l}=n;return[{[`& .${pn.avatar}`]:e.avatar},{[`& .${pn.avatar}`]:e[`avatar${bt(o)}`]},{[`& .${pn.avatar}`]:e[`avatarColor${bt(r)}`]},{[`& .${pn.icon}`]:e.icon},{[`& .${pn.icon}`]:e[`icon${bt(o)}`]},{[`& .${pn.icon}`]:e[`iconColor${bt(s)}`]},{[`& .${pn.deleteIcon}`]:e.deleteIcon},{[`& .${pn.deleteIcon}`]:e[`deleteIcon${bt(o)}`]},{[`& .${pn.deleteIcon}`]:e[`deleteIconColor${bt(r)}`]},{[`& .${pn.deleteIcon}`]:e[`deleteIcon${bt(l)}Color${bt(r)}`]},e.root,e[`size${bt(o)}`],e[`color${bt(r)}`],a&&e.clickable,a&&r!=="default"&&e[`clickableColor${bt(r)})`],i&&e.deletable,i&&r!=="default"&&e[`deletableColor${bt(r)}`],e[l],e[`${l}${bt(r)}`]]}})(sa(({theme:t})=>{const e=t.palette.mode==="light"?t.palette.grey[700]:t.palette.grey[300];return{maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${pn.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${pn.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:e,fontSize:t.typography.pxToRem(12)},[`& .${pn.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${pn.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${pn.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${pn.icon}`]:{marginLeft:5,marginRight:-6},[`& .${pn.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.26)`:jr(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.4)`:jr(t.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${pn.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${pn.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(t.palette).filter(Xo(["contrastText"])).map(([n])=>({props:{color:n},style:{backgroundColor:(t.vars||t).palette[n].main,color:(t.vars||t).palette[n].contrastText,[`& .${pn.deleteIcon}`]:{color:t.vars?`rgba(${t.vars.palette[n].contrastTextChannel} / 0.7)`:jr(t.palette[n].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].contrastText}}}})),{props:n=>n.iconColor===n.color,style:{[`& .${pn.icon}`]:{color:t.vars?t.vars.palette.Chip.defaultIconColor:e}}},{props:n=>n.iconColor===n.color&&n.color!=="default",style:{[`& .${pn.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${pn.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:jr(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}}},...Object.entries(t.palette).filter(Xo(["dark"])).map(([n])=>({props:{color:n,onDelete:!0},style:{[`&.${pn.focusVisible}`]:{background:(t.vars||t).palette[n].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:jr(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},[`&.${pn.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:jr(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}}},...Object.entries(t.palette).filter(Xo(["dark"])).map(([n])=>({props:{color:n,clickable:!0},style:{[`&:hover, &.${pn.focusVisible}`]:{backgroundColor:(t.vars||t).palette[n].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${pn.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${pn.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${pn.avatar}`]:{marginLeft:4},[`& .${pn.avatarSmall}`]:{marginLeft:2},[`& .${pn.icon}`]:{marginLeft:4},[`& .${pn.iconSmall}`]:{marginLeft:2},[`& .${pn.deleteIcon}`]:{marginRight:5},[`& .${pn.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(t.palette).filter(Xo()).map(([n])=>({props:{variant:"outlined",color:n},style:{color:(t.vars||t).palette[n].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[n].mainChannel} / 0.7)`:jr(t.palette[n].main,.7)}`,[`&.${pn.clickable}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:jr(t.palette[n].main,t.palette.action.hoverOpacity)},[`&.${pn.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[n].mainChannel} / ${t.vars.palette.action.focusOpacity})`:jr(t.palette[n].main,t.palette.action.focusOpacity)},[`& .${pn.deleteIcon}`]:{color:t.vars?`rgba(${t.vars.palette[n].mainChannel} / 0.7)`:jr(t.palette[n].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[n].main}}}}))]}})),vgt=tn("span",{name:"MuiChip",slot:"Label",overridesResolver:(t,e)=>{const{ownerState:n}=t,{size:r}=n;return[e.label,e[`label${bt(r)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function EK(t){return t.key==="Backspace"||t.key==="Delete"}const wgt=L.forwardRef(function(e,n){const r=Dr({props:e,name:"MuiChip"}),{avatar:s,className:a,clickable:i,color:o="default",component:l,deleteIcon:u,disabled:c=!1,icon:d,label:h,onClick:m,onDelete:g,onKeyDown:y,onKeyUp:b,size:w="medium",variant:C="filled",tabIndex:k,skipFocusWhenDisabled:T=!1,...N}=r,I=L.useRef(null),A=_u(I,n),D=Q=>{Q.stopPropagation(),g&&g(Q)},P=Q=>{Q.currentTarget===Q.target&&EK(Q)&&Q.preventDefault(),y&&y(Q)},R=Q=>{Q.currentTarget===Q.target&&g&&EK(Q)&&g(Q),b&&b(Q)},O=i!==!1&&m?!0:i,F=O||g?LC:l||"div",z={...r,component:F,disabled:c,size:w,color:o,iconColor:L.isValidElement(d)&&d.props.color||o,onDelete:!!g,clickable:O,variant:C},V=bgt(z),W=F===LC?{component:l||"div",focusVisibleClassName:V.focusVisible,...g&&{disableRipple:!0}}:{};let j=null;g&&(j=u&&L.isValidElement(u)?L.cloneElement(u,{className:mt(u.props.className,V.deleteIcon),onClick:D}):v.jsx(ggt,{className:V.deleteIcon,onClick:D}));let q=null;s&&L.isValidElement(s)&&(q=L.cloneElement(s,{className:mt(V.avatar,s.props.className)}));let Y=null;return d&&L.isValidElement(d)&&(Y=L.cloneElement(d,{className:mt(V.icon,d.props.className)})),v.jsxs(xgt,{as:F,className:mt(V.root,a),disabled:O&&c?!0:void 0,onClick:m,onKeyDown:P,onKeyUp:R,ref:A,tabIndex:T&&c?-1:k,ownerState:z,...W,...N,children:[q||Y,v.jsx(vgt,{className:V.label,ownerState:z,children:h}),j]})});function AK(t){return typeof t=="string"}const Sgt={entering:{opacity:1},entered:{opacity:1}},yM=L.forwardRef(function(e,n){const r=i$(),s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:a,appear:i=!0,children:o,easing:l,in:u,onEnter:c,onEntered:d,onEntering:h,onExit:m,onExited:g,onExiting:y,style:b,timeout:w=s,TransitionComponent:C=Uc,...k}=e,T=L.useRef(null),N=_u(T,dF(o),n),I=V=>W=>{if(V){const j=T.current;W===void 0?V(j):V(j,W)}},A=I(h),D=I((V,W)=>{Rmt(V);const j=kK({style:b,timeout:w,easing:l},{mode:"enter"});V.style.webkitTransition=r.transitions.create("opacity",j),V.style.transition=r.transitions.create("opacity",j),c&&c(V,W)}),P=I(d),R=I(y),O=I(V=>{const W=kK({style:b,timeout:w,easing:l},{mode:"exit"});V.style.webkitTransition=r.transitions.create("opacity",W),V.style.transition=r.transitions.create("opacity",W),m&&m(V)}),F=I(g),z=V=>{a&&a(T.current,V)};return v.jsx(C,{appear:i,in:u,nodeRef:T,onEnter:D,onEntered:P,onEntering:A,onExit:O,onExited:F,onExiting:R,addEndListener:z,timeout:w,...k,children:(V,{ownerState:W,...j})=>L.cloneElement(o,{style:{opacity:0,visibility:V==="exited"&&!u?"hidden":void 0,...Sgt[V],...b,...o.props.style},ref:N,...j})})});function Cgt(t){return Or("MuiBackdrop",t)}_r("MuiBackdrop",["root","invisible"]);const kgt=t=>{const{classes:e,invisible:n}=t;return Vr({root:["root",n&&"invisible"]},Cgt,e)},Ngt=tn("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Poe=L.forwardRef(function(e,n){const r=Dr({props:e,name:"MuiBackdrop"}),{children:s,className:a,component:i="div",invisible:o=!1,open:l,components:u={},componentsProps:c={},slotProps:d={},slots:h={},TransitionComponent:m,transitionDuration:g,...y}=r,b={...r,component:i,invisible:o},w=kgt(b),C={transition:m,root:u.Root,...h},k={...c,...d},T={slots:C,slotProps:k},[N,I]=Wo("root",{elementType:Ngt,externalForwardedProps:T,className:mt(w.root,a),ownerState:b}),[A,D]=Wo("transition",{elementType:yM,externalForwardedProps:T,ownerState:b});return v.jsx(A,{in:l,timeout:g,...y,...D,children:v.jsx(N,{"aria-hidden":!0,...I,classes:w,ref:n,children:s})})}),Tgt=_r("MuiBox",["root"]),$gt=Aoe(),bS=ept({themeId:KL,defaultTheme:$gt,defaultClassName:Tgt.root,generateClassName:xoe.generate});function Igt(t){return Or("MuiButton",t)}const Rf=_r("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),Egt=L.createContext({}),Agt=L.createContext(void 0),Rgt=t=>{const{color:e,disableElevation:n,fullWidth:r,size:s,variant:a,loading:i,loadingPosition:o,classes:l}=t,u={root:["root",i&&"loading",a,`${a}${bt(e)}`,`size${bt(s)}`,`${a}Size${bt(s)}`,`color${bt(e)}`,n&&"disableElevation",r&&"fullWidth",i&&`loadingPosition${bt(o)}`],startIcon:["icon","startIcon",`iconSize${bt(s)}`],endIcon:["icon","endIcon",`iconSize${bt(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},c=Vr(u,Igt,l);return{...l,...c}},Moe=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],Ogt=tn(LC,{shouldForwardProp:t=>lF(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${bt(n.color)}`],e[`size${bt(n.size)}`],e[`${n.variant}Size${bt(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth,n.loading&&e.loading]}})(sa(({theme:t})=>{const e=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],n=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return{...t.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Rf.disabled}`]:{color:(t.vars||t).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(t.vars||t).shadows[2],"&:hover":{boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2]}},"&:active":{boxShadow:(t.vars||t).shadows[8]},[`&.${Rf.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]},[`&.${Rf.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Rf.disabled}`]:{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(t.palette).filter(Xo()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(t.vars||t).palette[r].main,"--variant-outlinedColor":(t.vars||t).palette[r].main,"--variant-outlinedBorder":t.vars?`rgba(${t.vars.palette[r].mainChannel} / 0.5)`:jr(t.palette[r].main,.5),"--variant-containedColor":(t.vars||t).palette[r].contrastText,"--variant-containedBg":(t.vars||t).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(t.vars||t).palette[r].dark,"--variant-textBg":t.vars?`rgba(${t.vars.palette[r].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:jr(t.palette[r].main,t.palette.action.hoverOpacity),"--variant-outlinedBorder":(t.vars||t).palette[r].main,"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette[r].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:jr(t.palette[r].main,t.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedBg:e,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":t.vars?t.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:jr(t.palette.text.primary,t.palette.action.hoverOpacity),"--variant-outlinedBg":t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:jr(t.palette.text.primary,t.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:t.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:t.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:t.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Rf.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Rf.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),[`&.${Rf.loading}`]:{color:"transparent"}}}]}})),_gt=tn("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,n.loading&&e.startIconLoadingStart,e[`iconSize${bt(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...Moe]})),Dgt=tn("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,n.loading&&e.endIconLoadingEnd,e[`iconSize${bt(n.size)}`]]}})(({theme:t})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:t.transitions.create(["opacity"],{duration:t.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...Moe]})),Pgt=tn("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:t})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),RK=tn("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),OK=L.forwardRef(function(e,n){const r=L.useContext(Egt),s=L.useContext(Agt),a=Dx(r,e),i=Dr({props:a,name:"MuiButton"}),{children:o,color:l="primary",component:u="button",className:c,disabled:d=!1,disableElevation:h=!1,disableFocusRipple:m=!1,endIcon:g,focusVisibleClassName:y,fullWidth:b=!1,id:w,loading:C=null,loadingIndicator:k,loadingPosition:T="center",size:N="medium",startIcon:I,type:A,variant:D="text",...P}=i,R=Ooe(w),O=k??v.jsx(lgt,{"aria-labelledby":R,color:"inherit",size:16}),F={...i,color:l,component:u,disabled:d,disableElevation:h,disableFocusRipple:m,fullWidth:b,loading:C,loadingIndicator:O,loadingPosition:T,size:N,type:A,variant:D},z=Rgt(F),V=(I||C&&T==="start")&&v.jsx(_gt,{className:z.startIcon,ownerState:F,children:I||v.jsx(RK,{className:z.loadingIconPlaceholder,ownerState:F})}),W=(g||C&&T==="end")&&v.jsx(Dgt,{className:z.endIcon,ownerState:F,children:g||v.jsx(RK,{className:z.loadingIconPlaceholder,ownerState:F})}),j=s||"",q=typeof C=="boolean"?v.jsx("span",{className:z.loadingWrapper,style:{display:"contents"},children:C&&v.jsx(Pgt,{className:z.loadingIndicator,ownerState:F,children:O})}):null;return v.jsxs(Ogt,{ownerState:F,className:mt(r.className,z.root,c,j),component:u,disabled:d||C,focusRipple:!m,focusVisibleClassName:mt(z.focusVisible,y),ref:n,type:A,id:C?R:w,...P,classes:z,children:[V,T!=="end"&&q,o,T==="end"&&q,W]})});function Mgt(t){return Or("MuiCard",t)}_r("MuiCard",["root"]);const jgt=t=>{const{classes:e}=t;return Vr({root:["root"]},Mgt,e)},Lgt=tn(cF,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),Fgt=L.forwardRef(function(e,n){const r=Dr({props:e,name:"MuiCard"}),{className:s,raised:a=!1,...i}=r,o={...r,raised:a},l=jgt(o);return v.jsx(Lgt,{className:mt(l.root,s),elevation:a?8:void 0,ref:n,ownerState:o,...i})});function zgt(t){return Or("MuiCardContent",t)}_r("MuiCardContent",["root"]);const Bgt=t=>{const{classes:e}=t;return Vr({root:["root"]},zgt,e)},Ugt=tn("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),Vgt=L.forwardRef(function(e,n){const r=Dr({props:e,name:"MuiCardContent"}),{className:s,component:a="div",...i}=r,o={...r,component:a},l=Bgt(o);return v.jsx(Ugt,{as:a,className:mt(l.root,s),ownerState:o,ref:n,...i})});function Wgt(t=window){const e=t.document.documentElement.clientWidth;return t.innerWidth-e}function Ggt(t){const e=_h(t);return e.body===t?MC(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function wb(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function _K(t){return parseInt(MC(t).getComputedStyle(t).paddingRight,10)||0}function Hgt(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(t.tagName),r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function DK(t,e,n,r,s){const a=[e,n,...r];[].forEach.call(t.children,i=>{const o=!a.includes(i),l=!Hgt(i);o&&l&&wb(i,s)})}function v3(t,e){let n=-1;return t.some((r,s)=>e(r)?(n=s,!0):!1),n}function qgt(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(Ggt(r)){const i=Wgt(MC(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${_K(r)+i}px`;const o=_h(r).querySelectorAll(".mui-fixed");[].forEach.call(o,l=>{n.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${_K(l)+i}px`})}let a;if(r.parentNode instanceof DocumentFragment)a=_h(r).body;else{const i=r.parentElement,o=MC(r);a=(i==null?void 0:i.nodeName)==="HTML"&&o.getComputedStyle(i).overflowY==="scroll"?i:r}n.push({value:a.style.overflow,property:"overflow",el:a},{value:a.style.overflowX,property:"overflow-x",el:a},{value:a.style.overflowY,property:"overflow-y",el:a}),a.style.overflow="hidden"}return()=>{n.forEach(({value:a,el:i,property:o})=>{a?i.style.setProperty(o,a):i.style.removeProperty(o)})}}function Kgt(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class Xgt{constructor(){this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&wb(e.modalRef,!1);const s=Kgt(n);DK(n,e.mount,e.modalRef,s,!0);const a=v3(this.containers,i=>i.container===n);return a!==-1?(this.containers[a].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:s}),r)}mount(e,n){const r=v3(this.containers,a=>a.modals.includes(e)),s=this.containers[r];s.restore||(s.restore=qgt(s,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const s=v3(this.containers,i=>i.modals.includes(e)),a=this.containers[s];if(a.modals.splice(a.modals.indexOf(e),1),this.modals.splice(r,1),a.modals.length===0)a.restore&&a.restore(),e.modalRef&&wb(e.modalRef,n),DK(a.container,e.mount,e.modalRef,a.hiddenSiblings,!1),this.containers.splice(s,1);else{const i=a.modals[a.modals.length-1];i.modalRef&&wb(i.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const Ygt=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Qgt(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function Zgt(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function Jgt(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||Zgt(t))}function eyt(t){const e=[],n=[];return Array.from(t.querySelectorAll(Ygt)).forEach((r,s)=>{const a=Qgt(r);a===-1||!Jgt(r)||(a===0?e.push(r):n.push({documentOrder:s,tabIndex:a,node:r}))}),n.sort((r,s)=>r.tabIndex===s.tabIndex?r.documentOrder-s.documentOrder:r.tabIndex-s.tabIndex).map(r=>r.node).concat(e)}function tyt(){return!0}function nyt(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:s=!1,getTabbable:a=eyt,isEnabled:i=tyt,open:o}=t,l=L.useRef(!1),u=L.useRef(null),c=L.useRef(null),d=L.useRef(null),h=L.useRef(null),m=L.useRef(!1),g=L.useRef(null),y=_u(dF(e),g),b=L.useRef(null);L.useEffect(()=>{!o||!g.current||(m.current=!n)},[n,o]),L.useEffect(()=>{if(!o||!g.current)return;const k=_h(g.current);return g.current.contains(k.activeElement)||(g.current.hasAttribute("tabIndex")||g.current.setAttribute("tabIndex","-1"),m.current&&g.current.focus()),()=>{s||(d.current&&d.current.focus&&(l.current=!0,d.current.focus()),d.current=null)}},[o]),L.useEffect(()=>{if(!o||!g.current)return;const k=_h(g.current),T=A=>{b.current=A,!(r||!i()||A.key!=="Tab")&&k.activeElement===g.current&&A.shiftKey&&(l.current=!0,c.current&&c.current.focus())},N=()=>{var P,R;const A=g.current;if(A===null)return;if(!k.hasFocus()||!i()||l.current){l.current=!1;return}if(A.contains(k.activeElement)||r&&k.activeElement!==u.current&&k.activeElement!==c.current)return;if(k.activeElement!==h.current)h.current=null;else if(h.current!==null)return;if(!m.current)return;let D=[];if((k.activeElement===u.current||k.activeElement===c.current)&&(D=a(g.current)),D.length>0){const O=!!((P=b.current)!=null&&P.shiftKey&&((R=b.current)==null?void 0:R.key)==="Tab"),F=D[0],z=D[D.length-1];typeof F!="string"&&typeof z!="string"&&(O?z.focus():F.focus())}else A.focus()};k.addEventListener("focusin",N),k.addEventListener("keydown",T,!0);const I=setInterval(()=>{k.activeElement&&k.activeElement.tagName==="BODY"&&N()},50);return()=>{clearInterval(I),k.removeEventListener("focusin",N),k.removeEventListener("keydown",T,!0)}},[n,r,s,i,o,a]);const w=k=>{d.current===null&&(d.current=k.relatedTarget),m.current=!0,h.current=k.target;const T=e.props.onFocus;T&&T(k)},C=k=>{d.current===null&&(d.current=k.relatedTarget),m.current=!0};return v.jsxs(L.Fragment,{children:[v.jsx("div",{tabIndex:o?0:-1,onFocus:C,ref:u,"data-testid":"sentinelStart"}),L.cloneElement(e,{ref:y,onFocus:w}),v.jsx("div",{tabIndex:o?0:-1,onFocus:C,ref:c,"data-testid":"sentinelEnd"})]})}function ryt(t){return typeof t=="function"?t():t}function syt(t){return t?t.props.hasOwnProperty("in"):!1}const PK=()=>{},xS=new Xgt;function ayt(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,closeAfterTransition:s=!1,onTransitionEnter:a,onTransitionExited:i,children:o,onClose:l,open:u,rootRef:c}=t,d=L.useRef({}),h=L.useRef(null),m=L.useRef(null),g=_u(m,c),[y,b]=L.useState(!u),w=syt(o);let C=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(C=!1);const k=()=>_h(h.current),T=()=>(d.current.modalRef=m.current,d.current.mount=h.current,d.current),N=()=>{xS.mount(T(),{disableScrollLock:r}),m.current&&(m.current.scrollTop=0)},I=Nm(()=>{const W=ryt(e)||k().body;xS.add(T(),W),m.current&&N()}),A=()=>xS.isTopModal(T()),D=Nm(W=>{h.current=W,W&&(u&&A()?N():m.current&&wb(m.current,C))}),P=L.useCallback(()=>{xS.remove(T(),C)},[C]);L.useEffect(()=>()=>{P()},[P]),L.useEffect(()=>{u?I():(!w||!s)&&P()},[u,P,w,s,I]);const R=W=>j=>{var q;(q=W.onKeyDown)==null||q.call(W,j),!(j.key!=="Escape"||j.which===229||!A())&&(n||(j.stopPropagation(),l&&l(j,"escapeKeyDown")))},O=W=>j=>{var q;(q=W.onClick)==null||q.call(W,j),j.target===j.currentTarget&&l&&l(j,"backdropClick")};return{getRootProps:(W={})=>{const j=Doe(t);delete j.onTransitionEnter,delete j.onTransitionExited;const q={...j,...W};return{role:"presentation",...q,onKeyDown:R(q),ref:g}},getBackdropProps:(W={})=>{const j=W;return{"aria-hidden":!0,...j,onClick:O(j),open:u}},getTransitionProps:()=>{const W=()=>{b(!1),a&&a()},j=()=>{b(!0),i&&i(),s&&P()};return{onEnter:xK(W,(o==null?void 0:o.props.onEnter)??PK),onExited:xK(j,(o==null?void 0:o.props.onExited)??PK)}},rootRef:g,portalRef:D,isTopModal:A,exited:y,hasTransition:w}}function iyt(t){return Or("MuiModal",t)}_r("MuiModal",["root","hidden","backdrop"]);const oyt=t=>{const{open:e,exited:n,classes:r}=t;return Vr({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},iyt,r)},lyt=tn("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(sa(({theme:t})=>({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),uyt=tn(Poe,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),cyt=L.forwardRef(function(e,n){const r=Dr({name:"MuiModal",props:e}),{BackdropComponent:s=uyt,BackdropProps:a,classes:i,className:o,closeAfterTransition:l=!1,children:u,container:c,component:d,components:h={},componentsProps:m={},disableAutoFocus:g=!1,disableEnforceFocus:y=!1,disableEscapeKeyDown:b=!1,disablePortal:w=!1,disableRestoreFocus:C=!1,disableScrollLock:k=!1,hideBackdrop:T=!1,keepMounted:N=!1,onClose:I,onTransitionEnter:A,onTransitionExited:D,open:P,slotProps:R={},slots:O={},theme:F,...z}=r,V={...r,closeAfterTransition:l,disableAutoFocus:g,disableEnforceFocus:y,disableEscapeKeyDown:b,disablePortal:w,disableRestoreFocus:C,disableScrollLock:k,hideBackdrop:T,keepMounted:N},{getRootProps:W,getBackdropProps:j,getTransitionProps:q,portalRef:Y,isTopModal:Q,exited:H,hasTransition:ee}=ayt({...V,rootRef:n}),te={...V,exited:H},ne=oyt(te),he={};if(u.props.tabIndex===void 0&&(he.tabIndex="-1"),ee){const{onEnter:We,onExited:ze}=q();he.onEnter=We,he.onExited=ze}const Se={slots:{root:h.Root,backdrop:h.Backdrop,...O},slotProps:{...m,...R}},[Ie,Qe]=Wo("root",{ref:n,elementType:lyt,externalForwardedProps:{...Se,...z,component:d},getSlotProps:W,ownerState:te,className:mt(o,ne==null?void 0:ne.root,!te.open&&te.exited&&(ne==null?void 0:ne.hidden))}),[Ve,$e]=Wo("backdrop",{ref:a==null?void 0:a.ref,elementType:s,externalForwardedProps:Se,shouldForwardComponentProp:!0,additionalProps:a,getSlotProps:We=>j({...We,onClick:ze=>{We!=null&&We.onClick&&We.onClick(ze)}}),className:mt(a==null?void 0:a.className,ne==null?void 0:ne.backdrop),ownerState:te});return!N&&!P&&(!ee||H)?null:v.jsx(mgt,{ref:Y,container:c,disablePortal:w,children:v.jsxs(Ie,{...Qe,children:[!T&&s?v.jsx(Ve,{...$e}):null,v.jsx(nyt,{disableEnforceFocus:y,disableAutoFocus:g,disableRestoreFocus:C,isEnabled:Q,open:P,children:L.cloneElement(u,he)})]})})});function dyt(t){return Or("MuiDialog",t)}const w3=_r("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),joe=L.createContext({}),fyt=tn(Poe,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),hyt=t=>{const{classes:e,scroll:n,maxWidth:r,fullWidth:s,fullScreen:a}=t,i={root:["root"],container:["container",`scroll${bt(n)}`],paper:["paper",`paperScroll${bt(n)}`,`paperWidth${bt(String(r))}`,s&&"paperFullWidth",a&&"paperFullScreen"]};return Vr(i,dyt,e)},pyt=tn(cyt,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),myt=tn("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.container,e[`scroll${bt(n.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),gyt=tn(cF,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`scrollPaper${bt(n.scroll)}`],e[`paperWidth${bt(String(n.maxWidth))}`],n.fullWidth&&e.paperFullWidth,n.fullScreen&&e.paperFullScreen]}})(sa(({theme:t})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${w3.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter(e=>e!=="xs").map(e=>({props:{maxWidth:e},style:{maxWidth:`${t.breakpoints.values[e]}${t.breakpoints.unit}`,[`&.${w3.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${w3.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),yyt=L.forwardRef(function(e,n){const r=Dr({props:e,name:"MuiDialog"}),s=i$(),a={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{"aria-describedby":i,"aria-labelledby":o,"aria-modal":l=!0,BackdropComponent:u,BackdropProps:c,children:d,className:h,disableEscapeKeyDown:m=!1,fullScreen:g=!1,fullWidth:y=!1,maxWidth:b="sm",onClick:w,onClose:C,open:k,PaperComponent:T=cF,PaperProps:N={},scroll:I="paper",slots:A={},slotProps:D={},TransitionComponent:P=yM,transitionDuration:R=a,TransitionProps:O,...F}=r,z={...r,disableEscapeKeyDown:m,fullScreen:g,fullWidth:y,maxWidth:b,scroll:I},V=hyt(z),W=L.useRef(),j=et=>{W.current=et.target===et.currentTarget},q=et=>{w&&w(et),W.current&&(W.current=null,C&&C(et,"backdropClick"))},Y=Ooe(o),Q=L.useMemo(()=>({titleId:Y}),[Y]),H={transition:P,...A},ee={transition:O,paper:N,backdrop:c,...D},te={slots:H,slotProps:ee},[ne,he]=Wo("root",{elementType:pyt,shouldForwardComponentProp:!0,externalForwardedProps:te,ownerState:z,className:mt(V.root,h),ref:n}),[Se,Ie]=Wo("backdrop",{elementType:fyt,shouldForwardComponentProp:!0,externalForwardedProps:te,ownerState:z}),[Qe,Ve]=Wo("paper",{elementType:gyt,shouldForwardComponentProp:!0,externalForwardedProps:te,ownerState:z,className:mt(V.paper,N.className)}),[$e,We]=Wo("container",{elementType:myt,externalForwardedProps:te,ownerState:z,className:V.container}),[ze,ke]=Wo("transition",{elementType:yM,externalForwardedProps:te,ownerState:z,additionalProps:{appear:!0,in:k,timeout:R,role:"presentation"}});return v.jsx(ne,{closeAfterTransition:!0,slots:{backdrop:Se},slotProps:{backdrop:{transitionDuration:R,as:u,...Ie}},disableEscapeKeyDown:m,onClose:C,open:k,onClick:q,...he,...F,children:v.jsx(ze,{...ke,children:v.jsx($e,{onMouseDown:j,...We,children:v.jsx(Qe,{as:T,elevation:24,role:"dialog","aria-describedby":i,"aria-labelledby":Y,"aria-modal":l,...Ve,children:v.jsx(joe.Provider,{value:Q,children:d})})})})})});function byt(t){return Or("MuiDialogActions",t)}_r("MuiDialogActions",["root","spacing"]);const xyt=t=>{const{classes:e,disableSpacing:n}=t;return Vr({root:["root",!n&&"spacing"]},byt,e)},vyt=tn("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:t})=>!t.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),wyt=L.forwardRef(function(e,n){const r=Dr({props:e,name:"MuiDialogActions"}),{className:s,disableSpacing:a=!1,...i}=r,o={...r,disableSpacing:a},l=xyt(o);return v.jsx(vyt,{className:mt(l.root,s),ownerState:o,ref:n,...i})});function Syt(t){return Or("MuiDialogContent",t)}_r("MuiDialogContent",["root","dividers"]);function Cyt(t){return Or("MuiDialogTitle",t)}const kyt=_r("MuiDialogTitle",["root"]),Nyt=t=>{const{classes:e,dividers:n}=t;return Vr({root:["root",n&&"dividers"]},Syt,e)},Tyt=tn("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dividers&&e.dividers]}})(sa(({theme:t})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${kyt.root} + &`]:{paddingTop:0}}}]}))),$yt=L.forwardRef(function(e,n){const r=Dr({props:e,name:"MuiDialogContent"}),{className:s,dividers:a=!1,...i}=r,o={...r,dividers:a},l=Nyt(o);return v.jsx(Tyt,{className:mt(l.root,s),ownerState:o,ref:n,...i})}),Iyt=t=>{const{classes:e}=t;return Vr({root:["root"]},Cyt,e)},Eyt=tn(pc,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),Ayt=L.forwardRef(function(e,n){const r=Dr({props:e,name:"MuiDialogTitle"}),{className:s,id:a,...i}=r,o=r,l=Iyt(o),{titleId:u=a}=L.useContext(joe);return v.jsx(Eyt,{component:"h2",className:mt(l.root,s),ownerState:o,ref:n,variant:"h6",id:a??u,...i})});function Ryt(t){return Or("MuiDivider",t)}_r("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const Oyt=t=>{const{absolute:e,children:n,classes:r,flexItem:s,light:a,orientation:i,textAlign:o,variant:l}=t;return Vr({root:["root",e&&"absolute",l,a&&"light",i==="vertical"&&"vertical",s&&"flexItem",n&&"withChildren",n&&i==="vertical"&&"withChildrenVertical",o==="right"&&i!=="vertical"&&"textAlignRight",o==="left"&&i!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",i==="vertical"&&"wrapperVertical"]},Ryt,r)},_yt=tn("div",{name:"MuiDivider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.absolute&&e.absolute,e[n.variant],n.light&&e.light,n.orientation==="vertical"&&e.vertical,n.flexItem&&e.flexItem,n.children&&e.withChildren,n.children&&n.orientation==="vertical"&&e.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&e.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&e.textAlignLeft]}})(sa(({theme:t})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:t.vars?`rgba(${t.vars.palette.dividerChannel} / 0.08)`:jr(t.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:t.spacing(2),marginRight:t.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:t.spacing(1),marginBottom:t.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:e})=>!!e.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:e})=>e.children&&e.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:e})=>e.orientation==="vertical"&&e.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(t.vars||t).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:e})=>e.textAlign==="right"&&e.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:e})=>e.textAlign==="left"&&e.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),Dyt=tn("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.wrapper,n.orientation==="vertical"&&e.wrapperVertical]}})(sa(({theme:t})=>({display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`}}]}))),bM=L.forwardRef(function(e,n){const r=Dr({props:e,name:"MuiDivider"}),{absolute:s=!1,children:a,className:i,orientation:o="horizontal",component:l=a||o==="vertical"?"div":"hr",flexItem:u=!1,light:c=!1,role:d=l!=="hr"?"separator":void 0,textAlign:h="center",variant:m="fullWidth",...g}=r,y={...r,absolute:s,component:l,flexItem:u,light:c,orientation:o,role:d,textAlign:h,variant:m},b=Oyt(y);return v.jsx(_yt,{as:l,className:mt(b.root,i),role:d,ref:n,ownerState:y,"aria-orientation":d==="separator"&&(l!=="hr"||o==="vertical")?o:void 0,...g,children:a?v.jsx(Dyt,{className:b.wrapper,ownerState:y,children:a}):null})});bM&&(bM.muiSkipListHighlight=!0);const MK=Vpt({createStyledComponent:tn("div",{name:"MuiGrid",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.container&&e.container]}}),componentName:"MuiGrid",useThemeProps:t=>Dr({props:t,name:"MuiGrid"}),useTheme:i$});function Pyt(t){return Or("MuiLinearProgress",t)}_r("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","bar1","bar2","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const xM=4,vM=sf`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`,Myt=typeof vM!="string"?jy`
        animation: ${vM} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
      `:null,wM=sf`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`,jyt=typeof wM!="string"?jy`
        animation: ${wM} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
      `:null,SM=sf`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`,Lyt=typeof SM!="string"?jy`
        animation: ${SM} 3s infinite linear;
      `:null,Fyt=t=>{const{classes:e,variant:n,color:r}=t,s={root:["root",`color${bt(r)}`,n],dashed:["dashed",`dashedColor${bt(r)}`],bar1:["bar","bar1",`barColor${bt(r)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar","bar2",n!=="buffer"&&`barColor${bt(r)}`,n==="buffer"&&`color${bt(r)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return Vr(s,Pyt,e)},fF=(t,e)=>t.vars?t.vars.palette.LinearProgress[`${e}Bg`]:t.palette.mode==="light"?s$(t.palette[e].main,.62):r$(t.palette[e].main,.5),zyt=tn("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${bt(n.color)}`],e[n.variant]]}})(sa(({theme:t})=>({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(t.palette).filter(Xo()).map(([e])=>({props:{color:e},style:{backgroundColor:fF(t,e)}})),{props:({ownerState:e})=>e.color==="inherit"&&e.variant!=="buffer",style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}))),Byt=tn("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.dashed,e[`dashedColor${bt(n.color)}`]]}})(sa(({theme:t})=>({position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(t.palette).filter(Xo()).map(([e])=>{const n=fF(t,e);return{props:{color:e},style:{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`}}})]})),Lyt||{animation:`${SM} 3s infinite linear`}),Uyt=tn("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e.bar1,e[`barColor${bt(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar1Indeterminate,n.variant==="determinate"&&e.bar1Determinate,n.variant==="buffer"&&e.bar1Buffer]}})(sa(({theme:t})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(t.palette).filter(Xo()).map(([e])=>({props:{color:e},style:{backgroundColor:(t.vars||t).palette[e].main}})),{props:{variant:"determinate"},style:{transition:`transform .${xM}s linear`}},{props:{variant:"buffer"},style:{zIndex:1,transition:`transform .${xM}s linear`}},{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:{width:"auto"}},{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:Myt||{animation:`${vM} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`}}]}))),Vyt=tn("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e.bar2,e[`barColor${bt(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar2Indeterminate,n.variant==="buffer"&&e.bar2Buffer]}})(sa(({theme:t})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(t.palette).filter(Xo()).map(([e])=>({props:{color:e},style:{"--LinearProgressBar2-barColor":(t.vars||t).palette[e].main}})),{props:({ownerState:e})=>e.variant!=="buffer"&&e.color!=="inherit",style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:({ownerState:e})=>e.variant!=="buffer"&&e.color==="inherit",style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(t.palette).filter(Xo()).map(([e])=>({props:{color:e,variant:"buffer"},style:{backgroundColor:fF(t,e),transition:`transform .${xM}s linear`}})),{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:{width:"auto"}},{props:({ownerState:e})=>e.variant==="indeterminate"||e.variant==="query",style:jyt||{animation:`${wM} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`}}]}))),Wyt=L.forwardRef(function(e,n){const r=Dr({props:e,name:"MuiLinearProgress"}),{className:s,color:a="primary",value:i,valueBuffer:o,variant:l="indeterminate",...u}=r,c={...r,color:a,variant:l},d=Fyt(c),h=bpt(),m={},g={bar1:{},bar2:{}};if((l==="determinate"||l==="buffer")&&i!==void 0){m["aria-valuenow"]=Math.round(i),m["aria-valuemin"]=0,m["aria-valuemax"]=100;let y=i-100;h&&(y=-y),g.bar1.transform=`translateX(${y}%)`}if(l==="buffer"&&o!==void 0){let y=(o||0)-100;h&&(y=-y),g.bar2.transform=`translateX(${y}%)`}return v.jsxs(zyt,{className:mt(d.root,s),ownerState:c,role:"progressbar",...m,ref:n,...u,children:[l==="buffer"?v.jsx(Byt,{className:d.dashed,ownerState:c}):null,v.jsx(Uyt,{className:d.bar1,ownerState:c,style:g.bar1}),l==="determinate"?null:v.jsx(Vyt,{className:d.bar2,ownerState:c,style:g.bar2})]})}),$d=L.createContext({});function Gyt(t){return Or("MuiList",t)}_r("MuiList",["root","padding","dense","subheader"]);const Hyt=t=>{const{classes:e,disablePadding:n,dense:r,subheader:s}=t;return Vr({root:["root",!n&&"padding",r&&"dense",s&&"subheader"]},Gyt,e)},qyt=tn("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>t.subheader,style:{paddingTop:0}}]}),Kyt=L.forwardRef(function(e,n){const r=Dr({props:e,name:"MuiList"}),{children:s,className:a,component:i="ul",dense:o=!1,disablePadding:l=!1,subheader:u,...c}=r,d=L.useMemo(()=>({dense:o}),[o]),h={...r,component:i,dense:o,disablePadding:l},m=Hyt(h);return v.jsx($d.Provider,{value:d,children:v.jsxs(qyt,{as:i,className:mt(m.root,a),ref:n,ownerState:h,...c,children:[u,s]})})});function Xyt(t){return Or("MuiListItem",t)}_r("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);function Yyt(t){return Or("MuiListItemButton",t)}const am=_r("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),Qyt=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters]},Zyt=t=>{const{alignItems:e,classes:n,dense:r,disabled:s,disableGutters:a,divider:i,selected:o}=t,u=Vr({root:["root",r&&"dense",!a&&"gutters",i&&"divider",s&&"disabled",e==="flex-start"&&"alignItemsFlexStart",o&&"selected"]},Yyt,n);return{...n,...u}},Jyt=tn(LC,{shouldForwardProp:t=>lF(t)||t==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:Qyt})(sa(({theme:t})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${am.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:jr(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${am.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:jr(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${am.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:jr(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:jr(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${am.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${am.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},variants:[{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.dense,style:{paddingTop:4,paddingBottom:4}}]}))),e0t=L.forwardRef(function(e,n){const r=Dr({props:e,name:"MuiListItemButton"}),{alignItems:s="center",autoFocus:a=!1,component:i="div",children:o,dense:l=!1,disableGutters:u=!1,divider:c=!1,focusVisibleClassName:d,selected:h=!1,className:m,...g}=r,y=L.useContext($d),b=L.useMemo(()=>({dense:l||y.dense||!1,alignItems:s,disableGutters:u}),[s,y.dense,l,u]),w=L.useRef(null);DC(()=>{a&&w.current&&w.current.focus()},[a]);const C={...r,alignItems:s,dense:b.dense,disableGutters:u,divider:c,selected:h},k=Zyt(C),T=_u(w,n);return v.jsx($d.Provider,{value:b,children:v.jsx(Jyt,{ref:T,href:g.href||g.to,component:(g.href||g.to)&&i==="div"?"button":i,focusVisibleClassName:mt(k.focusVisible,d),ownerState:C,className:mt(k.root,m),...g,classes:k,children:o})})});function t0t(t){return Or("MuiListItemSecondaryAction",t)}_r("MuiListItemSecondaryAction",["root","disableGutters"]);const n0t=t=>{const{disableGutters:e,classes:n}=t;return Vr({root:["root",e&&"disableGutters"]},t0t,n)},r0t=tn("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.disableGutters&&e.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:t})=>t.disableGutters,style:{right:0}}]}),Loe=L.forwardRef(function(e,n){const r=Dr({props:e,name:"MuiListItemSecondaryAction"}),{className:s,...a}=r,i=L.useContext($d),o={...r,disableGutters:i.disableGutters},l=n0t(o);return v.jsx(r0t,{className:mt(l.root,s),ownerState:o,ref:n,...a})});Loe.muiName="ListItemSecondaryAction";const s0t=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.alignItems==="flex-start"&&e.alignItemsFlexStart,n.divider&&e.divider,!n.disableGutters&&e.gutters,!n.disablePadding&&e.padding,n.hasSecondaryAction&&e.secondaryAction]},a0t=t=>{const{alignItems:e,classes:n,dense:r,disableGutters:s,disablePadding:a,divider:i,hasSecondaryAction:o}=t;return Vr({root:["root",r&&"dense",!s&&"gutters",!a&&"padding",i&&"divider",e==="flex-start"&&"alignItemsFlexStart",o&&"secondaryAction"],container:["container"]},Xyt,n)},i0t=tn("div",{name:"MuiListItem",slot:"Root",overridesResolver:s0t})(sa(({theme:t})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>!e.disablePadding&&e.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:e})=>!e.disablePadding&&!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>!e.disablePadding&&!!e.secondaryAction,style:{paddingRight:48}},{props:({ownerState:e})=>!!e.secondaryAction,style:{[`& > .${am.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>e.button,style:{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:e})=>e.hasSecondaryAction,style:{paddingRight:48}}]}))),o0t=tn("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),l0t=L.forwardRef(function(e,n){const r=Dr({props:e,name:"MuiListItem"}),{alignItems:s="center",children:a,className:i,component:o,components:l={},componentsProps:u={},ContainerComponent:c="li",ContainerProps:{className:d,...h}={},dense:m=!1,disableGutters:g=!1,disablePadding:y=!1,divider:b=!1,secondaryAction:w,slotProps:C={},slots:k={},...T}=r,N=L.useContext($d),I=L.useMemo(()=>({dense:m||N.dense||!1,alignItems:s,disableGutters:g}),[s,N.dense,m,g]),A=L.useRef(null),D=L.Children.toArray(a),P=D.length&&koe(D[D.length-1],["ListItemSecondaryAction"]),R={...r,alignItems:s,dense:I.dense,disableGutters:g,disablePadding:y,divider:b,hasSecondaryAction:P},O=a0t(R),F=_u(A,n),z=k.root||l.Root||i0t,V=C.root||u.root||{},W={className:mt(O.root,V.className,i),...T};let j=o||"li";return P?(j=!W.component&&!o?"div":j,c==="li"&&(j==="li"?j="div":W.component==="li"&&(W.component="div")),v.jsx($d.Provider,{value:I,children:v.jsxs(o0t,{as:c,className:mt(O.container,d),ref:F,ownerState:R,...h,children:[v.jsx(z,{...V,...!AK(z)&&{as:j,ownerState:{...R,...V.ownerState}},...W,children:D}),D.pop()]})})):v.jsx($d.Provider,{value:I,children:v.jsxs(z,{...V,as:j,ref:F,...!AK(z)&&{ownerState:{...R,...V.ownerState}},...W,children:[D,w&&v.jsx(Loe,{children:w})]})})});function u0t(t){return Or("MuiListItemText",t)}const vS=_r("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),c0t=t=>{const{classes:e,inset:n,primary:r,secondary:s,dense:a}=t;return Vr({root:["root",n&&"inset",a&&"dense",r&&s&&"multiline"],primary:["primary"],secondary:["secondary"]},u0t,e)},d0t=tn("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${vS.primary}`]:e.primary},{[`& .${vS.secondary}`]:e.secondary},e.root,n.inset&&e.inset,n.primary&&n.secondary&&e.multiline,n.dense&&e.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${$K.root}:where(& .${vS.primary})`]:{display:"block"},[`.${$K.root}:where(& .${vS.secondary})`]:{display:"block"},variants:[{props:({ownerState:t})=>t.primary&&t.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:t})=>t.inset,style:{paddingLeft:56}}]}),jK=L.forwardRef(function(e,n){const r=Dr({props:e,name:"MuiListItemText"}),{children:s,className:a,disableTypography:i=!1,inset:o=!1,primary:l,primaryTypographyProps:u,secondary:c,secondaryTypographyProps:d,slots:h={},slotProps:m={},...g}=r,{dense:y}=L.useContext($d);let b=l??s,w=c;const C={...r,disableTypography:i,inset:o,primary:!!b,secondary:!!w,dense:y},k=c0t(C),T={slots:h,slotProps:{primary:u,secondary:d,...m}},[N,I]=Wo("root",{className:mt(k.root,a),elementType:d0t,externalForwardedProps:{...T,...g},ownerState:C,ref:n}),[A,D]=Wo("primary",{className:k.primary,elementType:pc,externalForwardedProps:T,ownerState:C}),[P,R]=Wo("secondary",{className:k.secondary,elementType:pc,externalForwardedProps:T,ownerState:C});return b!=null&&b.type!==pc&&!i&&(b=v.jsx(A,{variant:y?"body2":"body1",component:D!=null&&D.variant?void 0:"span",...D,children:b})),w!=null&&w.type!==pc&&!i&&(w=v.jsx(P,{variant:"body2",color:"textSecondary",...R,children:w})),v.jsxs(N,{...I,children:[b,w]})}),f0t=()=>{const[t,e]=L.useState([]),[n,r]=L.useState({}),[s,a]=L.useState(!1),i=async()=>{try{const d={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}},h=await Ze.get("/api/goals",d);e(h.data)}catch(c){console.error("Hedefler alınamadı:",c)}},o=async()=>{try{const d={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}},h=await Ze.get("/api/goals/available",d);r(h.data)}catch(c){console.error("Kullanılabilir hedefler alınamadı:",c)}};L.useEffect(()=>{i(),o()},[]);const l=async(c,d)=>{try{const m={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}};await Ze.post("/api/goals",{type:c,goalIndex:d},m),a(!1),i(),o()}catch(h){console.error("Hedef oluşturulamadı:",h)}},u=c=>c.isCompleted?100:c.currentValue/c.targetValue*100;return v.jsxs(bS,{sx:{p:3},children:[v.jsxs(bS,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[v.jsx(pc,{variant:"h5",component:"h2",children:"Hedeflerim"}),v.jsx(OK,{variant:"contained",color:"primary",onClick:()=>a(!0),children:"Yeni Hedef Ekle"})]}),v.jsx(MK,{container:!0,spacing:3,children:t.map(c=>v.jsx(MK,{item:!0,xs:12,md:6,children:v.jsx(Fgt,{sx:{backgroundColor:"#181c23",color:"#f3f4f6",borderRadius:3,boxShadow:"0 2px 12px 0 #00000033",p:2,minHeight:180},children:v.jsxs(Vgt,{sx:{p:2},children:[v.jsxs(bS,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[v.jsx(pc,{variant:"h6",sx:{fontWeight:700,color:"#FFD600"},children:c.title}),v.jsx(wgt,{label:c.isCompleted?"Tamamlandı":"Devam Ediyor",sx:{backgroundColor:c.isCompleted?"#10b981":"#FFD600",color:c.isCompleted?"#fff":"#181c23",fontWeight:600,fontSize:14,px:1.5,py:.5,borderRadius:2,ml:2},size:"small"})]}),v.jsx(pc,{sx:{color:"#bdbdbd",mb:1,fontSize:16},children:c.description}),v.jsxs(bS,{sx:{mt:2},children:[v.jsxs(pc,{variant:"body2",sx:{color:"#bdbdbd",mb:1,fontWeight:500},children:["İlerleme: ",c.currentValue," / ",c.targetValue," ",c.unit]}),v.jsx(Wyt,{variant:"determinate",value:u(c),sx:{height:8,borderRadius:4,backgroundColor:"#23272f","& .MuiLinearProgress-bar":{backgroundColor:c.isCompleted?"#10b981":"#FFD600"}}})]})]})})},c._id))}),v.jsxs(yyt,{open:s,onClose:()=>a(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{backgroundColor:"#181c23",color:"#f3f4f6",borderRadius:3,boxShadow:24}},children:[v.jsx(Ayt,{sx:{color:"#FFD600",fontWeight:"bold",fontSize:22,background:"transparent"},children:"Yeni Hedef Seç"}),v.jsx($yt,{sx:{background:"transparent",p:0},children:v.jsx(Kyt,{sx:{background:"transparent"},children:Object.entries(n).map(([c,d])=>v.jsxs(pe.Fragment,{children:[v.jsx(l0t,{sx:{background:"transparent",py:2},disableGutters:!0,children:v.jsx(jK,{primary:v.jsx("span",{style:{color:"#FFD600",fontWeight:600,fontSize:18},children:c==="weight"?"Kilo Hedefleri":c==="workout_streak"?"Antrenman Hedefleri":c==="distance"?"Mesafe Hedefleri":"Güç Hedefleri"})})}),d.map((h,m)=>v.jsx(e0t,{onClick:()=>l(c,m),sx:{backgroundColor:"#23272f",color:"#f3f4f6",borderRadius:2,mb:1,"&:hover":{backgroundColor:"#FFD600",color:"#181c23"},transition:"all 0.2s",boxShadow:"0 1px 4px 0 #00000033"},children:v.jsx(jK,{primary:v.jsx("span",{style:{fontWeight:500,fontSize:16},children:h.title}),secondary:v.jsxs("span",{style:{color:"#bdbdbd",fontSize:14},children:[h.description," - ",h.points," puan"]})})},m)),v.jsx(bM,{sx:{background:"#23272f",my:1}})]},c))})}),v.jsx(wyt,{sx:{background:"transparent",p:2},children:v.jsx(OK,{onClick:()=>a(!1),sx:{color:"#FFD600",fontWeight:600,fontSize:16},children:"İPTAL"})})]})]})},h0t=()=>{const[t,e]=L.useState([]),[n,r]=L.useState(!0),[s,a]=L.useState(null),[i,o]=L.useState("3m"),l=async(u=i)=>{try{r(!0);const c=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");if(!c){a("Oturum süresi dolmuş, lütfen tekrar giriş yapın");return}const d={headers:{Authorization:`Bearer ${c}`}};let h;const m=new Date;switch(u){case"1m":h=tS(m,1);break;case"3m":h=tS(m,3);break;case"6m":h=tS(m,6);break;case"1y":h=tS(m,12);break;default:h=null}let g="/api/athletes/physical-data/history";h&&(g+=`?startDate=${h.toISOString()}`);const b=(await Ze.get(g,d)).data.map(w=>({date:vKe(new Date(w.createdAt),"d MMM",{locale:QKe}),weight:w.weight,bodyFat:w.bodyFat,bmi:w.bmi}));e(b)}catch{a("Veri alınamadı")}finally{r(!1)}};return L.useEffect(()=>{l(i)},[i]),L.useEffect(()=>{localStorage.getItem("progressNeedsRefresh")==="1"&&(l(),localStorage.setItem("progressNeedsRefresh","0"))},[]),L.useEffect(()=>{const u=()=>{localStorage.getItem("progressNeedsRefresh")==="1"&&(l(),localStorage.setItem("progressNeedsRefresh","0"))};return window.addEventListener("storage",u),()=>window.removeEventListener("storage",u)},[]),v.jsxs("div",{className:"pt-4 pb-20 md:pb-6 px-4",children:[v.jsx("div",{className:"flex items-center mb-6",children:v.jsxs(Vt,{to:"/dashboard",className:"flex items-center text-yellow-500 hover:text-yellow-400 transition duration-200 font-semibold text-base",children:[v.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Panele Dön"]})}),v.jsx("h2",{className:"text-2xl font-bold text-yellow-500 mb-6",children:"İlerleme Takibi"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg rounded-xl border border-gray-800 shadow-lg p-6 mb-6",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h3",{className:"text-xl font-bold text-gray-200",children:"Gelişim Grafiği"}),v.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden p-1 flex",children:["1m","3m","6m","1y","all"].map(u=>v.jsx("button",{onClick:()=>o(u),className:`px-3 py-1 text-sm rounded-lg ${i===u?"bg-yellow-500 text-black":"text-gray-400 hover:bg-gray-700"}`,children:u==="1m"?"1 Ay":u==="3m"?"3 Ay":u==="6m"?"6 Ay":u==="1y"?"1 Yıl":"Tümü"},u))})]}),n?v.jsx("div",{className:"flex items-center justify-center h-64",children:v.jsx("div",{className:"text-yellow-500",children:"Veriler yükleniyor..."})}):s?v.jsx("div",{className:"bg-red-900 bg-opacity-60 text-red-200 p-4 rounded-lg",children:s}):t.length===0?v.jsxs("div",{className:"bg-gray-800 bg-opacity-60 text-gray-300 p-4 rounded-lg text-center",children:[v.jsx("p",{children:"Henüz yeterli ilerleme verisi bulunmuyor."}),v.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Düzenli olarak vücut ölçümlerinizi güncelleyin."})]}):v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{className:"bg-gray-800 bg-opacity-30 p-4 rounded-lg",children:[v.jsx("h3",{className:"text-lg font-medium text-gray-200 mb-4",children:"Kilo Takibi"}),v.jsx("div",{className:"h-64",children:v.jsx(b_,{width:"100%",height:"100%",children:v.jsxs(f3,{data:t,margin:{top:5,right:30,left:20,bottom:5},children:[v.jsx(zS,{strokeDasharray:"3 3",stroke:"#444"}),v.jsx(vm,{dataKey:"date",stroke:"#999"}),v.jsx(wm,{stroke:"#999"}),v.jsx(zo,{contentStyle:{backgroundColor:"#1f2937",borderColor:"#374151",color:"#e5e7eb"},labelStyle:{color:"#e5e7eb"}}),v.jsx(Cc,{}),v.jsx(lh,{type:"monotone",dataKey:"weight",name:"Kilo (kg)",stroke:"#f59e0b",strokeWidth:2,activeDot:{r:8}})]})})})]}),v.jsxs("div",{className:"bg-gray-800 bg-opacity-30 p-4 rounded-lg",children:[v.jsx("h3",{className:"text-lg font-medium text-gray-200 mb-4",children:"Vücut Yağ Oranı"}),v.jsx("div",{className:"h-64",children:v.jsx(b_,{width:"100%",height:"100%",children:v.jsxs(f3,{data:t,margin:{top:5,right:30,left:20,bottom:5},children:[v.jsx(zS,{strokeDasharray:"3 3",stroke:"#444"}),v.jsx(vm,{dataKey:"date",stroke:"#999"}),v.jsx(wm,{stroke:"#999"}),v.jsx(zo,{contentStyle:{backgroundColor:"#1f2937",borderColor:"#374151",color:"#e5e7eb"},labelStyle:{color:"#e5e7eb"}}),v.jsx(Cc,{}),v.jsx(lh,{type:"monotone",dataKey:"bodyFat",name:"Vücut Yağ Oranı (%)",stroke:"#10b981",strokeWidth:2,activeDot:{r:8}})]})})})]}),v.jsxs("div",{className:"bg-gray-800 bg-opacity-30 p-4 rounded-lg",children:[v.jsx("h3",{className:"text-lg font-medium text-gray-200 mb-4",children:"Vücut Kitle İndeksi (BMI)"}),v.jsx("div",{className:"h-64",children:v.jsx(b_,{width:"100%",height:"100%",children:v.jsxs(f3,{data:t,margin:{top:5,right:30,left:20,bottom:5},children:[v.jsx(zS,{strokeDasharray:"3 3",stroke:"#444"}),v.jsx(vm,{dataKey:"date",stroke:"#999"}),v.jsx(wm,{stroke:"#999"}),v.jsx(zo,{contentStyle:{backgroundColor:"#1f2937",borderColor:"#374151",color:"#e5e7eb"},labelStyle:{color:"#e5e7eb"}}),v.jsx(Cc,{}),v.jsx(lh,{type:"monotone",dataKey:"bmi",name:"BMI",stroke:"#3b82f6",strokeWidth:2,activeDot:{r:8}})]})})})]})]}),v.jsxs("div",{className:"mt-8 bg-gray-900 bg-opacity-60 backdrop-blur-lg rounded-xl shadow-lg p-6 border border-gray-800",children:[v.jsx("h3",{className:"text-xl font-medium text-gray-200 mb-4",children:"Kayıtlı Ölçümler"}),t.length===0?v.jsx("p",{className:"text-gray-400",children:"Henüz kayıtlı ölçüm bulunmuyor."}):v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"min-w-full divide-y divide-gray-700",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Tarih"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Kilo (kg)"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Yağ Oranı (%)"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"BMI"})]})}),v.jsx("tbody",{className:"bg-gray-800 bg-opacity-30 divide-y divide-gray-700",children:t.slice().reverse().map((u,c)=>v.jsxs("tr",{className:"hover:bg-gray-700 hover:bg-opacity-40 transition duration-150",children:[v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:u.date}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:u.weight}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:u.bodyFat}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:u.bmi})]},c))})]})})]})]}),v.jsx("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg rounded-xl border border-gray-800 shadow-lg p-6 mb-6",children:v.jsx(f0t,{})})]})]})},p0t=()=>{var et,Je,Re,Ke;const[t,e]=L.useState([]),[n,r]=L.useState(!0),[s,a]=L.useState(null),[i,o]=L.useState(null),[l,u]=L.useState(""),[c,d]=L.useState(!1),[h,m]=L.useState(!1),[g,y]=L.useState(!1),[b,w]=L.useState(5),[C,k]=L.useState(""),[T,N]=L.useState(null),[I,A]=L.useState([]),[D,P]=L.useState(!1),[R,O]=L.useState(!1),[F,z]=L.useState(null),[V,W]=L.useState(null),[j,q]=L.useState(!1),[Y,Q]=L.useState(null),[H,ee]=L.useState([]),[te,ne]=L.useState(!1),he=Wl();L.useEffect(()=>{(async()=>{try{const De=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");if(!De){he("/");return}const at=await Ze.get("http://localhost:5000/api/users/profile",{headers:{Authorization:`Bearer ${De}`}});N(at.data)}catch(De){console.error("User data fetch error:",De)}})()},[he]),L.useEffect(()=>{(async()=>{try{r(!0);const De=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");if(!De){he("/");return}const at={headers:{Authorization:`Bearer ${De}`}},Xe=await Ze.get("http://localhost:5000/api/coaches",at);e(Xe.data)}catch(De){console.error("Coaches fetch error:",De),a("Antrenörler listesi yüklenemedi")}finally{r(!1)}})()},[he]),L.useEffect(()=>{(async()=>{try{const De=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");if(!De)return;const at={headers:{Authorization:`Bearer ${De}`}},Xe=await Ze.get("http://localhost:5000/api/athletes/my-coach-requests",at);A(Xe.data)}catch{A([])}})()},[]),L.useEffect(()=>{(async()=>{try{const De=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");if(!De)return;const at=await Ze.get("http://localhost:5000/api/users/profile",{headers:{Authorization:`Bearer ${De}`}});W(at.data._id)}catch{}})()},[]);const Se=async()=>{var xe,De;if(i)try{d(!0);const Xe={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}};await Ze.post("http://localhost:5000/api/athletes/select-coach",{coachId:i._id,message:l},Xe);const Nt=await Ze.get("http://localhost:5000/api/athletes/my-coach-requests",Xe);A(Nt.data),m(!0),setTimeout(()=>{he("/dashboard")},2e3)}catch(at){try{const Nt={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}},Be=await Ze.get("http://localhost:5000/api/athletes/my-coach-requests",Nt);A(Be.data)}catch{}console.error("Coach selection error:",at),a(((De=(xe=at.response)==null?void 0:xe.data)==null?void 0:De.message)||"Antrenör seçimi yapılamadı")}finally{d(!1)}},Ie=xe=>{i&&i._id===xe._id?o(null):o(xe)},Qe=async xe=>{z(xe),y(!0),w(5),k("");try{const at={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}},Xe=await Ze.get(`http://localhost:5000/api/coaches/${xe._id}/ratings`,at);if(Xe.data&&Array.isArray(Xe.data)&&V){const Nt=Xe.data.find(Be=>Be.athlete&&(Be.athlete._id===V||Be.athlete===V));Nt&&(w(Nt.rating),k(Nt.comment))}}catch{}},Ve=async()=>{try{const De={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}};await Ze.post(`http://localhost:5000/api/coaches/${F._id}/rate`,{rating:b,comment:C},De),y(!1),w(5),k(""),z(null);const at=await Ze.get("http://localhost:5000/api/coaches",De);e(at.data)}catch(xe){console.error("Rating error:",xe),a("Puanlama yapılamadı")}},$e=async()=>{var xe,De;O(!1);try{P(!0);const Xe={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}};await Ze.post("http://localhost:5000/api/athletes/end-coach-relationship",{},Xe);const Nt=await Ze.get("http://localhost:5000/api/users/profile",Xe);N(Nt.data);const Be=await Ze.get("http://localhost:5000/api/coaches",Xe);e(Be.data);const Tt=await Ze.get("http://localhost:5000/api/athletes/my-coach-requests",Xe);A(Tt.data),m(!0),setTimeout(()=>{m(!1)},3e3)}catch(at){console.error("Error ending relationship:",at),a(((De=(xe=at.response)==null?void 0:xe.data)==null?void 0:De.message)||"İlişki sonlandırılırken bir hata oluştu")}finally{P(!1)}},We=async xe=>{Q(xe),q(!0),ee([]),ne(!0);try{const at={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}},Xe=await Ze.get(`http://localhost:5000/api/coaches/${xe._id}/ratings`,at);ee(Xe.data||[])}catch{ee([])}finally{ne(!1)}},ze=xe=>v.jsxs("div",{className:"flex items-center",children:[[1,2,3,4,5].map(De=>v.jsx("span",{className:`text-${De<=xe?"yellow":"gray"}-500`,children:"★"},De)),v.jsxs("span",{className:"text-gray-400 text-sm ml-2",children:["(",xe.toFixed(1),")"]})]}),ke=xe=>xe?xe<12?`${xe} aydır üye`:`${Math.floor(xe/12)} yıldır üye`:"0 ay";return v.jsxs("div",{className:"pt-4 pb-20 md:pb-6 px-4",children:[v.jsxs(Vt,{to:"/dashboard",className:"mb-6 flex items-center text-yellow-500 hover:text-yellow-400 transition duration-200",children:[v.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Panele Dön"]}),v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg rounded-xl shadow-lg p-6 border border-gray-800 mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold mb-2 text-yellow-500",children:"Antrenör Seçimi"}),v.jsx("p",{className:"text-gray-400 mb-6",children:"Size uygun bir antrenör seçerek özel programlar alabilirsiniz."}),h&&v.jsx("div",{className:"bg-green-900 bg-opacity-40 text-green-400 p-4 rounded-lg mb-6",children:v.jsx("p",{children:"Antrenör talebi başarıyla gönderildi! Panele yönlendiriliyorsunuz..."})}),s&&v.jsx("div",{className:"bg-red-900 bg-opacity-60 text-red-200 p-3 rounded-lg mb-4",children:s}),n?v.jsx("div",{className:"flex items-center justify-center py-12",children:v.jsx("div",{className:"text-yellow-500",children:"Antrenörler yükleniyor..."})}):t.length===0?v.jsx("div",{className:"bg-gray-800 bg-opacity-40 text-gray-300 p-4 rounded-lg text-center",children:v.jsx("p",{children:"Sistemde kayıtlı antrenör bulunmuyor."})}):v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(xe=>{var Xe,Nt,Be,Tt,Ot,Wn,rn,cn;const De=I.some(Jt=>String(Jt.coach)===String(xe._id)&&["pending","accepted"].includes(Jt.status)),at=((Xe=T==null?void 0:T.coach)==null?void 0:Xe._id)===xe._id;return v.jsxs("div",{className:`bg-gray-800 bg-opacity-40 rounded-xl p-6 border relative ${i&&i._id===xe._id&&!at?"border-yellow-500":"border-gray-700"} ${at?"opacity-100 cursor-default":"hover:border-yellow-500 cursor-pointer transition-all duration-300"}`,onClick:()=>!De&&!at&&Ie(xe),style:De&&!at?{pointerEvents:"none",opacity:.7}:{},children:[v.jsxs("div",{className:"flex justify-between items-center bg-gray-900 bg-opacity-60 rounded-t-lg px-4 py-4 mb-2 -mt-5 -mx-6",children:[v.jsx("button",{onClick:Jt=>{Jt.stopPropagation(),We(xe)},className:"bg-gray-700 hover:bg-gray-600 text-gray-200 px-3 py-1 rounded-full text-xs font-semibold shadow z-10",children:"Yorumları Gör"}),v.jsxs("div",{className:"flex items-center gap-2",children:[De&&!at&&v.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-semibold shadow bg-yellow-500 text-black",children:"İstek Gönderildi"}),at&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-semibold shadow bg-green-500 text-black",children:"Aktif Antrenörün"}),v.jsx("button",{onClick:Jt=>{Jt.stopPropagation(),Qe(xe)},className:"ml-2 bg-yellow-500 hover:bg-yellow-400 text-black px-3 py-1 rounded-full text-xs font-semibold shadow transition-colors duration-200",children:"Puanla"})]})]})]}),v.jsxs("div",{className:"flex items-center mb-4",children:[v.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-700 flex-shrink-0 border-2 border-yellow-500 flex items-center justify-center overflow-hidden",children:(Nt=xe.profile)!=null&&Nt.photoUrl?v.jsx("img",{src:xe.profile.photoUrl.startsWith("http")?xe.profile.photoUrl:`http://localhost:5000${xe.profile.photoUrl}`,alt:xe.profile.fullName,className:"w-full h-full object-cover"}):v.jsx("svg",{className:"w-8 h-8 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),v.jsxs("div",{className:"ml-3",children:[v.jsx("h3",{className:"text-lg font-bold text-gray-100",children:((Be=xe.profile)==null?void 0:Be.fullName)||"İsimsiz Antrenör"}),ze(((Tt=xe.stats)==null?void 0:Tt.averageRating)||0)]})]}),v.jsxs("div",{className:"space-y-2 mb-4",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("svg",{className:"w-4 h-4 text-gray-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),v.jsxs("span",{className:"text-gray-300",children:[((Ot=xe.stats)==null?void 0:Ot.activeStudents)||0," aktif öğrenci"]})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("svg",{className:"w-4 h-4 text-gray-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),v.jsx("span",{className:"text-gray-300",children:ke(((Wn=xe.stats)==null?void 0:Wn.membershipDuration)||0)})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("svg",{className:"w-4 h-4 text-gray-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),v.jsxs("span",{className:"text-gray-300",children:[((rn=xe.stats)==null?void 0:rn.programCount)||0," program oluşturdu"]})]})]}),((cn=xe.profile)==null?void 0:cn.coachNote)&&v.jsx("div",{className:"bg-gray-900 bg-opacity-40 p-3 rounded-lg mb-4",children:v.jsx("p",{className:"text-base text-gray-100 font-medium",children:xe.profile.coachNote})}),at&&v.jsx("div",{className:"flex justify-center mt-2",children:v.jsx("button",{onClick:Jt=>{Jt.stopPropagation(),O(!0)},disabled:D,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-full text-sm font-semibold transition-colors duration-200 disabled:opacity-50 shadow",children:D?"İşleniyor...":"Antrenörlük İlişkisini Sonlandır"})})]},xe._id)})}),i&&v.jsxs("div",{className:"mt-8 bg-gray-800 bg-opacity-50 p-6 rounded-xl border border-gray-700",children:[v.jsxs("h3",{className:"text-xl font-bold text-gray-100 mb-4",children:[((et=i.profile)==null?void 0:et.fullName)||"Antrenör"," ile çalışmak istiyorsunuz"]}),i&&!(T!=null&&T.coach)&&(I.some(De=>String(De.coach)===String(i._id)&&["pending","accepted"].includes(De.status))?null:v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-gray-300 mb-2 text-sm",children:"Antrenöre mesajınız (opsiyonel)"}),v.jsx("textarea",{className:"w-full p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200 resize-none",rows:"3",placeholder:"Hedeflerinizi, beklentilerinizi veya özel durumlarınızı belirtebilirsiniz...",value:l,onChange:De=>u(De.target.value)})]})),v.jsx("div",{className:"flex gap-4",children:((Je=T==null?void 0:T.coach)==null?void 0:Je._id)===i._id?v.jsx("div",{className:"w-full",children:v.jsx("div",{className:"bg-yellow-500 bg-opacity-10 border border-yellow-500 p-4 rounded-lg text-center",children:v.jsx("p",{className:"text-yellow-500",children:"Bu antrenör zaten sizin antrenörünüz."})})}):T!=null&&T.coach?v.jsx("div",{className:"w-full",children:v.jsx("div",{className:"bg-yellow-500 bg-opacity-10 border border-yellow-500 p-4 rounded-lg text-center",children:v.jsx("p",{className:"text-yellow-500",children:"Zaten bir antrenörünüz var. Yeni bir antrenör seçmek için önce mevcut antrenörünüzle olan ilişkinizi sonlandırmanız gerekmektedir."})})}):I.some(De=>String(De.coach)===String(i._id)&&["pending","accepted"].includes(De.status))?v.jsx("button",{className:"w-full bg-gray-600 text-gray-300 font-medium py-3 rounded-lg",disabled:!0,children:"İstek Gönderildi"}):v.jsx("button",{onClick:Se,disabled:c,className:"w-full bg-yellow-500 text-black font-medium py-3 rounded-lg hover:bg-yellow-400 transition duration-300 disabled:opacity-50",children:c?"İşleniyor...":"Antrenör Talebi Gönder"})})]})]}),g&&F&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:v.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 max-w-md w-full",children:[v.jsxs("h3",{className:"text-xl font-bold text-gray-100 mb-4",children:[((Re=F.profile)==null?void 0:Re.fullName)||"Antrenör"," Puanlama"]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-gray-300 mb-2",children:"Puanınız"}),v.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(xe=>v.jsx("button",{onClick:()=>w(xe),className:`text-2xl ${xe<=b?"text-yellow-500":"text-gray-500"}`,children:"★"},xe))})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-gray-300 mb-2",children:"Yorumunuz (opsiyonel)"}),v.jsx("textarea",{className:"w-full p-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200 resize-none",rows:"3",placeholder:"Deneyiminizi paylaşın...",value:C,onChange:xe=>k(xe.target.value)})]}),v.jsxs("div",{className:"flex gap-4",children:[v.jsx("button",{onClick:Ve,className:"flex-1 bg-yellow-500 text-black font-medium py-3 rounded-lg hover:bg-yellow-400 transition duration-300",children:"Puanla"}),v.jsx("button",{onClick:()=>{y(!1),z(null)},className:"flex-1 bg-gray-700 text-gray-200 font-medium py-3 rounded-lg hover:bg-gray-600 transition duration-300",children:"İptal"})]})]})}),R&&v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60",children:v.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 max-w-sm w-full shadow-lg border border-gray-700",children:[v.jsx("h3",{className:"text-lg font-bold text-gray-100 mb-4",children:"İlişkiyi Sonlandır"}),v.jsx("p",{className:"text-gray-300 mb-6",children:"Antrenörünüzle olan ilişkinizi sonlandırmak istediğinizden emin misiniz? Bu işlem geri alınamaz."}),v.jsxs("div",{className:"flex gap-4 justify-end",children:[v.jsx("button",{onClick:()=>O(!1),className:"bg-gray-600 hover:bg-gray-700 text-gray-200 px-4 py-2 rounded-lg font-medium",disabled:D,children:"Vazgeç"}),v.jsx("button",{onClick:$e,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-semibold disabled:opacity-50",disabled:D,children:D?"İşleniyor...":"Evet, Sonlandır"})]})]})}),j&&Y&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 max-w-lg w-full shadow-lg border border-gray-700 max-h-[80vh] overflow-y-auto",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsxs("h3",{className:"text-lg font-bold text-gray-100",children:[((Ke=Y.profile)==null?void 0:Ke.fullName)||"Antrenör"," - Yorumlar"]}),v.jsx("button",{onClick:()=>q(!1),className:"text-gray-400 hover:text-gray-200 text-2xl",children:"×"})]}),te?v.jsx("div",{className:"text-yellow-400 text-center py-8",children:"Yorumlar yükleniyor..."}):H.length===0?v.jsx("div",{className:"text-gray-400 text-center py-8",children:"Henüz yorum bulunmuyor."}):v.jsx("div",{className:"space-y-4",children:H.map((xe,De)=>{var at,Xe,Nt,Be,Tt,Ot;return v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 rounded-lg p-4 flex gap-4 items-start",children:[v.jsx("div",{className:"flex-shrink-0",children:(Xe=(at=xe.athlete)==null?void 0:at.profile)!=null&&Xe.photoUrl?v.jsx("img",{src:xe.athlete.profile.photoUrl.startsWith("http")?xe.athlete.profile.photoUrl:`http://localhost:5000${xe.athlete.profile.photoUrl}`,alt:xe.athlete.profile.fullName,className:"w-10 h-10 rounded-full object-cover"}):v.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center text-gray-400",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})}),v.jsxs("div",{className:"flex-1",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[v.jsx("span",{className:"font-semibold text-gray-200 text-sm",children:((Be=(Nt=xe.athlete)==null?void 0:Nt.profile)==null?void 0:Be.fullName)||((Tt=xe.athlete)==null?void 0:Tt.fullName)||((Ot=xe.athlete)==null?void 0:Ot.name)||"Kullanıcı"}),v.jsxs("span",{className:"text-yellow-400 text-xs",children:["★".repeat(xe.rating),"☆".repeat(5-xe.rating)]})]}),v.jsx("div",{className:"text-gray-300 text-sm whitespace-pre-line",children:xe.comment||v.jsx("span",{className:"italic text-gray-500",children:"Yorum yok"})})]})]},De)})})]})})]})},m0t=()=>{const[t,e]=L.useState(null),[n,r]=L.useState(!0),[s,a]=L.useState(null);Wl(),L.useEffect(()=>{(async()=>{try{const u=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");if(!u){a("Oturum bulunamadı"),r(!1);return}const c={headers:{Authorization:`Bearer ${u}`}},d=await Ze.get("http://localhost:5000/api/athletes/active-program",c);e(d.data)}catch{a("Aktif program bulunamadı"),e(null)}finally{r(!1)}})()},[]);const i={beginner:"Başlangıç",intermediate:"Orta",advanced:"İleri"};function o(l){if(!l||typeof l!="object")return"";const{value:u,type:c}=l;let d=0;c==="day"&&(d=u),c==="week"&&(d=u*7),c==="month"&&(d=u*30);const h=Math.floor(d/30),m=d%30,g=Math.floor(m/7),y=m%7;let b=[];return h>0&&b.push(`${h} ay`),g>0&&b.push(`${g} hafta`),y>0&&b.push(`${y} gün`),b.length===0?"0 gün":b.join(" ")}return v.jsxs("div",{className:"min-h-screen w-full bg-[#10131a] text-white p-0 m-0",children:[v.jsx("div",{className:"pt-4 px-4",children:v.jsxs(Vt,{to:"/dashboard",className:"mb-6 flex items-center text-yellow-500 hover:text-yellow-400 transition duration-200",children:[v.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Panele Dön"]})}),v.jsxs("div",{className:"w-full max-w-5xl mx-auto px-4 py-12",children:[v.jsx("h2",{className:"text-4xl font-bold text-yellow-400 mb-6",children:"Aktif Antrenman Programın"}),t?v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 border border-gray-800 rounded-xl shadow-lg p-8",children:[v.jsx("h3",{className:"text-2xl font-semibold text-yellow-100 mb-2",children:t.name}),v.jsxs("div",{className:"mb-2 text-gray-300",children:["Zorluk:"," ",v.jsx("span",{className:"font-semibold text-yellow-300",children:i[t.difficultyLevel]||t.difficultyLevel})]}),t.duration&&v.jsxs("div",{className:"mb-2 text-sm text-gray-300",children:[v.jsxs("span",{className:"font-semibold text-yellow-400",children:["Program Süresi:"," "]}),v.jsx("span",{children:o(t.duration)})]}),t.programDays&&t.programDays.length>0&&v.jsxs("div",{className:"mb-2 text-sm text-gray-300",children:[v.jsxs("span",{className:"font-semibold text-yellow-400",children:["Uygulama Günleri:"," "]}),v.jsx("span",{children:t.programDays.sort((l,u)=>l-u).map(l=>["Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi","Pazar"][l-1]).join(", ")})]}),v.jsx("div",{className:"mb-6 text-gray-400",children:t.description}),v.jsxs("div",{children:[v.jsx("span",{className:"text-xl font-bold text-yellow-300",children:"Antrenmanlar:"}),t.workouts.map((l,u)=>v.jsxs("div",{className:"mt-6 bg-gray-900 bg-opacity-60 border border-gray-800 rounded-xl shadow p-6",children:[v.jsx("div",{className:"text-lg font-semibold text-yellow-200 mb-3",children:["Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi","Pazar"][l.day-1]}),v.jsx("ul",{className:"space-y-3",children:l.exercises.map((c,d)=>v.jsxs("li",{className:"flex flex-wrap items-center space-x-3 bg-gray-800 bg-opacity-60 rounded-lg px-4 py-2",children:[v.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-yellow-400"}),v.jsx("span",{className:"text-yellow-200 font-semibold",children:c.name}),v.jsxs("span",{className:"text-gray-200",children:["| Set:"," ",v.jsx("span",{className:"text-yellow-300 font-bold",children:c.sets})]}),v.jsxs("span",{className:"text-gray-200",children:["| Tekrar:"," ",v.jsx("span",{className:"text-yellow-300 font-bold",children:c.reps})]}),c.notes&&v.jsx("span",{className:"italic text-gray-400 ml-3",children:c.notes})]},d))})]},u))]})]}):v.jsx("div",{className:"bg-gray-900 bg-opacity-60 border border-gray-800 rounded-xl shadow-lg p-8 text-gray-400 text-lg",children:"Aktif program bulunamadı"})]})]})},g0t=({activeCategory:t,onCategoryChange:e})=>{const n=[{id:"all",name:"Tüm Rozetler",icon:"🏆"},{id:"goal",name:"Hedef Rozetleri",icon:"🎯"},{id:"activity",name:"Aktivite Rozetleri",icon:"🏃"},{id:"social",name:"Sosyal Rozetler",icon:"👥"},{id:"special",name:"Özel Rozetler",icon:"⭐"}];return v.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:n.map(r=>v.jsxs("button",{onClick:()=>e(r.id),className:`flex items-center px-4 py-2 rounded-lg transition-all
            ${t===r.id?"bg-yellow-500 text-black":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:[v.jsx("span",{className:"mr-2",children:r.icon}),r.name]},r.id))})},y0t=({achievements:t})=>{const e=t.length,n=t.filter(s=>s.earned).length,r=e>0?Math.round(n/e*100):0;return v.jsx("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:v.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:e}),v.jsx("div",{className:"text-sm text-gray-400",children:"Toplam Rozet"})]}),v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-2xl font-bold text-green-500",children:n}),v.jsx("div",{className:"text-sm text-gray-400",children:"Kazanılan"})]}),v.jsxs("div",{className:"text-center",children:[v.jsxs("div",{className:"text-2xl font-bold text-blue-500",children:["%",r]}),v.jsx("div",{className:"text-sm text-gray-400",children:"Tamamlanma"})]})]})})},b0t=({achievements:t,onBadgeClick:e})=>v.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:t.map(n=>{const r=n.earned||n.progress>=100,s=typeof n.progress=="number"?n.progress:0;return v.jsx("div",{className:`relative group cursor-pointer transition-all duration-300 
              ${r?"transform hover:scale-105":"opacity-60"}`,onClick:()=>e(n),children:v.jsxs("div",{className:`p-4 rounded-lg shadow-lg border-2 
              ${r?"border-yellow-500 bg-gray-800":"border-gray-700 bg-gray-900"}`,children:[v.jsx("div",{className:"text-4xl mb-2 text-center",children:n.type==="secret"&&!r?"❓":n.icon}),v.jsxs("div",{className:"text-center",children:[v.jsx("h3",{className:`font-bold ${r?"text-yellow-400":"text-gray-400"}`,children:n.type==="secret"&&!r?"???":n.name}),v.jsx("p",{className:"text-xs text-gray-400 mt-1",children:n.type==="secret"&&!r?"Gizli bir başarı!":n.description})]}),!r&&v.jsxs("div",{className:"mt-2",children:[v.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1.5",children:v.jsx("div",{className:"bg-yellow-500 h-1.5 rounded-full transition-all duration-300",style:{width:`${s}%`}})}),v.jsxs("span",{className:"text-xs text-gray-400 mt-1 block text-center",children:["%",Math.round(s)]})]}),r&&v.jsx("div",{className:"absolute top-2 right-2",children:v.jsx("span",{className:"bg-green-500 text-white text-xs px-2 py-1 rounded-full",children:"Kazanıldı"})})]})},n.id)})}),x0t=()=>{const[t,e]=L.useState([]),[n,r]=L.useState(!0),[s,a]=L.useState(null),[i,o]=L.useState([]),[l,u]=L.useState([]),[c,d]=L.useState("all"),[h,m]=L.useState(""),[g,y]=L.useState(null),[b,w]=L.useState(null),[C,k]=L.useState(!0);L.useEffect(()=>{C&&(async()=>{try{const I=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");if(!I){y("Oturum bulunamadı");return}const A={headers:{Authorization:`Bearer ${I}`}},D=await Ze.get("/api/users/profile",A);(b==null?void 0:b.userType)!==D.data.userType&&w(D.data)}catch(I){console.error("Kullanıcı bilgileri alınamadı:",I),y("Kullanıcı bilgileri alınamadı")}finally{k(!1)}})()},[C]),L.useEffect(()=>{(async()=>{if(b)try{r(!0),y(null);const I=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");if(!I)throw new Error("Oturum bulunamadı");const A={headers:{Authorization:`Bearer ${I}`}},D=await Ze.get("/api/achievements/progress",A);if(!D.data||!Array.isArray(D.data.progress))throw new Error("Geçersiz API yanıtı");o(D.data.progress),u(D.data.earned||[]);const R=TS.filter(O=>O.type==="coach"||O.userType==="coach"?b.userType==="coach":O.type==="athlete"||O.userType==="athlete"?b.userType==="athlete":!0).map(O=>{const F=D.data.progress.find(z=>z.id===O.id)||{};return{...O,progress:F.progress||0,earned:F.earned||!1,earnedDate:F.earnedDate||null}});e(R)}catch(I){console.error("Başarılar yüklenirken hata:",I),y(I.message||"Başarılar yüklenirken bir hata oluştu")}finally{r(!1)}})()},[b==null?void 0:b.userType]);const T=t.filter(N=>{const I=c==="all"||N.type===c,A=N.name.toLowerCase().includes(h.toLowerCase())||N.description.toLowerCase().includes(h.toLowerCase());return I&&A});return n?v.jsx("div",{className:"flex items-center justify-center min-h-screen",children:v.jsx("div",{className:"text-yellow-500 text-xl",children:"Yükleniyor..."})}):g?v.jsx("div",{className:"flex items-center justify-center min-h-screen",children:v.jsxs("div",{className:"text-red-500 text-xl",children:[g,v.jsx("button",{onClick:()=>{k(!0),y(null)},className:"ml-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Tekrar Dene"})]})}):t.length?v.jsxs("div",{className:"pt-4 pb-20 md:pb-6 px-4",children:[v.jsxs(Vt,{to:"/dashboard",className:"mb-6 flex items-center text-yellow-500 hover:text-yellow-400 transition duration-200",children:[v.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Panele Dön"]}),v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg rounded-xl shadow-lg p-6 border border-gray-800 mb-6",children:[v.jsx("div",{className:"flex justify-between items-center mb-6",children:v.jsx("h1",{className:"text-2xl font-bold text-yellow-500",children:"Başarılarım ve Rozetlerim"})}),v.jsx(y0t,{achievements:T}),v.jsx(g0t,{activeCategory:c,onCategoryChange:d}),v.jsxs("div",{className:"relative mb-6",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(Yhe,{className:"h-5 w-5 text-gray-400"})}),v.jsx("input",{type:"text",placeholder:"Rozet ara...",value:h,onChange:N=>m(N.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),v.jsx(b0t,{achievements:T,onBadgeClick:a}),l.length>0&&v.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:v.jsxs("div",{className:"bg-gray-900 p-8 rounded-lg shadow-lg text-center border-2 border-yellow-500",children:[v.jsx("div",{className:"text-5xl mb-4",children:"🎉"}),v.jsx("h3",{className:"text-xl font-bold mb-2 text-yellow-500",children:"Tebrikler!"}),v.jsx("p",{className:"text-gray-300",children:"Yeni rozet(ler) kazandın:"}),v.jsx("div",{className:"mt-4 space-y-2",children:l.map(N=>{var I,A;return v.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[v.jsx("span",{className:"text-2xl",children:(I=TS.find(D=>D.id===N))==null?void 0:I.icon}),v.jsx("span",{className:"text-gray-300",children:(A=TS.find(D=>D.id===N))==null?void 0:A.name})]},N)})}),v.jsx("button",{className:"mt-6 px-6 py-2 bg-yellow-500 text-black rounded-lg hover:bg-yellow-400 transition duration-200",onClick:()=>u([]),children:"Kapat"})]})})]}),s&&v.jsx(LM,{achievement:s,onClose:()=>a(null)}),v.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-900 bg-opacity-80 backdrop-blur-md border-t border-gray-800 shadow-lg md:hidden",children:v.jsxs("div",{className:"flex justify-around py-3",children:[v.jsxs(Vt,{to:"/dashboard",className:"flex flex-col items-center text-xs",children:[v.jsx("div",{className:"p-1 rounded-full text-gray-400",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),v.jsx("span",{className:"text-gray-400",children:"Panel"})]}),v.jsxs(Vt,{to:"/profile",className:"flex flex-col items-center text-xs",children:[v.jsx("div",{className:"p-1 rounded-full text-gray-400",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),v.jsx("span",{className:"text-gray-400",children:"Profil"})]}),v.jsxs("div",{className:"flex flex-col items-center text-xs",children:[v.jsx("div",{className:"p-1 rounded-full bg-yellow-500 text-black",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}),v.jsx("span",{className:"text-yellow-500",children:"Rozetler"})]})]})})]}):v.jsx("div",{className:"flex items-center justify-center min-h-screen",children:v.jsx("div",{className:"text-gray-500 text-xl",children:"Henüz başarı bulunmuyor"})})},v0t=()=>{const[t,e]=L.useState(""),[n,r]=L.useState([]),[s,a]=L.useState(!1),[i,o]=L.useState(null),[l,u]=L.useState(null),c=async h=>{if(h.preventDefault(),!!t.trim()){a(!0),o(null);try{const g={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}},y=await Ze.get(`http://localhost:5000/api/users/search?q=${t}`,g);r(y.data)}catch(m){console.error("Kullanıcı araması başarısız:",m),o("Kullanıcı araması yapılamadı"),r([])}finally{a(!1)}}},d=async h=>{try{const g={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}};await Ze.post(`http://localhost:5000/api/friends/request/${h}`,{},g),window.refetchAchievementsProgress&&window.refetchAchievementsProgress(),r(y=>y.map(b=>b._id===h?{...b,requestSent:!0}:b)),u("Arkadaşlık isteği gönderildi"),setTimeout(()=>u(null),3e3)}catch(m){m.response&&m.response.data&&m.response.data.message?o(m.response.data.message):o("Arkadaşlık isteği gönderme işlemi başarısız oldu"),setTimeout(()=>o(null),3e3)}};return v.jsxs("div",{className:"pt-4 pb-20 md:pb-6 px-4",children:[v.jsxs(Vt,{to:"/dashboard",className:"mb-6 flex items-center text-yellow-500 hover:text-yellow-400 transition duration-200",children:[v.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Panele Dön"]}),v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg rounded-xl shadow-lg p-6 border border-gray-800",children:[v.jsx("h2",{className:"text-2xl font-bold mb-6 text-yellow-500",children:"Arkadaş Bul"}),i&&v.jsx("div",{className:"bg-red-900 bg-opacity-60 text-red-200 p-3 rounded-lg mb-4",children:i}),l&&v.jsx("div",{className:"bg-green-900 bg-opacity-60 text-green-200 p-3 rounded-lg mb-4",children:l}),v.jsx("form",{onSubmit:c,className:"mb-6",children:v.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[v.jsx("input",{type:"text",placeholder:"İsim veya e-posta ile ara...",className:"flex-1 p-3 bg-gray-800 bg-opacity-50 border border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 text-gray-200",value:t,onChange:h=>e(h.target.value)}),v.jsx("button",{type:"submit",className:"px-4 py-3 bg-yellow-500 text-black font-medium rounded-lg hover:bg-yellow-400 transition duration-300",disabled:s,children:s?"Aranıyor...":"Ara"})]})}),s?v.jsx("div",{className:"text-yellow-500 text-center my-10",children:"Arama yapılıyor..."}):n.length>0?v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(h=>v.jsxs("div",{className:"bg-gray-800 bg-opacity-50 rounded-lg p-4 border border-gray-700 flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 mr-3 flex items-center justify-center overflow-hidden",children:h.profile.photoUrl?v.jsx("img",{src:h.profile.photoUrl.startsWith("http")?h.profile.photoUrl:`http://localhost:5000${h.profile.photoUrl}`,alt:h.profile.fullName,className:"w-full h-full object-cover"}):v.jsx("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-gray-200 font-medium",children:h.profile.fullName||"İsimsiz Kullanıcı"}),v.jsx("p",{className:"text-gray-400 text-sm",children:w0t(h.profile.goalType)})]})]}),v.jsx("div",{children:h.isFriend?v.jsx("span",{className:"px-3 py-1 bg-green-800 text-green-200 text-sm rounded-lg",children:"Bu kişi zaten arkadaşınız"}):h.requestSent?v.jsx("span",{className:"px-3 py-1 bg-blue-800 text-blue-200 text-sm rounded-lg",children:"İstek Gönderildi"}):h.requestReceived?v.jsx("span",{className:"px-3 py-1 bg-purple-800 text-purple-200 text-sm rounded-lg",children:"İstek Alındı"}):v.jsx("button",{onClick:()=>d(h._id),className:"px-3 py-1 bg-yellow-500 text-black text-sm rounded-lg hover:bg-yellow-400 transition",children:"Arkadaş Ekle"})})]},h._id))}):t?v.jsx("div",{className:"text-gray-400 text-center py-8",children:v.jsx("p",{children:"Aramanıza uygun sonuç bulunamadı."})}):null]})]})},w0t=t=>({fat_loss:"Yağ Yakma",muscle_gain:"Kas Kütlesi Kazanma",maintenance:"Mevcut Formu Koruma",endurance:"Dayanıklılık Artırma"})[t]||"Belirlenmemiş",S0t=()=>{const[t,e]=L.useState([]),[n,r]=L.useState(!0),[s,a]=L.useState(null),[i,o]=L.useState(null);L.useEffect(()=>{(async()=>{try{const h={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}},m=await Ze.get("http://localhost:5000/api/friends/requests",h);e(m.data)}catch(d){console.error("Arkadaşlık istekleri alınamadı:",d),a("Arkadaşlık istekleri yüklenemedi")}finally{r(!1)}})()},[]);const l=async c=>{try{const h={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}};await Ze.post(`http://localhost:5000/api/friends/accept/${c}`,{},h),e(t.filter(m=>m._id!==c)),o("Arkadaşlık isteği kabul edildi"),setTimeout(()=>o(null),3e3)}catch(d){console.error("İstek kabul edilemedi:",d),a("İstek kabul etme işlemi başarısız oldu")}},u=async c=>{try{const h={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}};await Ze.delete(`http://localhost:5000/api/friends/reject/${c}`,h),e(t.filter(m=>m._id!==c)),o("Arkadaşlık isteği reddedildi"),setTimeout(()=>o(null),3e3)}catch(d){console.error("İstek reddedilemedi:",d),a("İstek reddetme işlemi başarısız oldu")}};return v.jsxs("div",{className:"pt-4 pb-20 md:pb-6 px-4",children:[v.jsxs(Vt,{to:"/dashboard",className:"fixed top-6 left-6 z-50 inline-flex items-center text-yellow-400 hover:text-yellow-300 font-semibold transition text-lg bg-[#181818] bg-opacity-80 px-4 py-2 rounded-full shadow-lg",children:[v.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Panele Dön"]}),v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg rounded-xl shadow-lg p-6 border border-gray-800",children:[v.jsx("h2",{className:"text-2xl font-bold mb-6 text-yellow-500",children:"Arkadaşlık İstekleri"}),s&&v.jsx("div",{className:"bg-red-900 bg-opacity-60 text-red-200 p-3 rounded-lg mb-4",children:s}),i&&v.jsx("div",{className:"bg-green-900 bg-opacity-60 text-green-200 p-3 rounded-lg mb-4",children:i}),n?v.jsx("div",{className:"text-yellow-500 text-center my-10",children:"İstekler yükleniyor..."}):t.length>0?v.jsx("div",{className:"space-y-4",children:t.map(c=>v.jsxs("div",{className:"bg-gray-800 bg-opacity-50 p-4 rounded-lg border border-gray-700 flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 mr-3 flex items-center justify-center overflow-hidden",children:c.from.photoUrl?v.jsx("img",{src:c.from.photoUrl.startsWith("http")?c.from.photoUrl:`http://localhost:5000${c.from.photoUrl}`,alt:c.from.fullName,className:"w-full h-full object-cover"}):v.jsx("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-gray-200 font-medium",children:c.from.fullName}),v.jsx("p",{className:"text-gray-500 text-xs",children:new Date(c.createdAt).toLocaleDateString()})]})]}),v.jsxs("div",{className:"flex space-x-2",children:[v.jsx("button",{onClick:()=>l(c._id),className:"px-3 py-1 bg-yellow-500 text-black text-sm rounded-lg hover:bg-yellow-400 transition",children:"Kabul Et"}),v.jsx("button",{onClick:()=>u(c._id),className:"px-3 py-1 bg-gray-700 text-white text-sm rounded-lg hover:bg-gray-600 transition",children:"Reddet"})]})]},c._id))}):v.jsxs("div",{className:"text-gray-400 text-center py-10",children:[v.jsx("p",{children:"Bekleyen arkadaşlık isteği bulunmuyor."}),v.jsx(Vt,{to:"/find-friends",className:"mt-3 text-yellow-500 hover:text-yellow-400 transition inline-block",children:"Arkadaş aramak için tıklayın"})]})]})]})},C0t=()=>{var D,P,R,O,F,z,V,W,j,q,Y;const{userId:t}=IM(),e=Wl(),[n,r]=L.useState(null),[s,a]=L.useState(!0),[i,o]=L.useState(null),[l,u]=L.useState(null),[c,d]=L.useState(null),[h,m]=L.useState(!1),[g,y]=L.useState(!1),[b,w]=L.useState(!1);L.useEffect(()=>{(async()=>{var H;try{const ee=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");if(!ee){e("/");return}const te={headers:{Authorization:`Bearer ${ee}`}},ne=await Ze.get(`http://localhost:5000/api/users/profile/${t}`,te);console.log("Profile data received:",ne.data),r(ne.data),ne.data.friendshipStatus&&(m(ne.data.friendshipStatus==="friends"),y(ne.data.friendshipStatus==="request_sent"),w(ne.data.friendshipStatus==="request_received"))}catch(ee){console.error("User profile fetch error:",ee),o("Kullanıcı profili yüklenemedi"),((H=ee.response)==null?void 0:H.status)===401&&(localStorage.removeItem("userToken"),localStorage.removeItem("userInfo"),e("/"))}finally{a(!1)}})()},[t,e]);const C=async()=>{var Q,H,ee;try{const ne={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}},he=await Ze.post(`http://localhost:5000/api/friends/request/${t}`,{},ne);console.log("Arkadaşlık isteği cevabı:",he.data),y(!0),u("Arkadaşlık isteği gönderildi"),setTimeout(()=>u(null),3e3)}catch(te){console.error("Arkadaşlık isteği gönderme hatası:",te),console.error("Hata detayları:",(Q=te.response)==null?void 0:Q.data),o(((ee=(H=te.response)==null?void 0:H.data)==null?void 0:ee.message)||"Arkadaşlık isteği gönderilemedi")}},k=async()=>{try{const H={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}};await Ze.post(`http://localhost:5000/api/friends/accept/${t}`,{},H),m(!0),w(!1),u("Arkadaşlık isteği kabul edildi"),setTimeout(()=>u(null),3e3)}catch(Q){console.error("Arkadaşlık isteği kabul hatası:",Q),o("Arkadaşlık isteği kabul edilemedi")}},T=async()=>{try{const H={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}};await Ze.delete(`http://localhost:5000/api/friends/reject/${t}`,H),w(!1),u("Arkadaşlık isteği reddedildi"),setTimeout(()=>u(null),3e3)}catch(Q){console.error("Arkadaşlık isteği reddetme hatası:",Q),o("Arkadaşlık isteği reddedilemedi")}},N=async()=>{try{const H={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")||sessionStorage.getItem("userToken")}`}};await Ze.delete(`http://localhost:5000/api/friends/${t}`,H),m(!1),u("Arkadaşlıktan çıkarıldı"),setTimeout(()=>u(null),3e3)}catch(Q){console.error("Arkadaşlıktan çıkarma hatası:",Q),o("Arkadaşlıktan çıkarılamadı")}},I=Q=>({fat_loss:"Yağ Yakma",muscle_gain:"Kas Kütlesi Kazanma",maintenance:"Mevcut Formu Koruma",endurance:"Dayanıklılık Artırma"})[Q]||"Belirlenmemiş",A=Q=>({sedentary:"Hareketsiz (Masa başı iş, egzersiz yok)",light:"Hafif (Haftada 1-3 gün egzersiz)",moderate:"Orta (Haftada 3-5 gün egzersiz)",active:"Aktif (Haftada 6-7 gün egzersiz)",very_active:"Çok Aktif (Günde 2 kez antrenman)"})[Q]||"Belirlenmemiş";return s?v.jsx("div",{className:"flex items-center justify-center min-h-screen",children:v.jsx("div",{className:"text-yellow-500 text-xl",children:"Yükleniyor..."})}):v.jsxs("div",{className:"pt-4 pb-20 md:pb-6 px-4",children:[v.jsxs(Vt,{to:"/dashboard",className:"mb-6 flex items-center text-yellow-500 hover:text-yellow-400 transition duration-200",children:[v.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Panele Dön"]}),v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 backdrop-blur-lg rounded-xl shadow-lg p-6 border border-gray-800 mb-6",children:[v.jsxs("h2",{className:"text-2xl font-bold mb-6 text-yellow-500",children:[((D=n==null?void 0:n.profile)==null?void 0:D.fullName)||"Kullanıcı"," Profili"]}),i&&v.jsx("div",{className:"bg-red-900 bg-opacity-60 text-red-200 p-3 rounded-lg mb-4",children:i}),l&&v.jsx("div",{className:"bg-green-900 bg-opacity-60 text-green-200 p-3 rounded-lg mb-4",children:l}),n!=null&&n.isPrivate?v.jsx("div",{className:"bg-gray-800 bg-opacity-50 p-4 rounded-lg text-center",children:v.jsxs("div",{className:"flex flex-col items-center mb-3",children:[v.jsx("svg",{className:"w-12 h-12 text-gray-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 15v2m0 0v2m0-2h2m-2 0H9m3-3a3 3 0 100-6 3 3 0 000 6zm0-9a9 9 0 00-9 9v7h6v-7a3 3 0 016 0v7h6v-7a9 9 0 00-9-9z"})}),v.jsx("h3",{className:"text-lg font-medium text-gray-300",children:"Gizli Profil"}),v.jsx("p",{className:"text-gray-400 mt-2",children:"Bu kullanıcı profilini gizli tutmayı tercih etmiştir."}),v.jsx("div",{className:"mt-4 w-full",children:h?v.jsx("button",{className:"w-full px-4 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition duration-300",onClick:N,children:"Arkadaşlıktan Çıkar"}):g?v.jsx("button",{className:"w-full px-4 py-2 bg-gray-600 text-white font-medium rounded-lg cursor-not-allowed",disabled:!0,children:"İstek Gönderildi"}):b?v.jsxs("div",{className:"flex flex-col space-y-2",children:[v.jsx("button",{className:"w-full px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition duration-300",onClick:k,children:"İsteği Kabul Et"}),v.jsx("button",{className:"w-full px-4 py-2 bg-gray-600 text-white font-medium rounded-lg hover:bg-gray-700 transition duration-300",onClick:T,children:"İsteği Reddet"})]}):v.jsx("button",{className:"w-full px-4 py-2 bg-yellow-500 text-black font-medium rounded-lg hover:bg-yellow-400 transition duration-300",onClick:C,children:"Arkadaş Ekle"})})]})}):n!=null&&n.friendsOnly&&!h?v.jsx("div",{className:"bg-gray-800 bg-opacity-50 p-4 rounded-lg text-center",children:v.jsxs("div",{className:"flex flex-col items-center mb-3",children:[v.jsx("svg",{className:"w-12 h-12 text-gray-500 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),v.jsx("h3",{className:"text-lg font-medium text-gray-300",children:"Sadece Arkadaşlara Açık Profil"}),v.jsx("p",{className:"text-gray-400 mt-2",children:"Bu kullanıcının profil bilgileri sadece arkadaşlarına açıktır. Profil bilgilerini görüntülemek için arkadaşlık isteği gönderebilirsiniz."}),v.jsx("div",{className:"mt-4 w-full",children:g?v.jsx("button",{className:"w-full px-4 py-2 bg-gray-600 text-white font-medium rounded-lg cursor-not-allowed",disabled:!0,children:"İstek Gönderildi"}):b?v.jsxs("div",{className:"flex flex-col space-y-2",children:[v.jsx("button",{className:"w-full px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition duration-300",onClick:k,children:"İsteği Kabul Et"}),v.jsx("button",{className:"w-full px-4 py-2 bg-gray-600 text-white font-medium rounded-lg hover:bg-gray-700 transition duration-300",onClick:T,children:"İsteği Reddet"})]}):v.jsx("button",{className:"w-full px-4 py-2 bg-yellow-500 text-black font-medium rounded-lg hover:bg-yellow-400 transition duration-300",onClick:C,children:"Arkadaş Ekle"})})]})}):v.jsxs("div",{className:"flex flex-col md:flex-row",children:[v.jsxs("div",{className:"md:w-1/3 mb-6 md:mb-0 flex flex-col items-center",children:[v.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-800 border-2 border-yellow-500 mb-4 flex items-center justify-center overflow-hidden",children:(P=n==null?void 0:n.profile)!=null&&P.photoUrl?v.jsx("img",{src:n.profile.photoUrl.startsWith("http")?n.profile.photoUrl:`http://localhost:5000${n.profile.photoUrl}`,alt:n.profile.fullName,className:"w-full h-full object-cover"}):v.jsx("svg",{className:"w-16 h-16 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),v.jsx("div",{className:"mt-2 w-full",children:h?v.jsx("button",{className:"w-full px-4 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition duration-300",onClick:N,children:"Arkadaşlıktan Çıkar"}):g?v.jsx("button",{className:"w-full px-4 py-2 bg-gray-600 text-white font-medium rounded-lg cursor-not-allowed",disabled:!0,children:"İstek Gönderildi"}):b?v.jsxs("div",{className:"flex flex-col space-y-2",children:[v.jsx("button",{className:"w-full px-4 py-2 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition duration-300",onClick:k,children:"İsteği Kabul Et"}),v.jsx("button",{className:"w-full px-4 py-2 bg-gray-600 text-white font-medium rounded-lg hover:bg-gray-700 transition duration-300",onClick:T,children:"İsteği Reddet"})]}):v.jsx("button",{className:"w-full px-4 py-2 bg-yellow-500 text-black font-medium rounded-lg hover:bg-yellow-400 transition duration-300",onClick:C,children:"Arkadaş Ekle"})}),v.jsxs("div",{className:"mt-6 w-full bg-gray-800 bg-opacity-40 p-4 rounded-lg",children:[v.jsx("h4",{className:"text-yellow-500 font-medium mb-2",children:"Fitness Amacı"}),v.jsx("p",{className:"text-gray-300",children:I((R=n==null?void 0:n.profile)==null?void 0:R.goalType)}),v.jsx("h4",{className:"text-yellow-500 font-medium mt-4 mb-2",children:"Aktivite Seviyesi"}),v.jsx("p",{className:"text-gray-300",children:A((O=n==null?void 0:n.profile)==null?void 0:O.activityLevel)})]})]}),v.jsx("div",{className:"md:w-2/3 md:pl-6",children:v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"bg-gray-800 bg-opacity-40 p-4 rounded-lg",children:[v.jsx("h3",{className:"text-lg font-semibold text-yellow-500 mb-4",children:"Kişisel Bilgiler"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("h4",{className:"text-gray-300 font-medium mb-1",children:"Ad Soyad"}),v.jsx("p",{className:"text-gray-400",children:((F=n==null?void 0:n.profile)==null?void 0:F.fullName)||"--"})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-gray-300 font-medium mb-1",children:"Yaş"}),v.jsx("p",{className:"text-gray-400",children:((z=n==null?void 0:n.profile)==null?void 0:z.age)||"--"})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[v.jsxs("div",{children:[v.jsx("h4",{className:"text-gray-300 font-medium mb-1",children:"Cinsiyet"}),v.jsx("p",{className:"text-gray-400",children:((V=n==null?void 0:n.profile)==null?void 0:V.gender)==="male"?"Erkek":((W=n==null?void 0:n.profile)==null?void 0:W.gender)==="female"?"Kadın":((j=n==null?void 0:n.profile)==null?void 0:j.gender)==="other"?"Diğer":"--"})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-gray-300 font-medium mb-1",children:"Boy"}),v.jsxs("p",{className:"text-gray-400",children:[((q=n==null?void 0:n.profile)==null?void 0:q.height)||"--"," cm"]})]})]}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:v.jsxs("div",{children:[v.jsx("h4",{className:"text-gray-300 font-medium mb-1",children:"Kilo"}),v.jsxs("p",{className:"text-gray-400",children:[((Y=n==null?void 0:n.profile)==null?void 0:Y.weight)||"--"," kg"]})]})})]}),(n==null?void 0:n.physicalData)&&v.jsxs("div",{className:"bg-gray-800 bg-opacity-40 p-4 rounded-lg mt-6",children:[v.jsx("h3",{className:"text-lg font-semibold text-yellow-500 mb-4",children:"Vücut Ölçüleri"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("h4",{className:"text-gray-300 font-medium mb-1",children:"Vücut Yağ Oranı"}),v.jsxs("p",{className:"text-gray-400",children:[n.physicalData.bodyFat||"--"," %"]})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-gray-300 font-medium mb-1",children:"Bel Çevresi"}),v.jsxs("p",{className:"text-gray-400",children:[n.physicalData.waistCircumference||"--"," cm"]})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-gray-300 font-medium mb-1",children:"Boyun Çevresi"}),v.jsxs("p",{className:"text-gray-400",children:[n.physicalData.neckCircumference||"--"," cm"]})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-gray-300 font-medium mb-1",children:"Kalça Çevresi"}),v.jsxs("p",{className:"text-gray-400",children:[n.physicalData.hipCircumference||"--"," cm"]})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-gray-300 font-medium mb-1",children:"Göğüs Çevresi"}),v.jsxs("p",{className:"text-gray-400",children:[n.physicalData.chestCircumference||"--"," cm"]})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-gray-300 font-medium mb-1",children:"Kol Çevresi"}),v.jsxs("p",{className:"text-gray-400",children:[n.physicalData.armCircumference!==void 0?n.physicalData.armCircumference:"--"," cm"]})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-gray-300 font-medium mb-1",children:"Bacak Çevresi"}),v.jsxs("p",{className:"text-gray-400",children:[n.physicalData.legCircumference!==void 0?n.physicalData.legCircumference:"--"," cm"]})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-gray-300 font-medium mb-1",children:"Baldır Çevresi"}),v.jsxs("p",{className:"text-gray-400",children:[n.physicalData.calfCircumference!==void 0?n.physicalData.calfCircumference:"--"," cm"]})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-gray-300 font-medium mb-1",children:"Omuz Genişliği"}),v.jsxs("p",{className:"text-gray-400",children:[n.physicalData.shoulderWidth||"--"," cm"]})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-gray-300 font-medium mb-1",children:"BMI"}),v.jsx("p",{className:"text-gray-400",children:n.physicalData.bmi||"--"})]})]})]}),v.jsxs("div",{className:"bg-gray-800 bg-opacity-40 p-4 rounded-lg",children:[v.jsx("h3",{className:"text-lg font-semibold text-yellow-500 mb-4",children:"Rozetler"}),n!=null&&n.achievements&&n.achievements.length>0?v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center mb-3",children:[v.jsx(jM,{className:"text-yellow-500 mr-2",size:20}),v.jsxs("span",{className:"text-gray-300",children:["Kazanılan Rozetler: ",n.achievements.filter(Q=>Q.earned).length]})]}),v.jsx(qX,{achievements:n.achievements.filter(Q=>Q.earned),size:"sm",onBadgeClick:d})]}):v.jsx("p",{className:"text-gray-400 text-center py-3",children:"Bu kullanıcı henüz rozet kazanmamış."})]})]})})]})]}),c&&v.jsx(LM,{achievement:c,onClose:()=>d(null)}),v.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-900 bg-opacity-80 backdrop-blur-md border-t border-gray-800 shadow-lg md:hidden",children:v.jsxs("div",{className:"flex justify-around py-3",children:[v.jsxs(Vt,{to:"/dashboard",className:"flex flex-col items-center text-xs",children:[v.jsx("div",{className:"p-1 rounded-full text-gray-400",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),v.jsx("span",{className:"text-gray-400",children:"Panel"})]}),v.jsxs(Vt,{to:"/profile",className:"flex flex-col items-center text-xs",children:[v.jsx("div",{className:"p-1 rounded-full text-gray-400",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),v.jsx("span",{className:"text-gray-400",children:"Profil"})]}),v.jsxs(Vt,{to:"/friends",className:"flex flex-col items-center text-xs",children:[v.jsx("div",{className:"p-1 rounded-full text-gray-400",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),v.jsx("span",{className:"text-gray-400",children:"Arkadaşlar"})]}),v.jsxs(Vt,{to:"/",className:"flex flex-col items-center text-xs",children:[v.jsx("div",{className:"p-1 rounded-full text-gray-400",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),v.jsx("span",{className:"text-gray-400",children:"Çıkış"})]})]})})]})},k0t=()=>{var Je;const t=Wl(),e=Bd(),{programId:n}=e.state||{},[r,s]=L.useState(null),[a,i]=L.useState(!0),[o,l]=L.useState(null),[u,c]=L.useState(""),[d,h]=L.useState(""),[m,g]=L.useState(""),[y,b]=L.useState(""),[w,C]=L.useState([]),[k,T]=L.useState({chest:[],back:[],legs:[],shoulders:[],arms:[],core:[],cardio:[]}),[N,I]=L.useState("intermediate"),[A,D]=L.useState(""),[P,R]=L.useState(!1),[O,F]=L.useState({value:4,type:"week"}),[z,V]=L.useState([]),[W,j]=L.useState(""),[q,Y]=L.useState(""),[Q,H]=L.useState(""),[ee,te]=L.useState(!1),ne={chest:["Bench Press","Incline Bench","Chest Fly","Push-up","Cable Crossover","Dips"],back:["Pull-up","Lat Pulldown","Bent Over Row","T-Bar Row","Face Pull","Deadlift"],legs:["Squat","Leg Press","Lunges","Leg Extension","Leg Curl","Calf Raise"],shoulders:["Shoulder Press","Lateral Raise","Front Raise","Upright Row","Reverse Fly"],arms:["Bicep Curl","Tricep Extension","Hammer Curl","Skull Crusher","Preacher Curl"],core:["Plank","Russian Twist","Sit-up","Leg Raise","Mountain Climber"],cardio:["Running","Cycling","Jumping Rope","Rowing","Stair Climber","Elliptical"]},he={"Bench Press":[{label:"Optimum",sets:4,reps:"8-10"},{label:"Önerilen",sets:3,reps:"10-12"}],"Incline Bench":[{label:"Optimum",sets:4,reps:"8-10"},{label:"Önerilen",sets:3,reps:"10-12"}],"Chest Fly":[{label:"Optimum",sets:3,reps:"12-15"},{label:"Önerilen",sets:2,reps:"15-20"}],"Push-up":[{label:"Optimum",sets:4,reps:"15-20"},{label:"Önerilen",sets:3,reps:"12-15"}],"Cable Crossover":[{label:"Optimum",sets:3,reps:"12-15"},{label:"Önerilen",sets:2,reps:"15-20"}],Dips:[{label:"Optimum",sets:3,reps:"8-12"},{label:"Önerilen",sets:2,reps:"10-15"}],"Pull-up":[{label:"Optimum",sets:4,reps:"6-10"},{label:"Önerilen",sets:3,reps:"5-8"}],"Lat Pulldown":[{label:"Optimum",sets:4,reps:"8-12"},{label:"Önerilen",sets:3,reps:"10-12"}],"Bent Over Row":[{label:"Optimum",sets:4,reps:"8-10"},{label:"Önerilen",sets:3,reps:"10-12"}],"T-Bar Row":[{label:"Optimum",sets:4,reps:"8-10"},{label:"Önerilen",sets:3,reps:"10-12"}],"Face Pull":[{label:"Optimum",sets:3,reps:"12-15"},{label:"Önerilen",sets:2,reps:"15-20"}],Deadlift:[{label:"Optimum",sets:3,reps:"5-8"},{label:"Önerilen",sets:2,reps:"8-10"}],Squat:[{label:"Optimum",sets:4,reps:"8-10"},{label:"Önerilen",sets:3,reps:"12-15"}],"Leg Press":[{label:"Optimum",sets:4,reps:"10-12"},{label:"Önerilen",sets:3,reps:"12-15"}],Lunges:[{label:"Optimum",sets:3,reps:"12-15"},{label:"Önerilen",sets:2,reps:"15-20"}],"Leg Extension":[{label:"Optimum",sets:3,reps:"12-15"},{label:"Önerilen",sets:2,reps:"15-20"}],"Leg Curl":[{label:"Optimum",sets:3,reps:"12-15"},{label:"Önerilen",sets:2,reps:"15-20"}],"Calf Raise":[{label:"Optimum",sets:4,reps:"15-20"},{label:"Önerilen",sets:3,reps:"12-15"}],"Shoulder Press":[{label:"Optimum",sets:4,reps:"8-10"},{label:"Önerilen",sets:3,reps:"10-12"}],"Lateral Raise":[{label:"Optimum",sets:3,reps:"12-15"},{label:"Önerilen",sets:2,reps:"15-20"}],"Front Raise":[{label:"Optimum",sets:3,reps:"12-15"},{label:"Önerilen",sets:2,reps:"15-20"}],"Upright Row":[{label:"Optimum",sets:3,reps:"10-12"},{label:"Önerilen",sets:2,reps:"12-15"}],"Reverse Fly":[{label:"Optimum",sets:3,reps:"12-15"},{label:"Önerilen",sets:2,reps:"15-20"}],"Bicep Curl":[{label:"Optimum",sets:4,reps:"8-12"},{label:"Önerilen",sets:3,reps:"10-15"}],"Tricep Extension":[{label:"Optimum",sets:3,reps:"10-12"},{label:"Önerilen",sets:2,reps:"12-15"}],"Hammer Curl":[{label:"Optimum",sets:3,reps:"10-12"},{label:"Önerilen",sets:2,reps:"12-15"}],"Skull Crusher":[{label:"Optimum",sets:3,reps:"10-12"},{label:"Önerilen",sets:2,reps:"12-15"}],"Preacher Curl":[{label:"Optimum",sets:3,reps:"10-12"},{label:"Önerilen",sets:2,reps:"12-15"}],Plank:[{label:"Optimum",sets:3,reps:"30-60 sn"},{label:"Önerilen",sets:2,reps:"30 sn"}],"Russian Twist":[{label:"Optimum",sets:3,reps:"15-20"},{label:"Önerilen",sets:2,reps:"12-15"}],"Sit-up":[{label:"Optimum",sets:3,reps:"15-20"},{label:"Önerilen",sets:2,reps:"12-15"}],"Leg Raise":[{label:"Optimum",sets:3,reps:"12-15"},{label:"Önerilen",sets:2,reps:"10-12"}],"Mountain Climber":[{label:"Optimum",sets:3,reps:"30-45 sn"},{label:"Önerilen",sets:2,reps:"20-30 sn"}],Running:[{label:"Optimum",sets:1,reps:"20-30 dk"},{label:"Önerilen",sets:1,reps:"15-20 dk"}],Cycling:[{label:"Optimum",sets:1,reps:"30-45 dk"},{label:"Önerilen",sets:1,reps:"20-30 dk"}],"Jumping Rope":[{label:"Optimum",sets:3,reps:"2-3 dk"},{label:"Önerilen",sets:2,reps:"1-2 dk"}],Rowing:[{label:"Optimum",sets:1,reps:"15-20 dk"},{label:"Önerilen",sets:1,reps:"10-15 dk"}],"Stair Climber":[{label:"Optimum",sets:1,reps:"10-15 dk"},{label:"Önerilen",sets:1,reps:"5-10 dk"}],Elliptical:[{label:"Optimum",sets:1,reps:"20-30 dk"},{label:"Önerilen",sets:1,reps:"10-20 dk"}]},[Se,Ie]=L.useState({}),Qe=[{id:1,label:"Pazartesi"},{id:2,label:"Salı"},{id:3,label:"Çarşamba"},{id:4,label:"Perşembe"},{id:5,label:"Cuma"},{id:6,label:"Cumartesi"},{id:7,label:"Pazar"}],Ve=Re=>({fat_loss:"Yağ Yakma",muscle_gain:"Kas Kütlesi Kazanma",maintenance:"Mevcut Formu Koruma",endurance:"Dayanıklılık Artırma"})[Re]||"Belirlenmemiş";function $e({value:Re,type:Ke}){let xe=0;Ke==="day"&&(xe=Re),Ke==="week"&&(xe=Re*7),Ke==="month"&&(xe=Re*30);const De=Math.floor(xe/30),at=xe%30,Xe=Math.floor(at/7),Nt=at%7;let Be=[];return De>0&&Be.push(`${De} ay`),Xe>0&&Be.push(`${Xe} hafta`),Nt>0&&Be.push(`${Nt} gün`),Be.length===0?"0 gün":Be.join(" ")}L.useEffect(()=>{(async()=>{var Ke,xe,De,at;try{const Xe=JSON.parse(localStorage.getItem("user"))||JSON.parse(sessionStorage.getItem("user"));if(!Xe){t("/");return}if(s(Xe),(Ke=e.state)!=null&&Ke.selectedAthlete&&l(e.state.selectedAthlete),n){R(!0);const Nt=localStorage.getItem("userToken")||sessionStorage.getItem("userToken"),Tt=(await Ze.get(`http://localhost:5000/api/training-programs/${n}`,{headers:{Authorization:`Bearer ${Nt}`}})).data;if(console.log("Edit modunda program:",Tt),console.log("Edit modunda programDays:",Tt.programDays),c(Tt.name||""),D(Tt.description||""),I(Tt.difficultyLevel||"intermediate"),l(Tt.athlete||null),Tt.duration&&F(Tt.duration),Tt.programDays&&V(Tt.programDays.map(Number)),Tt.workouts&&Tt.workouts.length>0){const Ot={chest:[],back:[],legs:[],shoulders:[],arms:[],core:[],cardio:[]};Tt.workouts.forEach(Wn=>{Wn.exercises.forEach(rn=>{let cn=!1;Object.entries(ne).forEach(([Jt,Mn])=>{Mn.includes(rn.name)&&(Ot[Jt].some(Ua=>Ua.name===rn.name)||Ot[Jt].push({name:rn.name,sets:rn.sets,reps:rn.reps,notes:rn.notes||""}),cn=!0)}),cn||Ot.core.some(Jt=>Jt.name===rn.name)||Ot.core.push({name:rn.name,sets:rn.sets,reps:rn.reps,notes:rn.notes||""})})}),T(Ot)}}if(((xe=Xe.userType)==null?void 0:xe.toLowerCase())==="coach"){const Nt=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");if(!Nt)throw new Error("Token bulunamadı");const Be=await Ze.get("http://localhost:5000/api/coaches/athletes",{headers:{Authorization:`Bearer ${Nt}`,"Content-Type":"application/json"},withCredentials:!0});if(Be.data)C(Be.data);else throw new Error("Sporcu verileri alınamadı")}i(!1)}catch(Xe){console.error("Veri yükleme hatası:",Xe),Xe.response&&console.error("Hata detayı:",Xe.response.data),i(!1),H(((at=(De=Xe.response)==null?void 0:De.data)==null?void 0:at.message)||Xe.message||"Bilinmeyen bir hata oluştu.")}})()},[t,e.state,n]),L.useEffect(()=>{console.log("programDays state güncellendi:",z)},[z]);const We=(Re,Ke)=>{T(xe=>xe[Re].some(at=>at.name===Ke)?{...xe,[Re]:xe[Re].filter(at=>at.name!==Ke)}:{...xe,[Re]:[...xe[Re].filter(at=>at.name!==Ke),{name:Ke,sets:3,reps:"10-12",notes:""}]})},ze=(Re,Ke,xe,De)=>{T(at=>({...at,[Re]:at[Re].map(Xe=>Xe.name===Ke?{...Xe,[xe]:De}:Xe)}))},ke=Re=>{V(Ke=>Ke.includes(Re)?Ke.filter(xe=>xe!==Re):[...Ke,Re].sort((xe,De)=>xe-De))},et=async()=>{let Re=!1;if(H(""),u?h(""):(h("Lütfen program adı girin."),Re=!0),(!A||A.trim()==="")&&(H("Lütfen program açıklaması girin."),Re=!0),o?g(""):(g("Lütfen bir sporcu seçin."),Re=!0),!O.value||O.value<1?(j("Lütfen geçerli bir süre girin."),Re=!0):j(""),z.length===0?(Y("Lütfen en az bir gün seçin."),Re=!0):Y(""),Object.values(k).flat().length===0?(b("Lütfen en az bir egzersiz seçin."),Re=!0):b(""),!Re)try{const xe=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");if(!xe)throw new Error("Token bulunamadı");const De=Object.values(k).flat();let at=[];P&&n&&(at=(await Ze.get(`http://localhost:5000/api/training-programs/${n}`,{headers:{Authorization:`Bearer ${xe}`}})).data.workouts||[]);const Xe=z.map((Be,Tt)=>{const Ot=at.find(Wn=>Number(Wn.day)===Be);return{day:Be,title:(Ot==null?void 0:Ot.title)||`Antrenman ${Tt+1}`,exercises:(Ot==null?void 0:Ot.exercises)||De}});console.log("Kaydedilen programDays:",z),console.log("Kaydedilen workouts:",Xe);const Nt={name:u,description:A,athleteId:o._id,exercises:De,workouts:Xe,difficultyLevel:N,duration:O,programDays:z};if(P&&n)if((await Ze.put(`http://localhost:5000/api/training-programs/${n}`,Nt,{headers:{Authorization:`Bearer ${xe}`,"Content-Type":"application/json"},withCredentials:!0})).data)t("/dashboard");else throw new Error("Program güncellenemedi");else if((await Ze.post("http://localhost:5000/api/training-programs",Nt,{headers:{Authorization:`Bearer ${xe}`,"Content-Type":"application/json"},withCredentials:!0})).data)t("/dashboard");else throw new Error("Program kaydedilemedi")}catch(xe){console.error("Program kaydetme/güncelleme hatası:",xe),xe.response?(console.error("Hata detayı:",xe.response.data),H(xe.response.data.message||"Bilinmeyen bir hata oluştu.")):H(xe.message||"Bilinmeyen bir hata oluştu.")}};return a?v.jsx("div",{className:"flex items-center justify-center min-h-screen",children:v.jsx("div",{className:"text-yellow-500 text-xl",children:"Yükleniyor..."})}):v.jsxs("div",{className:"min-h-screen bg-[#10131a] text-white pb-20 px-2 md:px-0",children:[Q&&v.jsx("div",{className:"mb-4 p-3 bg-red-900 text-red-300 rounded-lg border border-red-700 text-center font-semibold",children:Q}),v.jsx("div",{className:"pt-4 px-4",children:v.jsxs(Vt,{to:"/dashboard",className:"mb-6 flex items-center text-yellow-500 hover:text-yellow-400 transition duration-200",children:[v.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Panele Dön"]})}),v.jsxs("div",{className:"container mx-auto max-w-6xl pt-8 pb-4",children:[v.jsx("h1",{className:"text-3xl font-bold text-yellow-500 mb-2",children:"Hızlı Program Oluştur"}),v.jsx("p",{className:"text-gray-400 text-base mb-4",children:"Sporcularınız için kolayca antrenman programı oluşturun."})]}),v.jsxs("div",{className:"container mx-auto max-w-6xl grid grid-cols-1 md:grid-cols-3 gap-8",children:[v.jsxs("div",{className:"md:col-span-2 space-y-8",children:[v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 rounded-xl p-8 border border-gray-800 shadow-lg",children:[v.jsx("h2",{className:"text-2xl font-bold text-yellow-400 mb-4",children:"Program Bilgileri"}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Program Adı"}),v.jsx("input",{type:"text",value:u,onChange:Re=>{c(Re.target.value),Re.target.value&&h("")},className:`w-full bg-gray-900 border ${d?"border-red-500":"border-gray-700"} rounded-lg px-4 py-2 text-white focus:outline-none focus:border-yellow-500 text-lg`,placeholder:"Ör: Güç Geliştirme Programı"}),d&&v.jsx("p",{className:"text-red-500 text-sm mt-1",children:d})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Program Açıklaması"}),v.jsx("textarea",{value:A,onChange:Re=>D(Re.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-yellow-500 text-lg",placeholder:"Program hakkında kısa bir açıklama yazın...",rows:"3"})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Program Süresi"}),v.jsxs("div",{className:"flex gap-4",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("input",{type:"number",min:"1",value:O.value,onChange:Re=>{F(Ke=>({...Ke,value:parseInt(Re.target.value)||1})),Re.target.value&&j("")},className:`w-full bg-gray-900 border ${W?"border-red-500":"border-gray-700"} rounded-lg px-4 py-2 text-white focus:outline-none focus:border-yellow-500 text-lg`}),W&&v.jsx("p",{className:"text-red-500 text-sm mt-1",children:W})]}),v.jsx("div",{className:"flex-1",children:v.jsxs("select",{value:O.type,onChange:Re=>F(Ke=>({...Ke,type:Re.target.value})),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-yellow-500 text-lg",children:[v.jsx("option",{value:"day",children:"Gün"}),v.jsx("option",{value:"week",children:"Hafta"}),v.jsx("option",{value:"month",children:"Ay"})]})})]}),v.jsx("div",{className:"text-sm text-gray-400 mt-1",children:$e(O)})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Program Günleri"}),v.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:Qe.map(Re=>v.jsxs("label",{className:`flex items-center gap-2 p-2 rounded-lg cursor-pointer transition
                      ${z.includes(Re.id)?"bg-yellow-500 bg-opacity-20 border border-yellow-500":"bg-gray-800 border border-gray-700 hover:border-yellow-500"}`,children:[v.jsx("input",{type:"checkbox",checked:z.includes(Re.id),onChange:()=>{ke(Re.id),z.length>0&&Y("")},className:"accent-yellow-500 w-4 h-4"}),v.jsx("span",{className:"text-sm",children:Re.label})]},Re.id))}),q&&v.jsx("p",{className:"text-red-500 text-sm mt-1",children:q})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Zorluk Seviyesi"}),v.jsxs("select",{value:N,onChange:Re=>I(Re.target.value),className:"w-full bg-gray-900 border border-yellow-500 text-yellow-400 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-yellow-500 text-lg transition",children:[v.jsx("option",{value:"beginner",className:"text-gray-900",children:"Başlangıç"}),v.jsx("option",{value:"intermediate",className:"text-gray-900",children:"Orta"}),v.jsx("option",{value:"advanced",className:"text-gray-900",children:"İleri"})]})]})]}),v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 rounded-xl p-8 border border-gray-800 shadow-lg",children:[v.jsx("h2",{className:"text-2xl font-bold text-yellow-400 mb-6",children:"Egzersizleri Seç"}),y&&v.jsx("p",{className:"text-red-500 text-sm mb-4",children:y}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(ne).map(([Re,Ke])=>v.jsxs("div",{className:"border border-gray-700 rounded-xl p-5 bg-gray-900 bg-opacity-60 shadow-sm",children:[v.jsx("h3",{className:"font-semibold mb-3 text-lg capitalize text-yellow-300",children:Re==="chest"?"Göğüs":Re==="back"?"Sırt":Re==="legs"?"Bacak":Re==="shoulders"?"Omuz":Re==="arms"?"Kollar":Re==="core"?"Core":Re==="cardio"?"Kardiyo":Re}),v.jsx("div",{className:"grid grid-cols-2 gap-2",children:Ke.map(xe=>{var at;const De=k[Re].find(Xe=>Xe.name===xe);return v.jsxs("div",{className:"flex flex-col gap-1 border-b border-gray-800 pb-2 mb-2",children:[v.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[v.jsx("input",{type:"checkbox",checked:!!De,onChange:()=>We(Re,xe),className:"accent-yellow-500 w-5 h-5 rounded border-gray-600 focus:ring-yellow-500"}),v.jsx("span",{className:"text-gray-200 group-hover:text-yellow-400 transition text-base",children:xe})]}),De&&v.jsxs("div",{className:"flex gap-2 mt-1 flex-wrap items-center",children:[v.jsxs("select",{value:De.optType||"",onChange:Xe=>{var Be;const Nt=Xe.target.value;if(Nt==="custom")Ie(Tt=>({...Tt,[xe]:!0}));else{Ie(Ot=>({...Ot,[xe]:!1}));const Tt=(Be=he[xe])==null?void 0:Be.find(Ot=>Ot.label===Nt);Tt&&(ze(Re,xe,"sets",Tt.sets),ze(Re,xe,"reps",Tt.reps))}ze(Re,xe,"optType",Nt)},className:"bg-gray-900 border border-yellow-500 text-yellow-400 rounded-lg px-2 py-1 focus:outline-none focus:ring-2 focus:ring-yellow-500 text-sm transition w-full",children:[v.jsx("option",{value:"",children:"Öneri seç"}),(at=he[xe])==null?void 0:at.map(Xe=>v.jsxs("option",{value:Xe.label,children:[Xe.label," (",Xe.sets,"x",Xe.reps,")"]},Xe.label)),v.jsx("option",{value:"custom",children:"Manuel"})]}),(Se[xe]||!De.optType||De.optType==="custom")&&v.jsxs(v.Fragment,{children:[v.jsx("input",{type:"number",min:1,value:De.sets,onChange:Xe=>ze(Re,xe,"sets",Xe.target.value),className:"w-16 px-2 py-1 rounded-lg bg-gray-900 border border-yellow-500 text-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-500 text-sm transition placeholder-gray-500",placeholder:"Set"}),v.jsx("input",{type:"text",value:De.reps,onChange:Xe=>ze(Re,xe,"reps",Xe.target.value),className:"w-20 px-2 py-1 rounded-lg bg-gray-900 border border-yellow-500 text-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-500 text-sm transition placeholder-gray-500",placeholder:"Tekrar"})]}),v.jsx("input",{type:"text",value:De.notes,onChange:Xe=>ze(Re,xe,"notes",Xe.target.value),className:"flex-1 px-2 py-1 rounded-lg bg-gray-900 border border-yellow-500 text-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-500 text-sm transition placeholder-gray-500",placeholder:"Not (opsiyonel)"})]})]},xe)})})]},Re))})]})]}),v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 rounded-xl p-8 border border-gray-800 shadow-lg",children:[v.jsx("h2",{className:"text-2xl font-bold text-yellow-400 mb-4",children:"Sporcuyu Seç"}),m&&v.jsx("p",{className:"text-red-500 text-sm mb-4",children:m}),v.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:[w.length===0&&v.jsx("div",{className:"text-gray-400 text-center py-4",children:"Sorumlu olduğunuz sporcu bulunamadı."}),w.map(Re=>{var Ke,xe,De,at,Xe;return v.jsxs("div",{onClick:()=>l(Re),className:`p-4 rounded-xl cursor-pointer transition border flex items-center gap-4
                    ${(o==null?void 0:o._id)===Re._id?"bg-yellow-700 bg-opacity-30 border-yellow-500 text-yellow-200":"bg-gray-700 bg-opacity-30 border-gray-600 hover:border-yellow-600 text-gray-200"}
                  `,children:[v.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-600 flex items-center justify-center text-lg font-bold flex-shrink-0 border border-gray-500",children:((xe=(Ke=Re.profile)==null?void 0:Ke.fullName)==null?void 0:xe.charAt(0))||Re.email.charAt(0)}),v.jsxs("div",{children:[v.jsx("p",{className:"font-semibold text-base",children:((De=Re.profile)==null?void 0:De.fullName)||"İsimsiz Sporcu"}),v.jsxs("p",{className:"text-sm text-gray-400",children:[(at=Re.profile)!=null&&at.age?`${Re.profile.age} yaş`:""," ",(Xe=Re.profile)!=null&&Xe.goalType?`• ${Ve(Re.profile.goalType)}`:""]})]})]},Re._id)})]})]}),v.jsxs("div",{className:"bg-gray-900 bg-opacity-60 rounded-xl p-8 border border-gray-800 shadow-lg",children:[v.jsx("h2",{className:"text-2xl font-bold text-yellow-400 mb-4",children:"Program Özeti"}),v.jsxs("div",{className:"mb-4",children:[v.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Seçilen Egzersiz Sayısı:"}),v.jsxs("p",{className:"text-white font-medium text-lg",children:[Object.values(k).flat().length," egzersiz"]})]}),v.jsxs("div",{className:"mb-6",children:[v.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Sporcu:"}),v.jsx("p",{className:"text-white font-medium text-lg",children:o?((Je=o.profile)==null?void 0:Je.fullName)||"İsimsiz Sporcu":"Seçilmedi"})]}),v.jsxs("button",{onClick:et,className:"w-full py-3 bg-yellow-500 hover:bg-yellow-400 text-black font-bold rounded-lg text-lg transition flex items-center justify-center shadow-lg",children:[v.jsx("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),P&&n?"Programı Güncelle":"Programı Ata"]}),P&&n&&v.jsxs("button",{onClick:()=>te(!0),className:"w-full py-3 mt-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg text-lg transition flex items-center justify-center shadow-lg",children:[v.jsx("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),"Programı Sil"]}),ee&&v.jsx(L3,{isOpen:ee,onClose:()=>te(!1),children:v.jsxs("div",{className:"p-6 text-center",children:[v.jsx("h2",{className:"text-xl font-bold mb-4 text-red-500",children:"Programı Sil"}),v.jsx("p",{className:"mb-6 text-gray-200",children:"Bu programı silmek istediğinize emin misiniz?"}),v.jsxs("div",{className:"flex justify-center gap-4",children:[v.jsx("button",{className:"px-6 py-2 bg-gray-700 text-gray-200 rounded hover:bg-gray-600",onClick:()=>te(!1),children:"Vazgeç"}),v.jsx("button",{className:"px-6 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold",onClick:async()=>{console.log("Silinecek programId:",n);try{const Re=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");await Ze.delete(`http://localhost:5000/api/training-programs/${n}`,{headers:{Authorization:`Bearer ${Re}`}}),te(!1),R(!1),t("/dashboard")}catch{alert("Program silinirken hata oluştu.")}},children:"Sil"})]})]})})]})]})]})]})},S3={getMessages:async()=>{try{const t=await Che();return console.log("MessageService - getMessages response:",t),t}catch(t){throw console.error("MessageService - getMessages error:",t),t}},sendMessage:async(t,e)=>{try{const n=await khe(t,e);return console.log("MessageService - sendMessage response:",n),n}catch(n){throw console.error("MessageService - sendMessage error:",n),n}},markAsRead:async t=>{try{console.log("MessageService - markAsRead called for message:",t);const e=await Nhe(t);return console.log("MessageService - markAsRead response:",e),e}catch(e){throw console.error("MessageService - markAsRead error:",e),e}}},N0t=()=>{var W;const{isOpen:t,setIsOpen:e,activeChat:n,setActiveChat:r}=WX(),[s,a]=L.useState(""),[i,o]=L.useState(""),[l,u]=L.useState([]),[c,d]=L.useState(null),h=L.useRef(null),m=Pue(),[g,y]=L.useState(!1),[b,w]=L.useState([]),{messages:C,loading:k,error:T}=R5(j=>j.message),N=R5(j=>{var q;return(q=j.auth)==null?void 0:q.user})||JSON.parse(localStorage.getItem("user")||sessionStorage.getItem("user")||"{}");N==null||N.userType;const I=()=>{var j;(j=h.current)==null||j.scrollIntoView({behavior:"smooth"})};L.useEffect(()=>{I()},[C]);const A=()=>{const j=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");return j?{headers:{Authorization:`Bearer ${j}`},timeout:15e3}:null},D=async()=>{const j=A();if(j){try{const q=await Ze.get("http://localhost:5000/api/friends",j);u(q.data)}catch(q){console.error("Arkadaş listesi alınamadı:",q),u([])}try{const q=await Ze.get("http://localhost:5000/api/messages",j);m(Tf(q.data))}catch(q){console.error("Mesajlar alınamadı:",q),m(Tf([]))}N!=null&&N.coach&&d(N.coach)}};L.useEffect(()=>{N!=null&&N._id&&D()},[N==null?void 0:N._id]),L.useEffect(()=>{let j;return N!=null&&N._id&&(P(),j=setInterval(()=>{g||P()},1e4)),()=>{j&&clearInterval(j)}},[N==null?void 0:N._id,g]);const P=async()=>{const j=A();if(j){m(B5(!0));try{const Y=(await Ze.get("http://localhost:5000/api/messages",j)).data;if(console.log("Fetched messages:",Y),n){const Q=Y.filter(H=>!H.read&&H.sender._id===n._id&&H.receiver._id===N._id);if(console.log("Unread messages:",Q),Q.length>0){y(!0);try{const H=Q.map(async ne=>{console.log("Marking message as read:",ne._id);const he=await S3.markAsRead(ne._id);return console.log("Mark as read response:",he),he}),ee=await Promise.all(H);console.log("Marked messages:",ee);const te=Y.map(ne=>ee.find(Se=>Se._id===ne._id)?(console.log("Updating message in state:",ne._id),{...ne,read:!0}):ne);console.log("Updated messages state:",te),m(Tf(te))}catch(H){console.error("Error marking messages as read:",H)}finally{y(!1)}}else console.log("No unread messages to mark"),m(Tf(Y))}else console.log("No active chat, updating messages directly"),m(Tf(Y))}catch(q){console.error("Error fetching messages:",q),m(TE("Mesajlar alınamadı."))}finally{m(B5(!1))}}},R=async j=>{if(j.preventDefault(),!(!(n!=null&&n._id)||!s.trim()))try{const q=await S3.sendMessage(n._id,s.trim());console.log("Message sent:",q),a(""),await P()}catch(q){console.error("Error sending message:",q),m(TE("Mesaj gönderilemedi."))}},O=j=>{var Y;const q=C==null?void 0:C.filter(Q=>Q.sender._id===j&&Q.receiver._id===N._id||Q.sender._id===N._id&&Q.receiver._id===j);return((Y=q==null?void 0:q[q.length-1])==null?void 0:Y.content)||"Henüz mesaj yok"},F=()=>{const j=(C==null?void 0:C.filter(q=>!q.read&&q.receiver._id===N._id).length)||0;return console.log("Total unread count:",j),j},z=N&&C?Array.from(new Set(C.map(j=>j.sender._id===N._id?j.receiver:j.sender).filter(j=>!l.some(q=>q._id===j._id)&&(!c||c._id!==j._id)).map(j=>j._id))).map(j=>C.map(q=>q.sender._id===N._id?q.receiver:q.sender).find(q=>q._id===j)):[],V=async j=>{r(j),e(!0);const q=A();if(q)try{const Q=(await Ze.get("http://localhost:5000/api/messages",q)).data,H=Q.filter(ee=>!ee.read&&ee.sender._id===j._id&&ee.receiver._id===N._id);if(console.log("Unread messages for chat:",H),H.length>0){y(!0);try{const ee=H.map(async he=>{console.log("Marking message as read:",he._id);const Se=await S3.markAsRead(he._id);return console.log("Mark as read response:",Se),Se}),te=await Promise.all(ee);console.log("Marked messages:",te);const ne=Q.map(he=>te.find(Ie=>Ie._id===he._id)?(console.log("Updating message in state:",he._id),{...he,read:!0}):he);console.log("Updated messages state:",ne),m(Tf(ne))}catch(ee){console.error("Error marking messages as read:",ee)}finally{y(!1)}}else m(Tf(Q))}catch(Y){console.error("Error fetching messages:",Y),m(TE("Mesajlar alınamadı."))}};return L.useEffect(()=>{(N==null?void 0:N.userType)==="coach"&&(async()=>{try{const q=await ni.get("/coaches/athletes");w(q.data.map(Y=>Y._id))}catch{w([])}})()},[N==null?void 0:N.userType,N==null?void 0:N._id]),N!=null&&N._id?v.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:t?v.jsxs("div",{className:"bg-gray-900 rounded-lg shadow-xl w-[410px] h-[440px] flex flex-col border border-gray-700",children:[v.jsxs("div",{className:"p-3 bg-yellow-500 text-black rounded-t-lg flex justify-between items-center",children:[v.jsx("h3",{className:"font-semibold",children:"Mesajlar"}),v.jsx("button",{onClick:()=>e(!1),className:"hover:text-gray-700",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),v.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[v.jsx("div",{className:"w-1/2 border-r border-gray-700 overflow-y-auto p-2",children:v.jsx("div",{className:"space-y-2",children:[...c?[c]:[],...l,...z].map(j=>{var H,ee,te,ne;const q=((H=j.profile)==null?void 0:H.fullName)||j.fullName||"Bilinmeyen Kullanıcı",Y=j.userType||((ee=j.profile)==null?void 0:ee.userType)||(j._id===((te=N==null?void 0:N.coach)==null?void 0:te._id)?"coach":"athlete");let Q="";return Y==="coach"?j._id===((ne=N==null?void 0:N.coach)==null?void 0:ne._id)?Q="Antrenör (Senin antrenörün)":Q="Antrenör":Y==="athlete"?(N==null?void 0:N.userType)==="coach"&&b.includes(j._id)?Q="Sporcu (Senin sporcun)":Q="Sporcu":Q="Kullanıcı",v.jsxs("div",{onClick:()=>V(j),className:`p-3 cursor-pointer hover:bg-gray-800 rounded-lg ${(n==null?void 0:n._id)===j._id?"bg-gray-800":""}`,children:[v.jsxs("div",{className:"flex flex-col items-start whitespace-normal break-words",children:[v.jsx("span",{className:"text-base font-semibold text-white",children:q}),v.jsx("span",{className:"text-xs text-gray-400 mt-1",children:Q})]}),v.jsx("p",{className:"text-xs text-gray-400 truncate mt-1",children:O(j._id)})]},j._id)})})}),v.jsx("div",{className:"w-2/3 flex flex-col",children:n?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"p-2 border-b border-gray-700",children:v.jsx("h4",{className:"font-medium text-white",children:n.fullName||((W=n.profile)==null?void 0:W.fullName)})}),v.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:[C==null?void 0:C.filter(j=>j.sender._id===n._id&&j.receiver._id===N._id||j.sender._id===N._id&&j.receiver._id===n._id).map(j=>v.jsxs("div",{className:`p-2 rounded-lg max-w-[80%] ${j.sender._id===N._id?"bg-yellow-500 text-black ml-auto":"bg-gray-800 text-white"}`,children:[v.jsx("div",{className:"text-xs text-gray-400 mb-1",children:new Date(j.createdAt).toLocaleTimeString()}),v.jsx("div",{children:j.content})]},j._id)),v.jsx("div",{ref:h})]}),v.jsx("form",{onSubmit:R,className:"p-2 border-t border-gray-700",children:v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{type:"text",value:s,onChange:j=>a(j.target.value),placeholder:"Mesajınız...",className:"flex-1 p-2 border rounded bg-gray-800 text-white border-gray-700 text-sm"}),v.jsx("button",{type:"submit",className:"bg-yellow-500 text-black px-3 py-2 rounded hover:bg-yellow-600 w-20 min-w-fit text-sm",children:"Gönder"})]})})]}):v.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:"Sohbet başlatmak için bir kişi seçin"})})]})]}):v.jsxs("div",{className:"relative",children:[v.jsx("button",{onClick:()=>V(null),className:"bg-yellow-500 text-black p-3 rounded-full shadow-lg hover:bg-yellow-600 transition-colors",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),F()>0&&v.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:F()})]})}):null},T0t=()=>{const[t,e]=L.useState([]),[n,r]=L.useState(!0),[s,a]=L.useState(null),[i,o]=L.useState(""),[l,u]=L.useState(null),[c,d]=L.useState(null);L.useEffect(()=>{(async()=>{try{r(!0),a(null);const g=localStorage.getItem("userToken")||sessionStorage.getItem("userToken");if(!g){navigate("/");return}const y=await Ze.get("http://localhost:5000/api/leaderboard",{headers:{Authorization:`Bearer ${g}`}});e(y.data.leaderboard||[]),u(y.data.currentUserRank),d(y.data.currentUserId)}catch(g){console.error("Leaderboard error:",g),a("Liderlik tablosu yüklenemedi")}finally{r(!1)}})()},[]);const h=t.filter(m=>m.name.toLowerCase().includes(i.toLowerCase()));return v.jsxs("div",{className:"min-h-screen w-full bg-[#111] text-white p-0 m-0",children:[v.jsx("div",{className:"pt-4 px-4",children:v.jsxs(Vt,{to:"/dashboard",className:"mb-6 flex items-center text-yellow-500 hover:text-yellow-400 transition duration-200",children:[v.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Panele Dön"]})}),v.jsxs("div",{className:"w-full max-w-3xl mx-auto px-4 py-8",children:[v.jsx("h2",{className:"text-3xl font-bold text-yellow-400 mb-6",children:"Liderlik Tablosu"}),v.jsxs("div",{className:"mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[v.jsx("input",{type:"text",placeholder:"Kullanıcı ara...",value:i,onChange:m=>o(m.target.value),className:"px-4 py-2 rounded-lg bg-[#1a2236] border border-gray-700 text-white focus:outline-none focus:border-yellow-400 w-full md:w-72"}),l&&v.jsxs("div",{className:"bg-yellow-500 text-black rounded-full px-4 py-2 font-bold text-lg shadow",children:["Sıralamanız: ",l]})]}),n?v.jsx("div",{className:"text-yellow-400 text-lg",children:"Yükleniyor..."}):s?v.jsx("div",{className:"text-red-400",children:s}):v.jsxs("div",{className:"bg-[#1a2236] rounded-xl shadow-lg p-4",children:[v.jsxs("div",{className:"grid grid-cols-12 py-2 border-b border-gray-700 mb-2",children:[v.jsx("div",{className:"col-span-1 text-xs text-gray-400 text-center",children:"#"}),v.jsx("div",{className:"col-span-7 text-xs text-gray-400",children:"Kullanıcı"}),v.jsx("div",{className:"col-span-4 text-xs text-gray-400 text-right",children:"Puan"})]}),h.map((m,g)=>v.jsxs("div",{className:`grid grid-cols-12 items-center py-2 px-1 rounded-lg mb-1 ${m.id===c?"bg-yellow-900 bg-opacity-20 border border-yellow-700":g===0?"bg-yellow-900 bg-opacity-20 border border-yellow-800":g===1?"bg-gray-600 bg-opacity-20 border border-gray-700":g===2?"bg-yellow-800 bg-opacity-10 border border-yellow-900":"hover:bg-gray-700 hover:bg-opacity-30 border border-transparent"}`,children:[v.jsxs("div",{className:"col-span-1 font-bold text-center",children:[g===0&&v.jsx("span",{className:"text-yellow-400",children:"🏆"}),g===1&&v.jsx("span",{className:"text-gray-400",children:"🥈"}),g===2&&v.jsx("span",{className:"text-yellow-700",children:"🥉"}),g>2&&g+1]}),v.jsxs("div",{className:"col-span-7 flex items-center",children:[v.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full mr-2 flex items-center justify-center text-xs border-2 border-gray-600 overflow-hidden",children:m.photoUrl?v.jsx("img",{src:m.photoUrl.startsWith("http")?m.photoUrl:`http://localhost:5000${m.photoUrl}`,alt:m.name,className:"w-full h-full object-cover"}):m.name.charAt(0)}),v.jsxs("span",{className:`truncate ${m.id===c?"text-yellow-300 font-medium":"text-gray-200"}`,children:[m.name," ",m.id===c&&"(Siz)"]})]}),v.jsxs("div",{className:`col-span-4 text-right font-semibold ${m.id===c?"text-yellow-400":"text-gray-300"}`,children:[m.points.toLocaleString()," puan"]})]},m.id)),h.length===0&&v.jsx("div",{className:"text-gray-400 text-center py-8",children:"Sonuç bulunamadı."})]})]})]})};function $0t(){return v.jsx(jde,{children:v.jsx(Ehe,{children:v.jsxs("div",{className:"min-h-screen bg-black font-sans",children:[v.jsxs(pde,{children:[v.jsx(Xs,{path:"/",element:v.jsx(_he,{})}),v.jsx(Xs,{path:"/register",element:v.jsx(Dhe,{})}),v.jsx(Xs,{path:"/forgot-password",element:v.jsx(ipe,{})}),v.jsx(Xs,{path:"/reset-password/:resetToken",element:v.jsx(ope,{})}),v.jsx(Xs,{path:"/dashboard",element:v.jsx(_o,{children:v.jsx(Ohe,{})})}),v.jsx(Xs,{path:"/profile",element:v.jsx(_o,{children:v.jsx(ape,{})})}),v.jsx(Xs,{path:"/progress-history",element:v.jsx(_o,{children:v.jsx(h0t,{})})}),v.jsx(Xs,{path:"/training-programs",element:v.jsx(_o,{children:v.jsx(m0t,{})})}),v.jsx(Xs,{path:"/coaches",element:v.jsx(_o,{children:v.jsx(p0t,{})})}),v.jsx(Xs,{path:"/movement-detection",element:v.jsx(_o,{children:v.jsx(f9e,{})})}),v.jsx(Xs,{path:"/friends",element:v.jsx(_o,{children:v.jsx(h9e,{})})}),v.jsx(Xs,{path:"/find-friends",element:v.jsx(_o,{children:v.jsx(v0t,{})})}),v.jsx(Xs,{path:"/friend-requests",element:v.jsx(_o,{children:v.jsx(S0t,{})})}),v.jsx(Xs,{path:"/profile/:userId",element:v.jsx(_o,{children:v.jsx(C0t,{})})}),v.jsx(Xs,{path:"/program-creator",element:v.jsx(_o,{children:v.jsx(k0t,{})})}),v.jsx(Xs,{path:"/achievements",element:v.jsx(_o,{children:v.jsx(x0t,{})})}),v.jsx(Xs,{path:"/leaderboard",element:v.jsx(T0t,{})})]}),v.jsx(N0t,{})]})})})}yue.createRoot(document.getElementById("root")).render(v.jsx(pe.StrictMode,{children:v.jsx(Oue,{store:kce,children:v.jsx($0t,{})})}));
